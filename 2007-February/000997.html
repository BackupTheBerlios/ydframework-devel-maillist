<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ydf-devel] r2403 - in YDFramework2.0/trunk/examples/weblog: manage	tiny_mce/plugins tiny_mce/plugins/youtube	tiny_mce/plugins/youtube/_notes tiny_mce/plugins/youtube/css	tiny_mce/plugins/youtube/css/_notes tiny_mce/plugins/youtube/images	tiny_mce/plugins/youtube/images/_notes	tiny_mce/plugins/youtube/jscripts	tiny_mce/plugins/youtube/jscripts/_notes	tiny_mce/plugins/youtube/langs tiny_mce/plugins/youtube/langs/_notes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/ydframework-devel/2007-February/index.html" >
   <LINK REL="made" HREF="mailto:ydframework-devel%40lists.berlios.de?Subject=Re%3A%20%5Bydf-devel%5D%20r2403%20-%20in%20YDFramework2.0/trunk/examples/weblog%3A%20manage%0A%09tiny_mce/plugins%20tiny_mce/plugins/youtube%0A%09tiny_mce/plugins/youtube/_notes%20tiny_mce/plugins/youtube/css%0A%09tiny_mce/plugins/youtube/css/_notes%20tiny_mce/plugins/youtube/images%0A%09tiny_mce/plugins/youtube/images/_notes%0A%09tiny_mce/plugins/youtube/jscripts%0A%09tiny_mce/plugins/youtube/jscripts/_notes%0A%09tiny_mce/plugins/youtube/langs%20tiny_mce/plugins/youtube/langs/_notes&In-Reply-To=%3C200702161959.l1GJxKBA005735%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000996.html">
   <LINK REL="Next"  HREF="000998.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ydf-devel] r2403 - in YDFramework2.0/trunk/examples/weblog: manage	tiny_mce/plugins tiny_mce/plugins/youtube	tiny_mce/plugins/youtube/_notes tiny_mce/plugins/youtube/css	tiny_mce/plugins/youtube/css/_notes tiny_mce/plugins/youtube/images	tiny_mce/plugins/youtube/images/_notes	tiny_mce/plugins/youtube/jscripts	tiny_mce/plugins/youtube/jscripts/_notes	tiny_mce/plugins/youtube/langs tiny_mce/plugins/youtube/langs/_notes</H1>
    <B>pclaerhout at mail.berlios.de</B> 
    <A HREF="mailto:ydframework-devel%40lists.berlios.de?Subject=Re%3A%20%5Bydf-devel%5D%20r2403%20-%20in%20YDFramework2.0/trunk/examples/weblog%3A%20manage%0A%09tiny_mce/plugins%20tiny_mce/plugins/youtube%0A%09tiny_mce/plugins/youtube/_notes%20tiny_mce/plugins/youtube/css%0A%09tiny_mce/plugins/youtube/css/_notes%20tiny_mce/plugins/youtube/images%0A%09tiny_mce/plugins/youtube/images/_notes%0A%09tiny_mce/plugins/youtube/jscripts%0A%09tiny_mce/plugins/youtube/jscripts/_notes%0A%09tiny_mce/plugins/youtube/langs%20tiny_mce/plugins/youtube/langs/_notes&In-Reply-To=%3C200702161959.l1GJxKBA005735%40sheep.berlios.de%3E"
       TITLE="[ydf-devel] r2403 - in YDFramework2.0/trunk/examples/weblog: manage	tiny_mce/plugins tiny_mce/plugins/youtube	tiny_mce/plugins/youtube/_notes tiny_mce/plugins/youtube/css	tiny_mce/plugins/youtube/css/_notes tiny_mce/plugins/youtube/images	tiny_mce/plugins/youtube/images/_notes	tiny_mce/plugins/youtube/jscripts	tiny_mce/plugins/youtube/jscripts/_notes	tiny_mce/plugins/youtube/langs tiny_mce/plugins/youtube/langs/_notes">pclaerhout at mail.berlios.de
       </A><BR>
    <I>Fri Feb 16 20:59:20 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000996.html">[ydf-devel] r2402 - YDFramework2.0/trunk/examples/weblog/manage
</A></li>
        <LI>Next message: <A HREF="000998.html">[ydf-devel] r2404 - in	YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube:	. css images jscripts langs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#997">[ date ]</a>
              <a href="thread.html#997">[ thread ]</a>
              <a href="subject.html#997">[ subject ]</a>
              <a href="author.html#997">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: pclaerhout
Date: 2007-02-16 20:59:08 +0100 (Fri, 16 Feb 2007)
New Revision: 2403

Added:
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/_notes/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/_notes/dwsync.xml
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/_notes/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/_notes/dwsync.xml
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/content.css
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/youtube.css
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/editor_plugin.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/images/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/images/_notes/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/images/_notes/dwsync.xml
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/images/youtube.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/jscripts/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/jscripts/_notes/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/jscripts/_notes/dwsync.xml
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/jscripts/youtube.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/langs/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/langs/_notes/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/langs/_notes/dwsync.xml
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/langs/en.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/readme.txt
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/youtube.htm
Modified:
   YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl
Log:
Added a youtube plugin to TinyMCE.

Modified: YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl	2007-02-16 19:57:20 UTC (rev 2402)
+++ YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl	2007-02-16 19:59:08 UTC (rev 2403)
@@ -50,8 +50,8 @@
             editor_deselector : &quot;tfMNoMCE&quot;,
             theme : &quot;advanced&quot;,
             language: &quot;{/literal}{$weblog_language}{literal}&quot;,
-            plugins : &quot;imgselector,fullscreen&quot;,
-            theme_advanced_buttons1 : &quot;bold,italic,separator,justifyleft,justifycenter,justifyright,separator,bullist,numlist,separator,undo,redo,separator,link,unlink,code,fullscreen,separator,imgselector&quot;,
+            plugins : &quot;imgselector,fullscreen,youtube&quot;,
+            theme_advanced_buttons1 : &quot;bold,italic,separator,justifyleft,justifycenter,justifyright,separator,bullist,numlist,separator,undo,redo,separator,link,unlink,code,fullscreen,separator,imgselector,youtube&quot;,
             theme_advanced_buttons2 : &quot;&quot;,
             theme_advanced_buttons3 : &quot;&quot;,
             theme_advanced_toolbar_location : &quot;top&quot;,

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/_notes/dwsync.xml
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/_notes/dwsync.xml	2007-02-16 19:57:20 UTC (rev 2402)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/_notes/dwsync.xml	2007-02-16 19:59:08 UTC (rev 2403)
@@ -0,0 +1,6 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
+&lt;dwsync&gt;
+&lt;file name=&quot;editor_plugin.js&quot; local=&quot;128051174690000000&quot; remote=&quot;128050925400000000&quot; testing=&quot;0&quot; /&gt;
+&lt;file name=&quot;readme.txt&quot; local=&quot;128050545470000000&quot; remote=&quot;128050880400000000&quot; testing=&quot;0&quot; /&gt;
+&lt;file name=&quot;youtube.htm&quot; local=&quot;128051176520000000&quot; remote=&quot;128050925400000000&quot; testing=&quot;0&quot; /&gt;
+&lt;/dwsync&gt;
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/_notes/dwsync.xml
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/_notes/dwsync.xml	2007-02-16 19:57:20 UTC (rev 2402)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/_notes/dwsync.xml	2007-02-16 19:59:08 UTC (rev 2403)
@@ -0,0 +1,5 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
+&lt;dwsync&gt;
+&lt;file name=&quot;content.css&quot; local=&quot;128050625070000000&quot; remote=&quot;128050880400000000&quot; testing=&quot;0&quot; /&gt;
+&lt;file name=&quot;youtube.css&quot; local=&quot;128050545470000000&quot; remote=&quot;128050880400000000&quot; testing=&quot;0&quot; /&gt;
+&lt;/dwsync&gt;
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/content.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/content.css	2007-02-16 19:57:20 UTC (rev 2402)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/content.css	2007-02-16 19:59:08 UTC (rev 2403)
@@ -0,0 +1,7 @@
+.mceItemYouTube {
+	border: 1px dotted #cc0000;
+	background-image: url(../images/youtube.gif);
+	background-position: center;
+	background-repeat: no-repeat;
+	background-color: #ffffcc;
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/youtube.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/youtube.css	2007-02-16 19:57:20 UTC (rev 2402)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/css/youtube.css	2007-02-16 19:59:08 UTC (rev 2403)
@@ -0,0 +1,11 @@
+.panel_wrapper div.current {
+	height: 100px;
+}
+
+#width, #height {
+	width: 50px;
+}
+
+#file {
+	width: 250px;
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/editor_plugin.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/editor_plugin.js	2007-02-16 19:57:20 UTC (rev 2402)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/editor_plugin.js	2007-02-16 19:59:08 UTC (rev 2403)
@@ -0,0 +1,219 @@
+tinyMCE.importPluginLanguagePack('youtube','en,tr,de,sv,zh_cn,cs,fa,fr_ca,fr,pl,pt_br,nl,da,he,nb,hu,ru,ru_KOI8-R,ru_UTF-8,nn,es,cy,is,zh_tw,zh_tw_utf8,sk,pt_br');
+var TinyMCE_YouTubePlugin={
+		getInfo:function(){
+			return{
+					longname:'YouTube',author:'Adrian Hope-Bailie',authorurl:'<A HREF="http://www.digitsolutions.co.za">http://www.digitsolutions.co.za</A>',infourl:'<A HREF="http://www.digitsolutions/tinymce/docs/plugin_youtube.html">http://www.digitsolutions/tinymce/docs/plugin_youtube.html</A>',version:tinyMCE.majorVersion+&quot;.&quot;+tinyMCE.minorVersion};
+		},
+		initInstance:function(inst){
+			if(!tinyMCE.settings['youtube_skip_plugin_css'])
+					tinyMCE.importCSS(inst.getDoc(),tinyMCE.baseURL+&quot;/plugins/youtube/css/content.css&quot;);
+		},
+		getControlHTML:function(cn){
+			switch(cn){
+				case&quot;youtube&quot;:
+					return tinyMCE.getButtonHTML(cn,'lang_youtube_desc','{$pluginurl}/images/youtube.gif','mceYouTube');
+			}
+			return&quot;&quot;;
+		},
+		execCommand:function(editor_id,element,command,user_interface,value){
+			switch(command){
+				case&quot;mceYouTube&quot;:
+					var name=&quot;&quot;,swffile=&quot;&quot;,swfwidth=&quot;&quot;,swfheight=&quot;&quot;,action=&quot;insert&quot;;
+					var template=new Array();
+					var inst=tinyMCE.getInstanceById(editor_id);
+					var focusElm=inst.getFocusElement();
+					template['file']='../../plugins/youtube/youtube.htm';
+					template['width']=430;
+					template['height']=175;
+					template['width']+=tinyMCE.getLang('lang_youtube_delta_width',0);
+					template['height']+=tinyMCE.getLang('lang_youtube_delta_height',0);
+					
+					if(focusElm!=null&amp;&amp;focusElm.nodeName.toLowerCase()==&quot;img&quot;){
+						name=tinyMCE.getAttrib(focusElm,'class');
+						if(name.indexOf('mceItemYouTube')==-1)
+							return true;
+						swffile=tinyMCE.getAttrib(focusElm,'alt');
+						
+						//if(tinyMCE.getParam('convert_urls'))
+						//	swffile=eval(tinyMCE.settings['urlconverter_callback']+&quot;(swffile, null, true);&quot;);
+						
+						swfwidth=tinyMCE.getAttrib(focusElm,'width');
+						swfheight=tinyMCE.getAttrib(focusElm,'height');
+						action=&quot;update&quot;;
+					}
+					
+					tinyMCE.openWindow(template,{
+									   editor_id:editor_id,
+									   inline:&quot;yes&quot;,
+									   swffile:swffile,
+									   swfwidth:swfwidth,
+									   swfheight:swfheight,
+									   action:action});
+					return true;
+			}
+			return false;
+		},
+		cleanup:function(type,content){
+			switch(type){
+				case&quot;insert_to_editor_dom&quot;:
+					if(tinyMCE.getParam('convert_urls')){
+						var imgs=content.getElementsByTagName(&quot;img&quot;);
+						for(var i=0; i&lt;imgs.length; i++){
+							if(tinyMCE.getAttrib(imgs[i],&quot;class&quot;)==&quot;mceItemYouTube&quot;){
+								var src=tinyMCE.getAttrib(imgs[i],&quot;alt&quot;);
+								//if(tinyMCE.getParam('convert_urls'))
+								//	src=eval(tinyMCE.settings['urlconverter_callback']+&quot;(src, null, true);&quot;);
+								imgs[i].setAttribute('alt',src);
+								imgs[i].setAttribute('title',src);
+							}
+						}
+					}
+					break;
+					
+				case&quot;get_from_editor_dom&quot;:
+					var imgs=content.getElementsByTagName(&quot;img&quot;);
+					for(var i=0; i&lt;imgs.length;i++){
+						if(tinyMCE.getAttrib(imgs[i],&quot;class&quot;)==&quot;mceItemYouTube&quot;){
+							var src=tinyMCE.getAttrib(imgs[i],&quot;alt&quot;);
+							//if(tinyMCE.getParam('convert_urls'))
+							//	src=eval(tinyMCE.settings['urlconverter_callback']+&quot;(src, null, true);&quot;);
+							imgs[i].setAttribute('alt',src);
+							imgs[i].setAttribute('title',src);
+						}
+					}
+					break;
+					
+				case&quot;insert_to_editor&quot;:
+					var startPos=0;
+					var embedList=new Array();
+					content=content.replace(new RegExp('&lt;[ ]*embed','gi'),'&lt;embed');
+					content=content.replace(new RegExp('&lt;[ ]*/embed[ ]*&gt;','gi'),'&lt;/embed&gt;');
+					content=content.replace(new RegExp('&lt;[ ]*object','gi'),'&lt;object');
+					content=content.replace(new RegExp('&lt;[ ]*/object[ ]*&gt;','gi'),'&lt;/object&gt;');
+					while((startPos=content.indexOf('&lt;embed',startPos+1))!=-1){
+						var endPos=content.indexOf('&gt;',startPos);
+						var attribs=TinyMCE_YouTubePlugin._parseAttributes(content.substring(startPos+6,endPos));
+						//Ensure this is a YouTube Video and not just a regular flash video
+						if(content.substring(startPos+6,endPos).indexOf(tinyMCE.getParam('youtube_url_prefix','<A HREF="http://www.youtube.com/v/">http://www.youtube.com/v/</A>'))!=-1)
+							embedList[embedList.length]=attribs;
+					}
+					var index=0;
+					while((startPos=content.indexOf('&lt;object',startPos))!=-1){
+						if(index&gt;=embedList.length)
+							break;
+					
+						var attribs=embedList[index];
+						endPos=content.indexOf('&lt;/object&gt;',startPos);
+						
+						//Ensure this is a YouTube Video and not just a regular flash video
+						if(content.substring(startPos+7,endPos).indexOf(tinyMCE.getParam('youtube_url_prefix','<A HREF="http://www.youtube.com/v/">http://www.youtube.com/v/</A>'))!=-1){
+							endPos+=9;
+							var contentAfter=content.substring(endPos);
+							attribs[&quot;src&quot;] = attribs[&quot;src&quot;].replace(new RegExp(tinyMCE.getParam('youtube_url_prefix','<A HREF="http://www.youtube.com/v/">http://www.youtube.com/v/</A>'),'gi'),'');
+							content=content.substring(0,startPos);
+							content+='&lt;img width=&quot;'+attribs[&quot;width&quot;]+'&quot; height=&quot;'+attribs[&quot;height&quot;]+'&quot;';
+							content+=' src=&quot;'+(tinyMCE.getParam(&quot;theme_href&quot;)+'/images/spacer.gif')+'&quot; title=&quot;'+attribs[&quot;src&quot;]+'&quot;';
+							content+=' alt=&quot;'+attribs[&quot;src&quot;]+'&quot; class=&quot;mceItemYouTube&quot; /&gt;'+content.substring(endPos);
+							content+=contentAfter;
+							index++;
+						}
+						startPos++;
+					}
+					
+					var index=0;
+					while((startPos=content.indexOf('&lt;embed',startPos))!=-1){
+						if(index&gt;=embedList.length)
+							break;
+						var attribs=embedList[index];
+						endPos=content.indexOf('&gt;',startPos);
+						//Ensure this is a YouTube Video and not just a regular flash video
+						if(content.substring(startPos+7,endPos).indexOf(tinyMCE.getParam('youtube_url_prefix','<A HREF="http://www.youtube.com/v/">http://www.youtube.com/v/</A>'))!=-1){
+							endPos+=9;
+							var contentAfter=content.substring(endPos);
+							attribs[&quot;src&quot;] = attribs[&quot;src&quot;].replace(new RegExp(tinyMCE.getParam('youtube_url_prefix','<A HREF="http://www.youtube.com/v/">http://www.youtube.com/v/</A>'),'gi'),'');
+							content=content.substring(0,startPos);
+							content+='&lt;img width=&quot;'+attribs[&quot;width&quot;]+'&quot; height=&quot;'+attribs[&quot;height&quot;]+'&quot;';
+							content+=' src=&quot;'+(tinyMCE.getParam(&quot;theme_href&quot;)+'/images/spacer.gif')+'&quot; title=&quot;'+attribs[&quot;src&quot;]+'&quot;';
+							content+=' alt=&quot;'+attribs[&quot;src&quot;]+'&quot; class=&quot;mceItemYouTube&quot; /&gt;'+content.substring(endPos);
+							content+=contentAfter;
+							index++;
+						}
+						startPos++;
+					}
+					break;
+					
+				case&quot;get_from_editor&quot;:
+					var startPos=-1;
+					while((startPos=content.indexOf('&lt;img',startPos+1))!=-1){
+						var endPos=content.indexOf('/&gt;',startPos);
+						var attribs=TinyMCE_YouTubePlugin._parseAttributes(content.substring(startPos+4,endPos));
+						if(attribs['class']!=&quot;mceItemYouTube&quot;)
+							continue;
+						endPos+=2;
+						var embedHTML='';
+						var wmode=tinyMCE.getParam(&quot;youtube_wmode&quot;,&quot;&quot;);
+						var url_prefix = tinyMCE.getParam('youtube_url_prefix','<A HREF="http://www.youtube.com/v/">http://www.youtube.com/v/</A>');
+						embedHTML+='&lt;object';
+						embedHTML+=' width=&quot;'+attribs[&quot;width&quot;]+'&quot; height=&quot;'+attribs[&quot;height&quot;]+'&quot;&gt;';
+						embedHTML+='&lt;param name=&quot;movie&quot; value=&quot;'+url_prefix+attribs[&quot;title&quot;]+'&quot; /&gt;';
+						embedHTML+='&lt;param name=&quot;wmode&quot; value=&quot;'+wmode+'&quot; /&gt;';
+						embedHTML+='&lt;embed src=&quot;'+url_prefix+attribs[&quot;title&quot;]+'&quot; wmode=&quot;'+wmode+'&quot; type=&quot;application/x-shockwave-flash&quot; width=&quot;'+attribs[&quot;width&quot;]+'&quot; height=&quot;'+attribs[&quot;height&quot;]+'&quot;&gt;&lt;/embed&gt;&lt;/object&gt;';
+						chunkBefore=content.substring(0,startPos);
+						chunkAfter=content.substring(endPos);
+						content=chunkBefore+embedHTML+chunkAfter;
+					}
+					break;
+			}
+			return content;
+		},
+		handleNodeChange:function(editor_id,node,undo_index,undo_levels,visual_aid,any_selection){
+			if(node==null)
+				return;
+			do{
+				if(node.nodeName==&quot;IMG&quot;&amp;&amp;tinyMCE.getAttrib(node,'class').indexOf('mceItemYouTube')==0){
+					tinyMCE.switchClass(editor_id+'_youtube','mceButtonSelected');
+					return true;
+				}
+			}
+			while((node=node.parentNode));
+			
+			tinyMCE.switchClass(editor_id+'_youtube','mceButtonNormal');
+			return true;
+		},
+		_parseAttributes:function(attribute_string){
+			var attributeName=&quot;&quot;;
+			var attributeValue=&quot;&quot;;
+			var withInName;
+			var withInValue;
+			var attributes=new Array();
+			var whiteSpaceRegExp=new RegExp('^[ \n\r\t]+','g');
+			if(attribute_string==null||attribute_string.length&lt;2)
+				return null;
+			withInName=withInValue=false;
+			for(var i=0; i&lt;attribute_string.length; i++){
+				var chr=attribute_string.charAt(i);
+				if((chr=='&quot;'||chr==&quot;'&quot;)&amp;&amp;!withInValue)
+					withInValue=true;
+				else if((chr=='&quot;'||chr==&quot;'&quot;)&amp;&amp;withInValue){
+					withInValue=false;
+					var pos=attributeName.lastIndexOf(' ');
+					if(pos!=-1)
+						attributeName=attributeName.substring(pos+1);
+					attributes[attributeName.toLowerCase()]=attributeValue.substring(1);
+					attributeName=&quot;&quot;;
+					attributeValue=&quot;&quot;;
+				}
+				else if(!whiteSpaceRegExp.test(chr)&amp;&amp;!withInName&amp;&amp;!withInValue)
+					withInName=true;
+
+				if(chr=='='&amp;&amp;withInName)
+					withInName=false;
+				if(withInName)
+					attributeName+=chr;
+				if(withInValue)
+					attributeValue+=chr;
+			}
+			return attributes;
+		}
+	};
+tinyMCE.addPlugin(&quot;youtube&quot;,TinyMCE_YouTubePlugin);

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/images/_notes/dwsync.xml
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/images/_notes/dwsync.xml	2007-02-16 19:57:20 UTC (rev 2402)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/images/_notes/dwsync.xml	2007-02-16 19:59:08 UTC (rev 2403)
@@ -0,0 +1,4 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
+&lt;dwsync&gt;
+&lt;file name=&quot;youtube.gif&quot; local=&quot;128050547300000000&quot; remote=&quot;128050880400000000&quot; testing=&quot;0&quot; /&gt;
+&lt;/dwsync&gt;
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/images/youtube.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/images/youtube.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/jscripts/_notes/dwsync.xml
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/jscripts/_notes/dwsync.xml	2007-02-16 19:57:20 UTC (rev 2402)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/jscripts/_notes/dwsync.xml	2007-02-16 19:59:08 UTC (rev 2403)
@@ -0,0 +1,4 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
+&lt;dwsync&gt;
+&lt;file name=&quot;youtube.js&quot; local=&quot;128051181170000000&quot; remote=&quot;128050925400000000&quot; testing=&quot;0&quot; /&gt;
+&lt;/dwsync&gt;
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/jscripts/youtube.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/jscripts/youtube.js	2007-02-16 19:57:20 UTC (rev 2402)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/jscripts/youtube.js	2007-02-16 19:59:08 UTC (rev 2403)
@@ -0,0 +1,108 @@
+var url = tinyMCE.getParam(&quot;youtube_external_list_url&quot;);
+if (url != null) {
+	// Fix relative
+	if (url.charAt(0) != '/' &amp;&amp; url.indexOf('://') == -1)
+		url = tinyMCE.documentBasePath + &quot;/&quot; + url;
+
+	document.write('&lt;sc'+'ript language=&quot;javascript&quot; type=&quot;text/javascript&quot; src=&quot;' + url + '&quot;&gt;&lt;/sc'+'ript&gt;');
+}
+
+function init() {
+	tinyMCEPopup.resizeToInnerSize();
+
+	document.getElementById(&quot;filebrowsercontainer&quot;).innerHTML = getBrowserHTML('filebrowser','file','youtube','youtube');
+
+	// Image list outsrc
+	var html = getYouTubeListHTML('filebrowser','file','youtube','youtube');
+	if (html == &quot;&quot;)
+		document.getElementById(&quot;linklistrow&quot;).style.display = 'none';
+	else
+		document.getElementById(&quot;linklistcontainer&quot;).innerHTML = html;
+
+	var formObj = document.forms[0];
+	var swffile   = tinyMCE.getWindowArg('swffile');
+	var swfwidth  = '' + tinyMCE.getWindowArg('swfwidth');
+	var swfheight = '' + tinyMCE.getWindowArg('swfheight');
+
+	if (swfwidth.indexOf('%')!=-1) {
+		formObj.width2.value = &quot;%&quot;;
+		formObj.width.value  = swfwidth.substring(0,swfwidth.length-1);
+	} else {
+		formObj.width2.value = &quot;px&quot;;
+		formObj.width.value  = swfwidth;
+	}
+
+	if (swfheight.indexOf('%')!=-1) {
+		formObj.height2.value = &quot;%&quot;;
+		formObj.height.value  = swfheight.substring(0,swfheight.length-1);
+	} else {
+		formObj.height2.value = &quot;px&quot;;
+		formObj.height.value  = swfheight;
+	}
+
+	swffile=swffile.replace(new RegExp(tinyMCE.getParam('youtube_url_prefix','<A HREF="http://www.youtube.com/v/">http://www.youtube.com/v/</A>'),'gi'),'');
+	formObj.file.value = swffile;
+	formObj.insert.value = tinyMCE.getLang('lang_' + tinyMCE.getWindowArg('action'), 'Insert', true);
+
+	selectByValue(formObj, 'linklist', swffile);
+
+	// Handle file browser
+	if (isVisible('filebrowser'))
+		document.getElementById('file').style.width = '230px';
+
+	// Auto select youtube in list
+	if (typeof(tinyMCEYouTubeList) != &quot;undefined&quot; &amp;&amp; tinyMCEYouTubeList.length &gt; 0) {
+		for (var i=0; i&lt;formObj.linklist.length; i++) {
+			if (formObj.linklist.options[i].value == tinyMCE.getWindowArg('swffile'))
+				formObj.linklist.options[i].selected = true;
+		}
+	}
+}
+
+function getYouTubeListHTML() {
+	if (typeof(tinyMCEYouTubeList) != &quot;undefined&quot; &amp;&amp; tinyMCEYouTubeList.length &gt; 0) {
+		var html = &quot;&quot;;
+
+		html += '&lt;select id=&quot;linklist&quot; name=&quot;linklist&quot; style=&quot;width: 250px&quot; onfocus=&quot;tinyMCE.addSelectAccessibility(event, this, window);&quot; onchange=&quot;this.form.file.value=this.options[this.selectedIndex].value;&quot;&gt;';
+		html += '&lt;option value=&quot;&quot;&gt;---&lt;/option&gt;';
+
+		for (var i=0; i&lt;tinyMCEYouTubeList.length; i++)
+			html += '&lt;option value=&quot;' + tinyMCEYouTubeList[i][1] + '&quot;&gt;' + tinyMCEYouTubeList[i][0] + '&lt;/option&gt;';
+
+		html += '&lt;/select&gt;';
+
+		return html;
+	}
+
+	return &quot;&quot;;
+}
+
+function insertYouTube() {
+	var formObj = document.forms[0];
+	var html      = '';
+	var file      = formObj.file.value;
+	var width     = formObj.width.value;
+	var height    = formObj.height.value;
+	if (formObj.width2.value=='%') {
+		width = width + '%';
+	}
+	if (formObj.height2.value=='%') {
+		height = height + '%';
+	}
+
+	if (width == &quot;&quot;)
+		width = 425;
+
+	if (height == &quot;&quot;)
+		height = 350;
+
+	html += ''
+		+ '&lt;img src=&quot;' + (tinyMCE.getParam(&quot;theme_href&quot;) + &quot;/images/spacer.gif&quot;) + '&quot; mce_src=&quot;' + (tinyMCE.getParam(&quot;theme_href&quot;) + &quot;/images/spacer.gif&quot;) + '&quot; '
+		+ 'width=&quot;' + width + '&quot; height=&quot;' + height + '&quot; '
+		+ 'border=&quot;0&quot; alt=&quot;' + file + '&quot; title=&quot;' + file + '&quot; class=&quot;mceItemYouTube&quot; /&gt;';
+
+	tinyMCEPopup.execCommand(&quot;mceInsertContent&quot;, true, html);
+	tinyMCE.selectedInstance.repaint();
+
+	tinyMCEPopup.close();
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/langs/_notes/dwsync.xml
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/langs/_notes/dwsync.xml	2007-02-16 19:57:20 UTC (rev 2402)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/langs/_notes/dwsync.xml	2007-02-16 19:59:08 UTC (rev 2403)
@@ -0,0 +1,4 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
+&lt;dwsync&gt;
+&lt;file name=&quot;en.js&quot; local=&quot;128051132610000000&quot; remote=&quot;128050913400000000&quot; testing=&quot;0&quot; /&gt;
+&lt;/dwsync&gt;
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/langs/en.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/langs/en.js	2007-02-16 19:57:20 UTC (rev 2402)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/langs/en.js	2007-02-16 19:59:08 UTC (rev 2403)
@@ -0,0 +1,11 @@
+// UK lang variables
+
+tinyMCE.addToLang('youtube',{
+title : 'Insert / edit YouTube Movie',
+desc : 'Insert / edit YouTube Movie',
+file : 'Movie ID',
+size : 'Size',
+list : 'You Tube movies',
+props : 'YouTube properties',
+general : 'General'
+});

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/readme.txt
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/readme.txt	2007-02-16 19:57:20 UTC (rev 2402)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/readme.txt	2007-02-16 19:59:08 UTC (rev 2403)
@@ -0,0 +1,18 @@
+YouTube TinyMCE plugin v1.0
+Written by Adrian Hope-Bailie
+Based on Flash Plugin by Moxiecode
+
+Currently this plugin will NOT play nice with the flash plugin, but this should be resolved in v1.1
+
+INSTALL:
+To install simply place entire &quot;youtube&quot; folder in the &quot;tinymce\jscripts\tiny_mce\plugins&quot; folder.
+
+To add context menu support edit the file &quot;tinymce\jscripts\tiny_mce\plugins\contextmenu\editor_plugin.js&quot; 
+
+Find the code that reads:
+
+if(tinyMCE.getAttrib(elm,'class').indexOf('mceItemFlash')!=-1)contextMenu.addItem(tinyMCE.baseURL+&quot;/plugins/flash/images/flash.gif&quot;,&quot;$lang_flash_props&quot;,&quot;mceFlash&quot;);
+
+Insert the following code immediately afterwards:
+
+else if (tinyMCE.getAttrib(elm, 'class').indexOf('mceItemYouTube') != -1)contextMenu.addItem(tinyMCE.baseURL + &quot;/plugins/youtube/images/youtube.gif&quot;, &quot;$lang_youtube_props&quot;, &quot;mceYouTube&quot;);

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/youtube.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/youtube.htm	2007-02-16 19:57:20 UTC (rev 2402)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube/youtube.htm	2007-02-16 19:59:08 UTC (rev 2403)
@@ -0,0 +1,70 @@
+&lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot;&gt;
+&lt;head&gt;
+	&lt;title&gt;{$lang_youtube_title}&lt;/title&gt;
+	&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot; src=&quot;../../tiny_mce_popup.js&quot;&gt;&lt;/script&gt;
+	&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot; src=&quot;jscripts/youtube.js&quot;&gt;&lt;/script&gt;
+	&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot; src=&quot;../../utils/mctabs.js&quot;&gt;&lt;/script&gt;
+	&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot; src=&quot;../../utils/form_utils.js&quot;&gt;&lt;/script&gt;
+	&lt;link href=&quot;css/youtube.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
+	&lt;base target=&quot;_self&quot; /&gt;
+&lt;/head&gt;
+&lt;body onLoad=&quot;tinyMCEPopup.executeOnLoad('init();');&quot; style=&quot;display: none&quot;&gt;
+    &lt;form onSubmit=&quot;insertYouTube();return false;&quot; action=&quot;#&quot;&gt;
+		&lt;div class=&quot;tabs&quot;&gt;
+			&lt;ul&gt;
+				&lt;li id=&quot;general_tab&quot; class=&quot;current&quot;&gt;&lt;span&gt;&lt;a href=&quot;javascript:mcTabs.displayTab('general_tab','general_panel');&quot; onMouseDown=&quot;return false;&quot;&gt;{$lang_youtube_general}&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
+			&lt;/ul&gt;
+		&lt;/div&gt;
+
+		&lt;div class=&quot;panel_wrapper&quot;&gt;
+			&lt;div id=&quot;general_panel&quot; class=&quot;panel current&quot;&gt;
+				&lt;fieldset&gt;
+					&lt;legend&gt;{$lang_youtube_general}&lt;/legend&gt;
+
+					&lt;table border=&quot;0&quot; cellpadding=&quot;4&quot; cellspacing=&quot;0&quot;&gt;
+							&lt;tr&gt;
+							&lt;td nowrap=&quot;nowrap&quot;&gt;&lt;label for=&quot;file&quot;&gt;{$lang_youtube_file}&lt;/label&gt;&lt;/td&gt;
+							  &lt;td nowrap=&quot;nowrap&quot;&gt;
+									&lt;table border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;
+									  &lt;tr&gt;
+										&lt;td&gt;&lt;input id=&quot;file&quot; name=&quot;file&quot; type=&quot;text&quot; value=&quot;&quot; onFocus=&quot;this.select();&quot; /&gt;&lt;/td&gt;
+										&lt;td id=&quot;filebrowsercontainer&quot; style=&quot;visibility:hidden; display:none;&quot; &gt;&nbsp;&lt;/td&gt;
+									  &lt;/tr&gt;
+									&lt;/table&gt;
+								&lt;/td&gt;
+							&lt;/tr&gt;
+							&lt;tr id=&quot;linklistrow&quot;&gt;
+								&lt;td&gt;&lt;label for=&quot;linklist&quot;&gt;{$lang_youtube_list}&lt;/label&gt;&lt;/td&gt;
+								&lt;td id=&quot;linklistcontainer&quot;&gt;&nbsp;&lt;/td&gt;
+							&lt;/tr&gt;
+							&lt;tr&gt;
+								&lt;td nowrap=&quot;nowrap&quot;&gt;&lt;label&gt;{$lang_youtube_size}&lt;/label&gt;&lt;/td&gt;
+								&lt;td nowrap=&quot;nowrap&quot;&gt;
+									&lt;input type=&quot;text&quot; id=&quot;width&quot; name=&quot;width&quot; value=&quot;&quot; onFocus=&quot;this.select();&quot; /&gt;
+									&lt;select name=&quot;width2&quot; id=&quot;width2&quot; style=&quot;width: 50px&quot;&gt;
+										&lt;option value=&quot;&quot;&gt;px&lt;/option&gt;
+										&lt;option value=&quot;%&quot;&gt;%&lt;/option&gt;
+									&lt;/select&gt;&nbsp;x&nbsp;&lt;input id=&quot;height&quot; name=&quot;height&quot; type=&quot;text&quot;  value=&quot;&quot; onFocus=&quot;this.select();&quot; /&gt;
+									&lt;select name=&quot;height2&quot; id=&quot;height2&quot; style=&quot;width: 50px&quot;&gt;
+										&lt;option value=&quot;&quot;&gt;px&lt;/option&gt;
+										&lt;option value=&quot;%&quot;&gt;%&lt;/option&gt;
+									&lt;/select&gt;
+								&lt;/td&gt;
+							&lt;/tr&gt;
+					&lt;/table&gt;
+				&lt;/fieldset&gt;
+			&lt;/div&gt;
+		&lt;/div&gt;
+
+		&lt;div class=&quot;mceActionPanel&quot;&gt;
+			&lt;div style=&quot;float: left&quot;&gt;
+				&lt;input type=&quot;button&quot; id=&quot;insert&quot; name=&quot;insert&quot; value=&quot;{$lang_insert}&quot; onClick=&quot;insertYouTube();&quot; /&gt;
+			&lt;/div&gt;
+
+			&lt;div style=&quot;float: right&quot;&gt;
+				&lt;input type=&quot;button&quot; id=&quot;cancel&quot; name=&quot;cancel&quot; value=&quot;{$lang_cancel}&quot; onClick=&quot;tinyMCEPopup.close();&quot; /&gt;
+			&lt;/div&gt;
+		&lt;/div&gt;
+	&lt;/form&gt;
+&lt;/body&gt;
+&lt;/html&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000996.html">[ydf-devel] r2402 - YDFramework2.0/trunk/examples/weblog/manage
</A></li>
	<LI>Next message: <A HREF="000998.html">[ydf-devel] r2404 - in	YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/youtube:	. css images jscripts langs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#997">[ date ]</a>
              <a href="thread.html#997">[ thread ]</a>
              <a href="subject.html#997">[ subject ]</a>
              <a href="author.html#997">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/ydframework-devel">More information about the YDFramework-devel
mailing list</a><br>
</body></html>
