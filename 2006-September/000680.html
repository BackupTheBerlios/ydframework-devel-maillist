<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ydf-devel] r2158 - in	YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes:	. HTMLSax3
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/ydframework-devel/2006-September/index.html" >
   <LINK REL="made" HREF="mailto:ydframework-devel%40lists.berlios.de?Subject=Re%3A%20%5Bydf-devel%5D%20r2158%20-%20in%0A%09YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes%3A%0A%09.%20HTMLSax3&In-Reply-To=%3C200609221159.k8MBxJfa027809%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000678.html">
   <LINK REL="Next"  HREF="000681.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ydf-devel] r2158 - in	YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes:	. HTMLSax3</H1>
    <B>pclaerhout at BerliOS</B> 
    <A HREF="mailto:ydframework-devel%40lists.berlios.de?Subject=Re%3A%20%5Bydf-devel%5D%20r2158%20-%20in%0A%09YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes%3A%0A%09.%20HTMLSax3&In-Reply-To=%3C200609221159.k8MBxJfa027809%40sheep.berlios.de%3E"
       TITLE="[ydf-devel] r2158 - in	YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes:	. HTMLSax3">pclaerhout at mail.berlios.de
       </A><BR>
    <I>Fri Sep 22 13:59:19 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000678.html">[ydf-devel] r2157 - YDFramework2.0/trunk/YDFramework2/YDClasses
</A></li>
        <LI>Next message: <A HREF="000681.html">[ydf-devel] r2159 -	YDFramework2.0/trunk/YDFramework2/addons/YDFeedCreator
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#680">[ date ]</a>
              <a href="thread.html#680">[ thread ]</a>
              <a href="subject.html#680">[ subject ]</a>
              <a href="author.html#680">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: pclaerhout
Date: 2006-09-22 13:59:18 +0200 (Fri, 22 Sep 2006)
New Revision: 2158

Modified:
   YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes/HTMLSax3.php
   YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes/HTMLSax3/Decorators.php
   YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes/HTMLSax3/States.php
Log:
Updated some files of the safehtml 3rd party class.

Modified: YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes/HTMLSax3/Decorators.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes/HTMLSax3/Decorators.php	2006-09-21 17:18:03 UTC (rev 2157)
+++ YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes/HTMLSax3/Decorators.php	2006-09-22 11:59:18 UTC (rev 2158)
@@ -1,122 +1,363 @@
 &lt;?php
+/* vim: set expandtab tabstop=4 shiftwidth=4: */
+//
+// +----------------------------------------------------------------------+
+// | PHP Version 4                                                        |
+// +----------------------------------------------------------------------+
+// | Copyright (c) 1997-2002 The PHP Group                                |
+// +----------------------------------------------------------------------+
+// | This source file is subject to version 2.02 of the PHP license,      |
+// | that is bundled with this package in the file LICENSE, and is        |
+// | available at through the world-wide-web at                           |
+// | <A HREF="http://www.php.net/license/3_0.txt.">http://www.php.net/license/3_0.txt.</A>                                  |
+// | If you did not receive a copy of the PHP license and are unable to   |
+// | obtain it through the world-wide-web, please send a note to          |
+// | <A HREF="https://lists.berlios.de/mailman/listinfo/ydframework-devel">license at php.net</A> so we can mail you a copy immediately.               |
+// +----------------------------------------------------------------------+
+// | Authors: Alexander Zhukov &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/ydframework-devel">alex at veresk.ru</A>&gt; Original port from Python |
+// | Authors: Harry Fuecks &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/ydframework-devel">hfuecks at phppatterns.com</A>&gt; Port to PEAR + more  |
+// | Authors: Many @ Sitepointforums Advanced PHP Forums                  |
+// +----------------------------------------------------------------------+
+//
+// $Id: Decorators.php,v 1.1 2004/06/02 14:09:19 hfuecks Exp $
+//
+/**
+* Decorators for dealing with parser options
+* @package XML_HTMLSax3
+* @version $Id: Decorators.php,v 1.1 2004/06/02 14:09:19 hfuecks Exp $
+* @see XML_HTMLSax3::set_option
+*/
+/**
+* Trims the contents of element data from whitespace at start and end
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_Trim {
- var $orig_obj;
- var $orig_method;
- function XML_HTMLSax3_Trim(&amp;$orig_obj, $orig_method) {
-  $this-&gt;orig_obj =&amp; $orig_obj;
-  $this-&gt;orig_method = $orig_method;
- }
- function trimData(&amp;$parser, $data) {
-  $data = trim($data);
-  if ($data != '') {
-   $this-&gt;orig_obj-&gt;{$this-&gt;orig_method}($parser, $data);
-  }
- }
+    /**
+    * Original handler object
+    * @var object
+    * @access private
+    */
+    var $orig_obj;
+    /**
+    * Original handler method
+    * @var string
+    * @access private
+    */
+    var $orig_method;
+    /**
+    * Constructs XML_HTMLSax3_Trim
+    * @param object handler object being decorated
+    * @param string original handler method
+    * @access protected
+    */
+    function XML_HTMLSax3_Trim(&amp;$orig_obj, $orig_method) {
+        $this-&gt;orig_obj =&amp; $orig_obj;
+        $this-&gt;orig_method = $orig_method;
+    }
+    /**
+    * Trims the data
+    * @param XML_HTMLSax3
+    * @param string element data
+    * @access protected
+    */
+    function trimData(&amp;$parser, $data) {
+        $data = trim($data);
+        if ($data != '') {
+            $this-&gt;orig_obj-&gt;{$this-&gt;orig_method}($parser, $data);
+        }
+    }
 }
+/**
+* Coverts tag names to upper case
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_CaseFolding {
- var $orig_obj;
- var $orig_open_method;
- var $orig_close_method;
- function XML_HTMLSax3_CaseFolding(&amp;$orig_obj, $orig_open_method, $orig_close_method) {
-  $this-&gt;orig_obj =&amp; $orig_obj;
-  $this-&gt;orig_open_method = $orig_open_method;
-  $this-&gt;orig_close_method = $orig_close_method;
- }
- function foldOpen(&amp;$parser, $tag, $attrs=array(), $empty = FALSE) {
-  $this-&gt;orig_obj-&gt;{$this-&gt;orig_open_method}($parser, strtoupper($tag), $attrs, $empty);
- }
- function foldClose(&amp;$parser, $tag, $empty = FALSE) {
-  $this-&gt;orig_obj-&gt;{$this-&gt;orig_close_method}($parser, strtoupper($tag), $empty);
- }
+    /**
+    * Original handler object
+    * @var object
+    * @access private
+    */
+    var $orig_obj;
+    /**
+    * Original open handler method
+    * @var string
+    * @access private
+    */
+    var $orig_open_method;
+    /**
+    * Original close handler method
+    * @var string
+    * @access private
+    */
+    var $orig_close_method;
+    /**
+    * Constructs XML_HTMLSax3_CaseFolding
+    * @param object handler object being decorated
+    * @param string original open handler method
+    * @param string original close handler method
+    * @access protected
+    */
+    function XML_HTMLSax3_CaseFolding(&amp;$orig_obj, $orig_open_method, $orig_close_method) {
+        $this-&gt;orig_obj =&amp; $orig_obj;
+        $this-&gt;orig_open_method = $orig_open_method;
+        $this-&gt;orig_close_method = $orig_close_method;
+    }
+    /**
+    * Folds up open tag callbacks
+    * @param XML_HTMLSax3
+    * @param string tag name
+    * @param array tag attributes
+    * @access protected
+    */
+    function foldOpen(&amp;$parser, $tag, $attrs=array(), $empty = FALSE) {
+        $this-&gt;orig_obj-&gt;{$this-&gt;orig_open_method}($parser, strtoupper($tag), $attrs, $empty);
+    }
+    /**
+    * Folds up close tag callbacks
+    * @param XML_HTMLSax3
+    * @param string tag name
+    * @access protected
+    */
+    function foldClose(&amp;$parser, $tag, $empty = FALSE) {
+        $this-&gt;orig_obj-&gt;{$this-&gt;orig_close_method}($parser, strtoupper($tag), $empty);
+    }
 }
+/**
+* Breaks up data by linefeed characters, resulting in additional
+* calls to the data handler
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_Linefeed {
- var $orig_obj;
- var $orig_method;
- function XML_HTMLSax3_LineFeed(&amp;$orig_obj, $orig_method) {
-  $this-&gt;orig_obj =&amp; $orig_obj;
-  $this-&gt;orig_method = $orig_method;
- }
- function breakData(&amp;$parser, $data) {
-  $data = explode(&quot;\n&quot;,$data);
-  foreach ( $data as $chunk ) {
-   $this-&gt;orig_obj-&gt;{$this-&gt;orig_method}($parser, $chunk);
-  }
- }
+    /**
+    * Original handler object
+    * @var object
+    * @access private
+    */
+    var $orig_obj;
+    /**
+    * Original handler method
+    * @var string
+    * @access private
+    */
+    var $orig_method;
+    /**
+    * Constructs XML_HTMLSax3_LineFeed
+    * @param object handler object being decorated
+    * @param string original handler method
+    * @access protected
+    */
+    function XML_HTMLSax3_LineFeed(&amp;$orig_obj, $orig_method) {
+        $this-&gt;orig_obj =&amp; $orig_obj;
+        $this-&gt;orig_method = $orig_method;
+    }
+    /**
+    * Breaks the data up by linefeeds
+    * @param XML_HTMLSax3
+    * @param string element data
+    * @access protected
+    */
+    function breakData(&amp;$parser, $data) {
+        $data = explode(&quot;\n&quot;,$data);
+        foreach ( $data as $chunk ) {
+            $this-&gt;orig_obj-&gt;{$this-&gt;orig_method}($parser, $chunk);
+        }
+    }
 }
+/**
+* Breaks up data by tab characters, resulting in additional
+* calls to the data handler
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_Tab {
- var $orig_obj;
- var $orig_method;
- function XML_HTMLSax3_Tab(&amp;$orig_obj, $orig_method) {
-  $this-&gt;orig_obj =&amp; $orig_obj;
-  $this-&gt;orig_method = $orig_method;
- }
- function breakData(&amp;$parser, $data) {
-  $data = explode(&quot;\t&quot;,$data);
-  foreach ( $data as $chunk ) {
-   $this-&gt;orig_obj-&gt;{$this-&gt;orig_method}($this, $chunk);
-  }
- }
+    /**
+    * Original handler object
+    * @var object
+    * @access private
+    */
+    var $orig_obj;
+    /**
+    * Original handler method
+    * @var string
+    * @access private
+    */
+    var $orig_method;
+    /**
+    * Constructs XML_HTMLSax3_Tab
+    * @param object handler object being decorated
+    * @param string original handler method
+    * @access protected
+    */
+    function XML_HTMLSax3_Tab(&amp;$orig_obj, $orig_method) {
+        $this-&gt;orig_obj =&amp; $orig_obj;
+        $this-&gt;orig_method = $orig_method;
+    }
+    /**
+    * Breaks the data up by linefeeds
+    * @param XML_HTMLSax3
+    * @param string element data
+    * @access protected
+    */
+    function breakData(&amp;$parser, $data) {
+        $data = explode(&quot;\t&quot;,$data);
+        foreach ( $data as $chunk ) {
+            $this-&gt;orig_obj-&gt;{$this-&gt;orig_method}($this, $chunk);
+        }
+    }
 }
+/**
+* Breaks up data by XML entities and parses them with html_entity_decode(),
+* resulting in additional calls to the data handler&lt;br /&gt;
+* Requires PHP 4.3.0+
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_Entities_Parsed {
- var $orig_obj;
- var $orig_method;
- function XML_HTMLSax3_Entities_Parsed(&amp;$orig_obj, $orig_method) {
-  $this-&gt;orig_obj =&amp; $orig_obj;
-  $this-&gt;orig_method = $orig_method;
- }
- function breakData(&amp;$parser, $data) {
-  $data = preg_split('/(&amp;.+?;)/',$data,-1,PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);
-  foreach ( $data as $chunk ) {
-   $chunk = html_entity_decode($chunk,ENT_NOQUOTES);
-   $this-&gt;orig_obj-&gt;{$this-&gt;orig_method}($this, $chunk);
-  }
- }
+    /**
+    * Original handler object
+    * @var object
+    * @access private
+    */
+    var $orig_obj;
+    /**
+    * Original handler method
+    * @var string
+    * @access private
+    */
+    var $orig_method;
+    /**
+    * Constructs XML_HTMLSax3_Entities_Parsed
+    * @param object handler object being decorated
+    * @param string original handler method
+    * @access protected
+    */
+    function XML_HTMLSax3_Entities_Parsed(&amp;$orig_obj, $orig_method) {
+        $this-&gt;orig_obj =&amp; $orig_obj;
+        $this-&gt;orig_method = $orig_method;
+    }
+    /**
+    * Breaks the data up by XML entities
+    * @param XML_HTMLSax3
+    * @param string element data
+    * @access protected
+    */
+    function breakData(&amp;$parser, $data) {
+        $data = preg_split('/(&amp;.+?;)/',$data,-1,PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);
+        foreach ( $data as $chunk ) {
+            $chunk = html_entity_decode($chunk,ENT_NOQUOTES);
+            $this-&gt;orig_obj-&gt;{$this-&gt;orig_method}($this, $chunk);
+        }
+    }
 }
+/**
+* Compatibility with older PHP versions
+*/
 if (version_compare(phpversion(), '4.3', '&lt;') &amp;&amp; !function_exists('html_entity_decode') ) {
- function html_entity_decode($str, $style=ENT_NOQUOTES) {
-  return strtr($str,
-   array_flip(get_html_translation_table(HTML_ENTITIES,$style)));
- }
+    function html_entity_decode($str, $style=ENT_NOQUOTES) {
+        return strtr($str,
+            array_flip(get_html_translation_table(HTML_ENTITIES,$style)));
+    }
 }
+/**
+* Breaks up data by XML entities but leaves them unparsed,
+* resulting in additional calls to the data handler&lt;br /&gt;
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_Entities_Unparsed {
- var $orig_obj;
- var $orig_method;
- function XML_HTMLSax3_Entities_Unparsed(&amp;$orig_obj, $orig_method) {
-  $this-&gt;orig_obj =&amp; $orig_obj;
-  $this-&gt;orig_method = $orig_method;
- }
- function breakData(&amp;$parser, $data) {
-  $data = preg_split('/(&amp;.+?;)/',$data,-1,PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);
-  foreach ( $data as $chunk ) {
-   $this-&gt;orig_obj-&gt;{$this-&gt;orig_method}($this, $chunk);
-  }
- }
+    /**
+    * Original handler object
+    * @var object
+    * @access private
+    */
+    var $orig_obj;
+    /**
+    * Original handler method
+    * @var string
+    * @access private
+    */
+    var $orig_method;
+    /**
+    * Constructs XML_HTMLSax3_Entities_Unparsed
+    * @param object handler object being decorated
+    * @param string original handler method
+    * @access protected
+    */
+    function XML_HTMLSax3_Entities_Unparsed(&amp;$orig_obj, $orig_method) {
+        $this-&gt;orig_obj =&amp; $orig_obj;
+        $this-&gt;orig_method = $orig_method;
+    }
+    /**
+    * Breaks the data up by XML entities
+    * @param XML_HTMLSax3
+    * @param string element data
+    * @access protected
+    */
+    function breakData(&amp;$parser, $data) {
+        $data = preg_split('/(&amp;.+?;)/',$data,-1,PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);
+        foreach ( $data as $chunk ) {
+            $this-&gt;orig_obj-&gt;{$this-&gt;orig_method}($this, $chunk);
+        }
+    }
 }
 
+/**
+* Strips the HTML comment markers or CDATA sections from an escape.
+* If XML_OPTIONS_FULL_ESCAPES is on, this decorator is not used.&lt;br /&gt;
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_Escape_Stripper {
- var $orig_obj;
- var $orig_method;
- function XML_HTMLSax3_Escape_Stripper(&amp;$orig_obj, $orig_method) {
-  $this-&gt;orig_obj =&amp; $orig_obj;
-  $this-&gt;orig_method = $orig_method;
- }
- function strip(&amp;$parser, $data) {
-  if ( substr($data,0,2) == '--' ) {
-   $patterns = array(
-    '/^\-\-/',    // Opening comment: --
-    '/\-\-$/',    // Closing comment: --
-   );
-   $data = preg_replace($patterns,'',$data);
+    /**
+    * Original handler object
+    * @var object
+    * @access private
+    */
+    var $orig_obj;
+    /**
+    * Original handler method
+    * @var string
+    * @access private
+    */
+    var $orig_method;
+    /**
+    * Constructs XML_HTMLSax3_Entities_Unparsed
+    * @param object handler object being decorated
+    * @param string original handler method
+    * @access protected
+    */
+    function XML_HTMLSax3_Escape_Stripper(&amp;$orig_obj, $orig_method) {
+        $this-&gt;orig_obj =&amp; $orig_obj;
+        $this-&gt;orig_method = $orig_method;
+    }
+    /**
+    * Breaks the data up by XML entities
+    * @param XML_HTMLSax3
+    * @param string element data
+    * @access protected
+    */
+    function strip(&amp;$parser, $data) {
+        // Check for HTML comments first
+        if ( substr($data,0,2) == '--' ) {
+            $patterns = array(
+                '/^\-\-/',          // Opening comment: --
+                '/\-\-$/',          // Closing comment: --
+            );
+            $data = preg_replace($patterns,'',$data);
 
-  } else if ( substr($data,0,1) == '[' ) {
-   $patterns = array(
-    '/^\[.*CDATA.*\[/s', // Opening CDATA
-    '/\].*\]$/s',    // Closing CDATA
-    );
-   $data = preg_replace($patterns,'',$data);
-  }
+        // Check for XML CDATA sections (note: don't do both!)
+        } else if ( substr($data,0,1) == '[' ) {
+            $patterns = array(
+                '/^\[.*CDATA.*\[/s', // Opening CDATA
+                '/\].*\]$/s',       // Closing CDATA
+                );
+            $data = preg_replace($patterns,'',$data);
+        }
 
-  $this-&gt;orig_obj-&gt;{$this-&gt;orig_method}($this, $data);
- }
+        $this-&gt;orig_obj-&gt;{$this-&gt;orig_method}($this, $data);
+    }
 }
 ?&gt;
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes/HTMLSax3/States.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes/HTMLSax3/States.php	2006-09-21 17:18:03 UTC (rev 2157)
+++ YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes/HTMLSax3/States.php	2006-09-22 11:59:18 UTC (rev 2158)
@@ -1,4 +1,34 @@
 &lt;?php
+/* vim: set expandtab tabstop=4 shiftwidth=4: */
+//
+// +----------------------------------------------------------------------+
+// | PHP Version 4                                                        |
+// +----------------------------------------------------------------------+
+// | Copyright (c) 1997-2002 The PHP Group                                |
+// +----------------------------------------------------------------------+
+// | This source file is subject to version 2.02 of the PHP license,      |
+// | that is bundled with this package in the file LICENSE, and is        |
+// | available at through the world-wide-web at                           |
+// | <A HREF="http://www.php.net/license/3_0.txt.">http://www.php.net/license/3_0.txt.</A>                                  |
+// | If you did not receive a copy of the PHP license and are unable to   |
+// | obtain it through the world-wide-web, please send a note to          |
+// | <A HREF="https://lists.berlios.de/mailman/listinfo/ydframework-devel">license at php.net</A> so we can mail you a copy immediately.               |
+// +----------------------------------------------------------------------+
+// | Authors: Alexander Zhukov &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/ydframework-devel">alex at veresk.ru</A>&gt; Original port from Python |
+// | Authors: Harry Fuecks &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/ydframework-devel">hfuecks at phppatterns.com</A>&gt; Port to PEAR + more  |
+// | Authors: Many @ Sitepointforums Advanced PHP Forums                  |
+// +----------------------------------------------------------------------+
+//
+// $Id: States.php,v 1.2 2004/06/02 14:22:40 hfuecks Exp $
+//
+/**
+* Parsing states.
+* @package XML_HTMLSax3
+* @version $Id: States.php,v 1.2 2004/06/02 14:22:40 hfuecks Exp $
+*/
+/**
+* Define parser states
+*/
 define('XML_HTMLSAX3_STATE_STOP', 0);
 define('XML_HTMLSAX3_STATE_START', 1);
 define('XML_HTMLSAX3_STATE_TAG', 2);
@@ -7,173 +37,251 @@
 define('XML_HTMLSAX3_STATE_ESCAPE', 6);
 define('XML_HTMLSAX3_STATE_JASP', 7);
 define('XML_HTMLSAX3_STATE_PI', 8);
+/**
+* StartingState searches for the start of any XML tag
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_StartingState  {
- function parse(&amp;$context) {
-  $data = $context-&gt;scanUntilString('&lt;');
-  if ($data != '') {
-   $context-&gt;handler_object_data-&gt;
-    {$context-&gt;handler_method_data}($context-&gt;htmlsax, $data);
-  }
-  $context-&gt;IgnoreCharacter();
-  return XML_HTMLSAX3_STATE_TAG;
- }
+    /**
+    * @param XML_HTMLSax3_StateParser subclass
+    * @return constant XML_HTMLSAX3_STATE_TAG
+    * @access protected
+    */
+    function parse(&amp;$context) {
+        $data = $context-&gt;scanUntilString('&lt;');
+        if ($data != '') {
+            $context-&gt;handler_object_data-&gt;
+                {$context-&gt;handler_method_data}($context-&gt;htmlsax, $data);
+        }
+        $context-&gt;IgnoreCharacter();
+        return XML_HTMLSAX3_STATE_TAG;
+    }
 }
+/**
+* Decides which state to move one from after StartingState
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_TagState {
- function parse(&amp;$context) {
-  switch($context-&gt;ScanCharacter()) {
-  case '/':
-   return XML_HTMLSAX3_STATE_CLOSING_TAG;
-   break;
-  case '?':
-   return XML_HTMLSAX3_STATE_PI;
-   break;
-  case '%':
-   return XML_HTMLSAX3_STATE_JASP;
-   break;
-  case '!':
-   return XML_HTMLSAX3_STATE_ESCAPE;
-   break;
-  default:
-   $context-&gt;unscanCharacter();
-   return XML_HTMLSAX3_STATE_OPENING_TAG;
-  }
- }
+    /**
+    * @param XML_HTMLSax3_StateParser subclass
+    * @return constant the next state to move into
+    * @access protected
+    */
+    function parse(&amp;$context) {
+        switch($context-&gt;ScanCharacter()) {
+        case '/':
+            return XML_HTMLSAX3_STATE_CLOSING_TAG;
+            break;
+        case '?':
+            return XML_HTMLSAX3_STATE_PI;
+            break;
+        case '%':
+            return XML_HTMLSAX3_STATE_JASP;
+            break;
+        case '!':
+            return XML_HTMLSAX3_STATE_ESCAPE;
+            break;
+        default:
+            $context-&gt;unscanCharacter();
+            return XML_HTMLSAX3_STATE_OPENING_TAG;
+        }
+    }
 }
+/**
+* Dealing with closing XML tags
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_ClosingTagState {
- function parse(&amp;$context) {
-  $tag = $context-&gt;scanUntilCharacters('/&gt;');
-  if ($tag != '') {
-   $char = $context-&gt;scanCharacter();
-   if ($char == '/') {
-    $char = $context-&gt;scanCharacter();
-    if ($char != '&gt;') {
-     $context-&gt;unscanCharacter();
+    /**
+    * @param XML_HTMLSax3_StateParser subclass
+    * @return constant XML_HTMLSAX3_STATE_START
+    * @access protected
+    */
+    function parse(&amp;$context) {
+        $tag = $context-&gt;scanUntilCharacters('/&gt;');
+        if ($tag != '') {
+            $char = $context-&gt;scanCharacter();
+            if ($char == '/') {
+                $char = $context-&gt;scanCharacter();
+                if ($char != '&gt;') {
+                    $context-&gt;unscanCharacter();
+                }
+            }
+            $context-&gt;handler_object_element-&gt;
+                {$context-&gt;handler_method_closing}($context-&gt;htmlsax, $tag, FALSE);
+        }
+        return XML_HTMLSAX3_STATE_START;
     }
-   }
-   $context-&gt;handler_object_element-&gt;
-    {$context-&gt;handler_method_closing}($context-&gt;htmlsax, $tag, FALSE);
-  }
-  return XML_HTMLSAX3_STATE_START;
- }
 }
+/**
+* Dealing with opening XML tags
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_OpeningTagState {
- function parseAttributes(&amp;$context) {
-  $Attributes = array();
- 
-  $context-&gt;ignoreWhitespace();
-  $attributename = $context-&gt;scanUntilCharacters(&quot;=/&gt; \n\r\t&quot;);
-  while ($attributename != '') {
-   $attributevalue = NULL;
-   $context-&gt;ignoreWhitespace();
-   $char = $context-&gt;scanCharacter();
-   if ($char == '=') {
-    $context-&gt;ignoreWhitespace();
-    $char = $context-&gt;ScanCharacter();
-    if ($char == '&quot;') {
-     $attributevalue= $context-&gt;scanUntilString('&quot;');
-     $context-&gt;IgnoreCharacter();
-    } else if ($char == &quot;'&quot;) {
-     $attributevalue = $context-&gt;scanUntilString(&quot;'&quot;);
-     $context-&gt;IgnoreCharacter();
-    } else {
-     $context-&gt;unscanCharacter();
-     $attributevalue =
-      $context-&gt;scanUntilCharacters(&quot;&gt; \n\r\t&quot;);
+    /**
+    * Handles attributes
+    * @param string attribute name
+    * @param string attribute value
+    * @return void
+    * @access protected
+    * @see XML_HTMLSax3_AttributeStartState
+    */
+    function parseAttributes(&amp;$context) {
+        $Attributes = array();
+    
+        $context-&gt;ignoreWhitespace();
+        $attributename = $context-&gt;scanUntilCharacters(&quot;=/&gt; \n\r\t&quot;);
+        while ($attributename != '') {
+            $attributevalue = NULL;
+            $context-&gt;ignoreWhitespace();
+            $char = $context-&gt;scanCharacter();
+            if ($char == '=') {
+                $context-&gt;ignoreWhitespace();
+                $char = $context-&gt;ScanCharacter();
+                if ($char == '&quot;') {
+                    $attributevalue= $context-&gt;scanUntilString('&quot;');
+                    $context-&gt;IgnoreCharacter();
+                } else if ($char == &quot;'&quot;) {
+                    $attributevalue = $context-&gt;scanUntilString(&quot;'&quot;);
+                    $context-&gt;IgnoreCharacter();
+                } else {
+                    $context-&gt;unscanCharacter();
+                    $attributevalue =
+                        $context-&gt;scanUntilCharacters(&quot;&gt; \n\r\t&quot;);
+                }
+            } else if ($char !== NULL) {
+                $attributevalue = NULL;
+                $context-&gt;unscanCharacter();
+            }
+            $Attributes[$attributename] = $attributevalue;
+            
+            $context-&gt;ignoreWhitespace();
+            $attributename = $context-&gt;scanUntilCharacters(&quot;=/&gt; \n\r\t&quot;);
+        }
+        return $Attributes;
     }
-   } else if ($char !== NULL) {
-    $attributevalue = NULL;
-    $context-&gt;unscanCharacter();
-   }
-   $Attributes[$attributename] = $attributevalue;
-   
-   $context-&gt;ignoreWhitespace();
-   $attributename = $context-&gt;scanUntilCharacters(&quot;=/&gt; \n\r\t&quot;);
-  }
-  return $Attributes;
- }
 
- function parse(&amp;$context) {
-  $tag = $context-&gt;scanUntilCharacters(&quot;/&gt; \n\r\t&quot;);
-  if ($tag != '') {
-   $this-&gt;attrs = array();
-   $Attributes = $this-&gt;parseAttributes($context);
-   $char = $context-&gt;scanCharacter();
-   if ($char == '/') {
-    $char = $context-&gt;scanCharacter();
-    if ($char != '&gt;') {
-     $context-&gt;unscanCharacter();
+    /**
+    * @param XML_HTMLSax3_StateParser subclass
+    * @return constant XML_HTMLSAX3_STATE_START
+    * @access protected
+    */
+    function parse(&amp;$context) {
+        $tag = $context-&gt;scanUntilCharacters(&quot;/&gt; \n\r\t&quot;);
+        if ($tag != '') {
+            $this-&gt;attrs = array();
+            $Attributes = $this-&gt;parseAttributes($context);
+            $char = $context-&gt;scanCharacter();
+            if ($char == '/') {
+                $char = $context-&gt;scanCharacter();
+                if ($char != '&gt;') {
+                    $context-&gt;unscanCharacter();
+                }
+                $context-&gt;handler_object_element-&gt;
+                    {$context-&gt;handler_method_opening}($context-&gt;htmlsax, $tag, 
+                    $Attributes, TRUE);
+                $context-&gt;handler_object_element-&gt;
+                    {$context-&gt;handler_method_closing}($context-&gt;htmlsax, $tag, 
+                    TRUE);
+            } else {
+                $context-&gt;handler_object_element-&gt;
+                    {$context-&gt;handler_method_opening}($context-&gt;htmlsax, $tag, 
+                    $Attributes, FALSE);
+            }
+        }
+        return XML_HTMLSAX3_STATE_START;
     }
-    $context-&gt;handler_object_element-&gt;
-     {$context-&gt;handler_method_opening}($context-&gt;htmlsax, $tag, 
-     $Attributes, TRUE);
-    $context-&gt;handler_object_element-&gt;
-     {$context-&gt;handler_method_closing}($context-&gt;htmlsax, $tag, 
-     TRUE);
-   } else {
-    $context-&gt;handler_object_element-&gt;
-     {$context-&gt;handler_method_opening}($context-&gt;htmlsax, $tag, 
-     $Attributes, FALSE);
-   }
-  }
-  return XML_HTMLSAX3_STATE_START;
- }
 }
 
+/**
+* Deals with XML escapes handling comments and CDATA correctly
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_EscapeState {
- function parse(&amp;$context) {
-  $char = $context-&gt;ScanCharacter();
-  if ($char == '-') {
-   $char = $context-&gt;ScanCharacter();
-   if ($char == '-') {
-    $context-&gt;unscanCharacter();
-    $context-&gt;unscanCharacter();
-    $text = $context-&gt;scanUntilString('--&gt;');
-    $text .= $context-&gt;scanCharacter();
-    $text .= $context-&gt;scanCharacter();
-   } else {
-    $context-&gt;unscanCharacter();
-    $text = $context-&gt;scanUntilString('&gt;');
-   }
-  } else if ( $char == '[') {
-   $context-&gt;unscanCharacter();
-   $text = $context-&gt;scanUntilString(']&gt;');
-   $text.= $context-&gt;scanCharacter();
-  } else {
-   $context-&gt;unscanCharacter();
-   $text = $context-&gt;scanUntilString('&gt;');
-  }
+    /**
+    * @param XML_HTMLSax3_StateParser subclass
+    * @return constant XML_HTMLSAX3_STATE_START
+    * @access protected
+    */
+    function parse(&amp;$context) {
+        $char = $context-&gt;ScanCharacter();
+        if ($char == '-') {
+            $char = $context-&gt;ScanCharacter();
+            if ($char == '-') {
+                $context-&gt;unscanCharacter();
+                $context-&gt;unscanCharacter();
+                $text = $context-&gt;scanUntilString('--&gt;');
+                $text .= $context-&gt;scanCharacter();
+                $text .= $context-&gt;scanCharacter();
+            } else {
+                $context-&gt;unscanCharacter();
+                $text = $context-&gt;scanUntilString('&gt;');
+            }
+        } else if ( $char == '[') {
+            $context-&gt;unscanCharacter();
+            $text = $context-&gt;scanUntilString(']&gt;');
+            $text.= $context-&gt;scanCharacter();
+        } else {
+            $context-&gt;unscanCharacter();
+            $text = $context-&gt;scanUntilString('&gt;');
+        }
 
-  $context-&gt;IgnoreCharacter();
-  if ($text != '') {
-   $context-&gt;handler_object_escape-&gt;
-   {$context-&gt;handler_method_escape}($context-&gt;htmlsax, $text);
-  }
-  return XML_HTMLSAX3_STATE_START;
- }
+        $context-&gt;IgnoreCharacter();
+        if ($text != '') {
+            $context-&gt;handler_object_escape-&gt;
+            {$context-&gt;handler_method_escape}($context-&gt;htmlsax, $text);
+        }
+        return XML_HTMLSAX3_STATE_START;
+    }
 }
+/**
+* Deals with JASP/ASP markup
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_JaspState {
- function parse(&amp;$context) {
-  $text = $context-&gt;scanUntilString('%&gt;');
-  if ($text != '') {
-   $context-&gt;handler_object_jasp-&gt;
-    {$context-&gt;handler_method_jasp}($context-&gt;htmlsax, $text);
-  }
-  $context-&gt;IgnoreCharacter();
-  $context-&gt;IgnoreCharacter();
-  return XML_HTMLSAX3_STATE_START;
- }
+    /**
+    * @param XML_HTMLSax3_StateParser subclass
+    * @return constant XML_HTMLSAX3_STATE_START
+    * @access protected
+    */
+    function parse(&amp;$context) {
+        $text = $context-&gt;scanUntilString('%&gt;');
+        if ($text != '') {
+            $context-&gt;handler_object_jasp-&gt;
+                {$context-&gt;handler_method_jasp}($context-&gt;htmlsax, $text);
+        }
+        $context-&gt;IgnoreCharacter();
+        $context-&gt;IgnoreCharacter();
+        return XML_HTMLSAX3_STATE_START;
+    }
 }
+/**
+* Deals with XML processing instructions
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_PiState {
- function parse(&amp;$context) {
-  $target = $context-&gt;scanUntilCharacters(&quot; \n\r\t&quot;);
-  $data = $context-&gt;scanUntilString('?&gt;');
-  if ($data != '') {
-   $context-&gt;handler_object_pi-&gt;
-   {$context-&gt;handler_method_pi}($context-&gt;htmlsax, $target, $data);
-  }
-  $context-&gt;IgnoreCharacter();
-  $context-&gt;IgnoreCharacter();
-  return XML_HTMLSAX3_STATE_START;
- }
+    /**
+    * @param XML_HTMLSax3_StateParser subclass
+    * @return constant XML_HTMLSAX3_STATE_START
+    * @access protected
+    */
+    function parse(&amp;$context) {
+        $target = $context-&gt;scanUntilCharacters(&quot; \n\r\t&quot;);
+        $data = $context-&gt;scanUntilString('?&gt;');
+        if ($data != '') {
+            $context-&gt;handler_object_pi-&gt;
+            {$context-&gt;handler_method_pi}($context-&gt;htmlsax, $target, $data);
+        }
+        $context-&gt;IgnoreCharacter();
+        $context-&gt;IgnoreCharacter();
+        return XML_HTMLSAX3_STATE_START;
+    }
 }
 ?&gt;
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes/HTMLSax3.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes/HTMLSax3.php	2006-09-21 17:18:03 UTC (rev 2157)
+++ YDFramework2.0/trunk/YDFramework2/3rdparty/safehtml/classes/HTMLSax3.php	2006-09-22 11:59:18 UTC (rev 2158)
@@ -1,5 +1,9 @@
 &lt;?php
+/* vim: set expandtab tabstop=4 shiftwidth=4: */
+//
 // +----------------------------------------------------------------------+
+// | PHP Version 4                                                        |
+// +----------------------------------------------------------------------+
 // | Copyright (c) 1997-2002 The PHP Group                                |
 // +----------------------------------------------------------------------+
 // | This source file is subject to version 2.02 of the PHP license,      |
@@ -15,278 +19,669 @@
 // | Authors: Many @ Sitepointforums Advanced PHP Forums                  |
 // +----------------------------------------------------------------------+
 //
+// $Id: HTMLSax3.php,v 1.1 2004/06/02 14:09:19 hfuecks Exp $
+//
+/**
+* Main parser components
+* @package XML_HTMLSax3
+* @version $Id: HTMLSax3.php,v 1.1 2004/06/02 14:09:19 hfuecks Exp $
+*/
+/**
+* Required classes
+*/
 if (!defined('XML_HTMLSAX3')) {
- define('XML_HTMLSAX3', 'XML/');
+    define('XML_HTMLSAX3', 'XML/');
 }
 require_once(XML_HTMLSAX3 . 'HTMLSax3/States.php');
 require_once(XML_HTMLSAX3 . 'HTMLSax3/Decorators.php');
 
+/**
+* Base State Parser
+* @package XML_HTMLSax3
+* @access protected
+* @abstract
+*/
 class XML_HTMLSax3_StateParser {
- var $htmlsax;
- var $handler_object_element;
- var $handler_method_opening;
- var $handler_method_closing;
- var $handler_object_data;
- var $handler_method_data;
- var $handler_object_pi;
- var $handler_method_pi;
- var $handler_object_jasp;
- var $handler_method_jasp;
- var $handler_object_escape;
- var $handler_method_escape;
- var $handler_default;
- var $parser_options = array();
- var $rawtext;
- var $position;
- var $length;
- var $State = array();
+    /**
+    * Instance of user front end class to be passed to callbacks
+    * @var XML_HTMLSax3
+    * @access private
+    */
+    var $htmlsax;
+    /**
+    * User defined object for handling elements
+    * @var object
+    * @access private
+    */
+    var $handler_object_element;
+    /**
+    * User defined open tag handler method
+    * @var string
+    * @access private
+    */
+    var $handler_method_opening;
+    /**
+    * User defined close tag handler method
+    * @var string
+    * @access private
+    */
+    var $handler_method_closing;
+    /**
+    * User defined object for handling data in elements
+    * @var object
+    * @access private
+    */
+    var $handler_object_data;
+    /**
+    * User defined data handler method
+    * @var string
+    * @access private
+    */
+    var $handler_method_data;
+    /**
+    * User defined object for handling processing instructions
+    * @var object
+    * @access private
+    */
+    var $handler_object_pi;
+    /**
+    * User defined processing instruction handler method
+    * @var string
+    * @access private
+    */
+    var $handler_method_pi;
+    /**
+    * User defined object for handling JSP/ASP tags
+    * @var object
+    * @access private
+    */
+    var $handler_object_jasp;
+    /**
+    * User defined JSP/ASP handler method
+    * @var string
+    * @access private
+    */
+    var $handler_method_jasp;
+    /**
+    * User defined object for handling XML escapes
+    * @var object
+    * @access private
+    */
+    var $handler_object_escape;
+    /**
+    * User defined XML escape handler method
+    * @var string
+    * @access private
+    */
+    var $handler_method_escape;
+    /**
+    * User defined handler object or NullHandler
+    * @var object
+    * @access private
+    */
+    var $handler_default;
+    /**
+    * Parser options determining parsing behavior
+    * @var array
+    * @access private
+    */
+    var $parser_options = array();
+    /**
+    * XML document being parsed
+    * @var string
+    * @access private
+    */
+    var $rawtext;
+    /**
+    * Position in XML document relative to start (0)
+    * @var int
+    * @access private
+    */
+    var $position;
+    /**
+    * Length of the XML document in characters
+    * @var int
+    * @access private
+    */
+    var $length;
+    /**
+    * Array of state objects
+    * @var array
+    * @access private
+    */
+    var $State = array();
 
- function XML_HTMLSax3_StateParser (&amp; $htmlsax) {
-  $this-&gt;htmlsax = &amp; $htmlsax;
-  $this-&gt;State[XML_HTMLSAX3_STATE_START] =&amp; new XML_HTMLSax3_StartingState();
+    /**
+    * Constructs XML_HTMLSax3_StateParser setting up states
+    * @var XML_HTMLSax3 instance of user front end class
+    * @access protected
+    */
+    function XML_HTMLSax3_StateParser (&amp; $htmlsax) {
+        $this-&gt;htmlsax = &amp; $htmlsax;
+        $this-&gt;State[XML_HTMLSAX3_STATE_START] =&amp; new XML_HTMLSax3_StartingState();
 
-  $this-&gt;State[XML_HTMLSAX3_STATE_CLOSING_TAG] =&amp; new XML_HTMLSax3_ClosingTagState();
-  $this-&gt;State[XML_HTMLSAX3_STATE_TAG] =&amp; new XML_HTMLSax3_TagState();
-  $this-&gt;State[XML_HTMLSAX3_STATE_OPENING_TAG] =&amp; new XML_HTMLSax3_OpeningTagState();
+        $this-&gt;State[XML_HTMLSAX3_STATE_CLOSING_TAG] =&amp; new XML_HTMLSax3_ClosingTagState();
+        $this-&gt;State[XML_HTMLSAX3_STATE_TAG] =&amp; new XML_HTMLSax3_TagState();
+        $this-&gt;State[XML_HTMLSAX3_STATE_OPENING_TAG] =&amp; new XML_HTMLSax3_OpeningTagState();
 
-  $this-&gt;State[XML_HTMLSAX3_STATE_PI] =&amp; new XML_HTMLSax3_PiState();
-  $this-&gt;State[XML_HTMLSAX3_STATE_JASP] =&amp; new XML_HTMLSax3_JaspState();
-  $this-&gt;State[XML_HTMLSAX3_STATE_ESCAPE] =&amp; new XML_HTMLSax3_EscapeState();
- }
+        $this-&gt;State[XML_HTMLSAX3_STATE_PI] =&amp; new XML_HTMLSax3_PiState();
+        $this-&gt;State[XML_HTMLSAX3_STATE_JASP] =&amp; new XML_HTMLSax3_JaspState();
+        $this-&gt;State[XML_HTMLSAX3_STATE_ESCAPE] =&amp; new XML_HTMLSax3_EscapeState();
+    }
 
- function unscanCharacter() {
-  $this-&gt;position -= 1;
- }
+    /**
+    * Moves the position back one character
+    * @access protected
+    * @return void
+    */
+    function unscanCharacter() {
+        $this-&gt;position -= 1;
+    }
 
- function ignoreCharacter() {
-  $this-&gt;position += 1;
- }
+    /**
+    * Moves the position forward one character
+    * @access protected
+    * @return void
+    */
+    function ignoreCharacter() {
+        $this-&gt;position += 1;
+    }
 
- function scanCharacter() {
-  if ($this-&gt;position &lt; $this-&gt;length) {
-   return $this-&gt;rawtext{$this-&gt;position++};
-  }
- }
+    /**
+    * Returns the next character from the XML document or void if at end
+    * @access protected
+    * @return mixed
+    */
+    function scanCharacter() {
+        if ($this-&gt;position &lt; $this-&gt;length) {
+            return $this-&gt;rawtext{$this-&gt;position++};
+        }
+    }
 
- function scanUntilString($string) {
-  $start = $this-&gt;position;
-  $this-&gt;position = strpos($this-&gt;rawtext, $string, $start);
-  if ($this-&gt;position === FALSE) {
-   $this-&gt;position = $this-&gt;length;
-  }
-  return substr($this-&gt;rawtext, $start, $this-&gt;position - $start);
- }
+    /**
+    * Returns a string from the current position to the next occurance
+    * of the supplied string
+    * @param string string to search until
+    * @access protected
+    * @return string
+    */
+    function scanUntilString($string) {
+        $start = $this-&gt;position;
+        $this-&gt;position = strpos($this-&gt;rawtext, $string, $start);
+        if ($this-&gt;position === FALSE) {
+            $this-&gt;position = $this-&gt;length;
+        }
+        return substr($this-&gt;rawtext, $start, $this-&gt;position - $start);
+    }
 
- function scanUntilCharacters($string) {}
+    /**
+    * Returns a string from the current position until the first instance of
+    * one of the characters in the supplied string argument
+    * @param string string to search until
+    * @access protected
+    * @return string
+    * @abstract
+    */
+    function scanUntilCharacters($string) {}
 
- function ignoreWhitespace() {}
+    /**
+    * Moves the position forward past any whitespace characters
+    * @access protected
+    * @return void
+    * @abstract
+    */
+    function ignoreWhitespace() {}
 
- function parse($data) {
-  if ($this-&gt;parser_options['XML_OPTION_TRIM_DATA_NODES']==1) {
-   $decorator =&amp; new XML_HTMLSax3_Trim(
-    $this-&gt;handler_object_data,
-    $this-&gt;handler_method_data);
-   $this-&gt;handler_object_data =&amp; $decorator;
-   $this-&gt;handler_method_data = 'trimData';
-  }
-  if ($this-&gt;parser_options['XML_OPTION_CASE_FOLDING']==1) {
-   $open_decor =&amp; new XML_HTMLSax3_CaseFolding(
-    $this-&gt;handler_object_element,
-    $this-&gt;handler_method_opening,
-    $this-&gt;handler_method_closing);
-   $this-&gt;handler_object_element =&amp; $open_decor;
-   $this-&gt;handler_method_opening ='foldOpen';
-   $this-&gt;handler_method_closing ='foldClose';
-  }
-  if ($this-&gt;parser_options['XML_OPTION_LINEFEED_BREAK']==1) {
-   $decorator =&amp; new XML_HTMLSax3_Linefeed(
-    $this-&gt;handler_object_data,
-    $this-&gt;handler_method_data);
-   $this-&gt;handler_object_data =&amp; $decorator;
-   $this-&gt;handler_method_data = 'breakData';
-  }
-  if ($this-&gt;parser_options['XML_OPTION_TAB_BREAK']==1) {
-   $decorator =&amp; new XML_HTMLSax3_Tab(
-    $this-&gt;handler_object_data,
-    $this-&gt;handler_method_data);
-   $this-&gt;handler_object_data =&amp; $decorator;
-   $this-&gt;handler_method_data = 'breakData';
-  }
-  if ($this-&gt;parser_options['XML_OPTION_ENTITIES_UNPARSED']==1) {
-   $decorator =&amp; new XML_HTMLSax3_Entities_Unparsed(
-    $this-&gt;handler_object_data,
-    $this-&gt;handler_method_data);
-   $this-&gt;handler_object_data =&amp; $decorator;
-   $this-&gt;handler_method_data = 'breakData';
-  }
-  if ($this-&gt;parser_options['XML_OPTION_ENTITIES_PARSED']==1) {
-   $decorator =&amp; new XML_HTMLSax3_Entities_Parsed(
-    $this-&gt;handler_object_data,
-    $this-&gt;handler_method_data);
-   $this-&gt;handler_object_data =&amp; $decorator;
-   $this-&gt;handler_method_data = 'breakData';
-  }
-  // Note switched on by default
-  if ($this-&gt;parser_options['XML_OPTION_STRIP_ESCAPES']==1) {
-   $decorator =&amp; new XML_HTMLSax3_Escape_Stripper(
-    $this-&gt;handler_object_escape,
-    $this-&gt;handler_method_escape);
-   $this-&gt;handler_object_escape =&amp; $decorator;
-   $this-&gt;handler_method_escape = 'strip';
-  }
-  $this-&gt;rawtext = $data;
-  $this-&gt;length = strlen($data);
-  $this-&gt;position = 0;
-  $this-&gt;_parse();
- }
+    /**
+    * Begins the parsing operation, setting up any decorators, depending on
+    * parse options invoking _parse() to execute parsing
+    * @param string XML document to parse
+    * @access protected
+    * @return void
+    */
+    function parse($data) {
+        if ($this-&gt;parser_options['XML_OPTION_TRIM_DATA_NODES']==1) {
+            $decorator =&amp; new XML_HTMLSax3_Trim(
+                $this-&gt;handler_object_data,
+                $this-&gt;handler_method_data);
+            $this-&gt;handler_object_data =&amp; $decorator;
+            $this-&gt;handler_method_data = 'trimData';
+        }
+        if ($this-&gt;parser_options['XML_OPTION_CASE_FOLDING']==1) {
+            $open_decor =&amp; new XML_HTMLSax3_CaseFolding(
+                $this-&gt;handler_object_element,
+                $this-&gt;handler_method_opening,
+                $this-&gt;handler_method_closing);
+            $this-&gt;handler_object_element =&amp; $open_decor;
+            $this-&gt;handler_method_opening ='foldOpen';
+            $this-&gt;handler_method_closing ='foldClose';
+        }
+        if ($this-&gt;parser_options['XML_OPTION_LINEFEED_BREAK']==1) {
+            $decorator =&amp; new XML_HTMLSax3_Linefeed(
+                $this-&gt;handler_object_data,
+                $this-&gt;handler_method_data);
+            $this-&gt;handler_object_data =&amp; $decorator;
+            $this-&gt;handler_method_data = 'breakData';
+        }
+        if ($this-&gt;parser_options['XML_OPTION_TAB_BREAK']==1) {
+            $decorator =&amp; new XML_HTMLSax3_Tab(
+                $this-&gt;handler_object_data,
+                $this-&gt;handler_method_data);
+            $this-&gt;handler_object_data =&amp; $decorator;
+            $this-&gt;handler_method_data = 'breakData';
+        }
+        if ($this-&gt;parser_options['XML_OPTION_ENTITIES_UNPARSED']==1) {
+            $decorator =&amp; new XML_HTMLSax3_Entities_Unparsed(
+                $this-&gt;handler_object_data,
+                $this-&gt;handler_method_data);
+            $this-&gt;handler_object_data =&amp; $decorator;
+            $this-&gt;handler_method_data = 'breakData';
+        }
+        if ($this-&gt;parser_options['XML_OPTION_ENTITIES_PARSED']==1) {
+            $decorator =&amp; new XML_HTMLSax3_Entities_Parsed(
+                $this-&gt;handler_object_data,
+                $this-&gt;handler_method_data);
+            $this-&gt;handler_object_data =&amp; $decorator;
+            $this-&gt;handler_method_data = 'breakData';
+        }
+        // Note switched on by default
+        if ($this-&gt;parser_options['XML_OPTION_STRIP_ESCAPES']==1) {
+            $decorator =&amp; new XML_HTMLSax3_Escape_Stripper(
+                $this-&gt;handler_object_escape,
+                $this-&gt;handler_method_escape);
+            $this-&gt;handler_object_escape =&amp; $decorator;
+            $this-&gt;handler_method_escape = 'strip';
+        }
+        $this-&gt;rawtext = $data;
+        $this-&gt;length = strlen($data);
+        $this-&gt;position = 0;
+        $this-&gt;_parse();
+    }
 
- function _parse($state = XML_HTMLSAX3_STATE_START) {
-  do {
-   $state = $this-&gt;State[$state]-&gt;parse($this);
-  } while ($state != XML_HTMLSAX3_STATE_STOP &amp;&amp;
-     $this-&gt;position &lt; $this-&gt;length);
- }
+    /**
+    * Performs the parsing itself, delegating calls to a specific parser
+    * state
+    * @param constant state object to parse with
+    * @access protected
+    * @return void
+    */
+    function _parse($state = XML_HTMLSAX3_STATE_START) {
+        do {
+            $state = $this-&gt;State[$state]-&gt;parse($this);
+        } while ($state != XML_HTMLSAX3_STATE_STOP &amp;&amp;
+                    $this-&gt;position &lt; $this-&gt;length);
+    }
 }
 
+/**
+* Parser for PHP Versions below 4.3.0. Uses a slower parsing mechanism than
+* the equivalent PHP 4.3.0+  subclass of StateParser
+* @package XML_HTMLSax3
+* @access protected
+* @see XML_HTMLSax3_StateParser_Gtet430
+*/
 class XML_HTMLSax3_StateParser_Lt430 extends XML_HTMLSax3_StateParser {
- function XML_HTMLSax3_StateParser_Lt430(&amp; $htmlsax) {
-  parent::XML_HTMLSax3_StateParser($htmlsax);
-  $this-&gt;parser_options['XML_OPTION_TRIM_DATA_NODES'] = 0;
-  $this-&gt;parser_options['XML_OPTION_CASE_FOLDING'] = 0;
-  $this-&gt;parser_options['XML_OPTION_LINEFEED_BREAK'] = 0;
-  $this-&gt;parser_options['XML_OPTION_TAB_BREAK'] = 0;
-  $this-&gt;parser_options['XML_OPTION_ENTITIES_PARSED'] = 0;
-  $this-&gt;parser_options['XML_OPTION_ENTITIES_UNPARSED'] = 0;
-  $this-&gt;parser_options['XML_OPTION_STRIP_ESCAPES'] = 0;
- }
+    /**
+    * Constructs XML_HTMLSax3_StateParser_Lt430 defining available
+    * parser options
+    * @var XML_HTMLSax3 instance of user front end class
+    * @access protected
+    */
+    function XML_HTMLSax3_StateParser_Lt430(&amp; $htmlsax) {
+        parent::XML_HTMLSax3_StateParser($htmlsax);
+        $this-&gt;parser_options['XML_OPTION_TRIM_DATA_NODES'] = 0;
+        $this-&gt;parser_options['XML_OPTION_CASE_FOLDING'] = 0;
+        $this-&gt;parser_options['XML_OPTION_LINEFEED_BREAK'] = 0;
+        $this-&gt;parser_options['XML_OPTION_TAB_BREAK'] = 0;
+        $this-&gt;parser_options['XML_OPTION_ENTITIES_PARSED'] = 0;
+        $this-&gt;parser_options['XML_OPTION_ENTITIES_UNPARSED'] = 0;
+        $this-&gt;parser_options['XML_OPTION_STRIP_ESCAPES'] = 0;
+    }
 
- function scanUntilCharacters($string) {
-  $startpos = $this-&gt;position;
-  while ($this-&gt;position &lt; $this-&gt;length &amp;&amp; strpos($string, $this-&gt;rawtext{$this-&gt;position}) === FALSE) {
-   $this-&gt;position++;
-  }
-  return substr($this-&gt;rawtext, $startpos, $this-&gt;position - $startpos);
- }
+    /**
+    * Returns a string from the current position until the first instance of
+    * one of the characters in the supplied string argument
+    * @param string string to search until
+    * @access protected
+    * @return string
+    */
+    function scanUntilCharacters($string) {
+        $startpos = $this-&gt;position;
+        while ($this-&gt;position &lt; $this-&gt;length &amp;&amp; strpos($string, $this-&gt;rawtext{$this-&gt;position}) === FALSE) {
+            $this-&gt;position++;
+        }
+        return substr($this-&gt;rawtext, $startpos, $this-&gt;position - $startpos);
+    }
 
- function ignoreWhitespace() {
-  while ($this-&gt;position &lt; $this-&gt;length &amp;&amp; 
-   strpos(&quot; \n\r\t&quot;, $this-&gt;rawtext{$this-&gt;position}) !== FALSE) {
-   $this-&gt;position++;
-  }
- }
+    /**
+    * Moves the position forward past any whitespace characters
+    * @access protected
+    * @return void
+    */
+    function ignoreWhitespace() {
+        while ($this-&gt;position &lt; $this-&gt;length &amp;&amp; 
+            strpos(&quot; \n\r\t&quot;, $this-&gt;rawtext{$this-&gt;position}) !== FALSE) {
+            $this-&gt;position++;
+        }
+    }
 
- function parse($data) {
-  parent::parse($data);
- }
+    /**
+    * Begins the parsing operation, setting up the unparsed XML entities
+    * decorator if necessary then delegating further work to parent
+    * @param string XML document to parse
+    * @access protected
+    * @return void
+    */
+    function parse($data) {
+        parent::parse($data);
+    }
 }
 
+/**
+* Parser for PHP Versions equal to or greater than 4.3.0. Uses a faster
+* parsing mechanism than the equivalent PHP &lt; 4.3.0 subclass of StateParser
+* @package XML_HTMLSax3
+* @access protected
+* @see XML_HTMLSax3_StateParser_Lt430
+*/
 class XML_HTMLSax3_StateParser_Gtet430 extends XML_HTMLSax3_StateParser {
- function XML_HTMLSax3_StateParser_Gtet430(&amp; $htmlsax) {
-  parent::XML_HTMLSax3_StateParser($htmlsax);
-  $this-&gt;parser_options['XML_OPTION_TRIM_DATA_NODES'] = 0;
-  $this-&gt;parser_options['XML_OPTION_CASE_FOLDING'] = 0;
-  $this-&gt;parser_options['XML_OPTION_LINEFEED_BREAK'] = 0;
-  $this-&gt;parser_options['XML_OPTION_TAB_BREAK'] = 0;
-  $this-&gt;parser_options['XML_OPTION_ENTITIES_PARSED'] = 0;
-  $this-&gt;parser_options['XML_OPTION_ENTITIES_UNPARSED'] = 0;
-  $this-&gt;parser_options['XML_OPTION_STRIP_ESCAPES'] = 0;
- }
- function scanUntilCharacters($string) {
-  $startpos = $this-&gt;position;
-  $length = strcspn($this-&gt;rawtext, $string, $startpos);
-  $this-&gt;position += $length;
-  return substr($this-&gt;rawtext, $startpos, $length);
- }
+    /**
+    * Constructs XML_HTMLSax3_StateParser_Gtet430 defining available
+    * parser options
+    * @var XML_HTMLSax3 instance of user front end class
+    * @access protected
+    */
+    function XML_HTMLSax3_StateParser_Gtet430(&amp; $htmlsax) {
+        parent::XML_HTMLSax3_StateParser($htmlsax);
+        $this-&gt;parser_options['XML_OPTION_TRIM_DATA_NODES'] = 0;
+        $this-&gt;parser_options['XML_OPTION_CASE_FOLDING'] = 0;
+        $this-&gt;parser_options['XML_OPTION_LINEFEED_BREAK'] = 0;
+        $this-&gt;parser_options['XML_OPTION_TAB_BREAK'] = 0;
+        $this-&gt;parser_options['XML_OPTION_ENTITIES_PARSED'] = 0;
+        $this-&gt;parser_options['XML_OPTION_ENTITIES_UNPARSED'] = 0;
+        $this-&gt;parser_options['XML_OPTION_STRIP_ESCAPES'] = 0;
+    }
+    /**
+    * Returns a string from the current position until the first instance of
+    * one of the characters in the supplied string argument.
+    * @param string string to search until
+    * @access protected
+    * @return string
+    */
+    function scanUntilCharacters($string) {
+        $startpos = $this-&gt;position;
+        $length = strcspn($this-&gt;rawtext, $string, $startpos);
+        $this-&gt;position += $length;
+        return substr($this-&gt;rawtext, $startpos, $length);
+    }
 
- function ignoreWhitespace() {
-  $this-&gt;position += strspn($this-&gt;rawtext, &quot; \n\r\t&quot;, $this-&gt;position);
- }
+    /**
+    * Moves the position forward past any whitespace characters
+    * @access protected
+    * @return void
+    */
+    function ignoreWhitespace() {
+        $this-&gt;position += strspn($this-&gt;rawtext, &quot; \n\r\t&quot;, $this-&gt;position);
+    }
 
- function parse($data) {
-  parent::parse($data);
- }
+    /**
+    * Begins the parsing operation, setting up the parsed and unparsed
+    * XML entity decorators if necessary then delegating further work
+    * to parent
+    * @param string XML document to parse
+    * @access protected
+    * @return void
+    */
+    function parse($data) {
+        parent::parse($data);
+    }
 }
 
+/**
+* Default NullHandler for methods which were not set by user
+* @package XML_HTMLSax3
+* @access protected
+*/
 class XML_HTMLSax3_NullHandler {
- function DoNothing() {
- }
+    /**
+    * Generic handler method which does nothing
+    * @access protected
+    * @return void
+    */
+    function DoNothing() {
+    }
 }
 
+/**
+* User interface class. All user calls should only be made to this class
+* @package XML_HTMLSax3
+* @access public
+*/
 class XML_HTMLSax3 {
- var $state_parser;
+    /**
+    * Instance of concrete subclass of XML_HTMLSax3_StateParser
+    * @var XML_HTMLSax3_StateParser
+    * @access private
+    */
+    var $state_parser;
 
- function XML_HTMLSax3() {
-  if (version_compare(phpversion(), '4.3', 'ge')) {
-   $this-&gt;state_parser =&amp; new XML_HTMLSax3_StateParser_Gtet430($this);
-  } else {
-   $this-&gt;state_parser =&amp; new XML_HTMLSax3_StateParser_Lt430($this);
-  }
-  $nullhandler =&amp; new XML_HTMLSax3_NullHandler();
-  $this-&gt;set_object($nullhandler);
-  $this-&gt;set_element_handler('DoNothing', 'DoNothing');
-  $this-&gt;set_data_handler('DoNothing');
-  $this-&gt;set_pi_handler('DoNothing');
-  $this-&gt;set_jasp_handler('DoNothing');
-  $this-&gt;set_escape_handler('DoNothing');
- }
+    /**
+    * Constructs XML_HTMLSax3 selecting concrete StateParser subclass
+    * depending on PHP version being used as well as setting the default
+    * NullHandler for all callbacks&lt;br /&gt;
+    * &lt;b&gt;Example:&lt;/b&gt;
+    * &lt;pre&gt;
+    * $myHandler = &amp; new MyHandler();
+    * $parser = new XML_HTMLSax3();
+    * $parser-&gt;set_object($myHandler);
+    * $parser-&gt;set_option('XML_OPTION_CASE_FOLDING');
+    * $parser-&gt;set_element_handler('myOpenHandler','myCloseHandler');
+    * $parser-&gt;set_data_handler('myDataHandler');
+    * $parser-&gt;parser($xml);
+    * &lt;/pre&gt;
+    * @access public
+    */
+    function XML_HTMLSax3() {
+        if (version_compare(phpversion(), '4.3', 'ge')) {
+            $this-&gt;state_parser =&amp; new XML_HTMLSax3_StateParser_Gtet430($this);
+        } else {
+            $this-&gt;state_parser =&amp; new XML_HTMLSax3_StateParser_Lt430($this);
+        }
+        $nullhandler =&amp; new XML_HTMLSax3_NullHandler();
+        $this-&gt;set_object($nullhandler);
+        $this-&gt;set_element_handler('DoNothing', 'DoNothing');
+        $this-&gt;set_data_handler('DoNothing');
+        $this-&gt;set_pi_handler('DoNothing');
+        $this-&gt;set_jasp_handler('DoNothing');
+        $this-&gt;set_escape_handler('DoNothing');
+    }
 
- function set_object(&amp;$object) {
-  if ( is_object($object) ) {
-   $this-&gt;state_parser-&gt;handler_default =&amp; $object;
-   return true;
-  } else {
-   require_once('PEAR.php');
-   PEAR::raiseError('XML_HTMLSax3::set_object requires '.
-    'an object instance');
-  }
- }
+    /**
+    * Sets the user defined handler object. Returns a PEAR Error
+    * if supplied argument is not an object.
+    * @param object handler object containing SAX callback methods
+    * @access public
+    * @return mixed
+    */
+    function set_object(&amp;$object) {
+        if ( is_object($object) ) {
+            $this-&gt;state_parser-&gt;handler_default =&amp; $object;
+            return true;
+        } else {
+            require_once('PEAR.php');
+            PEAR::raiseError('XML_HTMLSax3::set_object requires '.
+                'an object instance');
+        }
+    }
 
- function set_option($name, $value=1) {
-  if ( array_key_exists($name,$this-&gt;state_parser-&gt;parser_options) ) {
-   $this-&gt;state_parser-&gt;parser_options[$name] = $value;
-   return true;
-  } else {
-   require_once('PEAR.php');
-   PEAR::raiseError('XML_HTMLSax3::set_option('.$name.') illegal');
-  }
- }
+    /**
+    * Sets a parser option. By default all options are switched off.
+    * Returns a PEAR Error if option is invalid&lt;br /&gt;
+    * &lt;b&gt;Available options:&lt;/b&gt;
+    * &lt;ul&gt;
+    * &lt;li&gt;XML_OPTION_TRIM_DATA_NODES: trim whitespace off the beginning
+    * and end of data passed to the data handler&lt;/li&gt;
+    * &lt;li&gt;XML_OPTION_LINEFEED_BREAK: linefeeds result in additional data
+    * handler calls&lt;/li&gt;
+    * &lt;li&gt;XML_OPTION_TAB_BREAK: tabs result in additional data handler
+    * calls&lt;/li&gt;
+    * &lt;li&gt;XML_OPTION_ENTITIES_UNPARSED: XML entities are returned as
+    * seperate data handler calls in unparsed form&lt;/li&gt;
+    * &lt;li&gt;XML_OPTION_ENTITIES_PARSED: (PHP 4.3.0+ only) XML entities are
+    * returned as seperate data handler calls and are parsed with 
+    * PHP's html_entity_decode() function&lt;/li&gt;
+    * &lt;li&gt;XML_OPTION_STRIP_ESCAPES: strips out the -- -- comment markers
+    * or CDATA markup inside an XML escape, if found.&lt;/li&gt;
+    * &lt;/ul&gt;
+    * To get HTMLSax to behave in the same way as the native PHP SAX parser,
+    * using it's default state, you need to switch on XML_OPTION_LINEFEED_BREAK,
+    * XML_OPTION_ENTITIES_PARSED and XML_OPTION_CASE_FOLDING
+    * @param string name of parser option
+    * @param int (optional) 1 to switch on, 0 for off
+    * @access public
+    * @return boolean
+    */
+    function set_option($name, $value=1) {
+        if ( array_key_exists($name,$this-&gt;state_parser-&gt;parser_options) ) {
+            $this-&gt;state_parser-&gt;parser_options[$name] = $value;
+            return true;
+        } else {
+            require_once('PEAR.php');
+            PEAR::raiseError('XML_HTMLSax3::set_option('.$name.') illegal');
+        }
+    }
 
- function set_data_handler($data_method) {
-  $this-&gt;state_parser-&gt;handler_object_data =&amp; $this-&gt;state_parser-&gt;handler_default;
-  $this-&gt;state_parser-&gt;handler_method_data = $data_method;
- }
+    /**
+    * Sets the data handler method which deals with the contents of XML
+    * elements.&lt;br /&gt;
+    * The handler method must accept two arguments, the first being an
+    * instance of XML_HTMLSax3 and the second being the contents of an
+    * XML element e.g.
+    * &lt;pre&gt;
+    * function myDataHander(&amp; $parser,$data){}
+    * &lt;/pre&gt;
+    * @param string name of method
+    * @access public
+    * @return void
+    * @see set_object
+    */
+    function set_data_handler($data_method) {
+        $this-&gt;state_parser-&gt;handler_object_data =&amp; $this-&gt;state_parser-&gt;handler_default;
+        $this-&gt;state_parser-&gt;handler_method_data = $data_method;
+    }
 
- function set_element_handler($opening_method, $closing_method) {
-  $this-&gt;state_parser-&gt;handler_object_element =&amp; $this-&gt;state_parser-&gt;handler_default;
-  $this-&gt;state_parser-&gt;handler_method_opening = $opening_method;
-  $this-&gt;state_parser-&gt;handler_method_closing = $closing_method;
- }
+    /**
+    * Sets the open and close tag handlers
+    * &lt;br /&gt;The open handler method must accept three arguments; the parser,
+    * the tag name and an array of attributes e.g.
+    * &lt;pre&gt;
+    * function myOpenHander(&amp; $parser,$tagname,$attrs=array()){}
+    * &lt;/pre&gt;
+    * The close handler method must accept two arguments; the parser and
+    * the tag name e.g.
+    * &lt;pre&gt;
+    * function myCloseHander(&amp; $parser,$tagname){}
+    * &lt;/pre&gt;
+    * @param string name of open method
+    * @param string name of close method
+    * @access public
+    * @return void
+    * @see set_object
+    */
+    function set_element_handler($opening_method, $closing_method) {
+        $this-&gt;state_parser-&gt;handler_object_element =&amp; $this-&gt;state_parser-&gt;handler_default;
+        $this-&gt;state_parser-&gt;handler_method_opening = $opening_method;
+        $this-&gt;state_parser-&gt;handler_method_closing = $closing_method;
+    }
 
- function set_pi_handler($pi_method) {
-  $this-&gt;state_parser-&gt;handler_object_pi =&amp; $this-&gt;state_parser-&gt;handler_default;
-  $this-&gt;state_parser-&gt;handler_method_pi = $pi_method;
- }
+    /**
+    * Sets the processing instruction handler method e.g. for PHP open
+    * and close tags&lt;br /&gt;
+    * The handler method must accept three arguments; the parser, the
+    * PI target and data inside the PI
+    * &lt;pre&gt;
+    * function myPIHander(&amp; $parser,$target, $data){}
+    * &lt;/pre&gt;
+    * @param string name of method
+    * @access public
+    * @return void
+    * @see set_object
+    */
+    function set_pi_handler($pi_method) {
+        $this-&gt;state_parser-&gt;handler_object_pi =&amp; $this-&gt;state_parser-&gt;handler_default;
+        $this-&gt;state_parser-&gt;handler_method_pi = $pi_method;
+    }
 
- function set_escape_handler($escape_method) {
-  $this-&gt;state_parser-&gt;handler_object_escape =&amp; $this-&gt;state_parser-&gt;handler_default;
-  $this-&gt;state_parser-&gt;handler_method_escape = $escape_method;
- }
+    /**
+    * Sets the XML escape handler method e.g. for comments and doctype
+    * declarations&lt;br /&gt;
+    * The handler method must accept two arguments; the parser and the
+    * contents of the escaped section
+    * &lt;pre&gt;
+    * function myEscapeHander(&amp; $parser, $data){}
+    * &lt;/pre&gt;
+    * @param string name of method
+    * @access public
+    * @return void
+    * @see set_object
+    */
+    function set_escape_handler($escape_method) {
+        $this-&gt;state_parser-&gt;handler_object_escape =&amp; $this-&gt;state_parser-&gt;handler_default;
+        $this-&gt;state_parser-&gt;handler_method_escape = $escape_method;
+    }
 
- function set_jasp_handler ($jasp_method) {
-  $this-&gt;state_parser-&gt;handler_object_jasp =&amp; $this-&gt;state_parser-&gt;handler_default;
-  $this-&gt;state_parser-&gt;handler_method_jasp = $jasp_method;
- }
+    /**
+    * Sets the JSP/ASP markup handler&lt;br /&gt;
+    * The handler method must accept two arguments; the parser and
+    * body of the JASP tag
+    * &lt;pre&gt;
+    * function myJaspHander(&amp; $parser, $data){}
+    * &lt;/pre&gt;
+    * @param string name of method
+    * @access public
+    * @return void
+    * @see set_object
+    */
+    function set_jasp_handler ($jasp_method) {
+        $this-&gt;state_parser-&gt;handler_object_jasp =&amp; $this-&gt;state_parser-&gt;handler_default;
+        $this-&gt;state_parser-&gt;handler_method_jasp = $jasp_method;
+    }
 
- function get_current_position() {
-  return $this-&gt;state_parser-&gt;position;
- }
+    /**
+    * Returns the current string position of the &quot;cursor&quot; inside the XML
+    * document
+    * &lt;br /&gt;Intended for use from within a user defined handler called
+    * via the $parser reference e.g.
+    * &lt;pre&gt;
+    * function myDataHandler(&amp; $parser,$data) {
+    *     echo( 'Current position: '.$parser-&gt;get_current_position() );
+    * }
+    * &lt;/pre&gt;
+    * @access public
+    * @return int
+    * @see get_length
+    */
+    function get_current_position() {
+        return $this-&gt;state_parser-&gt;position;
+    }
 
- function get_length() {
-  return $this-&gt;state_parser-&gt;length;
- }
+    /**
+    * Returns the string length of the XML document being parsed
+    * @access public
+    * @return int
+    */
+    function get_length() {
+        return $this-&gt;state_parser-&gt;length;
+    }
 
- function parse($data) {
-  $this-&gt;state_parser-&gt;parse($data);
- }
+    /**
+    * Start parsing some XML
+    * @param string XML document
+    * @access public
+    * @return void
+    */
+    function parse($data) {
+        $this-&gt;state_parser-&gt;parse($data);
+    }
 }
 ?&gt;
\ No newline at end of file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000678.html">[ydf-devel] r2157 - YDFramework2.0/trunk/YDFramework2/YDClasses
</A></li>
	<LI>Next message: <A HREF="000681.html">[ydf-devel] r2159 -	YDFramework2.0/trunk/YDFramework2/addons/YDFeedCreator
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#680">[ date ]</a>
              <a href="thread.html#680">[ thread ]</a>
              <a href="subject.html#680">[ subject ]</a>
              <a href="author.html#680">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/ydframework-devel">More information about the YDFramework-devel
mailing list</a><br>
</body></html>
