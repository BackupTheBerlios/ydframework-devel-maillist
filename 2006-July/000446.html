<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ydf-devel] r1963 - in YDFramework2.0/trunk/examples/weblog/skins: . default_with_lightbox default_with_lightbox/images default_with_lightbox/js
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/ydframework-devel/2006-July/index.html" >
   <LINK REL="made" HREF="mailto:ydframework-devel%40lists.berlios.de?Subject=Re%3A%20%5Bydf-devel%5D%20r1963%20-%20in%20YDFramework2.0/trunk/examples/weblog/skins%3A%20.%20default_with_lightbox%20default_with_lightbox/images%20default_with_lightbox/js&In-Reply-To=%3C200607070921.k679LdFO021517%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000445.html">
   <LINK REL="Next"  HREF="000447.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ydf-devel] r1963 - in YDFramework2.0/trunk/examples/weblog/skins: . default_with_lightbox default_with_lightbox/images default_with_lightbox/js</H1>
    <B>pclaerhout at BerliOS</B> 
    <A HREF="mailto:ydframework-devel%40lists.berlios.de?Subject=Re%3A%20%5Bydf-devel%5D%20r1963%20-%20in%20YDFramework2.0/trunk/examples/weblog/skins%3A%20.%20default_with_lightbox%20default_with_lightbox/images%20default_with_lightbox/js&In-Reply-To=%3C200607070921.k679LdFO021517%40sheep.berlios.de%3E"
       TITLE="[ydf-devel] r1963 - in YDFramework2.0/trunk/examples/weblog/skins: . default_with_lightbox default_with_lightbox/images default_with_lightbox/js">pclaerhout at berlios.de
       </A><BR>
    <I>Fri Jul  7 11:21:39 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000445.html">[ydf-devel] r1962 - YDFramework2.0/trunk/examples/weblog/include
</A></li>
        <LI>Next message: <A HREF="000447.html">[ydf-devel] r1964 - in YDFramework2.0/trunk/examples/weblog/tiny_mce/themes: . simple simple/css simple/images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#446">[ date ]</a>
              <a href="thread.html#446">[ thread ]</a>
              <a href="subject.html#446">[ subject ]</a>
              <a href="author.html#446">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: pclaerhout
Date: 2006-07-07 11:21:34 +0200 (Fri, 07 Jul 2006)
New Revision: 1963

Added:
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_footer.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_sidebar.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive_gallery.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/category.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/comment_email.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/default.css
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/blank.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/close.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/closelabel.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/image-1.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbg.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbgcolor.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbgwide.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickfooter.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickheader.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/loading.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/next.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/nextlabel.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/prev.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/prevlabel.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/thumb-1.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/index.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_email.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_gallery.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/effects.js
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/lightbox.js
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/prototype.js
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/scriptaculous.js
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/lightbox.css
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/page.tpl
Log:
Added a sample skin that uses the LightBox JavaScript for the image galleries.

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_footer.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_footer.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_footer.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,20 @@
+
+        &lt;hr /&gt;
+
+        &lt;div id=&quot;footer&quot;&gt;
+            &lt;p&gt;
+                {t w=&quot;powered_by&quot;} &lt;a href=&quot;{$YD_FW_HOMEPAGE}&quot; target=&quot;_blank&quot;&gt;{$YD_FW_NAME}&lt;/a&gt;.
+                &lt;br /&gt;
+                {t w=&quot;syndicate_as&quot;} &lt;a href=&quot;{$weblog_link_rss}&quot;&gt;RSS&lt;/a&gt; {t w=&quot;or&quot;} &lt;a href=&quot;{$weblog_link_atom}&quot;&gt;ATOM&lt;/a&gt;.
+                &lt;br /&gt;
+                {t w=&quot;syndicate_comments_as&quot;} &lt;a href=&quot;{$weblog_link_comments_rss}&quot;&gt;RSS&lt;/a&gt; {t w=&quot;or&quot;} &lt;a href=&quot;{$weblog_link_comments_atom}&quot;&gt;ATOM&lt;/a&gt;.
+                {t w=&quot;syndicate_gallery_as&quot;} &lt;a href=&quot;{$weblog_link_gallery_rss}&quot;&gt;RSS&lt;/a&gt; {t w=&quot;or&quot;} &lt;a href=&quot;{$weblog_link_gallery_atom}&quot;&gt;ATOM&lt;/a&gt;.
+            &lt;/p&gt;
+        &lt;/div&gt;
+    &lt;/div&gt;
+
+    &nbsp;
+
+&lt;/body&gt;
+
+&lt;/html&gt;

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,73 @@
+&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</A>&quot;&gt;
+
+&lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot;&gt;
+
+&lt;head profile=&quot;<A HREF="http://gmpg.org/xfn/1">http://gmpg.org/xfn/1</A>&quot;&gt;
+
+    &lt;title&gt;{$title}&lt;/title&gt;
+
+    &lt;meta name=&quot;generator&quot; content=&quot;{$YD_FW_NAMEVERS}&quot; /&gt;
+
+    &lt;link rel=&quot;stylesheet&quot; href=&quot;{$skin_dir}/default.css&quot; type=&quot;text/css&quot; media=&quot;screen&quot; /&gt;
+
+    &lt;link rel=&quot;stylesheet&quot; href=&quot;{$skin_dir}/lightbox.css&quot; type=&quot;text/css&quot; media=&quot;screen&quot; /&gt;
+
+    &lt;script type=&quot;text/javascript&quot; src=&quot;{$skin_dir}/js/prototype.js&quot;&gt;&lt;/script&gt;
+    &lt;script type=&quot;text/javascript&quot; src=&quot;{$skin_dir}/js/scriptaculous.js?load=effects&quot;&gt;&lt;/script&gt;
+    &lt;script type=&quot;text/javascript&quot; src=&quot;{$skin_dir}/js/lightbox.js&quot;&gt;&lt;/script&gt;
+
+    &lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt;
+        body        {literal}{{/literal} background: url(&quot;{$image_dir}/kubrickbgcolor.jpg&quot;);                                    {literal}}{/literal}
+        #page       {literal}{{/literal} background: url(&quot;{$image_dir}/kubrickbg.jpg&quot;) repeat-y top; border: none;              {literal}}{/literal}
+        #header     {literal}{{/literal} background: url(&quot;{$image_dir}/kubrickheader.jpg&quot;) no-repeat bottom center;             {literal}}{/literal}
+        #footer     {literal}{{/literal} background: url(&quot;{$image_dir}/kubrickfooter.jpg&quot;) no-repeat bottom; border: none;      {literal}}{/literal}
+        #header     {literal}{{/literal} margin: 0 !important; margin: 0 0 0 1px; padding: 1px; height: 198px; width: 758px;    {literal}}{/literal}
+        #headerimg  {literal}{{/literal} margin: 7px 9px 0; height: 192px; width: 740px;                                        {literal}}{/literal}
+        .bbtextarea {literal}{{/literal} width: 650px; height: 160px;                                                           {literal}}{/literal}
+        .printonly  {literal}{{/literal} display: none; {literal}}{/literal}
+        .screenonly {literal}{{/literal} display: inline; {literal}}{/literal}
+    &lt;/style&gt;
+
+    &lt;style type=&quot;text/css&quot; media=&quot;print&quot;&gt;
+        #sidebar    {literal}{{/literal} display: none;  {literal}}{/literal}
+        .printonly  {literal}{{/literal} display: inline; {literal}}{/literal}
+        .screenonly {literal}{{/literal} display: none; {literal}}{/literal}
+    &lt;/style&gt;
+
+    &lt;link rel=&quot;alternate&quot; type=&quot;application/rss+xml&quot;  title=&quot;RSS 2.0&quot;  href=&quot;{$weblog_link_rss}&quot;  /&gt;
+    &lt;link rel=&quot;alternate&quot; type=&quot;text/xml&quot;             title=&quot;RSS 0.92&quot;  href=&quot;{$weblog_link_rss}&quot;  /&gt;
+    &lt;link rel=&quot;alternate&quot; type=&quot;application/atom+xml&quot; title=&quot;Atom 0.3&quot; href=&quot;{$weblog_link_atom}&quot; /&gt;
+
+    {if $user.name}
+        &lt;script language=&quot;JavaScript&quot;&gt;
+        &lt;!--
+
+            {literal}function YDConfirmDelete( img ) {{/literal}
+                return confirm( '{t w=&quot;confirm_delete&quot;}\n\n&quot;' + img + '&quot;?');
+            {literal}}{/literal}
+
+        //--&gt;
+        &lt;/script&gt;
+    {/if}
+
+    {$weblog_google_analytics}
+
+&lt;/head&gt;
+
+&lt;body&gt;
+
+    &lt;div id=&quot;page&quot;&gt;
+
+        &lt;div id=&quot;header&quot;&gt;
+            &lt;div id=&quot;headerimg&quot;&gt;
+                &lt;h1&gt;&lt;a href=&quot;{$weblog_link}&quot; title=&quot;{$weblog_title}&quot;&gt;{$weblog_title}&lt;/a&gt;&lt;/h1&gt;
+                &lt;div class=&quot;description&quot;&gt;
+                    {if $weblog_description}{$weblog_description}{else}{t w=&quot;another_powered_by&quot;}{/if}
+                &lt;/div&gt;
+                &lt;div class=&quot;printonly&quot;&gt;
+                    &lt;p&gt;&lt;a href=&quot;{$weblog_current_url}&quot;&gt;{$weblog_current_url}&lt;/a&gt;&lt;/p&gt;
+                &lt;/div&gt;
+            &lt;/div&gt;
+        &lt;/div&gt;
+
+        &lt;hr /&gt;

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_sidebar.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_sidebar.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_sidebar.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,63 @@
+&lt;div id=&quot;sidebar&quot;&gt;
+
+    &lt;ul&gt;
+
+        {if $pages}
+            &lt;li&gt;
+                &lt;h2&gt;{t w=&quot;pages&quot;}&lt;/h2&gt;
+                &lt;ul&gt;
+                    {foreach from=$pages item=&quot;page&quot;}
+                        &lt;li&gt;&lt;a href=&quot;{$page|@link_page}&quot; title=&quot;{t w=&quot;page&quot;}: {$page.title}&quot;&gt;{$page.title}&lt;/a&gt;&lt;/li&gt;
+                    {/foreach}
+                &lt;/ul&gt;
+            &lt;/li&gt;
+        {/if}
+
+        &lt;li&gt;
+            &lt;h2&gt;{t w=&quot;archives&quot;}&lt;/h2&gt;
+            &lt;ul&gt;
+                &lt;li&gt;&lt;a href=&quot;{$weblog_link_archive}&quot; title=&quot;{t w=&quot;archives&quot;}&quot;&gt;{t w=&quot;archives&quot;}&lt;/a&gt;&lt;/li&gt;
+                &lt;li&gt;&lt;a href=&quot;{$weblog_link_archive_gallery}&quot; title=&quot;{t w=&quot;archives_gallery&quot;}&quot;&gt;{t w=&quot;archives_gallery&quot;}&lt;/a&gt;&lt;/li&gt;
+            &lt;/ul&gt;
+        &lt;/li&gt;
+
+        {if $categories}
+            &lt;li&gt;
+                &lt;h2&gt;{t w=&quot;categories&quot;}&lt;/h2&gt;
+                &lt;ul&gt;
+                    {foreach from=$categories item=&quot;category&quot;}
+                        &lt;li&gt;&lt;a href=&quot;{$category|@link_category}&quot;
+                            title=&quot;{t w=&quot;view_posts_filed_under&quot;} {$category.title}&quot;&gt;{$category.title}&lt;/a&gt;
+                            {if $category.num_items != &quot;0&quot;}({$category.num_items}){/if}
+                        &lt;/li&gt;
+                    {/foreach}
+                &lt;/ul&gt;
+            &lt;/li&gt;
+        {/if}
+
+        {if $links}
+            &lt;li&gt;
+                &lt;h2&gt;{t w=&quot;links&quot;}&lt;/h2&gt;
+                &lt;ul&gt;
+                    {foreach from=$links item=&quot;link&quot;}
+                        &lt;li&gt;&lt;a href=&quot;{$link|@link_link}&quot; title=&quot;{t w=&quot;link_to&quot;} {$link.url}&quot; target=&quot;_blank&quot;&gt;{$link.title}&lt;/a&gt;&lt;/li&gt;
+                    {/foreach}
+                &lt;/ul&gt;
+            &lt;/li&gt;
+        {/if}
+
+        &lt;li&gt;
+            &lt;h2&gt;{if $user.name}{$user.name}{else}{t w=&quot;admin&quot;}{/if}&lt;/h2&gt;
+            &lt;ul&gt;
+                {if $user.name}
+                    &lt;li&gt;&lt;a href=&quot;manage/index.php&quot;&gt;{t w=&quot;a_admin_home&quot;}&lt;/a&gt;&lt;/li&gt;
+                    &lt;li&gt;&lt;a href=&quot;manage/index.php?do=logout&quot;&gt;{t w=&quot;a_logoff&quot;}&lt;/a&gt;&lt;/li&gt;
+                {else}
+                    &lt;li&gt;&lt;a href=&quot;manage/index.php&quot;&gt;{t w=&quot;login&quot;}&lt;/a&gt;&lt;/li&gt;
+                {/if}
+            &lt;/ul&gt;
+        &lt;/li&gt;
+
+    &lt;/ul&gt;
+
+&lt;/div&gt;

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,31 @@
+{include file=&quot;__std_header.tpl&quot;}
+
+&lt;div id=&quot;content&quot; class=&quot;narrowcolumn&quot;&gt;
+
+    {if $items}
+
+        {foreach from=$items key=&quot;yearmonth&quot; item=&quot;items2&quot;}
+            &lt;h2 class=&quot;pagetitle&quot;&gt;{$yearmonth}&lt;/h2&gt;
+            {if $items2}
+                &lt;p&gt;{foreach from=$items2 item=&quot;item&quot;}
+                    &lt;small&gt;{$item.created|date:'%d %B'|lower} - &lt;/small&gt; &lt;a href=&quot;{$item|@link_item}&quot;&gt;{$item.title}&lt;/a&gt;
+                    {if $item.num_comments != '0' or $item.num_images != '0'}
+                        &lt;span class=&quot;postmetadata&quot;&gt;({$item|@text_num_images:false}{if $item.num_comments != '0' and $item.num_images != '0'}, {/if}{$item|@text_num_comments:false})&lt;/span&gt;
+                    {/if}
+                    &lt;br/&gt;
+                {/foreach}&lt;/p&gt;
+            {/if}
+        {/foreach}
+
+    {else}
+
+        &lt;h2 class=&quot;center&quot;&gt;{t w=&quot;not_found&quot;}&lt;/h2&gt;
+        &lt;p class=&quot;center&quot;&gt;{t w=&quot;sorry_not_found&quot;}&lt;/p&gt;
+
+    {/if}
+
+&lt;/div&gt;
+
+{include file=&quot;__std_sidebar.tpl&quot;}
+
+{include file=&quot;__std_footer.tpl&quot;}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive_gallery.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive_gallery.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive_gallery.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,51 @@
+{include file=&quot;__std_header.tpl&quot;}
+
+&lt;div id=&quot;content&quot; class=&quot;narrowcolumn&quot;&gt;
+
+    {if $items}
+
+        {foreach from=$items item=&quot;item&quot;}
+            &lt;div class=&quot;post&quot;&gt;
+                &lt;h2 id=&quot;post-{$item.id}&quot;&gt;
+                    &lt;a href=&quot;{$item|@link_item}&quot; rel=&quot;bookmark&quot; title=&quot;PermaLink to {$item.title}&quot;&gt;{$item.title}&lt;/a&gt;
+                &lt;/h2&gt;
+                &lt;small&gt;{$item.created|date|lower} {t w=&quot;by&quot;} &lt;a href=&quot;mailto:{$item.user_email|escape:'hexentity'}&quot;&gt;{$item.user_name|lower}&lt;/a&gt;&lt;/small&gt;
+                &lt;p&gt;
+                    &lt;table width=&quot;450&quot; border=0 cellspacing=0 cellpadding=0&gt;
+                    {foreach from=$item.images_as_table item=&quot;image_row&quot;}
+                    &lt;tr&gt;
+                        {foreach from=$image_row item=&quot;image&quot;}
+                            &lt;td width=&quot;12%&quot; align=&quot;center&quot; valign=&quot;middle&quot; height=&quot;60&quot;&gt;
+                                {if $image}
+                                    &lt;a href=&quot;{$uploads_dir}/{$image-&gt;relative_path}&quot; rel=&quot;lightbox[{$item.id}]&quot; title=&quot;{$image-&gt;getBasenameNoExt()}&quot;&gt;&lt;img src=&quot;{$image|link_thumb_small}&quot; alt=&quot;{$image-&gt;getBaseName()}&quot; width=&quot;{$image-&gt;relative_path_s_obj-&gt;getWidth()}&quot; height=&quot;{$image-&gt;relative_path_s_obj-&gt;getHeight()}&quot;&gt;&lt;/a&gt;
+                                {else}
+                                    &nbsp;
+                                {/if}
+                            &lt;/td&gt;
+                        {/foreach}
+                    &lt;tr/&gt;
+                    {/foreach}
+                &lt;/table&gt;
+                &lt;/p&gt;
+                &lt;p class=&quot;postmetadata&quot;&gt;
+                    {t w=&quot;posted_in&quot;} &lt;a href=&quot;{$item.category_id|link_category}&quot;&gt;{$item.category}&lt;/a&gt; &lt;strong&gt;|&lt;/strong&gt;
+                    {if $item.num_images != '0'}
+                        &lt;a href=&quot;{$item|@link_item_images}&quot;&gt;{$item|@text_num_images}&lt;/a&gt; &lt;strong&gt;|&lt;/strong&gt;
+                    {/if}
+                    &lt;a href=&quot;{$item|@link_item_comment}&quot;&gt;{$item|@text_num_comments:true} &#187;&lt;/a&gt;
+                &lt;/p&gt;
+            &lt;/div&gt;
+        {/foreach}
+
+    {else}
+
+        &lt;h2 class=&quot;center&quot;&gt;{t w=&quot;not_found&quot;}&lt;/h2&gt;
+        &lt;p class=&quot;center&quot;&gt;{t w=&quot;sorry_not_found&quot;}&lt;/p&gt;
+
+    {/if}
+
+&lt;/div&gt;
+
+{include file=&quot;__std_sidebar.tpl&quot;}
+
+{include file=&quot;__std_footer.tpl&quot;}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/category.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/category.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/category.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,34 @@
+{include file=&quot;__std_header.tpl&quot;}
+
+&lt;div id=&quot;content&quot; class=&quot;narrowcolumn&quot;&gt;
+
+    {if $items}
+
+        &lt;h2 class=&quot;pagetitle&quot;&gt;{t w=&quot;archive_for_the&quot;} '{$category.title}' {t w=&quot;category&quot; lower=true}&lt;/h2&gt;
+
+        {foreach from=$items item=&quot;item&quot;}
+            &lt;p&gt;
+                &lt;div class=&quot;entry&quot;&gt;
+                    &lt;a href=&quot;{$item|@link_item}&quot;&gt;{$item.title}&lt;/a&gt;
+                    {if $item.num_comments != '0' or $item.num_images != '0'}
+                        &lt;span class=&quot;postmetadata&quot;&gt;({$item|@text_num_images:false}{if $item.num_comments != '0' and $item.num_images != '0'}, {/if}{$item|@text_num_comments:false})&lt;/span&gt;
+                    {/if}
+                    &lt;br/&gt;
+                    {$item.body|bbcode|strip_tags|truncate:70}
+                &lt;/div&gt;
+                &lt;small&gt;{$item.created|date} {t w=&quot;by&quot;} &lt;a href=&quot;mailto:{$item.user_email|escape:'hexentity'}&quot;&gt;{$item.user_name}&lt;/a&gt;&lt;/small&gt;
+            &lt;/p&gt;
+        {/foreach}
+
+    {else}
+
+        &lt;h2 class=&quot;center&quot;&gt;{t w=&quot;not_found&quot;}&lt;/h2&gt;
+        &lt;p class=&quot;center&quot;&gt;{t w=&quot;sorry_not_found&quot;}&lt;/p&gt;
+
+    {/if}
+
+&lt;/div&gt;
+
+{include file=&quot;__std_sidebar.tpl&quot;}
+
+{include file=&quot;__std_footer.tpl&quot;}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/comment_email.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/comment_email.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/comment_email.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,53 @@
+&lt;html&gt;
+
+&lt;head&gt;
+
+    &lt;title&gt;{$weblog.title}&lt;/title&gt;
+
+    &lt;meta name=&quot;generator&quot; content=&quot;{$YD_FW_NAMEVERS}&quot; /&gt;
+
+    &lt;link rel=&quot;stylesheet&quot; href=&quot;{$skin_dir}/default.css&quot; type=&quot;text/css&quot; media=&quot;screen&quot; /&gt;
+
+    &lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt;
+        body        {literal}{{/literal} background: url(&quot;{$image_dir}/kubrickbgcolor.jpg&quot;);                                 {literal}}{/literal}
+        #page       {literal}{{/literal} background: url(&quot;{$image_dir}/kubrickbgwide.jpg&quot;) repeat-y top; border: none;       {literal}}{/literal}
+        #header     {literal}{{/literal} background: url(&quot;{$image_dir}/kubrickheader.jpg&quot;) no-repeat top center;             {literal}}{/literal}
+        #footer     {literal}{{/literal} background: url(&quot;{$image_dir}/kubrickfooter.jpg&quot;) no-repeat bottom; border: none;   {literal}}{/literal}
+        #header     {literal}{{/literal} margin: 0 !important; margin: 0; padding: 1px; height: 0px; width: 758px;           {literal}}{/literal}
+        #headerimg  {literal}{{/literal} margin: 0; height: 0px; width: 740px;                                               {literal}}{/literal}
+        .bbtextarea {literal}{{/literal} width: 650px; height: 160px;                                                        {literal}}{/literal}
+    &lt;/style&gt;
+
+&lt;/head&gt;
+
+&lt;body&gt;
+
+    &lt;div id=&quot;page&quot;&gt;
+
+        &lt;div id=&quot;header&quot;&gt;&lt;/div&gt;
+
+        &lt;div id=&quot;content&quot; class=&quot;narrowcolumn&quot;&gt;
+
+            &lt;h3&gt;{t w=&quot;new_comment&quot;}: {$item.title}&lt;/h3&gt;
+
+            &lt;p&gt;
+                &lt;b&gt;{t w=&quot;weblog&quot;}&lt;/b&gt;: &lt;a href=&quot;{$weblog_link}&quot;&gt;{$weblog_title}&lt;/a&gt;&lt;br/&gt;
+                &lt;b&gt;{t w=&quot;item_title&quot;}&lt;/b&gt;: &lt;a href=&quot;{$item|@link_item}&quot;&gt;{$item.title}&lt;/a&gt;&lt;br/&gt;
+            &lt;/p&gt;
+
+            &lt;p&gt;{$eml_comment.username} {t w=&quot;wrote&quot;}:&lt;/p&gt;
+
+            &lt;blockquote&gt;&lt;i&gt;{$eml_comment.comment|bbcode}&lt;/i&gt;&lt;/blockquote&gt;
+
+            &nbsp;
+
+        &lt;/div&gt;
+
+        &lt;div id=&quot;footer&quot;&gt;&lt;/div&gt;
+
+    &lt;/div&gt;
+
+&lt;/body&gt;
+
+&lt;/html&gt;
+

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/default.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/default.css	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/default.css	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,521 @@
+body {
+	font-size: 62.5%;
+	font-size: 10px;
+	font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	background-color: #d5d6d7;
+	color: #333;
+	text-align: center;
+	}
+
+#page {
+	background-color: white;
+	border: 1px solid #959596;
+	text-align: left;
+	}
+
+#header {
+	background-color: #73a0c5;
+	}
+
+#content {
+	font-size: 1.2em
+	}
+
+.widecolumn .entry p {
+	font-size: 1.05em;
+	}
+
+.narrowcolumn .entry, .widecolumn .entry {
+	line-height: 1.4em;
+	}
+
+.widecolumn {
+	line-height: 1.6em;
+	}
+	
+.narrowcolumn .postmetadata {
+	text-align: center;
+	}
+
+.alt {
+	background-color: #f8f8f8;
+	border-top: 1px solid #ddd;
+	border-bottom: 1px solid #ddd;
+	}
+
+#footer {
+	background-color: #eee;
+	}
+
+small, .bbtoolbar {
+	font-family: Arial, Helvetica, Sans-Serif;
+	font-size: 0.9em;
+	line-height: 1.5em;
+	}
+
+.bbtoolbar {
+	background-color: #EEE;
+	padding: 2px;
+}
+
+h1, h2, h3 {
+	font-family: 'Trebuchet MS', 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	font-weight: bold;
+	}
+
+h1 {
+	font-size: 4em;
+	text-align: center;
+	}
+
+.description {
+	font-size: 1.2em;
+	text-align: center;
+	}
+
+h2 {
+	font-size: 1.6em;
+	}
+
+h2.pagetitle {
+	font-size: 1.6em;
+	}
+
+#sidebar h2 {
+	font-family: 'Lucida Grande', Verdana, Sans-Serif;
+	font-size: 1.2em;
+	}
+
+h3 {
+	font-size: 1.3em;
+	}
+
+h1, h1 a, h1 a:hover, h1 a:visited, .description {
+	text-decoration: none;
+	color: white;
+	}
+
+h2, h2 a, h2 a:visited, h3, h3 a, h3 a:visited {
+	color: #333;
+	}
+
+h2, h2 a, h2 a:hover, h2 a:visited, h3, h3 a, h3 a:hover, h3 a:visited, #sidebar h2, #wp-calendar caption, cite {
+	text-decoration: none;
+	}
+
+.entry p a:visited {
+	color: #b85b5a;
+	}
+
+.commentlist li, #commentform input, #commentform textarea {
+	font: 1em 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	}
+
+#commentform textarea {
+	font-size: 1.0em;
+	}
+
+.commentlist li {
+	font-weight: bold;
+	}
+
+.commentlist cite, .commentlist cite a {
+	font-weight: bold;
+	font-style: normal;
+	font-size: 1.1em;
+	}
+
+.commentlist p {
+	font-weight: normal;
+	line-height: 1.5em;
+	text-transform: none;
+	}
+
+#commentform p {
+	font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	}
+
+.commentmetadata {
+	font-weight: normal;
+	}
+
+#sidebar {
+	font: 1em 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	}
+
+small, #sidebar ul ul li, #sidebar ul ol li, .nocomments, .postmetadata, blockquote, strike {
+	color: #777;
+	}
+	
+code {
+	font: 1.1em 'Courier New', Courier, Fixed;
+	}
+
+acronym, abbr, span.caps
+{
+	font-size: 0.9em;
+	letter-spacing: .07em;
+	}
+
+a, h2 a:hover, h3 a:hover {
+	color: #06c;
+	text-decoration: none;
+	}
+
+a:hover {
+	color: #147;
+	text-decoration: underline;
+	}
+	
+#wp-calendar #prev a {
+	font-size: 9pt;
+	}
+
+#wp-calendar a {
+	text-decoration: none;
+	}
+
+#wp-calendar caption {
+	font: bold 1.3em 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	text-align: center;
+	}
+
+#wp-calendar th {
+	font-style: normal;
+	text-transform: capitalize;
+	}
+
+body {
+	margin: 0;
+	padding: 0; 
+	}
+
+#page {
+	background-color: white;
+	margin: 20px auto;
+	padding: 0;
+	width: 760px;
+	border: 1px solid #959596;
+	}
+	
+#header {
+	padding: 0;
+	margin: 0 auto;
+	height: 200px;
+	width: 100%;
+	background-color: #73a0c5;
+	}
+
+#headerimg {
+	margin: 0;
+	height: 200px;
+	width: 100%;
+	}
+
+.narrowcolumn {
+	float: left;
+	padding: 0 0 20px 45px;
+	margin: 0px 0 0;
+	width: 450px;
+	}
+
+.widecolumn {
+	padding: 10px 0 20px 0;
+	margin: 5px 0 0 150px;
+	width: 450px;
+	}
+	
+.post {
+	margin: 0 0 40px;
+	text-align: justify;
+	}
+
+.widecolumn .post {
+	margin: 0;
+	}
+
+.narrowcolumn .postmetadata {
+	padding-top: 5px;
+	}
+
+.widecolumn .postmetadata {
+	margin: 30px 0;
+	}
+	
+#footer {
+	padding: 0 0 0 1px;
+	margin: 0 auto;
+	width: 760px;
+	clear: both;
+	}
+
+#footer p {
+	margin: 0;
+	padding: 20px 0;
+	text-align: center;
+	}
+
+h1 {
+	padding-top: 70px;
+	margin: 0;
+	}
+
+.description {
+	text-align: center;
+	}
+
+h2 {
+	margin: 30px 0 0;
+	}
+
+h2.pagetitle {
+	margin-top: 30px;
+	text-align: center;
+}
+
+#sidebar h2 {
+	margin: 5px 0 0;
+	padding: 0;
+	}
+
+h3 {
+	padding: 0;
+	margin: 30px 0 0;
+	}
+
+h3.comments {
+	padding: 0;
+	margin: 40px auto 20px ;
+	}
+
+p img {
+	padding: 0;
+	max-width: 100%;
+	}
+
+img.centered {
+	display: block;
+	margin-left: auto;
+	margin-right: auto;
+	}
+	
+img.alignright {
+	padding: 4px;
+	margin: 0 0 2px 7px;
+	display: inline;
+	}
+
+img.alignleft {
+	padding: 4px;
+	margin: 0 7px 2px 0;
+	display: inline;
+	}
+
+.alignright {
+	float: right;
+	}
+	
+.alignleft {
+	float: left
+	}
+
+html&gt;body .entry ul {
+	margin-left: 0px;
+	padding: 0 0 0 30px;
+	list-style: none;
+	padding-left: 10px;
+	text-indent: -10px;
+	} 
+
+html&gt;body .entry li {
+	margin: 7px 0 8px 10px;
+	}
+
+.entry ul li:before, #sidebar ul ul li:before {
+	content: &quot;\00BB \0020&quot;;
+	}
+
+.entry ol {
+	padding: 0 0 0 35px;
+	margin: 0;
+	}
+
+.entry ol li {
+	margin: 0;
+	padding: 0;
+	}
+
+.postmetadata ul, .postmetadata li {
+	display: inline;
+	list-style-type: none;
+	list-style-image: none;
+	}
+	
+#sidebar ul, #sidebar ul ol {
+	margin: 0;
+	padding: 0;
+	}
+
+#sidebar ul li {
+	list-style-type: none;
+	list-style-image: none;
+	margin-bottom: 15px;
+	}
+
+#sidebar ul p, #sidebar ul select {
+	margin: 5px 0 8px;
+	}
+
+#sidebar ul ul, #sidebar ul ol {
+	margin: 5px 0 0 10px;
+	}
+
+#sidebar ul ul ul, #sidebar ul ol {
+	margin: 0 0 0 10px;
+	}
+
+ol li, #sidebar ul ol li {
+	list-style: decimal outside;
+	}
+
+#sidebar ul ul li, #sidebar ul ol li {
+	margin: 3px 0 0;
+	padding: 0;
+	}
+
+#searchform {
+	margin: 10px auto;
+	padding: 5px 3px; 
+	text-align: center;
+	}
+
+#sidebar #searchform #s {
+	width: 115px;
+	padding: 2px;
+	}
+
+#sidebar #searchsubmit {
+	padding: 1px;
+	}
+
+.entry form {
+	text-align:center;
+	}
+
+select {
+	width: 130px;
+	}
+
+#commentform input {
+	width: 170px;
+	padding: 2px;
+	margin: 5px 5px 1px 0;
+	}
+
+#commentform textarea {
+	width: 100%;
+	height: 160px;
+	padding: 2px;
+	}
+
+#commentform #submit {
+	margin: 0;
+	background-color: #06c;
+	color: #fff;
+	}
+
+.alt {
+	margin: 0;
+	padding: 10px;
+	}
+
+.commentlist {
+	padding: 0;
+	text-align: justify;
+	}
+
+.commentlist li {
+	margin: 15px 0 3px;
+	padding: 5px 10px 3px;
+	list-style: none;
+	}
+
+.commentlist p {
+	margin: 10px 5px 10px 0;
+	}
+
+#commentform p {
+	margin: 5px 0;
+	}
+
+.nocomments {
+	text-align: center;
+	margin: 0;
+	padding: 0;
+	}
+
+.commentmetadata {
+	margin: 0;
+	display: block;
+	}
+
+#sidebar
+{
+	padding: 20px 0 10px 0;
+	margin-left: 545px;
+	width: 190px;
+	}
+
+#sidebar form {
+	margin: 0;
+	}
+
+acronym, abbr, span.caps {
+	cursor: help;
+	}
+
+acronym, abbr {
+	border-bottom: 1px dashed #999;
+	}
+
+blockquote {
+	margin: 15px 30px 0 10px;
+	padding-left: 20px;
+	border-left: 5px solid #ddd;
+	}
+
+blockquote cite {
+	margin: 5px 0 0;
+	display: block;
+	}
+
+.center {
+	text-align: center;
+	}
+
+hr {
+	display: none;
+	}
+
+a img {
+	border: none;
+	}
+
+.navigation {
+	display: block;
+	text-align: center;
+	margin-top: 10px;
+	margin-bottom: 60px;
+	}
+
+.white {
+	color: white;
+}
+
+#content td {
+	font-size: 0.8em;
+}
+
+.required {
+	color: red;
+}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/blank.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/blank.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/close.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/close.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/closelabel.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/closelabel.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/image-1.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/image-1.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbg.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbg.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbgcolor.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbgcolor.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbgwide.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbgwide.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickfooter.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickfooter.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickheader.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickheader.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/loading.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/loading.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/next.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/next.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/nextlabel.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/nextlabel.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/prev.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/prev.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/prevlabel.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/prevlabel.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/thumb-1.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/thumb-1.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/index.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/index.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/index.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,69 @@
+{include file=&quot;__std_header.tpl&quot;}
+
+&lt;div id=&quot;content&quot; class=&quot;narrowcolumn&quot;&gt;
+
+    {if $items}
+
+        {foreach from=$items item=&quot;item&quot;}
+            &lt;div class=&quot;post&quot;&gt;
+                &lt;h2 id=&quot;post-{$item.id}&quot;&gt;
+                    &lt;a href=&quot;{$item|@link_item}&quot; rel=&quot;bookmark&quot; title=&quot;PermaLink to {$item.title}&quot;&gt;{$item.title}&lt;/a&gt;
+                &lt;/h2&gt;
+                &lt;small&gt;
+                    {$item.created|date|lower} {t w=&quot;by&quot;} &lt;a href=&quot;mailto:{$item.user_email|escape:'hexentity'}&quot;&gt;{$item.user_name|lower}&lt;/a&gt;
+                    {*
+                    {if $user.name}
+                        | &lt;a href=&quot;manage/items.php?do=edit&amp;id={$item.id}&quot; target=&quot;_blank&quot;&gt;{t w=&quot;edit&quot;}&lt;/a&gt;
+                        | &lt;a href=&quot;manage/items.php?do=delete&amp;id={$item.id}&quot;
+                             onClick=&quot;return YDConfirmDelete( '{$item.title|addslashes}' );&quot;&gt;{t w=&quot;delete&quot;}&lt;/a&gt;
+                    {/if}
+                    *}
+                &lt;/small&gt;
+                &lt;div class=&quot;entry&quot;&gt;
+                    {$item.body|bbcode}
+                    {if $item.body_more}&lt;a href=&quot;{$item|@link_item}#more&quot;&gt;&raquo; {t w=&quot;more&quot;}&lt;/a&gt;{/if}
+                &lt;/div&gt;
+                &lt;p class=&quot;postmetadata&quot;&gt;
+                    {t w=&quot;posted_in&quot;} &lt;a href=&quot;{$item.category_id|link_category}&quot;&gt;{$item.category}&lt;/a&gt; &lt;strong&gt;|&lt;/strong&gt;
+                    {if $item.num_images != '0'}
+                        &lt;a href=&quot;{$item|@link_item_images}&quot;&gt;{$item|@text_num_images}&lt;/a&gt; &lt;strong&gt;|&lt;/strong&gt;
+                    {/if}
+                    &lt;a href=&quot;{$item|@link_item_comment}&quot;&gt;{$item|@text_num_comments:true} &#187;&lt;/a&gt;
+                &lt;/p&gt;
+            &lt;/div&gt;
+        {/foreach}
+
+        {if $old_items}
+            &lt;div class=&quot;post&quot;&gt;
+                &lt;h2&gt;{t w=&quot;older_items&quot;}&lt;/h2&gt;
+                &lt;ul&gt;
+                    {foreach from=$old_items item=&quot;old_item&quot;}
+                        &lt;li&gt;
+                            {$old_item.created|date:'%d %B %Y'|lower}:
+                            &lt;a href=&quot;{$old_item|@link_item}&quot;&gt;{$old_item.title}&lt;/a&gt;
+                            {if $old_item.num_comments != '0' or $old_item.num_images != '0'}
+                                &lt;span class=&quot;postmetadata&quot;&gt;({$old_item|@text_num_images:false}{if $old_item.num_comments != '0' and $old_item.num_images != '0'}, {/if}{$old_item|@text_num_comments:false})&lt;/span&gt;
+                            {/if}
+                        &lt;/li&gt;
+                    {/foreach}
+                &lt;/ul&gt;
+            &lt;/div&gt;
+        {/if}
+
+        &lt;div class=&quot;navigation&quot;&gt;
+            &lt;div class=&quot;alignleft&quot;&gt;&lt;/div&gt;
+            &lt;div class=&quot;alignright&quot;&gt;&lt;/div&gt;
+        &lt;/div&gt;
+
+    {else}
+
+        &lt;h2 class=&quot;center&quot;&gt;{t w=&quot;not_found&quot;}&lt;/h2&gt;
+        &lt;p class=&quot;center&quot;&gt;{t w=&quot;sorry_not_found&quot;}&lt;/p&gt;
+
+    {/if}
+
+&lt;/div&gt;
+
+{include file=&quot;__std_sidebar.tpl&quot;}
+
+{include file=&quot;__std_footer.tpl&quot;}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,165 @@
+{include file=&quot;__std_header.tpl&quot;}
+
+&lt;div id=&quot;content&quot; class=&quot;narrowcolumn&quot;&gt;
+
+    {if $item.older_id or $item.newer_id}
+        &lt;div class=&quot;screenonly&quot;&gt;
+            &lt;div class=&quot;navigation&quot;&gt;
+                {if $item.older_id}
+                    &lt;div class=&quot;alignleft&quot;&gt;&laquo; &lt;a href=&quot;{$item.older_id|link_item}&quot;&gt;{t w=&quot;older_post&quot;}&lt;/a&gt;&lt;/div&gt;
+                {/if}
+                {if $item.newer_id}
+                    &lt;div class=&quot;alignright&quot;&gt;&lt;a href=&quot;{$item.newer_id|link_item}&quot;&gt;{t w=&quot;newer_post&quot;}&lt;/a&gt; &raquo;&lt;/div&gt;
+                {/if}
+            &lt;/div&gt;
+        &lt;/div&gt;
+    {/if}
+
+    &lt;div class=&quot;post&quot;&gt;
+
+        &lt;h2 id=&quot;post-{$item.id}&quot;&gt;
+            &lt;a href=&quot;{$item|@link_item}&quot; rel=&quot;bookmark&quot; title=&quot;PermaLink to {$item.title}&quot;&gt;{$item.title}&lt;/a&gt;
+        &lt;/h2&gt;
+
+        &lt;div class=&quot;entrytext&quot;&gt;
+
+            &lt;p&gt;{$item.body|bbcode}&lt;/p&gt;
+
+            &lt;a name=&quot;more&quot;&gt;&lt;/a&gt;
+
+            &lt;p&gt;{$item.body_more|bbcode}&lt;/p&gt;
+
+            &lt;p class=&quot;postmetadata alt&quot;&gt;
+                &lt;small&gt;
+                    {t w=&quot;posted_under&quot;} {$item.created|date|lower} {t w=&quot;by&quot;} &lt;a href=&quot;mailto:{$item.user_email|escape:'hexentity'}&quot;&gt;{$item.user_name}&lt;/a&gt;
+                    {t w=&quot;filed_under&quot;} &lt;a href=&quot;{$item.category_id|link_category}&quot;&gt;{$item.category}&lt;/a&gt;.
+                    {if $user.name}
+                        &lt;br/&gt;
+                        &lt;a href=&quot;manage/items.php?do=edit&amp;id={$item.id}&quot; target=&quot;_blank&quot;&gt;{t w=&quot;edit&quot;}&lt;/a&gt;
+                        | &lt;a href=&quot;manage/items.php?do=delete&amp;id={$item.id}&quot;
+                             onClick=&quot;return YDConfirmDelete( '{$item.title|addslashes}' );&quot;&gt;{t w=&quot;delete&quot;}&lt;/a&gt;
+                    {/if}
+                &lt;/small&gt;
+            &lt;/p&gt;
+
+        &lt;/div&gt;
+
+        {if $item.images}
+            &lt;a name=&quot;images&quot;&gt;&lt;/a&gt;
+            &lt;h3&gt;{$item|@text_num_images} {t w=&quot;with&quot;} &#8220;{$item.title}&#8221;&lt;/h3&gt;
+            &lt;p&gt;&lt;table width=&quot;450&quot; border=0 cellspacing=0 cellpadding=0&gt;
+            {foreach from=$item.images_as_table item=&quot;image_row&quot;}
+            &lt;tr&gt;
+                {foreach from=$image_row item=&quot;image&quot;}
+                    &lt;td width=&quot;33%&quot; align=&quot;center&quot; style=&quot;vertical-align: middle;&quot; height=&quot;100&quot;&gt;
+                        {if $image}
+                            &lt;a href=&quot;{$uploads_dir}/{$image-&gt;relative_path}&quot; rel=&quot;lightbox[{$item.id}]&quot; title=&quot;{$image-&gt;getBasenameNoExt()}&quot;
+                             &gt;&lt;img src=&quot;{$image|link_thumb}&quot; alt=&quot;{$image-&gt;getBaseName()}&quot;
+                             width=&quot;{$image-&gt;relative_path_m_obj-&gt;getWidth()}&quot; height=&quot;{$image-&gt;relative_path_m_obj-&gt;getHeight()}&quot;&gt;&lt;/a&gt;
+                        {else}
+                            &nbsp;
+                        {/if}
+                    &lt;/td&gt;
+                {/foreach}
+            &lt;tr/&gt;
+            &lt;tr&gt;
+                {foreach from=$image_row item=&quot;image&quot;}
+                    &lt;td width=&quot;33%&quot; align=&quot;center&quot;&gt;
+                        {if $image}
+                            &lt;p&gt;&lt;a href=&quot;{$uploads_dir}/{$image-&gt;relative_path}&quot; rel=&quot;lightbox[{$item.id}]&quot; title=&quot;{$image-&gt;getBasenameNoExt()}&quot;
+                             &gt;{$image-&gt;getBasenameNoExt()}&lt;/a&gt;&lt;br/&gt;&nbsp;&lt;/p&gt;
+                        {else}
+                            &nbsp;
+                        {/if}
+                     &lt;/td&gt;
+                {/foreach}
+            &lt;tr/&gt;
+            {/foreach}
+            &lt;/table&gt;&lt;/p&gt;
+        {/if}
+
+    &lt;/div&gt;
+
+    &lt;a name=&quot;related&quot;&gt;&lt;/a&gt;
+    {if $related_items}
+        &lt;h3&gt;{t w=&quot;related_items&quot;} &#8220;{$item.title}&#8221;&lt;/h3&gt;
+        &lt;ul&gt;
+            {foreach from=$related_items item=&quot;rel_item&quot;}
+                &lt;li&gt;
+                    {$rel_item.created|date:'%d %B %Y'|lower}:
+                    &lt;a href=&quot;{$rel_item|@link_item}&quot;&gt;{$rel_item.title}&lt;/a&gt;
+                    {if $rel_item.num_comments != '0' or $rel_item.num_images != '0'}
+                        &lt;span class=&quot;postmetadata&quot;&gt;({$rel_item|@text_num_images:false}{if $rel_item.num_comments != '0' and $rel_item.num_images != '0'}, {/if}{$rel_item|@text_num_comments:false})&lt;/span&gt;
+                    {/if}
+                &lt;/li&gt;
+            {/foreach}
+        &lt;/ul&gt;
+    {/if}
+
+    &lt;a name=&quot;comment&quot;&gt;&lt;/a&gt;
+    {if $comments}
+        &lt;h3&gt;{$item|@text_num_comments:true} {t w=&quot;to&quot;} &#8220;{$item.title}&#8221;&lt;/h3&gt;
+        &lt;ol class=&quot;commentlist&quot;&gt;
+            {foreach from=$comments item=&quot;comment&quot;}
+                &lt;li class=&quot;{cycle values=&quot;alt,&quot;}&quot; id=&quot;comment-{$comment.id}&quot;&gt;
+                    &lt;a name=&quot;comment-{$comment.id}&quot;&gt;&lt;/a&gt;
+                    &lt;cite&gt;
+                        {if $comment.userwebsite}
+                            &lt;a href=&quot;{$comment.userwebsite}&quot; rel=&quot;external nofollow&quot; target=&quot;_blank&quot;&gt;{$comment.username}&lt;/a&gt;
+                        {else}
+                            {$comment.username}
+                        {/if}
+                    &lt;/cite&gt; {t w=&quot;says&quot;}:&lt;br /&gt;
+                    &lt;small class=&quot;commentmetadata&quot;&gt;
+                        &lt;a href=&quot;#comment-{$comment.id}&quot; title=&quot;&quot;&gt;{$comment.created|date:&quot;%A, %d %b %Y @ %H:%M&quot;|lower}&lt;/a&gt;
+                        {if $user.name}
+                            | &lt;a href=&quot;manage/comments.php?do=edit&amp;id={$comment.id}&quot; target=&quot;_blank&quot;&gt;{t w=&quot;edit&quot;}&lt;/a&gt;
+                            | &lt;a href=&quot;manage/comments.php?do=delete&amp;id={$comment.id}&quot;
+                                 onClick=&quot;return YDConfirmDelete( '{$item.title|addslashes}' );&quot;&gt;{t w=&quot;delete&quot;}&lt;/a&gt;
+                        {/if}
+                    &lt;/small&gt;
+                    &lt;p&gt;{$comment.comment|bbcode}&lt;/p&gt;
+                &lt;/li&gt;
+            {/foreach}
+        &lt;/ol&gt;
+    {/if}
+
+    &lt;a name=&quot;respond&quot;&gt;&lt;/a&gt;
+    &lt;h3 id=&quot;respond&quot;&gt;{t w=&quot;leave_comment&quot;}&lt;/h3&gt;
+
+    {if $comments_form}
+
+        {$comments_form.tag}
+
+            {if $comments_form.errors_unique_messages}
+                &lt;p class=&quot;postmetadata alt&quot; style=&quot;color: red; text-align: left;&quot;&gt;
+                    &lt;b&gt;{t w=&quot;error_comment&quot;}&lt;br/&gt;&lt;/b&gt;
+                    {foreach from=$comments_form.errors_unique_messages item=&quot;error&quot;}
+                        {$error}&lt;br/&gt;
+                    {/foreach}
+                &lt;/p&gt;
+            {/if}
+
+            {$comments_form.item_id.html}
+
+            &lt;p&gt;{$comments_form.username.html} &lt;small&gt;{$comments_form.username.label_html}&lt;/small&gt;&lt;/p&gt;
+            &lt;p&gt;{$comments_form.useremail.html} &lt;small&gt;{$comments_form.useremail.label_html}&lt;/small&gt;&lt;/p&gt;
+            &lt;p&gt;{$comments_form.userwebsite.html} &lt;small&gt;{$comments_form.userwebsite.label_html}&lt;/small&gt;&lt;/p&gt;
+
+            &lt;p&gt;{$comments_form.comment.html}&lt;/p&gt;
+
+            &lt;p&gt;{$comments_form.cmdSubmit.html}&lt;/p&gt;
+
+        {$comments_form.endtag}
+
+    {else}
+
+        &lt;p&gt;{t w=&quot;item_closed&quot;}&lt;/p&gt;
+
+    {/if}
+
+&lt;/div&gt;
+
+{include file=&quot;__std_sidebar.tpl&quot;}
+
+{include file=&quot;__std_footer.tpl&quot;}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_email.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_email.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_email.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,54 @@
+&lt;html&gt;
+
+&lt;head&gt;
+
+    &lt;title&gt;{$weblog.title}&lt;/title&gt;
+
+    &lt;meta name=&quot;generator&quot; content=&quot;{$YD_FW_NAMEVERS}&quot; /&gt;
+
+    &lt;link rel=&quot;stylesheet&quot; href=&quot;{$skin_dir}/default.css&quot; type=&quot;text/css&quot; media=&quot;screen&quot; /&gt;
+
+    &lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt;
+        body        {literal}{{/literal} background: url(&quot;{$image_dir}/kubrickbgcolor.jpg&quot;);                                 {literal}}{/literal}
+        #page       {literal}{{/literal} background: url(&quot;{$image_dir}/kubrickbgwide.jpg&quot;) repeat-y top; border: none;       {literal}}{/literal}
+        #header     {literal}{{/literal} background: url(&quot;{$image_dir}/kubrickheader.jpg&quot;) no-repeat top center;             {literal}}{/literal}
+        #footer     {literal}{{/literal} background: url(&quot;{$image_dir}/kubrickfooter.jpg&quot;) no-repeat bottom; border: none;   {literal}}{/literal}
+        #header     {literal}{{/literal} margin: 0 !important; margin: 0; padding: 1px; height: 0px; width: 758px;           {literal}}{/literal}
+        #headerimg  {literal}{{/literal} margin: 0; height: 0px; width: 740px;                                               {literal}}{/literal}
+        .bbtextarea {literal}{{/literal} width: 650px; height: 160px;                                                        {literal}}{/literal}
+    &lt;/style&gt;
+
+&lt;/head&gt;
+
+&lt;body&gt;
+
+    &lt;div id=&quot;page&quot;&gt;
+
+        &lt;div id=&quot;header&quot;&gt;&lt;/div&gt;
+
+        &lt;div id=&quot;content&quot; class=&quot;narrowcolumn&quot;&gt;
+
+            &lt;h3&gt;{t w=&quot;new_item&quot;}: {$item.title}&lt;/h3&gt;
+
+            &lt;p&gt;
+                &lt;b&gt;{t w=&quot;weblog&quot;}&lt;/b&gt;: &lt;a href=&quot;{$weblog_link}&quot;&gt;{$weblog_title}&lt;/a&gt;&lt;br/&gt;
+                &lt;b&gt;{t w=&quot;item_title&quot;}&lt;/b&gt;: &lt;a href=&quot;{$item_link}&quot;&gt;{$item.title}&lt;/a&gt;&lt;br/&gt;
+            &lt;/p&gt;
+
+            &lt;blockquote&gt;
+                &lt;p&gt;{$item.body|bbcode}&lt;/p&gt;
+                &lt;p&gt;{$item.body_more|bbcode}&lt;/p&gt;
+            &lt;/blockquote&gt;
+
+            &nbsp;
+
+        &lt;/div&gt;
+
+        &lt;div id=&quot;footer&quot;&gt;&lt;/div&gt;
+
+    &lt;/div&gt;
+
+&lt;/body&gt;
+
+&lt;/html&gt;
+

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_gallery.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_gallery.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_gallery.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,67 @@
+{include file=&quot;__std_header.tpl&quot;}
+
+{assign var=&quot;max_img_size&quot; value=&quot;450&quot;}
+
+{capture assign=&quot;browsebar&quot;}
+    {if $image-&gt;previous or $image-&gt;next}
+        &lt;div class=&quot;navigation&quot;&gt;
+            {if $image-&gt;previous}
+                &lt;div class=&quot;alignleft&quot;&gt;&laquo; &lt;a href=&quot;{$YD_SELF_SCRIPT}?id={$image-&gt;previous-&gt;relative_path}&quot;&gt;{t w=&quot;previous&quot;}&lt;/a&gt;&lt;/div&gt;
+            {/if}
+            {if $image-&gt;next}
+                &lt;div class=&quot;alignright&quot;&gt;&lt;a href=&quot;{$YD_SELF_SCRIPT}?id={$image-&gt;next-&gt;relative_path}&quot;&gt;{t w=&quot;next&quot;}&lt;/a&gt; &raquo;&lt;/div&gt;
+            {/if}
+        &lt;/div&gt;
+    {/if}
+{/capture}
+
+&lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt;
+    #page {literal}{{/literal} background: url(&quot;{$image_dir}/kubrickbgwide.jpg&quot;) repeat-y top; border: none; {literal}}{/literal}
+&lt;/style&gt;
+
+&lt;div id=&quot;content&quot; class=&quot;widecolumn&quot;&gt;
+
+    {$browsebar}
+
+    &lt;div class=&quot;post&quot;&gt;
+
+        &lt;h2 id=&quot;post-{$item.id}&quot;&gt;&lt;a href=&quot;{$item|@link_item}&quot;&gt;{$item.title}&lt;/a&gt; &raquo; {$image-&gt;getBasenameNoExt()}&lt;/h2&gt;
+
+        &lt;div class=&quot;entrytext&quot;&gt;
+
+            &lt;p align=&quot;center&quot;&gt;
+            {if $image-&gt;getWidth() &gt; $max_img_size}
+                &lt;iframe src=&quot;{$uploads_dir}/{$image-&gt;relative_path}&quot; width=&quot;{$max_img_size}&quot; height=&quot;{$image-&gt;getHeight()+20}&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot;&gt;&lt;/iframe&gt;
+            {else}
+                &lt;img src=&quot;{$uploads_dir}/{$image-&gt;relative_path}&quot; width=&quot;{$image-&gt;getWidth()}&quot; height=&quot;{$image-&gt;getHeight()}&quot;&gt;
+            {/if}
+            &lt;/p&gt;
+
+            {$browsebar}
+
+            &lt;p class=&quot;postmetadata alt&quot;&gt;
+                &lt;small&gt;
+                    {t w=&quot;image&quot;}: {$image-&gt;getBaseName()}
+                    ({t w=&quot;image&quot;} {$image-&gt;num} {t w=&quot;of&quot;} {$image-&gt;total_images})
+                    &lt;br/&gt;
+                    {t w=&quot;item&quot;}: &lt;a href=&quot;{$item|@link_item}&quot;&gt;{$item.title}&lt;/a&gt;
+                    {if $image-&gt;exif}
+                        &lt;br/&gt;
+                        EXIF: {$image-&gt;exif.Model}
+                        {$image-&gt;exif.ExposureTime|replace:' sec':'s'}
+                        {$image-&gt;exif.ApertureValue|replace:' ':'/'} {t w=&quot;at&quot;}
+                        {$image-&gt;exif.FocalLength|replace:' ':''}
+                        ISO-{$image-&gt;exif.ISOSpeedRatings}
+                    {/if}
+                &lt;/small&gt;
+            &lt;/p&gt;
+
+            &lt;p align=&quot;center&quot;&gt;&lt;a href=&quot;{$item|@link_item_comment}&quot;&gt;{$item|@text_num_comments:true}&lt;/a&gt;&lt;/p&gt;
+
+        &lt;/div&gt;
+
+    &lt;/div&gt;
+
+&lt;/div&gt;
+
+{include file=&quot;__std_footer.tpl&quot;}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/effects.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/effects.js	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/effects.js	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,903 @@
+// Copyright (c) 2005 Thomas Fuchs (<A HREF="http://script.aculo.us,">http://script.aculo.us,</A> <A HREF="http://mir.aculo.us">http://mir.aculo.us</A>)
+// Contributors:
+//  Justin Palmer (<A HREF="http://encytemedia.com/">http://encytemedia.com/</A>)
+//  Mark Pilgrim (<A HREF="http://diveintomark.org/">http://diveintomark.org/</A>)
+//  Martin Bialasinki
+// 
+// See scriptaculous.js for full license.  
+
+/* ------------- element ext -------------- */  
+ 
+// converts rgb() and #xxx to #xxxxxx format,  
+// returns self (or first argument) if not convertable  
+String.prototype.parseColor = function() {  
+  var color = '#';  
+  if(this.slice(0,4) == 'rgb(') {  
+    var cols = this.slice(4,this.length-1).split(',');  
+    var i=0; do { color += parseInt(cols[i]).toColorPart() } while (++i&lt;3);  
+  } else {  
+    if(this.slice(0,1) == '#') {  
+      if(this.length==4) for(var i=1;i&lt;4;i++) color += (this.charAt(i) + this.charAt(i)).toLowerCase();  
+      if(this.length==7) color = this.toLowerCase();  
+    }  
+  }  
+  return(color.length==7 ? color : (arguments[0] || this));  
+}
+
+Element.collectTextNodes = function(element) {  
+  return $A($(element).childNodes).collect( function(node) {
+    return (node.nodeType==3 ? node.nodeValue : 
+      (node.hasChildNodes() ? Element.collectTextNodes(node) : ''));
+  }).flatten().join('');
+}
+
+Element.collectTextNodesIgnoreClass = function(element, className) {  
+  return $A($(element).childNodes).collect( function(node) {
+    return (node.nodeType==3 ? node.nodeValue : 
+      ((node.hasChildNodes() &amp;&amp; !Element.hasClassName(node,className)) ? 
+        Element.collectTextNodes(node) : ''));
+  }).flatten().join('');
+}
+
+Element.setStyle = function(element, style) {
+  element = $(element);
+  for(k in style) element.style[k.camelize()] = style[k];
+}
+
+Element.setContentZoom = function(element, percent) {  
+  Element.setStyle(element, {fontSize: (percent/100) + 'em'});   
+  if(navigator.appVersion.indexOf('AppleWebKit')&gt;0) window.scrollBy(0,0);  
+}
+
+Element.getOpacity = function(element){  
+  var opacity;
+  if (opacity = Element.getStyle(element, 'opacity'))  
+    return parseFloat(opacity);  
+  if (opacity = (Element.getStyle(element, 'filter') || '').match(/alpha\(opacity=(.*)\)/))  
+    if(opacity[1]) return parseFloat(opacity[1]) / 100;  
+  return 1.0;  
+}
+
+Element.setOpacity = function(element, value){  
+  element= $(element);  
+  if (value == 1){
+    Element.setStyle(element, { opacity: 
+      (/Gecko/.test(navigator.userAgent) &amp;&amp; !/Konqueror|Safari|KHTML/.test(navigator.userAgent)) ? 
+      0.999999 : null });
+    if(/MSIE/.test(navigator.userAgent))  
+      Element.setStyle(element, {filter: Element.getStyle(element,'filter').replace(/alpha\([^\)]*\)/gi,'')});  
+  } else {  
+    if(value &lt; 0.00001) value = 0;  
+    Element.setStyle(element, {opacity: value});
+    if(/MSIE/.test(navigator.userAgent))  
+     Element.setStyle(element, 
+       { filter: Element.getStyle(element,'filter').replace(/alpha\([^\)]*\)/gi,'') +
+                 'alpha(opacity='+value*100+')' });  
+  }   
+}  
+ 
+Element.getInlineOpacity = function(element){  
+  return $(element).style.opacity || '';
+}  
+
+Element.childrenWithClassName = function(element, className) {  
+  return $A($(element).getElementsByTagName('*')).select(
+    function(c) { return Element.hasClassName(c, className) });
+}
+
+Array.prototype.call = function() {
+  var args = arguments;
+  this.each(function(f){ f.apply(this, args) });
+}
+
+/*--------------------------------------------------------------------------*/
+
+var Effect = {
+  tagifyText: function(element) {
+    var tagifyStyle = 'position:relative';
+    if(/MSIE/.test(navigator.userAgent)) tagifyStyle += ';zoom:1';
+    element = $(element);
+    $A(element.childNodes).each( function(child) {
+      if(child.nodeType==3) {
+        child.nodeValue.toArray().each( function(character) {
+          element.insertBefore(
+            Builder.node('span',{style: tagifyStyle},
+              character == ' ' ? String.fromCharCode(160) : character), 
+              child);
+        });
+        Element.remove(child);
+      }
+    });
+  },
+  multiple: function(element, effect) {
+    var elements;
+    if(((typeof element == 'object') || 
+        (typeof element == 'function')) &amp;&amp; 
+       (element.length))
+      elements = element;
+    else
+      elements = $(element).childNodes;
+      
+    var options = Object.extend({
+      speed: 0.1,
+      delay: 0.0
+    }, arguments[2] || {});
+    var masterDelay = options.delay;
+
+    $A(elements).each( function(element, index) {
+      new effect(element, Object.extend(options, { delay: index * options.speed + masterDelay }));
+    });
+  },
+  PAIRS: {
+    'slide':  ['SlideDown','SlideUp'],
+    'blind':  ['BlindDown','BlindUp'],
+    'appear': ['Appear','Fade']
+  },
+  toggle: function(element, effect) {
+    element = $(element);
+    effect = (effect || 'appear').toLowerCase();
+    var options = Object.extend({
+      queue: { position:'end', scope:(element.id || 'global') }
+    }, arguments[2] || {});
+    Effect[Element.visible(element) ? 
+      Effect.PAIRS[effect][1] : Effect.PAIRS[effect][0]](element, options);
+  }
+};
+
+var Effect2 = Effect; // deprecated
+
+/* ------------- transitions ------------- */
+
+Effect.Transitions = {}
+
+Effect.Transitions.linear = function(pos) {
+  return pos;
+}
+Effect.Transitions.sinoidal = function(pos) {
+  return (-Math.cos(pos*Math.PI)/2) + 0.5;
+}
+Effect.Transitions.reverse  = function(pos) {
+  return 1-pos;
+}
+Effect.Transitions.flicker = function(pos) {
+  return ((-Math.cos(pos*Math.PI)/4) + 0.75) + Math.random()/4;
+}
+Effect.Transitions.wobble = function(pos) {
+  return (-Math.cos(pos*Math.PI*(9*pos))/2) + 0.5;
+}
+Effect.Transitions.pulse = function(pos) {
+  return (Math.floor(pos*10) % 2 == 0 ? 
+    (pos*10-Math.floor(pos*10)) : 1-(pos*10-Math.floor(pos*10)));
+}
+Effect.Transitions.none = function(pos) {
+  return 0;
+}
+Effect.Transitions.full = function(pos) {
+  return 1;
+}
+
+/* ------------- core effects ------------- */
+
+Effect.ScopedQueue = Class.create();
+Object.extend(Object.extend(Effect.ScopedQueue.prototype, Enumerable), {
+  initialize: function() {
+    this.effects  = [];
+    this.interval = null;
+  },
+  _each: function(iterator) {
+    this.effects._each(iterator);
+  },
+  add: function(effect) {
+    var timestamp = new Date().getTime();
+    
+    var position = (typeof effect.options.queue == 'string') ? 
+      effect.options.queue : effect.options.queue.position;
+    
+    switch(position) {
+      case 'front':
+        // move unstarted effects after this effect  
+        this.effects.findAll(function(e){ return e.state=='idle' }).each( function(e) {
+            e.startOn  += effect.finishOn;
+            e.finishOn += effect.finishOn;
+          });
+        break;
+      case 'end':
+        // start effect after last queued effect has finished
+        timestamp = this.effects.pluck('finishOn').max() || timestamp;
+        break;
+    }
+    
+    effect.startOn  += timestamp;
+    effect.finishOn += timestamp;
+    this.effects.push(effect);
+    if(!this.interval) 
+      this.interval = setInterval(this.loop.bind(this), 40);
+  },
+  remove: function(effect) {
+    this.effects = this.effects.reject(function(e) { return e==effect });
+    if(this.effects.length == 0) {
+      clearInterval(this.interval);
+      this.interval = null;
+    }
+  },
+  loop: function() {
+    var timePos = new Date().getTime();
+    this.effects.invoke('loop', timePos);
+  }
+});
+
+Effect.Queues = {
+  instances: $H(),
+  get: function(queueName) {
+    if(typeof queueName != 'string') return queueName;
+    
+    if(!this.instances[queueName])
+      this.instances[queueName] = new Effect.ScopedQueue();
+      
+    return this.instances[queueName];
+  }
+}
+Effect.Queue = Effect.Queues.get('global');
+
+Effect.DefaultOptions = {
+  transition: Effect.Transitions.sinoidal,
+  duration:   1.0,   // seconds
+  fps:        25.0,  // max. 25fps due to Effect.Queue implementation
+  sync:       false, // true for combining
+  from:       0.0,
+  to:         1.0,
+  delay:      0.0,
+  queue:      'parallel'
+}
+
+Effect.Base = function() {};
+Effect.Base.prototype = {
+  position: null,
+  start: function(options) {
+    this.options      = Object.extend(Object.extend({},Effect.DefaultOptions), options || {});
+    this.currentFrame = 0;
+    this.state        = 'idle';
+    this.startOn      = this.options.delay*1000;
+    this.finishOn     = this.startOn + (this.options.duration*1000);
+    this.event('beforeStart');
+    if(!this.options.sync)
+      Effect.Queues.get(typeof this.options.queue == 'string' ? 
+        'global' : this.options.queue.scope).add(this);
+  },
+  loop: function(timePos) {
+    if(timePos &gt;= this.startOn) {
+      if(timePos &gt;= this.finishOn) {
+        this.render(1.0);
+        this.cancel();
+        this.event('beforeFinish');
+        if(this.finish) this.finish(); 
+        this.event('afterFinish');
+        return;  
+      }
+      var pos   = (timePos - this.startOn) / (this.finishOn - this.startOn);
+      var frame = Math.round(pos * this.options.fps * this.options.duration);
+      if(frame &gt; this.currentFrame) {
+        this.render(pos);
+        this.currentFrame = frame;
+      }
+    }
+  },
+  render: function(pos) {
+    if(this.state == 'idle') {
+      this.state = 'running';
+      this.event('beforeSetup');
+      if(this.setup) this.setup();
+      this.event('afterSetup');
+    }
+    if(this.state == 'running') {
+      if(this.options.transition) pos = this.options.transition(pos);
+      pos *= (this.options.to-this.options.from);
+      pos += this.options.from;
+      this.position = pos;
+      this.event('beforeUpdate');
+      if(this.update) this.update(pos);
+      this.event('afterUpdate');
+    }
+  },
+  cancel: function() {
+    if(!this.options.sync)
+      Effect.Queues.get(typeof this.options.queue == 'string' ? 
+        'global' : this.options.queue.scope).remove(this);
+    this.state = 'finished';
+  },
+  event: function(eventName) {
+    if(this.options[eventName + 'Internal']) this.options[eventName + 'Internal'](this);
+    if(this.options[eventName]) this.options[eventName](this);
+  },
+  inspect: function() {
+    return '#&lt;Effect:' + $H(this).inspect() + ',options:' + $H(this.options).inspect() + '&gt;';
+  }
+}
+
+Effect.Parallel = Class.create();
+Object.extend(Object.extend(Effect.Parallel.prototype, Effect.Base.prototype), {
+  initialize: function(effects) {
+    this.effects = effects || [];
+    this.start(arguments[1]);
+  },
+  update: function(position) {
+    this.effects.invoke('render', position);
+  },
+  finish: function(position) {
+    this.effects.each( function(effect) {
+      effect.render(1.0);
+      effect.cancel();
+      effect.event('beforeFinish');
+      if(effect.finish) effect.finish(position);
+      effect.event('afterFinish');
+    });
+  }
+});
+
+Effect.Opacity = Class.create();
+Object.extend(Object.extend(Effect.Opacity.prototype, Effect.Base.prototype), {
+  initialize: function(element) {
+    this.element = $(element);
+    // make this work on IE on elements without 'layout'
+    if(/MSIE/.test(navigator.userAgent) &amp;&amp; (!this.element.hasLayout))
+      Element.setStyle(this.element, {zoom: 1});
+    var options = Object.extend({
+      from: Element.getOpacity(this.element) || 0.0,
+      to:   1.0
+    }, arguments[1] || {});
+    this.start(options);
+  },
+  update: function(position) {
+    Element.setOpacity(this.element, position);
+  }
+});
+
+Effect.Move = Class.create();
+Object.extend(Object.extend(Effect.Move.prototype, Effect.Base.prototype), {
+  initialize: function(element) {
+    this.element = $(element);
+    var options = Object.extend({
+      x:    0,
+      y:    0,
+      mode: 'relative'
+    }, arguments[1] || {});
+    this.start(options);
+  },
+  setup: function() {
+    // Bug in Opera: Opera returns the &quot;real&quot; position of a static element or
+    // relative element that does not have top/left explicitly set.
+    // ==&gt; Always set top and left for position relative elements in your stylesheets 
+    // (to 0 if you do not need them) 
+    Element.makePositioned(this.element);
+    this.originalLeft = parseFloat(Element.getStyle(this.element,'left') || '0');
+    this.originalTop  = parseFloat(Element.getStyle(this.element,'top')  || '0');
+    if(this.options.mode == 'absolute') {
+      // absolute movement, so we need to calc deltaX and deltaY
+      this.options.x = this.options.x - this.originalLeft;
+      this.options.y = this.options.y - this.originalTop;
+    }
+  },
+  update: function(position) {
+    Element.setStyle(this.element, {
+      left: this.options.x  * position + this.originalLeft + 'px',
+      top:  this.options.y  * position + this.originalTop  + 'px'
+    });
+  }
+});
+
+// for backwards compatibility
+Effect.MoveBy = function(element, toTop, toLeft) {
+  return new Effect.Move(element, 
+    Object.extend({ x: toLeft, y: toTop }, arguments[3] || {}));
+};
+
+Effect.Scale = Class.create();
+Object.extend(Object.extend(Effect.Scale.prototype, Effect.Base.prototype), {
+  initialize: function(element, percent) {
+    this.element = $(element)
+    var options = Object.extend({
+      scaleX: true,
+      scaleY: true,
+      scaleContent: true,
+      scaleFromCenter: false,
+      scaleMode: 'box',        // 'box' or 'contents' or {} with provided values
+      scaleFrom: 100.0,
+      scaleTo:   percent
+    }, arguments[2] || {});
+    this.start(options);
+  },
+  setup: function() {
+    this.restoreAfterFinish = this.options.restoreAfterFinish || false;
+    this.elementPositioning = Element.getStyle(this.element,'position');
+    
+    this.originalStyle = {};
+    ['top','left','width','height','fontSize'].each( function(k) {
+      this.originalStyle[k] = this.element.style[k];
+    }.bind(this));
+      
+    this.originalTop  = this.element.offsetTop;
+    this.originalLeft = this.element.offsetLeft;
+    
+    var fontSize = Element.getStyle(this.element,'font-size') || '100%';
+    ['em','px','%'].each( function(fontSizeType) {
+      if(fontSize.indexOf(fontSizeType)&gt;0) {
+        this.fontSize     = parseFloat(fontSize);
+        this.fontSizeType = fontSizeType;
+      }
+    }.bind(this));
+    
+    this.factor = (this.options.scaleTo - this.options.scaleFrom)/100;
+    
+    this.dims = null;
+    if(this.options.scaleMode=='box')
+      this.dims = [this.element.offsetHeight, this.element.offsetWidth];
+    if(/^content/.test(this.options.scaleMode))
+      this.dims = [this.element.scrollHeight, this.element.scrollWidth];
+    if(!this.dims)
+      this.dims = [this.options.scaleMode.originalHeight,
+                   this.options.scaleMode.originalWidth];
+  },
+  update: function(position) {
+    var currentScale = (this.options.scaleFrom/100.0) + (this.factor * position);
+    if(this.options.scaleContent &amp;&amp; this.fontSize)
+      Element.setStyle(this.element, {fontSize: this.fontSize * currentScale + this.fontSizeType });
+    this.setDimensions(this.dims[0] * currentScale, this.dims[1] * currentScale);
+  },
+  finish: function(position) {
+    if (this.restoreAfterFinish) Element.setStyle(this.element, this.originalStyle);
+  },
+  setDimensions: function(height, width) {
+    var d = {};
+    if(this.options.scaleX) d.width = width + 'px';
+    if(this.options.scaleY) d.height = height + 'px';
+    if(this.options.scaleFromCenter) {
+      var topd  = (height - this.dims[0])/2;
+      var leftd = (width  - this.dims[1])/2;
+      if(this.elementPositioning == 'absolute') {
+        if(this.options.scaleY) d.top = this.originalTop-topd + 'px';
+        if(this.options.scaleX) d.left = this.originalLeft-leftd + 'px';
+      } else {
+        if(this.options.scaleY) d.top = -topd + 'px';
+        if(this.options.scaleX) d.left = -leftd + 'px';
+      }
+    }
+    Element.setStyle(this.element, d);
+  }
+});
+
+Effect.Highlight = Class.create();
+Object.extend(Object.extend(Effect.Highlight.prototype, Effect.Base.prototype), {
+  initialize: function(element) {
+    this.element = $(element);
+    var options = Object.extend({ startcolor: '#ffff99' }, arguments[1] || {});
+    this.start(options);
+  },
+  setup: function() {
+    // Prevent executing on elements not in the layout flow
+    if(Element.getStyle(this.element, 'display')=='none') { this.cancel(); return; }
+    // Disable background image during the effect
+    this.oldStyle = {
+      backgroundImage: Element.getStyle(this.element, 'background-image') };
+    Element.setStyle(this.element, {backgroundImage: 'none'});
+    if(!this.options.endcolor)
+      this.options.endcolor = Element.getStyle(this.element, 'background-color').parseColor('#ffffff');
+    if(!this.options.restorecolor)
+      this.options.restorecolor = Element.getStyle(this.element, 'background-color');
+    // init color calculations
+    this._base  = $R(0,2).map(function(i){ return parseInt(this.options.startcolor.slice(i*2+1,i*2+3),16) }.bind(this));
+    this._delta = $R(0,2).map(function(i){ return parseInt(this.options.endcolor.slice(i*2+1,i*2+3),16)-this._base[i] }.bind(this));
+  },
+  update: function(position) {
+    Element.setStyle(this.element,{backgroundColor: $R(0,2).inject('#',function(m,v,i){
+      return m+(Math.round(this._base[i]+(this._delta[i]*position)).toColorPart()); }.bind(this)) });
+  },
+  finish: function() {
+    Element.setStyle(this.element, Object.extend(this.oldStyle, {
+      backgroundColor: this.options.restorecolor
+    }));
+  }
+});
+
+Effect.ScrollTo = Class.create();
+Object.extend(Object.extend(Effect.ScrollTo.prototype, Effect.Base.prototype), {
+  initialize: function(element) {
+    this.element = $(element);
+    this.start(arguments[1] || {});
+  },
+  setup: function() {
+    Position.prepare();
+    var offsets = Position.cumulativeOffset(this.element);
+    if(this.options.offset) offsets[1] += this.options.offset;
+    var max = window.innerHeight ? 
+      window.height - window.innerHeight :
+      document.body.scrollHeight - 
+        (document.documentElement.clientHeight ? 
+          document.documentElement.clientHeight : document.body.clientHeight);
+    this.scrollStart = Position.deltaY;
+    this.delta = (offsets[1] &gt; max ? max : offsets[1]) - this.scrollStart;
+  },
+  update: function(position) {
+    Position.prepare();
+    window.scrollTo(Position.deltaX, 
+      this.scrollStart + (position*this.delta));
+  }
+});
+
+/* ------------- combination effects ------------- */
+
+Effect.Fade = function(element) {
+  var oldOpacity = Element.getInlineOpacity(element);
+  var options = Object.extend({
+  from: Element.getOpacity(element) || 1.0,
+  to:   0.0,
+  afterFinishInternal: function(effect) { with(Element) { 
+    if(effect.options.to!=0) return;
+    hide(effect.element);
+    setStyle(effect.element, {opacity: oldOpacity}); }}
+  }, arguments[1] || {});
+  return new Effect.Opacity(element,options);
+}
+
+Effect.Appear = function(element) {
+  var options = Object.extend({
+  from: (Element.getStyle(element, 'display') == 'none' ? 0.0 : Element.getOpacity(element) || 0.0),
+  to:   1.0,
+  beforeSetup: function(effect) { with(Element) {
+    setOpacity(effect.element, effect.options.from);
+    show(effect.element); }}
+  }, arguments[1] || {});
+  return new Effect.Opacity(element,options);
+}
+
+Effect.Puff = function(element) {
+  element = $(element);
+  var oldStyle = { opacity: Element.getInlineOpacity(element), position: Element.getStyle(element, 'position') };
+  return new Effect.Parallel(
+   [ new Effect.Scale(element, 200, 
+      { sync: true, scaleFromCenter: true, scaleContent: true, restoreAfterFinish: true }), 
+     new Effect.Opacity(element, { sync: true, to: 0.0 } ) ], 
+     Object.extend({ duration: 1.0, 
+      beforeSetupInternal: function(effect) { with(Element) {
+        setStyle(effect.effects[0].element, {position: 'absolute'}); }},
+      afterFinishInternal: function(effect) { with(Element) {
+         hide(effect.effects[0].element);
+         setStyle(effect.effects[0].element, oldStyle); }}
+     }, arguments[1] || {})
+   );
+}
+
+Effect.BlindUp = function(element) {
+  element = $(element);
+  Element.makeClipping(element);
+  return new Effect.Scale(element, 0, 
+    Object.extend({ scaleContent: false, 
+      scaleX: false, 
+      restoreAfterFinish: true,
+      afterFinishInternal: function(effect) { with(Element) {
+        [hide, undoClipping].call(effect.element); }} 
+    }, arguments[1] || {})
+  );
+}
+
+Effect.BlindDown = function(element) {
+  element = $(element);
+  var oldHeight = Element.getStyle(element, 'height');
+  var elementDimensions = Element.getDimensions(element);
+  return new Effect.Scale(element, 100, 
+    Object.extend({ scaleContent: false, 
+      scaleX: false,
+      scaleFrom: 0,
+      scaleMode: {originalHeight: elementDimensions.height, originalWidth: elementDimensions.width},
+      restoreAfterFinish: true,
+      afterSetup: function(effect) { with(Element) {
+        makeClipping(effect.element);
+        setStyle(effect.element, {height: '0px'});
+        show(effect.element); 
+      }},  
+      afterFinishInternal: function(effect) { with(Element) {
+        undoClipping(effect.element);
+        setStyle(effect.element, {height: oldHeight});
+      }}
+    }, arguments[1] || {})
+  );
+}
+
+Effect.SwitchOff = function(element) {
+  element = $(element);
+  var oldOpacity = Element.getInlineOpacity(element);
+  return new Effect.Appear(element, { 
+    duration: 0.4,
+    from: 0,
+    transition: Effect.Transitions.flicker,
+    afterFinishInternal: function(effect) {
+      new Effect.Scale(effect.element, 1, { 
+        duration: 0.3, scaleFromCenter: true,
+        scaleX: false, scaleContent: false, restoreAfterFinish: true,
+        beforeSetup: function(effect) { with(Element) {
+          [makePositioned,makeClipping].call(effect.element);
+        }},
+        afterFinishInternal: function(effect) { with(Element) {
+          [hide,undoClipping,undoPositioned].call(effect.element);
+          setStyle(effect.element, {opacity: oldOpacity});
+        }}
+      })
+    }
+  });
+}
+
+Effect.DropOut = function(element) {
+  element = $(element);
+  var oldStyle = {
+    top: Element.getStyle(element, 'top'),
+    left: Element.getStyle(element, 'left'),
+    opacity: Element.getInlineOpacity(element) };
+  return new Effect.Parallel(
+    [ new Effect.Move(element, {x: 0, y: 100, sync: true }), 
+      new Effect.Opacity(element, { sync: true, to: 0.0 }) ],
+    Object.extend(
+      { duration: 0.5,
+        beforeSetup: function(effect) { with(Element) {
+          makePositioned(effect.effects[0].element); }},
+        afterFinishInternal: function(effect) { with(Element) {
+          [hide, undoPositioned].call(effect.effects[0].element);
+          setStyle(effect.effects[0].element, oldStyle); }} 
+      }, arguments[1] || {}));
+}
+
+Effect.Shake = function(element) {
+  element = $(element);
+  var oldStyle = {
+    top: Element.getStyle(element, 'top'),
+    left: Element.getStyle(element, 'left') };
+	  return new Effect.Move(element, 
+	    { x:  20, y: 0, duration: 0.05, afterFinishInternal: function(effect) {
+	  new Effect.Move(effect.element,
+	    { x: -40, y: 0, duration: 0.1,  afterFinishInternal: function(effect) {
+	  new Effect.Move(effect.element,
+	    { x:  40, y: 0, duration: 0.1,  afterFinishInternal: function(effect) {
+	  new Effect.Move(effect.element,
+	    { x: -40, y: 0, duration: 0.1,  afterFinishInternal: function(effect) {
+	  new Effect.Move(effect.element,
+	    { x:  40, y: 0, duration: 0.1,  afterFinishInternal: function(effect) {
+	  new Effect.Move(effect.element,
+	    { x: -20, y: 0, duration: 0.05, afterFinishInternal: function(effect) { with(Element) {
+        undoPositioned(effect.element);
+        setStyle(effect.element, oldStyle);
+  }}}) }}) }}) }}) }}) }});
+}
+
+Effect.SlideDown = function(element) {
+  element = $(element);
+  Element.cleanWhitespace(element);
+  // SlideDown need to have the content of the element wrapped in a container element with fixed height!
+  var oldInnerBottom = Element.getStyle(element.firstChild, 'bottom');
+  var elementDimensions = Element.getDimensions(element);
+  return new Effect.Scale(element, 100, Object.extend({ 
+    scaleContent: false, 
+    scaleX: false, 
+    scaleFrom: 0,
+    scaleMode: {originalHeight: elementDimensions.height, originalWidth: elementDimensions.width},
+    restoreAfterFinish: true,
+    afterSetup: function(effect) { with(Element) {
+      makePositioned(effect.element);
+      makePositioned(effect.element.firstChild);
+      if(window.opera) setStyle(effect.element, {top: ''});
+      makeClipping(effect.element);
+      setStyle(effect.element, {height: '0px'});
+      show(element); }},
+    afterUpdateInternal: function(effect) { with(Element) {
+      setStyle(effect.element.firstChild, {bottom:
+        (effect.dims[0] - effect.element.clientHeight) + 'px' }); }},
+    afterFinishInternal: function(effect) { with(Element) {
+      undoClipping(effect.element); 
+      undoPositioned(effect.element.firstChild);
+      undoPositioned(effect.element);
+      setStyle(effect.element.firstChild, {bottom: oldInnerBottom}); }}
+    }, arguments[1] || {})
+  );
+}
+  
+Effect.SlideUp = function(element) {
+  element = $(element);
+  Element.cleanWhitespace(element);
+  var oldInnerBottom = Element.getStyle(element.firstChild, 'bottom');
+  return new Effect.Scale(element, 0, 
+   Object.extend({ scaleContent: false, 
+    scaleX: false, 
+    scaleMode: 'box',
+    scaleFrom: 100,
+    restoreAfterFinish: true,
+    beforeStartInternal: function(effect) { with(Element) {
+      makePositioned(effect.element);
+      makePositioned(effect.element.firstChild);
+      if(window.opera) setStyle(effect.element, {top: ''});
+      makeClipping(effect.element);
+      show(element); }},  
+    afterUpdateInternal: function(effect) { with(Element) {
+      setStyle(effect.element.firstChild, {bottom:
+        (effect.dims[0] - effect.element.clientHeight) + 'px' }); }},
+    afterFinishInternal: function(effect) { with(Element) {
+        [hide, undoClipping].call(effect.element); 
+        undoPositioned(effect.element.firstChild);
+        undoPositioned(effect.element);
+        setStyle(effect.element.firstChild, {bottom: oldInnerBottom}); }}
+   }, arguments[1] || {})
+  );
+}
+
+// Bug in opera makes the TD containing this element expand for a instance after finish 
+Effect.Squish = function(element) {
+  return new Effect.Scale(element, window.opera ? 1 : 0, 
+    { restoreAfterFinish: true,
+      beforeSetup: function(effect) { with(Element) {
+        makeClipping(effect.element); }},  
+      afterFinishInternal: function(effect) { with(Element) {
+        hide(effect.element); 
+        undoClipping(effect.element); }}
+  });
+}
+
+Effect.Grow = function(element) {
+  element = $(element);
+  var options = Object.extend({
+    direction: 'center',
+    moveTransistion: Effect.Transitions.sinoidal,
+    scaleTransition: Effect.Transitions.sinoidal,
+    opacityTransition: Effect.Transitions.full
+  }, arguments[1] || {});
+  var oldStyle = {
+    top: element.style.top,
+    left: element.style.left,
+    height: element.style.height,
+    width: element.style.width,
+    opacity: Element.getInlineOpacity(element) };
+
+  var dims = Element.getDimensions(element);    
+  var initialMoveX, initialMoveY;
+  var moveX, moveY;
+  
+  switch (options.direction) {
+    case 'top-left':
+      initialMoveX = initialMoveY = moveX = moveY = 0; 
+      break;
+    case 'top-right':
+      initialMoveX = dims.width;
+      initialMoveY = moveY = 0;
+      moveX = -dims.width;
+      break;
+    case 'bottom-left':
+      initialMoveX = moveX = 0;
+      initialMoveY = dims.height;
+      moveY = -dims.height;
+      break;
+    case 'bottom-right':
+      initialMoveX = dims.width;
+      initialMoveY = dims.height;
+      moveX = -dims.width;
+      moveY = -dims.height;
+      break;
+    case 'center':
+      initialMoveX = dims.width / 2;
+      initialMoveY = dims.height / 2;
+      moveX = -dims.width / 2;
+      moveY = -dims.height / 2;
+      break;
+  }
+  
+  return new Effect.Move(element, {
+    x: initialMoveX,
+    y: initialMoveY,
+    duration: 0.01, 
+    beforeSetup: function(effect) { with(Element) {
+      hide(effect.element);
+      makeClipping(effect.element);
+      makePositioned(effect.element);
+    }},
+    afterFinishInternal: function(effect) {
+      new Effect.Parallel(
+        [ new Effect.Opacity(effect.element, { sync: true, to: 1.0, from: 0.0, transition: options.opacityTransition }),
+          new Effect.Move(effect.element, { x: moveX, y: moveY, sync: true, transition: options.moveTransition }),
+          new Effect.Scale(effect.element, 100, {
+            scaleMode: { originalHeight: dims.height, originalWidth: dims.width }, 
+            sync: true, scaleFrom: window.opera ? 1 : 0, transition: options.scaleTransition, restoreAfterFinish: true})
+        ], Object.extend({
+             beforeSetup: function(effect) { with(Element) {
+               setStyle(effect.effects[0].element, {height: '0px'});
+               show(effect.effects[0].element); }},
+             afterFinishInternal: function(effect) { with(Element) {
+               [undoClipping, undoPositioned].call(effect.effects[0].element); 
+               setStyle(effect.effects[0].element, oldStyle); }}
+           }, options)
+      )
+    }
+  });
+}
+
+Effect.Shrink = function(element) {
+  element = $(element);
+  var options = Object.extend({
+    direction: 'center',
+    moveTransistion: Effect.Transitions.sinoidal,
+    scaleTransition: Effect.Transitions.sinoidal,
+    opacityTransition: Effect.Transitions.none
+  }, arguments[1] || {});
+  var oldStyle = {
+    top: element.style.top,
+    left: element.style.left,
+    height: element.style.height,
+    width: element.style.width,
+    opacity: Element.getInlineOpacity(element) };
+
+  var dims = Element.getDimensions(element);
+  var moveX, moveY;
+  
+  switch (options.direction) {
+    case 'top-left':
+      moveX = moveY = 0;
+      break;
+    case 'top-right':
+      moveX = dims.width;
+      moveY = 0;
+      break;
+    case 'bottom-left':
+      moveX = 0;
+      moveY = dims.height;
+      break;
+    case 'bottom-right':
+      moveX = dims.width;
+      moveY = dims.height;
+      break;
+    case 'center':  
+      moveX = dims.width / 2;
+      moveY = dims.height / 2;
+      break;
+  }
+  
+  return new Effect.Parallel(
+    [ new Effect.Opacity(element, { sync: true, to: 0.0, from: 1.0, transition: options.opacityTransition }),
+      new Effect.Scale(element, window.opera ? 1 : 0, { sync: true, transition: options.scaleTransition, restoreAfterFinish: true}),
+      new Effect.Move(element, { x: moveX, y: moveY, sync: true, transition: options.moveTransition })
+    ], Object.extend({            
+         beforeStartInternal: function(effect) { with(Element) {
+           [makePositioned, makeClipping].call(effect.effects[0].element) }},
+         afterFinishInternal: function(effect) { with(Element) {
+           [hide, undoClipping, undoPositioned].call(effect.effects[0].element);
+           setStyle(effect.effects[0].element, oldStyle); }}
+       }, options)
+  );
+}
+
+Effect.Pulsate = function(element) {
+  element = $(element);
+  var options    = arguments[1] || {};
+  var oldOpacity = Element.getInlineOpacity(element);
+  var transition = options.transition || Effect.Transitions.sinoidal;
+  var reverser   = function(pos){ return transition(1-Effect.Transitions.pulse(pos)) };
+  reverser.bind(transition);
+  return new Effect.Opacity(element, 
+    Object.extend(Object.extend({  duration: 3.0, from: 0,
+      afterFinishInternal: function(effect) { Element.setStyle(effect.element, {opacity: oldOpacity}); }
+    }, options), {transition: reverser}));
+}
+
+Effect.Fold = function(element) {
+  element = $(element);
+  var oldStyle = {
+    top: element.style.top,
+    left: element.style.left,
+    width: element.style.width,
+    height: element.style.height };
+  Element.makeClipping(element);
+  return new Effect.Scale(element, 5, Object.extend({   
+    scaleContent: false,
+    scaleX: false,
+    afterFinishInternal: function(effect) {
+    new Effect.Scale(element, 1, { 
+      scaleContent: false, 
+      scaleY: false,
+      afterFinishInternal: function(effect) { with(Element) {
+        [hide, undoClipping].call(effect.element); 
+        setStyle(effect.element, oldStyle);
+      }} });
+  }}, arguments[1] || {}));
+}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/lightbox.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/lightbox.js	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/lightbox.js	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,689 @@
+// -----------------------------------------------------------------------------------
+//
+//	Lightbox v2.02
+//	by Lokesh Dhakar - <A HREF="http://www.huddletogether.com">http://www.huddletogether.com</A>
+//	3/31/06
+//
+//	For more information on this script, visit:
+//	<A HREF="http://huddletogether.com/projects/lightbox2/">http://huddletogether.com/projects/lightbox2/</A>
+//
+//	Licensed under the Creative Commons Attribution 2.5 License - <A HREF="http://creativecommons.org/licenses/by/2.5/">http://creativecommons.org/licenses/by/2.5/</A>
+//	
+//	Credit also due to those who have helped, inspired, and made their code available to the public.
+//	Including: Scott Upton(uptonic.com), Peter-Paul Koch(quirksmode.org), Thomas Fuchs(mir.aculo.us), and others.
+//
+//
+// -----------------------------------------------------------------------------------
+/*
+
+	Table of Contents
+	-----------------
+	Configuration
+	Global Variables
+
+	Extending Built-in Objects	
+	- Object.extend(Element)
+	- Array.prototype.removeDuplicates()
+	- Array.prototype.empty()
+
+	Lightbox Class Declaration
+	- initialize()
+	- start()
+	- changeImage()
+	- resizeImageContainer()
+	- showImage()
+	- updateDetails()
+	- updateNav()
+	- enableKeyboardNav()
+	- disableKeyboardNav()
+	- keyboardAction()
+	- preloadNeighborImages()
+	- end()
+	
+	Miscellaneous Functions
+	- getPageScroll()
+	- getPageSize()
+	- getKey()
+	- listenKey()
+	- showSelectBoxes()
+	- hideSelectBoxes()
+	- pause()
+	- initLightbox()
+	
+	Function Calls
+	- addLoadEvent(initLightbox)
+	
+*/
+// -----------------------------------------------------------------------------------
+
+//
+//	Configuration
+//
+var fileLoadingImage = &quot;skins/default_with_lightbox/images/loading.gif&quot;;		
+var fileBottomNavCloseImage = &quot;skins/default_with_lightbox/images/closelabel.gif&quot;;
+
+var resizeSpeed = 7;	// controls the speed of the image resizing (1=slowest and 10=fastest)
+
+var borderSize = 10;	//if you adjust the padding in the CSS, you will need to update this variable
+
+// -----------------------------------------------------------------------------------
+
+//
+//	Global Variables
+//
+var imageArray = new Array;
+var activeImage;
+
+if(resizeSpeed &gt; 10){ resizeSpeed = 10;}
+if(resizeSpeed &lt; 1){ resizeSpeed = 1;}
+resizeDuration = (11 - resizeSpeed) * 0.15;
+
+// -----------------------------------------------------------------------------------
+
+//
+//	Additional methods for Element added by SU, Couloir
+//	- further additions by Lokesh Dhakar (huddletogether.com)
+//
+Object.extend(Element, {
+	getWidth: function(element) {
+	   	element = $(element);
+	   	return element.offsetWidth; 
+	},
+	setWidth: function(element,w) {
+	   	element = $(element);
+    	element.style.width = w +&quot;px&quot;;
+	},
+	setHeight: function(element,h) {
+   		element = $(element);
+    	element.style.height = h +&quot;px&quot;;
+	},
+	setTop: function(element,t) {
+	   	element = $(element);
+    	element.style.top = t +&quot;px&quot;;
+	},
+	setSrc: function(element,src) {
+    	element = $(element);
+    	element.src = src; 
+	},
+	setHref: function(element,href) {
+    	element = $(element);
+    	element.href = href; 
+	},
+	setInnerHTML: function(element,content) {
+		element = $(element);
+		element.innerHTML = content;
+	}
+});
+
+// -----------------------------------------------------------------------------------
+
+//
+//	Extending built-in Array object
+//	- array.removeDuplicates()
+//	- array.empty()
+//
+Array.prototype.removeDuplicates = function () {
+	for(i = 1; i &lt; this.length; i++){
+		if(this[i][0] == this[i-1][0]){
+			this.splice(i,1);
+		}
+	}
+}
+
+// -----------------------------------------------------------------------------------
+
+Array.prototype.empty = function () {
+	for(i = 0; i &lt;= this.length; i++){
+		this.shift();
+	}
+}
+
+// -----------------------------------------------------------------------------------
+
+//
+//	Lightbox Class Declaration
+//	- initialize()
+//	- start()
+//	- changeImage()
+//	- resizeImageContainer()
+//	- showImage()
+//	- updateDetails()
+//	- updateNav()
+//	- enableKeyboardNav()
+//	- disableKeyboardNav()
+//	- keyboardNavAction()
+//	- preloadNeighborImages()
+//	- end()
+//
+//	Structuring of code inspired by Scott Upton (<A HREF="http://www.uptonic.com/">http://www.uptonic.com/</A>)
+//
+var Lightbox = Class.create();
+
+Lightbox.prototype = {
+	
+	// initialize()
+	// Constructor runs on completion of the DOM loading. Loops through anchor tags looking for 
+	// 'lightbox' references and applies onclick events to appropriate links. The 2nd section of
+	// the function inserts html at the bottom of the page which is used to display the shadow 
+	// overlay and the image container.
+	//
+	initialize: function() {	
+		if (!document.getElementsByTagName){ return; }
+		var anchors = document.getElementsByTagName('a');
+
+		// loop through all anchor tags
+		for (var i=0; i&lt;anchors.length; i++){
+			var anchor = anchors[i];
+			
+			var relAttribute = String(anchor.getAttribute('rel'));
+			
+			// use the string.match() method to catch 'lightbox' references in the rel attribute
+			if (anchor.getAttribute('href') &amp;&amp; (relAttribute.toLowerCase().match('lightbox'))){
+				anchor.onclick = function () {myLightbox.start(this); return false;}
+			}
+		}
+
+		// The rest of this code inserts html at the bottom of the page that looks similar to this:
+		//
+		//	&lt;div id=&quot;overlay&quot;&gt;&lt;/div&gt;
+		//	&lt;div id=&quot;lightbox&quot;&gt;
+		//		&lt;div id=&quot;outerImageContainer&quot;&gt;
+		//			&lt;div id=&quot;imageContainer&quot;&gt;
+		//				&lt;img id=&quot;lightboxImage&quot;&gt;
+		//				&lt;div style=&quot;&quot; id=&quot;hoverNav&quot;&gt;
+		//					&lt;a href=&quot;#&quot; id=&quot;prevLink&quot;&gt;&lt;/a&gt;
+		//					&lt;a href=&quot;#&quot; id=&quot;nextLink&quot;&gt;&lt;/a&gt;
+		//				&lt;/div&gt;
+		//				&lt;div id=&quot;loading&quot;&gt;
+		//					&lt;a href=&quot;#&quot; id=&quot;loadingLink&quot;&gt;
+		//						&lt;img src=&quot;images/loading.gif&quot;&gt;
+		//					&lt;/a&gt;
+		//				&lt;/div&gt;
+		//			&lt;/div&gt;
+		//		&lt;/div&gt;
+		//		&lt;div id=&quot;imageDataContainer&quot;&gt;
+		//			&lt;div id=&quot;imageData&quot;&gt;
+		//				&lt;div id=&quot;imageDetails&quot;&gt;
+		//					&lt;span id=&quot;caption&quot;&gt;&lt;/span&gt;
+		//					&lt;span id=&quot;numberDisplay&quot;&gt;&lt;/span&gt;
+		//				&lt;/div&gt;
+		//				&lt;div id=&quot;bottomNav&quot;&gt;
+		//					&lt;a href=&quot;#&quot; id=&quot;bottomNavClose&quot;&gt;
+		//						&lt;img src=&quot;images/close.gif&quot;&gt;
+		//					&lt;/a&gt;
+		//				&lt;/div&gt;
+		//			&lt;/div&gt;
+		//		&lt;/div&gt;
+		//	&lt;/div&gt;
+
+
+		var objBody = document.getElementsByTagName(&quot;body&quot;).item(0);
+		
+		var objOverlay = document.createElement(&quot;div&quot;);
+		objOverlay.setAttribute('id','overlay');
+		objOverlay.style.display = 'none';
+		objOverlay.onclick = function() { myLightbox.end(); return false; }
+		objBody.appendChild(objOverlay);
+		
+		var objLightbox = document.createElement(&quot;div&quot;);
+		objLightbox.setAttribute('id','lightbox');
+		objLightbox.style.display = 'none';
+		objBody.appendChild(objLightbox);
+	
+		var objOuterImageContainer = document.createElement(&quot;div&quot;);
+		objOuterImageContainer.setAttribute('id','outerImageContainer');
+		objLightbox.appendChild(objOuterImageContainer);
+
+		var objImageContainer = document.createElement(&quot;div&quot;);
+		objImageContainer.setAttribute('id','imageContainer');
+		objOuterImageContainer.appendChild(objImageContainer);
+	
+		var objLightboxImage = document.createElement(&quot;img&quot;);
+		objLightboxImage.setAttribute('id','lightboxImage');
+		objImageContainer.appendChild(objLightboxImage);
+	
+		var objHoverNav = document.createElement(&quot;div&quot;);
+		objHoverNav.setAttribute('id','hoverNav');
+		objImageContainer.appendChild(objHoverNav);
+	
+		var objPrevLink = document.createElement(&quot;a&quot;);
+		objPrevLink.setAttribute('id','prevLink');
+		objPrevLink.setAttribute('href','#');
+		objHoverNav.appendChild(objPrevLink);
+		
+		var objNextLink = document.createElement(&quot;a&quot;);
+		objNextLink.setAttribute('id','nextLink');
+		objNextLink.setAttribute('href','#');
+		objHoverNav.appendChild(objNextLink);
+	
+		var objLoading = document.createElement(&quot;div&quot;);
+		objLoading.setAttribute('id','loading');
+		objImageContainer.appendChild(objLoading);
+	
+		var objLoadingLink = document.createElement(&quot;a&quot;);
+		objLoadingLink.setAttribute('id','loadingLink');
+		objLoadingLink.setAttribute('href','#');
+		objLoadingLink.onclick = function() { myLightbox.end(); return false; }
+		objLoading.appendChild(objLoadingLink);
+	
+		var objLoadingImage = document.createElement(&quot;img&quot;);
+		objLoadingImage.setAttribute('src', fileLoadingImage);
+		objLoadingLink.appendChild(objLoadingImage);
+
+		var objImageDataContainer = document.createElement(&quot;div&quot;);
+		objImageDataContainer.setAttribute('id','imageDataContainer');
+		objImageDataContainer.className = 'clearfix';
+		objLightbox.appendChild(objImageDataContainer);
+
+		var objImageData = document.createElement(&quot;div&quot;);
+		objImageData.setAttribute('id','imageData');
+		objImageDataContainer.appendChild(objImageData);
+	
+		var objImageDetails = document.createElement(&quot;div&quot;);
+		objImageDetails.setAttribute('id','imageDetails');
+		objImageData.appendChild(objImageDetails);
+	
+		var objCaption = document.createElement(&quot;span&quot;);
+		objCaption.setAttribute('id','caption');
+		objImageDetails.appendChild(objCaption);
+	
+		var objNumberDisplay = document.createElement(&quot;span&quot;);
+		objNumberDisplay.setAttribute('id','numberDisplay');
+		objImageDetails.appendChild(objNumberDisplay);
+		
+		var objBottomNav = document.createElement(&quot;div&quot;);
+		objBottomNav.setAttribute('id','bottomNav');
+		objImageData.appendChild(objBottomNav);
+	
+		var objBottomNavCloseLink = document.createElement(&quot;a&quot;);
+		objBottomNavCloseLink.setAttribute('id','bottomNavClose');
+		objBottomNavCloseLink.setAttribute('href','#');
+		objBottomNavCloseLink.onclick = function() { myLightbox.end(); return false; }
+		objBottomNav.appendChild(objBottomNavCloseLink);
+	
+		var objBottomNavCloseImage = document.createElement(&quot;img&quot;);
+		objBottomNavCloseImage.setAttribute('src', fileBottomNavCloseImage);
+		objBottomNavCloseLink.appendChild(objBottomNavCloseImage);
+	},
+	
+	//
+	//	start()
+	//	Display overlay and lightbox. If image is part of a set, add siblings to imageArray.
+	//
+	start: function(imageLink) {	
+
+		hideSelectBoxes();
+
+		// stretch overlay to fill page and fade in
+		var arrayPageSize = getPageSize();
+		Element.setHeight('overlay', arrayPageSize[1]);
+		new Effect.Appear('overlay', { duration: 0.2, from: 0.0, to: 0.8 });
+
+		imageArray = [];
+		imageNum = 0;		
+
+		if (!document.getElementsByTagName){ return; }
+		var anchors = document.getElementsByTagName('a');
+
+		// if image is NOT part of a set..
+		if((imageLink.getAttribute('rel') == 'lightbox')){
+			// add single image to imageArray
+			imageArray.push(new Array(imageLink.getAttribute('href'), imageLink.getAttribute('title')));			
+		} else {
+		// if image is part of a set..
+
+			// loop through anchors, find other images in set, and add them to imageArray
+			for (var i=0; i&lt;anchors.length; i++){
+				var anchor = anchors[i];
+				if (anchor.getAttribute('href') &amp;&amp; (anchor.getAttribute('rel') == imageLink.getAttribute('rel'))){
+					imageArray.push(new Array(anchor.getAttribute('href'), anchor.getAttribute('title')));
+				}
+			}
+			imageArray.removeDuplicates();
+			while(imageArray[imageNum][0] != imageLink.getAttribute('href')) { imageNum++;}
+		}
+
+		// calculate top offset for the lightbox and display 
+		var arrayPageSize = getPageSize();
+		var arrayPageScroll = getPageScroll();
+		var lightboxTop = arrayPageScroll[1] + (arrayPageSize[3] / 15);
+
+		Element.setTop('lightbox', lightboxTop);
+		Element.show('lightbox');
+		
+		this.changeImage(imageNum);
+	},
+
+	//
+	//	changeImage()
+	//	Hide most elements and preload image in preparation for resizing image container.
+	//
+	changeImage: function(imageNum) {	
+		
+		activeImage = imageNum;	// update global var
+
+		// hide elements during transition
+		Element.show('loading');
+		Element.hide('lightboxImage');
+		Element.hide('hoverNav');
+		Element.hide('prevLink');
+		Element.hide('nextLink');
+		Element.hide('imageDataContainer');
+		Element.hide('numberDisplay');		
+		
+		imgPreloader = new Image();
+		
+		// once image is preloaded, resize image container
+		imgPreloader.onload=function(){
+			Element.setSrc('lightboxImage', imageArray[activeImage][0]);
+			myLightbox.resizeImageContainer(imgPreloader.width, imgPreloader.height);
+		}
+		imgPreloader.src = imageArray[activeImage][0];
+	},
+
+	//
+	//	resizeImageContainer()
+	//
+	resizeImageContainer: function( imgWidth, imgHeight) {
+
+		// get current height and width
+		this.wCur = Element.getWidth('outerImageContainer');
+		this.hCur = Element.getHeight('outerImageContainer');
+
+		// scalars based on change from old to new
+		this.xScale = ((imgWidth  + (borderSize * 2)) / this.wCur) * 100;
+		this.yScale = ((imgHeight  + (borderSize * 2)) / this.hCur) * 100;
+
+		// calculate size difference between new and old image, and resize if necessary
+		wDiff = (this.wCur - borderSize * 2) - imgWidth;
+		hDiff = (this.hCur - borderSize * 2) - imgHeight;
+
+		if(!( hDiff == 0)){ new Effect.Scale('outerImageContainer', this.yScale, {scaleX: false, duration: resizeDuration, queue: 'front'}); }
+		if(!( wDiff == 0)){ new Effect.Scale('outerImageContainer', this.xScale, {scaleY: false, delay: resizeDuration, duration: resizeDuration}); }
+
+		// if new and old image are same size and no scaling transition is necessary, 
+		// do a quick pause to prevent image flicker.
+		if((hDiff == 0) &amp;&amp; (wDiff == 0)){
+			if (navigator.appVersion.indexOf(&quot;MSIE&quot;)!=-1){ pause(250); } else { pause(100);} 
+		}
+
+		Element.setHeight('prevLink', imgHeight);
+		Element.setHeight('nextLink', imgHeight);
+		Element.setWidth( 'imageDataContainer', imgWidth + (borderSize * 2));
+
+		this.showImage();
+	},
+	
+	//
+	//	showImage()
+	//	Display image and begin preloading neighbors.
+	//
+	showImage: function(){
+		Element.hide('loading');
+		new Effect.Appear('lightboxImage', { duration: 0.5, queue: 'end', afterFinish: function(){	myLightbox.updateDetails(); } });
+		this.preloadNeighborImages();
+	},
+
+	//
+	//	updateDetails()
+	//	Display caption, image number, and bottom nav.
+	//
+	updateDetails: function() {
+	
+		Element.show('caption');
+		Element.setInnerHTML( 'caption', imageArray[activeImage][1]);
+		
+		// if image is part of set display 'Image x of x' 
+		if(imageArray.length &gt; 1){
+			Element.show('numberDisplay');
+			Element.setInnerHTML( 'numberDisplay', &quot;Image &quot; + eval(activeImage + 1) + &quot; of &quot; + imageArray.length);
+		}
+
+		new Effect.Parallel(
+			[ new Effect.SlideDown( 'imageDataContainer', { sync: true, duration: resizeDuration + 0.25, from: 0.0, to: 1.0 }), 
+			  new Effect.Appear('imageDataContainer', { sync: true, duration: 1.0 }) ], 
+			{ duration: 0.65, afterFinish: function() { myLightbox.updateNav();} } 
+		);
+	},
+
+	//
+	//	updateNav()
+	//	Display appropriate previous and next hover navigation.
+	//
+	updateNav: function() {
+
+		Element.show('hoverNav');				
+
+		// if not first image in set, display prev image button
+		if(activeImage != 0){
+			Element.show('prevLink');
+			document.getElementById('prevLink').onclick = function() {
+				myLightbox.changeImage(activeImage - 1); return false;
+			}
+		}
+
+		// if not last image in set, display next image button
+		if(activeImage != (imageArray.length - 1)){
+			Element.show('nextLink');
+			document.getElementById('nextLink').onclick = function() {
+				myLightbox.changeImage(activeImage + 1); return false;
+			}
+		}
+		
+		this.enableKeyboardNav();
+	},
+
+	//
+	//	enableKeyboardNav()
+	//
+	enableKeyboardNav: function() {
+		document.onkeydown = this.keyboardAction; 
+	},
+
+	//
+	//	disableKeyboardNav()
+	//
+	disableKeyboardNav: function() {
+		document.onkeydown = '';
+	},
+
+	//
+	//	keyboardAction()
+	//
+	keyboardAction: function(e) {
+		if (e == null) { // ie
+			keycode = event.keyCode;
+		} else { // mozilla
+			keycode = e.which;
+		}
+
+		key = String.fromCharCode(keycode).toLowerCase();
+		
+		if((key == 'x') || (key == 'o') || (key == 'c')){	// close lightbox
+			myLightbox.end();
+		} else if(key == 'p'){	// display previous image
+			if(activeImage != 0){
+				myLightbox.disableKeyboardNav();
+				myLightbox.changeImage(activeImage - 1);
+			}
+		} else if(key == 'n'){	// display next image
+			if(activeImage != (imageArray.length - 1)){
+				myLightbox.disableKeyboardNav();
+				myLightbox.changeImage(activeImage + 1);
+			}
+		}
+
+
+	},
+
+	//
+	//	preloadNeighborImages()
+	//	Preload previous and next images.
+	//
+	preloadNeighborImages: function(){
+
+		if((imageArray.length - 1) &gt; activeImage){
+			preloadNextImage = new Image();
+			preloadNextImage.src = imageArray[activeImage + 1][0];
+		}
+		if(activeImage &gt; 0){
+			preloadPrevImage = new Image();
+			preloadPrevImage.src = imageArray[activeImage - 1][0];
+		}
+	
+	},
+
+	//
+	//	end()
+	//
+	end: function() {
+		this.disableKeyboardNav();
+		Element.hide('lightbox');
+		new Effect.Fade('overlay', { duration: 0.2});
+		showSelectBoxes();
+	}
+}
+
+// -----------------------------------------------------------------------------------
+
+//
+// getPageScroll()
+// Returns array with x,y page scroll values.
+// Core code from - quirksmode.org
+//
+function getPageScroll(){
+
+	var yScroll;
+
+	if (self.pageYOffset) {
+		yScroll = self.pageYOffset;
+	} else if (document.documentElement &amp;&amp; document.documentElement.scrollTop){	 // Explorer 6 Strict
+		yScroll = document.documentElement.scrollTop;
+	} else if (document.body) {// all other Explorers
+		yScroll = document.body.scrollTop;
+	}
+
+	arrayPageScroll = new Array('',yScroll) 
+	return arrayPageScroll;
+}
+
+// -----------------------------------------------------------------------------------
+
+//
+// getPageSize()
+// Returns array with page width, height and window width, height
+// Core code from - quirksmode.org
+// Edit for Firefox by pHaez
+//
+function getPageSize(){
+	
+	var xScroll, yScroll;
+	
+	if (window.innerHeight &amp;&amp; window.scrollMaxY) {	
+		xScroll = document.body.scrollWidth;
+		yScroll = window.innerHeight + window.scrollMaxY;
+	} else if (document.body.scrollHeight &gt; document.body.offsetHeight){ // all but Explorer Mac
+		xScroll = document.body.scrollWidth;
+		yScroll = document.body.scrollHeight;
+	} else { // Explorer Mac...would also work in Explorer 6 Strict, Mozilla and Safari
+		xScroll = document.body.offsetWidth;
+		yScroll = document.body.offsetHeight;
+	}
+	
+	var windowWidth, windowHeight;
+	if (self.innerHeight) {	// all except Explorer
+		windowWidth = self.innerWidth;
+		windowHeight = self.innerHeight;
+	} else if (document.documentElement &amp;&amp; document.documentElement.clientHeight) { // Explorer 6 Strict Mode
+		windowWidth = document.documentElement.clientWidth;
+		windowHeight = document.documentElement.clientHeight;
+	} else if (document.body) { // other Explorers
+		windowWidth = document.body.clientWidth;
+		windowHeight = document.body.clientHeight;
+	}	
+	
+	// for small pages with total height less then height of the viewport
+	if(yScroll &lt; windowHeight){
+		pageHeight = windowHeight;
+	} else { 
+		pageHeight = yScroll;
+	}
+
+	// for small pages with total width less then width of the viewport
+	if(xScroll &lt; windowWidth){	
+		pageWidth = windowWidth;
+	} else {
+		pageWidth = xScroll;
+	}
+
+
+	arrayPageSize = new Array(pageWidth,pageHeight,windowWidth,windowHeight) 
+	return arrayPageSize;
+}
+
+// -----------------------------------------------------------------------------------
+
+//
+// getKey(key)
+// Gets keycode. If 'x' is pressed then it hides the lightbox.
+//
+function getKey(e){
+	if (e == null) { // ie
+		keycode = event.keyCode;
+	} else { // mozilla
+		keycode = e.which;
+	}
+	key = String.fromCharCode(keycode).toLowerCase();
+	
+	if(key == 'x'){
+	}
+}
+
+// -----------------------------------------------------------------------------------
+
+//
+// listenKey()
+//
+function listenKey () {	document.onkeypress = getKey; }
+	
+// ---------------------------------------------------
+
+function showSelectBoxes(){
+	selects = document.getElementsByTagName(&quot;select&quot;);
+	for (i = 0; i != selects.length; i++) {
+		selects[i].style.visibility = &quot;visible&quot;;
+	}
+}
+
+// ---------------------------------------------------
+
+function hideSelectBoxes(){
+	selects = document.getElementsByTagName(&quot;select&quot;);
+	for (i = 0; i != selects.length; i++) {
+		selects[i].style.visibility = &quot;hidden&quot;;
+	}
+}
+
+// ---------------------------------------------------
+
+//
+// pause(numberMillis)
+// Pauses code execution for specified time. Uses busy code, not good.
+// Code from <A HREF="http://www.faqts.com/knowledge_base/view.phtml/aid/1602">http://www.faqts.com/knowledge_base/view.phtml/aid/1602</A>
+//
+function pause(numberMillis) {
+	var now = new Date();
+	var exitTime = now.getTime() + numberMillis;
+	while (true) {
+		now = new Date();
+		if (now.getTime() &gt; exitTime)
+			return;
+	}
+}
+
+// ---------------------------------------------------
+
+
+
+function initLightbox() { myLightbox = new Lightbox(); }
+Event.observe(window, 'load', initLightbox, false);
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/prototype.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/prototype.js	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/prototype.js	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,1785 @@
+/*  Prototype JavaScript framework, version 1.4.0
+ *  (c) 2005 Sam Stephenson &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/ydframework-devel">sam at conio.net</A>&gt;
+ *
+ *  THIS FILE IS AUTOMATICALLY GENERATED. When sending patches, please diff
+ *  against the source tree, available from the Prototype darcs repository.
+ *
+ *  Prototype is freely distributable under the terms of an MIT-style license.
+ *
+ *  For details, see the Prototype web site: <A HREF="http://prototype.conio.net/">http://prototype.conio.net/</A>
+ *
+/*--------------------------------------------------------------------------*/
+
+var Prototype = {
+  Version: '1.4.0',
+  ScriptFragment: '(?:&lt;script.*?&gt;)((\n|\r|.)*?)(?:&lt;\/script&gt;)',
+
+  emptyFunction: function() {},
+  K: function(x) {return x}
+}
+
+var Class = {
+  create: function() {
+    return function() {
+      this.initialize.apply(this, arguments);
+    }
+  }
+}
+
+var Abstract = new Object();
+
+Object.extend = function(destination, source) {
+  for (property in source) {
+    destination[property] = source[property];
+  }
+  return destination;
+}
+
+Object.inspect = function(object) {
+  try {
+    if (object == undefined) return 'undefined';
+    if (object == null) return 'null';
+    return object.inspect ? object.inspect() : object.toString();
+  } catch (e) {
+    if (e instanceof RangeError) return '...';
+    throw e;
+  }
+}
+
+Function.prototype.bind = function() {
+  var __method = this, args = $A(arguments), object = args.shift();
+  return function() {
+    return __method.apply(object, args.concat($A(arguments)));
+  }
+}
+
+Function.prototype.bindAsEventListener = function(object) {
+  var __method = this;
+  return function(event) {
+    return __method.call(object, event || window.event);
+  }
+}
+
+Object.extend(Number.prototype, {
+  toColorPart: function() {
+    var digits = this.toString(16);
+    if (this &lt; 16) return '0' + digits;
+    return digits;
+  },
+
+  succ: function() {
+    return this + 1;
+  },
+
+  times: function(iterator) {
+    $R(0, this, true).each(iterator);
+    return this;
+  }
+});
+
+var Try = {
+  these: function() {
+    var returnValue;
+
+    for (var i = 0; i &lt; arguments.length; i++) {
+      var lambda = arguments[i];
+      try {
+        returnValue = lambda();
+        break;
+      } catch (e) {}
+    }
+
+    return returnValue;
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+var PeriodicalExecuter = Class.create();
+PeriodicalExecuter.prototype = {
+  initialize: function(callback, frequency) {
+    this.callback = callback;
+    this.frequency = frequency;
+    this.currentlyExecuting = false;
+
+    this.registerCallback();
+  },
+
+  registerCallback: function() {
+    setInterval(this.onTimerEvent.bind(this), this.frequency * 1000);
+  },
+
+  onTimerEvent: function() {
+    if (!this.currentlyExecuting) {
+      try {
+        this.currentlyExecuting = true;
+        this.callback();
+      } finally {
+        this.currentlyExecuting = false;
+      }
+    }
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+function $() {
+  var elements = new Array();
+
+  for (var i = 0; i &lt; arguments.length; i++) {
+    var element = arguments[i];
+    if (typeof element == 'string')
+      element = document.getElementById(element);
+
+    if (arguments.length == 1)
+      return element;
+
+    elements.push(element);
+  }
+
+  return elements;
+}
+Object.extend(String.prototype, {
+  stripTags: function() {
+    return this.replace(/&lt;\/?[^&gt;]+&gt;/gi, '');
+  },
+
+  stripScripts: function() {
+    return this.replace(new RegExp(Prototype.ScriptFragment, 'img'), '');
+  },
+
+  extractScripts: function() {
+    var matchAll = new RegExp(Prototype.ScriptFragment, 'img');
+    var matchOne = new RegExp(Prototype.ScriptFragment, 'im');
+    return (this.match(matchAll) || []).map(function(scriptTag) {
+      return (scriptTag.match(matchOne) || ['', ''])[1];
+    });
+  },
+
+  evalScripts: function() {
+    return this.extractScripts().map(eval);
+  },
+
+  escapeHTML: function() {
+    var div = document.createElement('div');
+    var text = document.createTextNode(this);
+    div.appendChild(text);
+    return div.innerHTML;
+  },
+
+  unescapeHTML: function() {
+    var div = document.createElement('div');
+    div.innerHTML = this.stripTags();
+    return div.childNodes[0] ? div.childNodes[0].nodeValue : '';
+  },
+
+  toQueryParams: function() {
+    var pairs = this.match(/^\??(.*)$/)[1].split('&amp;');
+    return pairs.inject({}, function(params, pairString) {
+      var pair = pairString.split('=');
+      params[pair[0]] = pair[1];
+      return params;
+    });
+  },
+
+  toArray: function() {
+    return this.split('');
+  },
+
+  camelize: function() {
+    var oStringList = this.split('-');
+    if (oStringList.length == 1) return oStringList[0];
+
+    var camelizedString = this.indexOf('-') == 0
+      ? oStringList[0].charAt(0).toUpperCase() + oStringList[0].substring(1)
+      : oStringList[0];
+
+    for (var i = 1, len = oStringList.length; i &lt; len; i++) {
+      var s = oStringList[i];
+      camelizedString += s.charAt(0).toUpperCase() + s.substring(1);
+    }
+
+    return camelizedString;
+  },
+
+  inspect: function() {
+    return &quot;'&quot; + this.replace('\\', '\\\\').replace(&quot;'&quot;, '\\\'') + &quot;'&quot;;
+  }
+});
+
+String.prototype.parseQuery = String.prototype.toQueryParams;
+
+var $break    = new Object();
+var $continue = new Object();
+
+var Enumerable = {
+  each: function(iterator) {
+    var index = 0;
+    try {
+      this._each(function(value) {
+        try {
+          iterator(value, index++);
+        } catch (e) {
+          if (e != $continue) throw e;
+        }
+      });
+    } catch (e) {
+      if (e != $break) throw e;
+    }
+  },
+
+  all: function(iterator) {
+    var result = true;
+    this.each(function(value, index) {
+      result = result &amp;&amp; !!(iterator || Prototype.K)(value, index);
+      if (!result) throw $break;
+    });
+    return result;
+  },
+
+  any: function(iterator) {
+    var result = true;
+    this.each(function(value, index) {
+      if (result = !!(iterator || Prototype.K)(value, index))
+        throw $break;
+    });
+    return result;
+  },
+
+  collect: function(iterator) {
+    var results = [];
+    this.each(function(value, index) {
+      results.push(iterator(value, index));
+    });
+    return results;
+  },
+
+  detect: function (iterator) {
+    var result;
+    this.each(function(value, index) {
+      if (iterator(value, index)) {
+        result = value;
+        throw $break;
+      }
+    });
+    return result;
+  },
+
+  findAll: function(iterator) {
+    var results = [];
+    this.each(function(value, index) {
+      if (iterator(value, index))
+        results.push(value);
+    });
+    return results;
+  },
+
+  grep: function(pattern, iterator) {
+    var results = [];
+    this.each(function(value, index) {
+      var stringValue = value.toString();
+      if (stringValue.match(pattern))
+        results.push((iterator || Prototype.K)(value, index));
+    })
+    return results;
+  },
+
+  include: function(object) {
+    var found = false;
+    this.each(function(value) {
+      if (value == object) {
+        found = true;
+        throw $break;
+      }
+    });
+    return found;
+  },
+
+  inject: function(memo, iterator) {
+    this.each(function(value, index) {
+      memo = iterator(memo, value, index);
+    });
+    return memo;
+  },
+
+  invoke: function(method) {
+    var args = $A(arguments).slice(1);
+    return this.collect(function(value) {
+      return value[method].apply(value, args);
+    });
+  },
+
+  max: function(iterator) {
+    var result;
+    this.each(function(value, index) {
+      value = (iterator || Prototype.K)(value, index);
+      if (value &gt;= (result || value))
+        result = value;
+    });
+    return result;
+  },
+
+  min: function(iterator) {
+    var result;
+    this.each(function(value, index) {
+      value = (iterator || Prototype.K)(value, index);
+      if (value &lt;= (result || value))
+        result = value;
+    });
+    return result;
+  },
+
+  partition: function(iterator) {
+    var trues = [], falses = [];
+    this.each(function(value, index) {
+      ((iterator || Prototype.K)(value, index) ?
+        trues : falses).push(value);
+    });
+    return [trues, falses];
+  },
+
+  pluck: function(property) {
+    var results = [];
+    this.each(function(value, index) {
+      results.push(value[property]);
+    });
+    return results;
+  },
+
+  reject: function(iterator) {
+    var results = [];
+    this.each(function(value, index) {
+      if (!iterator(value, index))
+        results.push(value);
+    });
+    return results;
+  },
+
+  sortBy: function(iterator) {
+    return this.collect(function(value, index) {
+      return {value: value, criteria: iterator(value, index)};
+    }).sort(function(left, right) {
+      var a = left.criteria, b = right.criteria;
+      return a &lt; b ? -1 : a &gt; b ? 1 : 0;
+    }).pluck('value');
+  },
+
+  toArray: function() {
+    return this.collect(Prototype.K);
+  },
+
+  zip: function() {
+    var iterator = Prototype.K, args = $A(arguments);
+    if (typeof args.last() == 'function')
+      iterator = args.pop();
+
+    var collections = [this].concat(args).map($A);
+    return this.map(function(value, index) {
+      iterator(value = collections.pluck(index));
+      return value;
+    });
+  },
+
+  inspect: function() {
+    return '#&lt;Enumerable:' + this.toArray().inspect() + '&gt;';
+  }
+}
+
+Object.extend(Enumerable, {
+  map:     Enumerable.collect,
+  find:    Enumerable.detect,
+  select:  Enumerable.findAll,
+  member:  Enumerable.include,
+  entries: Enumerable.toArray
+});
+var $A = Array.from = function(iterable) {
+  if (!iterable) return [];
+  if (iterable.toArray) {
+    return iterable.toArray();
+  } else {
+    var results = [];
+    for (var i = 0; i &lt; iterable.length; i++)
+      results.push(iterable[i]);
+    return results;
+  }
+}
+
+Object.extend(Array.prototype, Enumerable);
+
+Array.prototype._reverse = Array.prototype.reverse;
+
+Object.extend(Array.prototype, {
+  _each: function(iterator) {
+    for (var i = 0; i &lt; this.length; i++)
+      iterator(this[i]);
+  },
+
+  clear: function() {
+    this.length = 0;
+    return this;
+  },
+
+  first: function() {
+    return this[0];
+  },
+
+  last: function() {
+    return this[this.length - 1];
+  },
+
+  compact: function() {
+    return this.select(function(value) {
+      return value != undefined || value != null;
+    });
+  },
+
+  flatten: function() {
+    return this.inject([], function(array, value) {
+      return array.concat(value.constructor == Array ?
+        value.flatten() : [value]);
+    });
+  },
+
+  without: function() {
+    var values = $A(arguments);
+    return this.select(function(value) {
+      return !values.include(value);
+    });
+  },
+
+  indexOf: function(object) {
+    for (var i = 0; i &lt; this.length; i++)
+      if (this[i] == object) return i;
+    return -1;
+  },
+
+  reverse: function(inline) {
+    return (inline !== false ? this : this.toArray())._reverse();
+  },
+
+  shift: function() {
+    var result = this[0];
+    for (var i = 0; i &lt; this.length - 1; i++)
+      this[i] = this[i + 1];
+    this.length--;
+    return result;
+  },
+
+  inspect: function() {
+    return '[' + this.map(Object.inspect).join(', ') + ']';
+  }
+});
+var Hash = {
+  _each: function(iterator) {
+    for (key in this) {
+      var value = this[key];
+      if (typeof value == 'function') continue;
+
+      var pair = [key, value];
+      pair.key = key;
+      pair.value = value;
+      iterator(pair);
+    }
+  },
+
+  keys: function() {
+    return this.pluck('key');
+  },
+
+  values: function() {
+    return this.pluck('value');
+  },
+
+  merge: function(hash) {
+    return $H(hash).inject($H(this), function(mergedHash, pair) {
+      mergedHash[pair.key] = pair.value;
+      return mergedHash;
+    });
+  },
+
+  toQueryString: function() {
+    return this.map(function(pair) {
+      return pair.map(encodeURIComponent).join('=');
+    }).join('&amp;');
+  },
+
+  inspect: function() {
+    return '#&lt;Hash:{' + this.map(function(pair) {
+      return pair.map(Object.inspect).join(': ');
+    }).join(', ') + '}&gt;';
+  }
+}
+
+function $H(object) {
+  var hash = Object.extend({}, object || {});
+  Object.extend(hash, Enumerable);
+  Object.extend(hash, Hash);
+  return hash;
+}
+ObjectRange = Class.create();
+Object.extend(ObjectRange.prototype, Enumerable);
+Object.extend(ObjectRange.prototype, {
+  initialize: function(start, end, exclusive) {
+    this.start = start;
+    this.end = end;
+    this.exclusive = exclusive;
+  },
+
+  _each: function(iterator) {
+    var value = this.start;
+    do {
+      iterator(value);
+      value = value.succ();
+    } while (this.include(value));
+  },
+
+  include: function(value) {
+    if (value &lt; this.start)
+      return false;
+    if (this.exclusive)
+      return value &lt; this.end;
+    return value &lt;= this.end;
+  }
+});
+
+var $R = function(start, end, exclusive) {
+  return new ObjectRange(start, end, exclusive);
+}
+
+var Ajax = {
+  getTransport: function() {
+    return Try.these(
+      function() {return new ActiveXObject('Msxml2.XMLHTTP')},
+      function() {return new ActiveXObject('Microsoft.XMLHTTP')},
+      function() {return new XMLHttpRequest()}
+    ) || false;
+  },
+
+  activeRequestCount: 0
+}
+
+Ajax.Responders = {
+  responders: [],
+
+  _each: function(iterator) {
+    this.responders._each(iterator);
+  },
+
+  register: function(responderToAdd) {
+    if (!this.include(responderToAdd))
+      this.responders.push(responderToAdd);
+  },
+
+  unregister: function(responderToRemove) {
+    this.responders = this.responders.without(responderToRemove);
+  },
+
+  dispatch: function(callback, request, transport, json) {
+    this.each(function(responder) {
+      if (responder[callback] &amp;&amp; typeof responder[callback] == 'function') {
+        try {
+          responder[callback].apply(responder, [request, transport, json]);
+        } catch (e) {}
+      }
+    });
+  }
+};
+
+Object.extend(Ajax.Responders, Enumerable);
+
+Ajax.Responders.register({
+  onCreate: function() {
+    Ajax.activeRequestCount++;
+  },
+
+  onComplete: function() {
+    Ajax.activeRequestCount--;
+  }
+});
+
+Ajax.Base = function() {};
+Ajax.Base.prototype = {
+  setOptions: function(options) {
+    this.options = {
+      method:       'post',
+      asynchronous: true,
+      parameters:   ''
+    }
+    Object.extend(this.options, options || {});
+  },
+
+  responseIsSuccess: function() {
+    return this.transport.status == undefined
+        || this.transport.status == 0
+        || (this.transport.status &gt;= 200 &amp;&amp; this.transport.status &lt; 300);
+  },
+
+  responseIsFailure: function() {
+    return !this.responseIsSuccess();
+  }
+}
+
+Ajax.Request = Class.create();
+Ajax.Request.Events =
+  ['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete'];
+
+Ajax.Request.prototype = Object.extend(new Ajax.Base(), {
+  initialize: function(url, options) {
+    this.transport = Ajax.getTransport();
+    this.setOptions(options);
+    this.request(url);
+  },
+
+  request: function(url) {
+    var parameters = this.options.parameters || '';
+    if (parameters.length &gt; 0) parameters += '&amp;_=';
+
+    try {
+      this.url = url;
+      if (this.options.method == 'get' &amp;&amp; parameters.length &gt; 0)
+        this.url += (this.url.match(/\?/) ? '&amp;' : '?') + parameters;
+
+      Ajax.Responders.dispatch('onCreate', this, this.transport);
+
+      this.transport.open(this.options.method, this.url,
+        this.options.asynchronous);
+
+      if (this.options.asynchronous) {
+        this.transport.onreadystatechange = this.onStateChange.bind(this);
+        setTimeout((function() {this.respondToReadyState(1)}).bind(this), 10);
+      }
+
+      this.setRequestHeaders();
+
+      var body = this.options.postBody ? this.options.postBody : parameters;
+      this.transport.send(this.options.method == 'post' ? body : null);
+
+    } catch (e) {
+      this.dispatchException(e);
+    }
+  },
+
+  setRequestHeaders: function() {
+    var requestHeaders =
+      ['X-Requested-With', 'XMLHttpRequest',
+       'X-Prototype-Version', Prototype.Version];
+
+    if (this.options.method == 'post') {
+      requestHeaders.push('Content-type',
+        'application/x-www-form-urlencoded');
+
+      /* Force &quot;Connection: close&quot; for Mozilla browsers to work around
+       * a bug where XMLHttpReqeuest sends an incorrect Content-length
+       * header. See Mozilla Bugzilla #246651.
+       */
+      if (this.transport.overrideMimeType)
+        requestHeaders.push('Connection', 'close');
+    }
+
+    if (this.options.requestHeaders)
+      requestHeaders.push.apply(requestHeaders, this.options.requestHeaders);
+
+    for (var i = 0; i &lt; requestHeaders.length; i += 2)
+      this.transport.setRequestHeader(requestHeaders[i], requestHeaders[i+1]);
+  },
+
+  onStateChange: function() {
+    var readyState = this.transport.readyState;
+    if (readyState != 1)
+      this.respondToReadyState(this.transport.readyState);
+  },
+
+  header: function(name) {
+    try {
+      return this.transport.getResponseHeader(name);
+    } catch (e) {}
+  },
+
+  evalJSON: function() {
+    try {
+      return eval(this.header('X-JSON'));
+    } catch (e) {}
+  },
+
+  evalResponse: function() {
+    try {
+      return eval(this.transport.responseText);
+    } catch (e) {
+      this.dispatchException(e);
+    }
+  },
+
+  respondToReadyState: function(readyState) {
+    var event = Ajax.Request.Events[readyState];
+    var transport = this.transport, json = this.evalJSON();
+
+    if (event == 'Complete') {
+      try {
+        (this.options['on' + this.transport.status]
+         || this.options['on' + (this.responseIsSuccess() ? 'Success' : 'Failure')]
+         || Prototype.emptyFunction)(transport, json);
+      } catch (e) {
+        this.dispatchException(e);
+      }
+
+      if ((this.header('Content-type') || '').match(/^text\/javascript/i))
+        this.evalResponse();
+    }
+
+    try {
+      (this.options['on' + event] || Prototype.emptyFunction)(transport, json);
+      Ajax.Responders.dispatch('on' + event, this, transport, json);
+    } catch (e) {
+      this.dispatchException(e);
+    }
+
+    /* Avoid memory leak in MSIE: clean up the oncomplete event handler */
+    if (event == 'Complete')
+      this.transport.onreadystatechange = Prototype.emptyFunction;
+  },
+
+  dispatchException: function(exception) {
+    (this.options.onException || Prototype.emptyFunction)(this, exception);
+    Ajax.Responders.dispatch('onException', this, exception);
+  }
+});
+
+Ajax.Updater = Class.create();
+
+Object.extend(Object.extend(Ajax.Updater.prototype, Ajax.Request.prototype), {
+  initialize: function(container, url, options) {
+    this.containers = {
+      success: container.success ? $(container.success) : $(container),
+      failure: container.failure ? $(container.failure) :
+        (container.success ? null : $(container))
+    }
+
+    this.transport = Ajax.getTransport();
+    this.setOptions(options);
+
+    var onComplete = this.options.onComplete || Prototype.emptyFunction;
+    this.options.onComplete = (function(transport, object) {
+      this.updateContent();
+      onComplete(transport, object);
+    }).bind(this);
+
+    this.request(url);
+  },
+
+  updateContent: function() {
+    var receiver = this.responseIsSuccess() ?
+      this.containers.success : this.containers.failure;
+    var response = this.transport.responseText;
+
+    if (!this.options.evalScripts)
+      response = response.stripScripts();
+
+    if (receiver) {
+      if (this.options.insertion) {
+        new this.options.insertion(receiver, response);
+      } else {
+        Element.update(receiver, response);
+      }
+    }
+
+    if (this.responseIsSuccess()) {
+      if (this.onComplete)
+        setTimeout(this.onComplete.bind(this), 10);
+    }
+  }
+});
+
+Ajax.PeriodicalUpdater = Class.create();
+Ajax.PeriodicalUpdater.prototype = Object.extend(new Ajax.Base(), {
+  initialize: function(container, url, options) {
+    this.setOptions(options);
+    this.onComplete = this.options.onComplete;
+
+    this.frequency = (this.options.frequency || 2);
+    this.decay = (this.options.decay || 1);
+
+    this.updater = {};
+    this.container = container;
+    this.url = url;
+
+    this.start();
+  },
+
+  start: function() {
+    this.options.onComplete = this.updateComplete.bind(this);
+    this.onTimerEvent();
+  },
+
+  stop: function() {
+    this.updater.onComplete = undefined;
+    clearTimeout(this.timer);
+    (this.onComplete || Prototype.emptyFunction).apply(this, arguments);
+  },
+
+  updateComplete: function(request) {
+    if (this.options.decay) {
+      this.decay = (request.responseText == this.lastText ?
+        this.decay * this.options.decay : 1);
+
+      this.lastText = request.responseText;
+    }
+    this.timer = setTimeout(this.onTimerEvent.bind(this),
+      this.decay * this.frequency * 1000);
+  },
+
+  onTimerEvent: function() {
+    this.updater = new Ajax.Updater(this.container, this.url, this.options);
+  }
+});
+document.getElementsByClassName = function(className, parentElement) {
+  var children = ($(parentElement) || document.body).getElementsByTagName('*');
+  return $A(children).inject([], function(elements, child) {
+    if (child.className.match(new RegExp(&quot;(^|\\s)&quot; + className + &quot;(\\s|$)&quot;)))
+      elements.push(child);
+    return elements;
+  });
+}
+
+/*--------------------------------------------------------------------------*/
+
+if (!window.Element) {
+  var Element = new Object();
+}
+
+Object.extend(Element, {
+  visible: function(element) {
+    return $(element).style.display != 'none';
+  },
+
+  toggle: function() {
+    for (var i = 0; i &lt; arguments.length; i++) {
+      var element = $(arguments[i]);
+      Element[Element.visible(element) ? 'hide' : 'show'](element);
+    }
+  },
+
+  hide: function() {
+    for (var i = 0; i &lt; arguments.length; i++) {
+      var element = $(arguments[i]);
+      element.style.display = 'none';
+    }
+  },
+
+  show: function() {
+    for (var i = 0; i &lt; arguments.length; i++) {
+      var element = $(arguments[i]);
+      element.style.display = '';
+    }
+  },
+
+  remove: function(element) {
+    element = $(element);
+    element.parentNode.removeChild(element);
+  },
+
+  update: function(element, html) {
+    $(element).innerHTML = html.stripScripts();
+    setTimeout(function() {html.evalScripts()}, 10);
+  },
+
+  getHeight: function(element) {
+    element = $(element);
+    return element.offsetHeight;
+  },
+
+  classNames: function(element) {
+    return new Element.ClassNames(element);
+  },
+
+  hasClassName: function(element, className) {
+    if (!(element = $(element))) return;
+    return Element.classNames(element).include(className);
+  },
+
+  addClassName: function(element, className) {
+    if (!(element = $(element))) return;
+    return Element.classNames(element).add(className);
+  },
+
+  removeClassName: function(element, className) {
+    if (!(element = $(element))) return;
+    return Element.classNames(element).remove(className);
+  },
+
+  // removes whitespace-only text node children
+  cleanWhitespace: function(element) {
+    element = $(element);
+    for (var i = 0; i &lt; element.childNodes.length; i++) {
+      var node = element.childNodes[i];
+      if (node.nodeType == 3 &amp;&amp; !/\S/.test(node.nodeValue))
+        Element.remove(node);
+    }
+  },
+
+  empty: function(element) {
+    return $(element).innerHTML.match(/^\s*$/);
+  },
+
+  scrollTo: function(element) {
+    element = $(element);
+    var x = element.x ? element.x : element.offsetLeft,
+        y = element.y ? element.y : element.offsetTop;
+    window.scrollTo(x, y);
+  },
+
+  getStyle: function(element, style) {
+    element = $(element);
+    var value = element.style[style.camelize()];
+    if (!value) {
+      if (document.defaultView &amp;&amp; document.defaultView.getComputedStyle) {
+        var css = document.defaultView.getComputedStyle(element, null);
+        value = css ? css.getPropertyValue(style) : null;
+      } else if (element.currentStyle) {
+        value = element.currentStyle[style.camelize()];
+      }
+    }
+
+    if (window.opera &amp;&amp; ['left', 'top', 'right', 'bottom'].include(style))
+      if (Element.getStyle(element, 'position') == 'static') value = 'auto';
+
+    return value == 'auto' ? null : value;
+  },
+
+  setStyle: function(element, style) {
+    element = $(element);
+    for (name in style)
+      element.style[name.camelize()] = style[name];
+  },
+
+  getDimensions: function(element) {
+    element = $(element);
+    if (Element.getStyle(element, 'display') != 'none')
+      return {width: element.offsetWidth, height: element.offsetHeight};
+
+    // All *Width and *Height properties give 0 on elements with display none,
+    // so enable the element temporarily
+    var els = element.style;
+    var originalVisibility = els.visibility;
+    var originalPosition = els.position;
+    els.visibility = 'hidden';
+    els.position = 'absolute';
+    els.display = '';
+    var originalWidth = element.clientWidth;
+    var originalHeight = element.clientHeight;
+    els.display = 'none';
+    els.position = originalPosition;
+    els.visibility = originalVisibility;
+    return {width: originalWidth, height: originalHeight};
+  },
+
+  makePositioned: function(element) {
+    element = $(element);
+    var pos = Element.getStyle(element, 'position');
+    if (pos == 'static' || !pos) {
+      element._madePositioned = true;
+      element.style.position = 'relative';
+      // Opera returns the offset relative to the positioning context, when an
+      // element is position relative but top and left have not been defined
+      if (window.opera) {
+        element.style.top = 0;
+        element.style.left = 0;
+      }
+    }
+  },
+
+  undoPositioned: function(element) {
+    element = $(element);
+    if (element._madePositioned) {
+      element._madePositioned = undefined;
+      element.style.position =
+        element.style.top =
+        element.style.left =
+        element.style.bottom =
+        element.style.right = '';
+    }
+  },
+
+  makeClipping: function(element) {
+    element = $(element);
+    if (element._overflow) return;
+    element._overflow = element.style.overflow;
+    if ((Element.getStyle(element, 'overflow') || 'visible') != 'hidden')
+      element.style.overflow = 'hidden';
+  },
+
+  undoClipping: function(element) {
+    element = $(element);
+    if (element._overflow) return;
+    element.style.overflow = element._overflow;
+    element._overflow = undefined;
+  }
+});
+
+var Toggle = new Object();
+Toggle.display = Element.toggle;
+
+/*--------------------------------------------------------------------------*/
+
+Abstract.Insertion = function(adjacency) {
+  this.adjacency = adjacency;
+}
+
+Abstract.Insertion.prototype = {
+  initialize: function(element, content) {
+    this.element = $(element);
+    this.content = content.stripScripts();
+
+    if (this.adjacency &amp;&amp; this.element.insertAdjacentHTML) {
+      try {
+        this.element.insertAdjacentHTML(this.adjacency, this.content);
+      } catch (e) {
+        if (this.element.tagName.toLowerCase() == 'tbody') {
+          this.insertContent(this.contentFromAnonymousTable());
+        } else {
+          throw e;
+        }
+      }
+    } else {
+      this.range = this.element.ownerDocument.createRange();
+      if (this.initializeRange) this.initializeRange();
+      this.insertContent([this.range.createContextualFragment(this.content)]);
+    }
+
+    setTimeout(function() {content.evalScripts()}, 10);
+  },
+
+  contentFromAnonymousTable: function() {
+    var div = document.createElement('div');
+    div.innerHTML = '&lt;table&gt;&lt;tbody&gt;' + this.content + '&lt;/tbody&gt;&lt;/table&gt;';
+    return $A(div.childNodes[0].childNodes[0].childNodes);
+  }
+}
+
+var Insertion = new Object();
+
+Insertion.Before = Class.create();
+Insertion.Before.prototype = Object.extend(new Abstract.Insertion('beforeBegin'), {
+  initializeRange: function() {
+    this.range.setStartBefore(this.element);
+  },
+
+  insertContent: function(fragments) {
+    fragments.each((function(fragment) {
+      this.element.parentNode.insertBefore(fragment, this.element);
+    }).bind(this));
+  }
+});
+
+Insertion.Top = Class.create();
+Insertion.Top.prototype = Object.extend(new Abstract.Insertion('afterBegin'), {
+  initializeRange: function() {
+    this.range.selectNodeContents(this.element);
+    this.range.collapse(true);
+  },
+
+  insertContent: function(fragments) {
+    fragments.reverse(false).each((function(fragment) {
+      this.element.insertBefore(fragment, this.element.firstChild);
+    }).bind(this));
+  }
+});
+
+Insertion.Bottom = Class.create();
+Insertion.Bottom.prototype = Object.extend(new Abstract.Insertion('beforeEnd'), {
+  initializeRange: function() {
+    this.range.selectNodeContents(this.element);
+    this.range.collapse(this.element);
+  },
+
+  insertContent: function(fragments) {
+    fragments.each((function(fragment) {
+      this.element.appendChild(fragment);
+    }).bind(this));
+  }
+});
+
+Insertion.After = Class.create();
+Insertion.After.prototype = Object.extend(new Abstract.Insertion('afterEnd'), {
+  initializeRange: function() {
+    this.range.setStartAfter(this.element);
+  },
+
+  insertContent: function(fragments) {
+    fragments.each((function(fragment) {
+      this.element.parentNode.insertBefore(fragment,
+        this.element.nextSibling);
+    }).bind(this));
+  }
+});
+
+/*--------------------------------------------------------------------------*/
+
+Element.ClassNames = Class.create();
+Element.ClassNames.prototype = {
+  initialize: function(element) {
+    this.element = $(element);
+  },
+
+  _each: function(iterator) {
+    this.element.className.split(/\s+/).select(function(name) {
+      return name.length &gt; 0;
+    })._each(iterator);
+  },
+
+  set: function(className) {
+    this.element.className = className;
+  },
+
+  add: function(classNameToAdd) {
+    if (this.include(classNameToAdd)) return;
+    this.set(this.toArray().concat(classNameToAdd).join(' '));
+  },
+
+  remove: function(classNameToRemove) {
+    if (!this.include(classNameToRemove)) return;
+    this.set(this.select(function(className) {
+      return className != classNameToRemove;
+    }).join(' '));
+  },
+
+  toString: function() {
+    return this.toArray().join(' ');
+  }
+}
+
+Object.extend(Element.ClassNames.prototype, Enumerable);
+var Field = {
+  clear: function() {
+    for (var i = 0; i &lt; arguments.length; i++)
+      $(arguments[i]).value = '';
+  },
+
+  focus: function(element) {
+    $(element).focus();
+  },
+
+  present: function() {
+    for (var i = 0; i &lt; arguments.length; i++)
+      if ($(arguments[i]).value == '') return false;
+    return true;
+  },
+
+  select: function(element) {
+    $(element).select();
+  },
+
+  activate: function(element) {
+    element = $(element);
+    element.focus();
+    if (element.select)
+      element.select();
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+var Form = {
+  serialize: function(form) {
+    var elements = Form.getElements($(form));
+    var queryComponents = new Array();
+
+    for (var i = 0; i &lt; elements.length; i++) {
+      var queryComponent = Form.Element.serialize(elements[i]);
+      if (queryComponent)
+        queryComponents.push(queryComponent);
+    }
+
+    return queryComponents.join('&amp;');
+  },
+
+  getElements: function(form) {
+    form = $(form);
+    var elements = new Array();
+
+    for (tagName in Form.Element.Serializers) {
+      var tagElements = form.getElementsByTagName(tagName);
+      for (var j = 0; j &lt; tagElements.length; j++)
+        elements.push(tagElements[j]);
+    }
+    return elements;
+  },
+
+  getInputs: function(form, typeName, name) {
+    form = $(form);
+    var inputs = form.getElementsByTagName('input');
+
+    if (!typeName &amp;&amp; !name)
+      return inputs;
+
+    var matchingInputs = new Array();
+    for (var i = 0; i &lt; inputs.length; i++) {
+      var input = inputs[i];
+      if ((typeName &amp;&amp; input.type != typeName) ||
+          (name &amp;&amp; input.name != name))
+        continue;
+      matchingInputs.push(input);
+    }
+
+    return matchingInputs;
+  },
+
+  disable: function(form) {
+    var elements = Form.getElements(form);
+    for (var i = 0; i &lt; elements.length; i++) {
+      var element = elements[i];
+      element.blur();
+      element.disabled = 'true';
+    }
+  },
+
+  enable: function(form) {
+    var elements = Form.getElements(form);
+    for (var i = 0; i &lt; elements.length; i++) {
+      var element = elements[i];
+      element.disabled = '';
+    }
+  },
+
+  findFirstElement: function(form) {
+    return Form.getElements(form).find(function(element) {
+      return element.type != 'hidden' &amp;&amp; !element.disabled &amp;&amp;
+        ['input', 'select', 'textarea'].include(element.tagName.toLowerCase());
+    });
+  },
+
+  focusFirstElement: function(form) {
+    Field.activate(Form.findFirstElement(form));
+  },
+
+  reset: function(form) {
+    $(form).reset();
+  }
+}
+
+Form.Element = {
+  serialize: function(element) {
+    element = $(element);
+    var method = element.tagName.toLowerCase();
+    var parameter = Form.Element.Serializers[method](element);
+
+    if (parameter) {
+      var key = encodeURIComponent(parameter[0]);
+      if (key.length == 0) return;
+
+      if (parameter[1].constructor != Array)
+        parameter[1] = [parameter[1]];
+
+      return parameter[1].map(function(value) {
+        return key + '=' + encodeURIComponent(value);
+      }).join('&amp;');
+    }
+  },
+
+  getValue: function(element) {
+    element = $(element);
+    var method = element.tagName.toLowerCase();
+    var parameter = Form.Element.Serializers[method](element);
+
+    if (parameter)
+      return parameter[1];
+  }
+}
+
+Form.Element.Serializers = {
+  input: function(element) {
+    switch (element.type.toLowerCase()) {
+      case 'submit':
+      case 'hidden':
+      case 'password':
+      case 'text':
+        return Form.Element.Serializers.textarea(element);
+      case 'checkbox':
+      case 'radio':
+        return Form.Element.Serializers.inputSelector(element);
+    }
+    return false;
+  },
+
+  inputSelector: function(element) {
+    if (element.checked)
+      return [element.name, element.value];
+  },
+
+  textarea: function(element) {
+    return [element.name, element.value];
+  },
+
+  select: function(element) {
+    return Form.Element.Serializers[element.type == 'select-one' ?
+      'selectOne' : 'selectMany'](element);
+  },
+
+  selectOne: function(element) {
+    var value = '', opt, index = element.selectedIndex;
+    if (index &gt;= 0) {
+      opt = element.options[index];
+      value = opt.value;
+      if (!value &amp;&amp; !('value' in opt))
+        value = opt.text;
+    }
+    return [element.name, value];
+  },
+
+  selectMany: function(element) {
+    var value = new Array();
+    for (var i = 0; i &lt; element.length; i++) {
+      var opt = element.options[i];
+      if (opt.selected) {
+        var optValue = opt.value;
+        if (!optValue &amp;&amp; !('value' in opt))
+          optValue = opt.text;
+        value.push(optValue);
+      }
+    }
+    return [element.name, value];
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+var $F = Form.Element.getValue;
+
+/*--------------------------------------------------------------------------*/
+
+Abstract.TimedObserver = function() {}
+Abstract.TimedObserver.prototype = {
+  initialize: function(element, frequency, callback) {
+    this.frequency = frequency;
+    this.element   = $(element);
+    this.callback  = callback;
+
+    this.lastValue = this.getValue();
+    this.registerCallback();
+  },
+
+  registerCallback: function() {
+    setInterval(this.onTimerEvent.bind(this), this.frequency * 1000);
+  },
+
+  onTimerEvent: function() {
+    var value = this.getValue();
+    if (this.lastValue != value) {
+      this.callback(this.element, value);
+      this.lastValue = value;
+    }
+  }
+}
+
+Form.Element.Observer = Class.create();
+Form.Element.Observer.prototype = Object.extend(new Abstract.TimedObserver(), {
+  getValue: function() {
+    return Form.Element.getValue(this.element);
+  }
+});
+
+Form.Observer = Class.create();
+Form.Observer.prototype = Object.extend(new Abstract.TimedObserver(), {
+  getValue: function() {
+    return Form.serialize(this.element);
+  }
+});
+
+/*--------------------------------------------------------------------------*/
+
+Abstract.EventObserver = function() {}
+Abstract.EventObserver.prototype = {
+  initialize: function(element, callback) {
+    this.element  = $(element);
+    this.callback = callback;
+
+    this.lastValue = this.getValue();
+    if (this.element.tagName.toLowerCase() == 'form')
+      this.registerFormCallbacks();
+    else
+      this.registerCallback(this.element);
+  },
+
+  onElementEvent: function() {
+    var value = this.getValue();
+    if (this.lastValue != value) {
+      this.callback(this.element, value);
+      this.lastValue = value;
+    }
+  },
+
+  registerFormCallbacks: function() {
+    var elements = Form.getElements(this.element);
+    for (var i = 0; i &lt; elements.length; i++)
+      this.registerCallback(elements[i]);
+  },
+
+  registerCallback: function(element) {
+    if (element.type) {
+      switch (element.type.toLowerCase()) {
+        case 'checkbox':
+        case 'radio':
+          Event.observe(element, 'click', this.onElementEvent.bind(this));
+          break;
+        case 'password':
+        case 'text':
+        case 'textarea':
+        case 'select-one':
+        case 'select-multiple':
+          Event.observe(element, 'change', this.onElementEvent.bind(this));
+          break;
+      }
+    }
+  }
+}
+
+Form.Element.EventObserver = Class.create();
+Form.Element.EventObserver.prototype = Object.extend(new Abstract.EventObserver(), {
+  getValue: function() {
+    return Form.Element.getValue(this.element);
+  }
+});
+
+Form.EventObserver = Class.create();
+Form.EventObserver.prototype = Object.extend(new Abstract.EventObserver(), {
+  getValue: function() {
+    return Form.serialize(this.element);
+  }
+});
+if (!window.Event) {
+  var Event = new Object();
+}
+
+Object.extend(Event, {
+  KEY_BACKSPACE: 8,
+  KEY_TAB:       9,
+  KEY_RETURN:   13,
+  KEY_ESC:      27,
+  KEY_LEFT:     37,
+  KEY_UP:       38,
+  KEY_RIGHT:    39,
+  KEY_DOWN:     40,
+  KEY_DELETE:   46,
+
+  element: function(event) {
+    return event.target || event.srcElement;
+  },
+
+  isLeftClick: function(event) {
+    return (((event.which) &amp;&amp; (event.which == 1)) ||
+            ((event.button) &amp;&amp; (event.button == 1)));
+  },
+
+  pointerX: function(event) {
+    return event.pageX || (event.clientX +
+      (document.documentElement.scrollLeft || document.body.scrollLeft));
+  },
+
+  pointerY: function(event) {
+    return event.pageY || (event.clientY +
+      (document.documentElement.scrollTop || document.body.scrollTop));
+  },
+
+  stop: function(event) {
+    if (event.preventDefault) {
+      event.preventDefault();
+      event.stopPropagation();
+    } else {
+      event.returnValue = false;
+      event.cancelBubble = true;
+    }
+  },
+
+  // find the first node with the given tagName, starting from the
+  // node the event was triggered on; traverses the DOM upwards
+  findElement: function(event, tagName) {
+    var element = Event.element(event);
+    while (element.parentNode &amp;&amp; (!element.tagName ||
+        (element.tagName.toUpperCase() != tagName.toUpperCase())))
+      element = element.parentNode;
+    return element;
+  },
+
+  observers: false,
+
+  _observeAndCache: function(element, name, observer, useCapture) {
+    if (!this.observers) this.observers = [];
+    if (element.addEventListener) {
+      this.observers.push([element, name, observer, useCapture]);
+      element.addEventListener(name, observer, useCapture);
+    } else if (element.attachEvent) {
+      this.observers.push([element, name, observer, useCapture]);
+      element.attachEvent('on' + name, observer);
+    }
+  },
+
+  unloadCache: function() {
+    if (!Event.observers) return;
+    for (var i = 0; i &lt; Event.observers.length; i++) {
+      Event.stopObserving.apply(this, Event.observers[i]);
+      Event.observers[i][0] = null;
+    }
+    Event.observers = false;
+  },
+
+  observe: function(element, name, observer, useCapture) {
+    var element = $(element);
+    useCapture = useCapture || false;
+
+    if (name == 'keypress' &amp;&amp;
+        (navigator.appVersion.match(/Konqueror|Safari|KHTML/)
+        || element.attachEvent))
+      name = 'keydown';
+
+    this._observeAndCache(element, name, observer, useCapture);
+  },
+
+  stopObserving: function(element, name, observer, useCapture) {
+    var element = $(element);
+    useCapture = useCapture || false;
+
+    if (name == 'keypress' &amp;&amp;
+        (navigator.appVersion.match(/Konqueror|Safari|KHTML/)
+        || element.detachEvent))
+      name = 'keydown';
+
+    if (element.removeEventListener) {
+      element.removeEventListener(name, observer, useCapture);
+    } else if (element.detachEvent) {
+      element.detachEvent('on' + name, observer);
+    }
+  }
+});
+
+/* prevent memory leaks in IE */
+Event.observe(window, 'unload', Event.unloadCache, false);
+var Position = {
+  // set to true if needed, warning: firefox performance problems
+  // NOT neeeded for page scrolling, only if draggable contained in
+  // scrollable elements
+  includeScrollOffsets: false,
+
+  // must be called before calling withinIncludingScrolloffset, every time the
+  // page is scrolled
+  prepare: function() {
+    this.deltaX =  window.pageXOffset
+                || document.documentElement.scrollLeft
+                || document.body.scrollLeft
+                || 0;
+    this.deltaY =  window.pageYOffset
+                || document.documentElement.scrollTop
+                || document.body.scrollTop
+                || 0;
+  },
+
+  realOffset: function(element) {
+    var valueT = 0, valueL = 0;
+    do {
+      valueT += element.scrollTop  || 0;
+      valueL += element.scrollLeft || 0;
+      element = element.parentNode;
+    } while (element);
+    return [valueL, valueT];
+  },
+
+  cumulativeOffset: function(element) {
+    var valueT = 0, valueL = 0;
+    do {
+      valueT += element.offsetTop  || 0;
+      valueL += element.offsetLeft || 0;
+      element = element.offsetParent;
+    } while (element);
+    return [valueL, valueT];
+  },
+
+  positionedOffset: function(element) {
+    var valueT = 0, valueL = 0;
+    do {
+      valueT += element.offsetTop  || 0;
+      valueL += element.offsetLeft || 0;
+      element = element.offsetParent;
+      if (element) {
+        p = Element.getStyle(element, 'position');
+        if (p == 'relative' || p == 'absolute') break;
+      }
+    } while (element);
+    return [valueL, valueT];
+  },
+
+  offsetParent: function(element) {
+    if (element.offsetParent) return element.offsetParent;
+    if (element == document.body) return element;
+
+    while ((element = element.parentNode) &amp;&amp; element != document.body)
+      if (Element.getStyle(element, 'position') != 'static')
+        return element;
+
+    return document.body;
+  },
+
+  // caches x/y coordinate pair to use with overlap
+  within: function(element, x, y) {
+    if (this.includeScrollOffsets)
+      return this.withinIncludingScrolloffsets(element, x, y);
+    this.xcomp = x;
+    this.ycomp = y;
+    this.offset = this.cumulativeOffset(element);
+
+    return (y &gt;= this.offset[1] &amp;&amp;
+            y &lt;  this.offset[1] + element.offsetHeight &amp;&amp;
+            x &gt;= this.offset[0] &amp;&amp;
+            x &lt;  this.offset[0] + element.offsetWidth);
+  },
+
+  withinIncludingScrolloffsets: function(element, x, y) {
+    var offsetcache = this.realOffset(element);
+
+    this.xcomp = x + offsetcache[0] - this.deltaX;
+    this.ycomp = y + offsetcache[1] - this.deltaY;
+    this.offset = this.cumulativeOffset(element);
+
+    return (this.ycomp &gt;= this.offset[1] &amp;&amp;
+            this.ycomp &lt;  this.offset[1] + element.offsetHeight &amp;&amp;
+            this.xcomp &gt;= this.offset[0] &amp;&amp;
+            this.xcomp &lt;  this.offset[0] + element.offsetWidth);
+  },
+
+  // within must be called directly before
+  overlap: function(mode, element) {
+    if (!mode) return 0;
+    if (mode == 'vertical')
+      return ((this.offset[1] + element.offsetHeight) - this.ycomp) /
+        element.offsetHeight;
+    if (mode == 'horizontal')
+      return ((this.offset[0] + element.offsetWidth) - this.xcomp) /
+        element.offsetWidth;
+  },
+
+  clone: function(source, target) {
+    source = $(source);
+    target = $(target);
+    target.style.position = 'absolute';
+    var offsets = this.cumulativeOffset(source);
+    target.style.top    = offsets[1] + 'px';
+    target.style.left   = offsets[0] + 'px';
+    target.style.width  = source.offsetWidth + 'px';
+    target.style.height = source.offsetHeight + 'px';
+  },
+
+  page: function(forElement) {
+    var valueT = 0, valueL = 0;
+
+    var element = forElement;
+    do {
+      valueT += element.offsetTop  || 0;
+      valueL += element.offsetLeft || 0;
+
+      // Safari fix
+      if (element.offsetParent==document.body)
+        if (Element.getStyle(element,'position')=='absolute') break;
+
+    } while (element = element.offsetParent);
+
+    element = forElement;
+    do {
+      valueT -= element.scrollTop  || 0;
+      valueL -= element.scrollLeft || 0;
+    } while (element = element.parentNode);
+
+    return [valueL, valueT];
+  },
+
+  clone: function(source, target) {
+    var options = Object.extend({
+      setLeft:    true,
+      setTop:     true,
+      setWidth:   true,
+      setHeight:  true,
+      offsetTop:  0,
+      offsetLeft: 0
+    }, arguments[2] || {})
+
+    // find page position of source
+    source = $(source);
+    var p = Position.page(source);
+
+    // find coordinate system to use
+    target = $(target);
+    var delta = [0, 0];
+    var parent = null;
+    // delta [0,0] will do fine with position: fixed elements,
+    // position:absolute needs offsetParent deltas
+    if (Element.getStyle(target,'position') == 'absolute') {
+      parent = Position.offsetParent(target);
+      delta = Position.page(parent);
+    }
+
+    // correct by body offsets (fixes Safari)
+    if (parent == document.body) {
+      delta[0] -= document.body.offsetLeft;
+      delta[1] -= document.body.offsetTop;
+    }
+
+    // set position
+    if(options.setLeft)   target.style.left  = (p[0] - delta[0] + options.offsetLeft) + 'px';
+    if(options.setTop)    target.style.top   = (p[1] - delta[1] + options.offsetTop) + 'px';
+    if(options.setWidth)  target.style.width = source.offsetWidth + 'px';
+    if(options.setHeight) target.style.height = source.offsetHeight + 'px';
+  },
+
+  absolutize: function(element) {
+    element = $(element);
+    if (element.style.position == 'absolute') return;
+    Position.prepare();
+
+    var offsets = Position.positionedOffset(element);
+    var top     = offsets[1];
+    var left    = offsets[0];
+    var width   = element.clientWidth;
+    var height  = element.clientHeight;
+
+    element._originalLeft   = left - parseFloat(element.style.left  || 0);
+    element._originalTop    = top  - parseFloat(element.style.top || 0);
+    element._originalWidth  = element.style.width;
+    element._originalHeight = element.style.height;
+
+    element.style.position = 'absolute';
+    element.style.top    = top + 'px';;
+    element.style.left   = left + 'px';;
+    element.style.width  = width + 'px';;
+    element.style.height = height + 'px';;
+  },
+
+  relativize: function(element) {
+    element = $(element);
+    if (element.style.position == 'relative') return;
+    Position.prepare();
+
+    element.style.position = 'relative';
+    var top  = parseFloat(element.style.top  || 0) - (element._originalTop || 0);
+    var left = parseFloat(element.style.left || 0) - (element._originalLeft || 0);
+
+    element.style.top    = top + 'px';
+    element.style.left   = left + 'px';
+    element.style.height = element._originalHeight;
+    element.style.width  = element._originalWidth;
+  }
+}
+
+// Safari returns margins on body which is incorrect if the child is absolutely
+// positioned.  For performance reasons, redefine Position.cumulativeOffset for
+// KHTML/WebKit only.
+if (/Konqueror|Safari|KHTML/.test(navigator.userAgent)) {
+  Position.cumulativeOffset = function(element) {
+    var valueT = 0, valueL = 0;
+    do {
+      valueT += element.offsetTop  || 0;
+      valueL += element.offsetLeft || 0;
+      if (element.offsetParent == document.body)
+        if (Element.getStyle(element, 'position') == 'absolute') break;
+
+      element = element.offsetParent;
+    } while (element);
+
+    return [valueL, valueT];
+  }
+}
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/scriptaculous.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/scriptaculous.js	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/scriptaculous.js	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,45 @@
+// Copyright (c) 2005 Thomas Fuchs (<A HREF="http://script.aculo.us,">http://script.aculo.us,</A> <A HREF="http://mir.aculo.us">http://mir.aculo.us</A>)
+// 
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// &quot;Software&quot;), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+//
+// THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+var Scriptaculous = {
+  Version: '1.5.1',
+  require: function(libraryName) {
+    // inserting via DOM fails in Safari 2.0, so brute force approach
+    document.write('&lt;script type=&quot;text/javascript&quot; src=&quot;'+libraryName+'&quot;&gt;&lt;/script&gt;');
+  },
+  load: function() {
+    if((typeof Prototype=='undefined') ||
+      parseFloat(Prototype.Version.split(&quot;.&quot;)[0] + &quot;.&quot; +
+                 Prototype.Version.split(&quot;.&quot;)[1]) &lt; 1.4)
+      throw(&quot;script.aculo.us requires the Prototype JavaScript framework &gt;= 1.4.0&quot;);
+    
+    $A(document.getElementsByTagName(&quot;script&quot;)).findAll( function(s) {
+      return (s.src &amp;&amp; s.src.match(/scriptaculous\.js(\?.*)?$/))
+    }).each( function(s) {
+      var path = s.src.replace(/scriptaculous\.js(\?.*)?$/,'');
+      var includes = s.src.match(/\?.*load=([a-z,]*)/);
+      (includes ? includes[1] : 'builder,effects,dragdrop,controls,slider').split(',').each(
+       function(include) { Scriptaculous.require(path+include+'.js') });
+    });
+  }
+}
+
+Scriptaculous.load();
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/lightbox.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/lightbox.css	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/lightbox.css	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,102 @@
+#lightbox{
+	position: absolute;
+	top: 40px;
+	left: 0;
+	width: 100%;
+	z-index: 100;
+	text-align: center;
+	line-height: 0;
+	}
+
+#lightbox a img{ border: none; }
+
+#outerImageContainer{
+	position: relative;
+	background-color: #fff;
+	width: 250px;
+	height: 250px;
+	margin: 0 auto;
+	}
+
+#imageContainer{
+	padding: 10px;
+	}
+
+#loading{
+	position: absolute;
+	top: 40%;
+	left: 0%;
+	height: 25%;
+	width: 100%;
+	text-align: center;
+	line-height: 0;
+	}
+#hoverNav{
+	position: absolute;
+	top: 0;
+	left: 0;
+	height: 100%;
+	width: 100%;
+	z-index: 10;
+	}
+#imageContainer&gt;#hoverNav{ left: 0;}
+#hoverNav a{ outline: none;}
+
+#prevLink, #nextLink{
+	width: 49%;
+	height: 100%;
+	background: transparent url(skins/default_with_lightbox/images/blank.gif) no-repeat; /* Trick IE into showing hover */
+	display: block;
+	}
+
+#prevLink { left: 0; float: left;}
+#nextLink { right: 0; float: right;}
+#prevLink:hover, #prevLink:visited:hover { background: url(skins/default_with_lightbox/images/prevlabel.gif) left 15% no-repeat; }
+#nextLink:hover, #nextLink:visited:hover { background: url(skins/default_with_lightbox/images/nextlabel.gif) right 15% no-repeat; }
+
+#imageDataContainer{
+	font: 10px Verdana, Helvetica, sans-serif;
+	background-color: #fff;
+	margin: 0 auto;
+	line-height: 1.4em;
+	}
+
+#imageData{
+	padding:0 10px;
+	}
+#imageData #imageDetails{ width: 70%; float: left; text-align: left; }	
+#imageData #caption{ font-weight: bold;	}
+#imageData #numberDisplay{ display: block; clear: left; padding-bottom: 1.0em;	}			
+#imageData #bottomNavClose{ width: 66px; float: right;  padding-bottom: 0.7em;	}	
+		
+#overlay{
+	position: absolute;
+	top: 0;
+	left: 0;
+	z-index: 90;
+	width: 100%;
+	height: 500px;
+	background-color: #000;
+	filter:alpha(opacity=60);
+	-moz-opacity: 0.6;
+	opacity: 0.6;
+	}
+	
+
+.clearfix:after {
+	content: &quot;.&quot;; 
+	display: block; 
+	height: 0; 
+	clear: both; 
+	visibility: hidden;
+	}
+
+* html&gt;body .clearfix {
+	display: inline-block; 
+	width: 100%;
+	}
+
+* html .clearfix {
+	height: 1%;
+	}	
+	
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/page.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/page.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/page.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,34 @@
+{include file=&quot;__std_header.tpl&quot;}
+
+&lt;div id=&quot;content&quot; class=&quot;narrowcolumn&quot;&gt;
+
+    {if $page}
+
+        &lt;h2 class=&quot;pagetitle&quot;&gt;{$page.title}&lt;/h2&gt;
+
+        &lt;p&gt;
+            &lt;div class=&quot;entry&quot;&gt;{$page.body|bbcode}&lt;/div&gt;
+        &lt;/p&gt;
+
+        &lt;p&gt;
+            &lt;small&gt;
+                {t w=&quot;created_on&quot;} {$page.created|date} {t w=&quot;by&quot;} &lt;a href=&quot;mailto:{$page.user_email|escape:'hexentity'}&quot;&gt;{$page.user_name}&lt;/a&gt;
+                {if $page.modified}
+                    &lt;br/&gt;
+                    {t w=&quot;last_modified_on&quot;} {$page.modified|date}.
+                {/if}
+            &lt;/small&gt;
+        &lt;/p&gt;
+
+    {else}
+
+        &lt;h2 class=&quot;center&quot;&gt;{t w=&quot;not_found&quot;}&lt;/h2&gt;
+        &lt;p class=&quot;center&quot;&gt;{t w=&quot;sorry_not_found&quot;}&lt;/p&gt;
+
+    {/if}
+
+&lt;/div&gt;
+
+{include file=&quot;__std_sidebar.tpl&quot;}
+
+{include file=&quot;__std_footer.tpl&quot;}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000445.html">[ydf-devel] r1962 - YDFramework2.0/trunk/examples/weblog/include
</A></li>
	<LI>Next message: <A HREF="000447.html">[ydf-devel] r1964 - in YDFramework2.0/trunk/examples/weblog/tiny_mce/themes: . simple simple/css simple/images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#446">[ date ]</a>
              <a href="thread.html#446">[ thread ]</a>
              <a href="subject.html#446">[ subject ]</a>
              <a href="author.html#446">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/ydframework-devel">More information about the YDFramework-devel
mailing list</a><br>
</body></html>
