From ximian at berlios.de  Sat Apr  1 16:23:47 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sat, 1 Apr 2006 16:23:47 +0200
Subject: [ydf-devel] r1822 - in YDFramework2.0/trunk/YDFramework2: YDClasses addons/YDMysqlDump
Message-ID: <200604011423.k31ENl4w003158@sheep.berlios.de>

Author: ximian
Date: 2006-04-01 16:23:25 +0200 (Sat, 01 Apr 2006)
New Revision: 1822

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php
   YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump/YDMysqlDump.php
Log:
YDDatabase::getNamedInstance can accept YDDatabaseDrivers as argument. This make life a little easier.

YDMysqlDump ported for new YDDatabase::getNamedInstance. Just one line instead of 3.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php	2006-03-30 16:00:48 UTC (rev 1821)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php	2006-04-01 14:23:25 UTC (rev 1822)
@@ -468,9 +468,9 @@
 
         /**
          *  This function will return a YDDatabaseDriver instance for the named database instance. If no instance is
-         *  given, the one with the name "default" will be used.
+         *  given, the one with the name "default" will be used. You can use database instance objects too.
          *
-         *  @param $name    (optional) The name of the database instance. Defaults to "default".
+         *  @param $name    (optional) The name or object of the database instance. Defaults to "default".
          *
          *  @returns    An instance of YDDatabaseDriver
          *
@@ -478,6 +478,9 @@
          */
         function getNamedInstance( $name='default' ) {
 
+            // Check if name is a YDDatabaseDriver object
+            if ( is_object( $name ) ) return $name;
+
             // Check if the global array exists
             YDDatabase::_initNamedInstances();
 

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump/YDMysqlDump.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump/YDMysqlDump.php	2006-03-30 16:00:48 UTC (rev 1821)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump/YDMysqlDump.php	2006-04-01 14:23:25 UTC (rev 1822)
@@ -34,9 +34,9 @@
         /**
          *  Class constructor for the YDMysqlDump class.
          *
-         *  @param $dbinstance      Database instance
+         *  @param $dbinstance      Database instance name or object.
          */
-        function YDMysqlDump( $dbinstance = null ) {
+        function YDMysqlDump( $dbinstance = 'default' ) {
 
             // Initializes YDBase
             $this->YDAddOnModule();
@@ -48,9 +48,7 @@
             $this->_description = 'This class defines a mysql backup/restore system.';
 
             // database instance
-            if ( is_null( $dbinstance ) )        $this->dbinstance = YDDatabase::getNamedInstance();
-            else if ( is_string( $dbinstance ) ) $this->dbinstance = YDDatabase::getNamedInstance( $dbinstance );
-            else                                 $this->dbinstance = $dbinstance;
+			$this->dbinstance = YDDatabase::getNamedInstance( $dbinstance );
 
             // predefined filepath for store content (used if we don't want a string)
             $this->filepath = YD_DIR_TEMP . '/backup.sql';



From ximian at berlios.de  Sat Apr  1 16:31:45 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sat, 1 Apr 2006 16:31:45 +0200
Subject: [ydf-devel] r1823 - YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump
Message-ID: <200604011431.k31EVjoM003809@sheep.berlios.de>

Author: ximian
Date: 2006-04-01 16:31:29 +0200 (Sat, 01 Apr 2006)
New Revision: 1823

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump/YDMysqlDump.php
Log:
by default YDMysqlDump should not export any data. We should use all methods to define what we want (in older versions we could get strange results, but not now).

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump/YDMysqlDump.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump/YDMysqlDump.php	2006-04-01 14:23:25 UTC (rev 1822)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump/YDMysqlDump.php	2006-04-01 14:31:29 UTC (rev 1823)
@@ -43,7 +43,7 @@
 
             // Setup the module
             $this->_author = 'Francisco Azevedo';
-            $this->_version = '1.2';
+            $this->_version = '1.3';
             $this->_copyright = '(c) 2005 Francisco Azevedo, francisco at fusemail.com';
             $this->_description = 'This class defines a mysql backup/restore system.';
 
@@ -54,10 +54,10 @@
             $this->filepath = YD_DIR_TEMP . '/backup.sql';
 
             // defaults
-            $this->useComments = false;
-            $this->useDrops = true;
-            $this->useStructure = true;
-            $this->useData = true;
+            $this->useComments  = false;
+            $this->useDrops     = false;
+            $this->useStructure = false;
+            $this->useData      = false;
 
             // custom tables
             $this->tables_to_use = null;



From ximian at berlios.de  Sun Apr  2 19:15:01 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sun, 2 Apr 2006 19:15:01 +0200
Subject: [ydf-devel] r1824 - YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements
Message-ID: <200604021715.k32HF1wY029557@sheep.berlios.de>

Author: ximian
Date: 2006-04-02 19:14:16 +0200 (Sun, 02 Apr 2006)
New Revision: 1824

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Span.php
Log:
Now it's possible to use to span label. This can be usefull eg, when changing an element from a text to a span.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Span.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Span.php	2006-04-01 14:31:29 UTC (rev 1823)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Span.php	2006-04-02 17:14:16 UTC (rev 1824)
@@ -53,7 +53,6 @@
 
             // Set the value correctly
             $this->setValue( $label );
-            $this->_label = '';
             $this->_placeLabel = 'none';
 
             // Indicate if filters need to be applied



From pclaerhout at berlios.de  Mon Apr  3 10:04:32 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Mon, 3 Apr 2006 10:04:32 +0200
Subject: [ydf-devel] r1825 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604030804.k3384WZs004371@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-03 10:04:25 +0200 (Mon, 03 Apr 2006)
New Revision: 1825

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php
Log:
Added a function to get the list of supported drivers.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php	2006-04-02 17:14:16 UTC (rev 1824)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php	2006-04-03 08:04:25 UTC (rev 1825)
@@ -537,19 +537,8 @@
 
             } else {
 
-                // Register the standard drivers
-                $regDrivers[ strtolower( 'mysql' ) ] = array(
-                    'class' => 'YDDatabaseDriver_mysql', 'file' => ''
-                );
-                $regDrivers[ strtolower( 'oracle' ) ] = array(
-                    'class' => 'YDDatabaseDriver_oracle', 'file' => 'YDDatabaseDriver_oracle.php'
-                );
-                $regDrivers[ strtolower( 'postgres' ) ] = array(
-                    'class' => 'YDDatabaseDriver_postgres', 'file' => 'YDDatabaseDriver_postgres.php'
-                );
-                $regDrivers[ strtolower( 'sqlite' ) ] = array(
-                    'class' => 'YDDatabaseDriver_sqlite', 'file' => 'YDDatabaseDriver_sqlite.php'
-                );
+                // Get the standard driver list
+                $regDrivers = YDDatabase::getSupportedDrivers();
 
                 // Check if the driver exists
                 if ( ! array_key_exists( strtolower( $driver ), $regDrivers ) ) {
@@ -563,7 +552,7 @@
                 if ( is_file( $regDrivers[ strtolower( $driver ) ]['file'] ) ) {
                     include_once( $regDrivers[ strtolower( $driver ) ]['file'] );
                 } else {
-                    include_once( YD_DIR_HOME_CLS . '/YDDatabaseDrivers/' . $regDrivers[ strtolower( $driver ) ]['file'] );
+                    include_once( dirname( __FILE__ ) . '/YDDatabaseDrivers/' . $regDrivers[ strtolower( $driver ) ]['file'] );
                 }
             }
 
@@ -578,6 +567,35 @@
 
         }
 
+        /**
+         *  This function returns the list of supported drivers.
+         *
+         *  @returns    An array with the list of supported drivers.
+         */
+        function getSupportedDrivers() {
+
+            // The list of known drivers
+            $regDrivers = array();
+
+            // Register the standard drivers
+            $regDrivers[ strtolower( 'mysql' ) ] = array(
+                'class' => 'YDDatabaseDriver_mysql', 'file' => ''
+            );
+            $regDrivers[ strtolower( 'oracle' ) ] = array(
+                'class' => 'YDDatabaseDriver_oracle', 'file' => 'YDDatabaseDriver_oracle.php'
+            );
+            $regDrivers[ strtolower( 'postgres' ) ] = array(
+                'class' => 'YDDatabaseDriver_postgres', 'file' => 'YDDatabaseDriver_postgres.php'
+            );
+            $regDrivers[ strtolower( 'sqlite' ) ] = array(
+                'class' => 'YDDatabaseDriver_sqlite', 'file' => 'YDDatabaseDriver_sqlite.php'
+            );
+
+            // Return the list
+            return $regDrivers;
+
+        }
+
     }
 
     /**



From ximian at berlios.de  Tue Apr  4 17:36:50 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Tue, 4 Apr 2006 17:36:50 +0200
Subject: [ydf-devel] r1826 - YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements
Message-ID: <200604041536.k34Faov1025796@sheep.berlios.de>

Author: ximian
Date: 2006-04-04 17:36:39 +0200 (Tue, 04 Apr 2006)
New Revision: 1826

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Select.php
Log:
form element select will from now convert an an option to a simple array with that option

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Select.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Select.php	2006-04-03 08:04:25 UTC (rev 1825)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Select.php	2006-04-04 15:36:39 UTC (rev 1826)
@@ -54,6 +54,8 @@
             // Indicate if filters need to be applied
             $this->_applyFilters = false;
 
+            // If options is just an element we should add create an array with it
+            if( !is_array( $options ) ) $this->_options = array( $options );
         }
 
         /**



From ximian at berlios.de  Tue Apr  4 17:42:21 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Tue, 4 Apr 2006 17:42:21 +0200
Subject: [ydf-devel] r1827 - in YDFramework2.0/trunk/YDFramework2/addons/YDAjax: . js
Message-ID: <200604041542.k34FgLc1026280@sheep.berlios.de>

Author: ximian
Date: 2006-04-04 17:41:53 +0200 (Tue, 04 Apr 2006)
New Revision: 1827

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php
   YDFramework2.0/trunk/YDFramework2/addons/YDAjax/js/xajax.js
   YDFramework2.0/trunk/YDFramework2/addons/YDAjax/xajax.inc.php
   YDFramework2.0/trunk/YDFramework2/addons/YDAjax/xajaxResponse.inc.php
Log:
new YDAjax release (beta).. 
- Lots of updates
- addEvent on responses (for runtime events) is better now
- use new internal xajax version (that has dozens of fixes and has it's own show/hide waiting message and a new debug)

even more fun now!!

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php	2006-04-04 15:36:39 UTC (rev 1826)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php	2006-04-04 15:41:53 UTC (rev 1827)
@@ -68,7 +68,7 @@
 
             // Setup the module
             $this->_author = 'Francisco Azevedo';
-            $this->_version = '2.7b';
+            $this->_version = '2.8b';
             $this->_copyright = '(c) Copyright 2002-2006 Francisco Azevedo';
             $this->_description = 'This class makes ajax easy for YDF developers';
 
@@ -212,7 +212,7 @@
 			// check custom options
 			if ( !isset( $options['style.backgroundColor'] ) ) $options['style.backgroundColor'] = '#cccccc';
 			if ( !isset( $options['style.top'] ) )             $options['style.top']             = '40%';
-			if ( !isset( $options['style.left'] ) )            $options['style.left']            = '44%';
+			if ( !isset( $options['style.left'] ) )            $options['style.left']            = '42%';
 			if ( !isset( $options['style.border'] ) )          $options['style.border']          = '1px solid #110000';
 
 			// static values
@@ -240,10 +240,6 @@
 			foreach( $options as $name => $value )
 				$this->waitingMessageCode .= $this->wtID . "." . $name . " = '" . $value . "';";
 
-			// create js function headers to show/hide waiting message div
-			$this->wtFunctionShow = $this->wtID . "show()";
-			$this->wtFunctionHide = $this->wtID . "hide()";
-
 			// create show effect
 			if ( is_null( $effectShow ) )
 				$effectShow = new YDAjaxEffect( '', 'show', '', 0 );
@@ -253,22 +249,11 @@
 				$effectHide = new YDAjaxEffect( '', 'hide', '', 0 );
 
 			// create js functions to show/hide div
-			$this->waitingMessageCodeFunction  = "function " . $this->wtFunctionShow . "{" . $effectShow->getJSHead( $this->wtID . "id" ) . $effectShow->getJSBody( $this->wtID ."id" ) . "}\n";
-			$this->waitingMessageCodeFunction .= "function " . $this->wtFunctionHide . "{" . $effectHide->getJSHead( $this->wtID . "id" ) . $effectHide->getJSBody( $this->wtID ."id" ) . "}\n";
-
-			// add script to hide waiting message on response
-			$this->response->addScript( $this->wtFunctionHide . ";" );
+			$this->waitingMessageCodeFunction  = "xajax.loadingFunction     = function(){" . $effectShow->getJSHead( $this->wtID . "id" ) . $effectShow->getJSBody( $this->wtID ."id" ) . "}\n";
+			$this->waitingMessageCodeFunction .= "xajax.doneLoadingFunction = function(){" . $effectHide->getJSHead( $this->wtID . "id" ) . $effectHide->getJSBody( $this->wtID ."id" ) . "}\n";
 		}
 
 
-		// internal method to get the js show waiting message function declaration
-		function _getWMFunctionShow(){
-
-			if ( isset( $this->wtID ) ) return $this->wtFunctionShow . ";";
-			else                        return '';
-		}
-
-
 		// internal method to get a form of an element
 		function __getForm( $name ){
 
@@ -390,7 +375,7 @@
 			if ( !is_array( $options ) ) $options = array( $options );
 			
 			// get function name
-			$functionName = $this->_getWMFunctionShow() . $this->prefix . $serverFunctionName . '(' . $this->_computeFunctionArguments( $arguments, $options ) . ');';
+			$functionName = $this->prefix . $serverFunctionName . '(' . $this->_computeFunctionArguments( $arguments, $options ) . ');';
 
 			// process effects
 			if ( !is_null( $effects ) ){
@@ -820,7 +805,6 @@
 		function message( $message ){
 
 			$response = new YDAjaxResponse( YDConfig::get( 'YD_AJAX_ENCODING' ) );
-			$response->addScript( 'try{ waitingmessagehide() }catch(e){}' );
 			$response->addAlert( $message );
 
 			return $response;

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDAjax/js/xajax.js
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDAjax/js/xajax.js	2006-04-04 15:36:39 UTC (rev 1826)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDAjax/js/xajax.js	2006-04-04 15:41:53 UTC (rev 1827)
@@ -1 +1 @@
-function Xajax(){if(xajaxDebug)this.DebugMessage=function(text){alert("Xajax Debug:\n "+text)};this.workId='xajaxWork'+new Date().getTime();this.depth=0;this.getRequestObject=function(){if(xajaxDebug)this.DebugMessage("Initializing Request Object..");var req;try{req=new ActiveXObject("Msxml2.XMLHTTP");} catch(e){try{req=new ActiveXObject("Microsoft.XMLHTTP");} catch(e2){req=null;}} if(!req&&typeof XMLHttpRequest!="undefined")req=new XMLHttpRequest();if(xajaxDebug){if(!req)this.DebugMessage("Request Object Instantiation failed.");} return req;};this.$=function(sId){if(!sId){return null;} var returnObj=document.getElementById(sId);if(xajaxDebug&&!returnObj&&sId!=this.workId){this.DebugMessage("Element with the id \""+sId+"\" not found.");} return returnObj;}; this.include=function(sFileName){var objHead=document.getElementsByTagName('head');var objScript=document.createElement('script');objScript.type='text/javascript';objScript.src=sFileName;objHead[0].appendChild(objScript)!
 ;}; this.addHandler=function(sElementId,sEvent,sFunctionName){if(window.addEventListener){eval("this.$('"+sElementId+"').addEventListener('"+sEvent+"',"+sFunctionName+",false);");} else{eval("this.$('"+sElementId+"').attachEvent('on"+sEvent+"',"+sFunctionName+",false);");}}; this.removeHandler=function(sElementId,sEvent,sFunctionName){if(window.addEventListener){eval("this.$('"+sElementId+"').removeEventListener('"+sEvent+"',"+sFunctionName+",false);");} else{eval("this.$('"+sElementId+"').detachEvent('on"+sEvent+"',"+sFunctionName+",false);");}}; this.create=function(sParentId,sTag,sId){var objParent=this.$(sParentId);objElement=document.createElement(sTag);objElement.setAttribute('id',sId);objParent.appendChild(objElement);} ;this.insert=function(sBeforeId,sTag,sId){var objSibling=this.$(sBeforeId);objElement=document.createElement(sTag);objElement.setAttribute('id',sId);objSibling.parentNode.insertBefore(objElement,objSibling);} ;this.getInput=function(sType,sName,sId){v!
 ar Obj;if(sType=="radio"&&!window.addEventListener){Obj=docume!
 nt.creat
eElement('<input type="radio" id="'+sId+'" name="'+sName+'">');} else{Obj=document.createElement('input');Obj.setAttribute('type',sType);Obj.setAttribute('name',sName);Obj.setAttribute('id',sId);} return Obj;}; this.createInput=function(sParentId,sType,sName,sId){var objParent=this.$(sParentId);var objElement=this.getInput(sType,sName,sId);objParent.appendChild(objElement);}; this.insertInput=function(sBeforeId,sType,sName,sId){var objSibling=this.$(sBeforeId);var objElement=this.getInput(sType,sName,sId);objSibling.parentNode.insertBefore(objElement,objSibling);} ; this.remove=function(sId){objElement=this.$(sId);if(objElement.parentNode&&objElement.parentNode.removeChild){objElement.parentNode.removeChild(objElement);}} ;this.replace=function(sId,sAttribute,sSearch,sReplace){var bFunction=false;if(sAttribute=="innerHTML")sSearch=this.getBrowserHTML(sSearch);eval("var txt=document.getElementById('"+sId+"')."+sAttribute);if(typeof txt=="function"){txt=txt.toString();bFunctio!
 n=true;} if(txt.indexOf(sSearch)>-1){var newTxt='';while(txt.indexOf(sSearch)>-1){x=txt.indexOf(sSearch)+sSearch.length+1;newTxt+=txt.substr(0,x).replace(sSearch,sReplace);txt=txt.substr(x,txt.length-x);} newTxt+=txt;if(bFunction){eval("newTxt ="+newTxt);eval('this.$("'+sId+'").'+sAttribute+'=newTxt;');} else if(this.willChange(sId,sAttribute,newTxt)){eval('this.$("'+sId+'").'+sAttribute+'=newTxt;');}}}; this.getFormValues=function(frm){var objForm;var submitDisabledElements=false;if(arguments.length>1&&arguments[1]==true)submitDisabledElements=true;if(typeof(frm)=="string")objForm=this.$(frm);else objForm=frm;var sXml="<xjxquery><q>";if(objForm&&objForm.tagName=='FORM'){var formElements=objForm.elements;for(var i=0;i<formElements.length;i++){if(formElements[i].type&&(formElements[i].type=='radio'||formElements[i].type=='checkbox')&&formElements[i].checked==false)continue;if(formElements[i].disabled&&formElements[i].disabled==true&&submitDisabledElements==false)continue;var!
  name=formElements[i].name;if(name){if(sXml!='<xjxquery><q>')s!
 Xml+='&'
;if(formElements[i].type=='select-multiple'){for(var j=0;j<formElements[i].length;j++){if(formElements[i].options[j].selected==true)sXml+=name+"="+encodeURIComponent(formElements[i].options[j].value)+"&";}} else{sXml+=name+"="+encodeURIComponent(formElements[i].value);}}}} sXml+="<\/q><\/xjxquery>";return sXml;} ; this.objectToXML=function(obj){var sXml="<xjxobj>";for(i in obj){try{if(i=='constructor')continue;if(obj[i]&&typeof(obj[i])=='function')continue;var key=i;var value=obj[i];if(value&&typeof(value)=="object"&&(value.constructor==Array )&&this.depth<=50){this.depth++;value=this.objectToXML(value);this.depth--;} sXml+="<e><k>"+key+"<\/k><v>"+value+"<\/v><\/e>";} catch(e){if(xajaxDebug)this.DebugMessage(e);}} sXml+="<\/xjxobj>";return sXml;}; this.call=function(sFunction,aArgs,sRequestType){var i,r,postData;if(document.body&&xajaxWaitCursor)document.body.style.cursor='wait';if(xajaxStatusMessages==true)window.status='Sending Request...';if(xajaxDebug)this.DebugMessage("!
 Starting xajax...");if(sRequestType==null){var xajaxRequestType=xajaxDefinedPost;} else{var xajaxRequestType=sRequestType;} var uri=xajaxRequestUri;var value;switch(xajaxRequestType){case xajaxDefinedGet:{var uriGet=uri.indexOf("?")==-1?"?xajax="+encodeURIComponent(sFunction):"&xajax="+encodeURIComponent(sFunction);if(aArgs){for(i=0;i<aArgs.length;i++){value=aArgs[i];if(typeof(value)=="object")value=this.objectToXML(value);uriGet+="&xajaxargs[]="+encodeURIComponent(value);}} uriGet+="&xajaxr="+new Date().getTime();uri+=uriGet;postData=null;}break;case xajaxDefinedPost:{postData="xajax="+encodeURIComponent(sFunction);postData+="&xajaxr="+new Date().getTime();if(aArgs){for(i=0;i<aArgs.length;i++){value=aArgs[i];if(typeof(value)=="object")value=this.objectToXML(value);postData=postData+"&xajaxargs[]="+encodeURIComponent(value);}}}break;default:alert("Illegal request type: "+xajaxRequestType);return false;break;} r=this.getRequestObject();if(!r)return false;r.open(xajaxRequestT!
 ype==xajaxDefinedGet?"GET":"POST",uri,true);if(xajaxRequestTyp!
 e==xajax
DefinedPost){try{r.setRequestHeader("Method","POST "+uri+" HTTP/1.1");r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");} catch(e){alert("Your browser does not appear to  support asynchronous requests using POST.");return false;}} r.onreadystatechange=function(){if(r.readyState!=4)return;if(r.status==200){if(xajaxDebug&&r.responseText.length<1000)xajax.DebugMessage("Received:\n"+r.responseText);else if(xajaxDebug)xajax.DebugMessage("Received:\n"+r.responseText.substr(0,1000)+"...\n[long response]\n...<\/xajax>");if(r.responseXML)xajax.processResponse(r.responseXML);else{alert("Error: the XML response that was returned from the server is invalid.");document.body.style.cursor='default';if(xajaxStatusMessages==true)window.status='Invalid XML response error';}} delete r;};  if(xajaxDebug)this.DebugMessage("Calling "+sFunction+" uri="+uri+" (post:"+postData+")");r.send(postData);if(xajaxStatusMessages==true)window.status='Waiting for data...';delete r;return !
 true;}; this.getBrowserHTML=function(html){tmpXajax=this.$(this.workId);if(tmpXajax==null){tmpXajax=document.createElement("div");tmpXajax.setAttribute('id',this.workId);tmpXajax.style.display="none";tmpXajax.style.visibility="hidden";document.body.appendChild(tmpXajax);}  tmpXajax.innerHTML=html;var browserHTML=tmpXajax.innerHTML;tmpXajax.innerHTML='';return browserHTML;} ; this.willChange=function(element,attribute,newData){if(!document.body){return true;} var oldData;if(attribute=="innerHTML"){newData=this.getBrowserHTML(newData);} eval("oldData=document.getElementById('"+element+"')."+attribute);if(newData!=oldData)return true;return false;} ; this.processResponse=function(xml){if(xajaxStatusMessages==true)window.status='Processing...';var tmpXajax=null;xml=xml.documentElement;if(xml==null){alert("Error: the XML response that was returned from the server cannot be processed.");document.body.style.cursor='default';if(xajaxStatusMessages==true)window.status='XML response !
 processing error';return;} for(i=0;i<xml.childNodes.length;i++!
 ){if(xml
.childNodes[i].nodeName=="cmd"){var cmd;var id;var property;var data;var search;var type;var before;for(j=0;j<xml.childNodes[i].attributes.length;j++){if(xml.childNodes[i].attributes[j].name=="n"){cmd=xml.childNodes[i].attributes[j].value;} if(xml.childNodes[i].attributes[j].name=="t"){id=xml.childNodes[i].attributes[j].value;} if(xml.childNodes[i].attributes[j].name=="p"){property=xml.childNodes[i].attributes[j].value;} if(xml.childNodes[i].attributes[j].name=="c"){type=xml.childNodes[i].attributes[j].value;}} if(xml.childNodes[i].childNodes.length>1){for(j=0;j<xml.childNodes[i].childNodes.length;j++){if(xml.childNodes[i].childNodes[j].nodeName=="s"){if(xml.childNodes[i].childNodes[j].firstChild)search=xml.childNodes[i].childNodes[j].firstChild.nodeValue;} if(xml.childNodes[i].childNodes[j].nodeName=="r"){if(xml.childNodes[i].childNodes[j].firstChild)data=xml.childNodes[i].childNodes[j].firstChild.data;}}} else if(xml.childNodes[i].firstChild)data=xml.childNodes[i].firstChi!
 ld.nodeValue;else data="";var objElement=this.$(id);try{if(cmd=="al"){alert(data);} if(cmd=="js"){eval(data);} if(cmd=="in"){this.include(data);} if(cmd=="as"){if(this.willChange(id,property,data)){eval("objElement."+property+"=data;");}} if(cmd=="ap"){eval("objElement."+property+"+=data;");} if(cmd=="pp"){eval("objElement."+property+"=data+objElement."+property);} if(cmd=="rp"){this.replace(id,property,search,data)} if(cmd=="rm"){this.remove(id);} if(cmd=="ce"){this.create(id,data,property);} if(cmd=="ie"){this.insert(id,data,property);} if(cmd=="ci"){this.createInput(id,type,data,property);} if(cmd=="ii"){this.insertInput(id,type,data,property);} if(cmd=="ev"){eval("this.$('"+id+"')."+property+"= function(){"+data+";}");} if(cmd=="ah"){this.addHandler(id,property,data);} if(cmd=="rh"){this.removeHandler(id,property,data);}} catch(e){alert(e);} delete objElement;delete cmd;delete id;delete property;delete search;delete data;delete type;delete before;}} delete xml;document.!
 body.style.cursor='default';if(xajaxStatusMessages==true)windo!
 w.status
='Done';}} var xajax=new Xajax();
\ No newline at end of file
+function Xajax(){this.DebugMessage=function(text){try{if(this.debugWindow==undefined||this.debugWindow.closed==true){this.debugWindow=window.open('about:blank','xajax-debug','width=800,height=600,scrollbars=1,resizable,status');this.debugWindow.document.write('<html><head><title>Xajax debug output</title></head><body><h2>Xajax debug output</h2><div id="debugTag"></div></body></html>');}; text=text.replace(/&/g,"&amp;"); text=text.replace(/</g,"&lt;"); text=text.replace(/>/g,"&gt;"); debugTag=this.debugWindow.document.getElementById('debugTag');debugTag.innerHTML=('<b>'+(new Date()).toString()+'</b>: '+text+'<hr/>')+debugTag.innerHTML;}catch(e){alert("Xajax Debug:\n "+text);} };this.workId='xajaxWork'+new Date().getTime();this.depth=0;this.getRequestObject=function(){if(xajaxDebug)this.DebugMessage("Initializing Request Object..");var req=null;if(typeof XMLHttpRequest!="undefined") req=new XMLHttpRequest();if(!req&&typeof ActiveXObject!="undefined"){try{req=new ActiveXObject!
 ("Msxml2.XMLHTTP");} catch(e){try{req=new ActiveXObject("Microsoft.XMLHTTP");} catch(e2){try{req=new ActiveXObject("Msxml2.XMLHTTP.4.0");} catch(e3){req=null;} } } } if(!req&&window.createRequest) req=window.createRequest();if(!req)this.DebugMessage("Request Object Instantiation failed.");return req;}; this.$=function(sId){if(!sId){return null;} var returnObj=document.getElementById(sId);if(!returnObj&&document.all){returnObj=document.all[sId];} if(xajaxDebug&&!returnObj&&sId!=this.workId){this.DebugMessage("Element with the id \""+sId+"\" not found.");} return returnObj;}; this.include=function(sFileName){var objHead=document.getElementsByTagName('head');var objScript=document.createElement('script');objScript.type='text/javascript';objScript.src=sFileName;objHead[0].appendChild(objScript);}; this.stripOnPrefix=function(sEventName){sEventName=sEventName.toLowerCase();if(sEventName.indexOf('on')==0){sEventName=sEventName.replace(/on/,'');} return sEventName;}; this.addOnPre!
 fix=function(sEventName){sEventName=sEventName.toLowerCase();i!
 f(sEvent
Name.indexOf('on')!=0){sEventName='on'+sEventName;} return sEventName;}; this.addHandler=function(sElementId,sEvent,sFunctionName){if(window.addEventListener){sEvent=this.stripOnPrefix(sEvent);eval("this.$('"+sElementId+"').addEventListener('"+sEvent+"',"+sFunctionName+",false);");} else{sAltEvent=this.addOnPrefix(sEvent);eval("this.$('"+sElementId+"').attachEvent('"+sAltEvent+"',"+sFunctionName+",false);");} }; this.removeHandler=function(sElementId,sEvent,sFunctionName){if(window.addEventListener){sEvent=this.stripOnPrefix(sEvent);eval("this.$('"+sElementId+"').removeEventListener('"+sEvent+"',"+sFunctionName+",false);");} else{sAltEvent=this.addOnPrefix(sEvent);eval("this.$('"+sElementId+"').detachEvent('"+sAltEvent+"',"+sFunctionName+",false);");} }; this.create=function(sParentId,sTag,sId){var objParent=this.$(sParentId);objElement=document.createElement(sTag);objElement.setAttribute('id',sId);if(objParent) objParent.appendChild(objElement);}; this.insert=function(sBefo!
 reId,sTag,sId){var objSibling=this.$(sBeforeId);objElement=document.createElement(sTag);objElement.setAttribute('id',sId);objSibling.parentNode.insertBefore(objElement,objSibling);}; this.insertAfter=function(sAfterId,sTag,sId){var objSibling=this.$(sAfterId);objElement=document.createElement(sTag);objElement.setAttribute('id',sId);objSibling.parentNode.insertBefore(objElement,objSibling.nextSibling);}; this.getInput=function(sType,sName,sId){var Obj;if(sType=="radio"&&!window.addEventListener){Obj=document.createElement('<input type="radio" id="'+sId+'" name="'+sName+'">');} else{Obj=document.createElement('input');Obj.setAttribute('type',sType);Obj.setAttribute('name',sName);Obj.setAttribute('id',sId);} return Obj;}; this.createInput=function(sParentId,sType,sName,sId){var objParent=this.$(sParentId);var objElement=this.getInput(sType,sName,sId);if(objParent&&objElement) objParent.appendChild(objElement);}; this.insertInput=function(sBeforeId,sType,sName,sId){var objSibli!
 ng=this.$(sBeforeId);var objElement=this.getInput(sType,sName,!
 sId);if(
objElement&&objSibling&&objSibling.parentNode) objSibling.parentNode.insertBefore(objElement,objSibling);}; this.remove=function(sId){objElement=this.$(sId);if(objElement&&objElement.parentNode&&objElement.parentNode.removeChild){objElement.parentNode.removeChild(objElement);} }; this.replace=function(sId,sAttribute,sSearch,sReplace){var bFunction=false;if(sAttribute=="innerHTML") sSearch=this.getBrowserHTML(sSearch);eval("var txt=this.$('"+sId+"')."+sAttribute);if(typeof txt=="function"){txt=txt.toString();bFunction=true;} if(txt.indexOf(sSearch)>-1){var newTxt='';while(txt.indexOf(sSearch)>-1){x=txt.indexOf(sSearch)+sSearch.length+1;newTxt+=txt.substr(0,x).replace(sSearch,sReplace);txt=txt.substr(x,txt.length-x);} newTxt+=txt;if(bFunction){eval('this.$("'+sId+'").'+sAttribute+'=newTxt;');} else if(this.willChange(sId,sAttribute,newTxt)){eval('this.$("'+sId+'").'+sAttribute+'=newTxt;');} } }; this.getFormValues=function(frm){var objForm;var submitDisabledElements=false;if(a!
 rguments.length > 1&&arguments[1]==true) submitDisabledElements=true;var prefix="";if(arguments.length > 2) prefix=arguments[2];if(typeof(frm)=="string") objForm=this.$(frm);else objForm=frm;var sXml="<xjxquery><q>";if(objForm&&objForm.tagName=='FORM'){var formElements=objForm.elements;for(var i=0;i < formElements.length;i++){if(!formElements[i].name) continue;if(formElements[i].name.substring(0,prefix.length)!=prefix) continue;if(formElements[i].type&&(formElements[i].type=='radio'||formElements[i].type=='checkbox')&&formElements[i].checked==false) continue;if(formElements[i].disabled&&formElements[i].disabled==true&&submitDisabledElements==false) continue;var name=formElements[i].name;if(name){if(sXml!='<xjxquery><q>') sXml+='&';if(formElements[i].type=='select-multiple'){for(var j=0;j < formElements[i].length;j++){if(formElements[i].options[j].selected==true) sXml+=name+"="+encodeURIComponent(formElements[i].options[j].value)+"&";} } else{sXml+=name+"="+encodeURIComponen!
 t(formElements[i].value);} } } } sXml+="</q></xjxquery>";retur!
 n sXml;}
; this.objectToXML=function(obj){var sXml="<xjxobj>";for(i in obj){try{if(i=='constructor') continue;if(obj[i]&&typeof(obj[i])=='function') continue;var key=i;var value=obj[i];if(value&&typeof(value)=="object"&&this.depth <=50){this.depth++;value=this.objectToXML(value);this.depth--;} sXml+="<e><k>"+key+"</k><v>"+value+"</v></e>";}  catch(e){if(xajaxDebug)this.DebugMessage(e.name+": "+e.message);} } sXml+="</xjxobj>";return sXml;}; this.loadingFunction=function(){};this.doneLoadingFunction=function(){};var loadingTimeout;this.call=function(sFunction,aArgs,sRequestType){var i,r,postData;if(document.body&&xajaxWaitCursor) document.body.style.cursor='wait';if(xajaxStatusMessages==true)window.status='Sending Request...';clearTimeout(loadingTimeout);loadingTimeout=setTimeout("xajax.loadingFunction();",400);if(xajaxDebug)this.DebugMessage("Starting xajax...");if(sRequestType==null){var xajaxRequestType=xajaxDefinedPost;} else{var xajaxRequestType=sRequestType;} var uri=xajaxReques!
 tUri;var value;switch(xajaxRequestType){case xajaxDefinedGet:{var uriGet=uri.indexOf("?")==-1?"?xajax="+encodeURIComponent(sFunction):"&xajax="+encodeURIComponent(sFunction);if(aArgs){for(i=0;i<aArgs.length;i++){value=aArgs[i];if(typeof(value)=="object") value=this.objectToXML(value);uriGet+="&xajaxargs[]="+encodeURIComponent(value);} } uriGet+="&xajaxr="+new Date().getTime();uri+=uriGet;postData=null;}break;case xajaxDefinedPost:{postData="xajax="+encodeURIComponent(sFunction);postData+="&xajaxr="+new Date().getTime();if(aArgs){for(i=0;i <aArgs.length;i++){value=aArgs[i];if(typeof(value)=="object") value=this.objectToXML(value);postData=postData+"&xajaxargs[]="+encodeURIComponent(value);} } }break;default: alert("Illegal request type: "+xajaxRequestType);return false;break;} r=this.getRequestObject();if(!r)return false;r.open(xajaxRequestType==xajaxDefinedGet?"GET":"POST",uri,true);if(xajaxRequestType==xajaxDefinedPost){try{r.setRequestHeader("Method","POST "+uri+" HTTP/1.!
 1");r.setRequestHeader("Content-Type","application/x-www-form-!
 urlencod
ed");} catch(e){alert("Your browser does not appear to  support asynchronous requests using POST.");return false;} } r.onreadystatechange=function(){if(r.readyState!=4) return;if(r.status==200){if(xajaxDebug)xajax.DebugMessage("Received:\n"+r.responseText);if(r.responseXML&&r.responseXML.documentElement) xajax.processResponse(r.responseXML);else{var errorString="Error: the XML response that was returned from the server is invalid.";errorString+="\nReceived:\n"+r.responseText;trimmedResponseText=r.responseText.replace(/^\s+/g,"");trimmedResponseText=trimmedResponseText.replace(/\s+$/g,"");if(trimmedResponseText!=r.responseText) errorString+="\nYou have whitespace in your response.";alert(errorString);document.body.style.cursor='default';if(xajaxStatusMessages==true)window.status='Invalid XML response error';} } else{var errorString="Error: the server returned the following HTTP status: "+r.status;errorString+="\nReceived:\n"+r.responseText;alert(errorString);document.body.sty!
 le.cursor='default';if(xajaxStatusMessages==true)window.status='Invalid XML response error';} delete r;r=null;}; if(xajaxDebug)this.DebugMessage("Calling "+sFunction+" uri="+uri+" (post:"+postData+")");r.send(postData);if(xajaxStatusMessages==true)window.status='Waiting for data...';delete r;return true;}; this.getBrowserHTML=function(html){tmpXajax=this.$(this.workId);if(!tmpXajax){tmpXajax=document.createElement("div");tmpXajax.setAttribute('id',this.workId);tmpXajax.style.display="none";tmpXajax.style.visibility="hidden";document.body.appendChild(tmpXajax);} tmpXajax.innerHTML=html;var browserHTML=tmpXajax.innerHTML;tmpXajax.innerHTML='';return browserHTML;}; this.willChange=function(element,attribute,newData){if(!document.body){return true;}; if(attribute=="innerHTML"){newData=this.getBrowserHTML(newData);} elementObject=this.$(element);if(elementObject){var oldData;eval("oldData=this.$('"+element+"')."+attribute);if(newData!==oldData) return true;} return false;}; this!
 .viewSource=function(){return "<html>"+document.getElementsByT!
 agName("
HTML")[0].innerHTML+"</html>";}; this.processResponse=function(xml){clearTimeout(loadingTimeout);this.doneLoadingFunction();if(xajaxStatusMessages==true)window.status='Processing...';var tmpXajax=null;xml=xml.documentElement;if(xml==null) return;for(var i=0;i<xml.childNodes.length;i++){if(xml.childNodes[i].nodeName=="cmd"){var cmd;var id;var property;var data;var search;var type;var before;for(var j=0;j<xml.childNodes[i].attributes.length;j++){if(xml.childNodes[i].attributes[j].name=="n"){cmd=xml.childNodes[i].attributes[j].value;} else if(xml.childNodes[i].attributes[j].name=="t"){id=xml.childNodes[i].attributes[j].value;} else if(xml.childNodes[i].attributes[j].name=="p"){property=xml.childNodes[i].attributes[j].value;} else if(xml.childNodes[i].attributes[j].name=="c"){type=xml.childNodes[i].attributes[j].value;} } if(xml.childNodes[i].childNodes.length > 1&&xml.childNodes[i].firstChild.nodeName=="#cdata-section"){data="";for(var j=0;j<xml.childNodes[i].childNodes.length;!
 j++){data+=xml.childNodes[i].childNodes[j].data;} } else if(xml.childNodes[i].childNodes.length > 1){for(var j=0;j<xml.childNodes[i].childNodes.length;j++){if(xml.childNodes[i].childNodes[j].childNodes.length > 1&&xml.childNodes[i].childNodes[j].firstChild.nodeName=="#cdata-section"){var internalData="";for(var k=0;k<xml.childNodes[i].childNodes[j].childNodes.length;k++){internalData+=xml.childNodes[i].childNodes[j].childNodes[k].nodeValue;} }else{var internalData=xml.childNodes[i].childNodes[j].firstChild.nodeValue;} if(xml.childNodes[i].childNodes[j].nodeName=="s"){search=internalData;} if(xml.childNodes[i].childNodes[j].nodeName=="r"){data=internalData;} } } else if(xml.childNodes[i].firstChild) data=xml.childNodes[i].firstChild.nodeValue;else data="";var objElement=this.$(id);var cmdFullname;try{if(cmd=="al"){cmdFullname="addAlert";alert(data);} else if(cmd=="js"){cmdFullname="addScript/addRedirect";eval(data);} else if(cmd=="in"){cmdFullname="addIncludeScript";this.inc!
 lude(data);} else if(cmd=="as"){cmdFullname="addAssign/addClea!
 r";if(th
is.willChange(id,property,data)){eval("objElement."+property+"=data;");} } else if(cmd=="ap"){cmdFullname="addAppend";eval("objElement."+property+"+=data;");} else if(cmd=="pp"){cmdFullname="addPrepend";eval("objElement."+property+"=data+objElement."+property);} else if(cmd=="rp"){cmdFullname="addReplace";this.replace(id,property,search,data) } else if(cmd=="rm"){cmdFullname="addRemove";this.remove(id);} else if(cmd=="ce"){cmdFullname="addCreate";this.create(id,data,property);} else if(cmd=="ie"){cmdFullname="addInsert";this.insert(id,data,property);} else if(cmd=="ia"){cmdFullname="addInsertAfter";this.insertAfter(id,data,property);} else if(cmd=="ci"){cmdFullname="addCreateInput";this.createInput(id,type,data,property);} else if(cmd=="ii"){cmdFullname="addInsertInput";this.insertInput(id,type,data,property);} else if(cmd=="ev"){cmdFullname="addEvent";property=this.addOnPrefix(property);eval("this.$('"+id+"')."+property+"= function(){"+data+";}");} else if(cmd=="ah"){cmdFul!
 lname="addHandler";this.addHandler(id,property,data);} else if(cmd=="rh"){cmdFullname="addRemoveHandler";this.removeHandler(id,property,data);} } catch(e){if(xajaxDebug) alert("While trying to '"+cmdFullname+"' (command number "+i+"), the following error occured:\n" +e.name+": "+e.message+"\n" +(id&&!objElement?"Object with id='"+id+"' wasn't found.\n":""));} delete objElement;delete cmd;delete cmdFullname;delete id;delete property;delete search;delete data;delete type;delete before;delete internalData;delete j;delete k;} } delete xml;delete i;document.body.style.cursor='default';if(xajaxStatusMessages==true)window.status='Done';} } var xajax=new Xajax();xajaxLoaded=true;
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDAjax/xajax.inc.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDAjax/xajax.inc.php	2006-04-04 15:36:39 UTC (rev 1826)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDAjax/xajax.inc.php	2006-04-04 15:41:53 UTC (rev 1827)
@@ -1,861 +1,969 @@
-<?php
-///////////////////////////////////////////////////////////////////////////////
-// xajax.inc.php :: Main xajax class and setup file
-//
-// xajax version 0.2
-// copyright (c) 2005 by Jared White & J. Max Wilson
-// http://xajax.sourceforge.net
-//
-// xajax is an open source PHP class library for easily creating powerful
-// PHP-driven, web-based AJAX Applications. Using xajax, you can asynchronously
-// call PHP functions and update the content of your your webpage without
-// reloading the page.
-//
-// xajax is released under the terms of the LGPL license
-// http://www.gnu.org/copyleft/lesser.html#SEC3
-//
-// This library is free software; you can redistribute it and/or
-// modify it under the terms of the GNU Lesser General Public
-// License as published by the Free Software Foundation; either
-// version 2.1 of the License, or (at your option) any later version.
-//
-// This library is distributed in the hope that it will be useful,
-// but WITHOUT ANY WARRANTY; without even the implied warranty of
-// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-// Lesser General Public License for more details.
-// 
-// You should have received a copy of the GNU Lesser General Public
-// License along with this library; if not, write to the Free Software
-// Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
-///////////////////////////////////////////////////////////////////////////////
-
-// Define XAJAX_DEFAULT_CHAR_ENCODING that is used by both
-// the xajax and xajaxResponse classes
-if (!defined ('XAJAX_DEFAULT_CHAR_ENCODING'))
-{
-	define ('XAJAX_DEFAULT_CHAR_ENCODING', 'utf-8' );
-}
-
-require_once("xajaxResponse.inc.php");
-
-// Communication Method Defines
-if (!defined ('XAJAX_GET'))
-{
-	define ('XAJAX_GET', 0);
-}
-if (!defined ('XAJAX_POST'))
-{
-	define ('XAJAX_POST', 1);
-}
-
-// the xajax class generates the xajax javascript for your page including the 
-// javascript wrappers for the PHP functions that you want to call from your page.
-// It also handles processing and executing the command messages in the xml responses
-// sent back to your page from your PHP functions.
-class xajax extends YDAddOnModule
-{
-	var $aFunctions;				// Array of PHP functions that will be callable through javascript wrappers
-	var $aObjects;				// Array of object callbacks that will allow Javascript to call PHP methods (key=function name)
-	var $aFunctionRequestTypes;	// Array of RequestTypes to be used with each function (key=function name)
-	var $aFunctionIncludeFiles;	// Array of Include Files for any external functions (key=function name)
-	var $sCatchAllFunction;		// Name of the PHP function to call if no callable function was found
-	var $sPreFunction;			// Name of the PHP function to call before any other function
-	var $sRequestURI;			// The URI for making requests to the xajax object
-	var $bDebug;					// Show debug messages (true/false)
-	var $bExitAllowed;			// Allow xajax to exit after processing a request (true/false)
-	var $bErrorHandler;			// Use an special xajax error handler so the errors are sent to the browser properly
-	var $sLogFile;				// Specify if xajax should log errors (and more information in a future release)
-	var $sWrapperPrefix;			// The prefix to prepend to the javascript wraper function name
-	var $bStatusMessages;			// Show debug messages (true/false)
-	var $bWaitCursor;			// Use wait cursor in browser (true/false)
-	var $bCleanBuffer;			// Clean all output buffers before outputting response (true/false)
-	var $aObjArray;				// Array for parsing complex objects
-	var $iPos;					// Position in $aObjArray
-	var $sEncoding;				// The Character Encoding to use
-	
-	// Contructor
-	// $sRequestURI - defaults to the current page
-	// $sWrapperPrefix - defaults to "xajax_";
-	// $sEncoding - defaults to XAJAX_DEFAULT_CHAR_ENCODING defined above
-	// $bDebug Mode - defaults to false
-	// usage: $xajax = new xajax();
-	function xajax($sRequestURI="",$sWrapperPrefix="xajax_",$sEncoding=XAJAX_DEFAULT_CHAR_ENCODING,$bDebug=false)
-	{
-	        // Initialize the parent class
-            $this->YDAddOnModule();
-
-
-		$this->aFunctions = array();
-		$this->aObjects = array();
-		$this->aFunctionIncludeFiles = array();
-		$this->sRequestURI = $sRequestURI;
-		if ($this->sRequestURI == "")
-			$this->sRequestURI = $this->_detectURI();
-		$this->sWrapperPrefix = $sWrapperPrefix;
-		$this->setCharEncoding($sEncoding);
-		$this->bDebug = $bDebug;
-		$this->bWaitCursor = true;
-		$this->bExitAllowed = true;
-		$this->bErrorHandler = false;
-		$this->sLogFile = "";
-		$this->bCleanBuffer = true;
-	}
-		
-	// setRequestURI() sets the URI to which requests will be made
-	// usage: $xajax->setRequestURI("http://xajax.sourceforge.net");
-	function setRequestURI($sRequestURI)
-	{
-		$this->sRequestURI = $sRequestURI;
-	}
-	
-	// debugOn() enables debug messages for xajax
-	function debugOn()
-	{
-		$this->bDebug = true;
-	}
-	
-	// debugOff() disables debug messages for xajax (default behavior)
-	function debugOff()
-	{
-		$this->bDebug = false;
-	}
-	
-	// statusMessagesOn() enables messages in the statusbar for xajax
-	function statusMessagesOn()
-	{
-		$this->bStatusMessages = true;
-	}
-	
-	// statusMessagesOff() disables messages in the statusbar for xajax (default behavior)
-	function statusMessagesOff()
-	{
-		$this->bStatusMessages = false;
-	}
-	
-	// waitCursor() enables the wait cursor to be displayed in the browser (default behavior)
-	function waitCursorOn()
-	{
-		$this->bWaitCursor = true;
-	}
-	
-	// waitCursorOff() disables the wait cursor to be displayed in the browser
-	function waitCursorOff()
-	{
-		$this->bWaitCursor = false;
-	}	
-	
-	// exitAllowedOn() enables xajax to exit immediately after processing a request
-	// and sending the response back to the browser (default behavior)
-	function exitAllowedOn()
-	{
-		$this->bExitAllowed = true;
-	}
-	
-	// exitAllowedOff() disables xajax's default behavior of exiting immediately
-	// after processing a request and sending the response back to the browser
-	function exitAllowedOff()
-	{
-		$this->bExitAllowed = false;
-	}
-	
-	// errorHandlerOn() turns on xajax's error handling system so that PHP errors
-	// that occur during a request are trapped and pushed to the browser in the
-	// form of a Javascript alert
-	function errorHandlerOn()
-	{
-		$this->bErrorHandler = true;
-	}
-	// errorHandlerOff() turns off xajax's error handling system (default behavior)
-	function errorHandlerOff()
-	{
-		$this->bErrorHandler = false;
-	}
-	
-	// setLogFile() specifies a log file that will be written to by xajax during
-	// a request (used only by the error handling system at present). If you don't
-	// invoke this method, or you pass in "", then no log file will be written to.
-	// usage: $xajax->setLogFile("/xajax_logs/errors.log");
-	function setLogFile($sFilename)
-	{
-		$this->sLogFile = $sFilename;
-	}
-
-	// cleanBufferOn() causes xajax to clean out all output buffers before outputting
-	// a response (default behavior)
-	function cleanBufferOn()
-	{
-		$this->bCleanBuffer = true;
-	}
-	// cleanBufferOff() turns off xajax's output buffer cleaning
-	function cleanBufferOff()
-	{
-		$this->bCleanBuffer = false;
-	}
-	
-	// setWrapperPrefix() sets the prefix that will be appended to the Javascript
-	// wrapper functions (default is "xajax_").
-	function setWrapperPrefix($sPrefix)
-	{
-		$this->sWrapperPrefix = $sPrefix;
-	}
-	
-	// setCharEncoding() sets the character encoding to be used by xajax
-	// usage: $xajax->setCharEncoding("utf-8");
-	// *Note: to change the default character encoding for all xajax responses, set 
-	// the XAJAX_DEFAULT_CHAR_ENCODING constant near the beginning of the xajax.inc.php file
-	function setCharEncoding($sEncoding)
-	{
-		$this->sEncoding = $sEncoding;
-	}
-	
-	// registerFunction() registers a PHP function or method to be callable through
-	// xajax in your Javascript. If you want to register a function, pass in the name
-	// of that function. If you want to register a static class method, pass in an array
-	// like so:
-	// array("myFunctionName", "myClass", "myMethod")
-	// For an object instance method, use an object variable for the second array element
-	// (and in PHP 4 make sure you put an & before the variable to pass the object by
-	// reference). Note: the function name is what you call via Javascript, so it can be
-	// anything as long as it doesn't conflict with any other registered function name.
-	// 
-	// $mFunction is a string containing the function name or an object callback array
-	// $sRequestType is the RequestType (XAJAX_GET/XAJAX_POST) that should be used 
-	//		for this function.  Defaults to XAJAX_POST.
-	// usage: $xajax->registerFunction("myFunction");
-	//    or: $xajax->registerFunction(array("myFunctionName", &$myObject, "myMethod"));
-	function registerFunction($mFunction,$sRequestType=XAJAX_POST)
-	{
-		if (is_array($mFunction)) {
-			$this->aFunctions[$mFunction[0]] = 1;
-			$this->aFunctionRequestTypes[$mFunction[0]] = $sRequestType;
-			$this->aObjects[$mFunction[0]] = array_slice($mFunction, 1);
-		}	
-		else {
-			$this->aFunctions[$mFunction] = 1;
-			$this->aFunctionRequestTypes[$mFunction] = $sRequestType;
-		}
-	}
-	
-	// registerExternalFunction() registers a PHP function to be callable through xajax
-	// which is located in some other file.  If the function is requested the external
-	// file will be included to define the function before the function is called
-	// $mFunction is a string containing the function name or an object callback array
-	//   see registerFunction() for more info on object callback arrays
-	// $sIncludeFile is a string containing the path and filename of the include file
-	// $sRequestType is the RequestType (XAJAX_GET/XAJAX_POST) that should be used 
-	//		for this function.  Defaults to XAJAX_POST.
-	// usage: $xajax->registerExternalFunction("myFunction","myFunction.inc.php",XAJAX_POST);
-	function registerExternalFunction($mFunction,$sIncludeFile,$sRequestType=XAJAX_POST)
-	{
-		$this->registerFunction($mFunction, $sRequestType);
-		
-		if (is_array($mFunction)) {
-			$this->aFunctionIncludeFiles[$mFunction[0]] = $sIncludeFile;
-		}
-		else {
-			$this->aFunctionIncludeFiles[$mFunction] = $sIncludeFile;
-		}
-	}
-	
-	// registerCatchAllFunction() registers a PHP function to be called when xajax cannot
-	// find the function being called via Javascript. Because this is technically
-	// impossible when using "wrapped" functions, the catch-all feature is only useful
-	// when you're directly using the xajax.call() Javascript method. Use the catch-all
-	// feature when you want more dynamic ability to intercept unknown calls and handle
-	// them in a custom way.
-	// $mFunction is a string containing the function name or an object callback array
-	//   see registerFunction() for more info on object callback arrays
-	// usage: $xajax->registerCatchAllFunction("myCatchAllFunction");
-	function registerCatchAllFunction($mFunction)
-	{
-		if (is_array($mFunction)) {
-			$this->sCatchAllFunction = $mFunction[0];
-			$this->aObjects[$mFunction[0]] = array_slice($mFunction, 1);
-		}
-		else {
-			$this->sCatchAllFunction = $mFunction;
-		}
-	}
-	
-	// registerPreFunction() registers a PHP function to be called before xajax calls
-	// the requested function. xajax will automatically add the request function's response
-	// to the pre-function's response to create a single response. Another feature is
-	// the ability to return not just a response, but an array with the first element
-	// being false (a boolean) and the second being the response. In this case, the
-	// pre-function's response will be returned to the browser without xajax calling
-	// the requested function.
-	// $mFunction is a string containing the function name or an object callback array
-	//   see registerFunction() for more info on object callback arrays
-	// usage $xajax->registerPreFunction("myPreFunction");
-	function registerPreFunction($mFunction)
-	{
-		if (is_array($mFunction)) {
-			$this->sPreFunction = $mFunction[0];
-			$this->aObjects[$mFunction[0]] = array_slice($mFunction, 1);
-		}
-		else {
-			$this->sPreFunction = $mFunction;
-		}
-	}
-	
-	// returns true if xajax can process the request, false if otherwise
-	// you can use this to determine if xajax needs to process the request or not
-	function canProcessRequests()
-	{
-		if ($this->getRequestMode() != -1) return true;
-		return false;
-	}
-	
-	// returns the current request mode, or -1 if there is none
-	function getRequestMode()
-	{
-		if (!empty($_GET["xajax"]))
-			return XAJAX_GET;
-		
-		if (!empty($_POST["xajax"]))
-			return XAJAX_POST;
-			
-		return -1;
-	}
-	
-	// processRequests() is the main communications engine of xajax
-	// The engine handles all incoming xajax requests, calls the apporiate PHP functions
-	// and passes the xml responses back to the javascript response handler
-	// if your RequestURI is the same as your web page then this function should
-	// be called before any headers or html has been sent.
-	// usage: $xajax->processRequests()
-	function processRequests()
-	{	
-		
-		$requestMode = -1;
-		$sFunctionName = "";
-		$bFoundFunction = true;
-		$bFunctionIsCatchAll = false;
-		$sFunctionNameForSpecial = "";
-		$aArgs = array();
-		$sPreResponse = "";
-		$bEndRequest = false;
-		$sResponse = "";
-		
-		$requestMode = $this->getRequestMode();
-		if ($requestMode == -1) return;
-	
-		if ($requestMode == XAJAX_POST)
-		{
-			$sFunctionName = $_POST["xajax"];
-			
-			if (!empty($_POST["xajaxargs"])) 
-				$aArgs = $_POST["xajaxargs"];
-		}
-		else
-		{	
-			header ("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
-			header ("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
-			header ("Cache-Control: no-cache, must-revalidate");
-			header ("Pragma: no-cache");
-			header("Content-type: text/xml");
-			
-			$sFunctionName = $_GET["xajax"];
-			
-			if (!empty($_GET["xajaxargs"])) 
-				$aArgs = $_GET["xajaxargs"];
-		}
-		
-		// Use xajax error handler if necessary
-		if ($this->bErrorHandler) {
-			$GLOBALS['xajaxErrorHandlerText'] = "";
-			set_error_handler("xajaxErrorHandler");
-		}
-		
-		if ($this->sPreFunction) {
-			if (!$this->_isFunctionCallable($this->sPreFunction)) {
-				$bFoundFunction = false;
-				$objResponse = new xajaxResponse();
-				$objResponse->addAlert("Unknown Pre-Function ". $this->sPreFunction);
-				$sResponse = $objResponse->getXML();
-			}
-		}
-		//include any external dependencies associated with this function name
-		if (array_key_exists($sFunctionName,$this->aFunctionIncludeFiles))
-		{
-			ob_start();
-			include_once($this->aFunctionIncludeFiles[$sFunctionName]);
-			ob_end_clean();
-		}
-		
-		if ($bFoundFunction) {
-			$sFunctionNameForSpecial = $sFunctionName;
-			if (!array_key_exists($sFunctionName, $this->aFunctions))
-			{
-				if ($this->sCatchAllFunction) {
-					$sFunctionName = $this->sCatchAllFunction;
-					$bFunctionIsCatchAll = true;
-				}
-				else {
-					$bFoundFunction = false;
-					$objResponse = new xajaxResponse();
-					$objResponse->addAlert("Unknown Function $sFunctionName.");
-					$sResponse = $objResponse->getXML();
-				}
-			}
-			else if ($this->aFunctionRequestTypes[$sFunctionName] != $requestMode)
-			{
-				$bFoundFunction = false;
-				$objResponse = new xajaxResponse();
-				$objResponse->addAlert("Incorrect Request Type.");
-				$sResponse = $objResponse->getXML();
-			}
-		}
-		
-		if ($bFoundFunction)
-		{
-			for ($i = 0; $i < sizeof($aArgs); $i++)
-			{
-				// If magic quotes is on, then we need to strip the slashes from the args
-				if (get_magic_quotes_gpc() == 1 && is_string($aArgs[$i])) {
-				
-					$aArgs[$i] = stripslashes($aArgs[$i]);
-				}
-				if (stristr($aArgs[$i],"<xjxobj>") != false)
-				{
-					$aArgs[$i] = $this->_xmlToArray("xjxobj",$aArgs[$i]);	
-				}
-				else if (stristr($aArgs[$i],"<xjxquery>") != false)
-				{
-					$aArgs[$i] = $this->_xmlToArray("xjxquery",$aArgs[$i]);	
-				}
-			}
-
-			if ($this->sPreFunction) {
-				$mPreResponse = $this->_callFunction($this->sPreFunction, array($sFunctionNameForSpecial, $aArgs));
-				if (is_array($mPreResponse) && $mPreResponse[0] === false) {
-					$bEndRequest = true;
-					$sPreResponse = $mPreResponse[1];
-				}
-				else {
-					$sPreResponse = $mPreResponse;
-				}
-				if (is_a($sPreResponse, "xajaxResponse")) {
-					$sPreResponse = $sPreResponse->getXML();
-				}
-				if ($bEndRequest) $sResponse = $sPreResponse;
-			}
-			
-			if (!$bEndRequest) {
-				if (!$this->_isFunctionCallable($sFunctionName)) {
-					$objResponse = new xajaxResponse();
-					$objResponse->addAlert("The Registered Function $sFunctionName Could Not Be Found.");
-					$sResponse = $objResponse->getXML();
-				}
-				else {
-					if ($bFunctionIsCatchAll) {
-						$aArgs = array($sFunctionNameForSpecial, $aArgs);
-					}
-					$sResponse = $this->_callFunction($sFunctionName, $aArgs);
-				}
-				if (is_a($sResponse, "xajaxResponse")) {
-					$sResponse = $sResponse->getXML();
-				}
-				if (!is_string($sResponse) || strpos($sResponse, "<xjx>") === FALSE) {
-					$objResponse = new xajaxResponse();
-					$objResponse->addAlert("No XML Response Was Returned By Function $sFunctionName.");
-					$sResponse = $objResponse->getXML();
-				}
-				else if ($sPreResponse != "") {
-					$sNewResponse = new xajaxResponse();
-					$sNewResponse->loadXML($sPreResponse);
-					$sNewResponse->loadXML($sResponse);
-					$sResponse = $sNewResponse->getXML();
-				}
-			}
-		}
-		
-		$sContentHeader = "Content-type: text/xml;";
-		if ($this->sEncoding && strlen(trim($this->sEncoding)) > 0)
-			$sContentHeader .= " charset=".$this->sEncoding;
-		header($sContentHeader);
-		if ($this->bErrorHandler && !empty( $GLOBALS['xajaxErrorHandlerText'] )) {
-			$sErrorResponse = new xajaxResponse();
-			$sErrorResponse->addAlert("** PHP Error Messages: **" . $GLOBALS['xajaxErrorHandlerText']);
-			if ($this->sLogFile) {
-				$fH = @fopen($this->sLogFile, "a");
-				if (!$fH) {
-					$sErrorResponse->addAlert("** Logging Error **\n\nxajax was unable to write to the error log file:\n" . $this->sLogFile);
-				}
-				else {
-					fwrite($fH, "** xajax Error Log - " . strftime("%b %e %Y %I:%M:%S %p") . " **" . $GLOBALS['xajaxErrorHandlerText'] . "\n\n\n");
-					fclose($fH);
-				}
-			}
-
-			$sErrorResponse->loadXML($sResponse);
-			$sResponse = $sErrorResponse->getXML();
-			
-		}
-		if ($this->bCleanBuffer) while (@ob_end_clean());
-		print $sResponse;
-		if ($this->bErrorHandler) restore_error_handler();
-		
-		if ($this->bExitAllowed)
-			exit();
-	}
-			
-	// printJavascript() prints the xajax javascript code into your page by printing
-	// the output of the getJavascript() method. It should only be called between the
-	// <head> </head> tags in your HTML page. Remember, if you only want to obtain the
-	// result of this function, use getJavascript() instead.
-	// $sJsURI is the relative address of the folder where xajax has been installed.
-	//   For instance, if your PHP file is "http://www.myserver.com/myfolder/mypage.php"
-	//   and xajax was installed in "http://www.myserver.com/anotherfolder", then
-	//   $sJsURI should be set to "../anotherfolder". Defaults to assuming xajax is in
-	//   the same folder as your PHP file.
-	// $sJsFile is the relative folder/file pair of the xajax Javascript engine located
-	// within the xajax installation folder. Defaults to xajax_js/xajax.js.
-	// usage:
-	//	<head>
-	//		...
-	//		< ?php $xajax->printJavascript(); ? >
-	function printJavascript($sJsURI="", $sJsFile=NULL, $sJsFullFilename=NULL)
-	{
-		print $this->getJavascript($sJsURI, $sJsFile, $sJsFullFilename);
-	}
-	
-	// getJavascript() returns the xajax javascript code that should be added to
-	// your HTML page between the <head> </head> tags. See printJavascript()
-	// for information about the function arguments.
-	// usage:
-	//  < ?php $xajaxJSHead = $xajax->getJavascript(); ? >
-	//	<head>
-	//		...
-	//		< ?php echo $xajaxJSHead; ? >
-	function getJavascript($sJsURI="", $sJsFile=NULL, $sJsFullFilename=NULL)
-	{	
-		if ($sJsFile == NULL) $sJsFile = "xajax_js/xajax.js";
-			
-		if ($sJsURI != "" && substr($sJsURI, -1) != "/") $sJsURI .= "/";
-		
-		$html  = "\t<script type=\"text/javascript\">\n";
-		$html .= "var xajaxRequestUri=\"".$this->sRequestURI."\";\n";
-		$html .= "var xajaxDebug=".($this->bDebug?"true":"false").";\n";
-		$html .= "var xajaxStatusMessages=".($this->bStatusMessages?"true":"false").";\n";
-		$html .= "var xajaxWaitCursor=".($this->bWaitCursor?"true":"false").";\n";
-		$html .= "var xajaxDefinedGet=".XAJAX_GET.";\n";
-		$html .= "var xajaxDefinedPost=".XAJAX_POST.";\n";
-
-		foreach($this->aFunctions as $sFunction => $bExists) {
-			$html .= $this->_wrap($sFunction,$this->aFunctionRequestTypes[$sFunction]);
-		}
-
-		$html .= "</script>\n";
-		
-		// Create a compressed file if necessary
-		if ($sJsFullFilename) {
-			$realJsFile = $sJsFullFilename;
-		}
-		else {
-			$realPath = realpath(dirname(__FILE__));
-			$realJsFile = $realPath . "/". $sJsFile;
-		}
-		$srcFile = str_replace(".js", "_uncompressed.js", $realJsFile);
-		if (!file_exists($srcFile)) {
-			trigger_error("The xajax uncompressed Javascript file could not be found in the <b>" . dirname($realJsFile) . "</b> folder. Error ", E_USER_ERROR);	
-		}
-		
-		if ($this->bDebug) {
-			if (!@copy($srcFile, $realJsFile)) {
-				trigger_error("The xajax uncompressed javascript file could not be copied to the <b>" . dirname($realJsFile) . "</b> folder. Error ", E_USER_ERROR);
-			}
-		}
-		else if (!file_exists($realJsFile)) {
-			require(dirname($realJsFile) . "/xajaxCompress.php");
-			$javaScript = implode('', file($srcFile));
-			$compressedScript = xajaxCompressJavascript($javaScript);
-			$fH = @fopen($realJsFile, "w");
-			if (!$fH) {
-				trigger_error("The xajax compressed javascript file could not be written in the <b>" . dirname($realJsFile) . "</b> folder. Error ", E_USER_ERROR);
-			}
-			else {
-				fwrite($fH, $compressedScript);
-				fclose($fH);
-			}
-		}
-
-		$html .= "\t<script type=\"text/javascript\" src=\"" . $sJsURI . $sJsFile . "\"></script>\n";		
-		
-		return $html;
-	}
-	
-	// _detectURL() returns the current URL based upon the SERVER vars
-	// used internally
-	function _detectURI() {
-		$aURL = array();
-
-		// Try to get the request URL
-		if (!empty($_SERVER['REQUEST_URI'])) {
-			$aURL = parse_url($_SERVER['REQUEST_URI']);
-		}
-
-		// Fill in the empty values
-		if (empty($aURL['scheme'])) {
-			if (!empty($_SERVER['HTTP_SCHEME'])) {
-				$aURL['scheme'] = $_SERVER['HTTP_SCHEME'];
-			} else {
-				$aURL['scheme'] = (!empty($_SERVER['HTTPS']) && strtolower($_SERVER['HTTPS']) != 'off') ? 'https' : 'http';
-			}
-		}
-
-		if (empty($aURL['host'])) {
-			if (!empty($_SERVER['HTTP_HOST'])) {
-				if (strpos($_SERVER['HTTP_HOST'], ':') > 0) {
-					list($aURL['host'], $aURL['port']) = explode(':', $_SERVER['HTTP_HOST']);
-				} else {
-					$aURL['host'] = $_SERVER['HTTP_HOST'];
-				}
-			} else if (!empty($_SERVER['SERVER_NAME'])) {
-				$aURL['host'] = $_SERVER['SERVER_NAME'];
-			} else {
-				print "xajax Error: xajax failed to automatically identify your Request URI.";
-				print "Please set the Request URI explicitly when you instantiate the xajax object.";
-				exit();
-			}
-		}
-
-		if (empty($aURL['port']) && !empty($_SERVER['SERVER_PORT'])) {
-			$aURL['port'] = $_SERVER['SERVER_PORT'];
-		}
-
-		if (empty($aURL['path'])) {
-			if (!empty($_SERVER['PATH_INFO'])) {
-				$sPath = parse_url($_SERVER['PATH_INFO']);
-			} else {
-				$sPath = parse_url($_SERVER['PHP_SELF']);
-			}
-			$aURL['path'] = $sPath['path'];
-			unset($sPath);
-		}
-
-		if (!empty($aURL['query'])) {
-			$aURL['query'] = '?'.$aURL['query'];
-		}
-
-		// Build the URL: Start with scheme, user and pass
-		$sURL = $aURL['scheme'].'://';
-		if (!empty($aURL['user'])) {
-			$sURL.= $aURL['user'];
-			if (!empty($aURL['pass'])) {
-				$sURL.= ':'.$aURL['pass'];
-			}
-			$sURL.= '@';
-		}
-
-		// Add the host
-		$sURL.= $aURL['host'];
-
-		// Add the port if needed
-		if (!empty($aURL['port']) && (($aURL['scheme'] == 'http' && $aURL['port'] != 80) || ($aURL['scheme'] == 'https' && $aURL['port'] != 443))) {
-			$sURL.= ':'.$aURL['port'];
-		}
-
-		// Add the path and the query string
-		$sURL.= $aURL['path'].@$aURL['query'];
-
-		// Clean up
-		unset($aURL);
-		return $sURL;
-	}
-	
-	// returns true if the function name is associated with an object callback,
-	// false if not.
-	// user internally
-	function _isObjectCallback($sFunction)
-	{
-		if (array_key_exists($sFunction, $this->aObjects)) return true;
-		return false;
-	}
-	
-	// return true if the function or object callback can be called, false if not
-	// user internally
-	function _isFunctionCallable($sFunction)
-	{
-		if ($this->_isObjectCallback($sFunction)) {
-			if (is_object($this->aObjects[$sFunction][0])) {
-				return method_exists($this->aObjects[$sFunction][0], $this->aObjects[$sFunction][1]);
-			}
-			else {
-				return is_callable($this->aObjects[$sFunction]);
-			}
-		}
-		else {
-			return function_exists($sFunction);
-		}	
-	}
-	
-	// calls the function, class method, or object method with the supplied arguments
-	// user internally
-	function _callFunction($sFunction, $aArgs)
-	{
-		if ($this->_isObjectCallback($sFunction)) {
-			$mReturn = call_user_func_array($this->aObjects[$sFunction], $aArgs);
-		}
-		else {
-			$mReturn = call_user_func_array($sFunction, $aArgs);
-		}
-		return $mReturn;
-	}
-	
-	// generates the javascript wrapper for the specified PHP function
-	// used internally
-	function _wrap($sFunction,$sRequestType=XAJAX_POST)
-	{
-		$js = "function ".$this->sWrapperPrefix."$sFunction(){return xajax.call(\"$sFunction\", arguments, ".$sRequestType.");}\n";		
-		return $js;
-	}
-
-	// _xmlToArray() takes a string containing xajax xjxobj xml or xjxquery xml
-	// and builds an array representation of it to pass as an argument to
-	// the php function being called. Returns an array.
-	// used internally
-	function _xmlToArray($rootTag, $sXml)
-	{
-		$aArray = array();
-		$sXml = str_replace("<$rootTag>","<$rootTag>|~|",$sXml);
-		$sXml = str_replace("</$rootTag>","</$rootTag>|~|",$sXml);
-		$sXml = str_replace("<e>","<e>|~|",$sXml);
-		$sXml = str_replace("</e>","</e>|~|",$sXml);
-		$sXml = str_replace("<k>","<k>|~|",$sXml);
-		$sXml = str_replace("</k>","|~|</k>|~|",$sXml);
-		$sXml = str_replace("<v>","<v>|~|",$sXml);
-		$sXml = str_replace("</v>","|~|</v>|~|",$sXml);
-		$sXml = str_replace("<q>","<q>|~|",$sXml);
-		$sXml = str_replace("</q>","|~|</q>|~|",$sXml);
-		
-		$this->aObjArray = explode("|~|",$sXml);
-		
-		$this->iPos = 0;
-		$aArray = $this->_parseObjXml($rootTag);
-		
-		return $aArray;
-	}
-	
-	// _parseObjXml() is a recursive function that generates an array from the
-	// contents of $this->aObjArray. Returns an array.
-	// used internally
-	function _parseObjXml($rootTag)
-	{
-		$aArray = array();
-		
-		if ($rootTag == "xjxobj")
-		{
-			while(!stristr($this->aObjArray[$this->iPos],"</xjxobj>"))
-			{
-				$this->iPos++;
-				if(stristr($this->aObjArray[$this->iPos],"<e>"))
-				{
-					$key = "";
-					$value = null;
-						
-					$this->iPos++;
-					while(!stristr($this->aObjArray[$this->iPos],"</e>"))
-					{
-						if(stristr($this->aObjArray[$this->iPos],"<k>"))
-						{
-							$this->iPos++;
-							while(!stristr($this->aObjArray[$this->iPos],"</k>"))
-							{
-								$key .= $this->aObjArray[$this->iPos];
-								$this->iPos++;
-							}
-						}
-						if(stristr($this->aObjArray[$this->iPos],"<v>"))
-						{
-							$this->iPos++;
-							while(!stristr($this->aObjArray[$this->iPos],"</v>"))
-							{
-								if(stristr($this->aObjArray[$this->iPos],"<xjxobj>"))
-								{
-									$value = $this->_parseObjXml("xjxobj");
-									$this->iPos++;
-								}
-								else
-								{
-									$value .= $this->aObjArray[$this->iPos];
-								}
-								$this->iPos++;
-							}
-						}
-						$this->iPos++;
-					}
-					
-					$aArray[$key]=$value;
-				}
-			}
-		}
-		
-		if ($rootTag == "xjxquery")
-		{
-			$sQuery = "";
-			$this->iPos++;
-			while(!stristr($this->aObjArray[$this->iPos],"</xjxquery>"))
-			{
-				if (stristr($this->aObjArray[$this->iPos],"<q>") || stristr($this->aObjArray[$this->iPos],"</q>"))
-				{
-					$this->iPos++;
-					continue;
-				}
-				$sQuery	.= $this->aObjArray[$this->iPos];
-				$this->iPos++;
-			}
-			
-			parse_str($sQuery, $aArray);
-			// If magic quotes is on, then we need to strip the slashes from the
-			// array values because of the parse_str pass which adds slashes
-			if (get_magic_quotes_gpc() == 1) {
-				$newArray = array();
-				foreach ($aArray as $sKey => $sValue) {
-					if (is_string($sValue))
-						$newArray[$sKey] = stripslashes($sValue);
-					else
-						$newArray[$sKey] = $sValue;
-				}
-				$aArray = $newArray;
-			}
-		}
-		
-		return $aArray;
-	}
-		
-}// end class xajax 
-
-// xajaxErrorHandler() is registered with PHP's set_error_handler() function if
-// the xajax error handling system is turned on
-// used by the xajax class
-function xajaxErrorHandler($errno, $errstr, $errfile, $errline)
-{
-	$errorReporting = error_reporting();
-	if ($errorReporting == 0) return;
-	
-	if ($errno == E_NOTICE) {
-		$errTypeStr = "NOTICE";
-	}
-	else if ($errno == E_WARNING) {
-		$errTypeStr = "WARNING";
-	}
-	else if ($errno == E_USER_NOTICE) {
-		$errTypeStr = "USER NOTICE";
-	}
-	else if ($errno == E_USER_WARNING) {
-		$errTypeStr = "USER WARNING";
-	}
-	else if ($errno == E_USER_ERROR) {
-		$errTypeStr = "USER FATAL ERROR";
-	}
-	else if ($errno == E_STRICT) {
-		return;
-	}
-	else {
-		$errTypeStr = "UNKNOWN: $errno";
-	}
-	$GLOBALS['xajaxErrorHandlerText'] .= "\n----\n[$errTypeStr] $errstr\nerror in line $errline of file $errfile";
-}
-
-?>
\ No newline at end of file
+<?php
+///////////////////////////////////////////////////////////////////////////////
+// xajax.inc.php :: Main xajax class and setup file
+//
+// xajax version 0.2.3
+// copyright (c) 2005 by Jared White & J. Max Wilson
+// http://xajax.sourceforge.net
+//
+// xajax is an open source PHP class library for easily creating powerful
+// PHP-driven, web-based AJAX Applications. Using xajax, you can asynchronously
+// call PHP functions and update the content of your your webpage without
+// reloading the page.
+//
+// xajax is released under the terms of the LGPL license
+// http://www.gnu.org/copyleft/lesser.html#SEC3
+//
+// This library is free software; you can redistribute it and/or
+// modify it under the terms of the GNU Lesser General Public
+// License as published by the Free Software Foundation; either
+// version 2.1 of the License, or (at your option) any later version.
+//
+// This library is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+// Lesser General Public License for more details.
+// 
+// You should have received a copy of the GNU Lesser General Public
+// License along with this library; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+///////////////////////////////////////////////////////////////////////////////
+
+// Define XAJAX_DEFAULT_CHAR_ENCODING that is used by both
+// the xajax and xajaxResponse classes
+if (!defined ('XAJAX_DEFAULT_CHAR_ENCODING'))
+{
+	define ('XAJAX_DEFAULT_CHAR_ENCODING', 'utf-8' );
+}
+
+require_once("xajaxResponse.inc.php");
+
+// Communication Method Defines
+if (!defined ('XAJAX_GET'))
+{
+	define ('XAJAX_GET', 0);
+}
+if (!defined ('XAJAX_POST'))
+{
+	define ('XAJAX_POST', 1);
+}
+
+// the xajax class generates the xajax javascript for your page including the 
+// javascript wrappers for the PHP functions that you want to call from your page.
+// It also handles processing and executing the command messages in the xml responses
+// sent back to your page from your PHP functions.
+class xajax
+{
+	var $aFunctions;				// Array of PHP functions that will be callable through javascript wrappers
+	var $aObjects;				// Array of object callbacks that will allow Javascript to call PHP methods (key=function name)
+	var $aFunctionRequestTypes;	// Array of RequestTypes to be used with each function (key=function name)
+	var $aFunctionIncludeFiles;	// Array of Include Files for any external functions (key=function name)
+	var $sCatchAllFunction;		// Name of the PHP function to call if no callable function was found
+	var $sPreFunction;			// Name of the PHP function to call before any other function
+	var $sRequestURI;			// The URI for making requests to the xajax object
+	var $sWrapperPrefix;			// The prefix to prepend to the javascript wraper function name
+	var $bDebug;					// Show debug messages (true/false)
+	var $bStatusMessages;			// Show debug messages (true/false)
+	var $bExitAllowed;			// Allow xajax to exit after processing a request (true/false)
+	var $bWaitCursor;			// Use wait cursor in browser (true/false)
+	var $bErrorHandler;			// Use an special xajax error handler so the errors are sent to the browser properly
+	var $sLogFile;				// Specify if xajax should log errors (and more information in a future release)
+	var $bCleanBuffer;			// Clean all output buffers before outputting response (true/false)
+	var $sEncoding;				// String containing the character encoding used.
+	var $bDecodeUTF8Input;		// Decode input request args from UTF-8 (true/false)
+	var $bOutputEntities;			// Convert special characters to HTML entities (true/false)
+	var $aObjArray;				// Array for parsing complex objects
+	var $iPos;					// Position in $aObjArray
+	
+	// Contructor
+	// $sRequestURI - defaults to the current page
+	// $sWrapperPrefix - defaults to "xajax_";
+	// $sEncoding - defaults to XAJAX_DEFAULT_CHAR_ENCODING defined above
+	// $bDebug Mode - defaults to false
+	// usage: $xajax = new xajax();
+	function xajax($sRequestURI="",$sWrapperPrefix="xajax_",$sEncoding=XAJAX_DEFAULT_CHAR_ENCODING,$bDebug=false)
+	{
+		$this->aFunctions = array();
+		$this->aObjects = array();
+		$this->aFunctionIncludeFiles = array();
+		$this->sRequestURI = $sRequestURI;
+		if ($this->sRequestURI == "")
+			$this->sRequestURI = $this->_detectURI();
+		$this->sWrapperPrefix = $sWrapperPrefix;
+		$this->bDebug = $bDebug;
+		$this->bStatusMessages = false;
+		$this->bWaitCursor = true;
+		$this->bExitAllowed = true;
+		$this->bErrorHandler = false;
+		$this->sLogFile = "";
+		$this->bCleanBuffer = false;
+		$this->setCharEncoding($sEncoding);
+		$this->bDecodeUTF8Input = false;
+		$this->bOutputEntities = false;
+	}
+		
+	// setRequestURI() sets the URI to which requests will be made
+	// usage: $xajax->setRequestURI("http://xajax.sourceforge.net");
+	function setRequestURI($sRequestURI)
+	{
+		$this->sRequestURI = $sRequestURI;
+	}
+
+	// setWrapperPrefix() sets the prefix that will be appended to the Javascript
+	// wrapper functions (default is "xajax_").
+	function setWrapperPrefix($sPrefix)
+	{
+		$this->sWrapperPrefix = $sPrefix;
+	}
+	
+	// debugOn() enables debug messages for xajax
+	function debugOn()
+	{
+		$this->bDebug = true;
+	}
+	
+	// debugOff() disables debug messages for xajax (default behavior)
+	function debugOff()
+	{
+		$this->bDebug = false;
+	}
+		
+	// statusMessagesOn() enables messages in the statusbar for xajax
+	function statusMessagesOn()
+	{
+		$this->bStatusMessages = true;
+	}
+	
+	// statusMessagesOff() disables messages in the statusbar for xajax (default behavior)
+	function statusMessagesOff()
+	{
+		$this->bStatusMessages = false;
+	}
+	
+	// waitCursor() enables the wait cursor to be displayed in the browser (default behavior)
+	function waitCursorOn()
+	{
+		$this->bWaitCursor = true;
+	}
+	
+	// waitCursorOff() disables the wait cursor to be displayed in the browser
+	function waitCursorOff()
+	{
+		$this->bWaitCursor = false;
+	}	
+	
+	// exitAllowedOn() enables xajax to exit immediately after processing a request
+	// and sending the response back to the browser (default behavior)
+	function exitAllowedOn()
+	{
+		$this->bExitAllowed = true;
+	}
+	
+	// exitAllowedOff() disables xajax's default behavior of exiting immediately
+	// after processing a request and sending the response back to the browser
+	function exitAllowedOff()
+	{
+		$this->bExitAllowed = false;
+	}
+	
+	// errorHandlerOn() turns on xajax's error handling system so that PHP errors
+	// that occur during a request are trapped and pushed to the browser in the
+	// form of a Javascript alert
+	function errorHandlerOn()
+	{
+		$this->bErrorHandler = true;
+	}
+	// errorHandlerOff() turns off xajax's error handling system (default behavior)
+	function errorHandlerOff()
+	{
+		$this->bErrorHandler = false;
+	}
+	
+	// setLogFile() specifies a log file that will be written to by xajax during
+	// a request (used only by the error handling system at present). If you don't
+	// invoke this method, or you pass in "", then no log file will be written to.
+	// usage: $xajax->setLogFile("/xajax_logs/errors.log");
+	function setLogFile($sFilename)
+	{
+		$this->sLogFile = $sFilename;
+	}
+
+	// cleanBufferOn() causes xajax to clean out all output buffers before outputting
+	// a response (default behavior)
+	function cleanBufferOn()
+	{
+		$this->bCleanBuffer = true;
+	}
+	// cleanBufferOff() turns off xajax's output buffer cleaning
+	function cleanBufferOff()
+	{
+		$this->bCleanBuffer = false;
+	}
+	
+	// setCharEncoding() sets the character encoding to be used by xajax
+	// usage: $xajax->setCharEncoding("utf-8");
+	// *Note: to change the default character encoding for all xajax responses, set 
+	// the XAJAX_DEFAULT_CHAR_ENCODING constant near the beginning of the xajax.inc.php file
+	function setCharEncoding($sEncoding)
+	{
+		$this->sEncoding = $sEncoding;
+	}
+
+	// decodeUTF8InputOn() causes xajax to decode the input request args from UTF-8 to the
+	// current encoding.
+	function decodeUTF8InputOn()
+	{
+		$this->bDecodeUTF8Input = true;
+	}
+	// decodeUTF8InputOff() turns off decoding the input request args from UTF-8.
+	// (default behavior)
+	function decodeUTF8InputOff()
+	{
+		$this->bDecodeUTF8Input = false;
+	}
+	
+	// outputEntitiesOn() tells the response object to convert special characters to
+	// HTML entities automatically (only works if the mb_string extension is available).
+	function outputEntitiesOn()
+	{
+		$this->bOutputEntities = true;
+	}
+	
+	// outputEntitiesOff() tells the response object to output special characters
+	// intact. (default behavior)
+	function outputEntitiesOff()
+	{
+		$this->bOutputEntities = false;
+	}
+				
+	// registerFunction() registers a PHP function or method to be callable through
+	// xajax in your Javascript. If you want to register a function, pass in the name
+	// of that function. If you want to register a static class method, pass in an array
+	// like so:
+	// array("myFunctionName", "myClass", "myMethod")
+	// For an object instance method, use an object variable for the second array element
+	// (and in PHP 4 make sure you put an & before the variable to pass the object by
+	// reference). Note: the function name is what you call via Javascript, so it can be
+	// anything as long as it doesn't conflict with any other registered function name.
+	// 
+	// $mFunction is a string containing the function name or an object callback array
+	// $sRequestType is the RequestType (XAJAX_GET/XAJAX_POST) that should be used 
+	//		for this function.  Defaults to XAJAX_POST.
+	// usage: $xajax->registerFunction("myFunction");
+	//    or: $xajax->registerFunction(array("myFunctionName", &$myObject, "myMethod"));
+	function registerFunction($mFunction,$sRequestType=XAJAX_POST)
+	{
+		if (is_array($mFunction)) {
+			$this->aFunctions[$mFunction[0]] = 1;
+			$this->aFunctionRequestTypes[$mFunction[0]] = $sRequestType;
+			$this->aObjects[$mFunction[0]] = array_slice($mFunction, 1);
+		}	
+		else {
+			$this->aFunctions[$mFunction] = 1;
+			$this->aFunctionRequestTypes[$mFunction] = $sRequestType;
+		}
+	}
+	
+	// registerExternalFunction() registers a PHP function to be callable through xajax
+	// which is located in some other file.  If the function is requested the external
+	// file will be included to define the function before the function is called
+	// $mFunction is a string containing the function name or an object callback array
+	//   see registerFunction() for more info on object callback arrays
+	// $sIncludeFile is a string containing the path and filename of the include file
+	// $sRequestType is the RequestType (XAJAX_GET/XAJAX_POST) that should be used 
+	//		for this function.  Defaults to XAJAX_POST.
+	// usage: $xajax->registerExternalFunction("myFunction","myFunction.inc.php",XAJAX_POST);
+	function registerExternalFunction($mFunction,$sIncludeFile,$sRequestType=XAJAX_POST)
+	{
+		$this->registerFunction($mFunction, $sRequestType);
+		
+		if (is_array($mFunction)) {
+			$this->aFunctionIncludeFiles[$mFunction[0]] = $sIncludeFile;
+		}
+		else {
+			$this->aFunctionIncludeFiles[$mFunction] = $sIncludeFile;
+		}
+	}
+	
+	// registerCatchAllFunction() registers a PHP function to be called when xajax cannot
+	// find the function being called via Javascript. Because this is technically
+	// impossible when using "wrapped" functions, the catch-all feature is only useful
+	// when you're directly using the xajax.call() Javascript method. Use the catch-all
+	// feature when you want more dynamic ability to intercept unknown calls and handle
+	// them in a custom way.
+	// $mFunction is a string containing the function name or an object callback array
+	//   see registerFunction() for more info on object callback arrays
+	// usage: $xajax->registerCatchAllFunction("myCatchAllFunction");
+	function registerCatchAllFunction($mFunction)
+	{
+		if (is_array($mFunction)) {
+			$this->sCatchAllFunction = $mFunction[0];
+			$this->aObjects[$mFunction[0]] = array_slice($mFunction, 1);
+		}
+		else {
+			$this->sCatchAllFunction = $mFunction;
+		}
+	}
+	
+	// registerPreFunction() registers a PHP function to be called before xajax calls
+	// the requested function. xajax will automatically add the request function's response
+	// to the pre-function's response to create a single response. Another feature is
+	// the ability to return not just a response, but an array with the first element
+	// being false (a boolean) and the second being the response. In this case, the
+	// pre-function's response will be returned to the browser without xajax calling
+	// the requested function.
+	// $mFunction is a string containing the function name or an object callback array
+	//   see registerFunction() for more info on object callback arrays
+	// usage $xajax->registerPreFunction("myPreFunction");
+	function registerPreFunction($mFunction)
+	{
+		if (is_array($mFunction)) {
+			$this->sPreFunction = $mFunction[0];
+			$this->aObjects[$mFunction[0]] = array_slice($mFunction, 1);
+		}
+		else {
+			$this->sPreFunction = $mFunction;
+		}
+	}
+	
+	// returns true if xajax can process the request, false if otherwise
+	// you can use this to determine if xajax needs to process the request or not
+	function canProcessRequests()
+	{
+		if ($this->getRequestMode() != -1) return true;
+		return false;
+	}
+	
+	// returns the current request mode, or -1 if there is none
+	function getRequestMode()
+	{
+		if (!empty($_GET["xajax"]))
+			return XAJAX_GET;
+		
+		if (!empty($_POST["xajax"]))
+			return XAJAX_POST;
+			
+		return -1;
+	}
+	
+	// processRequests() is the main communications engine of xajax
+	// The engine handles all incoming xajax requests, calls the apporiate PHP functions
+	// and passes the xml responses back to the javascript response handler
+	// if your RequestURI is the same as your web page then this function should
+	// be called before any headers or html has been sent.
+	// usage: $xajax->processRequests()
+	function processRequests()
+	{	
+		
+		$requestMode = -1;
+		$sFunctionName = "";
+		$bFoundFunction = true;
+		$bFunctionIsCatchAll = false;
+		$sFunctionNameForSpecial = "";
+		$aArgs = array();
+		$sPreResponse = "";
+		$bEndRequest = false;
+		$sResponse = "";
+		
+		$requestMode = $this->getRequestMode();
+		if ($requestMode == -1) return;
+	
+		if ($requestMode == XAJAX_POST)
+		{
+			$sFunctionName = $_POST["xajax"];
+			
+			if (!empty($_POST["xajaxargs"])) 
+				$aArgs = $_POST["xajaxargs"];
+		}
+		else
+		{	
+			header ("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
+			header ("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
+			header ("Cache-Control: no-cache, must-revalidate");
+			header ("Pragma: no-cache");
+			
+			$sFunctionName = $_GET["xajax"];
+			
+			if (!empty($_GET["xajaxargs"])) 
+				$aArgs = $_GET["xajaxargs"];
+		}
+		
+		// Use xajax error handler if necessary
+		if ($this->bErrorHandler) {
+			$GLOBALS['xajaxErrorHandlerText'] = "";
+			set_error_handler("xajaxErrorHandler");
+		}
+		
+		if ($this->sPreFunction) {
+			if (!$this->_isFunctionCallable($this->sPreFunction)) {
+				$bFoundFunction = false;
+				$objResponse = new xajaxResponse();
+				$objResponse->addAlert("Unknown Pre-Function ". $this->sPreFunction);
+				$sResponse = $objResponse->getXML();
+			}
+		}
+		//include any external dependencies associated with this function name
+		if (array_key_exists($sFunctionName,$this->aFunctionIncludeFiles))
+		{
+			ob_start();
+			include_once($this->aFunctionIncludeFiles[$sFunctionName]);
+			ob_end_clean();
+		}
+		
+		if ($bFoundFunction) {
+			$sFunctionNameForSpecial = $sFunctionName;
+			if (!array_key_exists($sFunctionName, $this->aFunctions))
+			{
+				if ($this->sCatchAllFunction) {
+					$sFunctionName = $this->sCatchAllFunction;
+					$bFunctionIsCatchAll = true;
+				}
+				else {
+					$bFoundFunction = false;
+					$objResponse = new xajaxResponse();
+					$objResponse->addAlert("Unknown Function $sFunctionName.");
+					$sResponse = $objResponse->getXML();
+				}
+			}
+			else if ($this->aFunctionRequestTypes[$sFunctionName] != $requestMode)
+			{
+				$bFoundFunction = false;
+				$objResponse = new xajaxResponse();
+				$objResponse->addAlert("Incorrect Request Type.");
+				$sResponse = $objResponse->getXML();
+			}
+		}
+		
+		if ($bFoundFunction)
+		{
+			for ($i = 0; $i < sizeof($aArgs); $i++)
+			{
+				// If magic quotes is on, then we need to strip the slashes from the args
+				if (get_magic_quotes_gpc() == 1 && is_string($aArgs[$i])) {
+				
+					$aArgs[$i] = stripslashes($aArgs[$i]);
+				}
+				if (stristr($aArgs[$i],"<xjxobj>") != false)
+				{
+					$aArgs[$i] = $this->_xmlToArray("xjxobj",$aArgs[$i]);	
+				}
+				else if (stristr($aArgs[$i],"<xjxquery>") != false)
+				{
+					$aArgs[$i] = $this->_xmlToArray("xjxquery",$aArgs[$i]);	
+				}
+				else if ($this->bDecodeUTF8Input)
+				{
+					$aArgs[$i] = $this->_decodeUTF8Data($aArgs[$i]);	
+				}
+			}
+
+			if ($this->sPreFunction) {
+				$mPreResponse = $this->_callFunction($this->sPreFunction, array($sFunctionNameForSpecial, $aArgs));
+				if (is_array($mPreResponse) && $mPreResponse[0] === false) {
+					$bEndRequest = true;
+					$sPreResponse = $mPreResponse[1];
+				}
+				else {
+					$sPreResponse = $mPreResponse;
+				}
+				if (is_a($sPreResponse, "xajaxResponse")) {
+					$sPreResponse = $sPreResponse->getXML();
+				}
+				if ($bEndRequest) $sResponse = $sPreResponse;
+			}
+			
+			if (!$bEndRequest) {
+				if (!$this->_isFunctionCallable($sFunctionName)) {
+					$objResponse = new xajaxResponse();
+					$objResponse->addAlert("The Registered Function $sFunctionName Could Not Be Found.");
+					$sResponse = $objResponse->getXML();
+				}
+				else {
+					if ($bFunctionIsCatchAll) {
+						$aArgs = array($sFunctionNameForSpecial, $aArgs);
+					}
+					$sResponse = $this->_callFunction($sFunctionName, $aArgs);
+				}
+				if (is_a($sResponse, "xajaxResponse")) {
+					$sResponse = $sResponse->getXML();
+				}
+				if (!is_string($sResponse) || strpos($sResponse, "<xjx>") === FALSE) {
+					$objResponse = new xajaxResponse();
+					$objResponse->addAlert("No XML Response Was Returned By Function $sFunctionName.");
+					$sResponse = $objResponse->getXML();
+				}
+				else if ($sPreResponse != "") {
+					$sNewResponse = new xajaxResponse($this->sEncoding, $this->bOutputEntities);
+					$sNewResponse->loadXML($sPreResponse);
+					$sNewResponse->loadXML($sResponse);
+					$sResponse = $sNewResponse->getXML();
+				}
+			}
+		}
+		
+		$sContentHeader = "Content-type: text/xml;";
+		if ($this->sEncoding && strlen(trim($this->sEncoding)) > 0)
+			$sContentHeader .= " charset=".$this->sEncoding;
+		header($sContentHeader);
+		if ($this->bErrorHandler && !empty( $GLOBALS['xajaxErrorHandlerText'] )) {
+			$sErrorResponse = new xajaxResponse();
+			$sErrorResponse->addAlert("** PHP Error Messages: **" . $GLOBALS['xajaxErrorHandlerText']);
+			if ($this->sLogFile) {
+				$fH = @fopen($this->sLogFile, "a");
+				if (!$fH) {
+					$sErrorResponse->addAlert("** Logging Error **\n\nxajax was unable to write to the error log file:\n" . $this->sLogFile);
+				}
+				else {
+					fwrite($fH, "** xajax Error Log - " . strftime("%b %e %Y %I:%M:%S %p") . " **" . $GLOBALS['xajaxErrorHandlerText'] . "\n\n\n");
+					fclose($fH);
+				}
+			}
+
+			$sErrorResponse->loadXML($sResponse);
+			$sResponse = $sErrorResponse->getXML();
+			
+		}
+		if ($this->bCleanBuffer) while (@ob_end_clean());
+		print $sResponse;
+		if ($this->bErrorHandler) restore_error_handler();
+		
+		if ($this->bExitAllowed)
+			exit();
+	}
+			
+	// printJavascript() prints the xajax javascript code into your page by printing
+	// the output of the getJavascript() method. It should only be called between the
+	// <head> </head> tags in your HTML page. Remember, if you only want to obtain the
+	// result of this function, use getJavascript() instead.
+	// $sJsURI is the relative address of the folder where xajax has been installed.
+	//   For instance, if your PHP file is "http://www.myserver.com/myfolder/mypage.php"
+	//   and xajax was installed in "http://www.myserver.com/anotherfolder", then
+	//   $sJsURI should be set to "../anotherfolder". Defaults to assuming xajax is in
+	//   the same folder as your PHP file.
+	// $sJsFile is the relative folder/file pair of the xajax Javascript engine located
+	// within the xajax installation folder. Defaults to xajax_js/xajax.js.
+	// usage:
+	//	<head>
+	//		...
+	//		< ?php $xajax->printJavascript(); ? >
+	function printJavascript($sJsURI="", $sJsFile=NULL)
+	{
+		print $this->getJavascript($sJsURI, $sJsFile);
+	}
+	
+	// getJavascript() returns the xajax javascript code that should be added to
+	// your HTML page between the <head> </head> tags. See printJavascript()
+	// for information about the function arguments.
+	// usage:
+	//  < ?php $xajaxJSHead = $xajax->getJavascript(); ? >
+	//	<head>
+	//		...
+	//		< ?php echo $xajaxJSHead; ? >
+	function getJavascript($sJsURI="", $sJsFile=NULL)
+	{	
+		$html = $this->getJavascriptConfig();
+		$html .= $this->getJavascriptInclude($sJsURI, $sJsFile);
+		
+		return $html;
+	}
+	
+	// getJavascriptConfig() returns a string containing inline Javascript that sets
+	// up the xajax runtime
+	function getJavascriptConfig()
+	{
+		$html  = "\t<script type=\"text/javascript\">\n";
+		$html .= "var xajaxRequestUri=\"".$this->sRequestURI."\";\n";
+		$html .= "var xajaxDebug=".($this->bDebug?"true":"false").";\n";
+		$html .= "var xajaxStatusMessages=".($this->bStatusMessages?"true":"false").";\n";
+		$html .= "var xajaxWaitCursor=".($this->bWaitCursor?"true":"false").";\n";
+		$html .= "var xajaxDefinedGet=".XAJAX_GET.";\n";
+		$html .= "var xajaxDefinedPost=".XAJAX_POST.";\n";
+		$html .= "var xajaxLoaded=false;\n";
+
+		foreach($this->aFunctions as $sFunction => $bExists) {
+			$html .= $this->_wrap($sFunction,$this->aFunctionRequestTypes[$sFunction]);
+		}
+
+		$html .= "\t</script>\n";
+		return $html;		
+	}
+	
+	// getJavascriptInclude() returns a string containing a Javascript include of the
+	// xajax.js file along with a check to see if the file loaded after six seconds
+	function getJavascriptInclude($sJsURI="", $sJsFile=NULL)
+	{
+		if ($sJsFile == NULL) $sJsFile = "xajax_js/xajax.js";
+			
+		if ($sJsURI != "" && substr($sJsURI, -1) != "/") $sJsURI .= "/";
+		
+		$html = "\t<script type=\"text/javascript\" src=\"" . $sJsURI . $sJsFile . "\"></script>\n";	
+		$html .= "\t<script type=\"text/javascript\">\n";
+		$html .= "window.setTimeout(function () { if (!xajaxLoaded) { alert('Error: the xajax Javascript file could not be included. Perhaps the URL is incorrect?\\nURL: {$sJsURI}{$sJsFile}'); } }, 6000);\n";
+		$html .= "\t</script>\n";
+		return $html;
+	}
+
+	// autoCompressJavascript() can be used to create a new xajax.js file out of the
+	// xajax_uncompressed.js file (which will only happen if xajax.js doesn't already
+	// exist on the filesystem).
+	// $sJsFullFilename is an optional argument containing the full server file path
+	//  of xajax.js.
+	function autoCompressJavascript($sJsFullFilename=NULL)
+	{	
+		$sJsFile = "xajax_js/xajax.js";
+		
+		if ($sJsFullFilename) {
+			$realJsFile = $sJsFullFilename;
+		}
+		else {
+			$realPath = realpath(dirname(__FILE__));
+			$realJsFile = $realPath . "/". $sJsFile;
+		}
+
+		// Create a compressed file if necessary
+		if (!file_exists($realJsFile)) {
+			$srcFile = str_replace(".js", "_uncompressed.js", $realJsFile);
+			if (!file_exists($srcFile)) {
+				trigger_error("The xajax uncompressed Javascript file could not be found in the <b>" . dirname($realJsFile) . "</b> folder. Error ", E_USER_ERROR);	
+			}
+			require("xajaxCompress.php");
+			$javaScript = implode('', file($srcFile));
+			$compressedScript = xajaxCompressJavascript($javaScript);
+			$fH = @fopen($realJsFile, "w");
+			if (!$fH) {
+				trigger_error("The xajax compressed javascript file could not be written in the <b>" . dirname($realJsFile) . "</b> folder. Error ", E_USER_ERROR);
+			}
+			else {
+				fwrite($fH, $compressedScript);
+				fclose($fH);
+			}
+		}
+	}
+	// _detectURL() returns the current URL based upon the SERVER vars
+	// used internally
+	function _detectURI() {
+		$aURL = array();
+
+		// Try to get the request URL
+		if (!empty($_SERVER['REQUEST_URI'])) {
+			$aURL = parse_url($_SERVER['REQUEST_URI']);
+		}
+
+		// Fill in the empty values
+		if (empty($aURL['scheme'])) {
+			if (!empty($_SERVER['HTTP_SCHEME'])) {
+				$aURL['scheme'] = $_SERVER['HTTP_SCHEME'];
+			} else {
+				$aURL['scheme'] = (!empty($_SERVER['HTTPS']) && strtolower($_SERVER['HTTPS']) != 'off') ? 'https' : 'http';
+			}
+		}
+
+		if (empty($aURL['host'])) {
+			if (!empty($_SERVER['HTTP_HOST'])) {
+				if (strpos($_SERVER['HTTP_HOST'], ':') > 0) {
+					list($aURL['host'], $aURL['port']) = explode(':', $_SERVER['HTTP_HOST']);
+				} else {
+					$aURL['host'] = $_SERVER['HTTP_HOST'];
+				}
+			} else if (!empty($_SERVER['SERVER_NAME'])) {
+				$aURL['host'] = $_SERVER['SERVER_NAME'];
+			} else {
+				print "xajax Error: xajax failed to automatically identify your Request URI.";
+				print "Please set the Request URI explicitly when you instantiate the xajax object.";
+				exit();
+			}
+		}
+
+		if (empty($aURL['port']) && !empty($_SERVER['SERVER_PORT'])) {
+			$aURL['port'] = $_SERVER['SERVER_PORT'];
+		}
+
+		if (empty($aURL['path'])) {
+			if (!empty($_SERVER['PATH_INFO'])) {
+				$sPath = parse_url($_SERVER['PATH_INFO']);
+			} else {
+				$sPath = parse_url($_SERVER['PHP_SELF']);
+			}
+			$aURL['path'] = $sPath['path'];
+			unset($sPath);
+		}
+
+		if (!empty($aURL['query'])) {
+			$aURL['query'] = '?'.$aURL['query'];
+		}
+
+		// Build the URL: Start with scheme, user and pass
+		$sURL = $aURL['scheme'].'://';
+		if (!empty($aURL['user'])) {
+			$sURL.= $aURL['user'];
+			if (!empty($aURL['pass'])) {
+				$sURL.= ':'.$aURL['pass'];
+			}
+			$sURL.= '@';
+		}
+
+		// Add the host
+		$sURL.= $aURL['host'];
+
+		// Add the port if needed
+		if (!empty($aURL['port']) && (($aURL['scheme'] == 'http' && $aURL['port'] != 80) || ($aURL['scheme'] == 'https' && $aURL['port'] != 443))) {
+			$sURL.= ':'.$aURL['port'];
+		}
+
+		// Add the path and the query string
+		$sURL.= $aURL['path'].@$aURL['query'];
+
+		// Clean up
+		unset($aURL);
+		return $sURL;
+	}
+	
+	// returns true if the function name is associated with an object callback,
+	// false if not.
+	// user internally
+	function _isObjectCallback($sFunction)
+	{
+		if (array_key_exists($sFunction, $this->aObjects)) return true;
+		return false;
+	}
+	
+	// return true if the function or object callback can be called, false if not
+	// user internally
+	function _isFunctionCallable($sFunction)
+	{
+		if ($this->_isObjectCallback($sFunction)) {
+			if (is_object($this->aObjects[$sFunction][0])) {
+				return method_exists($this->aObjects[$sFunction][0], $this->aObjects[$sFunction][1]);
+			}
+			else {
+				return is_callable($this->aObjects[$sFunction]);
+			}
+		}
+		else {
+			return function_exists($sFunction);
+		}	
+	}
+	
+	// calls the function, class method, or object method with the supplied arguments
+	// user internally
+	function _callFunction($sFunction, $aArgs)
+	{
+		if ($this->_isObjectCallback($sFunction)) {
+			$mReturn = call_user_func_array($this->aObjects[$sFunction], $aArgs);
+		}
+		else {
+			$mReturn = call_user_func_array($sFunction, $aArgs);
+		}
+		return $mReturn;
+	}
+	
+	// generates the javascript wrapper for the specified PHP function
+	// used internally
+	function _wrap($sFunction,$sRequestType=XAJAX_POST)
+	{
+		$js = "function ".$this->sWrapperPrefix."$sFunction(){return xajax.call(\"$sFunction\", arguments, ".$sRequestType.");}\n";		
+		return $js;
+	}
+
+	// _xmlToArray() takes a string containing xajax xjxobj xml or xjxquery xml
+	// and builds an array representation of it to pass as an argument to
+	// the php function being called. Returns an array.
+	// used internally
+	function _xmlToArray($rootTag, $sXml)
+	{
+		$aArray = array();
+		$sXml = str_replace("<$rootTag>","<$rootTag>|~|",$sXml);
+		$sXml = str_replace("</$rootTag>","</$rootTag>|~|",$sXml);
+		$sXml = str_replace("<e>","<e>|~|",$sXml);
+		$sXml = str_replace("</e>","</e>|~|",$sXml);
+		$sXml = str_replace("<k>","<k>|~|",$sXml);
+		$sXml = str_replace("</k>","|~|</k>|~|",$sXml);
+		$sXml = str_replace("<v>","<v>|~|",$sXml);
+		$sXml = str_replace("</v>","|~|</v>|~|",$sXml);
+		$sXml = str_replace("<q>","<q>|~|",$sXml);
+		$sXml = str_replace("</q>","|~|</q>|~|",$sXml);
+		
+		$this->aObjArray = explode("|~|",$sXml);
+		
+		$this->iPos = 0;
+		$aArray = $this->_parseObjXml($rootTag);
+		
+		if ($this->bDecodeUTF8Input)
+		{
+			foreach ($aArray as $sKey => $sValue)
+			{
+				$aArray[$sKey] = $this->_decodeUTF8Data($sValue);
+			}
+		}
+        
+		return $aArray;
+	}
+	
+	// _parseObjXml() is a recursive function that generates an array from the
+	// contents of $this->aObjArray. Returns an array.
+	// used internally
+	function _parseObjXml($rootTag)
+	{
+		$aArray = array();
+		
+		if ($rootTag == "xjxobj")
+		{
+			while(!stristr($this->aObjArray[$this->iPos],"</xjxobj>"))
+			{
+				$this->iPos++;
+				if(stristr($this->aObjArray[$this->iPos],"<e>"))
+				{
+					$key = "";
+					$value = null;
+						
+					$this->iPos++;
+					while(!stristr($this->aObjArray[$this->iPos],"</e>"))
+					{
+						if(stristr($this->aObjArray[$this->iPos],"<k>"))
+						{
+							$this->iPos++;
+							while(!stristr($this->aObjArray[$this->iPos],"</k>"))
+							{
+								$key .= $this->aObjArray[$this->iPos];
+								$this->iPos++;
+							}
+						}
+						if(stristr($this->aObjArray[$this->iPos],"<v>"))
+						{
+							$this->iPos++;
+							while(!stristr($this->aObjArray[$this->iPos],"</v>"))
+							{
+								if(stristr($this->aObjArray[$this->iPos],"<xjxobj>"))
+								{
+									$value = $this->_parseObjXml("xjxobj");
+									$this->iPos++;
+								}
+								else
+								{
+									$value .= $this->aObjArray[$this->iPos];
+								}
+								$this->iPos++;
+							}
+						}
+						$this->iPos++;
+					}
+					
+					$aArray[$key]=$value;
+				}
+			}
+		}
+		
+		if ($rootTag == "xjxquery")
+		{
+			$sQuery = "";
+			$this->iPos++;
+			while(!stristr($this->aObjArray[$this->iPos],"</xjxquery>"))
+			{
+				if (stristr($this->aObjArray[$this->iPos],"<q>") || stristr($this->aObjArray[$this->iPos],"</q>"))
+				{
+					$this->iPos++;
+					continue;
+				}
+				$sQuery	.= $this->aObjArray[$this->iPos];
+				$this->iPos++;
+			}
+			
+			parse_str($sQuery, $aArray);
+			// If magic quotes is on, then we need to strip the slashes from the
+			// array values because of the parse_str pass which adds slashes
+			if (get_magic_quotes_gpc() == 1) {
+				$newArray = array();
+				foreach ($aArray as $sKey => $sValue) {
+					if (is_string($sValue))
+						$newArray[$sKey] = stripslashes($sValue);
+					else
+						$newArray[$sKey] = $sValue;
+				}
+				$aArray = $newArray;
+			}
+		}
+		
+		return $aArray;
+	}
+	
+	function _decodeUTF8Data($sData)
+	{
+		$sValue = $sData;
+		if ($this->bDecodeUTF8Input)
+		{
+			$sFuncToUse = NULL;
+			
+			if (function_exists('iconv'))
+			{
+				$sFuncToUse = "iconv";
+			}
+			else if (function_exists('mb_convert_encoding'))
+			{
+				$sFuncToUse = "mb_convert_encoding";
+			}
+			else if ($this->sEncoding == "ISO-8859-1")
+			{
+				$sFuncToUse = "utf8_decode";
+			}
+			else
+			{
+				trigger_error("The incoming xajax data could not be converted from UTF-8", E_USER_NOTICE);
+			}
+			
+			if ($sFuncToUse)
+			{
+				if (is_string($sValue))
+				{
+					if ($sFuncToUse == "iconv")
+					{
+						$sValue = iconv("UTF-8", $this->sEncoding.'//TRANSLIT', $sValue);
+					}
+					else if ($sFuncToUse == "mb_convert_encoding")
+					{
+						$sValue = mb_convert_encoding($sValue, $this->sEncoding, "UTF-8");
+					}
+					else
+					{
+						$sValue = utf8_decode($sValue);
+					}
+				}
+			}
+		}
+		return $sValue;	
+	}
+		
+}// end class xajax 
+
+// xajaxErrorHandler() is registered with PHP's set_error_handler() function if
+// the xajax error handling system is turned on
+// used by the xajax class
+function xajaxErrorHandler($errno, $errstr, $errfile, $errline)
+{
+	$errorReporting = error_reporting();
+	if (($errno & $errorReporting) == 0) return;
+	
+	if ($errno == E_NOTICE) {
+		$errTypeStr = "NOTICE";
+	}
+	else if ($errno == E_WARNING) {
+		$errTypeStr = "WARNING";
+	}
+	else if ($errno == E_USER_NOTICE) {
+		$errTypeStr = "USER NOTICE";
+	}
+	else if ($errno == E_USER_WARNING) {
+		$errTypeStr = "USER WARNING";
+	}
+	else if ($errno == E_USER_ERROR) {
+		$errTypeStr = "USER FATAL ERROR";
+	}
+	else if ($errno == E_STRICT) {
+		return;
+	}
+	else {
+		$errTypeStr = "UNKNOWN: $errno";
+	}
+	$GLOBALS['xajaxErrorHandlerText'] .= "\n----\n[$errTypeStr] $errstr\nerror in line $errline of file $errfile";
+}
+
+?>

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDAjax/xajaxResponse.inc.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDAjax/xajaxResponse.inc.php	2006-04-04 15:36:39 UTC (rev 1826)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDAjax/xajaxResponse.inc.php	2006-04-04 15:41:53 UTC (rev 1827)
@@ -2,7 +2,7 @@
 ///////////////////////////////////////////////////////////////////////////////
 // xajaxResponse.inc.php :: xajax XML response class
 //
-// xajax version 0.2
+// xajax version 0.2.3
 // copyright (c) 2005 by Jared White & J. Max Wilson
 // http://www.xajaxproject.org
 //
@@ -38,7 +38,7 @@
 
 // The xajaxResponse class is used to created responses to be sent back to your
 // webpage.  A response contains one or more command messages for updating your page.
-// Currently xajax supports 17 kinds of command messages, including some common ones such as:
+// Currently xajax supports 18 kinds of command messages, including some common ones such as:
 // * Assign - sets the specified attribute of an element in your page
 // * Append - appends data to the end of the specified attribute of an element in your page
 // * Prepend - prepends data to the beginning of the specified attribute of an element in your page
@@ -52,14 +52,18 @@
 {
 	var $xml;
 	var $sEncoding;
+	var $bOutputEntities;
 
 	// Constructor. Its main job is to set the character encoding for the response.
 	// $sEncoding is a string containing the character encoding string to use.
+	// $bOutputEntities lets you set if you want special characters in the output
+	//  converted to HTML entities
 	// * Note: to change the character encoding for all of the responses, set the
 	// XAJAX_DEFAULT_ENCODING constant near the beginning of the xajax.inc.php file
-	function xajaxResponse($sEncoding=XAJAX_DEFAULT_CHAR_ENCODING)
+	function xajaxResponse($sEncoding=XAJAX_DEFAULT_CHAR_ENCODING, $bOutputEntities=false)
 	{
 		$this->setCharEncoding($sEncoding);
+		$this->bOutputEntities = $bOutputEntities;
 	}
 	
 	// setCharEncoding() sets the character encoding for the response based on
@@ -72,6 +76,20 @@
 		$this->sEncoding = $sEncoding;
 	}
 	
+	// outputEntitiesOn() tells the response object to convert special characters to
+	// HTML entities automatically (only works if the mb_string extension is available).
+	function outputEntitiesOn()
+	{
+		$this->bOutputEntities = true;
+	}
+	
+	// outputEntitiesOff() tells the response object to output special characters
+	// intact. (default behavior)
+	function outputEntitiesOff()
+	{
+		$this->bOutputEntities = false;
+	}
+	
 	// addAssign() adds an assign command message to the XML response
 	// $sTarget is a string containing the id of an HTML element
 	// $sAttribute is the part of the element you wish to modify ("innerHTML", "value", etc.)
@@ -137,7 +155,26 @@
 	// usage: $objResponse->addRedirect("http://www.xajaxproject.org");
 	function addRedirect($sURL)
 	{
-		$this->addScript('window.location = "'.rawurlencode($sURL).'";');
+		//we need to parse the query part so that the values are rawurlencode()'ed
+		//can't just use parse_url() cos we could be dealing with a relative URL which
+		//  parse_url() can't deal with.
+		$queryStart = strpos($sURL, '?', strrpos($sURL, '/'));
+		if ($queryStart !== FALSE)
+		{
+			$queryStart++;
+			$queryEnd = strpos($sURL, '#', $queryStart);
+			if ($queryEnd === FALSE)
+				$queryEnd = strlen($sURL);
+			$queryPart = substr($sURL, $queryStart, $queryEnd-$queryStart);
+			parse_str($queryPart, $queryParts);
+			$newQueryPart = "";
+			foreach($queryParts as $key => $value)
+			{
+				$newQueryPart .= rawurlencode($key).'='.rawurlencode($value).ini_get('arg_separator.output');
+			}
+			$sURL = str_replace($queryPart, $newQueryPart, $sURL);
+		}
+		$this->addScript('window.location = "'.$sURL.'";');
 	}
 
 	// addScript() adds a Javascript command message to the XML response
@@ -184,6 +221,17 @@
 	{
 		$this->xml .= $this->_cmdXML(array("n"=>"ie","t"=>$sBefore,"p"=>$sId),$sTag);
 	}
+
+	// addInsertAfter() adds an insert element command message to the XML response
+	// $sAfter is a string containing the id of the child after which the new element
+	// will be inserted
+	// $sTag is the tag to be added
+	// $sId is the id to be assigned to the new element
+	// usage: $objResponse->addInsertAfter("childDiv", "h3", "myid");	
+	function addInsertAfter($sAfter, $sTag, $sId)
+	{
+		$this->xml .= $this->_cmdXML(array("n"=>"ia","t"=>$sAfter,"p"=>$sId),$sTag);
+	}
 	
 	// addCreateInput() adds a create input command message to the XML response
 	// $sParent is a string containing the id of an HTML element to which the new
@@ -271,11 +319,14 @@
 	// usage: $r1 = $objResponse1->getXML();
 	//        $objResponse2->loadXML($r1);
 	//        return $objResponse2->getXML();
-	function loadXML($sXML)
+	function loadXML($mXML)
 	{
+		if (is_a($mXML, "xajaxResponse")) {
+			$mXML = $mXML->getXML();
+		}
 		$sNewXML = "";
-		$iStartPos = strpos($sXML, "<xjx>") + 5;
-		$sNewXML = substr($sXML, $iStartPos);
+		$iStartPos = strpos($mXML, "<xjx>") + 5;
+		$sNewXML = substr($mXML, $iStartPos);
 		$iEndPos = strpos($sNewXML, "</xjx>");
 		$sNewXML = substr($sNewXML, 0, $iEndPos);
 		$this->xml .= $sNewXML;
@@ -284,12 +335,20 @@
 	// private method, used internally
 	function _cmdXML($aAttributes, $sData)
 	{
+		if ($this->bOutputEntities) {
+			if (function_exists('mb_convert_encoding')) {
+				$sData = call_user_func_array('mb_convert_encoding', array(&$sData, 'HTML-ENTITIES', $this->sEncoding));
+			}
+			else {
+				trigger_error("The xajax XML response output could not be converted to HTML entities because the mb_convert_encoding function is not available", E_USER_NOTICE);
+			}
+		}
 		$xml = "<cmd";
 		foreach($aAttributes as $sAttribute => $sValue)
 			$xml .= " $sAttribute=\"$sValue\"";
-		if ($sData && !stristr($sData,'<![CDATA['))
+		if ($sData !== null && !stristr($sData,'<![CDATA['))
 			$xml .= "><![CDATA[$sData]]></cmd>";
-		else if ($sData)
+		else if ($sData !== null)
 			$xml .= ">$sData</cmd>";
 		else
 			$xml .= "></cmd>";
@@ -298,4 +357,4 @@
 	}
 	
 }// end class xajaxResponse
-?>
\ No newline at end of file
+?>



From ximian at berlios.de  Tue Apr  4 23:58:43 2006
From: ximian at berlios.de (ximian at BerliOS)
Date: Tue, 4 Apr 2006 23:58:43 +0200
Subject: [ydf-devel] r1828 - YDFramework2.0/trunk/YDFramework2/addons/YDAjax
Message-ID: <200604042158.k34LwhvB005847@sheep.berlios.de>

Author: ximian
Date: 2006-04-04 23:58:43 +0200 (Tue, 04 Apr 2006)
New Revision: 1828

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php
Log:
YDAjax small fixes

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php	2006-04-04 15:41:53 UTC (rev 1827)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php	2006-04-04 21:58:43 UTC (rev 1828)
@@ -333,11 +333,7 @@
 				return $this->registerCatchAllFunction( array( $serverFunction[1], $serverFunction[0], $serverFunction[1] ) );
 
 		 	if( !is_array( $options ) ) $options = array( $options );
-
-			// register function in xajax if not on reponse
-			if ( !$this->onResponse )
-				$this->registerFunction( array( $serverFunction[1], $serverFunction[0], $serverFunction[1] ) );
-		 
+	 
 			// serverFunction must be an array with a class and the method (get function name)
 			$functionName = $this->computeFunction( $formElementName, $serverFunction, $arguments, $options, $effects );
 
@@ -369,6 +365,10 @@
 
 		function computeFunction( $formElementName, $serverFunction, $arguments = null, $options = null, $effects = null ){ 
 
+			// register function in xajax if not on reponse
+			if ( !$this->onResponse )
+				$this->registerFunction( array( $serverFunction[1], $serverFunction[0], $serverFunction[1] ) );
+
 			if( !$this->onResponse ) $serverFunctionName = $serverFunction[1];
 			else                     $serverFunctionName = $serverFunction;
 
@@ -529,7 +529,7 @@
 					$jsfunction = $this->prefix . 'get' . $elem->getName();
 
 					// add javascript function code to custom js (to be included in template head)
-					if ( !$this->onResponse ) $this->customjs[$jsfunction] = $js;
+					if ( !$this->onResponse ) $this->customjs[$jsfunction . '()' ] = $js;
 					else                      $this->response->addScript( $jsfunction . '=function(){' . $js . '}' );
 					
 					// add function name to arguments list



From pclaerhout at berlios.de  Wed Apr  5 12:05:57 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Wed, 5 Apr 2006 12:05:57 +0200
Subject: [ydf-devel] r1829 - YDFramework2.0/trunk/YDFramework2
Message-ID: <200604051005.k35A5vlV011389@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-05 12:05:56 +0200 (Wed, 05 Apr 2006)
New Revision: 1829

Removed:
   YDFramework2.0/trunk/YDFramework2/YDF2_core.php
Modified:
   YDFramework2.0/trunk/YDFramework2/YDF2_init.php
Log:
Merged YDF2_init.php and YDF2_core.php as it gets included anyway.

Deleted: YDFramework2.0/trunk/YDFramework2/YDF2_core.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDF2_core.php	2006-04-04 21:58:43 UTC (rev 1828)
+++ YDFramework2.0/trunk/YDFramework2/YDF2_core.php	2006-04-05 10:05:56 UTC (rev 1829)
@@ -1,507 +0,0 @@
-<?php
-
-    /*
-
-        Yellow Duck Framework version 2.0
-        (c) Copyright 2002-2005 Pieter Claerhout
-
-        This library is free software; you can redistribute it and/or
-        modify it under the terms of the GNU Lesser General Public
-        License as published by the Free Software Foundation; either
-        version 2.1 of the License, or (at your option) any later version.
-
-        This library is distributed in the hope that it will be useful,
-        but WITHOUT ANY WARRANTY; without even the implied warranty of
-        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
-        Lesser General Public License for more details.
-
-        You should have received a copy of the GNU Lesser General Public
-        License along with this library; if not, write to the Free Software
-        Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
-
-    */
-
-    // Check if the framework is loaded
-    if ( ! defined( 'YD_FW_NAME' ) ) {
-        die( 'Yellow Duck Framework is not loaded.' );
-    }
-
-    // Constants
-    define( 'YD_CONFIG_VAR', 'YDF2_GLOBAL_CONFIG' );
-    define( 'YD_LOCALE_KEY', 'YD_LOCALE' );
-
-    // This is the list of support languages
-    $GLOBALS[ 'YD_LANGUAGES' ] = array(
-        'en'  => array( 'eng', 'english', 'en_US' ),
-        'eng' => array( 'en', 'english', 'en_US' ),
-        'cs'  => array( 'csy', 'czech' ),
-        'csy' => array( 'czech', 'cs' ),
-        'da'  => array( 'dan', 'danish' ),
-        'dan' => array( 'danish', 'da' ),
-        'nl'  => array( 'nld', 'dutch' ),
-        'nld' => array( 'dutch', 'nl' ),
-        'nlb' => array( 'belgian', 'dutch-belgian', 'nl_BE', 'nl' ),
-        'ena' => array( 'australian', 'english-aus', 'en_AU', 'en' ),
-        'enc' => array( 'canadian', 'english-can', 'en_CA', 'en' ),
-        'enz' => array( 'english-nz', 'en_NZ', 'en' ),
-        'uk'  => array( 'english-uk', 'en_UK', 'en', 'enu', 'eng' ),
-        'enu' => array( 'uk', 'english-uk', 'en_UK', 'en', 'eng' ),
-        'us'  => array( 'american', 'american english', 'american-english', 'english-american', 'english-us', 'english-usa', 'enu', 'usa', 'en_US', 'en' ),
-        'fi'  => array( 'fin', 'finnish' ),
-        'fin' => array( 'finnish', 'fi' ),
-        'fr'  => array( 'fra', 'french' ),
-        'fra' => array( 'french', 'fr_FR', 'fr_FR', 'fr' ),
-        'frb' => array( 'french-belgian', 'fr_BE', 'fr' ),
-        'frc' => array( 'french-canadian', 'fr_CA', 'fr' ),
-        'frs' => array( 'french-swiss', 'fr_SW', 'fr' ),
-        'de'  => array( 'deu', 'german' ),
-        'deu' => array( 'german', 'de' ),
-        'dea' => array( 'german-austrian', 'de_AU', 'de' ),
-        'des' => array( 'german-swiss', 'swiss', 'de_SW', 'de' ),
-        'el'  => array( 'ell', 'greek' ),
-        'ell' => array( 'greek', 'el' ),
-        'hu'  => array( 'hun', 'hungarian' ),
-        'hun' => array( 'hungarian', 'hu' ),
-        'is'  => array( 'isl', 'icelandic' ),
-        'isl' => array( 'icelandic', 'is' ),
-        'it'  => array( 'ita', 'italian' ),
-        'ita' => array( 'italian', 'it' ),
-        'its' => array( 'italian-swiss', 'it', 'it_SW' ),
-        'no'  => array( 'nor', 'norwegian' ),
-        'nor' => array( 'norwegian-bokmal', 'no', 'no_BO' ),
-        'non' => array( 'norwegian-nynorsk', 'no', 'no_NY' ),
-        'pl'  => array( 'plk', 'polish' ),
-        'plk' => array( 'polish', 'pl' ),
-        'pt'  => array( 'ptg', 'portuguese' ),
-        'ptg' => array( 'portuguese', 'pt' ),
-        'ptb' => array( 'portuguese-brazil', 'pt_BR', 'pt' ),
-        'ru'  => array( 'rus', 'russian' ),
-        'rus' => array( 'russian', 'ru' ),
-        'sk'  => array( 'sky', 'slovak' ),
-        'sky' => array( 'slovak', 'sk' ),
-        'es'  => array( 'spanish' ),
-        'esp' => array( 'spanish', 'es' ),
-        'esm' => array( 'spanish-mexican', 'es_ME', 'es' ),
-        'esn' => array( 'spanish-modern', 'es_MO', 'es' ),
-        'sv'  => array( 'sve', 'swedish' ),
-        'sve' => array( 'swedish', 'sv' ),
-        'tr'  => array( 'trk', 'turkish' ),
-        'trk' => array( 'turkish', 'tr' ),
-    );
-
-    /**
-     *	This function will include a file from the filesystem. It works similar to the require_once function but it
-     *	knows about the include path for the Yellow Duck Framework.
-     *
-     *	@param $file	File to be included.
-     */
-    function YDInclude( $file ) {
-        if ( is_file( $file ) ) {
-            include_once( $file );
-            return;
-        }
-        foreach ( $GLOBALS['YD_INCLUDE_PATH'] as $include ) {
-            if ( $include != false && is_file( $include . '/' . $file ) ) {
-                include_once( $include . '/' . $file );
-                return;
-            }
-        }
-        trigger_error(
-            'Failed to include the file: ' . $file . ' The file was not found in the include path.', YD_ERROR
-        );
-    }
-
-    /**
-     *	This function will add a marker to the global timer.
-     *
-     *	@param $name	The name of the marker.
-     */
-    function YDGlobalTimerMarker( $name ) {
-        if ( ! isset( $GLOBALS['timer'] ) ) {
-            include_once( dirname( __FILE__ ) . '/YDClasses/YDUtil.php' );
-            $GLOBALS['timer'] = new YDTimer();
-        }
-        $GLOBALS['timer']->addMarker( $name );
-    }
-
-    /**
-     *	This function will fix magic quotes.
-     *
-     *	@param $value	The value to fix.
-     *
-     *	@returns	The fixed value.
-     */
-    function YDRemoveMagicQuotes( & $value ) {
-        if ( get_magic_quotes_gpc() == 1 ) {
-            if ( is_array( $value ) ) {
-                $result = array();
-                foreach ( $value as $key=>$val) {
-                    $result[ $key ] = is_array( $val ) ? YDRemoveMagicQuotes( $val ) : stripslashes( $val );
-                }
-                return $result;
-            } else {
-                return stripslashes( $value );
-            }
-        }
-        return $value;
-    }
-
-    /**
-     *  This function is used to load translations from a $GLOBALS['t'] array.
-     *
-     *  @param  $t  The name of the translated string.
-     *
-     *  @returns    The translated string.
-     */
-    function t( $t ) {
-
-        // Return empty string when param is missing
-        if ( empty( $t ) ) {
-            return '';
-        }
-
-        // Return the right translation
-        $t = strtolower( $t );
-        return ( array_key_exists( $t, $GLOBALS['t'] ) ? $GLOBALS['t'][$t] : "%$t%" );
-
-    }
-
-    /**
-     *  This is the base class for all other YD classes.
-     */
-    class YDBase {
-
-        /**
-         *  Class constructor for the YDBase class.
-         */
-        function YDBase() {
-        }
-
-        /**
-         *  This function returns the name of the current class.
-         *
-         *  @returns    The name of the current class in lowercase.
-         */
-        function getClassName() {
-            return strtolower( get_class( $this ) );
-        }
-
-        /**
-         *  This function returns true if the specified method is existing in the current class.
-         *
-         *  @param      $name   The name of the class method to look for.
-         *
-         *  @returns    Boolean indicating if the class method exists or not.
-         */
-        function hasMethod( $name ) {
-            return method_exists( $this, $name );
-        }
-
-        /**
-         *  This function checks if this object instance is of a specific class or is based on a derived class of the
-         *  given class. The class name is case insensitive.
-         *
-         *  @param $class   The object type you want to check against.
-         *
-         *  @returns    Boolean indicating if this object is of the specified class.
-         */
-        function isSubClass( $class ) {
-            return YDObjectUtil::isSubClass( $this, $class );
-        }
-
-        /**
-         *  Function to get all the ancestors of this class. The list will contain
-         *  the parent class first, and then it's parent class, etc. You can pass both
-         *  the name of the class or an object instance to this function.
-         *
-         *  @returns    Array with all the ancestors.
-         */
-        function getAncestors() {
-            return YDObjectUtil::getAncestors( $this->getClassName() );
-        }
-
-        /**
-         *  This function will serialize the object.
-         */
-        function serialize() {
-            return YDObjectUtil::serialize( $this );
-        }
-
-        /**
-         *  This function sets a variable in the object.
-         *
-         *  @param  $name   The variable name.
-         *  @param  $value  The variable value.
-         *
-         *  @returns        Returns a reference to the variable
-         */
-        function & set( $name, $value ) { 
-            $this->$name = $value; 
-            return $this->$name; 
-        } 
-
-        /**
-         *  This function indicates if a variable in the object exists or not.
-         *
-         *  @param  $name   The variable name.
-         *  @param  $null   (Optional) If false, indicates variables that are null
-         *                  as they don't exist. Default: false.
-         *
-         *  @returns        Returns a boolean indicating if a variable exists or not.
-         */
-        function exists( $name, $null=false ) { 
-            return $null ? array_key_exists( $name, $this ) : isset( $this->$name ); 
-        } 
-
-        /**
-         *  This function returns a variable value in the object.
-         *
-         *  @param  $name  The variable name.
-         *
-         *  @returns       Returns the variable value.
-         */
-        function get( $name ) { 
-            return $this->exists( $name, true ) ? $this->$name : null; 
-        }
-
-        /** 
-         *  This function returns an array with all the values of the object. 
-         * 
-         *  @returns  An array with all the values. 
-         */ 
-        function toArray() { 
-            $array = get_object_vars( $this ); 
-            foreach ( $array as $key => $val ) { 
-                if ( substr( $key, 0, 1 ) == '_' ) { 
-                    unset( $array[ $key ] ); 
-                } 
-            } 
-            return $array; 
-        } 
-
-    }
-
-    /**
-     *	This is the class that hold the global configuration.
-     */
-    class YDConfig extends YDBase {
-
-        /**
-         *	This function initializes the global configuration.
-         *
-         *	@internal
-         */
-        function _init() {
-            if ( ! isset( $GLOBALS[ YD_CONFIG_VAR ] ) ) {
-                $GLOBALS[ YD_CONFIG_VAR ] = array();
-            }
-        }
-
-        /**
-         *	This funtion add a new configuration variable to the configuration.
-         *
-         *	@param	$name		The name of the configuration variable.
-         *	@param	$value		The value of the configuration variable.
-         *	@param	$override	(optional) Override the current value or not. Default is true.
-         */
-        function set( $name, $value, $override=true ) {
-            if ( YDConfig::exists( $name ) ) {
-                if ( $override ) {
-                    $GLOBALS[ YD_CONFIG_VAR ][ $name ] = $value;
-                }
-            } else {
-                $GLOBALS[ YD_CONFIG_VAR ][ $name ] = $value;
-            }
-        }
-
-        /**
-         *	This function returns a variable from the configuration. If the configuration variable doesn't exist, it
-         *	returns a fatal error.
-         *
-         *	@param	$name       The name of the configuration variable to retrieve.
-         *  @param  $default    (optional) If not null, this value will be returned if the configuration setting doesn't
-         *                      exist in the configuration.
-         *
-         *	@returns	The value of the configuration variable.
-         */
-        function get( $name, $default=null ) {
-            return YDConfig::exists( $name ) ? $GLOBALS[ YD_CONFIG_VAR ][ $name ] : $default;
-        }
-
-        /**
-         *	This function checks if the configuration value is set or not.
-         *
-         *	@returns	Boolean indicating if the configuration value is set or not.
-         */
-        function exists( $name ) {
-            YDConfig::_init();
-            return isset( $GLOBALS[ YD_CONFIG_VAR ][ $name ] );
-        }
-
-        /**
-         *	This function dumps the contents of the configuration.
-         */
-        function dump() {
-            YDConfig::_init();
-            YDDebugUtil::dump( $GLOBALS[ YD_CONFIG_VAR ], 'YDConfig contents' );
-        }
-
-    }
-
-    /**
-     *	This is the class that hold the locale information.
-     */
-    class YDLocale extends YDBase {
-
-        /**
-         *	@param	$locale	Sets the current locale
-         */
-        function set( $locale ) {
-
-            // Check if the locale exists or not
-            if ( ! array_key_exists( strtolower( $locale ), $GLOBALS[ 'YD_LANGUAGES' ] ) ) {
-                trigger_error( 'You specified an invalid locale: "' . strtolower( $locale ) . '"', YD_ERROR );
-            }
-
-            // Get the locales
-            $locales = $GLOBALS[ 'YD_LANGUAGES' ][ $locale ];
-
-            // Add the current locale
-            array_unshift( $locales, $locale );
-            array_unshift( $locales, LC_ALL );
-
-            // Add another one
-            array_push( $locales, substr( $locale, 0, 2 ) . '_' . strtoupper( substr( $locale, 0, 2 ) ) );
-
-            // Set the locale
-            @call_user_func_array( 'setlocale', array_unique( $locales ) );
-
-            // Set the locale
-            YDConfig::set( YD_LOCALE_KEY, $locale );
-
-            // initialize t array
-            $GLOBALS['t'] = array();
-
-            // if directories array exist we must include all files
-            if ( isset( $GLOBALS[ 'YD_LANGUAGES_DIRECTORIES' ] ) )
-                foreach ( $GLOBALS[ 'YD_LANGUAGES_DIRECTORIES' ] as $dir )
-                    @include_once( $dir . '/' . YDLocale::get() . '.php' );
-        }
-
-
-        /**
-         *	@returns	The current locale.
-         */
-        function get() {
-            YDConfig::set( YD_LOCALE_KEY, 'en', false );
-            return strtolower( YDConfig::get( YD_LOCALE_KEY ) );
-        }
-
-
-        /**
-         *	This function adds a new directory
-         *
-         *	@param	$dir       Directory to add
-         */
-        function addDirectory( $dir ){
-
-            // check if directories array exists
-            if ( !isset( $GLOBALS[ 'YD_LANGUAGES_DIRECTORIES' ] ) )
-                $GLOBALS[ 'YD_LANGUAGES_DIRECTORIES' ] = array();
-
-            // add directory to array. Needed when changing locale
-            $GLOBALS[ 'YD_LANGUAGES_DIRECTORIES' ][] = $dir;
-
-            // check if translations array exists
-            if ( !isset( $GLOBALS['t'] ) )
-                $GLOBALS['t'] = array();
-
-            // include directory
-            include_once( $dir . '/' . YDLocale::get() . '.php' );
-        }
-
-    }
-
-
-    /**
-     *	This is the base class for all other YD classes.
-     */
-    class YDAddOnModule extends YDBase {
-
-        /**
-         *	Class constructor for the YDBase class.
-         */
-        function YDAddOnModule() {
-            $this->_author = 'unknown author';
-            $this->_version = '1.0';
-            $this->_copyright = 'no copyright';
-            $this->_description = 'no description';
-        }
-
-    }
-
-    // Add if not exists yet
-    if (!function_exists('str_ireplace')) {
-
-        /**
-         *  Function to do a case insensitve str_replace
-         *
-         *  @param  $search     The string to search for.
-         *  @param  $replace    The replacement string.
-         *  @param  $subject    The string to replace in
-         *  @param  $count      (optional) The maximum number of replacements. Default us all.
-         *
-         *  @returns    The updated string.
-         */
-        function str_ireplace( $search, $replace, $subject, $count = null ) {
-            if ( is_string( $search ) && is_array( $replace ) ) {
-                user_error( 'Array to string conversion', E_USER_NOTICE );
-                $replace = ( string ) $replace;
-            }
-            if ( ! is_array( $search ) ) {
-                $search = array( $search );
-            }
-            $search = array_values( $search );
-            if ( ! is_array( $replace ) ) {
-                $replace_string = $replace;
-                $replace = array();
-                for ( $i = 0, $c = count( $search ); $i < $c; $i++ ) {
-                    $replace[$i] = $replace_string;
-                }
-            }
-            $replace = array_values( $replace );
-            $length_replace = count( $replace );
-            $length_search = count( $search );
-            if ( $length_replace < $length_search ) {
-                for ( $i = $length_replace; $i < $length_search; $i++ ) {
-                    $replace[$i] = '';
-                }
-            }
-            $was_array = false;
-            if ( ! is_array( $subject ) ) {
-                $was_array = true;
-                $subject = array( $subject );
-            }
-            $count = 0;
-            foreach ( $subject as $subject_key => $subject_value ) {
-                foreach ( $search as $search_key => $search_value ) {
-                    $segments = explode( strtolower( $search_value ), strtolower( $subject_value ) );
-                    $count += count( $segments ) - 1;
-                    $pos = 0;
-                    foreach ( $segments as $segment_key => $segment_value ) {
-                        $segments[$segment_key] = substr( $subject_value, $pos, strlen( $segment_value ) );
-                        $pos += strlen( $segment_value ) + strlen( $search_value );
-                    }
-                    $subject_value = implode( $replace[$search_key], $segments );
-                }
-                $result[$subject_key] = $subject_value;
-            }
-            if ( $was_array === true ) {
-                return $result[0];
-            }
-            return $result;
-        }
-
-    }
-
-?>

Modified: YDFramework2.0/trunk/YDFramework2/YDF2_init.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDF2_init.php	2006-04-04 21:58:43 UTC (rev 1828)
+++ YDFramework2.0/trunk/YDFramework2/YDF2_init.php	2006-04-05 10:05:56 UTC (rev 1829)
@@ -121,9 +121,484 @@
     $GLOBALS['YD_INCLUDE_PATH'] = explode( YD_PATHDELIM, $includePath );
     @ini_set( 'include_path', $includePath );
 
-    // Include the standard functions
-    include_once( YD_DIR_HOME . '/YDF2_core.php' );
+//    // Include the standard functions
+//    include_once( YD_DIR_HOME . '/YDF2_core.php' );
 
+    // Constants
+    define( 'YD_CONFIG_VAR', 'YDF2_GLOBAL_CONFIG' );
+    define( 'YD_LOCALE_KEY', 'YD_LOCALE' );
+
+    // This is the list of support languages
+    $GLOBALS[ 'YD_LANGUAGES' ] = array(
+        'en'  => array( 'eng', 'english', 'en_US' ),
+        'eng' => array( 'en', 'english', 'en_US' ),
+        'cs'  => array( 'csy', 'czech' ),
+        'csy' => array( 'czech', 'cs' ),
+        'da'  => array( 'dan', 'danish' ),
+        'dan' => array( 'danish', 'da' ),
+        'nl'  => array( 'nld', 'dutch' ),
+        'nld' => array( 'dutch', 'nl' ),
+        'nlb' => array( 'belgian', 'dutch-belgian', 'nl_BE', 'nl' ),
+        'ena' => array( 'australian', 'english-aus', 'en_AU', 'en' ),
+        'enc' => array( 'canadian', 'english-can', 'en_CA', 'en' ),
+        'enz' => array( 'english-nz', 'en_NZ', 'en' ),
+        'uk'  => array( 'english-uk', 'en_UK', 'en', 'enu', 'eng' ),
+        'enu' => array( 'uk', 'english-uk', 'en_UK', 'en', 'eng' ),
+        'us'  => array( 'american', 'american english', 'american-english', 'english-american', 'english-us', 'english-usa', 'enu', 'usa', 'en_US', 'en' ),
+        'fi'  => array( 'fin', 'finnish' ),
+        'fin' => array( 'finnish', 'fi' ),
+        'fr'  => array( 'fra', 'french' ),
+        'fra' => array( 'french', 'fr_FR', 'fr_FR', 'fr' ),
+        'frb' => array( 'french-belgian', 'fr_BE', 'fr' ),
+        'frc' => array( 'french-canadian', 'fr_CA', 'fr' ),
+        'frs' => array( 'french-swiss', 'fr_SW', 'fr' ),
+        'de'  => array( 'deu', 'german' ),
+        'deu' => array( 'german', 'de' ),
+        'dea' => array( 'german-austrian', 'de_AU', 'de' ),
+        'des' => array( 'german-swiss', 'swiss', 'de_SW', 'de' ),
+        'el'  => array( 'ell', 'greek' ),
+        'ell' => array( 'greek', 'el' ),
+        'hu'  => array( 'hun', 'hungarian' ),
+        'hun' => array( 'hungarian', 'hu' ),
+        'is'  => array( 'isl', 'icelandic' ),
+        'isl' => array( 'icelandic', 'is' ),
+        'it'  => array( 'ita', 'italian' ),
+        'ita' => array( 'italian', 'it' ),
+        'its' => array( 'italian-swiss', 'it', 'it_SW' ),
+        'no'  => array( 'nor', 'norwegian' ),
+        'nor' => array( 'norwegian-bokmal', 'no', 'no_BO' ),
+        'non' => array( 'norwegian-nynorsk', 'no', 'no_NY' ),
+        'pl'  => array( 'plk', 'polish' ),
+        'plk' => array( 'polish', 'pl' ),
+        'pt'  => array( 'ptg', 'portuguese' ),
+        'ptg' => array( 'portuguese', 'pt' ),
+        'ptb' => array( 'portuguese-brazil', 'pt_BR', 'pt' ),
+        'ru'  => array( 'rus', 'russian' ),
+        'rus' => array( 'russian', 'ru' ),
+        'sk'  => array( 'sky', 'slovak' ),
+        'sky' => array( 'slovak', 'sk' ),
+        'es'  => array( 'spanish' ),
+        'esp' => array( 'spanish', 'es' ),
+        'esm' => array( 'spanish-mexican', 'es_ME', 'es' ),
+        'esn' => array( 'spanish-modern', 'es_MO', 'es' ),
+        'sv'  => array( 'sve', 'swedish' ),
+        'sve' => array( 'swedish', 'sv' ),
+        'tr'  => array( 'trk', 'turkish' ),
+        'trk' => array( 'turkish', 'tr' ),
+    );
+
+    /**
+     *	This function will include a file from the filesystem. It works similar to the require_once function but it
+     *	knows about the include path for the Yellow Duck Framework.
+     *
+     *	@param $file	File to be included.
+     */
+    function YDInclude( $file ) {
+        if ( is_file( $file ) ) {
+            include_once( $file );
+            return;
+        }
+        foreach ( $GLOBALS['YD_INCLUDE_PATH'] as $include ) {
+            if ( $include != false && is_file( $include . '/' . $file ) ) {
+                include_once( $include . '/' . $file );
+                return;
+            }
+        }
+        trigger_error(
+            'Failed to include the file: ' . $file . ' The file was not found in the include path.', YD_ERROR
+        );
+    }
+
+    /**
+     *	This function will add a marker to the global timer.
+     *
+     *	@param $name	The name of the marker.
+     */
+    function YDGlobalTimerMarker( $name ) {
+        if ( ! isset( $GLOBALS['timer'] ) ) {
+            include_once( dirname( __FILE__ ) . '/YDClasses/YDUtil.php' );
+            $GLOBALS['timer'] = new YDTimer();
+        }
+        $GLOBALS['timer']->addMarker( $name );
+    }
+
+    /**
+     *	This function will fix magic quotes.
+     *
+     *	@param $value	The value to fix.
+     *
+     *	@returns	The fixed value.
+     */
+    function YDRemoveMagicQuotes( & $value ) {
+        if ( get_magic_quotes_gpc() == 1 ) {
+            if ( is_array( $value ) ) {
+                $result = array();
+                foreach ( $value as $key=>$val) {
+                    $result[ $key ] = is_array( $val ) ? YDRemoveMagicQuotes( $val ) : stripslashes( $val );
+                }
+                return $result;
+            } else {
+                return stripslashes( $value );
+            }
+        }
+        return $value;
+    }
+
+    /**
+     *  This function is used to load translations from a $GLOBALS['t'] array.
+     *
+     *  @param  $t  The name of the translated string.
+     *
+     *  @returns    The translated string.
+     */
+    function t( $t ) {
+
+        // Return empty string when param is missing
+        if ( empty( $t ) ) {
+            return '';
+        }
+
+        // Return the right translation
+        $t = strtolower( $t );
+        return ( array_key_exists( $t, $GLOBALS['t'] ) ? $GLOBALS['t'][$t] : "%$t%" );
+
+    }
+
+    /**
+     *  This is the base class for all other YD classes.
+     */
+    class YDBase {
+
+        /**
+         *  Class constructor for the YDBase class.
+         */
+        function YDBase() {
+        }
+
+        /**
+         *  This function returns the name of the current class.
+         *
+         *  @returns    The name of the current class in lowercase.
+         */
+        function getClassName() {
+            return strtolower( get_class( $this ) );
+        }
+
+        /**
+         *  This function returns true if the specified method is existing in the current class.
+         *
+         *  @param      $name   The name of the class method to look for.
+         *
+         *  @returns    Boolean indicating if the class method exists or not.
+         */
+        function hasMethod( $name ) {
+            return method_exists( $this, $name );
+        }
+
+        /**
+         *  This function checks if this object instance is of a specific class or is based on a derived class of the
+         *  given class. The class name is case insensitive.
+         *
+         *  @param $class   The object type you want to check against.
+         *
+         *  @returns    Boolean indicating if this object is of the specified class.
+         */
+        function isSubClass( $class ) {
+            return YDObjectUtil::isSubClass( $this, $class );
+        }
+
+        /**
+         *  Function to get all the ancestors of this class. The list will contain
+         *  the parent class first, and then it's parent class, etc. You can pass both
+         *  the name of the class or an object instance to this function.
+         *
+         *  @returns    Array with all the ancestors.
+         */
+        function getAncestors() {
+            return YDObjectUtil::getAncestors( $this->getClassName() );
+        }
+
+        /**
+         *  This function will serialize the object.
+         */
+        function serialize() {
+            return YDObjectUtil::serialize( $this );
+        }
+
+        /**
+         *  This function sets a variable in the object.
+         *
+         *  @param  $name   The variable name.
+         *  @param  $value  The variable value.
+         *
+         *  @returns        Returns a reference to the variable
+         */
+        function & set( $name, $value ) { 
+            $this->$name = $value; 
+            return $this->$name; 
+        } 
+
+        /**
+         *  This function indicates if a variable in the object exists or not.
+         *
+         *  @param  $name   The variable name.
+         *  @param  $null   (Optional) If false, indicates variables that are null
+         *                  as they don't exist. Default: false.
+         *
+         *  @returns        Returns a boolean indicating if a variable exists or not.
+         */
+        function exists( $name, $null=false ) { 
+            return $null ? array_key_exists( $name, $this ) : isset( $this->$name ); 
+        } 
+
+        /**
+         *  This function returns a variable value in the object.
+         *
+         *  @param  $name  The variable name.
+         *
+         *  @returns       Returns the variable value.
+         */
+        function get( $name ) { 
+            return $this->exists( $name, true ) ? $this->$name : null; 
+        }
+
+        /** 
+         *  This function returns an array with all the values of the object. 
+         * 
+         *  @returns  An array with all the values. 
+         */ 
+        function toArray() { 
+            $array = get_object_vars( $this ); 
+            foreach ( $array as $key => $val ) { 
+                if ( substr( $key, 0, 1 ) == '_' ) { 
+                    unset( $array[ $key ] ); 
+                } 
+            } 
+            return $array; 
+        } 
+
+    }
+
+    /**
+     *	This is the class that hold the global configuration.
+     */
+    class YDConfig extends YDBase {
+
+        /**
+         *	This function initializes the global configuration.
+         *
+         *	@internal
+         */
+        function _init() {
+            if ( ! isset( $GLOBALS[ YD_CONFIG_VAR ] ) ) {
+                $GLOBALS[ YD_CONFIG_VAR ] = array();
+            }
+        }
+
+        /**
+         *	This funtion add a new configuration variable to the configuration.
+         *
+         *	@param	$name		The name of the configuration variable.
+         *	@param	$value		The value of the configuration variable.
+         *	@param	$override	(optional) Override the current value or not. Default is true.
+         */
+        function set( $name, $value, $override=true ) {
+            if ( YDConfig::exists( $name ) ) {
+                if ( $override ) {
+                    $GLOBALS[ YD_CONFIG_VAR ][ $name ] = $value;
+                }
+            } else {
+                $GLOBALS[ YD_CONFIG_VAR ][ $name ] = $value;
+            }
+        }
+
+        /**
+         *	This function returns a variable from the configuration. If the configuration variable doesn't exist, it
+         *	returns a fatal error.
+         *
+         *	@param	$name       The name of the configuration variable to retrieve.
+         *  @param  $default    (optional) If not null, this value will be returned if the configuration setting doesn't
+         *                      exist in the configuration.
+         *
+         *	@returns	The value of the configuration variable.
+         */
+        function get( $name, $default=null ) {
+            return YDConfig::exists( $name ) ? $GLOBALS[ YD_CONFIG_VAR ][ $name ] : $default;
+        }
+
+        /**
+         *	This function checks if the configuration value is set or not.
+         *
+         *	@returns	Boolean indicating if the configuration value is set or not.
+         */
+        function exists( $name ) {
+            YDConfig::_init();
+            return isset( $GLOBALS[ YD_CONFIG_VAR ][ $name ] );
+        }
+
+        /**
+         *	This function dumps the contents of the configuration.
+         */
+        function dump() {
+            YDConfig::_init();
+            YDDebugUtil::dump( $GLOBALS[ YD_CONFIG_VAR ], 'YDConfig contents' );
+        }
+
+    }
+
+    /**
+     *	This is the class that hold the locale information.
+     */
+    class YDLocale extends YDBase {
+
+        /**
+         *	@param	$locale	Sets the current locale
+         */
+        function set( $locale ) {
+
+            // Check if the locale exists or not
+            if ( ! array_key_exists( strtolower( $locale ), $GLOBALS[ 'YD_LANGUAGES' ] ) ) {
+                trigger_error( 'You specified an invalid locale: "' . strtolower( $locale ) . '"', YD_ERROR );
+            }
+
+            // Get the locales
+            $locales = $GLOBALS[ 'YD_LANGUAGES' ][ $locale ];
+
+            // Add the current locale
+            array_unshift( $locales, $locale );
+            array_unshift( $locales, LC_ALL );
+
+            // Add another one
+            array_push( $locales, substr( $locale, 0, 2 ) . '_' . strtoupper( substr( $locale, 0, 2 ) ) );
+
+            // Set the locale
+            @call_user_func_array( 'setlocale', array_unique( $locales ) );
+
+            // Set the locale
+            YDConfig::set( YD_LOCALE_KEY, $locale );
+
+            // initialize t array
+            $GLOBALS['t'] = array();
+
+            // if directories array exist we must include all files
+            if ( isset( $GLOBALS[ 'YD_LANGUAGES_DIRECTORIES' ] ) )
+                foreach ( $GLOBALS[ 'YD_LANGUAGES_DIRECTORIES' ] as $dir )
+                    @include_once( $dir . '/' . YDLocale::get() . '.php' );
+        }
+
+        /**
+         *	@returns	The current locale.
+         */
+        function get() {
+            YDConfig::set( YD_LOCALE_KEY, 'en', false );
+            return strtolower( YDConfig::get( YD_LOCALE_KEY ) );
+        }
+
+        /**
+         *	This function adds a new directory
+         *
+         *	@param	$dir       Directory to add
+         */
+        function addDirectory( $dir ){
+
+            // check if directories array exists
+            if ( !isset( $GLOBALS[ 'YD_LANGUAGES_DIRECTORIES' ] ) )
+                $GLOBALS[ 'YD_LANGUAGES_DIRECTORIES' ] = array();
+
+            // add directory to array. Needed when changing locale
+            $GLOBALS[ 'YD_LANGUAGES_DIRECTORIES' ][] = $dir;
+
+            // check if translations array exists
+            if ( !isset( $GLOBALS['t'] ) )
+                $GLOBALS['t'] = array();
+
+            // include directory
+            include_once( $dir . '/' . YDLocale::get() . '.php' );
+        }
+
+    }
+
+    /**
+     *	This is the base class for all other YD classes.
+     */
+    class YDAddOnModule extends YDBase {
+
+        /**
+         *	Class constructor for the YDBase class.
+         */
+        function YDAddOnModule() {
+            $this->_author = 'unknown author';
+            $this->_version = '1.0';
+            $this->_copyright = 'no copyright';
+            $this->_description = 'no description';
+        }
+
+    }
+
+    // Add if not exists yet
+    if ( ! function_exists( 'str_ireplace' ) ) {
+
+        /**
+         *  Function to do a case insensitve str_replace
+         *
+         *  @param  $search     The string to search for.
+         *  @param  $replace    The replacement string.
+         *  @param  $subject    The string to replace in
+         *  @param  $count      (optional) The maximum number of replacements. Default us all.
+         *
+         *  @returns    The updated string.
+         */
+        function str_ireplace( $search, $replace, $subject, $count = null ) {
+            if ( is_string( $search ) && is_array( $replace ) ) {
+                user_error( 'Array to string conversion', E_USER_NOTICE );
+                $replace = ( string ) $replace;
+            }
+            if ( ! is_array( $search ) ) {
+                $search = array( $search );
+            }
+            $search = array_values( $search );
+            if ( ! is_array( $replace ) ) {
+                $replace_string = $replace;
+                $replace = array();
+                for ( $i = 0, $c = count( $search ); $i < $c; $i++ ) {
+                    $replace[$i] = $replace_string;
+                }
+            }
+            $replace = array_values( $replace );
+            $length_replace = count( $replace );
+            $length_search = count( $search );
+            if ( $length_replace < $length_search ) {
+                for ( $i = $length_replace; $i < $length_search; $i++ ) {
+                    $replace[$i] = '';
+                }
+            }
+            $was_array = false;
+            if ( ! is_array( $subject ) ) {
+                $was_array = true;
+                $subject = array( $subject );
+            }
+            $count = 0;
+            foreach ( $subject as $subject_key => $subject_value ) {
+                foreach ( $search as $search_key => $search_value ) {
+                    $segments = explode( strtolower( $search_value ), strtolower( $subject_value ) );
+                    $count += count( $segments ) - 1;
+                    $pos = 0;
+                    foreach ( $segments as $segment_key => $segment_value ) {
+                        $segments[$segment_key] = substr( $subject_value, $pos, strlen( $segment_value ) );
+                        $pos += strlen( $segment_value ) + strlen( $search_value );
+                    }
+                    $subject_value = implode( $replace[$search_key], $segments );
+                }
+                $result[$subject_key] = $subject_value;
+            }
+            if ( $was_array === true ) {
+                return $result[0];
+            }
+            return $result;
+        }
+
+    }
+
     // Default the locale to English
     YDConfig::set( 'YD_LOCALE', 'en', false );
 



From pclaerhout at berlios.de  Wed Apr  5 12:06:19 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Wed, 5 Apr 2006 12:06:19 +0200
Subject: [ydf-devel] r1830 - YDFramework2.0/trunk/examples/weblog/skins/default
Message-ID: <200604051006.k35A6JuR011474@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-05 12:06:18 +0200 (Wed, 05 Apr 2006)
New Revision: 1830

Modified:
   YDFramework2.0/trunk/examples/weblog/skins/default/item.tpl
Log:
Fixed a small markup issue in the item template of the weblog application.

Modified: YDFramework2.0/trunk/examples/weblog/skins/default/item.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default/item.tpl	2006-04-05 10:05:56 UTC (rev 1829)
+++ YDFramework2.0/trunk/examples/weblog/skins/default/item.tpl	2006-04-05 10:06:18 UTC (rev 1830)
@@ -82,7 +82,7 @@
         <ol class="commentlist">
             {foreach from=$comments item="comment"}
                 <li class="{cycle values="alt,"}" id="comment-{$comment.id}">
-                    <a name="comment-{$comment.id}" />
+                    <a name="comment-{$comment.id}"></a>
                     <cite>
                         {if $comment.userwebsite}
                             <a href="{$comment.userwebsite}" rel="external nofollow" target="_blank">{$comment.username}</a>



From ximian at berlios.de  Wed Apr  5 16:09:38 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Wed, 5 Apr 2006 16:09:38 +0200
Subject: [ydf-devel] r1831 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604051409.k35E9cjB032581@sheep.berlios.de>

Author: ximian
Date: 2006-04-05 16:09:22 +0200 (Wed, 05 Apr 2006)
New Revision: 1831

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
Log:
new feature: YDForm::getErrors can return an array or a string and it's possible to, when returning an string, to define the separator and an initial string.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-04-05 10:06:18 UTC (rev 1830)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-04-05 14:09:22 UTC (rev 1831)
@@ -688,10 +688,24 @@
         /**
          *  This function returns all active error messages
          *
-         *  @returns    An array containing all active error messages
+         *  @param $asString  (Optional) Boolean value that defines if we want a string or an array
+         *
+         *  @param $separator  (Optional) String that separates all messages (used when we want errors as string)
+         *
+         *  @param $initial  (Optional) String to prepend to all messages (used when we want errors as string)
+         *
+         *  @returns    An array/string containing all active error messages
          */
-        function getErrors() {
-            return array_values( $this->_errors );
+        function getErrors( $asString = false, $separator = "\n", $initial = '' ) {
+
+            // get form errors
+            $errors = array_values( $this->_errors );
+
+            // if we want a string, we must implode with custom separator and use initial string
+            if ( $asString ) $errors = $initial . implode( $separator, $errors );
+
+            // return errors
+            return $errors;
         }
 
         /**



From ximian at berlios.de  Wed Apr  5 16:11:30 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Wed, 5 Apr 2006 16:11:30 +0200
Subject: [ydf-devel] r1832 - YDFramework2.0/trunk/examples/ajax
Message-ID: <200604051411.k35EBUMM000205@sheep.berlios.de>

Author: ximian
Date: 2006-04-05 16:11:13 +0200 (Wed, 05 Apr 2006)
New Revision: 1832

Modified:
   YDFramework2.0/trunk/examples/ajax/form.php
Log:
ported YDAjax form example to use new YDForm::getErrors method (with all possible arguments too).

Modified: YDFramework2.0/trunk/examples/ajax/form.php
===================================================================
--- YDFramework2.0/trunk/examples/ajax/form.php	2006-04-05 14:09:22 UTC (rev 1831)
+++ YDFramework2.0/trunk/examples/ajax/form.php	2006-04-05 14:11:13 UTC (rev 1832)
@@ -55,7 +55,7 @@
 
 			// if form is not valid, send errors to client side using an alert
 			if (!$this->form->validate( $formvalues ))
-				return YDAjax::message( implode( "\n", $this->form->getErrors() ) );
+				return YDAjax::message( $this->form->getErrors( true, "\n* ", "* " ) );
 
 			// assign span 'myspanresult' with form values and change 'mybutton' caption
 			$this->ajax->addResult( 'myspanresult',  $this->form->getValues() ) ;



From pclaerhout at berlios.de  Wed Apr  5 17:03:01 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Wed, 5 Apr 2006 17:03:01 +0200
Subject: [ydf-devel] r1833 - YDFramework2.0/trunk/examples/weblog
Message-ID: <200604051503.k35F31OP014416@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-05 17:03:01 +0200 (Wed, 05 Apr 2006)
New Revision: 1833

Added:
   YDFramework2.0/trunk/examples/weblog/robots.txt
Log:
Added a robots.txt file.

Added: YDFramework2.0/trunk/examples/weblog/robots.txt
===================================================================
--- YDFramework2.0/trunk/examples/weblog/robots.txt	2006-04-05 14:11:13 UTC (rev 1832)
+++ YDFramework2.0/trunk/examples/weblog/robots.txt	2006-04-05 15:03:01 UTC (rev 1833)
@@ -0,0 +1,5 @@
+User-agent: *
+Crawl-Delay: 10
+Disallow: /manage
+Disallow: /skins
+Disallow: /include
\ No newline at end of file



From ximian at berlios.de  Wed Apr  5 17:29:27 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Wed, 5 Apr 2006 17:29:27 +0200
Subject: [ydf-devel] r1834 - YDFramework2.0/trunk/YDFramework2/addons/YDAjax
Message-ID: <200604051529.k35FTRLI017177@sheep.berlios.de>

Author: ximian
Date: 2006-04-05 17:29:15 +0200 (Wed, 05 Apr 2006)
New Revision: 1834

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php
Log:
static method YDAjax::message can accept arrays (it will export it)

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php	2006-04-05 15:03:01 UTC (rev 1833)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php	2006-04-05 15:29:15 UTC (rev 1834)
@@ -800,13 +800,20 @@
         /**
          *	This method sends a ajax response message
          *
-         *	@param $message			Message to display.
+         *	@param $message			Message to display or array.
          */		
-		function message( $message ){
+		function message( $message = "YDAjax error"){
 
+			// create ajax response
 			$response = new YDAjaxResponse( YDConfig::get( 'YD_AJAX_ENCODING' ) );
+
+			// if message is an array we should export it
+			if ( is_array( $message ) ) $message = var_export( $message, true );
+
+			// add message to alert
 			$response->addAlert( $message );
 
+			// return response
 			return $response;
 		}
 



From ximian at berlios.de  Wed Apr  5 17:40:33 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Wed, 5 Apr 2006 17:40:33 +0200
Subject: [ydf-devel] r1835 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604051540.k35FeX59018346@sheep.berlios.de>

Author: ximian
Date: 2006-04-05 17:40:20 +0200 (Wed, 05 Apr 2006)
New Revision: 1835

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDUtil.php
Log:
added format "datetimesql" to YDStringUtil::formatDate

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDUtil.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDUtil.php	2006-04-05 15:29:15 UTC (rev 1834)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDUtil.php	2006-04-05 15:40:20 UTC (rev 1835)
@@ -538,6 +538,9 @@
             if ( strtolower( $format ) == 'datetime' ) {
                 $format = '%d %B %Y %H:%M';
             }
+            if ( strtolower( $format ) == 'datetimesql' ) {
+                $format = '%Y-%m-%d %H:%M:%S';
+            }
             if ( strtolower( $format ) == 'time' ) {
                 $format = '%H:%M';
             }



From ximian at berlios.de  Wed Apr  5 18:53:06 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Wed, 5 Apr 2006 18:53:06 +0200
Subject: [ydf-devel] r1836 - YDFramework2.0/trunk/examples/ajax
Message-ID: <200604051653.k35Gr6PB013977@sheep.berlios.de>

Author: ximian
Date: 2006-04-05 18:52:51 +0200 (Wed, 05 Apr 2006)
New Revision: 1836

Modified:
   YDFramework2.0/trunk/examples/ajax/general.tpl
   YDFramework2.0/trunk/examples/ajax/waiting.php
Log:
added a css style to general template. This will be used in the YDAjax waiting message example.

Modified: YDFramework2.0/trunk/examples/ajax/general.tpl
===================================================================
--- YDFramework2.0/trunk/examples/ajax/general.tpl	2006-04-05 15:40:20 UTC (rev 1835)
+++ YDFramework2.0/trunk/examples/ajax/general.tpl	2006-04-05 16:52:51 UTC (rev 1836)
@@ -1,6 +1,7 @@
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
 <html>
 <head><title></title>
+{literal}<style>.aaa{color:#FF0000;}</style>{/literal}
 </head>
 <body>
 <br />{$title}<br />

Modified: YDFramework2.0/trunk/examples/ajax/waiting.php
===================================================================
--- YDFramework2.0/trunk/examples/ajax/waiting.php	2006-04-05 15:40:20 UTC (rev 1835)
+++ YDFramework2.0/trunk/examples/ajax/waiting.php	2006-04-05 16:52:51 UTC (rev 1836)
@@ -37,7 +37,7 @@
 			$onHide  = new YDAjaxEffect('', 'opacity', "toggle()" );
 
 			// use waiting message with custom effects
-			$this->ajax->useWaitingMessage( "<h2>&nbsp; Please wait ... &nbsp;<\/h2>", array(), $onStart, $onShow, $onHide );
+			$this->ajax->useWaitingMessage( 'test<p class="aaa">test with class</p>', array(), $onStart, $onShow, $onHide );
 
 			// to use default waiting message just try:
 			// $this->ajax->useWaitingMessage();



From ximian at berlios.de  Wed Apr  5 23:42:25 2006
From: ximian at berlios.de (ximian at BerliOS)
Date: Wed, 5 Apr 2006 23:42:25 +0200
Subject: [ydf-devel] r1837 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604052142.k35LgPqZ001869@sheep.berlios.de>

Author: ximian
Date: 2006-04-05 23:42:24 +0200 (Wed, 05 Apr 2006)
New Revision: 1837

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php
Log:
new static method YDPath::getFreeSpace that returns the free disk space of a path

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php	2006-04-05 16:52:51 UTC (rev 1836)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php	2006-04-05 21:42:24 UTC (rev 1837)
@@ -197,6 +197,35 @@
         /**
          *	@param $path	Path of the file or directory.
          *
+         *	@param $format	(Optional) Boolean that defines if free space should be returned as bytes or formated
+         *
+         *	@param $decimals (Optional) Decimals to use when free space is formated
+         *
+         *	@returns	The number of bytes available on the specified path
+         *
+         *	@static
+         */
+        function getFreeSpace( $path, $format = false, $decimals = 1 ) {
+
+            // get free disk space on the path
+            $space = disk_free_space( $path );
+
+            // return number of bytes if we don't want to format
+            if ( $format == false ) return $space;
+
+            // include util lib
+            YDInclude( 'YDUtil.php' );
+
+            // return formated string
+            return YDStringUtil::formatFilesize( $space, $decimals );
+        }
+
+
+
+
+        /**
+         *	@param $path	Path of the file or directory.
+         *
          *	@returns	The extension of the specified path string
          *
          *	@static



From ximian at berlios.de  Wed Apr  5 23:48:23 2006
From: ximian at berlios.de (ximian at BerliOS)
Date: Wed, 5 Apr 2006 23:48:23 +0200
Subject: [ydf-devel] r1838 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604052148.k35LmNpm002497@sheep.berlios.de>

Author: ximian
Date: 2006-04-05 23:48:22 +0200 (Wed, 05 Apr 2006)
New Revision: 1838

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php
Log:
new YDFSFile::getFreeSpace and YDFSDirectory::getFreeSpace that returns the free disk space on the file path or directory path

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php	2006-04-05 21:42:24 UTC (rev 1837)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php	2006-04-05 21:48:22 UTC (rev 1838)
@@ -570,6 +570,18 @@
         }
 
         /**
+         *	@param $format	 (Optional) Boolean that defines if free space should be returned as bytes or formated
+         *	@param $decimals (Optional) Decimals to use when free space is formated
+         *
+         *	@returns	The number of bytes available
+         *
+         *	@static
+         */
+        function getFreeSpace( $format = false, $decimals = 1 ) {
+            return YDPath::getFreeSpace( $this->_path, $format, $decimals );
+        }
+
+        /**
          *	Function to get the contents of the file. Depending on the file contents, this will be returned as binary or
          *	textual data.
          *
@@ -1329,6 +1341,18 @@
         }
 
         /**
+         *	@param $format	 (Optional) Boolean that defines if free space should be returned as bytes or formated
+         *	@param $decimals (Optional) Decimals to use when free space is formated
+         *
+         *	@returns	The number of bytes available
+         *
+         *	@static
+         */
+        function getFreeSpace( $format = false, $decimals = 1 ) {
+            return YDPath::getFreeSpace( $this->_path, $format, $decimals );
+        }
+
+        /**
          *	This function will get a file list using a pattern. You can compare this function with the dir command from
          *	DOS or the ls command from Unix. The pattern syntax is the same as well.
          *



From ximian at berlios.de  Wed Apr  5 23:53:13 2006
From: ximian at berlios.de (ximian at BerliOS)
Date: Wed, 5 Apr 2006 23:53:13 +0200
Subject: [ydf-devel] r1839 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604052153.k35LrDD9002968@sheep.berlios.de>

Author: ximian
Date: 2006-04-05 23:53:13 +0200 (Wed, 05 Apr 2006)
New Revision: 1839

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php
Log:
added some missing comments to latest added methods

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php	2006-04-05 21:48:22 UTC (rev 1838)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php	2006-04-05 21:53:13 UTC (rev 1839)
@@ -570,6 +570,8 @@
         }
 
         /**
+         *  Returns the total free space on the partition where this directory lives
+         *
          *	@param $format	 (Optional) Boolean that defines if free space should be returned as bytes or formated
          *	@param $decimals (Optional) Decimals to use when free space is formated
          *
@@ -1341,6 +1343,8 @@
         }
 
         /**
+         *  Returns the total free space on the partition where this directory lives
+         *
          *	@param $format	 (Optional) Boolean that defines if free space should be returned as bytes or formated
          *	@param $decimals (Optional) Decimals to use when free space is formated
          *



From ximian at berlios.de  Thu Apr  6 00:02:35 2006
From: ximian at berlios.de (ximian at BerliOS)
Date: Thu, 6 Apr 2006 00:02:35 +0200
Subject: [ydf-devel] r1840 - in YDFramework2.0/trunk: YDFramework2/YDClasses examples
Message-ID: <200604052202.k35M2Zgr003928@sheep.berlios.de>

Author: ximian
Date: 2006-04-06 00:02:35 +0200 (Thu, 06 Apr 2006)
New Revision: 1840

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php
   YDFramework2.0/trunk/examples/fsdirectory.php
Log:
- added YDFSDirectory::getFreeSpace to directory example
- fixed a typo

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php	2006-04-05 21:53:13 UTC (rev 1839)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php	2006-04-05 22:02:35 UTC (rev 1840)
@@ -570,7 +570,7 @@
         }
 
         /**
-         *  Returns the total free space on the partition where this directory lives
+         *  Returns the total free space on the partition where this file lives
          *
          *	@param $format	 (Optional) Boolean that defines if free space should be returned as bytes or formated
          *	@param $decimals (Optional) Decimals to use when free space is formated

Modified: YDFramework2.0/trunk/examples/fsdirectory.php
===================================================================
--- YDFramework2.0/trunk/examples/fsdirectory.php	2006-04-05 21:53:13 UTC (rev 1839)
+++ YDFramework2.0/trunk/examples/fsdirectory.php	2006-04-05 22:02:35 UTC (rev 1840)
@@ -35,6 +35,7 @@
             YDDebugUtil::dump( $dir->getSize( true, true ), '$dir->getSize( true, true )' );
             YDDebugUtil::dump( $dir->getFileCount(), '$dir->getFileCount()' );
             YDDebugUtil::dump( $dir->getDirectoryCount(), '$dir->getDirectoryCount()' );
+            YDDebugUtil::dump( $dir->getFreeSpace(), '$dir->getFreeSpace()' );
 
             // All files in the directory
             YDDebugUtil::dump( $dir->getContents(), '$dir->getContents()' );



From ydfpoi at gmail.com  Thu Apr  6 09:20:24 2006
From: ydfpoi at gmail.com (ydf poi)
Date: Thu, 6 Apr 2006 09:20:24 +0200
Subject: [ydf-devel] Weblog comments syndication
Message-ID: <306340e00604060020u75f8d002je49446e68a1defe9@mail.gmail.com>

Hi Pieter,

When you syndicate for weblog comments (at least up to build 1780),
dynamic entries are not linked to "#comment-<id>" (as they should
imho) but only to "#comment".

I found also usefull to add the comment id after the comment title
(which is in fact the item title) to make a difference between
multiple comments for the same entry.

To fix the idea, I modified line 111 of weblog/xml.php:
$this->feed->addItem( $comment['item_title'], YDTplModLinkItem(
$comment['item_id'], '#comment-' ), YDTemplate_modifier_bbcode( $body
) );

to this:
$this->feed->addItem(
    $comment['item_title'] . " (" . $comment['id'] . ")",
    YDTplModLinkItem(
        $comment['item_id'],
        '#comment-' . $comment['id']
    ),
    YDTemplate_modifier_bbcode( $body )
);

Kind regards
--
po?


From ximian at berlios.de  Thu Apr  6 10:25:21 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Thu, 6 Apr 2006 10:25:21 +0200
Subject: [ydf-devel] r1841 - YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements
Message-ID: <200604060825.k368PLfL019197@sheep.berlios.de>

Author: ximian
Date: 2006-04-06 10:24:45 +0200 (Thu, 06 Apr 2006)
New Revision: 1841

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Span.php
Log:
removed duplicated slashes filter on span form element.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Span.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Span.php	2006-04-05 22:02:35 UTC (rev 1840)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Span.php	2006-04-06 08:24:45 UTC (rev 1841)
@@ -128,9 +128,6 @@
             // if result is an array we should export to a valid js string
             if (is_array( $result )) $result = str_replace( "\n", "<br>", var_export( $result, true ) ) ;
 
-            // escape string
-            $result = addslashes( $result );
-
             // assign result to form element using the id
             return 'document.getElementById("' . $this->getAttribute( 'id' ) . '").' . $attribute . ' = "' . $result . '";';
         }



From ximian at berlios.de  Thu Apr  6 13:20:33 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Thu, 6 Apr 2006 13:20:33 +0200
Subject: [ydf-devel] r1842 - YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump
Message-ID: <200604061120.k36BKX3L003395@sheep.berlios.de>

Author: ximian
Date: 2006-04-06 13:20:08 +0200 (Thu, 06 Apr 2006)
New Revision: 1842

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump/YDMysqlDump.php
Log:
new method YDMysqlDump::saveValid that checks if file can be written

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump/YDMysqlDump.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump/YDMysqlDump.php	2006-04-06 08:24:45 UTC (rev 1841)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDMysqlDump/YDMysqlDump.php	2006-04-06 11:20:08 UTC (rev 1842)
@@ -26,6 +26,10 @@
         die( 'Yellow Duck Framework is not loaded.' );
     }
 
+	// include filesystem functions
+	include_once( 'YDFileSystem.php' );
+
+
     /**
      *  This class defines a mySql backup/restore system object.
      */
@@ -277,6 +281,23 @@
         function getFilePath() {
             return $this->filepath;
         }
+
+        /**
+         *  This function checks if the backup file can be written on filesystem
+         *
+         *  @returns            1 if file saving can be ok. -1 if not writable, -2 if not free space
+         */
+        function saveValid() {
+
+			// ckeck if directory is writable on OSs different that windows
+			if ( strtoupper( substr( PHP_OS, 0, 3 ) ) != 'WIN' && !is_writable( $this->filepath ) ) return -1;
+
+			// check if has at least 2MB :)
+			if ( floatval( disk_free_space( dirname( $this->filepath ) ) ) - (2.0 * 1048576) < 0 ) return -2;
+
+			// filepath can have the db backup file
+			return 1;
+        }
       
         /**
          *  This function returns the string or the file with the database dump
@@ -325,9 +346,6 @@
                 return $content;
             }
             
-            // include filesystem functions
-            include_once( dirname( __FILE__ ) . '/../../YDClasses/YDFileSystem.php' );
-
             // create file object
             $file = new YDFSFile( $this->filepath, true );
             



From ximian at berlios.de  Fri Apr  7 15:40:36 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Fri, 7 Apr 2006 15:40:36 +0200
Subject: [ydf-devel] r1843 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604071340.k37DeaRX001169@sheep.berlios.de>

Author: ximian
Date: 2006-04-07 15:40:19 +0200 (Fri, 07 Apr 2006)
New Revision: 1843

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php
Log:
when we are in page 1 pagePrevious should be 0

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php	2006-04-06 11:20:08 UTC (rev 1842)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php	2006-04-07 13:40:19 UTC (rev 1843)
@@ -211,7 +211,7 @@
             $this->offset = $offset ? ( $this->pagesize * ( $this->page - 1 ) ) : 0;
             
             // Get the previous and next page
-            $this->pagePrevious = ( $this->page <= 1 ) ? false : $this->page - 1;
+            $this->pagePrevious = ( $this->page < 1 ) ? false : $this->page - 1;
             $this->pageNext = ( $this->page >= $this->totalPages ) ? false : $this->page + 1;
 
             // Indicate if we are on the last or first page



From ximian at berlios.de  Sat Apr  8 17:32:18 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sat, 8 Apr 2006 17:32:18 +0200
Subject: [ydf-devel] r1844 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604081532.k38FWI4r026425@sheep.berlios.de>

Author: ximian
Date: 2006-04-08 17:31:59 +0200 (Sat, 08 Apr 2006)
New Revision: 1844

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php
Log:
- fixed latest commit about YDRecordSet
- added a new config variable: YD_DB_RS_CYCLENAVIGATION. When TRUE we will get previous and next cycling, FALSE will stop that cycling.
  by default, YD_DB_RS_CYCLENAVIGATION is false


Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php	2006-04-07 13:40:19 UTC (rev 1843)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabase.php	2006-04-08 15:31:59 UTC (rev 1844)
@@ -39,6 +39,8 @@
     YDConfig::set( 'YD_DB_TABLEPREFIX', '', false );
     YDConfig::set( 'YD_DB_ALLOW_PERSISTENT_SORT', false, false );
 
+    YDConfig::set( 'YD_DB_RS_CYCLENAVIGATION', false, false );
+
     /**
      *  This class implements a (paged) recordset. It contains a lot of extra information about the recordset which is
      *  not available if you return the database results as an array. This object is really handy if you want to work
@@ -211,8 +213,8 @@
             $this->offset = $offset ? ( $this->pagesize * ( $this->page - 1 ) ) : 0;
             
             // Get the previous and next page
-            $this->pagePrevious = ( $this->page < 1 ) ? false : $this->page - 1;
-            $this->pageNext = ( $this->page >= $this->totalPages ) ? false : $this->page + 1;
+            $this->pagePrevious = ( $this->page <= 1 ) ? ( YDConfig::get( 'YD_DB_RS_CYCLENAVIGATION' ) ? $this->totalPages : 1 ) : $this->page - 1;
+            $this->pageNext = ( $this->page >= $this->totalPages ) ? ( YDConfig::get( 'YD_DB_RS_CYCLENAVIGATION' ) ? 1 : $this->totalPages ) : $this->page + 1;
 
             // Indicate if we are on the last or first page
             $this->isFirstPage = ( $this->pagePrevious == false ) ? true : false;



From ximian at berlios.de  Mon Apr 10 18:27:36 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 10 Apr 2006 18:27:36 +0200
Subject: [ydf-devel] r1845 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604101627.k3AGRaLF008885@sheep.berlios.de>

Author: ximian
Date: 2006-04-10 18:27:18 +0200 (Mon, 10 Apr 2006)
New Revision: 1845

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
Log:
ported YDDatabaseTree to new db instance

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-08 15:31:59 UTC (rev 1844)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-10 16:27:18 UTC (rev 1845)
@@ -38,18 +38,16 @@
         /**
          *  Constructor. Set the database table name and necessary field names
          *
-         *  @param $db             The YDDatabase object pointing to the database
+         *  @param $db             The YDDatabase instance name or object pointing to the database
          *  @param $table          Name of the tree database table
          *  @param $idField        (optional) Name of the primary key ID field. Default is id.
          *  @param $parentField    (optional) Name of the parent ID field. Default is parent_id.
          *  @param $sortField      (optional) Name of the field to sort data. Default is title.
          */
-        function YDDatabaseTree( $db=null, $table, $idField='id', $parentField='parent_id', $sortField='title' ) {
-            if ( is_null( $db ) ) {
-                $this->db = YDDatabase::getNamedInstance();
-            } else {
-                $this->db = $db;
-            }
+        function YDDatabaseTree( $db='default', $table, $idField='id', $parentField='parent_id', $sortField='title' ) {
+
+            $this->db = YDDatabase::getNamedInstance( $db );
+
             $this->table = $table;
             $this->fields = array(
                 'id' => $idField, 'parent' => $parentField, 'sort' => $sortField,



From ximian at berlios.de  Tue Apr 11 00:23:05 2006
From: ximian at berlios.de (ximian at BerliOS)
Date: Tue, 11 Apr 2006 00:23:05 +0200
Subject: [ydf-devel] r1846 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604102223.k3AMN5qR018430@sheep.berlios.de>

Author: ximian
Date: 2006-04-11 00:23:00 +0200 (Tue, 11 Apr 2006)
New Revision: 1846

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
Log:
added new method YDFormElement::delAttribute that deletes an attribute of a form element

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-04-10 16:27:18 UTC (rev 1845)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-04-10 22:23:00 UTC (rev 1846)
@@ -1340,6 +1340,16 @@
         function setAttribute( $key, $val ) {
             $this->_attributes[$key] = $val;
         }
+
+        /**
+         *  Function to delete an attribute of a form element
+         *
+         *  @param  $key    The name of the attribute
+         */
+        function delAttribute( $key ) {
+            if ( isset( $this->_attributes[$key] ) ) unset( $this->_attributes[$key] );
+        }
+
 		
         /**
          *  Function to set the option of a form element



From ximian at berlios.de  Tue Apr 11 00:30:59 2006
From: ximian at berlios.de (ximian at BerliOS)
Date: Tue, 11 Apr 2006 00:30:59 +0200
Subject: [ydf-devel] r1847 - in YDFramework2.0/trunk: YDFramework2/YDClasses/YDFormElements examples
Message-ID: <200604102230.k3AMUxGg019852@sheep.berlios.de>

Author: ximian
Date: 2006-04-11 00:30:57 +0200 (Tue, 11 Apr 2006)
New Revision: 1847

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_CheckboxGroup.php
   YDFramework2.0/trunk/examples/form_checkboxgroup.php
   YDFramework2.0/trunk/examples/form_checkboxgroup.tpl
Log:
on checkboxgroup it's now possible to use predefined structures ( take a look to example )

feature #2094

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_CheckboxGroup.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_CheckboxGroup.php	2006-04-10 22:23:00 UTC (rev 1846)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_CheckboxGroup.php	2006-04-10 22:30:57 UTC (rev 1847)
@@ -57,6 +57,9 @@
             foreach ( $options as $key=>$val ) {
                 $item = new YDFormElement_Checkbox( $form, $name . '[' . $key . ']', $val, $attributes, $options );
                 $this->_items[ $key ] = $item;
+
+                // delete attribute. otherwise we would get a 'sep' attribute in html
+                $item->delAttribute( 'sep' );
             }
 
             // Indicate if filters need to be applied
@@ -65,8 +68,21 @@
             // Indicate that the label should be appended
             $this->_placeLabel = 'before';
 
+            // set default separator and default position
+            $this->_separator = '<br />';
+            $this->_position  = 'right';
+
+            // parse separator and position from array
+            if ( isset ( $attributes['sep'] ) ) {
+
+                // find horizontal and left tags
+                if ( is_int( strpos( $attributes['sep'], 'h' ) ) ) $this->_separator = '&nbsp;&nbsp;&nbsp;';
+                if ( is_int( strpos( $attributes['sep'], 'l' ) ) ) $this->_position  = 'left';
+            }
+
         }
-        
+
+
         /**
          *      This function returns a boolean indicating if the element value was
          *      modified from it's default value.
@@ -126,12 +142,11 @@
 
             // Output the HTML
             $output = '';
-            foreach ( $this->_items as $item ) {
-                $output .= '<nowrap>' . $item->toHtml();
-                $output .= '&nbsp;<label for="' . $item->_attributes['id'] . '">' . $item->_label . '</label>';
-                $output .= '</nowrap>##ITEMSEP##';
-            }
-            $output = rtrim( $output, '##ITEMSEP##' );
+
+            foreach ( $this->_items as $item )
+                if ( $this->_position == 'right' ) $output .= $item->toHtml() . '&nbsp;<label for="' . $item->_attributes['id'] . '">' . $item->_label . '</label>' . $this->_separator;
+                else                               $output .= '<label for="' . $item->_attributes['id'] . '">' . $item->_label . '</label>&nbsp;' . $item->toHtml() . $this->_separator;
+
             return $output;
 
         }

Modified: YDFramework2.0/trunk/examples/form_checkboxgroup.php
===================================================================
--- YDFramework2.0/trunk/examples/form_checkboxgroup.php	2006-04-10 22:23:00 UTC (rev 1846)
+++ YDFramework2.0/trunk/examples/form_checkboxgroup.php	2006-04-10 22:30:57 UTC (rev 1847)
@@ -21,8 +21,16 @@
             // Create the form
             $form = new YDForm( 'form1' );
 
-            // Add the radiobutton
-            $form->addElement( 'checkboxgroup', 'choose_multiple', 'Choose multiple', array(), array( 0 => 'choice 1', 1 => 'choice 2' ) );
+            // Add the checkboxgroup
+            $form->addElement( 'checkboxgroup', 'choose_multiple',  'Choose multiple default',                       array(), array( 0 => 'choice 1', 1 => 'choice 2' ) );
+            $form->addElement( 'checkboxgroup', 'choose_multiple2', 'Choose multiple HORIZONTAL',       array('sep' => 'h' ), array( 0 => 'choice 1', 1 => 'choice 2' ) );
+            $form->addElement( 'checkboxgroup', 'choose_multiple3', 'Choose multiple VERTICAL',         array('sep' => 'v' ), array( 0 => 'choice 1', 1 => 'choice 2' ) );
+            $form->addElement( 'checkboxgroup', 'choose_multiple4', 'Choose multiple LEFT',             array('sep' => 'l' ), array( 0 => 'choice 1', 1 => 'choice 2' ) );
+            $form->addElement( 'checkboxgroup', 'choose_multiple5', 'Choose multiple RIGHT',            array('sep' => 'r' ), array( 0 => 'choice 1', 1 => 'choice 2' ) );
+            $form->addElement( 'checkboxgroup', 'choose_multiple6', 'Choose multiple VERTICAL LEFT',    array('sep' => 'vl'), array( 0 => 'choice 1', 1 => 'choice 2' ) );
+            $form->addElement( 'checkboxgroup', 'choose_multiple7', 'Choose multiple VERTICAL RIGHT',   array('sep' => 'vr'), array( 0 => 'choice 1', 1 => 'choice 2' ) );
+            $form->addElement( 'checkboxgroup', 'choose_multiple8', 'Choose multiple HORIZONTAL LEFT',  array('sep' => 'hl'), array( 0 => 'choice 1', 1 => 'choice 2' ) );
+            $form->addElement( 'checkboxgroup', 'choose_multiple9', 'Choose multiple HORIZONTAL RIGHT', array('sep' => 'hr'), array( 0 => 'choice 1', 1 => 'choice 2' ) );
 
             // Add the submit button
             $form->addElement( 'submit', 'btnSubmit', 'submit' );
@@ -39,7 +47,7 @@
             $tpl = new YDTemplate();
 
             // Add the form to the template
-            $tpl->assignForm ( 'form',$form );
+            $tpl->assign ( 'form', $form->toHTML() );
 
             // Display the template
             $tpl->display();

Modified: YDFramework2.0/trunk/examples/form_checkboxgroup.tpl
===================================================================
--- YDFramework2.0/trunk/examples/form_checkboxgroup.tpl	2006-04-10 22:23:00 UTC (rev 1846)
+++ YDFramework2.0/trunk/examples/form_checkboxgroup.tpl	2006-04-10 22:30:57 UTC (rev 1847)
@@ -1,5 +1 @@
-{$form.tag}
-    {$form.choose_multiple.html|@replace:'##ITEMSEP##':'<br/>'}
-    <br/>
-    {$form.btnSubmit.html}
-{$form.endtag}
+{$form}
\ No newline at end of file



From ximian at berlios.de  Tue Apr 11 00:49:30 2006
From: ximian at berlios.de (ximian at BerliOS)
Date: Tue, 11 Apr 2006 00:49:30 +0200
Subject: [ydf-devel] r1848 - in YDFramework2.0/trunk: YDFramework2/YDClasses/YDFormElements examples
Message-ID: <200604102249.k3AMnUwx027629@sheep.berlios.de>

Author: ximian
Date: 2006-04-11 00:49:11 +0200 (Tue, 11 Apr 2006)
New Revision: 1848

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_CheckboxGroup.php
   YDFramework2.0/trunk/examples/form_checkboxgroup.php
Log:
checkboxgroup can now accept custom html for separation too

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_CheckboxGroup.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_CheckboxGroup.php	2006-04-10 22:30:57 UTC (rev 1847)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_CheckboxGroup.php	2006-04-10 22:49:11 UTC (rev 1848)
@@ -80,6 +80,10 @@
                 if ( is_int( strpos( $attributes['sep'], 'l' ) ) ) $this->_position  = 'left';
             }
 
+			// we can even have a custom separator
+            if ( isset ( $attributes['separator'] ) )
+				$this->_separator = $attributes['separator'];
+
         }
 
 

Modified: YDFramework2.0/trunk/examples/form_checkboxgroup.php
===================================================================
--- YDFramework2.0/trunk/examples/form_checkboxgroup.php	2006-04-10 22:30:57 UTC (rev 1847)
+++ YDFramework2.0/trunk/examples/form_checkboxgroup.php	2006-04-10 22:49:11 UTC (rev 1848)
@@ -32,6 +32,10 @@
             $form->addElement( 'checkboxgroup', 'choose_multiple8', 'Choose multiple HORIZONTAL LEFT',  array('sep' => 'hl'), array( 0 => 'choice 1', 1 => 'choice 2' ) );
             $form->addElement( 'checkboxgroup', 'choose_multiple9', 'Choose multiple HORIZONTAL RIGHT', array('sep' => 'hr'), array( 0 => 'choice 1', 1 => 'choice 2' ) );
 
+            $form->addElement( 'checkboxgroup', 'choose_multiple10', 'Custom Separator "|"',                                                  array('separator' => '&nbsp;|&nbsp;'), array( 0 => 'choice 1', 1 => 'choice 2' ) );
+            $form->addElement( 'checkboxgroup', 'choose_multiple11', 'Custom Separator "XXX" and LEFT',           array('sep' => 'l', 'separator' => '&nbsp;&nbsp;XXX&nbsp;&nbsp;'), array( 0 => 'choice 1', 1 => 'choice 2' ) );
+            $form->addElement( 'checkboxgroup', 'choose_multiple12', 'Custom Separator "...", LEFT and VERTICAL',                   array('sep' => 'l', 'separator' => '...<br />'), array( 0 => 'choice 1', 1 => 'choice 2' ) );
+
             // Add the submit button
             $form->addElement( 'submit', 'btnSubmit', 'submit' );
 



From pclaerhout at berlios.de  Thu Apr 13 21:54:17 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Thu, 13 Apr 2006 21:54:17 +0200
Subject: [ydf-devel] r1849 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604131954.k3DJsHSG022113@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-13 21:53:58 +0200 (Thu, 13 Apr 2006)
New Revision: 1849

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
Log:
Adding a node now properly converts objects to arrays.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-10 22:49:11 UTC (rev 1848)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-13 19:53:58 UTC (rev 1849)
@@ -685,6 +685,9 @@
          */
         function addNode( $values, $parent_id=null ) {
 
+            // Convert the values from an ojbect to an array
+            $values = $this->_toNodeArray( $values );
+
             // Clear the cache
             $this->_clearCache();
 



From ximian at berlios.de  Sat Apr 15 18:20:04 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sat, 15 Apr 2006 18:20:04 +0200
Subject: [ydf-devel] r1850 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604151620.k3FGK44K002798@sheep.berlios.de>

Author: ximian
Date: 2006-04-15 18:19:45 +0200 (Sat, 15 Apr 2006)
New Revision: 1850

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
Log:
fixed deleteNode to support custom id field name

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-13 19:53:58 UTC (rev 1849)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-15 16:19:45 UTC (rev 1850)
@@ -748,7 +748,7 @@
             // Get the list of IDs to delete
             $nodes_to_delete = array();
             foreach ( $children as $child ) {
-                array_push( $nodes_to_delete, $child['id'] );
+                array_push( $nodes_to_delete, $child[ $this->fields['id'] ] );
             }
 
             // Add the current node
@@ -758,7 +758,7 @@
             if ( sizeof( $nodes_to_delete ) > 0 ) {
 
                 // The query to execute
-                $query = 'delete from ' . $this->table . ' where id in ( ' . join( ', ', $nodes_to_delete ) . ' )';
+                $query = 'delete from ' . $this->table . ' where ' . $this->fields['id'] . ' in ( ' . join( ', ', $nodes_to_delete ) . ' )';
 
                 // Delete the nodes
                 $this->db->executeSql( $query );



From ximian at berlios.de  Sat Apr 15 20:43:41 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sat, 15 Apr 2006 20:43:41 +0200
Subject: [ydf-devel] r1851 - YDFramework2.0/trunk/YDFramework2/addons/YDAjax
Message-ID: <200604151843.k3FIhfc7031508@sheep.berlios.de>

Author: ximian
Date: 2006-04-15 20:43:12 +0200 (Sat, 15 Apr 2006)
New Revision: 1851

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php
Log:
fixed YDAjax. forms can now be used in addEvent with other arguments

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php	2006-04-15 16:19:45 UTC (rev 1850)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php	2006-04-15 18:43:12 UTC (rev 1851)
@@ -68,7 +68,7 @@
 
             // Setup the module
             $this->_author = 'Francisco Azevedo';
-            $this->_version = '2.8b';
+            $this->_version = '2.81b';
             $this->_copyright = '(c) Copyright 2002-2006 Francisco Azevedo';
             $this->_description = 'This class makes ajax easy for YDF developers';
 
@@ -497,9 +497,6 @@
 			// if there are not arguments return empty string
 			if ( is_null( $arguments ) ) return "";
 
-			// if is one argument and it's a form name, we want the form values
-			if ( is_string( $arguments ) && $this->__isForm( $arguments ) ) return "xajax.getFormValues('" . $arguments . "')";
-
 			// if there's only one argument or option, create arrays
 			if ( !is_array( $arguments ) ) $arguments = array( $arguments );
 			if ( !is_array( $options ) )   $options   = array( $options );
@@ -510,6 +507,9 @@
 			// cycle arguments to create js function to get values
 			foreach ( $arguments as $arg ){
 
+				// if is a string and it's a form name, we want the form values
+				if ( is_string( $arg ) && $this->__isForm( $arg ) ) { $args[] = "xajax.getFormValues('" . $arg . "')"; continue; }
+
 				// if argument is numeric just add it and continue
 				if ( is_numeric( $arg ) ) { $args[] = $arg; continue; }
 					



From pclaerhout at berlios.de  Mon Apr 17 18:03:18 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Mon, 17 Apr 2006 18:03:18 +0200
Subject: [ydf-devel] r1852 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604171603.k3HG3IjM030803@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-17 18:03:17 +0200 (Mon, 17 Apr 2006)
New Revision: 1852

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDTemplate.php
Log:
Fixed an error message in the PHP template class.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDTemplate.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDTemplate.php	2006-04-15 18:43:12 UTC (rev 1851)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDTemplate.php	2006-04-17 16:03:17 UTC (rev 1852)
@@ -483,7 +483,7 @@
                     $tplName = rtrim( $this->template_dir, '/\\' ) . '/' . $file;
                 }
                 if ( ! is_file( $tplName ) ) {
-                    trigger_error( 'Template not found: ' . $tplName, YD_ERROR );
+                    trigger_error( 'Template not found: ' . $file, YD_ERROR );
                 }
                 return $tplName;
             }



From pclaerhout at berlios.de  Mon Apr 17 18:12:17 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Mon, 17 Apr 2006 18:12:17 +0200
Subject: [ydf-devel] r1853 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604171612.k3HGCHJF031561@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-17 18:12:17 +0200 (Mon, 17 Apr 2006)
New Revision: 1853

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDUtil.php
Log:
Added YDBrowserInfo::getComputerName().

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDUtil.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDUtil.php	2006-04-17 16:03:17 UTC (rev 1852)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDUtil.php	2006-04-17 16:12:17 UTC (rev 1853)
@@ -862,6 +862,17 @@
         }
 
         /**
+         *  Get the hostname of the client computer.
+         *
+         *  @returns The hostname of the client computer in lowercase.
+         *
+         *  @static
+         */
+        function getComputerName() {
+            return strtolower( gethostbyaddr( $_SERVER['REMOTE_ADDR'] ) );
+        }
+
+        /**
          *	This function returns an array with the languages that are supported by the browser. This is done by using
          *	the HTTP_ACCEPT_LANGUAGE server variable that gets send with the HTTP headers.
          *



From pclaerhout at berlios.de  Tue Apr 18 14:49:08 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Tue, 18 Apr 2006 14:49:08 +0200
Subject: [ydf-devel] r1854 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604181249.k3ICn89p031611@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-18 14:48:49 +0200 (Tue, 18 Apr 2006)
New Revision: 1854

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
Log:
Added support for ordering the return values of YDDatabaseTree::getChildren.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-17 16:12:17 UTC (rev 1853)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-18 12:48:49 UTC (rev 1854)
@@ -232,10 +232,11 @@
          *  @param $childrenOnly    (optional) True if only returning children data. False if returning all descendant
          *                          data.
          *  @param $max_level       (optional) Maximum level to retrieve. Default is all.
+         *  @param $order           (optional) The order of the records to return.
          *
          *  @returns The descendants of the passed now
          */
-        function getDescendants( $id=0, $includeSelf=false, $childrenOnly=false, $max_level=null ) {
+        function getDescendants( $id=0, $includeSelf=false, $childrenOnly=false, $max_level=null, $order=null ) {
 
             // Get the ID field
             $idField = $this->fields['id'];
@@ -254,19 +255,26 @@
                 $parent_id = $node[$idField];
             }
 
+            // Get the order
+            if ( empty( $order ) ) {
+                $order = 'order by nleft';
+            } else {
+                $order = 'order by ' . $order . ', nleft';
+            }
+
             // Children only
             if ( $childrenOnly ) {
 
                 // Include ourselves?
                 if ( $includeSelf ) {
                     $query = sprintf(
-                        'select %s from %s where %s = %d or %s = %d order by nleft',
-                        $this->_getFieldsAsString(), $this->table, $this->fields['id'], $parent_id, $this->fields['parent'], $parent_id
+                        'select %s from %s where %s = %d or %s = %d %s',
+                        $this->_getFieldsAsString(), $this->table, $this->fields['id'], $parent_id, $this->fields['parent'], $parent_id, $order
                     );
                 } else {
                     $query = sprintf(
-                        'select %s from %s where %s = %d order by nleft',
-                        $this->_getFieldsAsString(), $this->table, $this->fields['parent'], $parent_id
+                        'select %s from %s where %s = %d %s',
+                        $this->_getFieldsAsString(), $this->table, $this->fields['parent'], $parent_id, $order
                     );
                 }
 
@@ -275,16 +283,16 @@
                 // Include all
                 if ( $nleft > 0 && $includeSelf ) {
                     $query = sprintf(
-                        'select %s from %s where nleft >= %d and nright <= %d order by nleft',
-                         $this->_getFieldsAsString(), $this->table, $nleft, $nright
+                        'select %s from %s where nleft >= %d and nright <= %d %s',
+                         $this->_getFieldsAsString(), $this->table, $nleft, $nright, $order
                     );
                 } else if ( $nleft > 0 ) {
                     $query = sprintf(
-                        'select %s from %s where nleft > %d and nright < %d order by nleft',
-                        $this->_getFieldsAsString(), $this->table, $nleft, $nright
+                        'select %s from %s where nleft > %d and nright < %d %s',
+                        $this->_getFieldsAsString(), $this->table, $nleft, $nright, $order
                     );
                 } else {
-                    $query = sprintf( 'select %s from %s where id > 0 order by nleft', $this->_getFieldsAsString(), $this->table );
+                    $query = sprintf( 'select %s from %s where id > 0 %s', $this->_getFieldsAsString(), $this->table, $order );
                 }
                 
             }
@@ -315,11 +323,12 @@
          *
          *  @param $id             (optional) The ID of the node to fetch child data for.
          *  @param $includeSelf    (optional) Whether or not to include the passed node in the the results.
+         *  @param $order          (optional) The order of the records to return.
          *
          *  @returns The children of the passed node
          */
-        function getChildren( $id=0, $includeSelf=false ) {
-            return $this->getDescendants( $id, $includeSelf, true );
+        function getChildren( $id=0, $includeSelf=false, $order=null ) {
+            return $this->getDescendants( $id, $includeSelf, true, null, $order );
         }
 
         /**



From pclaerhout at berlios.de  Tue Apr 18 14:52:44 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Tue, 18 Apr 2006 14:52:44 +0200
Subject: [ydf-devel] r1855 - in YDFramework2.0/trunk/examples: . cms cms/includes cms/includes/config cms/modules cms/modules/ydcmfhome cms/skins
Message-ID: <200604181252.k3ICqijA000354@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-18 14:52:41 +0200 (Tue, 18 Apr 2006)
New Revision: 1855

Added:
   YDFramework2.0/trunk/examples/cms/
   YDFramework2.0/trunk/examples/cms/.htaccess
   YDFramework2.0/trunk/examples/cms/admin.php
   YDFramework2.0/trunk/examples/cms/includes/
   YDFramework2.0/trunk/examples/cms/includes/YDCmfContentStore.php
   YDFramework2.0/trunk/examples/cms/includes/YDCmfContentStoreInstaller.php
   YDFramework2.0/trunk/examples/cms/includes/YDCmfInit.php
   YDFramework2.0/trunk/examples/cms/includes/config/
   YDFramework2.0/trunk/examples/cms/includes/config/config.php
   YDFramework2.0/trunk/examples/cms/includes/ydcmfcontentnode.tpl
   YDFramework2.0/trunk/examples/cms/index.php
   YDFramework2.0/trunk/examples/cms/modules/
   YDFramework2.0/trunk/examples/cms/modules/ydcmfhome/
   YDFramework2.0/trunk/examples/cms/modules/ydcmfhome/ydcmfhome.php
   YDFramework2.0/trunk/examples/cms/modules/ydcmfhome/ydcmfhome.tpl
   YDFramework2.0/trunk/examples/cms/skins/
   YDFramework2.0/trunk/examples/cms/skins/default/
Log:
Added very first alpha of something that should grow into a CMS system.

Added: YDFramework2.0/trunk/examples/cms/.htaccess
===================================================================
--- YDFramework2.0/trunk/examples/cms/.htaccess	2006-04-18 12:48:49 UTC (rev 1854)
+++ YDFramework2.0/trunk/examples/cms/.htaccess	2006-04-18 12:52:41 UTC (rev 1855)
@@ -0,0 +1,12 @@
+# Disallow directory browsing
+Options -Indexes
+
+# Remap all requests to index.php, except for:
+# - index.php
+# - admin.php
+# - images
+# - robots.txt
+# - uploads
+RewriteEngine on
+RewriteCond $1 !^(admin\.php|index\.php|images|robots\.txt|uploads)
+RewriteRule ^(.*).html index.php\?q=$1 [L,QSA]

Added: YDFramework2.0/trunk/examples/cms/admin.php
===================================================================
--- YDFramework2.0/trunk/examples/cms/admin.php	2006-04-18 12:48:49 UTC (rev 1854)
+++ YDFramework2.0/trunk/examples/cms/admin.php	2006-04-18 12:52:41 UTC (rev 1855)
@@ -0,0 +1 @@
+admin.php
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/cms/includes/YDCmfContentStore.php
===================================================================
--- YDFramework2.0/trunk/examples/cms/includes/YDCmfContentStore.php	2006-04-18 12:48:49 UTC (rev 1854)
+++ YDFramework2.0/trunk/examples/cms/includes/YDCmfContentStore.php	2006-04-18 12:52:41 UTC (rev 1855)
@@ -0,0 +1,111 @@
+<?php
+
+    // Class definition
+    class YDCmfContentStore extends YDDatabaseTree {
+
+        // Class constructor
+        function YDCmfContentStore( $db, $table ) {
+
+            // Publish the variables
+            $this->db      = & $db;
+            $this->table   =   $table;
+
+            // The field definitions
+            $this->field_id         = 'id';
+            $this->field_parent_id  = 'parent_id';
+            $this->field_sort       = 'name';
+            $this->default_obj_type = 'YDCmfContentNode';
+
+            // Get the list of supported language codes
+            $this->languages = YDCmfLanguage::getSupportedLanguages();
+
+            // Get the tree
+            $this->YDDatabaseTree(
+                $this->db, $this->table, $this->field_id, $this->field_parent_id, $this->field_sort
+            );
+
+            // Add the title fields
+            foreach ( array_values( $this->languages ) as $language ) {
+                $this->addField( 'title_' . $language );
+            }
+
+            // Add the property fields
+            foreach ( range( 0, 10 ) as $i ) {
+                foreach ( array_values( $this->languages ) as $language ) {
+                    $this->addField( 'property_' . $i . '_' . $language );
+                }
+            }
+
+            // Add the generic fields
+            $this->addFields(
+                array( 'created', 'created_by', 'modified', 'modified_by', 'content_type', 'can_delete' )
+            );
+
+            // Initialize the store
+            if ( ! defined( 'YD_CMS_STORE_INITIALIZED' ) ) {
+                $this->init();
+            }
+
+        }
+
+        // Init the database store
+        function init() {
+
+            // Only install if we are running in debug mode
+            if ( YDConfig::get( 'YD_DEBUG', 0 ) > 0 ) {
+                include_once( dirname( __FILE__ ) . '/YDCmfContentStoreInstaller.php' );
+            }
+
+            // Indicate that we are initialized
+            @ define( 'YD_CMS_STORE_INITIALIZED', 1 );
+
+        }
+
+        // Convert a node to an object
+        function _fromNodeArray( $node ) {
+
+            // Return false if no node is found
+            if ( ! $node ) {
+                return $node;
+            }
+
+            // Fix some fields
+            $content_type = strtolower( $node['content_type'] );
+
+            // Include the right file
+            if ( $content_type != 'ydcmfcontentnode' ) {
+
+                // Get the module file to include
+                $file = YDCMS_DIR_MOD . '/' . $content_type . '/' . $content_type . '.php';
+
+                // Check if the file exists
+                if ( ! file_exists( $file ) ) {
+                    trigger_error( 'Module not found: ' . $content_type, YD_ERROR );
+                }
+
+                // Include the module file
+                include_once( $file );
+
+            }
+
+            // Create the object
+            $obj = new $content_type();
+
+            // Initialize the object
+            $obj->fromArray( $node );
+
+            // Return the object
+            return $obj;
+
+        }
+
+        // Convert an object to an array
+        function _toNodeArray( $node ) {
+            $node->touch();
+            return $node->toArray();
+        }
+
+
+    }
+
+?>

Added: YDFramework2.0/trunk/examples/cms/includes/YDCmfContentStoreInstaller.php
===================================================================
--- YDFramework2.0/trunk/examples/cms/includes/YDCmfContentStoreInstaller.php	2006-04-18 12:48:49 UTC (rev 1854)
+++ YDFramework2.0/trunk/examples/cms/includes/YDCmfContentStoreInstaller.php	2006-04-18 12:52:41 UTC (rev 1855)
@@ -0,0 +1,159 @@
+<?php
+
+    // Include the YDDatabaseMetaData class
+    include_once( YD_DIR_HOME_CLS . '/YDDatabaseMetaData.php' );
+
+    // Get the metadata object
+    $meta = new YDDatabaseMetaData( $this->db );
+
+    // Get the list of tables in the database
+    $tables = $meta->getTables();
+
+    // Install the categories table
+    if ( ! in_array( 'categories', $tables ) ) {
+
+        // The SQL to create the categories table
+        $sql  = 'CREATE TABLE categories ( ' . YD_CRLF;
+        $sql .= '  id int(11) NOT NULL auto_increment, ' . YD_CRLF;
+        foreach ( array_values( $this->languages ) as $language ) {
+            $sql .= sprintf( '  category_%s longtext NOT NULL, ', $language ) . YD_CRLF;
+        }
+        $sql .= '  PRIMARY KEY (id)' . YD_CRLF;
+        $sql .= ');';
+
+        // Create the table
+        $this->db->executeSql( $sql );
+
+    }
+
+    // If we don't have the table, create it
+    if ( ! in_array( $this->table, $tables ) ) {
+
+        // SQL to create the table
+        $sql  = sprintf( 'CREATE TABLE %s ( ', $this->table ) . YD_CRLF;
+        $sql .= sprintf( '  %s int(11) NOT NULL auto_increment, ', $this->field_id ) . YD_CRLF;
+        $sql .= sprintf( '  %s int(11) NOT NULL default \'0\', ', $this->field_parent_id ) . YD_CRLF;
+        $sql .= sprintf( '  %s varchar(255) NOT NULL default \'\', ', $this->field_sort ) . YD_CRLF;
+        $sql .= sprintf( '  nleft int(11) NOT NULL default \'0\', ' ) . YD_CRLF;
+        $sql .= sprintf( '  nright int(11) NOT NULL default \'0\', ' ) . YD_CRLF;
+        $sql .= sprintf( '  nlevel int(11) NOT NULL default \'0\', ' ) . YD_CRLF;
+        $sql .= sprintf( '  created int(11) NOT NULL default \'0\', ' ) . YD_CRLF;
+        $sql .= sprintf( '  created_by varchar( 255 ) NOT NULL default \'\', ' ) . YD_CRLF;
+        $sql .= sprintf( '  modified int(11) NOT NULL default \'0\', ' ) . YD_CRLF;
+        $sql .= sprintf( '  modified_by varchar( 255 ) NOT NULL default \'\', ' ) . YD_CRLF;
+        $sql .= sprintf( '  content_type varchar( 255 ) NOT NULL default \'%s\', ', $this->default_obj_type ) . YD_CRLF;
+        $sql .= sprintf( '  can_delete tinyint( 1 ) NOT NULL default \'1\', ' ) . YD_CRLF;
+
+        // Add the title fields
+        foreach ( array_values( $this->languages ) as $language ) {
+            $sql .= sprintf( '  title_%s longtext NOT NULL, ', $language ) . YD_CRLF;
+        }
+
+        // Add the property fields
+        foreach ( $this->fields as $field ) {
+            if ( YDStringUtil::startsWith( $field, 'property_' ) ) {
+                $sql .= sprintf( '  %s longtext NULL, ', $field ) . YD_CRLF;
+            }
+        }
+
+        // Add the indexes
+        $sql .= sprintf( '  PRIMARY KEY (%s), ', $this->field_id ) . YD_CRLF;
+        $sql .= sprintf( '  KEY %s_%s (%s), ', $this->table, $this->field_parent_id, $this->field_parent_id ) . YD_CRLF;
+        $sql .= sprintf( '  KEY %s_nleft (nleft), ', $this->table ) . YD_CRLF;
+        $sql .= sprintf( '  KEY %s_nright (nright), ', $this->table ) . YD_CRLF;
+        $sql .= sprintf( '  KEY %s_nlevel (nlevel), ', $this->table ) . YD_CRLF;
+        $sql .= sprintf( '  KEY %s_content_type (content_type), ', $this->table ) . YD_CRLF;
+        $sql .= sprintf( '  KEY %s_can_delete (can_delete), ', $this->table ) . YD_CRLF;
+        $sql .= sprintf( '  UNIQUE KEY %s_%s (%s) ', $this->table, $this->field_sort, $this->field_sort ) . YD_CRLF;
+        $sql .= ');';
+
+        // Create the table
+        $this->db->executeSql( $sql );
+
+    }
+
+    // Empty the table
+    $this->db->executeSql( 'DELETE FROM ' . $this->table );
+
+    // Create a new node
+    $node = new YDCmfContentNode();
+    $node->setValue( 'id',              1 );
+    $node->setValue( 'parent_id',       0 );
+    $node->setValue( 'name',            'home' );
+    $node->setValue( 'title',           'Titel Nederlands', 'nl' );
+    $node->setValue( 'title',           'Title English', 'en' );
+    $node->setValue( 'title',           'Titre Fran&ccedil;ais', 'fr' );
+    $node->setValue( 'property',        'Property Nederlands', 'nl' );
+    $node->setValue( 'property',        'Property English', 'en' );
+    $node->setValue( 'property',        'Property Fran&ccedil;ais', 'fr' );
+    $node->setValue( 'property_other',  'Property1' );
+
+    // Add it to the store
+    $this->addNode( $node );
+
+    // Create a new node
+    include( YDCMS_DIR_MOD . '/ydcmfhome/ydcmfhome.php' );
+    $node = new YDCmfHome();
+    $node->setValue( 'id',              2 );
+    $node->setValue( 'parent_id',       1 );
+    $node->setValue( 'name',            'home2' );
+    $node->setValue( 'title',           'Titel2 Nederlands', 'nl' );
+    $node->setValue( 'title',           'Title2 English', 'en' );
+    $node->setValue( 'title',           'Titre2 Fran&ccedil;ais', 'fr' );
+    $node->setValue( 'property',        'Property2 Nederlands', 'nl' );
+    $node->setValue( 'property',        'Property2 English', 'en' );
+    $node->setValue( 'property',        'Property2 Fran&ccedil;ais', 'fr' );
+    $node->setValue( 'property_other',  'Property21' );
+
+    // Add it to the store
+    $this->addNode( $node );
+
+    // Create a new node
+    $node = new YDCmfHome();
+    $node->setValue( 'id',              3 );
+    $node->setValue( 'parent_id',       1 );
+    $node->setValue( 'name',            'news' );
+    $node->setValue( 'title',           'News Nederlands', 'nl' );
+    $node->setValue( 'title',           'News English', 'en' );
+    $node->setValue( 'title',           'News Fran&ccedil;ais', 'fr' );
+    $node->setValue( 'property',        'Property Nederlands', 'nl' );
+    $node->setValue( 'property',        'Property English', 'en' );
+    $node->setValue( 'property',        'Property Fran&ccedil;ais', 'fr' );
+    $node->setValue( 'property_other',  'Property1' );
+
+    // Add it to the store
+    $this->addNode( $node );
+
+    // Create a new node
+    $node = new YDCmfHome();
+    $node->setValue( 'id',              4 );
+    $node->setValue( 'parent_id',       3 );
+    $node->setValue( 'name',            'news/20060417_krabrally_2006' );
+    $node->setValue( 'title',           'News Krabrally 2006 Nederlands', 'nl' );
+    $node->setValue( 'title',           'News Krabrally 2006 English', 'en' );
+    $node->setValue( 'title',           'News Krabrally 2006 Fran&ccedil;ais', 'fr' );
+    $node->setValue( 'property',        'Property Nederlands', 'nl' );
+    $node->setValue( 'property',        'Property English', 'en' );
+    $node->setValue( 'property',        'Property Fran&ccedil;ais', 'fr' );
+    $node->setValue( 'property_other',  'Property1' );
+
+    // Add it to the store
+    $this->addNode( $node );
+
+    // Create a new node
+    $node = new YDCmfHome();
+    $node->setValue( 'id',              5 );
+    $node->setValue( 'parent_id',       3 );
+    $node->setValue( 'name',            'news/20060418_krabrally_2007' );
+    $node->setValue( 'title',           'News Krabrally 2007 Nederlands', 'nl' );
+    $node->setValue( 'title',           'News Krabrally 2007 English', 'en' );
+    $node->setValue( 'title',           'News Krabrally 2007 Fran&ccedil;ais', 'fr' );
+    $node->setValue( 'property',        'Property Nederlands', 'nl' );
+    $node->setValue( 'property',        'Property English', 'en' );
+    $node->setValue( 'property',        'Property Fran&ccedil;ais', 'fr' );
+    $node->setValue( 'property_other',  'Property1' );
+
+    // Add it to the store
+    $this->addNode( $node );
+
+?>

Added: YDFramework2.0/trunk/examples/cms/includes/YDCmfInit.php
===================================================================
--- YDFramework2.0/trunk/examples/cms/includes/YDCmfInit.php	2006-04-18 12:48:49 UTC (rev 1854)
+++ YDFramework2.0/trunk/examples/cms/includes/YDCmfInit.php	2006-04-18 12:52:41 UTC (rev 1855)
@@ -0,0 +1,472 @@
+<?php
+
+    // Initialize the Yellow Duck Framework
+    require_once( dirname( __FILE__ ) . '/../../../YDFramework2/YDF2_init.php' );
+
+    // Configure the template class
+    YDConfig::set( 'YD_TEMPLATE_ENGINE', 'php' );
+
+    // General constants
+    @define( 'YDCMS_CONFIG_FILENAME', 'config' );
+    @define( 'YDCMS_DIR_MOD',         rtrim( realpath( dirname( __FILE__ ) . '/../modules' ), '/' ) );
+    @define( 'YDCMS_DIR_SKIN',        rtrim( realpath( dirname( __FILE__ ) . '/../skins/default' ), '/' ) );
+    @define( 'YDCMS_REQ_EXT',         '.html' );
+
+    // Includes
+    include_once( YD_DIR_HOME_CLS . '/YDUrl.php' );
+    include_once( YD_DIR_HOME_CLS . '/YDForm.php' );
+    include_once( YD_DIR_HOME_CLS . '/YDRequest.php' );
+    include_once( YD_DIR_HOME_CLS . '/YDDatabase.php' );
+    include_once( YD_DIR_HOME_CLS . '/YDDatabaseTree.php' );
+    include_once( YD_DIR_HOME_CLS . '/YDTemplate.php' );
+
+    // CMF Includes
+    include_once( dirname( __FILE__ ) . '/YDCmfContentStore.php' );
+
+    // Get the list of possible config files
+    $config_files = array(
+        dirname( __FILE__ ) . '/' . YDCMS_CONFIG_FILENAME . '/' . YDCMS_CONFIG_FILENAME . '_' . $_SERVER['SERVER_NAME'] . '.php',
+        dirname( __FILE__ ) . '/' . YDCMS_CONFIG_FILENAME . '/' . YDCMS_CONFIG_FILENAME . '.php'
+    );
+
+    // Include the right configuration file
+    foreach ( $config_files as $config_file ) {
+        if ( file_exists( $config_file ) ) {
+            include_once( $config_file );
+            break;
+        }
+    }
+
+    // Global variables
+    $GLOBALS['CMS_DB'] = YDDatabase::getInstance(
+        YDConfig::get( 'DB_TYPE' ), YDConfig::get( 'DB_NAME' ), YDConfig::get( 'DB_USER' ),
+        YDConfig::get( 'DB_PASS' ), YDConfig::get( 'DB_HOST' )
+    );
+
+    // The language class
+    class YDCmfLanguage {
+
+        // Get the current language
+        function getLanguage() {
+
+            // Get the browser object
+            $browser = new YDBrowserInfo();
+
+            // Negotiate with the browser
+            $language = $browser->getLanguage( YDCmfLanguage::getServerLanguages() );
+
+            // Check if the language was specified by means of a cookie
+
+            // Allow it to override from the query string
+            $language_qs = strtolower( YDRequest::getQueryStringParameter( 'lang', null ) );
+            if ( ! is_null( $language_qs ) && in_array( $language_qs, YDCmfLanguage::getServerLanguages() ) ) {
+                $language = $language_qs;
+            }
+
+            // Return the language
+            return $language;
+
+        }
+
+        // Get the proper languages
+        function getPossibleLanguages() {
+            $browser = new YDBrowserInfo();
+            $languages = $browser->getBrowserLanguages();
+            foreach ( $languages as $key => $language ) {
+                if ( ! in_array( $language, YDCmfLanguage::getServerLanguages() ) ) {
+                    unset( $languages[ $key ] );
+                }
+            }
+            return $languages;
+        }
+
+        // Get the list of backup languages
+        function getBackupLanguages() {
+            $language  = YDCmfLanguage::getLanguage();
+            $languages = YDCmfLanguage::getPossibleLanguages();
+            foreach ( $languages as $key => $val ) {
+                if ( strcasecmp( $val, $language ) === 0 ) {
+                    unset( $languages[$key] );
+                }
+            }
+            array_unshift( $languages, $language );
+            return $languages;
+        }
+
+        // Get the list of supported languages
+        function getSupportedLanguages() {
+            return YDConfig::get( 'supported_languages', array( 'English' => 'en' ) );
+        }
+
+        // Get the list of server languages
+        function getServerLanguages() {
+            return array_values( YDCmfLanguage::getSupportedLanguages() );
+        }
+
+    }
+
+    // CMF Request
+    class YDCmfRequest extends YDRequest {
+
+        // Class constructor
+        function YDCmfRequest() {
+
+            // Initialize the parent
+            $this->YDRequest();
+
+            // Get the database connection
+            $this->db = & $GLOBALS['CMS_DB'];
+
+            // Get the content store
+            $this->store = new YDCmfContentStore( $GLOBALS['CMS_DB'], 'content' );
+
+        }
+
+        // Default action
+        function actionDefault() {
+
+            // Get the ID of the item we need to retrieve
+            $query = trim( $this->getQueryStringParameter( 'q' ), '/' );
+
+            // Check if we need to show the default or not
+            if ( empty( $query ) ) {
+                $query = '1';
+            }
+
+            // Split it up
+            $query = explode( '/', $query );
+
+            // Get the language from the query string
+            if ( isset( $_GET['lang'] ) && ! in_array( $_GET['lang'], YDCmfLanguage::getServerLanguages() ) ) {
+                unset( $_GET['lang'] );
+            }
+
+            // Set the default action if needed
+            if ( ! isset( $_GET['action'] ) || empty( $_GET['action'] ) ) {
+                $_GET['action'] = 'default';
+            }
+
+            // Recompose the query string
+            $query = implode( '/', $query );
+
+            // Get the node from the store
+            if ( is_numeric( $query ) ) {
+                $node = $this->store->getNode( $query );
+            } else {
+                $node = $this->store->getNode( $query, 'name' );
+            }
+
+            // Check if the node is found
+            if ( ! $node ) {
+                trigger_error( 'Node not found: ' . $query, YD_ERROR );
+            }
+
+            // Get the name of the action to perform
+            $action = $this->getQueryStringParameter( 'action', 'default' );
+
+            // Check if the action exists
+            if ( ! $node->hasMethod( 'action' . $action ) ) {
+                trigger_error( $action . ' is missing for this node' );
+            }
+
+            // Run the action
+            call_user_func( array( $node, 'action' . $action ) );
+
+        }
+
+    }
+
+    // The default node definition
+    class YDCmfContentNode extends YDBase {
+
+        // Class constructor
+        function YDCmfContentNode() {
+
+            // The data for the node
+            $this->_nodeData = array();
+
+            // The metadata for the node
+            $this->_nodeMeta = array();
+
+            // Create a new template
+            $this->tpl = new YDTemplate();
+
+            // Get the database connection
+            $this->db = & $GLOBALS['CMS_DB'];
+
+            // Get the content store
+            $this->store = new YDCmfContentStore( $GLOBALS['CMS_DB'], 'content' );
+
+            // Add the core properties
+            $this->addMeta( 'id', null, 'int', false, null );
+            $this->addMeta( 'parent_id', null, 'int', false, null );
+            $this->addMeta( 'name', null, 'string', false, null );
+            $this->addMeta( 'nleft', null, 'int', false, null, false );
+            $this->addMeta( 'nright', null, 'int', false, null, false );
+            $this->addMeta( 'nlevel', null, 'int', false, null, false );
+            $this->addMeta( 'title', null, 'string', true, null );
+            $this->addMeta( 'property', 'property_0', 'string', true, null );
+            $this->addMeta( 'property_other', 'property_1', 'string', false, null );
+            $this->addMeta( 'created', null, 'datetime', false, time() );
+            $this->addMeta( 'created_by', null, 'string', false, YDBrowserInfo::getComputerName() );
+            $this->addMeta( 'modified', null, 'datetime', false, time() );
+            $this->addMeta( 'modified_by', null, 'string', false, YDBrowserInfo::getComputerName() );
+            $this->addMeta( 'content_type', null, 'string', false, $this->getClassName() );
+            $this->addMeta( 'can_delete', null, 'bool', false, 1, false );
+
+        }
+
+        // Add a field definition
+        function addMeta(
+            $name, $field, $type, $translated, $default, $required=true, $null=false, $maxlength=false, $minlength=false
+        ) {
+
+            // Use the name of the property if the field name is not specified
+            if ( is_null( $field ) ) {
+                $field = $name;
+            }
+
+            // Add the metadata
+            $this->_nodeMeta[ $name ] = array(
+                'type' => $type, 'field' => strtolower( $field ), 'translated' => $translated, 'default' => $default,
+                'required' => $required,'null' => $null, 'maxlength' => $maxlength, 'minlength' => $minlength
+            );
+
+        }
+
+        // From an array
+        function fromArray( $array ) {
+
+            // Add the data
+            $this->_nodeData = array_merge( $this->_nodeData, $array );
+
+            // Get the used properties
+            $used_languages  = YDCmfLanguage::getSupportedLanguages();
+            $used_properties = array();
+            foreach ( array_keys( $this->_nodeMeta ) as $key ) {
+                if ( YDStringUtil::startsWith( $this->_nodeMeta[ $key ]['field'], 'property_' ) ) {
+                    foreach ( $used_languages as $language ) {
+                        array_push( $used_properties, $this->_nodeMeta[ $key ]['field'] . '_' . $language );
+                    }
+                }
+            }
+
+            // Remove the unused properties
+            foreach ( array_keys( $this->_nodeData ) as $key ) {
+                if ( YDStringUtil::startsWith( $key, 'property_' ) && ! in_array( $key, $used_properties ) ) {
+                    unset( $this->_nodeData[ $key ] );
+                }
+            }
+
+        }
+
+        // Return the array
+        function toArray() {
+            $data = $this->_nodeData;
+            $data['content_type'] = $this->getClassName();
+            return $data;
+        }
+
+        // Touch the date/time on the node
+        function touch() {
+            if ( is_null( $this->getValue( 'created' ) ) ) {
+                $this->setValue( 'created', time() );
+            }
+            $this->setValue( 'modified', time() );
+            if ( is_null( $this->getValue( 'created_by' ) ) ) {
+                $this->setValue( 'created_by', YDBrowserInfo::getComputerName() );
+            }
+            $this->setValue( 'modified_by', YDBrowserInfo::getComputerName() );
+        }
+
+        // Check if this is a valid value
+        function isValidValue( $name ) {
+            return in_array( strtolower( $name ), array_keys( $this->_nodeMeta ) );
+        }
+
+        // Check for a valid field
+        function checkValueIsValid( $name ) {
+            if ( ! $this->isValidValue( $name ) ) {
+                trigger_error( 'Unknown field: ' . $name, YD_ERROR );
+            }
+        }
+
+        // Get a value of a node
+        function getValue( $name, $default=null ) {
+
+            // Fail if the field doesn't exist
+            $this->checkValueIsValid( $name );
+
+            // Get the languages
+            $language = YDCmfLanguage::getLanguage();
+
+            // Get the proper value
+            if ( isset( $this->_nodeData[ $this->_nodeMeta[ $name ]['field'] . '_' . $language ] ) ) {
+                return $this->_nodeData[ $this->_nodeMeta[ $name ]['field'] . '_' . $language ];
+            }
+
+            // Get the value if set, otherwise, use the default value
+            return isset( $this->_nodeData[ $name ] ) ? $this->_nodeData[ $name ] : $default;
+
+        }
+
+        // Get a translated value
+        function getTranslatedValue( $name, $default=null, $language=null ) {
+
+            // Fail if the field doesn't exist
+            $this->checkValueIsValid( $name );
+
+            // Get the default language if not specified
+            if ( empty( $language ) ) {
+                $language = YDCmfLanguage::getLanguage();
+            }
+
+            // Get the field name
+            $field_name = $this->_nodeMeta[ $name ]['field'] . '_' . $language;
+
+            // Get the value if set, otherwise, use the default value
+            return isset( $this->_nodeData[ $field_name ] ) ? $this->_nodeData[ $field_name ] : $default;
+
+        }
+
+        // Get a link to the item
+        function getHref( $action=null, $language=null ) {
+
+            // Get the language
+            $language = is_null( $language ) ? YDCmfLanguage::getLanguage() : $language;
+
+            // Get the action name
+            $action   = is_null( $action ) ? $_GET['action'] : $action;
+
+            // Get the URL
+            $url = dirname( YD_SELF_SCRIPT ) . '/' . $this->getValue( 'name' ) . YDCMS_REQ_EXT . '?';
+
+            // Add the query string
+            if ( ! empty( $action ) && strtolower( $action ) != 'default' ) {
+                $url .= 'action=' . rawurlencode( $action ) . '&';
+            }
+            $url .= 'lang=' . rawurlencode( $language );
+
+            // Return the URL
+            return YDUrl::makeLinkAbsolute( $url );
+
+        }
+
+        // Get a link with the title
+        function getTitleLink( $action=null, $language=null, $title=null ) {
+            if ( is_null( $title ) ) {
+                $title = $this->getTranslatedValue( 'title' );
+            }
+            return sprintf( '<a href="%s">%s</a>', $this->getHref( $action, $language ), $title );
+        }
+
+        // Get the actions defined in this class
+        function getPossibleActions() {
+            $actions = get_class_methods( $this );
+            foreach ( $actions as $key=>$action ) {
+                if ( YDStringUtil::startsWith( $action, 'action' ) ) {
+                    $actions[$key] = strtolower( substr( $action, strlen( 'action' ) ) );
+                } else {
+                    unset( $actions[$key] );
+                }
+            }
+            return $actions;
+        }
+
+        // Get the children of the node
+        function getChildren( $order=null ) {
+            return $this->store->getChildren( $this->getValue( 'id' ), false, $order );
+        }
+
+        // Get the path to the node
+        function getPath() {
+            return $this->store->getPath( $this->getValue( 'id' ), true );
+        }
+
+        // Set a value of a node
+        function setValue( $name, $val, $language=null ) {
+
+            // Get the name of the field
+            $field = $this->_nodeMeta[ $name ]['field'];
+
+            // Check if it's a valid language
+            if ( ! is_null( $language ) && ! in_array( $language, YDCmfLanguage::getServerLanguages() ) ) {
+                trigger_error( 'Language ' . $language . ' is not supported' );
+            }
+
+            // Check if the item needs translation
+            if ( $this->_nodeMeta[ $name ]['translated'] == true && ! empty( $language ) ) {
+                $this->_nodeData[ $field . '_' . $language ] = $val;
+            } else {
+                if ( YDStringUtil::startsWith( $field, 'title' ) || YDStringUtil::startsWith( $field, 'property' ) ) {
+                    foreach ( YDCmfLanguage::getServerLanguages() as $language ) {
+                        $this->_nodeData[ $field . '_' . $language ] = $val;
+                    }
+                } else {
+                    $this->_nodeData[ $field ] = $val;
+                }
+            }
+
+        }
+
+        // The default node action
+        function actionDefault() {
+
+            // Display the template
+            $this->display();
+
+        }
+
+        // Display a named template
+        function display( $name=null ) {
+
+            // Assign the values
+            $this->tpl->assign( 'node', $this );
+            $this->tpl->assign( 'store', $this->store );
+
+            // Add the action name
+            $this->tpl->assign( 'YD_MODULE_ACTION', strtolower( $_GET['action'] ) );
+
+            // Add the generic stuff
+            $this->tpl->assign( 'languages', YDCmfLanguage::getSupportedLanguages() );
+            $this->tpl->assign( 'language',  YDCmfLanguage::getLanguage() );
+
+            // Get the name of the class
+            $clazz = $this->getClassName();
+
+            // If no name specified, use the class name
+            $name = ( is_null( $name ) ? $clazz : $name ) . '.tpl';
+
+            // Check if we need to use the standard or custom one
+            if (
+                ! file_exists( YDCMS_DIR_SKIN . '/' . $name )
+                &&
+                ! file_exists( YDCMS_DIR_MOD . '/' . $clazz . '/' . $name )
+                &&
+                ! file_exists( dirname( __FILE__ ) . '/' . $name )
+            ) {
+                trigger_error( 'Template not found: ' . $name, YD_ERROR );
+            }
+
+            // Get the path to the template
+            if ( file_exists( YDCMS_DIR_SKIN . '/' . $name ) ) {
+                $tplFile = YDCMS_DIR_SKIN . '/' . $name;
+            } else {
+                if ( $clazz == 'ydcmfcontentnode' ) {
+                    $tplFile = dirname( __FILE__ ) . '/' . $name;
+                } else {
+                    $tplFile = YDCMS_DIR_MOD . '/' . $clazz . '/' . $name;
+                }
+            }
+
+            // Assign the name of the template
+            $this->tpl->assign( 'tplFile', realpath( $tplFile ) );
+
+            // Display the template
+            $this->tpl->display( $tplFile );
+
+        }
+
+    }
+
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/cms/includes/config/config.php
===================================================================
--- YDFramework2.0/trunk/examples/cms/includes/config/config.php	2006-04-18 12:48:49 UTC (rev 1854)
+++ YDFramework2.0/trunk/examples/cms/includes/config/config.php	2006-04-18 12:52:41 UTC (rev 1855)
@@ -0,0 +1,16 @@
+<?php
+
+    // Set the database connection parameters
+    YDConfig::set( 'DB_TYPE', 'mysql' );
+    YDConfig::set( 'DB_NAME', 'ydcms' );
+    YDConfig::set( 'DB_USER', 'root' );
+    YDConfig::set( 'DB_PASS', '' );
+    YDConfig::set( 'DB_HOST', 'localhost' );
+
+    // Set the default debug level
+    YDConfig::set( 'YD_DEBUG', 1 );
+
+    // The supported languages
+    YDConfig::set( 'supported_languages', array( 'nederlands' => 'nl', 'english' => 'en', 'fran&ccedil;ais' => 'fr' ) );
+
+?>

Added: YDFramework2.0/trunk/examples/cms/includes/ydcmfcontentnode.tpl
===================================================================
--- YDFramework2.0/trunk/examples/cms/includes/ydcmfcontentnode.tpl	2006-04-18 12:48:49 UTC (rev 1854)
+++ YDFramework2.0/trunk/examples/cms/includes/ydcmfcontentnode.tpl	2006-04-18 12:52:41 UTC (rev 1855)
@@ -0,0 +1,37 @@
+<h2><?php echo( $node->getTranslatedValue( 'title' ) ); ?></h2>
+
+<p>Hello world from template.</p>
+
+<?php if ( sizeof( $languages ) > 1 ) { ?>
+<p>
+    Languages:
+    <?php foreach ( $languages as $l ) { ?>
+        <?php if ( $l == $language ) { ?>
+            <b><?php echo( $l ); ?></b>
+        <? } else { ?>
+            <?php echo( $node->getTitleLink( null, $l, $l ) ); ?>
+        <? } ?>
+    <?php } ?>
+</p>
+<?php } ?>
+
+<hr size="1" noshade="" />
+
+<p><b>Template:</b> <?php echo( $tplName ); ?></p>
+
+<p><b>Content-Type:</b> <?php echo( $node->getValue( 'content_type' ) ); ?></p>
+
+<?php if ( $node->getChildren() ) { ?>
+    <p><b>Children</b></p>
+    <ul>
+        <?php foreach ( $node->getChildren() as $child ) { ?>
+            <li><?php echo( $child->getTitleLink( '' ) ); ?></li>
+        <?php } ?>
+    </ul>
+<?php } ?>
+
+<p><b>Path</b>
+<?php foreach ( $node->getPath() as $path ) { ?>
+    &raquo; <?php echo( $path->getTitleLink( '' ) ); ?>
+<?php } ?>
+</p>

Added: YDFramework2.0/trunk/examples/cms/index.php
===================================================================
--- YDFramework2.0/trunk/examples/cms/index.php	2006-04-18 12:48:49 UTC (rev 1854)
+++ YDFramework2.0/trunk/examples/cms/index.php	2006-04-18 12:52:41 UTC (rev 1855)
@@ -0,0 +1,22 @@
+<?php
+
+    // Include the framework
+    include_once( dirname( __FILE__ ) . '/includes/YDCmfInit.php' );
+
+    // Class definition
+    class index extends YDCmfRequest {
+
+        // Class constructor
+        function index() {
+
+            // Initialize the parent
+            $this->YDCmfRequest();
+
+        }
+
+    }
+
+    // Process request
+    YDInclude( 'YDF2_process.php' );
+
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/cms/modules/ydcmfhome/ydcmfhome.php
===================================================================
--- YDFramework2.0/trunk/examples/cms/modules/ydcmfhome/ydcmfhome.php	2006-04-18 12:48:49 UTC (rev 1854)
+++ YDFramework2.0/trunk/examples/cms/modules/ydcmfhome/ydcmfhome.php	2006-04-18 12:52:41 UTC (rev 1855)
@@ -0,0 +1,64 @@
+<?php
+
+    // Class
+    class YDCmfHome extends YDCmfContentNode {
+
+        // Constructor
+        function YDCmfHome() {
+            $this->YDCmfContentNode();
+        }
+
+        // Custom action
+        function actionCustom() {
+
+            // Get the results from a database
+            $version = $this->db->getValue( 'select version()' );
+            $this->tpl->assign( 'mysql_version', $version );
+
+            // Display the template
+            $this->display();
+
+        }
+
+        // Form action
+        function actionForm() {
+
+            // Create the form
+            $form = new YDForm( 'firstForm' );
+
+            // Set the defaults
+            $form->setDefaults( array( 'name' => 'Joe User' ) );
+
+            // Add the elements
+            $form->addElement( 'text', 'name', 'Enter your name:', array( 'size' => 50 ) );
+            $form->addElement( 'textarea', 'desc1', 'Enter the description:' );
+            $form->addElement( 'textarea', 'desc2', 'Enter the description (no toolbar):' );
+            $form->addElement( 'submit', 'cmdSubmit', 'Send' );
+
+            // Add a rule
+            $form->addRule( 'name',  'required', 'Please enter your name' );
+            $form->addRule( 'desc1', 'required', 'Please enter the description' );
+
+            // Add filters
+            $form->addFilter( '__ALL__', 'trim' );
+            $form->addFilter( 'desc1', 'safe_html' );
+
+            // Process the form
+            if ( $form->validate() ) {
+
+                // Show the form values
+                YDDebugUtil::dump( $form->getValues() );
+
+            }
+
+            // Add the form to the template
+            $this->tpl->assign( 'form', $form->toHtml() );
+
+            // Display the template
+            $this->display();
+
+        }
+
+    }
+
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/cms/modules/ydcmfhome/ydcmfhome.tpl
===================================================================
--- YDFramework2.0/trunk/examples/cms/modules/ydcmfhome/ydcmfhome.tpl	2006-04-18 12:48:49 UTC (rev 1854)
+++ YDFramework2.0/trunk/examples/cms/modules/ydcmfhome/ydcmfhome.tpl	2006-04-18 12:52:41 UTC (rev 1855)
@@ -0,0 +1,65 @@
+<h2><?php echo( $node->getTranslatedValue( 'title' ) ); ?></h2>
+
+<p>Hello world from template.</p>
+
+<?php if ( sizeof( $languages ) > 1 ) { ?>
+<p>
+    <b>Languages:</b>
+    <?php foreach ( $languages as $l => $fl ) { ?>
+        <?php if ( $l == $language ) { ?>
+            [<?php echo( $l ); ?>]
+        <? } else { ?>
+            <?php echo( $node->getTitleLink( null, $fl, $l ) ); ?>
+        <? } ?>
+    <?php } ?>
+</p>
+<?php } ?>
+
+<?php if ( sizeof( $node->getPossibleActions() ) > 1 ) { ?>
+<p>
+    <b>Actions:</b>
+    <?php foreach ( $node->getPossibleActions() as $a ) { ?>
+        <?php if ( $a == $YD_MODULE_ACTION ) { ?>
+            [<?php echo( $a ); ?>]
+        <? } else { ?>
+            <?php echo( $node->getTitleLink( $a, $language, $a ) ); ?>
+        <? } ?>
+    <?php } ?>
+</p>
+<?php } ?>
+
+<?php if ( $YD_MODULE_ACTION == 'custom' ) { ?>
+    <hr size="1" noshade="" />
+    <b>MySQL version:</b> <?php echo( $mysql_version ); ?>
+<?php } ?>
+
+<?php if ( $YD_MODULE_ACTION == 'form' ) { ?>
+    <hr size="1" noshade="" />
+    <b>Using forms</b>
+    <?php echo( $form ); ?>
+<?php } ?>
+
+<hr size="1" noshade="" />
+
+<p><b>Template:</b> <?php echo( $tplName ); ?></p>
+
+<p><b>Content-Type:</b> <?php echo( $node->getValue( 'content_type' ) ); ?></p>
+
+<p><b>Action:</b> <?php echo( $YD_MODULE_ACTION ); ?></p>
+
+<p><b>Parameters:</b> <?php YDDebugUtil::dump( $_GET ); ?></p>
+
+<?php if ( $node->getChildren() ) { ?>
+    <p><b>Children</b></p>
+    <ul>
+        <?php foreach ( $node->getChildren( 'created DESC, title_' . $language . ' DESC' ) as $child ) { ?>
+            <li><?php echo( $child->getTitleLink( '' ) ); ?></li>
+        <?php } ?>
+    </ul>
+<?php } ?>
+
+<p><b>Path</b>
+<?php foreach ( $node->getPath() as $path ) { ?>
+    &raquo; <?php echo( $path->getTitleLink( '' ) ); ?>
+<?php } ?>
+</p>



From pclaerhout at berlios.de  Tue Apr 18 14:56:00 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Tue, 18 Apr 2006 14:56:00 +0200
Subject: [ydf-devel] r1856 - in YDFramework2.0/trunk/examples: . forum forum/images forum/images/avatars forum/includes forum/languages forum/sql forum/templates
Message-ID: <200604181256.k3ICu0Z8001207@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-18 14:55:49 +0200 (Tue, 18 Apr 2006)
New Revision: 1856

Added:
   YDFramework2.0/trunk/examples/forum/
   YDFramework2.0/trunk/examples/forum/.htaccess
   YDFramework2.0/trunk/examples/forum/admin.php
   YDFramework2.0/trunk/examples/forum/changelog.txt
   YDFramework2.0/trunk/examples/forum/fffRequest.php
   YDFramework2.0/trunk/examples/forum/fffscreen.css
   YDFramework2.0/trunk/examples/forum/forums.php
   YDFramework2.0/trunk/examples/forum/images/
   YDFramework2.0/trunk/examples/forum/images/Thumbs.db
   YDFramework2.0/trunk/examples/forum/images/avatars/
   YDFramework2.0/trunk/examples/forum/images/avatars/temp/
   YDFramework2.0/trunk/examples/forum/images/caution.gif
   YDFramework2.0/trunk/examples/forum/images/error.gif
   YDFramework2.0/trunk/examples/forum/images/ydframework.png
   YDFramework2.0/trunk/examples/forum/includes/
   YDFramework2.0/trunk/examples/forum/includes/config.php
   YDFramework2.0/trunk/examples/forum/includes/forums.class.php
   YDFramework2.0/trunk/examples/forum/includes/groups.class.php
   YDFramework2.0/trunk/examples/forum/includes/page.class.php
   YDFramework2.0/trunk/examples/forum/includes/posts.class.php
   YDFramework2.0/trunk/examples/forum/includes/sqlObject.class.php
   YDFramework2.0/trunk/examples/forum/includes/users.class.php
   YDFramework2.0/trunk/examples/forum/index.php
   YDFramework2.0/trunk/examples/forum/languages/
   YDFramework2.0/trunk/examples/forum/languages/language_en.php
   YDFramework2.0/trunk/examples/forum/languages/language_fr.php
   YDFramework2.0/trunk/examples/forum/posts.php
   YDFramework2.0/trunk/examples/forum/readme.txt
   YDFramework2.0/trunk/examples/forum/sql/
   YDFramework2.0/trunk/examples/forum/sql/fff.sql
   YDFramework2.0/trunk/examples/forum/templates/
   YDFramework2.0/trunk/examples/forum/templates/admin.forum.edit.tpl
   YDFramework2.0/trunk/examples/forum/templates/admin.forums.list.tpl
   YDFramework2.0/trunk/examples/forum/templates/admin.user.edit.tpl
   YDFramework2.0/trunk/examples/forum/templates/admin.users.list.tpl
   YDFramework2.0/trunk/examples/forum/templates/errorApplication.tpl
   YDFramework2.0/trunk/examples/forum/templates/fffRequest.tpl
   YDFramework2.0/trunk/examples/forum/templates/forums.list.subjects.tpl
   YDFramework2.0/trunk/examples/forum/templates/forums.list.tpl
   YDFramework2.0/trunk/examples/forum/templates/forums.search.tpl
   YDFramework2.0/trunk/examples/forum/templates/posts.del.tpl
   YDFramework2.0/trunk/examples/forum/templates/posts.new.tpl
   YDFramework2.0/trunk/examples/forum/templates/posts.success.tpl
   YDFramework2.0/trunk/examples/forum/templates/posts.view.tpl
   YDFramework2.0/trunk/examples/forum/templates/user.delprofile.tpl
   YDFramework2.0/trunk/examples/forum/templates/user.login.tpl
   YDFramework2.0/trunk/examples/forum/templates/user.monprofile.tpl
   YDFramework2.0/trunk/examples/forum/templates/user.notAuth.tpl
   YDFramework2.0/trunk/examples/forum/templates/user.suscribe.tpl
   YDFramework2.0/trunk/examples/forum/templates/user.viewprofile.tpl
   YDFramework2.0/trunk/examples/forum/todo.txt
   YDFramework2.0/trunk/examples/forum/user.php
Log:
Added a small user example that implements a basic forum.

Added: YDFramework2.0/trunk/examples/forum/.htaccess
===================================================================
--- YDFramework2.0/trunk/examples/forum/.htaccess	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/.htaccess	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,30 @@
+# Yellow Duck Framework version 2.0
+# (c) copyright 2004 Pieter Claerhout, pieter at yellowduck.be
+
+# Denying direct access to the templates
+<FilesMatch "(.tpl|config.php)$">
+    Order allow,deny
+    Deny from all
+</FilesMatch>
+
+# Disallow directory browsing
+Options -Indexes
+
+# Disable magic quotes
+php_value magic_quotes_gpc 0
+php_value magic_quotes_runtime 0
+php_value magic_quotes_sybase 0
+
+# Disabled registering of globals and arg*
+php_value register_globals 0
+php_value register_argc_argv 0
+
+# Disallow some security holes
+php_value allow_call_time_pass_reference 0
+php_value allow_url_fopen 0
+php_flag short_open_tag Off
+php_flag enable_dl Off
+
+# Gzip compress the output
+php_flag output_buffering Off
+php_flag zlib.output_compression On

Added: YDFramework2.0/trunk/examples/forum/admin.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/admin.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/admin.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,250 @@
+<?php
+
+
+    // Includes main class of the site
+    require_once('fffRequest.php');
+
+
+    // Include the classes needed on this page
+	require_once('includes/forums.class.php');
+	require_once('includes/groups.class.php');
+	
+
+    // Define the request class
+    class admin extends fffRequest {
+		var $menusAdmin;
+		
+        // Class constructor
+        function admin() {
+
+            // Initialize the parent
+            $this->fffRequest();
+            
+            // Indicate we require login
+            $this->setRequiresAuthentication( true );
+            
+            $this->wrapperTpl->assign("viewadmin", true);
+
+						$this->menusAdmin = ' Administration ? ' .
+	            		'<a class="fff_link1" href="admin.php?do=manageUsers">'.t('admin.users').' </a>' .
+	            		' | '.
+	            		'<a class="fff_link1" href="admin.php?do=manageForums">'.t('admin.forums').' </a>' .
+	            		'';//' | ';
+        }
+
+		/*Overloading of isAutheticated, users, even registred need to be administrator to access this file*/
+        function isAuthenticated() {
+        	if($this->user->rightslevel >= LEVEL_ADMIN) {
+        		return true;
+        	}
+        	else {
+        		return false;
+        	}
+        }
+
+        // The default action
+        function actionDefault() {
+						$this->forward('manageUsers');
+						return;
+        }
+
+		function actionEditUser() {
+			if(isset($_GET['userLogin'])) {
+				
+	
+	  			// get the asked profile
+	  			$userLogic = new UsersLogic();
+	  			$user = $userLogic->retrieveUserByLogin($_GET['userLogin']);
+	  			
+	  			$groupsLogic = new GroupsLogic();
+	  			$groups = $groupsLogic->listSelectGroups();
+	  			
+	  			if($user!=null) {
+	  				
+	  				// Create the addForum form
+		            $form = new YDForm( 'editForm' );
+		            
+		            $form->addElement( 'textarea', 'userDescription', t('admin.desc'),array("cols" => 50, "rows" => 8) );
+  							$form->addElement( 'select', 'userGroup', t('admin.usergroups') , array("width" => 60), $groups ); 
+		  					$form->addElement( 'hidden' , 'iduser', $user->id );
+	
+		            $form->addElement( 'submit', 'cmdSubmit', t('admin.saveupdates') );
+	
+		            // Process the form
+		            if ( $form->validate() ) {
+		               // update
+		               $user->description = $form->getValue( 'userDescription' );
+		               $user->groupid = $form->getValue( 'userGroup' );
+
+								   $user->update();
+								   $this->forward('manageUsers');
+								   return;		
+		     				}
+		            
+								$form->setDefaults( array( 'userGroup' => $user->groupid ) );
+								$form->setDefaults( array( 'userDescription' => $user->description ) );
+					
+			  				// Assign variables to the template
+			  				$this->actionTpl->assign( 'form',$form->toArray());
+						    $this->actionTpl->assign( 'user' ,$user);
+						    $this->actionTpl->assign( 'userfound',true);
+						    $title = 'Profil de '.$user->login;
+					    
+		  			}
+		  			else {
+		  				$this->actionTpl->assign( 'userfound',false);
+		  				$title = 'Utilisateur inconnu';
+		  			}
+			    	$content = new page($this->actionTpl->fetch('templates/admin.user.edit.tpl'), $title, $this->menusAdmin);
+						// Display the action template into the master template
+						$this->display($content);
+			}
+			else {
+				$this->errorRequete();
+				return;
+			}			
+		}
+		
+		
+        function actionManageUsers() {
+            $usersLogic = new UsersLogic();
+            
+            // Assign variables to the template
+            $temp = $usersLogic->retrieveAllByName();
+            $this->actionTpl->assign( 'users', $temp);
+
+            $content = new Page($this->actionTpl->fetch('templates/admin.users.list.tpl'), t('admin.manageusers'), $this->menusAdmin);
+
+
+            // Display the action template into the master template
+            $this->display($content);
+
+        }
+
+        
+        function checkNewForum( $fields ) {
+			if(strlen($fields['forumTitle'])>=5) {
+				if($fields['forumPoids']>=0 && $fields['forumPoids']<=500) {
+					return true;
+	        	}
+		        else {
+		        	return array( 'search' => t('admin.forumweight') );
+		        }
+        	}
+	        else {
+	        	return array( 'search' => t('admin.forumtitle5char') );
+	        }
+        }
+        
+        function actionEditForum() {
+        	if(isset($_GET['idforum'])) {
+
+							// retrieve forum to edit
+	            $forumLogic = new ForumsLogic();
+	            $forum = $forumLogic->retrieveForumById($_GET['idforum']);
+
+							// Create the addForum form
+	            $form = new YDForm( 'editForumForm' );
+
+	            $form->addElement( 'text', 'forumTitle', t('admin.newforumtitle') , array("size" => 40));
+			  			$form->addElement( 'text', 'forumPoids', t('admin.forumweightorder') , array());
+			  			$form->addElement( 'hidden' , 'idforum', $_GET['idforum'] );
+
+	            $form->addElement( 'submit', 'cmdSubmit', t('admin.forumsave') );
+
+	            // Add rules
+	            $form->addFormRule( array( & $this, 'checkNewForum' ) );
+	 						$form->addRule( 'forumPoids', 'numeric', t('admin.forumweightinteger') ); 
+
+	 	         // defaults values
+	            $form->setDefaults( array( 'forumTitle' => $forum->name ) ); 
+	            $form->setDefaults( array( 'forumPoids' => $forum->order) ); 
+       
+	            // Process the form
+	            if ( $form->validate() ) {
+	               // get and show results
+	               $forum->name = $form->getValue( 'forumTitle' );
+	               $forum->order = $form->getValue( 'forumPoids' ); 
+							   $forum->update();
+							   $this->forward('manageForums');
+							   return;		
+	            }
+
+
+	            // Assign variables to the template
+	            $this->actionTpl->assign( 'form',$form->toArray());
+
+	
+	            $content = new Page($this->actionTpl->fetch('templates/admin.forum.edit.tpl'), t('admin.manageforums'), $this->menusAdmin);
+	
+	            // Display the action template into the master template
+	            $this->display($content);
+        	}
+        	else {
+							$this->errorRequete();        		
+        	}
+        }
+        
+        function actionManageForums() {
+
+						// Create the addForum form
+            $form = new YDForm( 'forumForm' );
+
+            $form->addElement( 'text', 'forumTitle', t('admin.newforumtitle') , array("size" => 40));
+  					$form->addElement( 'text', 'forumPoids', t('admin.forumweightorder') , array());
+  			
+            $form->addElement( 'submit', 'cmdSubmit', t('admin.forumcreate') );
+
+            // Add rules
+            $form->addFormRule( array( & $this, 'checkNewForum' ) );
+ 						$form->addRule( 'forumPoids', 'numeric', t('admin.forumweightinteger') ); 
+ 
+            // Process the form
+            if ( $form->validate() ) {
+               // get and show results
+               $forum = new ForumObject($form->getValue( 'forumTitle' ),$form->getValue( 'forumPoids' ));
+			   				$forum->insert();
+
+            }
+            // Future defaults values
+            $form->setDefaults( array( 'forumTitle' => '' ) ); 
+            $form->setDefaults( array( 'forumPoids' => '' ) ); 
+            
+						// retrieve existing forums
+            $forumLogic = new ForumsLogic();
+            $forums = $forumLogic->retrieveAllByOrderSimple();     
+
+            // Assign variables to the template
+            $this->actionTpl->assign( 'form',$form->toArray());
+            $this->actionTpl->assign('forums', $forums);
+
+            $content = new Page($this->actionTpl->fetch('templates/admin.forums.list.tpl'), t('admin.manageforums') , $this->menusAdmin);
+
+            // Display the action template into the master template
+            $this->display($content);
+        	
+        }
+        
+        
+        function actionDelForum() {
+        	$forumLogic = new ForumsLogic();
+            $forum = $forumLogic->retrieveForumById($_GET['idforum']);
+            $forum->delete();
+            $this->forward('manageForums');  
+            return;
+        	
+        }
+        
+
+          function actionDelUser() {
+            $usersLogic = new UsersLogic();
+            $user = $usersLogic->retrieveUserById($_GET['iduser']);
+            $user->delete();
+      			$this->forward('manageUsers');
+      			return;
+          }
+    } 
+
+    YDInclude( 'YDF2_process.php' ); 
+
+?>

Added: YDFramework2.0/trunk/examples/forum/changelog.txt
===================================================================
--- YDFramework2.0/trunk/examples/forum/changelog.txt	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/changelog.txt	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,10 @@
+Friendly Freddy Forum
+
+
+Version 1.1 - 17/10/2005
+Add multilanguage support based on the YDWeblog solution
+Add English language file
+
+
+Version 1.0 - 01/03/2005
+Initial release made by Erwan PERGOD & Sylvain GOUGOUZIAN in order to evaluate the YellowDuck Framework (http://ydframework.berlios.de) as a php pratical work in university.

Added: YDFramework2.0/trunk/examples/forum/fffRequest.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/fffRequest.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/fffRequest.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,220 @@
+<?php
+		require_once( 'includes/config.php' );
+    // Include the Yellow Duck Framework
+
+		require_once( YD_INIT_FILE );
+
+    // Include the classes needed on all pages
+    YDInclude( 'YDForm.php' ); 
+    YDInclude( 'YDRequest.php' );
+    YDInclude( 'YDTemplate.php' );
+    require_once( 'includes/page.class.php' );
+		require_once( 'includes/users.class.php' );
+
+		
+  // Define the constants we want to override for the Framework
+  //YDConfig::set( 'YD_DEBUG', 1 );
+	YDLocale::set( LOCALE );
+
+	// Show all errors including notification of unset variables
+	error_reporting(E_ALL);
+
+    // Include the language file
+    include_once( dirname( __FILE__ ) . '/languages/language_' . strtolower( YDLocale::get() ) . '.php' );
+
+//	    /**
+//     * The t function used for translations
+//     * @param t Code of the word to translate
+//     * @return t corresponding string for the current locale
+//     * 
+//     * For the moment the code must be in form module.word.or.more
+//     * Every thing is currently in one file, could evolve if required
+//     */
+//    function t( $t ) {
+//
+//        // Return empty string when param is missing
+//        if ( empty( $t ) ) {
+//            return '';
+//        }
+//
+//        // Load the language file
+//        include_once( dirname( __FILE__ ) . '/languages/language_' . strtolower( YDLocale::get() ) . '.php' );
+//        // Initialize the language array
+//        if ( ! isset( $GLOBALS['t'] ) ) {
+//            $GLOBALS['t'] = array();
+//        }
+//        
+//        // Return the right translation
+//        //$t = strtolower( $t ); // strtolower removed to improve perfs
+//        return ( array_key_exists( $t, $GLOBALS['t'] ) ? $GLOBALS['t'][$t] : "%$t%" );
+//    }
+    
+    /** 
+		 * Template t modifier
+     * @param params Parameters supplied by Smarty
+       @return $params['w'] corresponding string for the current locale.
+     */
+    function YDTplModT( $params ) {
+    		// strtolower removed to improve perfs.
+        /*if ( @ $params['lower'] == 'yes' ) {
+            return isset( $params['w'] ) ? strtolower( t( $params['w'] ) ) : '';
+        } else {*/
+            return isset( $params['w'] ) ? t( $params['w'] ) : '';
+        //}
+    }
+	
+
+    // Here, we define our custom request class
+    class fffRequest extends YDRequest {
+        var $template; // main template
+        var $actionTpl; // action template
+        var $user;
+        
+        // Class constructor
+        function fffRequest() {
+
+            // Initialize the parent request
+            $this->YDRequest();
+						
+            // Make the template object available for all requests
+            $this->wrapperTpl = new YDTemplate();  
+						$this->actionTpl = new YDTemplate();        	 
+						$this->wrapperTpl->register_function( 't', 'YDTplModT' );
+        	  $this->actionTpl->register_function( 't', 'YDTplModT' );
+												
+						// create a new user object for the request
+						if(isset($_SESSION['s_user'])) {
+							$this->user = YDObjectUtil::unserialize($_SESSION['s_user']);
+						}
+						else {
+							$this->user = new UserObject('Anonymous', '');
+						}
+						if($this->user->ip !=  $_SERVER['REMOTE_ADDR']) {
+							$this->user->ip =  $_SERVER['REMOTE_ADDR'];
+							$_SESSION['s_user'] = YDObjectUtil::serialize($this->user);
+						}
+
+        }
+        
+        function errorMissingAction() {
+        		// TODO : return 404 in HTTP headers
+        	 $this->actionTpl->assign( 'message',t('global.pagedoesnotexists') );
+           $content = new Page($this->actionTpl->fetch('templates/errorApplication.tpl'), t('global.pagedoesnotexists') );
+
+            // Display the action template into the master template
+            $this->display($content);	
+        }
+        
+        function errorActionNotAllowed() {
+            $this->actionTpl->assign( 'message','Action non autoris?e.');
+            $content = new Page($this->actionTpl->fetch('templates/errorApplication.tpl'), t('global.erroractionnotallowed') );
+
+            // Display the action template into the master template
+            $this->display($content);	
+        }
+        
+        function errorRequete($message=null) {
+            
+            $message = $message==null?t('global.unrecognizederror'):$message;            
+            $actionTpl->assign( 'message',$message);
+            $content = new Page($this->actionTpl->fetch('templates/errorApplication.tpl'), t('global.error').$message);
+
+            // Display the action template into the master template
+            $this->display($content);	
+        }
+        
+        
+        // function display, will display $content in master template
+        function display($page) {
+            $this->wrapperTpl->assign('user', $this->user);   
+            $this->wrapperTpl->assign( 'menus', $page->menus);
+            $this->wrapperTpl->assign( 'content' , $page->content!=null?$page->content:'');
+            
+            $this->wrapperTpl->assign( 'title' , $page->title!=null?$page->title:'FFF default title');
+
+            $this->wrapperTpl->display( 'templates/fffRequest.tpl' );
+        }
+        
+        
+        // Check the authentication
+        function isAuthenticated() {
+        	return $this->user->authentificated;
+        }
+
+
+       // Function to check the login and log
+        function checkLogin( $fields ) {
+	        	$user = new userObject($fields['loginName'], md5($fields['loginPass']));	
+				    $temp = $user->auth();
+	
+		  			// errors during authentification ?
+		  			if(is_array($temp)) {
+		  				return $temp;
+		  			}
+		  			else {
+		  				// else log the user
+		  				$this->user = $user;
+		  				$_SESSION['s_user'] = YDObjectUtil::serialize($user);
+		  				return true;
+		  			}
+        }
+        
+
+        // Login function
+        function actionLogin() {
+
+            // Redirect to default action if already logged in
+            if ( $this->isAuthenticated() === true ) {
+                $this->forward( 'default' );
+                return;
+            }
+
+            // Create the login form
+            $form = new YDForm( 'loginForm' );
+
+            $form->addElement( 'text', 'loginName', t('user.login') );
+            $form->addElement( 'password', 'loginPass', t('user.pwd') );
+            $form->addElement( 'submit', 'cmdSubmit', 'Login' );
+
+						$form->setDefaults( array( 'loginPass' => '' ) ); 
+			
+            // Add the rules
+            $form->addFormRule( array( & $this, 'checkLogin' ) );
+
+            // Process the form
+            if ( $form->validate() ) {
+
+                // Mark the form as valid
+                $this->authenticationSucceeded();
+                header('location: forums.php');
+                return;
+            }
+                       
+            // Assign variables to the action template
+            $this->actionTpl->assign( 'form', $form->toArray());
+
+            $content = new Page($this->actionTpl->fetch('templates/user.login.tpl'), '');
+
+            // Display the action template into the master template
+            $this->display($content);
+  
+        }
+
+
+        // Function to logout
+        function actionLogout() {
+            session_destroy();
+                      
+            header('location: forums.php');
+            return;
+        }
+
+        // Redirect to the login if the authentication failed
+        function authenticationFailed() {
+            $this->forward( 'login' );
+            return;
+        }
+
+    }
+
+?>

Added: YDFramework2.0/trunk/examples/forum/fffscreen.css
===================================================================
--- YDFramework2.0/trunk/examples/forum/fffscreen.css	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/fffscreen.css	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,237 @@
+BODY {
+  background-color:#FFFFFF;
+	color: #007530;
+  padding-top:0px;
+  margin-top:0px;
+  text-align:center;
+  margin-left:auto;
+  margin-right:auto;
+  font-weight:bold;
+}
+
+hr {
+	width:90%;
+	color:#FF9933;
+}
+.fff_error {
+
+}
+form.fff_form {
+  display:inline;
+}
+div.fff_form_container {
+  width:550px;
+  margin-left:auto;
+  margin-right:auto;
+  margin-top:4px;
+  margin-bottom:4px;
+  padding:15px;
+  border:2px dotted orange; 
+}
+img.fff_img {
+  border:none;
+}
+#validation.fff_valid {
+  float:right;
+}
+#validation.fff_valid img {
+  margin-left:15px;
+}
+
+#fff_connexion {
+  float:right;
+  width:300px;
+}
+#fff_main_head {
+	color: #007530;
+	background-color: #CEF390;
+	padding:2px;
+	margin:0px;
+}
+#fff_main_menu {
+  float:left;
+  padding-left:2%;
+}
+
+#fff_main_user {
+  float:right;
+  padding-right:2%;
+}
+
+hr.fff_separator {
+  clear:both;
+  width:96%;
+}
+
+a.fff_link1 {
+	color:#0849B5;
+	text-decoration:none;
+	font-weight:bold;
+}
+a.fff_link1:visited {
+	color:#0849B5;
+	text-decoration:none;
+}
+a.fff_link1:hover {
+	color:#0849B5;
+	text-decoration:underline;
+}
+
+a.fff_link2 {
+	color:#007531;
+	text-decoration:none;
+	font-weight:bold;
+}
+a.fff_link2:visited {
+	color:#007531;
+	text-decoration:none;
+}
+a.fff_link2:hover {
+	color:#007531;
+	text-decoration:underline;
+}
+
+
+acronym.fff_acro {
+  border-bottom:1px dotted black;
+  cursor:help;
+}
+
+.fff_edited {
+  font-size:small;
+  font-style:italic;
+}
+
+.fff_error {
+  font-weight:bold;
+  color:#FF0000;
+}
+
+.fff_uri {
+  font-weight:bold;
+  color:#0000FF;
+}
+
+.fff_success {
+  font-weight: bold;
+  color:#00FF00;
+}
+
+.fff_row {
+  margin:5px;
+}
+
+DIV.fff_row SPAN {
+	float: left;
+	width: 8em;
+	text-align: left;
+	text-decoration: none;
+}
+div.fff_menus {
+  margin-left:2%;
+  margin-right:2%;
+  width:94%;
+  border:1px solid #000000;
+}
+
+div.fff_menu_user {
+    float:right;
+    font-weight:bold;font-size: medium;
+}
+div.fff_menu_forum {
+    float:left;
+    font-weight:bold;font-size: medium;
+}
+
+div.fff_bloc_medium {
+    border : 1px dotted white;
+    background-color: #003366; color:#66ffff; font-size: small;
+    padding:10px;
+    margin:5px;
+    margin-left:auto;
+    margin-right:auto;
+    text-align:center;
+    width:300px;
+}
+
+
+TABLE.fff_table {
+  margin-left:2%;
+  margin-right:2%;
+  margin-top:2px;
+  margin-bottom:2px;
+  width:94%;
+  empty-cells: show;
+  border:1px solid #000000;
+}
+
+TABLE.fff_table_bottom {
+  margin-left:2%;
+  margin-right:2%;
+  margin-top:2px;
+  margin-bottom:2px;
+  
+  width:94%;
+  empty-cells: show;
+}
+
+td.fff_left {
+  text-align:left;
+}
+td.fff_right {
+  text-align:right;
+}
+
+/*Ligne d'entete*/
+tr.fff_title	{   background-color: #007531; color:#66ffff; font-size: large; }
+
+/*Lignes paires impaires0*/
+tr.fff_trow0even	{ background-color: #FFFBCE; color:#007530; font-weight:bold;font-size: medium;}
+tr.fff_trow0odd	{ background-color: #ccFBCE; color:#007530; font-weight:bold;font-size: medium;}
+
+/*Titre colonne principale*/
+th.fff_tMai {
+  width:60%;
+}
+
+th.fff_tNbe {
+  text-align: center;
+}
+
+
+/*case colonne principale*/
+td.fff_rMai {
+  width:60%;
+  text-align:left;
+  padding-left:4px;
+}
+
+td.fff_rNbe {
+  text-align: center;
+}
+
+td.fff_rMessage_infos {
+  width:82%;
+  background-color:#0099FF;
+  border : 1px solid black;
+  text-align:left;
+  color:#66ffff;
+  font-weight:normal;
+  padding:4px;
+  font-style : italic;
+}
+
+td.fff_rMessage {
+  width:82%;
+  background-color:#03B0BE;
+  border : 1px solid black;
+  text-align:left;
+  color:#FFFFFF;
+  font-weight:normal;
+  padding:4px;
+}
+
+.fff_title {
+  font-weight:bold;
+  text-decoration:underline;
+}

Added: YDFramework2.0/trunk/examples/forum/forums.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/forums.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/forums.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,131 @@
+<?php
+
+    // Includes main class of the site
+    require_once('fffRequest.php');
+    
+    // Include the classes needed on this page
+    require_once('includes/forums.class.php');
+    require_once('includes/posts.class.php');
+
+
+
+    // Define the request class
+    class forums extends fffRequest {
+
+        // Class constructor
+        function forums() {
+            // Initialize the parent
+            $this->fffRequest();
+        }
+
+        // The default action
+        function actionDefault() {
+            $this->actionListForums();
+            return;
+        }       
+
+        function checkSearch( $fields ) {
+            if(strlen($fields['searchKeys'])>2) {
+                return true;
+            }
+            else {
+                return array( 'search' => t('forums.search3chars') );
+            }
+        }
+
+
+        function actionSearch() {
+       
+            // retrieve list of forums
+            $forumLogic = new ForumsLogic();
+            $forums = $forumLogic->retrieveAllByOrderSimple();  
+            $selectForums = array();
+            foreach($forums as $i=> $item) {
+                $selectForums["".$item->id] = $item->name;
+            }
+                        
+            // Create the search form
+            $form = new YDForm( 'searchForm' );
+
+            $form->addElement( 'text', 'searchKeys', t('forums.searchstring') , array("size" => 40));
+            $form->addElement( 'select', 'searchForum', t('forums.searchforum'), array("width" => 60), $selectForums ); 
+
+            $form->addElement( 'submit', 'cmdSubmit', t('forums.search') );
+
+            // Add rules
+            $form->addFormRule( array( & $this, 'checkSearch' ) );
+
+
+            // Process the form
+
+            if ( $form->validate() ) {
+                $this->actionTpl->assign( 'searched',true);
+             // get and show results
+             $forum = $forumLogic->retrieveForumById($form->getValue( 'searchForum' )); 
+                   $forum->loadSubjectsMatching($form->getValue( 'searchKeys' ));
+                                    
+                   // number of results
+                   $this->actionTpl->assign( 'nbposts' , count($forum->subjects) );
+                   $this->actionTpl->assign( 'posts' , $forum->subjects );
+
+            }
+            
+            // Assign variables to the template
+            $this->actionTpl->assign( 'form',$form->toArray());
+            $content = new page($this->actionTpl->fetch('templates/forums.search.tpl'), t('forums.searching') );
+    
+    				$this->display($content);        	
+        }
+
+        function actionListForums() {
+
+						
+            // Retrieve all forums in Database
+            $forumLogic = new ForumsLogic();
+            $forums = $forumLogic->retrieveAllByOrderSimple();     
+
+            // Assign variables to the template
+            $this->actionTpl->assign('forums', $forums);
+            $content = $this->actionTpl->fetch('templates/forums.list.tpl');
+
+            // Display the action template into the master template
+            $this->display(new Page($content, t('global.forumlist') ) );
+
+        }
+      
+
+        function actionViewForum() {
+
+            // Retrieve one forum with all subjects
+            $forumLogic = new ForumsLogic();
+            $forum = $forumLogic->retrieveForumById($_GET['id']);
+
+            if(isset($_GET['from']) && is_numeric($_GET['from']) ) {
+                  $forum->loadSubjects($_GET['from']);
+            }
+            else {
+                  $forum->loadSubjects();
+            }
+  
+            // Assign variables to the template
+            $this->actionTpl->assign('user', $this->user);
+            $this->actionTpl->assign('forum', $forum);
+            $this->actionTpl->assign('posts', $forum->subjects);            
+
+            $content = $this->actionTpl->fetch('templates/forums.list.subjects.tpl');
+
+			     $menus = ' ? ' .''.$forum->name.'';
+
+            // Display the action template into the master template
+            $this->display(new Page($content, $forum->name ,$menus));
+
+        }
+
+    } 
+
+
+
+    YDInclude( 'YDF2_process.php' ); 
+
+
+?>

Added: YDFramework2.0/trunk/examples/forum/images/Thumbs.db
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/forum/images/Thumbs.db
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/forum/images/caution.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/forum/images/caution.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/forum/images/error.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/forum/images/error.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/forum/images/ydframework.png
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/forum/images/ydframework.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/forum/includes/config.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/includes/config.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/includes/config.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,33 @@
+<?php
+/*
+ * Configuration file for the Friendly Freddy Forum
+ * 
+ */
+
+/*
+ * rights levels, should be remove with db groups and replaced by roles
+ * */
+define('LEVEL_ADMIN', 5);
+define('LEVEL_MODERATOR', 3);
+define('LEVEL_USER', 1);
+define('LEVEL_ANONYMOUS', 0);
+
+define('GROUP_SIMPLEUSER_ID', 1);
+define('GROUP_INACTIVEUSER_ID', 4);
+
+
+define('DB_HOST', 'localhost');
+define('DB_BASE', 'fff_forum');
+define('DB_USER', 'root');
+define('DB_PASS', '');
+
+define('DB_PREXIX', 'fff_');
+
+define('SECONDS_BETWEEN_POSTS', 20); // number of seconds before the next allowed post
+
+define('NUMBER_SUBJECT_PER_PAGES', 10); // number of subjects in one page of a forum
+
+define('YD_INIT_FILE', dirname( __FILE__ ) . '/../../../YDFramework2/YDF2_init.php');
+
+define('LOCALE', 'en');
+?>

Added: YDFramework2.0/trunk/examples/forum/includes/forums.class.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/includes/forums.class.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/includes/forums.class.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,277 @@
+<?php
+/*
+ * Fichier forums.class.php
+ * D?crit un ?sous?-forum et interragit avec la base de donn?es
+ * 
+ * */
+
+require_once('sqlObject.class.php');
+require_once('posts.class.php');
+
+class ForumObject extends sqlObject {
+  var $id;
+  var $name;
+  var $order;
+  
+  var $nbPosts;
+  var $nbSubjects;
+  
+  var $subjects;
+
+  var $parity; //odd or even, used to alternate template
+   		
+  var $limiteBasse;
+  var $limiteHaute;
+  var $pas;
+  
+  /*
+   * Create a new forum object from known datas
+   * */
+  
+  function ForumObject($name, $order, $id=null) {
+  		//initialize parent construtor
+  		$this->sqlObject();
+  		
+  		$this->id = $id;
+  		$this->name = $name;
+  		$this->order = $order;
+  		
+  		$this->nbPosts=0;
+ 		$this->nbSubjects=0;
+  		$this->subjects = array(); // empty at start, need to be loaded
+  }
+  
+  /*
+   * Insert current forum in the database
+   * 
+   */
+  function insert() {
+	    $values = array();
+	    $values['nameForum'] = $this->name;
+	    $values['`order`'] = $this->order;
+	    
+	    // Insert the values into the database
+	    $this->id = $this->db->executeInsert( DB_PREXIX.'forums', $values );
+  }
+  
+   /*
+   * Update current user in the database
+   * 
+   */
+  function update() {
+	    $values = array();
+	    $values['nameForum'] = $this->name;
+		$values['`order`'] = $this->order;
+
+	    // Insert the values into the database
+	    $this->db->executeUpdate ( DB_PREXIX.'forums', $values, 'idforum = '.$this->id);
+  }
+  
+  /*
+   * Delete current forum from database
+   * */
+   function delete() {
+   		// delete forum object
+   		$this->db->executeDelete ( DB_PREXIX.'forums' , 'idforum = '.$this->id);
+   		
+   		// delete forum posts
+   		$this->db->executeDelete ( DB_PREXIX.'posts' , 'idforum = '.$this->id);
+   		
+   		// delete forums authorisation
+   		//$this->db->executeDelete ( DB_PREXIX.'users_forums_rights' , 'idforum = '.$this->id);
+   }
+  
+  // Load number of subjects and of postst
+  function loadNumbers() {
+  		// count answers and posts
+	  	$sql = ' SELECT COUNT(  idforum  )  AS nbposts ' .
+	  			' FROM  `'.DB_PREXIX.'posts` ' .
+	  			' WHERE idForum = '.$this->id.' ';  
+	    $dbPosts = $this->db->getRecord ( $sql );
+  	 	$this->nbPosts = $dbPosts['nbposts'];
+			
+		$sql = ' SELECT COUNT(  idpost  )  AS nbsubjects ' .
+				' FROM  `'.DB_PREXIX.'posts` ' .
+				' WHERE idForum = '.$this->id.' AND idPostParent IS NULL;';	
+	    $dbSubjects = $this->db->getRecord ( $sql );
+  	 	$this->nbSubjects = $dbSubjects['nbsubjects'];
+	   	
+  }
+  
+  // load subjects corresponding to a research
+  function loadSubjectsMatching($keys) {
+  	// So far, we research the plain keys, without decomposing words with spaces
+  	
+	$sql = 'SELECT idPostParent, idPost' .
+			' FROM  `'.DB_PREXIX.'posts` ' .
+			' WHERE  MATCH ( title, content ) ' .
+			' AGAINST (  \''.addslashes($keys).'\' )';
+
+ 	$dbPostsId = $this->db->getRecords( $sql );
+ 	
+ 	// We retrieve parent subjects id in order to present subjects instead of all posts
+ 	$idSubjects = array();
+ 	foreach($dbPostsId as $i => $item) {
+ 		// post subject or post answers ?
+ 		if($item['idpostparent']==null) {
+ 			$idSubjects[''.$item['idpost'].''] = $item['idpost'];
+ 		}
+ 		else {
+ 			$idSubjects[''.$item['idpostparent'].''] = $item['idpostparent'];
+ 		}
+ 	}
+    
+    $nb = count($idSubjects);
+    
+    if($nb>0) {
+	    // construct id clause query
+	    $where = ' WHERE idpost IN (';
+	    $j=0;
+	
+	    foreach($idSubjects as $i => $item) {
+	    	$j++;
+	    	if($j==$nb) {
+	    	   $where .= ' '.$i.' ';
+	    	}
+	    	else {
+	    	   $where .= ' '.$i.', ';
+	    	}
+	    }
+	    $where .= ' )';
+	    
+	    
+	    // retrieve subjects of matching posts
+		$sql = 'SELECT '.DB_PREXIX.'posts.idpost, '.DB_PREXIX.'posts.title, '.DB_PREXIX.'users.login, '.DB_PREXIX.'users.idUser, '.DB_PREXIX.'posts.datePost, '.DB_PREXIX.'posts.dateAnswer, '.DB_PREXIX.'posts.nbViews, '.DB_PREXIX.'posts.nbAnswers '
+	       .' FROM '.DB_PREXIX.'posts '
+	       .' INNER JOIN '.DB_PREXIX.'users ON '.DB_PREXIX.'users.idUser = '.DB_PREXIX.'posts.idAuthor'
+	       .$where;
+    
+	    $dbSubjects = $this->db->getRecords( $sql );
+	 
+	    foreach($dbSubjects as $i => $item) {
+		  	// on charge un minimum d'informations sur les sujets
+	  		$subject = new PostObject($item['title'], '', $item['iduser'], $item['login'],
+	  			$item['datepost'],$item['dateanswer'], '', null, $this->id, $item['nbviews'],$item['nbanswers'], $item['idpost']);
+	  		$subject->parity = $i%2?'odd':'even';
+	        $this->subjects[] = $subject;
+	      
+	        $this->nbPosts += (1 + $item['nbanswers']);
+	  	}
+	   	$this->nbSubjects = count($this->subjects);
+    }
+  }
+    
+  
+  /*
+   *  Load specified subjects
+   * 
+   * @param $limitMin si the low limit
+   * @param $number is the number of post to show
+   */
+  function loadSubjects($limitMin = 0, $number = NUMBER_SUBJECT_PER_PAGES) {
+  	
+  		// Get all posts informations
+  		$sql = 'SELECT '.DB_PREXIX.'posts.idpost, '.DB_PREXIX.'posts.title, '.DB_PREXIX.'users.login, '.DB_PREXIX.'users.idUser, '.DB_PREXIX.'posts.datePost, '.DB_PREXIX.'posts.dateAnswer, '.DB_PREXIX.'posts.nbViews, '.DB_PREXIX.'posts.nbAnswers '
+           .' FROM '.DB_PREXIX.'posts '
+           .' INNER JOIN '.DB_PREXIX.'users ON '.DB_PREXIX.'users.idUser = '.DB_PREXIX.'posts.idAuthor'
+           .' WHERE '.DB_PREXIX.'posts.idPostParent IS NULL AND '.DB_PREXIX.'posts.idForum = \''.$this->id.'\' ORDER BY '.DB_PREXIX.'posts.dateAnswer DESC';
+     	$sql .= ' LIMIT '.$limitMin.','.$number.';';
+      	      
+     	$dbSubjects = $this->db->getRecords( $sql );
+ 
+      	foreach($dbSubjects as $i => $item) {
+	  		// on charge un minimum d'informations sur les sujets
+	  		$subject = new PostObject($item['title'], '', $item['iduser'], $item['login'],
+	  			$item['datepost'],$item['dateanswer'], '', null, $this->id, $item['nbviews'],$item['nbanswers'], $item['idpost']);
+	  		$subject->parity = $i%2?'odd':'even';
+	        $this->subjects[] = $subject;
+	      
+	        $this->nbPosts += (1 + $item['nbanswers']);
+	  	}
+	   	$this->nbSubjects = count($this->subjects);
+	   	
+	   	
+	   	/*Check if it exists any posts after those getted*/
+   		  	$sql = 'SELECT '.DB_PREXIX.'posts.idpost '
+           .' FROM '.DB_PREXIX.'posts '
+           .' WHERE '.DB_PREXIX.'posts.idPostParent IS NULL AND '.DB_PREXIX.'posts.idForum = \''.$this->id.'\' '
+           .' LIMIT '.($limitMin+$number).',1;';
+
+	     $dbSubjects = $this->db->getRecords( $sql );
+	     if(count($dbSubjects)==1) {
+	     	$this->limiteHaute = $limitMin+NUMBER_SUBJECT_PER_PAGES;
+	     }
+	     else {
+	     	$this->limiteHaute = -1;
+	     }
+	     if($this->limiteHaute <= NUMBER_SUBJECT_PER_PAGES && $this->limiteHaute!=-1) {
+	     	 $this->limiteBasse = -1;
+	     }
+	     else {
+	     	$this->limiteBasse = $limitMin-NUMBER_SUBJECT_PER_PAGES>=0?$limitMin-NUMBER_SUBJECT_PER_PAGES:-1;	
+	     }
+	
+	     $this->pas = NUMBER_SUBJECT_PER_PAGES;
+    }
+}
+
+
+class ForumsLogic extends sqlObject {
+
+	function ForumsLogic() {
+		//initialize parent construtor
+  		$this->sqlObject();	
+	}
+	
+	
+	/*
+	 * Retrieve one forum depending on id
+	 * internal Use only
+	 * */
+	function _retrieveForum($where) {
+  		$sql = 'SELECT '.DB_PREXIX.'forums.idforum, '.DB_PREXIX.'forums.nameforum, '.DB_PREXIX.'forums.order ' .
+  				' FROM '.DB_PREXIX.'forums WHERE '.
+            	$where;
+         
+        $dbForum = $this->db->getRecord( $sql );
+
+	    return new ForumObject($dbForum['nameforum'], $dbForum['order'], $dbForum['idforum']);
+	}
+	function retrieveForumById($id) {
+		return $this->_retrieveForum(DB_PREXIX.'forums.idforum = '.$id);
+	}
+
+	
+	/*
+	 * Retrieve all forums with a specified order
+	 * internal Use only
+	 * */
+	
+	function _retrieveAll($orderSQL, $direction=true, $full=false) {
+		$direction = $direction?' ASC':' DESC';
+  		$sql = 'SELECT '.DB_PREXIX.'forums.idforum, '.DB_PREXIX.'forums.nameforum, '.DB_PREXIX.'forums.order' 
+  		      .' FROM '.DB_PREXIX.'forums ' .
+            $orderSQL.$direction;
+        $dbForums = $this->db->getRecords( $sql );
+	    $forums = array();
+	    foreach($dbForums as $i => $item) {
+  			$forum = new ForumObject($item['nameforum'], $item['order'], $item['idforum']);  
+  			if($full) { $forum->loadSubjects(); } else { $forum->loadNumbers(); }
+  			$forum->parity = $i%2?'odd':'even';
+  			$forums["".$forum->id] = $forum;
+		  }
+		return $forums;
+	}
+	
+	function retrieveAllByOrder($direction=true) {
+		return $this->_retrieveAll('ORDER BY '.DB_PREXIX.'forums.order', $direction);	
+	}
+	
+	function retrieveAllByOrderFull($direction=true) {
+		return $this->_retrieveAll('ORDER BY '.DB_PREXIX.'forums.order', $direction, true);
+	}
+	function retrieveAllByOrderSimple($direction=true) {
+		return $this->_retrieveAll('ORDER BY '.DB_PREXIX.'forums.order', $direction, false);
+	}
+}	
+?>

Added: YDFramework2.0/trunk/examples/forum/includes/groups.class.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/includes/groups.class.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/includes/groups.class.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,120 @@
+<?php
+/*
+ * Fichier groups.class.php
+ * D?crit les groups
+ * 
+ * */
+
+require_once('sqlObject.class.php');
+
+
+class GroupObject extends sqlObject {
+  var $idGroup;
+  var $name;
+  var $rightsLevel;
+  
+  /*
+   * Create a new group object from known datas
+   * 
+   * */
+  
+  function PostObject 	($idGroup, $name, $rightsLevel) {
+  	
+  		//initialize parent construtor
+  		$this->sqlObject();
+
+      	$this->idGroup = $idGroup;
+      	$this->name = $name;
+      	$this->rightsLevel = $rightsLevel;
+  }
+  
+  /*
+   * Insert current group in the database
+   * 
+   */
+  function insert() {
+	    $values = array();
+	    
+	    $values['idGroup'] = $this->idGroup;
+	    $values['name'] = $this->name;
+	    $values['rightsLevel'] = $this->rightsLevel;
+	    
+	    // Insert the values into the database
+	    $this->id = $this->db->executeInsert( DB_PREXIX.'groups', $values );
+  }
+  
+   /*
+   * Update current group in the database
+   * 
+   */
+  function update() {
+	    $values = array();
+
+	    $values['name'] = $this->name;
+	    $values['rightsLevel'] = $this->rightsLevel;
+	    	    
+	    // Insert the values into the database
+	    $this->db->executeUpdate ( DB_PREXIX.'groups', $values, 'idGroup = '.$this->idGroup);
+  }
+  
+  /*
+   * Delete current group from database
+   * */
+   function delete() {
+   		$this->db->executeDelete ( DB_PREXIX.'groups', 'idGroup = '.$this->idGroup);
+   } 
+   
+}
+
+class GroupsLogic extends sqlObject {
+
+	function GroupsLogic() {
+		//initialize parent construtor
+  		$this->sqlObject();
+  		
+	}
+	
+	/*
+	 * Retrieve one group
+	 * */
+	function _retrieveGroup($where) {
+  		$sql = 'SELECT * '.
+  				' FROM '.DB_PREXIX.'groups ' .
+				' WHERE '.
+            	$where;
+	    $dbPost = $this->db->getRecord ( $sql );
+		
+	    return new  GroupObject ($dbPost['idgroup'], $dbPost['name'], $dbPost['rightslevel']);
+	
+	}
+	
+	function retrieveGroupById($id) {
+		return $this->_retrieveGroup(DB_PREXIX.'groups.idGroup = '.addslashes($id));
+	}
+	
+	function listSelectGroups() {
+  		$sql = 'SELECT * '.
+		' FROM '.DB_PREXIX.'groups ';
+    	
+	    $dbGroups = $this->db->getRecords ( $sql );
+		
+		$groups = array();
+		foreach($dbGroups as $i => $group) {
+			$groups[''.$group['idgroup'].''] = $group['name'];
+		}
+	    return $groups;
+	}
+	function getGroups() {
+  		$sql = 'SELECT * '.
+		' FROM '.DB_PREXIX.'groups ';
+    	
+	    $dbGroups = $this->db->getRecords ( $sql );
+		
+		$groups = array();
+		foreach($dbGroups as $i => $group) {
+			$groups[''.$group['idgroup'].''] = new  GroupObject ($group['idgroup'], $group['name'], $group['rightslevel']);
+		}
+	    return $groups;
+	}
+}	
+?>

Added: YDFramework2.0/trunk/examples/forum/includes/page.class.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/includes/page.class.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/includes/page.class.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,13 @@
+<?php
+  class Page {
+    var $content;
+    var $title;
+    var $menus;
+    
+    function Page($content, $title, $menus=null) {
+      $this->content = $content;
+      $this->title = $title;
+      $this->menus = $menus;
+    } 
+  }
+?>

Added: YDFramework2.0/trunk/examples/forum/includes/posts.class.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/includes/posts.class.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/includes/posts.class.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,188 @@
+<?php
+/*
+ * Fichier posts.class.php
+ * D?crit les posts
+ * 
+ * */
+
+require_once('sqlObject.class.php');
+
+
+class PostObject extends sqlObject {
+  var $id;
+  var $title;
+  var $content;
+  
+  var $nbViews;
+  var $nbAnswers;
+  var $idAuthor;
+  var $ipAuthor;
+  var $loginAuthor;
+  var $datePost;
+  var $dateAnswer; // derni?re r?ponse au sujet
+  var $idForum;
+  var $idPostParent;
+  var $nbViews;
+  var $nbAnswers;
+  
+  var $idEditor;
+  var $ipEditor;
+  var $loginEditor;
+  var $dateEdited;
+  
+  var $answers;
+  
+  var $parity;
+  /*
+   * Create a new post object from known datas
+   * 
+   * */
+  
+  function PostObject 	($title, $content, $idAuthor, $loginAuthor , $datePost, $dateAnswer, $ipAuthor,
+	  	$idPostParent, $idForum, $nbViews, $nbAnswers ,$id=null, 
+	  	$idEditor=null, $loginEditor=null, $dateEdited=null, $ipEditor=null) {
+
+  		//initialize parent construtor
+  		$this->sqlObject();
+
+      	$this->title = $title;
+      	$this->content = $content;
+      	$this->idAuthor = $idAuthor;
+      	$this->ipAuthor = $ipAuthor;
+      	$this->loginAuthor = $loginAuthor;
+      	    	
+      	$this->datePost = $datePost;
+      	$this->dateAnswer = $dateAnswer;
+      	$this->idForum = $idForum;
+      	$this->idPostParent = $idPostParent;
+      	$this->nbViews = $nbViews;
+      	$this->nbAnswers = $nbAnswers;
+      	$this->idEditor = $idEditor;
+      	$this->dateEdited = $dateEdited;
+      	$this->id = $id;
+      	$this->loginEditor = $loginEditor;
+      	
+  }
+  
+  /*
+   * Insert current post in the database
+   * 
+   */
+  function insert() {
+	    $values = array();
+	    
+	    $values['title'] = $this->title;
+	    $values['content'] = $this->content;
+      	$values['idAuthor'] = $this->idAuthor;
+      	$values['datePost'] = $this->datePost;
+      	$values['dateAnswer'] = $this->dateAnswer;
+      	$values['ipAuthor'] = $this->ipAuthor;
+      	$values['idForum'] = $this->idForum;
+      	$values['idPostParent'] = $this->idPostParent;
+      	$values['nbViews'] = $this->nbViews;
+      	$values['nbAnswers'] = $this->nbAnswers;
+      	$values['idEditor'] = $this->idEditor;
+      	$values['dateEdited'] = $this->dateEdited;
+      	$values['ipEditor'] = $this->ipEditor;
+      	$values['idPost'] = $this->id; 
+	    
+	    // Insert the values into the database
+	    $this->id = $this->db->executeInsert( DB_PREXIX.'posts', $values );
+  }
+  
+   /*
+   * Update current post in the database
+   * 
+   */
+  function update() {
+	    $values = array();
+	    $values['title'] = $this->title;
+	    $values['content'] = $this->content;
+      	$values['idAuthor'] = $this->idAuthor;
+      	$values['datePost'] = $this->datePost;
+      	$values['dateAnswer'] = $this->dateAnswer;
+      	$values['ipAuthor'] = $this->ipAuthor;
+      	$values['idForum'] = $this->idForum;
+      	$values['idPostParent'] = $this->idPostParent;
+      	$values['nbViews'] = $this->nbViews;
+      	$values['nbAnswers'] = $this->nbAnswers;
+      	$values['idEditor'] = $this->idEditor;
+      	$values['ipEditor'] = $this->ipEditor;
+      	$values['dateEdited'] = $this->dateEdited;
+      	$values['idPost'] = $this->id; 
+	    
+
+	    // Insert the values into the database
+	    $this->db->executeUpdate ( DB_PREXIX.'posts', $values, 'idPost = '.$this->id);
+  }
+  
+  /*
+   * Delete current post from database
+   * */
+   function delete() {
+   		$this->db->executeDelete ( DB_PREXIX.'posts', 'idPost = '.$this->id);
+   		$this->db->executeDelete ( DB_PREXIX.'posts', 'idPostParent = '.$this->id);
+   		$this->authentificated = false;
+   } 
+   
+   		
+         	
+   /*
+    * Load answers of the post
+    */
+   function loadAnswers() {
+   		$sql = 'SELECT '.DB_PREXIX.'posts.title,'.DB_PREXIX.'posts.content,'.DB_PREXIX.'posts.idauthor,'.DB_PREXIX.'posts.datepost,'.DB_PREXIX.'posts.dateanswer,'.DB_PREXIX.'posts.ipauthor,'.DB_PREXIX.'posts.idpostparent,'.DB_PREXIX.'posts.idforum,'.DB_PREXIX.'posts.nbviews,'.DB_PREXIX.'posts.nbanswers,'.DB_PREXIX.'posts.idpost,'.DB_PREXIX.'posts.ideditor,'.DB_PREXIX.'posts.dateedited,'.DB_PREXIX.'posts.ipeditor, author.login AS authorlogin, editor.login AS editorlogin  '.
+  				' FROM '.DB_PREXIX.'posts ' .
+                ' INNER JOIN '.DB_PREXIX.'users AS author ON '.DB_PREXIX.'posts.idAuthor = author.idUser '.
+                ' LEFT JOIN '.DB_PREXIX.'users AS editor ON '.DB_PREXIX.'posts.idEditor = editor.idUser '.
+				'WHERE '.DB_PREXIX.'posts.idPostParent = '.$this->id .' ORDER BY '.DB_PREXIX.'posts.idpost ASC ';
+				
+	    $dbAnswers = $this->db->getRecords ( $sql );
+		foreach($dbAnswers as $i => $item) {
+		$this->answers[] = 	new PostObject 	($item['title'], $item['content'], $item['idauthor'], $item['authorlogin'] , $item['datepost'],  $item['dateanswer'], $item['ipauthor'],
+		  	$item['idpostparent'], $item['idforum'], $item['nbviews'], $item['nbanswers'] ,$item['idpost'], 
+		  	$item['ideditor'], $item['editorlogin'], $item['dateedited'], $item['ipeditor']);		
+		}   	
+   }
+}
+
+
+class PostsLogic extends sqlObject {
+
+	function PostsLogic() {
+		//initialize parent construtor
+  		$this->sqlObject();
+  		
+	}	
+		
+	
+	/*
+	 * Retrieve one user depending on id or name passed as parameter
+	 * internal Use only
+	 * */
+	function _retrievePost($where) {
+   		$sql = 'SELECT '.DB_PREXIX.'posts.title,'.DB_PREXIX.'posts.content,'.DB_PREXIX.'posts.idauthor,'.DB_PREXIX.'posts.datepost,'.DB_PREXIX.'posts.dateanswer,'.DB_PREXIX.'posts.ipauthor,'.DB_PREXIX.'posts.idpostparent,'.DB_PREXIX.'posts.idforum,'.DB_PREXIX.'posts.nbviews,'.DB_PREXIX.'posts.nbanswers,'.DB_PREXIX.'posts.idpost,'.DB_PREXIX.'posts.ideditor,'.DB_PREXIX.'posts.dateedited,'.DB_PREXIX.'posts.ipeditor,editor.login AS logineditor,author.login AS loginauthor '.
+  				' FROM '.DB_PREXIX.'posts ' .
+                ' INNER JOIN '.DB_PREXIX.'users AS author ON '.DB_PREXIX.'posts.idAuthor = author.idUser '.
+                ' LEFT JOIN '.DB_PREXIX.'users AS editor ON '.DB_PREXIX.'posts.idEditor = editor.idUser '.
+				' WHERE '.
+            	$where;
+	    $dbPosts = $this->db->getRecords ( $sql );
+
+		if(count($dbPosts) == 1) {
+			$dbPost = $dbPosts[0];
+			return new  PostObject 	($dbPost['title'], $dbPost['content'], $dbPost['idauthor'], $dbPost['loginauthor'] , $dbPost['datepost'],$dbPost['dateanswer'], $dbPost['ipauthor'],
+	  	$dbPost['idpostparent'], $dbPost['idforum'], $dbPost['nbviews'], $dbPost['nbanswers'] ,$dbPost['idpost'], 
+	  	$dbPost['ideditor'], $dbPost['logineditor'], $dbPost['dateedited'], $dbPost['ipeditor']);
+		}
+		else {
+			return null;	
+		}
+	}
+	
+	function retrievePostById($id) {
+		return $this->_retrievePost(DB_PREXIX.'posts.idpost = '.addslashes($id));
+	}
+	
+}	
+?>

Added: YDFramework2.0/trunk/examples/forum/includes/sqlObject.class.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/includes/sqlObject.class.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/includes/sqlObject.class.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,17 @@
+<?php
+
+YDInclude( 'YDDatabase.php' ); 
+
+class sqlObject {
+	var $db; // database connector
+	
+	function sqlObject() {
+		$this->db = $db = YDDatabase::getInstance( 'mysql', DB_BASE, DB_USER, DB_PASS, DB_HOST ); 
+		 // Fetch as an associative array
+	    YDConfig::set( 'YD_DB_FETCHTYPE', YD_DB_FETCH_ASSOC );
+	}
+}
+
+
+
+?>

Added: YDFramework2.0/trunk/examples/forum/includes/users.class.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/includes/users.class.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/includes/users.class.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,208 @@
+<?php
+/*
+ * Fichier users.class.php
+ * D?crit l'utilisateur du forum et interragit avec la base de donn?es
+ * 
+ * */
+
+require_once('sqlObject.class.php');
+
+class UserObject extends sqlObject {
+  var $id;
+  var $login;
+  var $password; //md5 password
+  var $authentificated; // boolean
+  var $description;
+  var $ip;
+  
+  var $groupid;
+  var $groupname;
+  var $rightslevel; // int
+
+
+  /*
+   * Create a new user object from known datas
+   * @param password in md5 format
+   * */
+  
+  function UserObject($login, $password, $id=null, $description = '', $rightslevel = LEVEL_ANONYMOUS, $groupname ='', $ip=null, $groupid = GROUP_SIMPLEUSER_ID) {
+  		//initialize parent construtor
+  		$this->sqlObject();
+  		
+  		$this->id = $id;
+		$this->login = $login;
+		$this->password = $password;
+		$this->authentificated = false;
+		$this->description = $description;
+		$this->rightslevel = $rightslevel;
+
+		$this->groupid = $groupid;
+		$this->groupname = $groupname;
+		$this->ip = $ip;
+  }
+  
+  /*
+   * Insert current user in the database
+   * 
+   */
+  function insert() {
+	    $values = array();
+	    $values['login'] = $this->login;
+	    $values['password'] = $this->password;
+	    $values['description'] = $this->description;
+	    
+	    // Insert the values into the database
+	    $this->id = $this->db->executeInsert( DB_PREXIX.'users', $values );
+	    
+	    $values = array();
+	    $values['idGroup'] = $this->groupid;
+	    $values['idUser'] = $this->id;
+	    $this->db->executeInsert ( DB_PREXIX.'groups_users', $values);
+  }
+  
+   /*
+   * Update current user in the database
+   * 
+   */
+  function update() {
+	    $values = array();
+	    $values['description'] = $this->description;
+	    $values['password'] = $this->password;
+
+	    // Update the values into the database
+	    $this->db->executeUpdate ( DB_PREXIX.'users', $values, 'iduser = '.$this->id);   	    
+	    $this->db->executeUpdate ( DB_PREXIX.'groups_users', array('idGroup'=>$this->groupid), 'iduser = '.$this->id);
+  }
+  
+  /*
+   * Delete current user from database, in fact we set group to inactive users. Users are never deleted.
+	 */
+   function delete() {
+	    $this->db->executeUpdate ( DB_PREXIX.'groups_users', array('idGroup'=>GROUP_INACTIVEUSER_ID), 'iduser = '.$this->id);;
+   		$this->authentificated = false;
+   }
+  
+  function auth() {
+  	if(isset($this->login) && isset($this->password) && strlen($this->login)>0 && strlen($this->password)>0) {
+  		// Get password in db 
+  		$sql = 'SELECT password, rightsLevel, '.DB_PREXIX.'groups.name, '.DB_PREXIX.'groups.idGroup, '.DB_PREXIX.'users.idUser, '.DB_PREXIX.'users.description '
+             .' FROM '.DB_PREXIX.'users '
+             .' INNER JOIN '.DB_PREXIX.'groups_users ON '.DB_PREXIX.'groups_users.idUser = '.DB_PREXIX.'users.idUser '
+             .' INNER JOIN '.DB_PREXIX.'groups ON '.DB_PREXIX.'groups_users.idGroup = '.DB_PREXIX.'groups.idGroup '
+             .' WHERE '.DB_PREXIX.'users.login = \''.$this->login.'\'';
+	
+	    $result = $this->db->getRecord( $sql );
+
+	    if(isset($result) && $result['password'] == $this->password && $result['rightslevel'] > 0) {
+	      	$this->id = $result['iduser'];
+	      	$this->password = $result['password'];
+	      	$this->rightslevel = $result['rightslevel'];
+	      	$this->authentificated = true;
+		    	$this->description = $result['description'];
+		    	$this->groupname = $result['name'];
+		    	$this->groupid = $result['idgroup'];
+	    	
+
+	    	return true;
+	    }
+	    else {
+	    	return array( 'login' => 'Utilisateur et/ou mot de passe incorrect' );
+	    }
+	    return true;
+  	}
+  	else {
+		return array( 'login' => 'Veuillez renseigner les champs ?login? et ?mot de passe? avant de valider. ' );
+  	}
+  }
+  
+  
+}
+
+
+class UsersLogic extends sqlObject {
+
+	function usersLogic() {
+		//initialize parent construtor
+  		$this->sqlObject();
+  		
+	}	
+	
+	/*
+	 * Retrieve one user depending on id or name passed as parameter
+	 * internal Use only
+	 * */
+	function _retrieveUser($where) {
+  		$sql = 'SELECT '.DB_PREXIX.'groups.name AS groupe, '.DB_PREXIX.'groups.idGroup, '.DB_PREXIX.'groups.rightslevel, '.DB_PREXIX.'users.idUser, '.DB_PREXIX.'users.login, '.DB_PREXIX.'users.password, '.DB_PREXIX.'users.description, '.DB_PREXIX.'users.login '.
+  				' FROM '.DB_PREXIX.'users ' .
+                ' INNER JOIN '.DB_PREXIX.'groups_users ON '.DB_PREXIX.'groups_users.idUser = '.DB_PREXIX.'users.idUser '.
+			    ' INNER JOIN '.DB_PREXIX.'groups ON '.DB_PREXIX.'groups_users.idGroup = '.DB_PREXIX.'groups.idGroup ' . 
+				'WHERE '.
+            	$where;
+
+	    $dbUsers = $this->db->getRecords ( $sql );	
+
+	    if(count($dbUsers)==1) {
+			$dbUser = $dbUsers[0];
+	    	return new UserObject($dbUser['login'], $dbUser['password'], $dbUser['iduser'], $dbUser['description'], $dbUser['rightslevel'], $dbUser['groupe'], '', $dbUser['idgroup']);
+	    }
+	    else {
+	    	return null;
+	    }
+	}
+	function doesLoginAlreadyExists($login) {
+  		$sql = 'SELECT  '.DB_PREXIX.'users.idUser, '.DB_PREXIX.'users.login, '.DB_PREXIX.'users.password, '.DB_PREXIX.'users.description, '.DB_PREXIX.'users.login '.
+  				' FROM '.DB_PREXIX.'users ' .
+				'WHERE '.DB_PREXIX.'users.login = \''.addslashes($login).'\'';
+	    $dbUser = $this->db->getRecords( $sql );	
+	    if(count( $dbUser ) == 1 ) {
+	    	return true;
+	    }
+	    else {
+	    	return false;	
+	    }
+	}
+	
+	function retrieveUserById($id) {
+		return $this->_retrieveUser(DB_PREXIX.'users.iduser = '.$id);
+	}
+	function retrieveUserByLogin($login) {
+		return $this->_retrieveUser(DB_PREXIX.'users.login = \''.$login.'\'');	
+	}
+	
+
+	
+	/*
+	 * Retrieve all users with a specified order
+	 * internal Use only
+	 * */
+	
+	function _retrieveAll($orderSQL, $direction=true) {
+		$direction = $direction?' ASC':' DESC';
+  		$sql = 'SELECT '.DB_PREXIX.'groups.name AS groupe, '.DB_PREXIX.'groups.idgroup, '.DB_PREXIX.'groups.rightslevel, '.DB_PREXIX.'users.idUser, '.DB_PREXIX.'users.login, '.DB_PREXIX.'users.password, '.DB_PREXIX.'users.description, '.DB_PREXIX.'users.login '
+             .' FROM '.DB_PREXIX.'users '
+             .' INNER JOIN '.DB_PREXIX.'groups_users ON '.DB_PREXIX.'groups_users.idUser = '.DB_PREXIX.'users.idUser '.
+			' INNER JOIN '.DB_PREXIX.'groups ON '.DB_PREXIX.'groups_users.idGroup = '.DB_PREXIX.'groups.idGroup ' .
+            $orderSQL.$direction;
+		$dbUsers = $this->db->getRecords( $sql );
+
+		$users = array();
+		foreach($dbUsers as $i => $item) {
+			$users[] = new UserObject($item['login'], $item['password'], $item['iduser'], $item['description'], $item['rightslevel'], $item['groupe'], '', $item['idgroup']);  
+		}
+	    return $users;
+	}
+	
+	function retrieveAllById($direction=true) {
+		return $this->_retrieveAll('ORDER BY '.DB_PREXIX.'users.idUser', $direction);	
+	}
+	
+	function retrieveAllByName($direction=true) {
+		return $this->_retrieveAll('ORDER BY '.DB_PREXIX.'users.login', $direction);	
+	}
+	
+	function retrieveAllByGroup($direction=true) {
+		return $this->_retrieveAll('ORDER BY '.DB_PREXIX.'groups.name', $direction);	
+	}
+	
+}	
+?>

Added: YDFramework2.0/trunk/examples/forum/index.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/index.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/index.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,3 @@
+<?php
+  header("location: forums.php");
+?>

Added: YDFramework2.0/trunk/examples/forum/languages/language_en.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/languages/language_en.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/languages/language_en.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,145 @@
+<?php
+$GLOBALS['t']['global.notconnected'] = 'Your are not connected.';
+$GLOBALS['t']['global.unrecognizederror'] = 'Query unrecognized by the application.';
+$GLOBALS['t']['global.error'] = 'Error : ';
+$GLOBALS['t']['global.erroractionnotallowed'] = 'Error : unauthorized action.';
+$GLOBALS['t']['global.pagedoesnotexists'] = 'Error : document not found.';
+$GLOBALS['t']['global.profileof'] = 'See the profile of';
+$GLOBALS['t']['global.theprofileof'] = 'Profile of';
+$GLOBALS['t']['global.connectedas'] = 'Connected as';
+$GLOBALS['t']['global.forumlist'] = 'Forum list';
+$GLOBALS['t']['global.login'] = 'Login';
+$GLOBALS['t']['global.search'] = 'Search';
+$GLOBALS['t']['global.suscribe'] = 'Suscribe';
+$GLOBALS['t']['global.logout'] = 'Logout';
+$GLOBALS['t']['global.profile'] = 'My profile';
+$GLOBALS['t']['global.admin'] = 'Admin panel';
+$GLOBALS['t']['global.returnforumlist'] = 'Back to the forums';
+$GLOBALS['t']['global.returnhome'] = 'Back to the main page';
+$GLOBALS['t']['global.returnprevious'] = 'Back top the previous page';
+$GLOBALS['t']['global.author'] = 'Author';
+$GLOBALS['t']['global.by'] = 'by';
+$GLOBALS['t']['global.back'] = 'Back';
+$GLOBALS['t']['global.ifnotredirect'] = 'Click here if you are not redirect.';
+$GLOBALS['t']['global.yes'] = 'Yes';
+$GLOBALS['t']['global.no'] = 'No';
+
+$GLOBALS['t']['user.oldpwdincorrect'] = 'Old password is incorrect.';
+$GLOBALS['t']['user.newpwd4chars'] = 'Your new password must be at least 4 characters long.';
+$GLOBALS['t']['user.pwdsnotmatch'] = 'The two new passwords don\'t match.';
+$GLOBALS['t']['user.loginalready'] = 'The login you asked for already exists.';
+$GLOBALS['t']['user.pwd4chars'] = 'Your password must be at least 4 characters long.';
+$GLOBALS['t']['user.login4chars'] = 'Your login must be at least 4 characters long.';
+$GLOBALS['t']['user.2pwd'] = 'Please type your password twice.';
+$GLOBALS['t']['user.login'] = 'Login :';
+$GLOBALS['t']['user.desc'] = 'Describe yourself :';
+$GLOBALS['t']['user.oldpwd'] = 'Old password :';
+$GLOBALS['t']['user.newpwd'] = 'New password :';
+$GLOBALS['t']['user.pwd'] = 'Password :';
+$GLOBALS['t']['user.confirmpwd'] = 'Confirm your password :';
+$GLOBALS['t']['user.valid'] = 'Valid';
+$GLOBALS['t']['user.saveupdate'] = 'Save';
+$GLOBALS['t']['user.unkownuser'] = 'Unkown or deleted user.';
+$GLOBALS['t']['user.suscribeform'] = 'Suscribe form';
+$GLOBALS['t']['user.needauth'] = 'You need to be authenticated to access this page';
+$GLOBALS['t']['user.askdelaccount'] = 'Del my account';
+$GLOBALS['t']['user.delaccount'] = 'Your account has been deleted';
+$GLOBALS['t']['user.delaccountconfirm'] = 'Do you really want to delete your account ?';
+$GLOBALS['t']['user.edityrprofile'] = 'Profile edition :';
+$GLOBALS['t']['user.updateprofileok'] = 'Update have been saved';
+$GLOBALS['t']['user.descprofile'] = 'Fill the following fields only if you want to change your password ';
+$GLOBALS['t']['user.connection'] = 'Connection';
+$GLOBALS['t']['user.administrators'] = 'administrators';
+$GLOBALS['t']['user.moderators'] = 'moderators';
+$GLOBALS['t']['user.users'] = 'users';
+$GLOBALS['t']['user.inactiveusers'] = 'inactive users';
+
+$GLOBALS['t']['posts.toorapid'] = 'You cannot post two message so quickly.';
+$GLOBALS['t']['posts.tooshort'] = 'Your title and your message must each be at least 2 characters long.';
+$GLOBALS['t']['posts.messagetitle'] = 'Message title :';
+$GLOBALS['t']['posts.message'] = 'Message :';
+$GLOBALS['t']['posts.messagehead'] = 'Message';
+$GLOBALS['t']['posts.addmessage'] = 'Add the message';
+$GLOBALS['t']['posts.editmessage'] = 'Edit the message';
+$GLOBALS['t']['posts.newsubject'] = 'Create a thread';
+$GLOBALS['t']['posts.newanswer'] = 'Answer\'s writing';
+$GLOBALS['t']['posts.success'] = 'Your message has been saved.';
+$GLOBALS['t']['posts.updsuccess'] = 'Your message has been updated.';
+$GLOBALS['t']['posts.replyprefix'] = 'Re :';
+$GLOBALS['t']['posts.messageupdate'] = 'Message updating';
+$GLOBALS['t']['posts.notrightupdate'] = 'You cannot edit this message.';
+$GLOBALS['t']['posts.donotexists'] = 'Unknown message';
+$GLOBALS['t']['posts.delmessage'] = 'Del a message';
+$GLOBALS['t']['posts.messagedeleted'] = 'The message has been deleted';
+$GLOBALS['t']['posts.postedon'] = 'Posted on';
+$GLOBALS['t']['posts.editedon'] = 'Edit on';
+$GLOBALS['t']['posts.confirmdelthread'] = 'Are you sure do you want to delete this thread ?';
+$GLOBALS['t']['posts.answer'] = 'Answer';
+$GLOBALS['t']['posts.delete'] = 'Delete a thread';
+$GLOBALS['t']['posts.editmymessage'] = 'Edit my message';
+$GLOBALS['t']['posts.editthemessage'] = 'Edit the message';
+$GLOBALS['t']['posts.updateredirect'] = 'The message has been updated, you\'ll be redirect to the thread.';
+$GLOBALS['t']['posts.addredirect'] = 'Your message has been added, you\'ll be redirect to the thread.';
+$GLOBALS['t']['posts.messageedit'] = 'Edit the message';
+$GLOBALS['t']['posts.pleasesearch'] = 'Before creating a thread, please make sure to have made a research.';
+$GLOBALS['t']['posts.delandredirect'] = 'Thread deleted, you\'ll be redirected to the parent forum.';
+
+$GLOBALS['t']['forums.search3chars'] = 'Search string must be at least 3 characters long.';
+$GLOBALS['t']['forums.search'] = 'Search';
+$GLOBALS['t']['forums.searchstring'] = 'String search';
+$GLOBALS['t']['forums.searchforum'] = 'Search in the forum';
+$GLOBALS['t']['forums.searching'] = 'Search';
+$GLOBALS['t']['forums.suscribe'] = 'Suscribe if you want to post messages !';
+$GLOBALS['t']['forums.createthread'] = 'Create a thread';
+$GLOBALS['t']['forums.thread'] = 'Thread';
+$GLOBALS['t']['forums.threads'] = 'Threads';
+$GLOBALS['t']['forums.answers'] = 'Replies';
+$GLOBALS['t']['forums.messages'] = 'Messages';
+$GLOBALS['t']['forums.readings'] = 'Views';
+$GLOBALS['t']['forums.forums'] = 'Forums';
+$GLOBALS['t']['forums.nextthreads'] = 'next threads';
+$GLOBALS['t']['forums.previousthreads'] = 'previous threads';
+$GLOBALS['t']['forums.nothread'] = 'There\'s no thread in this forum.';
+$GLOBALS['t']['forums.yradmin'] = 'You\'re administrator of this forum.';
+$GLOBALS['t']['forums.yrcensor'] = 'You\'re moderator of this forum.';
+$GLOBALS['t']['forums.noforum'] = 'There aren\'t any threads forum.';
+$GLOBALS['t']['forums.confirmdelthread'] = 'Are you sure do you want to delete this thread ?';
+$GLOBALS['t']['forums.lastanswer'] = 'Last answer on ';
+$GLOBALS['t']['forums.dateprefix'] = 'The ';
+$GLOBALS['t']['forums.searchonforum'] = 'Search on forums';
+$GLOBALS['t']['forums.noresult'] = 'No thread matching to your search.';
+$GLOBALS['t']['forums.startresult'] = 'There are ';
+$GLOBALS['t']['forums.endresult'] = ' threads(s) matching your search :';
+
+$GLOBALS['t']['admin.users'] = 'Users';
+$GLOBALS['t']['admin.userslist'] = 'Users list :';
+$GLOBALS['t']['admin.forums'] = 'Forums';
+$GLOBALS['t']['admin.desc'] = 'Description :';
+$GLOBALS['t']['admin.usergroups'] = 'Users groups :';
+$GLOBALS['t']['admin.saveupdates'] = 'Save modifications';
+$GLOBALS['t']['admin.manageusers'] = 'Manage users';
+$GLOBALS['t']['admin.forumweight'] = 'Forum\'s weight must be an integer include between 0 and 500.';
+$GLOBALS['t']['admin.forumweightorder'] = 'Forum\'s weight (integer from 0 to 500) :';
+$GLOBALS['t']['admin.forumorder'] = 'Forums are ordered by increasing weight';
+$GLOBALS['t']['admin.forumtitle5char'] = 'Forum\s title must be at least 5 characters long.';
+$GLOBALS['t']['admin.newforumtitle'] = 'Title for the new forum :';
+$GLOBALS['t']['admin.forumsave'] = 'Save the forum';
+$GLOBALS['t']['admin.forumweightinteger'] = 'Forum weight must be an integer';
+$GLOBALS['t']['admin.manageforums'] = 'Manage forums';
+$GLOBALS['t']['admin.forumcreate'] = 'Create a forum';
+$GLOBALS['t']['admin.forumedit'] = 'Edition of the forum';
+$GLOBALS['t']['admin.noforums'] = 'There isn\'t any forums.';
+$GLOBALS['t']['admin.subjects'] = 'Threads';
+$GLOBALS['t']['admin.weights'] = 'Weights';
+$GLOBALS['t']['admin.operations'] = 'Actions';
+$GLOBALS['t']['admin.edit'] = 'Edit';
+$GLOBALS['t']['admin.delete'] = 'Delete';
+$GLOBALS['t']['admin.confirmdelforum'] = 'Are you sure to delete this forum and the whole threads it contains ?';
+$GLOBALS['t']['admin.confirmdeluser'] = 'Are you sure you want to desactivate the user ?';
+$GLOBALS['t']['admin.login'] = 'Login';
+$GLOBALS['t']['admin.group'] = 'Group';
+$GLOBALS['t']['admin.actions'] = 'Actions';
+$GLOBALS['t']['admin.unkownuser'] = 'Unknown user.';
+$GLOBALS['t']['admin.editprofileof'] = 'Profile edition of';
+
+?>

Added: YDFramework2.0/trunk/examples/forum/languages/language_fr.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/languages/language_fr.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/languages/language_fr.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,145 @@
+<?php
+$GLOBALS['t']['global.notconnected'] = 'Vous n\'?tes pas connect?.';
+$GLOBALS['t']['global.unrecognizederror'] = 'Requete non reconnue par l\'application.';
+$GLOBALS['t']['global.error'] = 'Erreur : ';
+$GLOBALS['t']['global.erroractionnotallowed'] = 'Erreur : action non autoris?e.';
+$GLOBALS['t']['global.pagedoesnotexists'] = 'Erreur : ressource inexistante.';
+$GLOBALS['t']['global.profileof'] = 'Voir le profil de';
+$GLOBALS['t']['global.theprofileof'] = 'Profil de';
+$GLOBALS['t']['global.connectedas'] = 'Connect&eacute; en tant que';
+$GLOBALS['t']['global.forumlist'] = 'Liste des forums';
+$GLOBALS['t']['global.login'] = 'Se connecter';
+$GLOBALS['t']['global.search'] = 'Rechercher';
+$GLOBALS['t']['global.suscribe'] = 'S&#039;inscrire';
+$GLOBALS['t']['global.logout'] = 'Se d&eacute;connecter';
+$GLOBALS['t']['global.profile'] = 'Mon profil';
+$GLOBALS['t']['global.admin'] = 'Panneau d&#039;administration';
+$GLOBALS['t']['global.returnforumlist'] = 'Retour aux forums';
+$GLOBALS['t']['global.returnhome'] = 'Retour ? la page principale';
+$GLOBALS['t']['global.returnprevious'] = 'Retour ? la page pr?c?dente';
+$GLOBALS['t']['global.author'] = 'Auteur';
+$GLOBALS['t']['global.by'] = 'par';
+$GLOBALS['t']['global.back'] = 'Retour';
+$GLOBALS['t']['global.ifnotredirect'] = 'Cliquez ici si vous n\'?tes pas redirig?.';
+$GLOBALS['t']['global.yes'] = 'Oui';
+$GLOBALS['t']['global.no'] = 'Non';
+
+$GLOBALS['t']['user.oldpwdincorrect'] = 'Ancien mot de passe incorrect.';
+$GLOBALS['t']['user.newpwd4chars'] = 'Votre nouveau mot de passe doit comporter au moins 4 caract?res.';
+$GLOBALS['t']['user.pwdsnotmatch'] = 'Les deux nouveaux mots de passe saisis ne correspondent pas.';
+$GLOBALS['t']['user.loginalready'] = 'Le login souhait? existe d?ja.';
+$GLOBALS['t']['user.pwd4chars'] = 'Votre mot de passe doit comporter au moins 4 caract?res.';
+$GLOBALS['t']['user.login4chars'] = 'Votre login doit comporter au moins 4 caract?res.';
+$GLOBALS['t']['user.2pwd'] = 'Veuillez saisir deux fois votre mots de passe.';
+$GLOBALS['t']['user.login'] = 'Login :';
+$GLOBALS['t']['user.desc'] = 'Description :';
+$GLOBALS['t']['user.oldpwd'] = 'Ancien mot de passe :';
+$GLOBALS['t']['user.newpwd'] = 'Nouveau mot de passe :';
+$GLOBALS['t']['user.pwd'] = 'Mot de passe :';
+$GLOBALS['t']['user.confirmpwd'] = 'Confirmation mot de passe :';
+$GLOBALS['t']['user.valid'] = 'Valider';
+$GLOBALS['t']['user.saveupdate'] = 'Enregistrer';
+$GLOBALS['t']['user.unkownuser'] = 'Le compte de cet utilisateur est inconnu ou a ?t? supprim?.';
+$GLOBALS['t']['user.suscribeform'] = 'Formulaire d\'inscription';
+$GLOBALS['t']['user.needauth'] = 'Vous devez ?tre authentifi? pour acc?der ? cette page';
+$GLOBALS['t']['user.askdelaccount'] = 'Supprimer mon compte';
+$GLOBALS['t']['user.delaccount'] = 'Votre compte a ?t? supprim?';
+$GLOBALS['t']['user.delaccountconfirm'] = 'Etes vous certain(e) de vouloir supprimer d?finitivement votre compte ?';
+$GLOBALS['t']['user.edityrprofile'] = 'Edition de votre profil :';
+$GLOBALS['t']['user.updateprofileok'] = 'Les modifications ont bien ?t? prises en compte';
+$GLOBALS['t']['user.descprofile'] = 'Remplissez les champs suivants uniquement si vous souhaitez changer votre mot de passe ';
+$GLOBALS['t']['user.connection'] = 'Connexion';
+$GLOBALS['t']['user.administrators'] = 'administrateurs';
+$GLOBALS['t']['user.moderators'] = 'mod?rateurs';
+$GLOBALS['t']['user.users'] = 'utilisateurs';
+$GLOBALS['t']['user.inactiveusers'] = 'utilisateur inactif';
+
+$GLOBALS['t']['posts.toorapid'] = 'Vous n\'?tes pas autoris? ? poster deux messages dans un laps de temps aussi court.';
+$GLOBALS['t']['posts.tooshort'] = 'Votre titre et votre texte doivent contenir un minimum de 2 caract?res chacun.';
+$GLOBALS['t']['posts.messagetitle'] = 'Titre du message :';
+$GLOBALS['t']['posts.message'] = 'Message :';
+$GLOBALS['t']['posts.messagehead'] = 'Message';
+$GLOBALS['t']['posts.addmessage'] = 'Ajouter le message';
+$GLOBALS['t']['posts.editmessage'] = 'Editer le message';
+$GLOBALS['t']['posts.newsubject'] = 'Cr?er un sujet de discussion';
+$GLOBALS['t']['posts.newanswer'] = 'R?daction d\'une r?ponse';
+$GLOBALS['t']['posts.success'] = 'Votre message a bien ?t? enregistr?.';
+$GLOBALS['t']['posts.updsuccess'] = 'Le message a bien ?t? modifi?.';
+$GLOBALS['t']['posts.replyprefix'] = 'Re :';
+$GLOBALS['t']['posts.messageupdate'] = 'Edition d\'un message';
+$GLOBALS['t']['posts.notrightupdate'] = 'Vous n\'avez pas le droit d\'?diter ce message';
+$GLOBALS['t']['posts.donotexists'] = 'Message innexistant';
+$GLOBALS['t']['posts.delmessage'] = 'Suppression d\'un message';
+$GLOBALS['t']['posts.messagedeleted'] = 'Le message a ?t? supprim?';
+$GLOBALS['t']['posts.postedon'] = 'Post? le';
+$GLOBALS['t']['posts.editedon'] = 'Edit? le';
+$GLOBALS['t']['posts.confirmdelthread'] = 'Etes vous certain(e) de vouloir supprimer le sujet de discussion ?';
+$GLOBALS['t']['posts.answer'] = 'R?pondre';
+$GLOBALS['t']['posts.delete'] = 'Supprimer le sujet de discussion';
+$GLOBALS['t']['posts.editmymessage'] = 'Editer mon message';
+$GLOBALS['t']['posts.editthemessage'] = 'Editer le message';
+$GLOBALS['t']['posts.updateredirect'] = 'Le message a bien ?t? modifi?, vous allez ?tre redirig? vers le message.';
+$GLOBALS['t']['posts.addredirect'] = 'Votre message a bien ?t? ajout?, vous allez ?tre redirig? vers votre message.';
+$GLOBALS['t']['posts.messageedit'] = 'Edition du message';
+$GLOBALS['t']['posts.pleasesearch'] = 'Avant de cr?er un sujet, assurez vous d\'avoir au pr?alable pens? ? r?aliser une recherche.';
+$GLOBALS['t']['posts.delandredirect'] = 'Le message a ?t? supprim?, vous allez ?tre redirig? vers le forum parent.';
+
+$GLOBALS['t']['forums.search3chars'] = 'La chaine ? rechercher doit faire au moins trois caract?res.';
+$GLOBALS['t']['forums.search'] = 'Rechercher';
+$GLOBALS['t']['forums.searchstring'] = 'Chaine ? rechercher';
+$GLOBALS['t']['forums.searchforum'] = 'Rechercher dans le forum';
+$GLOBALS['t']['forums.searching'] = 'Recherche';
+$GLOBALS['t']['forums.suscribe'] = 'Inscrivez vous pour pouvoir poster des messages !';
+$GLOBALS['t']['forums.createthread'] = 'Cr?er un sujet';
+$GLOBALS['t']['forums.thread'] = 'Sujet';
+$GLOBALS['t']['forums.threads'] = 'Sujets';
+$GLOBALS['t']['forums.answers'] = 'R?ponses';
+$GLOBALS['t']['forums.messages'] = 'Messages';
+$GLOBALS['t']['forums.readings'] = 'Vues';
+$GLOBALS['t']['forums.forums'] = 'Forums';
+$GLOBALS['t']['forums.nextthreads'] = 'sujets suivants';
+$GLOBALS['t']['forums.previousthreads'] = 'sujets pr?c?dents';
+$GLOBALS['t']['forums.nothread'] = 'Il n\'y a aucun sujet dans ce forum.';
+$GLOBALS['t']['forums.yradmin'] = 'Vous ?tes administrateur de ce forum.';
+$GLOBALS['t']['forums.yrcensor'] = 'Vous ?tes mod?rateur de ce forum.';
+$GLOBALS['t']['forums.noforum'] = 'Il n\'existe encore aucun forum de discussion.';
+$GLOBALS['t']['forums.confirmdelthread'] = 'Etes vous certain(e) de vouloir supprimer le sujet de discussion ?';
+$GLOBALS['t']['forums.lastanswer'] = 'Derni?re r?ponse le ';
+$GLOBALS['t']['forums.dateprefix'] = 'Le ';
+$GLOBALS['t']['forums.searchonforum'] = 'Rechercher sur les forums';
+$GLOBALS['t']['forums.noresult'] = 'Aucun sujet ne correspondant ? votre recherche n\'a ?t? trouv?.';
+$GLOBALS['t']['forums.startresult'] = 'Il y a ';
+$GLOBALS['t']['forums.endresult'] = ' sujet(s) correspondant(s) ? votre recherche :';
+
+$GLOBALS['t']['admin.users'] = 'Utilisateurs';
+$GLOBALS['t']['admin.userslist'] = 'Liste des utilisateurs :';
+$GLOBALS['t']['admin.forums'] = 'Forums';
+$GLOBALS['t']['admin.desc'] = 'Description :';
+$GLOBALS['t']['admin.usergroups'] = 'Groupe d\'utilisateurs :';
+$GLOBALS['t']['admin.saveupdates'] = 'Enregistrer les modifications';
+$GLOBALS['t']['admin.manageusers'] = 'Gestion des utilisateurs';
+$GLOBALS['t']['admin.forumweight'] = 'Le poids du forum doit ?tre un entier compris entre 0 et 500.';
+$GLOBALS['t']['admin.forumweightorder'] = 'Poids du forum (entier de 0 ? 500) :';
+$GLOBALS['t']['admin.forumorder'] = 'Les forums sont class?s par ordre de poids croissant';
+$GLOBALS['t']['admin.forumtitle5char'] = 'Le titre du forum doit faire au moins 5 caract?res.';
+$GLOBALS['t']['admin.newforumtitle'] = 'Titre du nouveau forum :';
+$GLOBALS['t']['admin.forumsave'] = 'Enregistrer le forum';
+$GLOBALS['t']['admin.forumweightinteger'] = 'Le poids du forum doit ?tre un entier';
+$GLOBALS['t']['admin.manageforums'] = 'Gestion des forums';
+$GLOBALS['t']['admin.forumcreate'] = 'Cr?er un forum';
+$GLOBALS['t']['admin.forumedit'] = 'Edition du forum';
+$GLOBALS['t']['admin.noforums'] = 'Il n\'existe encore aucun forum de discussion.';
+$GLOBALS['t']['admin.subjects'] = 'Sujets';
+$GLOBALS['t']['admin.weights'] = 'Poids';
+$GLOBALS['t']['admin.operations'] = 'Operations';
+$GLOBALS['t']['admin.edit'] = 'Editer';
+$GLOBALS['t']['admin.delete'] = 'Supprimer';
+$GLOBALS['t']['admin.confirmdelforum'] = 'Etes vous certain(e) de vouloir supprimer ce forum ainsi que tous les messages qu\&#39;il contient ?';
+$GLOBALS['t']['admin.confirmdeluser'] = 'Etes vous certain de vouloir supprimer l\&#39;utilisateur ?';
+$GLOBALS['t']['admin.login'] = 'Login';
+$GLOBALS['t']['admin.group'] = 'Groupe';
+$GLOBALS['t']['admin.actions'] = 'Actions';
+$GLOBALS['t']['admin.unkownuser'] = 'Utilisateur inconnu.';
+$GLOBALS['t']['admin.editprofileof'] = 'Edition du profil utilisateur de';
+
+?>

Added: YDFramework2.0/trunk/examples/forum/posts.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/posts.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/posts.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,328 @@
+<?php
+    
+    // Includes main class of the site
+    require_once('fffRequest.php');
+    
+    // Include the classes needed on this page
+    // .... YDInclude( 'YDRequest.php' ); 
+    require_once('includes/posts.class.php');
+ 	require_once('includes/forums.class.php');
+ 	
+    // Define the request class
+    class posts extends fffRequest {
+
+        // Class constructor
+        function posts() {
+            // Initialize the parent
+            $this->fffRequest();
+
+        }
+
+        // The default action
+        function actionDefault() {
+            header('location: forums.php');
+            return;
+        }
+        
+        
+        function actionViewPost() {
+           
+            // Assign variables to the template
+			
+						$postlogic = new PostsLogic();
+						$post = $postlogic->retrievePostById($_GET['id']);
+						$post->nbViews++;
+						$post->update();
+						$post->loadAnswers();
+						
+						$forumLogic = new ForumsLogic();
+            $forum = $forumLogic->retrieveForumById($post->idForum);
+            
+            $menus = ' ? ' .
+            		'<a class="fff_link1" href="forums.php?do=viewForum&amp;id='.$forum->id.'">'.$forum->name.'</a>' .
+            		' ? '.$post->title;
+                        
+            $this->actionTpl->assign( 'post', $post);
+            $this->actionTpl->assign('user', $this->user);
+            $this->actionTpl->assign('forum', $forum);
+
+            $content = new Page($this->actionTpl->fetch('templates/posts.view.tpl'), $post->title, $menus);
+
+            // Display the action template into the master template
+            $this->display($content);
+        }
+        
+        function checkPost( $fields ) {
+        	// Controle de l'utilisateur, on ne peut pas poster deux messages trop rapidement
+        	if(isset($_SESSION['s_user_post_time'])) {
+        		if(($_SESSION['s_user_post_time']+SECONDS_BETWEEN_POSTS) > mktime()){
+        			return array( 'timing' => t('posts.toorapid') );
+        		}
+        	}
+        	// les deux champs sont-ils replis
+        	if(strlen($fields['postTitle'])>2 && strlen($fields['postContent'])>2) {
+				return true;
+        	}
+	        else {
+	        	return array( 'profile' => t('posts.tooshort') );
+	        }
+       	}
+        function simpleCheckPost( $fields ) {
+        	// les deux champs sont-ils replis
+        	if(strlen($fields['postTitle'])>2 && strlen($fields['postContent'])>2) {
+				return true;
+        	}
+	        else {
+	        	return array( 'profile' => t('posts.tooshort') );
+	        }	
+        }
+        
+        
+        
+        function actionRepondre() {
+        	$this->forward('AddPost');
+        }
+        
+        
+        function actionAddPost() {
+        	if(!isset($_GET['idForum'])) {
+        		$this->errorRequete();
+        		return;
+        	}
+        	
+        	if($this->user->authentificated) {
+						$forumLogic = new ForumsLogic();
+						$forum = $forumLogic->retrieveForumById($_GET['idForum']);
+						
+				
+	        	// Create the add post form
+	          $form = new YDForm( 'postAdd' );
+	            
+						$form->addElement( 'hidden' , 'idForum', $_GET['idForum'] );
+		
+						$form->addElement( 'text', 'postTitle', t('posts.messagetitle') , array("size" => 60));
+	          $form->addElement( 'textarea', 'postContent', t('posts.message') , array("cols" => 50, "rows" => 8));
+	          $form->addElement( 'submit', 'cmdSubmit', t('posts.addmessage') );
+
+						if(isset($_GET['idPostParent'])) {
+							$postLogic = new PostsLogic();
+							$postParent = $postLogic->retrievePostById($_GET['idPostParent']);
+							$form->addElement( 'hidden' , 'idPostParent', $postParent->id);
+						}
+						else {
+							$postParent = null;
+						}
+
+						// nouveau post ou r?ponse ?
+						if($postParent==null) {
+							$titre =  t('posts.newsubject');
+							
+							$menus = ' ? ' .
+			            		'<a class="fff_link1" href="forums.php?do=viewForum&amp;id='.$forum->id.'">'.$forum->name.'</a>' .
+			            		' ? '.$titre;
+						}
+						else {
+							$titre =   t('posts.newanswer');
+							
+							$menus = ' ? ' .
+			            		'<a class="fff_link1" href="forums.php?do=viewForum&amp;id='.$forum->id.'">'.$forum->name.'</a>' .
+			            		' ? '.$titre;
+						}
+				
+	          // Add rules
+	          $form->addFormRule( array( & $this, 'checkPost' ) );
+	
+	          // Process the form
+					  if ( $form->validate() ) {
+									$idPP = isset($_GET['idPostParent'])?$_GET['idPostParent']:null;
+									
+									// Ins?re le poste			
+									$post = new PostObject 	($form->getValue( 'postTitle' ), $form->getValue( 'postContent' ), $this->user->id , $this->user->login , date('Y-m-d H:i:s', mktime()),date('Y-m-d H:i:s', mktime()), $this->user->ip,
+					  					$idPP, $_GET['idForum'], 0, 0);
+									$post->insert();
+														
+									// Verrouillage de l'utilisateur avant de pouvoir poster un nouveau post
+									$_SESSION['s_user_post_time'] = mktime();
+									
+									// affiche la page de confirmation
+					        $this->actionTpl->assign( 'insert', true);
+	                
+	                // on redirige sur le post parent si il existe
+	                if($postParent!=null) {
+			            		// on incr?mente le nombre de r?ponses
+			            		$postParent->nbAnswers++;
+			            		$postParent->dateAnswer = date('Y-m-d H:i:s', mktime());
+			            		$postParent->update();
+			                $this->actionTpl->assign( 'post', $postParent);
+	                }
+	                else {
+	                	$this->actionTpl->assign( 'post', $post);
+	                }
+					
+									$content = new page($this->actionTpl->fetch('templates/posts.success.tpl'), t('posts.success'), $menus);
+									$this->display($content);
+	               	return;
+	            }
+	            
+							$form->setDefaults( array( 'postIdForum' => $_GET['idForum'] ) ); 
+							if($postParent!=null) {
+								$form->setDefaults( array( 'postTitle' => t('posts.replyprefix').$postParent->title ) ); 
+							}
+		
+	            // Assign variables to the template
+	            $this->actionTpl->assign( 'form',$form->toArray()); // forms
+			 				$this->actionTpl->assign( 'forum',$forum); // forum for displaying name
+			 				$this->actionTpl->assign( 'user',$this->user); // user for rights
+
+	            $content = new page($this->actionTpl->fetch('templates/posts.new.tpl'),$titre, $menus);
+
+        	}
+
+        	else {
+
+        		$content = new page($this->actionTpl->fetch('templates/user.notAuth.tpl'), t('global.notconnected') );
+
+        	}
+
+
+
+            // Display the action template into the master template
+
+            $this->display($content);
+    
+       }
+        
+       function actionEditPost() {
+        	if(!isset($_GET['idPost'])) {
+        		$this->errorRequete();
+        		return;
+        	}
+        	
+			if($this->user->authentificated) {
+				$postlogic = new PostsLogic();
+				$post = $postlogic->retrievePostById($_GET['idPost']);
+				if($post!=null) {
+					if($this->user->rightslevel>=LEVEL_MODERATOR || $this->user->id == $post->idAuthor) {
+									
+			        	// Create the add post form
+			            $form = new YDForm( 'postEdit' );
+			            
+									$form->addElement( 'hidden' , 'idPost', $post->id);
+				
+									$form->addElement( 'text', 'postTitle', t('posts.messagetitle') , array("size" => 60));
+			            $form->addElement( 'textarea', 'postContent', t('posts.message'), array("cols" => 50, "rows" => 8));
+			            $form->addElement( 'submit', 'cmdSubmit', t('posts.editmessage') );
+				
+									// Add rules
+			            $form->addFormRule( array( & $this, 'simpleCheckPost' ) );
+			
+			            // Process the form
+			            if ( $form->validate() ) {
+			            	$post->title = $form->getValue( 'postTitle' );
+			            	$post->content = $form->getValue( 'postContent' );
+			            	$post->idEditor = $this->user->id;
+			            	$post->ipEditor = $this->user->ip;
+			            	$post->dateEdited = date('Y-m-d H:i:s', mktime());
+			            	
+			            	$post->update();
+			            	 // on redirige sur le post parent si il existe
+			                if($post->idPostParent!=null) {
+			                	$postParent = $postlogic->retrievePostById($post->idPostParent);
+			            					                	
+			            			$postParent->dateAnswer = date('Y-m-d H:i:s', mktime());
+			            			$postParent->update();
+			                	$this->actionTpl->assign( 'post', $postParent);
+			                }
+			                else {
+			                	$this->actionTpl->assign( 'post', $post);
+			                }
+											$this->actionTpl->assign( 'editMessage',true); // we are editing the message
+											$content = new page($this->actionTpl->fetch('templates/posts.success.tpl'), t('posts.updsuccess') ) ;
+											$this->display($content);
+			               	return;
+			            }
+				
+									$form->setDefaults( array( 'postTitle' => $post->title ) ); 
+									$form->setDefaults( array( 'postContent' => $post->content ) ); 
+								     
+								  // Assign variables to the template
+						      $this->actionTpl->assign( 'form',$form->toArray()); // forms
+					 				$this->actionTpl->assign( 'user',$this->user); // user for rights
+									$this->actionTpl->assign( 'editMessage',true); // we are editing the message
+		
+			            $content = new page($this->actionTpl->fetch('templates/posts.new.tpl'),t('posts.messageupdate') );
+		
+									$this->display($content);
+		              return;
+					}
+					else {
+						$this->errorRequete(t('posts.notrightupdate'));
+        		return;
+					}
+				}
+				else {
+					$this->errorRequete(t('posts.donotexists'));
+        	return;
+				}
+			}
+			else {
+				$content = new page($this->actionTpl->fetch('templates/user.notAuth.tpl'), t('global.notconnected') );
+			}
+      } 
+        
+        
+        
+      function actionDelPost() {
+      		if(isset($_GET['idPost'])) {
+      			
+			
+					$postlogic = new PostsLogic();
+					$post = $postlogic->retrievePostById($_GET['idPost']);
+					if($post!=null) {
+	
+							$forumLogic = new ForumsLogic();
+		          $forum = $forumLogic->retrieveForumById($post->idForum);
+					
+
+		        	if($this->user->rightslevel >= LEVEL_MODERATOR) {
+		        		
+		        		if($post->idPostParent!=null) {
+									$postParent = $postlogic->retrievePostById($post->idPostParent);
+									$postParent->nbAnswers--;
+								}
+								$forum->nbPosts -= 1;
+														
+								$post->delete();
+								
+								$menus = ' ? ' .
+			            		'<a class="fff_link1" href="forums.php?do=viewForum&amp;id='.$forum->id.'">'.$forum->name.'</a>' .
+			            		' ? '.t('posts.delmessage');
+						
+								// affiche l'op?ration a ?t? effectu?e
+								$this->actionTpl->assign( 'post', $post);
+								
+								$content = new page($this->actionTpl->fetch('templates/posts.del.tpl'), t('posts.messagedeleted') , $menus);
+								$this->display($content);
+				        return;
+			    
+		        	}
+		        	else {
+		        		$this->errorActionNotAllowed();
+		        		return;
+		        	}
+				}
+				else {
+					$this->errorRequete();
+      		return;	
+				}
+      		}
+      		else {
+      			$this->errorRequete();
+      			return;	
+      		}
+        }
+    } 
+
+    YDInclude( 'YDF2_process.php' ); 
+
+?>

Added: YDFramework2.0/trunk/examples/forum/readme.txt
===================================================================
--- YDFramework2.0/trunk/examples/forum/readme.txt	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/readme.txt	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,6 @@
+Create a database, load sql/fff.sql and configure includes/config.php
+
+Predefined user:password couples for the forum are
+root:root
+user1:user1
+user2:user2

Added: YDFramework2.0/trunk/examples/forum/sql/fff.sql
===================================================================
--- YDFramework2.0/trunk/examples/forum/sql/fff.sql	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/sql/fff.sql	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,136 @@
+-- phpMyAdmin SQL Dump
+-- version 2.6.4-pl1
+-- http://www.phpmyadmin.net
+-- 
+-- Host: localhost
+-- Generation Time: Oct 29, 2005 at 10:11 AM
+-- Server version: 4.0.15
+-- PHP Version: 4.3.10
+-- 
+-- Database: `fff_forum`
+-- 
+
+-- --------------------------------------------------------
+
+-- 
+-- Table structure for table `fff_forums`
+-- 
+
+CREATE TABLE `fff_forums` (
+  `idForum` int(11) NOT NULL auto_increment,
+  `nameForum` varchar(255) NOT NULL default '',
+  `order` int(11) NOT NULL default '0',
+  PRIMARY KEY  (`idForum`)
+) TYPE=MyISAM AUTO_INCREMENT=394 ;
+
+-- 
+-- Dumping data for table `fff_forums`
+-- 
+
+INSERT INTO `fff_forums` VALUES (1, 'Java frameworks', 5);
+INSERT INTO `fff_forums` VALUES (2, 'PHP 4 & 5 Frameworks', 14);
+
+-- --------------------------------------------------------
+
+-- 
+-- Table structure for table `fff_groups`
+-- 
+
+CREATE TABLE `fff_groups` (
+  `idGroup` int(11) NOT NULL auto_increment,
+  `name` varchar(255) NOT NULL default '',
+  `rightsLevel` int(11) NOT NULL default '1',
+  PRIMARY KEY  (`idGroup`),
+  UNIQUE KEY `nameGroup` (`name`)
+) TYPE=MyISAM AUTO_INCREMENT=5 ;
+
+-- 
+-- Dumping data for table `fff_groups`
+-- 
+
+INSERT INTO `fff_groups` VALUES (1, 'users', 1);
+INSERT INTO `fff_groups` VALUES (2, 'moderators', 3);
+INSERT INTO `fff_groups` VALUES (3, 'administrators', 5);
+INSERT INTO `fff_groups` VALUES (4, 'inactive users', 0);
+
+-- --------------------------------------------------------
+
+-- 
+-- Table structure for table `fff_groups_users`
+-- 
+
+CREATE TABLE `fff_groups_users` (
+  `idGroup` int(11) NOT NULL default '0',
+  `idUser` int(11) NOT NULL default '0',
+  PRIMARY KEY  (`idGroup`,`idUser`)
+) TYPE=MyISAM;
+
+-- 
+-- Dumping data for table `fff_groups_users`
+-- 
+
+INSERT INTO `fff_groups_users` VALUES (1, 0);
+INSERT INTO `fff_groups_users` VALUES (1, 4);
+INSERT INTO `fff_groups_users` VALUES (1, 5);
+INSERT INTO `fff_groups_users` VALUES (1, 6);
+INSERT INTO `fff_groups_users` VALUES (3, 3);
+INSERT INTO `fff_groups_users` VALUES (4, 16);
+
+-- --------------------------------------------------------
+
+-- 
+-- Table structure for table `fff_posts`
+-- 
+
+CREATE TABLE `fff_posts` (
+  `idPost` int(11) NOT NULL auto_increment,
+  `title` varchar(255) NOT NULL default '',
+  `content` longtext NOT NULL,
+  `idAuthor` int(11) NOT NULL default '0',
+  `datePost` datetime NOT NULL default '0000-00-00 00:00:00',
+  `dateAnswer` datetime NOT NULL default '0000-00-00 00:00:00',
+  `ipAuthor` varchar(15) NOT NULL default '',
+  `idEditor` int(11) default NULL,
+  `dateEdited` datetime default NULL,
+  `ipEditor` varchar(15) default NULL,
+  `idPostParent` int(11) default NULL,
+  `nbViews` int(11) NOT NULL default '0',
+  `nbAnswers` int(11) NOT NULL default '0',
+  `idForum` int(11) NOT NULL default '0',
+  PRIMARY KEY  (`idPost`),
+  FULLTEXT KEY `title` (`title`,`content`)
+) TYPE=MyISAM AUTO_INCREMENT=5 ;
+
+-- 
+-- Dumping data for table `fff_posts`
+-- 
+
+INSERT INTO `fff_posts` VALUES (1, 'PHPMVC', 'Qu''en pensez vous ?', 4, '2005-10-15 15:29:28', '2005-10-15 15:29:28', '192.168.0.66', NULL, NULL, NULL, NULL, 4, 0, 2);
+INSERT INTO `fff_posts` VALUES (2, 'YellowDuck', 'Enorme non ?', 4, '2005-10-15 15:30:15', '2005-10-15 15:30:15', '192.168.0.66', NULL, NULL, NULL, NULL, 5, 0, 2);
+INSERT INTO `fff_posts` VALUES (3, 'des utilisateurs de Struts ?', 'dans le coin ?', 4, '2005-10-15 15:30:57', '2005-10-15 15:30:57', '192.168.0.66', NULL, NULL, NULL, NULL, 3, 0, 1);
+INSERT INTO `fff_posts` VALUES (4, 'Mojavi', 'Moi j''aime pas, et vous ?', 4, '2005-10-15 15:32:31', '2005-10-15 15:32:31', '192.168.0.66', NULL, NULL, NULL, NULL, 4, 0, 2);
+
+-- --------------------------------------------------------
+
+-- 
+-- Table structure for table `fff_users`
+-- 
+
+CREATE TABLE `fff_users` (
+  `idUser` int(11) NOT NULL auto_increment,
+  `login` varchar(255) NOT NULL default '',
+  `password` varchar(255) NOT NULL default '',
+  `description` text NOT NULL,
+  PRIMARY KEY  (`idUser`),
+  UNIQUE KEY `nameUser` (`login`)
+) TYPE=MyISAM AUTO_INCREMENT=17 ;
+
+-- 
+-- Dumping data for table `fff_users`
+-- 
+
+
+INSERT INTO `fff_users` VALUES (3, 'root', '63a9f0ea7bb98050796b649e85481845', 'root');
+INSERT INTO `fff_users` VALUES (4, 'user1', '24c9e15e52afc47c225b757e7bee1f9d', 'Compte Test User 1\r\nMod?rateur');
+INSERT INTO `fff_users` VALUES (5, 'user2', '7e58d63b60197ceb55a1c487989a3720', 'Compte Test User 2');
+INSERT INTO `fff_users` VALUES (16, 'user3', '92877af70a45fd6a2ed7fe81e1236b78', 'Utilisateur inactif');

Added: YDFramework2.0/trunk/examples/forum/templates/admin.forum.edit.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/admin.forum.edit.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/admin.forum.edit.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,22 @@
+<br />
+{if $form.errors}
+    <div class="fff_error">
+        <img src="images/caution.gif" /><br /> 
+        {foreach from=$form.errors item=error}
+            {$error}<br />
+        {/foreach}
+    </div>
+{/if}
+<div class="fff_form_container" >
+	<div class="fff_title">
+		{t w="admin.forumedit"}
+	</div>
+	<br />
+	<form {$form.attribs} class="fff_form">
+		<table> 
+			<tr><td class="fff_left">{$form.forumTitle.label}</td><td class="fff_left">{$form.forumTitle.html}</td></tr>
+			<tr><td class="fff_left">{$form.forumPoids.label}</td><td class="fff_left">{$form.forumPoids.html}</td></tr>
+			<tr><td></td><td class="fff_right">{$form.cmdSubmit.html}</td></tr>
+		</table>
+    </form>
+</div>

Added: YDFramework2.0/trunk/examples/forum/templates/admin.forums.list.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/admin.forums.list.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/admin.forums.list.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,42 @@
+<div class="fff_title">
+	{t w="admin.manageforums"}
+</div>
+<br />
+{t w="admin.forumorder"}
+
+{if $forums}
+  <table class="fff_table" id="listeforums">
+
+    <tr class="fff_title"><th class="fff_tMai">{t w="admin.forums"}</th><th class="fff_tNbe">{t w="admin.weights"}</th><th class="fff_tNbe">{t w="admin.subjects"}</th><th class="tNbe">{t w="admin.operations"}</th></tr>
+
+    {foreach from=$forums item=forum}
+        <tr class="fff_trow0{$forum->parity}"><td class="fff_rMai">{$forum->name}</a></td><td class="fff_rNbe">{$forum->order}</td><td class="fff_rNbe">{$forum->nbSubjects}</td><td class="fff_rNbe"><a href="admin.php?do=EditForum&amp;idforum={$forum->id}" class="fff_link1">{t w="admin.edit"}</a> - <a href="admin.php?do=DelForum&amp;idforum={$forum->id}" class="fff_link1" onclick="return confirm('{t w="admin.confirmdelforum"}');">{t w="admin.delete"}</a></td></tr>
+    {/foreach}
+
+  </table>
+{else}
+    <p>{t w="admin.noforums"}</p>
+{/if}
+
+<br />
+{if $form.errors}
+    <div class="fff_error">
+        <img src="images/caution.gif" /><br /> 
+        {foreach from=$form.errors item=error}
+            {$error}<br />
+        {/foreach}
+    </div>
+{/if}
+<div class="fff_form_container" >
+	<div class="fff_title">
+	{t w="admin.forumcreate"}
+	</div>
+	<br />
+	<form {$form.attribs} class="fff_form">
+		<table> 
+			<tr><td class="fff_left">{$form.forumTitle.label}</td><td class="fff_left">{$form.forumTitle.html}</td></tr>
+			<tr><td class="fff_left">{$form.forumPoids.label}</td><td class="fff_left">{$form.forumPoids.html}</td></tr>
+			<tr><td></td><td class="fff_right">{$form.cmdSubmit.html}</td></tr>
+		</table>
+    </form>
+</div>

Added: YDFramework2.0/trunk/examples/forum/templates/admin.user.edit.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/admin.user.edit.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/admin.user.edit.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,28 @@
+{if $userfound }
+	<div class="fff_form_container" >
+	    {if $form.errors}
+	        <div class="error">
+	        	<img src="images/caution.gif" /><br />
+	            {foreach from=$form.errors item=error}
+	                {$error}<br>
+	            {/foreach}
+	        </div>
+	    {/if}
+	    <div class="fff_title">
+		    {t w="admin.editprofileof"} {$user->login}:<br /><br />
+		</div>
+	    <form {$form.attribs} class="fff_form">
+	    
+	        	<table> 
+					<tr><td class="fff_left">{$form.userDescription.label}</td><td class="fff_left">{$form.userDescription.html}</td></tr>
+					<tr><td class="fff_left">{$form.userGroup.label}</td><td class="fff_left">{$form.userGroup.html}</td></tr>
+					<tr><td></td><td class="fff_right">{$form.cmdSubmit.html}</td></tr>
+				</table>  
+	    
+	    </form>
+	
+	    <br />
+	</div>
+{else}
+	{t w="admin.unkownuser"}
+{/if}

Added: YDFramework2.0/trunk/examples/forum/templates/admin.users.list.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/admin.users.list.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/admin.users.list.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,20 @@
+
+{t w="admin.userslist"} <br /><br />
+
+<div style="margin:auto;text-align:center">
+
+  <table class="fff_table" id="listeUsers">
+
+    <tr class="fff_title"><th>Id</th><th>{t w="admin.login"}</th><th>{t w="admin.group"}</th><th>{t w="admin.actions"}</th></tr>
+	
+	{assign var="parity" value="odd"}
+    {foreach from=$users item=user}
+        <tr class="fff_trow0{$parity}"><td>{$user->id}</a></td><td><a title="{t w="global.profileof"} {$user->login}" href="user.php?do=ViewProfil&amp;userLogin={$user->login}" class="fff_link2">{$user->login}</a></td><td>{$user->groupname}</td><td><a href="{$YD_SELF_SCRIPT}?do=EditUser&amp;userLogin={$user->login}" class="fff_link1">Editer</a> - <a href="{$YD_SELF_SCRIPT}?do=DelUser&amp;iduser={$user->id}" class="fff_link1" onclick="return confirm('{t w="admin.confirmdeluser"}');">{t w="admin.delete"}</a></td></tr>
+    	{if $parity=="odd"}
+			{assign var="parity" value="even"}
+		{else}
+			{assign var="parity" value="odd"}
+		{/if}
+    {/foreach}
+  </table>
+</div>

Added: YDFramework2.0/trunk/examples/forum/templates/errorApplication.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/errorApplication.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/errorApplication.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,4 @@
+<div class="fff_error">
+	<img src="images/error.gif" /> <br/> {$message}
+</div>
+<a href="forums.php" class="fff_link1">{t w="global.returnhome"}</a> - <a href="#" onclick="javascript:history.back()" class="fff_link1">{t w="global.returnprevious"}</a>

Added: YDFramework2.0/trunk/examples/forum/templates/fffRequest.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/fffRequest.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/fffRequest.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,66 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr">
+<head>
+
+  <title>{$title}</title>
+
+  <link href="fffscreen.css" rel="stylesheet" type="text/css" media="all" />
+
+</head>
+
+<body>
+<div id="fff_main_head">
+		<h3>Friendly Freddy Forum</h3>
+		<div id="fff_main_menu">
+		  {if $user->rightslevel == LEVEL_ADMIN}
+				{if $viewadmin}
+					{$menus}
+				{else}
+					<a href="forums.php?do=ListForums" class="fff_link1">{t w="global.forumlist"}</a> {$menus}
+				{/if}
+		  {else}
+		  	? <a href="forums.php?do=ListForums" class="fff_link1">{t w="global.forumlist"}</a> {$menus}
+		  {/if}
+		
+		</div>	
+		
+		<div id="fff_main_user">
+		
+			  {if $user->authentificated==1}
+		
+				  {t w="global.connectedas"} {$user->login} -
+		
+				  {if $user->rightslevel == LEVEL_ADMIN}
+						{if $viewadmin}
+							<a href="forums.php?do=ListForums" class="fff_link1">{t w="global.returnforumlist"}</a> -
+						{else}
+							<a href="forums.php?do=search" class="fff_link1">{t w="global.search"}</a> - 
+							<a href="user.php?do=monprofil" class="fff_link1">{t w="global.profile"}</a> -
+							<a href="admin.php" class="fff_link1">{t w="global.admin"}</a> -
+						{/if}
+				  {else}
+				  			<a href="forums.php?do=search" class="fff_link1">{t w="global.search"}</a> - 
+				  			<a href="user.php?do=monprofil" class="fff_link1">{t w="global.profile"}</a> -
+				  {/if}
+		
+				   <a href="{$YD_SELF_SCRIPT}?do=logout" class="fff_link1">{t w="global.logout"}</a>
+		
+			  {else}
+			   	  <a href="forums.php?do=search" class="fff_link1">{t w="global.search"}</a> - 
+			   	
+				  <a href="{$YD_SELF_SCRIPT}?do=login" class="fff_link1">{t w="global.login"}</a> - 
+		
+				  <a href="user.php?do=suscribe" class="fff_link1">{t w="global.suscribe"}</a>
+		
+			  {/if}
+		
+		</div>
+		&nbsp;
+</div>
+<br class="fff_separator" />
+
+{$content}
+
+    <div style="margin-left:auto;margin-right:auto;margin-top:40px;text-align:center"><small>FFF is powered by </small><a href="http://ydframework.berlios.de/" title="Yellow Duck Framework"><img class="fff_img" src="images/ydframework.png"/></div>
+</body>
+</html>

Added: YDFramework2.0/trunk/examples/forum/templates/forums.list.subjects.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/forums.list.subjects.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/forums.list.subjects.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,35 @@
+{if $user->rightslevel >= LEVEL_USER }
+	<a href="posts.php?do=AddPost&amp;idForum={$forum->id}" class="fff_link1">{t w="forums.createthread"}</a><br /><br />
+{else}
+	{t w="forums.suscribe"}<br /><br />
+{/if}
+
+{if $posts}
+
+  <table class="fff_table" id="listePosts">
+
+    <tr class="fff_title"><th class="fff_tMai">{t w="forums.thread"}</th><th class="fff_tNbe">{t w="forums.answers"}</th><th class="fff_TAut">{t w="global.author"}</th><th class="fff_tNbe">{t w="forums.readings"}</th><th class="fff_tLst">{t w="forums.lastanswer"}</th></tr>
+
+    {foreach from=$posts item=post}
+        <tr class="fff_trow0{$post->parity}"><td class="fff_rMai"><a class="fff_link1" href="posts.php?do=viewPost&amp;id={$post->id}">{$post->title}</a></td><td class="fff_rNbe">{$post->nbAnswers}</td><td class="fff_rAut"><a title="{t w="global.profileof"} {$post->loginAuthor}" href="user.php?do=ViewProfil&amp;userLogin={$post->loginAuthor}" class="fff_link2">{$post->loginAuthor}</a></td><td class="fff_rNbe">{$post->nbViews}</td><td class="fff_rLst">{t w="forums.dateprefix"}{$post->dateAnswer|date_format:"%d/%m/%Y ? %H:%M:%S"}</td>
+        {if $user->rightslevel >= LEVEL_MODERATOR }
+			     <td><a href="posts.php?do=DelPost&amp;idPost={$post->id}" class="fff_link1" onclick="return confirm('{t w="forums.confirmdelthread"}');">X</a></td>
+		{/if}
+
+        </tr>
+    {/foreach}
+
+  </table>
+  <table class="fff_table_bottom">
+    <tr><td class="fff_left"><a href="forums.php?do=viewForum&amp;id=1{if $forum->limiteBasse != -1 }&amp;from={$forum->limiteBasse}{/if}" class="fff_link1">{if $forum->limiteBasse != -1 }{$forum->pas} {t w="forums.previousthreads"}{/if}</a></td><td class="fff_right"><a href="forums.php?do=viewForum&amp;id=1{if $forum->limiteHaute!=-1}&amp;from={$forum->limiteHaute}{/if}" class="fff_link1">{if $forum->limiteHaute != -1 }{$forum->pas} {t w="forums.nextthreads"}{/if}</a></td></tr>
+  </table>
+{else}
+    <p>{t w="forums.nothread"}</p>
+{/if}
+
+
+{if $user->rightslevel >= LEVEL_ADMIN }
+	{t w="forums.yradmin"}
+{elseif $user->rightslevel >= LEVEL_MODERATOR }
+	{t w="forums.yrcensor"}
+{/if}

Added: YDFramework2.0/trunk/examples/forum/templates/forums.list.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/forums.list.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/forums.list.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,18 @@
+{if $forums}
+
+  <table class="fff_table" id="listeforums">
+
+    <tr class="fff_title"><th class="fff_tMai">{t w="forums.forums"}</th><th class="fff_tNbe">{t w="forums.threads"}</th><th class="tNbe">{t w="forums.messages"}</th></tr>
+
+    {foreach from=$forums item=forum}
+        <tr class="fff_trow0{$forum->parity}"><td class="fff_rMai"><a class="fff_link1" href="forums.php?do=viewForum&amp;id={$forum->id}&amp;from=0">{$forum->name}</a></td><td class="fff_rNbe">{$forum->nbSubjects}</td><td class="fff_rNbe">{$forum->nbPosts}</td></tr>
+    {/foreach}
+
+  </table>
+
+{else}
+
+    <p>{t w="forums.noforum"}</p>
+
+{/if}
+

Added: YDFramework2.0/trunk/examples/forum/templates/forums.search.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/forums.search.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/forums.search.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,37 @@
+    {if $form.errors}
+        <div class="fff_error">
+            <img src="images/caution.gif" /><br /> 
+            {foreach from=$form.errors item=error}
+                {$error}<br />
+            {/foreach}
+        </div>
+    {/if}
+	<div class="fff_form_container" >
+		<div class="fff_title">
+			{t w="forums.searchonforum"}
+		</div>
+		<br />
+		<form {$form.attribs} class="fff_form">
+			<table> 
+				<tr><td class="fff_left">{$form.searchKeys.label}</td><td class="fff_left">{$form.searchKeys.html}</td></tr>
+				<tr><td class="fff_left">{$form.searchForum.label}</td><td class="fff_left">{$form.searchForum.html}</td></tr>
+				<tr><td></td><td class="fff_right">{$form.cmdSubmit.html}</td></tr>
+			</table>
+	    </form>
+	</div>
+	{if $searched}
+		<br />
+		{if $nbposts >0 }
+			{t w="forums.startresult"}{$nbposts}{t w="forums.endresult"}<br />
+
+			<table class="fff_table" id="listePosts">
+			    <tr class="fff_title"><th class="fff_tMai">{t w="forums.thread"}</th><th class="fff_tNbe">{t w="forums.answers"}</th><th class="fff_TAut">{t w="global.author"}</th><th class="fff_tNbe">{t w="forums.readings"}</th><th class="fff_tLst">{t w="forums.lastanswer"}</th></tr>
+			{foreach from=$posts item=post}
+		        <tr class="fff_trow0{$post->parity}"><td class="fff_rMai"><a class="fff_link1" href="posts.php?do=viewPost&amp;id={$post->id}">{$post->title}</a></td><td class="fff_rNbe">{$post->nbAnswers}</td><td class="fff_rAut">{$post->loginAuthor}</td><td class="fff_rNbe">{$post->nbViews}</td><td class="fff_rLst">{t w="forums.dateprefix"}{$post->dateAnswer|date_format:"%d/%m/%Y ? %H:%M:%S"}</td>
+		        </tr>
+		    {/foreach}
+			</table>
+		{else}
+			{t w="forums.noresult"}
+		{/if}
+	{/if}

Added: YDFramework2.0/trunk/examples/forum/templates/posts.del.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/posts.del.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/posts.del.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,18 @@
+<p>
+{t w="posts.delandredirect"}
+</p>
+{literal}
+<script language="Javascript">
+	<!--
+	function redirect() {
+{/literal}
+			document.location="forums.php?do=viewForum&id={$post->idForum}";
+{literal}
+	}
+{/literal}
+	setTimeout("redirect()",1500);
+	-->
+</script>
+<p>
+	<a href="forums.php?do=viewForum&id={$post->idForum}" >{t w="global.ifnotredirect"}</a>
+</p>

Added: YDFramework2.0/trunk/examples/forum/templates/posts.new.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/posts.new.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/posts.new.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,27 @@
+    {if $form.errors}
+        <div class="error">
+            <img src="images/caution.gif" /><br /> 
+            {foreach from=$form.errors item=error}
+                {$error}<br>
+            {/foreach}
+        </div>
+    {/if}
+	{if $editMessage}
+	 {t w="posts.messageedit"}
+	{else}
+	 {t w="posts.pleasesearch"}
+	{/if}
+	<br />
+<div class="fff_form_container">
+    <form {$form.attribs} class="fff_form" >
+        <div>
+            <span width="300px">{$form.postTitle.label}</span><br />{$form.postTitle.html}
+        </div>
+        <div>
+            <span width="300px">{$form.postContent.label}</span><br />{$form.postContent.html}
+        </div>
+        <div>
+            <a href="#" onclick="javascript:history.back();" class="fff_link1">{t w="global.back"}</a> {$form.cmdSubmit.html}
+        </div>
+    </form>
+</div>

Added: YDFramework2.0/trunk/examples/forum/templates/posts.success.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/posts.success.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/posts.success.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,22 @@
+<p>
+	{if $editMessage}
+		{t w="posts.updateredirect"}
+	{else}
+		{t w="posts.addredirect"}
+	{/if}
+</p>
+{literal}
+<script language="Javascript">
+	<!--
+	function redirect() {
+{/literal}
+			document.location="{$YD_SELF_SCRIPT}?do=viewPost&id={$post->id}";
+{literal}
+	}
+{/literal}
+	setTimeout("redirect()",1500);
+	-->
+</script>
+<p>
+	<a href="{$YD_SELF_SCRIPT}?do=viewPost&amp;id={$post->id}" >{t w="global.ifnotredirect"}</a>
+</p>

Added: YDFramework2.0/trunk/examples/forum/templates/posts.view.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/posts.view.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/posts.view.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,69 @@
+<br />
+<table class="fff_table" id="listePosts">
+	<tr class="fff_title">
+	 <th>{t w="global.author"}</th>
+	 <th class="fff_rMessage">{t w="posts.messagehead"}</th>
+	</tr>
+		
+    <tr class="fff_trow0even">
+	 <td rowspan="2">
+	    <a title="{t w="global.profileof"} {$post->loginAuthor}" href="user.php?do=ViewProfil&amp;userLogin={$post->loginAuthor}" class="fff_link2">{$post->loginAuthor}</a>
+	 </td>
+	 <td class="fff_rMessage">
+	  <span class="fff_title">{$post->title} : </span><br /><br />
+	  {$post->content}
+	  
+	  {if $post->idEditor != ""}
+	  	<br /><br />
+	  	<span class="fff_edited">{t w="posts.editedon"} {$post->dateEdited|date_format:"%d/%m/%Y  %H:%M:%S"} {t w="global.by"} {$post->loginEditor}.</span>
+	  {/if}
+	 </td>
+	</tr>
+	<tr class="fff_trow0even">
+	 <td class="fff_rMessage_infos">
+	 	{t w="posts.postedon"} {$post->datePost|date_format:"%d/%m/%Y  %H:%M:%S"}
+	 	{if $user->rightslevel >= LEVEL_MODERATOR } par {$post->ipAuthor} <a class="fff_link2" href="posts.php?do=EditPost&amp;idPost={$post->id}">{t w="posts.editthemessage"}</a>
+	 	{elseif $user->id == $post->idAuthor } <a class="fff_link2" href="posts.php?do=EditPost&amp;idPost={$post->id}">{t w="posts.editmymessage"}</a>
+	 	{/if}
+	 </td>
+	</tr>
+	
+{assign var="parity" value="odd"}
+{foreach from=$post->answers item=ans}
+    <tr class="fff_trow0{$parity}">
+	 <td rowspan="2">
+		 <a title="{t w="global.profileof"} {$ans->loginAuthor}" href="user.php?do=ViewProfil&amp;userLogin={$ans->loginAuthor}" class="fff_link2">{$ans->loginAuthor}</a>
+	 </td>
+	 <td class="fff_rMessage">
+	  <span class="fff_title">{$ans->title} : </span><br /><br />
+	  {$ans->content}
+	  {if $ans->idEditor != ""}
+	  	<br /><br />
+	  	<span class="fff_edited">{t w="posts.editedon"} {$ans->dateEdited|date_format:"%d/%m/%Y ? %H:%M:%S"} {t w="global.by"} {$ans->loginEditor}.</span>
+	  {/if}
+	 </td>
+	</tr>
+	<tr class="fff_trow0{$parity}">
+	 <td class="fff_rMessage_infos">
+	 	 {t w="posts.postedon"} {$ans->datePost|date_format:"%d/%m/%Y %H:%M:%S"}
+	 	{if $user->rightslevel >= LEVEL_MODERATOR } par {$ans->ipAuthor} <a class="fff_link2" href="posts.php?do=EditPost&amp;idPost={$ans->id}">{t w="posts.editthemessage"}</a>
+	 	{elseif $user->id == $ans->idAuthor } <a class="fff_link2" href="posts.php?do=EditPost&amp;idPost={$ans->id}">{t w="posts.editmymessage"}</a>
+	 	{/if}
+	 </td>
+	</tr>
+	
+	{if $parity=="odd"}
+		{assign var="parity" value="even"}
+	{else}
+		{assign var="parity" value="odd"}
+	{/if}
+{/foreach}
+	<tr>
+	 <td colspan="2" align="right">
+		{if $user->rightslevel >= LEVEL_MODERATOR }
+			<a href="posts.php?do=DelPost&amp;idPost={$post->id}" class="fff_link1" onclick="return confirm('{t w="posts.confirmdelthread"}');">{t w="posts.delete"}</a>
+		{/if}
+	  <a class="fff_link1" href="posts.php?do=Repondre&amp;idForum={$post->idForum}&amp;idPostParent={$post->id}">{t w="posts.answer"}</a>
+	 </td>
+	</tr>
+</table>

Added: YDFramework2.0/trunk/examples/forum/templates/user.delprofile.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/user.delprofile.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/user.delprofile.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,10 @@
+    {if $confirmation}
+        <p style="color: green">
+						{t w="user.delaccount"}
+        </p>
+    {else}
+    	<p style="color: red">
+			{t w="user.delaccountconfirm"}
+			<a href="{$YD_SELF_SCRIPT}?do=deleteProfil&amp;confirm=true" class="fff_link1">{t w="global.yes"}</a> - <a href="{$YD_SELF_SCRIPT}?do=monProfil" class="fff_link1">{t w="global.no"}</a>
+        </p>
+    {/if}

Added: YDFramework2.0/trunk/examples/forum/templates/user.login.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/user.login.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/user.login.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,22 @@
+<div class="fff_form_container" >
+	<div class="fff_title">
+		{t w="user.connection"}
+	</div>
+    {if $form.errors}
+    	<div class="error">
+	    	<img src="images/caution.gif" /><br /> 
+	            {foreach from=$form.errors item=error}
+	                {$error}<br>
+	            {/foreach}
+        </div>
+    {/if}
+
+    <form {$form.attribs} class="fff_form">
+    		<table> 
+				<tr><td class="fff_left">{$form.loginName.label}</td><td class="fff_left">{$form.loginName.html}</td></tr>
+				<tr><td class="fff_left">{$form.loginPass.label}</td><td class="fff_left">{$form.loginPass.html}</td></tr>
+				<tr><td></td><td class="fff_right">{$form.cmdSubmit.html}</td></tr>
+			</table>        
+    </form>
+</div>
+    

Added: YDFramework2.0/trunk/examples/forum/templates/user.monprofile.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/user.monprofile.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/user.monprofile.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,38 @@
+<div class="fff_form_container" >
+    {if $form.errors}
+        <div class="error">
+        	<img src="images/caution.gif" /><br />
+            {foreach from=$form.errors item=error}
+                {$error}<br>
+            {/foreach}
+        </div>
+    {/if}
+    <div class="fff_title">
+	    {t w="user.edityrprofile"}<br /><br />
+	</div>
+    {if $updated}
+    	    {t w="user.updateprofileok"}<br /><br />
+    {/if}
+    <form {$form.attribs} class="fff_form">
+    
+        	<table> 
+				<tr><td class="fff_left">{$form.profileDescription.label}</td><td class="fff_left">{$form.profileDescription.html}</td></tr>
+			</table>  
+       
+        {t w="user.descprofile"}       
+        
+        	<table> 
+				<tr><td class="fff_left">{$form.profilePass.label}</td><td class="fff_left">{$form.profilePass.html}</td></tr>
+				<tr><td class="fff_left">{$form.profilePassUn.label}</td><td class="fff_left">{$form.profilePassUn.html}</td></tr>
+				<tr><td class="fff_left">{$form.profilePassDeux.label}</td><td class="fff_left">{$form.profilePassDeux.html}</td></tr>
+
+				<tr><td></td><td class="fff_right">{$form.cmdSubmit.html}</td></tr>
+			</table>  
+
+
+
+    </form>
+
+    <br />
+    <a href="{$YD_SELF_SCRIPT}?do=deleteProfil" class="fff_link1">{t w="user.askdelaccount"}</a>
+</div>

Added: YDFramework2.0/trunk/examples/forum/templates/user.notAuth.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/user.notAuth.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/user.notAuth.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,4 @@
+<p>
+	{t w="user.needauth"}
+</p>
+<a href="{$YD_SELF_SCRIPT}?do=login" class="fff_link1">{t w="global.login"}</a>

Added: YDFramework2.0/trunk/examples/forum/templates/user.suscribe.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/user.suscribe.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/user.suscribe.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,24 @@
+	<div class="fff_form_container" >
+		<div class="fff_title">
+			{t w="user.suscribeform"}
+		</div>
+			{if $form.errors}
+				<br />
+        <div class="fff_error">
+            <img src="images/caution.gif" /><br /> 
+            {foreach from=$form.errors item=error}
+                {$error}<br />
+            {/foreach}
+        </div>
+    	{/if}
+		<br />
+		<form {$form.attribs} class="fff_form">
+			<table> 
+				<tr><td class="fff_left">{$form.suscribeLogin.label}</td><td class="fff_left">{$form.suscribeLogin.html}</td></tr>
+				<tr><td class="fff_left">{$form.suscribePassUn.label}</td><td class="fff_left">{$form.suscribePassUn.html}</td></tr>
+				<tr><td class="fff_left">{$form.suscribePassDeux.label}</td><td class="fff_left">{$form.suscribePassDeux.html}</td></tr>
+				<tr><td class="fff_left">{$form.suscribeDescription.label}</td><td class="fff_left">{$form.suscribeDescription.html}</td></tr>
+				<tr><td></td><td class="fff_right">{$form.cmdSubmit.html}</td></tr>
+			</table>
+	    </form>
+	</div>

Added: YDFramework2.0/trunk/examples/forum/templates/user.viewprofile.tpl
===================================================================
--- YDFramework2.0/trunk/examples/forum/templates/user.viewprofile.tpl	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/templates/user.viewprofile.tpl	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,13 @@
+{if $userfound }
+	<div class="fff_title">
+		{t w="global.theprofileof"} {$user->login}
+	</div>
+	<br/>
+	<br />
+	{$user->description}
+	
+{else}
+	{t w="user.unkownuser"}	
+{/if}
+<br /><br />
+<a title="{t w="global.returnprevious"}" href="#" onclick="javascript:history.back()" class="fff_link1">{t w="global.returnprevious"}</a>

Added: YDFramework2.0/trunk/examples/forum/todo.txt
===================================================================
--- YDFramework2.0/trunk/examples/forum/todo.txt	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/todo.txt	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,17 @@
+Tasks todo, in priority order :
+
+:Critical:  	Review the group management, the database groups should be replaced by hardcode roles.
+:High:		Comment the whole code using a phpdoc like standard. Remove french comments.
+:High: 		Redirect after login on requested page
+:High:		Add Association between forums and moderators.
+:Normal:	Add 404 HTTP status on actions which don't exist
+:Normal: 	Forum grouping
+:Normal: 	Valid XHTML
+:Low: 		Mark new posts / posts user replies with flags.
+:Low: 		Add last message link in forums with date.
+:Low: 		Add nice icons
+:Low: 		Improve graphic layout and create a logo
+:Low: 		Extend profiles (add avatar and other fields)
+
+
+...to be continued

Added: YDFramework2.0/trunk/examples/forum/user.php
===================================================================
--- YDFramework2.0/trunk/examples/forum/user.php	2006-04-18 12:52:41 UTC (rev 1855)
+++ YDFramework2.0/trunk/examples/forum/user.php	2006-04-18 12:55:49 UTC (rev 1856)
@@ -0,0 +1,275 @@
+<?php
+
+    
+
+    // Includes main class of the site
+    require_once('fffRequest.php');
+
+  
+    // Include the classes needed on this page
+        
+
+    // Define the request class
+    class user extends fffRequest {
+
+        // Class constructor
+        function user() {
+            // Initialize the parent
+            $this->fffRequest();
+
+            // Indicate we require login
+            //$this->setRequiresAuthentication( true );
+        }
+
+        function isActionAllowed() {
+						$act = $this->getActionName();
+						switch($act) {
+							case "suscribe" :
+							case "ViewProfil" :
+								return true;
+								break;
+								
+							case "MonProfil":
+							case "DeleteProfil":
+								if($this->user->authentificated) {
+									return true;
+								}
+								else {
+									return false;
+								}
+								break;
+							default :
+								return true;
+						}
+        	//echo $this->getActionName();
+        }
+     
+        // The default action
+        function actionDefault() {
+      		$this->forward('monProfil');
+      		return;			
+        }
+
+
+        function checkPass( $fields ) {
+        	// L'utilisateur souhaite modifier son mot de passe ?
+        	if(strlen($fields['profilePassUn'])>0|| strlen($fields['profilePassDeux'])>0) {
+	        	if($fields['profilePassUn']==$fields['profilePassDeux']) {
+	        		if(strlen($fields['profilePassUn'])>=4) {
+		        		if(md5($fields['profilePass'])==$this->user->password) {
+		        			return true;
+		        		}
+		        		else {
+		        		   return array( 'profile' => t('user.oldpwdincorrect') );
+		        		}	
+	        		}
+	        		else {
+	        			return array( 'profile' => t('user.newpwd4chars'));
+	        		}
+
+	        	}
+	        	else {
+	        		return array( 'profile' => t('user.pwdsnotmatch') );
+	        	}		
+        	}
+        	else {
+        		return true;	
+        	}
+        }
+        
+        function checkSuscribe( $fields ) {
+  			// check passwords
+        	if(strlen($fields['suscribePassUn'])>0 || strlen($fields['suscribePassDeux'])>0) {
+	        	if($fields['suscribePassUn']==$fields['suscribePassDeux']) {
+	        		if(strlen($fields['suscribePassUn'])>=4) {
+	        			if(strlen($fields['suscribeLogin'])>=4) {
+	        				// check user don't already exist
+	        				$userLogic = new UsersLogic();
+	        				if($userLogic->doesLoginAlreadyExists($fields['suscribeLogin'])== false) {
+  								return true;
+  							}
+  							else {
+  								return array( 'suscribeLogin' => t('user.loginalready') );
+  						    }
+	        			}
+	        			else {
+	        				return array( 'suscribe' => t('user.pwd4chars') );
+	        			}
+	        		}
+	        		else {
+	        			return array( 'suscribe' => t('user.login4chars') );
+	        		}
+	        	}
+	        	else {
+
+	        		return array( 'suscribe' => t('user.pwdsnotmatch') );
+	        	}		
+        	}
+        	else {
+        		return array( 'suscribe' => t('user.2pwd') );
+        	}
+        }
+
+		function actionViewProfil() {
+			if(isset($_GET['userLogin'])) {
+		        
+	  			// load user's profile
+	  			$userLogic = new UsersLogic();
+	  			$user = $userLogic->retrieveUserByLogin($_GET['userLogin']);
+	  			
+	  			if($user!=null) {
+	  				// Assign variables to the template
+				    $this->actionTpl->assign( 'user' ,$user);
+				    $this->actionTpl->assign( 'userfound',true);
+				    $title = 'Profil de '.$user->login;
+	  			}
+	  			else {
+	  				$this->actionTpl->assign( 'userfound',false);
+	  				$title = 'Utilisateur inconnu';
+	  			}
+			    $content = new page($this->actionTpl->fetch('templates/user.viewprofile.tpl'), $title);
+				// Display the action template into the master template
+				$this->display($content);
+			}
+			else {
+				$this->errorRequete();
+				return;
+			}
+		}
+
+   		function actionMonProfil() {
+
+        	if($this->user->authentificated) {
+
+	        	// Create the profile form
+	            $form = new YDForm( 'profileForm' );
+	            $form->addElement( 'textarea', 'profileDescription', t('user.desc'),array("cols" => 50, "rows" => 8) );
+	            $form->addElement( 'password', 'profilePass', t('user.oldpwd') );
+	            $form->addElement( 'password', 'profilePassUn', t('user.newpwd') );
+	            $form->addElement( 'password', 'profilePassDeux', t('user.newpwd') );
+	            $form->addElement( 'submit', 'cmdSubmit', t('user.saveupdate') );
+			
+							// default values
+				      $form->setDefaults( array( 'profileDescription' => $this->user->description ) ); 
+							$form->setDefaults( array( 'profilePass' => '' ) ); 
+							$form->setDefaults( array( 'profilePassUn' => '' ) ); 
+							$form->setDefaults( array( 'profilePassDeux' => '' ) ); 
+								
+	            // Add rules
+	            $form->addFormRule( array( & $this, 'checkPass' ) );
+
+	            // Process the form
+	            if ( $form->validate() ) {
+
+	                // Update profile
+	                $newPass = $form->getValue( 'profilePassUn' );
+									if(strlen($newPass)>0) {
+										// Update description and password
+										$this->user->description = $form->getValue( 'profileDescription' );
+										$this->user->password = md5($form->getValue( 'profilePassUn' ));
+									}
+									else {
+										// Update only description
+										$this->user->description = $form->getValue( 'profileDescription' );
+									}
+				
+									$this->user->update();
+									$_SESSION['s_user'] = YDObjectUtil::serialize($this->user);
+										
+	                // Mark the form as valid
+	                $this->actionTpl->assign( 'updated', true);            	
+				
+									$form->setDefaults( array( 'profilePass' => '' ) ); 
+									$form->setDefaults( array( 'profilePassUn' => '' ) ); 
+									$form->setDefaults( array( 'profilePassDeux' => '' ) ); 
+
+	            }
+	            // Assign variables to the template
+	            $this->actionTpl->assign( 'form',$form->toArray());
+	            $content = new page($this->actionTpl->fetch('templates/user.monprofile.tpl'), 'Mon profil');
+
+        	}
+
+        	else {
+        		$content = new page($tpl->fetch('templates/user.notAuth.tpl'), t('global.notconnected') );
+        	}
+
+            // Display the action template into the master template
+            $this->display($content);
+        }
+
+
+      function actionDeleteProfil() {
+        	// Ask for a validation
+        	if(isset($_GET['confirm']) && $_GET['confirm'] == 'true') {
+        		// Suppression effective
+        		$this->user->delete();
+        		$_SESSION['s_user'] = YDObjectUtil::serialize($this->user);
+        		$this->actionTpl->assign( 'confirmation',true);
+
+        	}
+
+        	else {
+        		$this->actionTpl->assign( 'confirmation',false);
+        	}
+
+        	$content = new page($this->actionTpl->fetch('templates/user.delprofile.tpl'), t('user.delyraccount') );
+
+          // Display the action template into the master template
+          $this->display($content);
+
+        }
+
+        
+
+        function actionSuscribe() {
+			
+        	if(!$this->user->authentificated) {
+	        	// Create the profile form
+	            $form = new YDForm( 'suscribeForm' );
+							$form->addElement( 'text', 'suscribeLogin', t('user.login') );
+	            $form->addElement( 'textarea', 'suscribeDescription', t('user.desc') );
+	            $form->addElement( 'password', 'suscribePassUn', t('user.pwd') );
+	            $form->addElement( 'password', 'suscribePassDeux', t('user.confirmpwd') );
+	            $form->addElement( 'submit', 'cmdSubmit', t('user.valid') );
+
+	            // Add rules
+	            $form->addFormRule( array( & $this, 'checkSuscribe' ) );
+	
+	            // Process the form
+	            if ( $form->validate() ) {
+
+	                // Insert profile
+	                $this->user->id = '';
+        					$this->user->login = $form->getValue( 'suscribeLogin' );
+        					$this->user->description = $form->getValue( 'suscribeDescription' );
+        					$this->user->password = md5($form->getValue( 'suscribePassUn' ));
+        					$this->user->insert();
+        					$this->user->auth();
+        					$_GET['idUser']	= $this->user->id;				
+									$_SESSION['s_user'] = YDObjectUtil::serialize($this->user);
+							
+	                // Redirect sur les forums
+	                header('location: forums.php');
+        			return;
+	
+	            }
+	            // Assign variables to the template
+	            $this->actionTpl->assign( 'form', $form->toArray());
+	            $content = new page($this->actionTpl->fetch('templates/user.suscribe.tpl'), 'Inscription');
+	            // Display the action template into the master template
+    	        $this->display($content);
+				
+        	}
+        	else {
+        		$this->actionMonProfil();
+        		return;
+        	}
+        } 
+
+    }
+
+
+    YDInclude( 'YDF2_process.php' ); 
+
+?>



From francisco at fusemail.com  Tue Apr 18 18:49:48 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Tue, 18 Apr 2006 17:49:48 +0100
Subject: [ydf-devel] YDCM feedback
Message-ID: <444518AC.1080102@fusemail.com>

Hi Pieter

I saw your initial commit about the cms and forum.. and i think we could 
  share some ideas about it.

IMHO, a content framework must:

- _not_ include specific code (eg: design/templating code), otherwise in 
most cases it will be useless.

- should be a collection of modules that have all _logic_ about all 
possible operations about that module.

I saw that you are creating some modules extending a sqlclass (that has 
only a simple contructor about a connection).. and this doesn't seems 
the best approach because almost all forum logic implements what 
YDDatabaseObject already does (updates/deletes/inserts...).. all we need 
is a YDDatabaseObject extension and 80% of the job about the forum is 
done ;)

I propose that every module (eg: forum) has:
- a YDDatabaseObject extension that contains all possible operations

- a language directory that contains all language files about the module 
(no news here)

- a sql directory that contains the sql needed and a DBDesigner4 source 
file (this is free and excellent for db designing and exporting)

... and these, imho, could be included has a "ydf addon/module" or  "ydf 
cm addon/module" and not has a example.

.. in the ydf "example" directory i think we could add a demonstration 
class (that uses the YDDatabaseObject extension about that module) and 
the correspondent templating directory that shows how the module works.


.. just my 0.02

Francisco A


From pieter at yellowduck.be  Tue Apr 18 21:14:43 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Tue, 18 Apr 2006 21:14:43 +0200
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <444518AC.1080102@fusemail.com>
References: <444518AC.1080102@fusemail.com>
Message-ID: <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com>

Just to be clear, the forum part was not written by me. The stuff in the
examples/cms directory is.

I never got my head around YDDatabaseObject to be honest, but I guess I
should start looking into it.

I'm just wondering what would be the easiest way of combining
YDDatabaseObject with YDDatabaseTree for the CMS part. I do want to have the
modular approach, but also the hierarchical approach of items having parents
and children. Add on top of that the multilingual part, which is key in
this, and you get a difficult combination, believe me.

I like the approach an application like Drupal (drupal.org) takes for
implementing the modules, but the way they added multi-lingual content is
really bad and far from working.

Francisco, would you mind putting together a small example using
YDDatabaseObject to illustrate how you would see the module infrastructure
working for the CMS part?

Regards,


pieter

On 4/18/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
> Hi Pieter
>
> I saw your initial commit about the cms and forum.. and i think we could
> share some ideas about it.
>
> IMHO, a content framework must:
>
> - _not_ include specific code (eg: design/templating code), otherwise in
> most cases it will be useless.
>
> - should be a collection of modules that have all _logic_ about all
> possible operations about that module.
>
> I saw that you are creating some modules extending a sqlclass (that has
> only a simple contructor about a connection).. and this doesn't seems
> the best approach because almost all forum logic implements what
> YDDatabaseObject already does (updates/deletes/inserts...).. all we need
> is a YDDatabaseObject extension and 80% of the job about the forum is
> done ;)
>
> I propose that every module (eg: forum) has:
> - a YDDatabaseObject extension that contains all possible operations
>
> - a language directory that contains all language files about the module
> (no news here)
>
> - a sql directory that contains the sql needed and a DBDesigner4 source
> file (this is free and excellent for db designing and exporting)
>
> ... and these, imho, could be included has a "ydf addon/module" or  "ydf
> cm addon/module" and not has a example.
>
> .. in the ydf "example" directory i think we could add a demonstration
> class (that uses the YDDatabaseObject extension about that module) and
> the correspondent templating directory that shows how the module works.
>
>
> .. just my 0.02
>
> Francisco A
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
>



--
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060418/ff749ec8/attachment.html>

From francisco at fusemail.com  Wed Apr 19 11:52:32 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Wed, 19 Apr 2006 10:52:32 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com>
References: <444518AC.1080102@fusemail.com> <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com>
Message-ID: <44460860.1070605@fusemail.com>

Hi Pieter
> Just to be clear, the forum part was not written by me. The stuff in 
> the examples/cms directory is.
Ufff.... ;)

> I never got my head around YDDatabaseObject to be honest, but I guess 
> I should start looking into it.
Yes, i was using the common YDDatabase for db operations but with 
YDDatabaObject it's much much easier..
> I'm just wondering what would be the easiest way of combining 
> YDDatabaseObject with YDDatabaseTree for the CMS part. I do want to 
> have the modular approach, but also the hierarchical approach of items 
> having parents and children. Add on top of that the multilingual part, 
> which is key in this, and you get a difficult combination, believe me.
I was thinking about that some time ago too.. and i think i found a cool 
way of doing this. The concept is.. everything is a component (eg, page, 
guestbook.. etc) and these components must be part of a tree that 
represents the whole portal. The first nodes of a portal must be always 
menus (component menu).
Then, i will have a portal that starts like the next image where all 
first nodes of the portal must always be menus:

Portal tree

Inside a menu we can create any other component.. Eg we can create pages 
(that are html/xhtml content).

Each menu has a "reference". "Reference" is a internal label that 
defines the menu name. In the menu properties we must define the real 
name for all portal languages.
For a page component we must do the same... a page has a "reference" and 
a title and content for each language.

This is the simpler way but for expert admins, it's possible to, eg, 
create a guestbook that is a child of a page.. this means that the 
guestbook will not appear in the menu (because it's not a direct child) 
but will appear rendered in the bottom of the page (when the visitor 
enters that page).

So, this is the concept i made.. a hierarchical component system, with 
multi-language (every component has multi-language but only displays the 
correspondent "reference" in the administrator menu).

Now, how is this done.. Basically, every component has this parts:
- dbobject
- phobject
- template directory added to the master template directory
- languages directory

A dbobject is a class that extends YDDatabaseObject as has all methods 
about this component and how it handles its db operations.

A phobject is a class (optionaly extends YDRequest) that cares about 
forms, templating and only _uses_ dbobject methods

Every component has its own template(s) but we need to store that 
directory inside a common directory (eg, "templates) to permit the use 
of skins. Then if the component is a "guestbook" we will have a 
"guestbook" directory inside all possible skins. Eg:
+ templates
                +  default
                |            +  page
                |            + guestbook
               + orange
                            + page
                            + guestbook

Every component has its own language strings and own language directory.

>  
> I like the approach an application like Drupal (drupal.org 
> <http://drupal.org>) takes for implementing the modules, but the way 
> they added multi-lingual content is really bad and far from working.
I don't know the drupal internals..

>  
> Francisco, would you mind putting together a small example using 
> YDDatabaseObject to illustrate how you would see the module 
> infrastructure working for the CMS part?

Take a look to how the db is organized...
DBscheme

Content_tree is the portal tree. Every row is a component and every 
component has common attributes (like 
state:published/notpublished/approval.., publish schedule, ...). So, 
this is generic.

Then, like a said above, every direct child of the root must be a menu.. 
and what is a menu? well, its just a component that has a title (that 
depends of the language.. and that's way it's related with the languages 
table).

For pages, we have component_page that has specific attributes for pages 
(eg: metatags, html..) and it's related with languages too..

Then we have users that have it's own language (for administration) and 
are related with the tree because we want locks. Locks are information 
that defines that a user is, eg, editing a component. This way we don't 
have more than one user editing.

And we have other tables too (for configurations, statistics..) but 
these are what you want for component definition.


What you think?

Francisco A


> On 4/18/06, *Francisco Azevedo* <francisco at fusemail.com 
> <mailto:francisco at fusemail.com>> wrote:
>
>     Hi Pieter
>
>     I saw your initial commit about the cms and forum.. and i think we
>     could
>     share some ideas about it.
>
>     IMHO, a content framework must:
>
>     - _not_ include specific code (eg: design/templating code),
>     otherwise in
>     most cases it will be useless.
>
>     - should be a collection of modules that have all _logic_ about all
>     possible operations about that module.
>
>     I saw that you are creating some modules extending a sqlclass
>     (that has
>     only a simple contructor about a connection).. and this doesn't seems
>     the best approach because almost all forum logic implements what
>     YDDatabaseObject already does (updates/deletes/inserts...).. all
>     we need
>     is a YDDatabaseObject extension and 80% of the job about the forum is
>     done ;)
>
>     I propose that every module (eg: forum) has:
>     - a YDDatabaseObject extension that contains all possible operations
>
>     - a language directory that contains all language files about the
>     module
>     (no news here)
>
>     - a sql directory that contains the sql needed and a DBDesigner4
>     source
>     file (this is free and excellent for db designing and exporting)
>
>     ... and these, imho, could be included has a "ydf addon/module"
>     or  "ydf
>     cm addon/module" and not has a example.
>
>     .. in the ydf "example" directory i think we could add a
>     demonstration
>     class (that uses the YDDatabaseObject extension about that module) and
>     the correspondent templating directory that shows how the module
>     works.
>
>
>     .. just my 0.02
>
>     Francisco A
>     _______________________________________________
>     YDFramework-devel mailing list
>     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
>
>
>
>
> -- 
> pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> 
> . http://www.yellowduck.be/ 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060419/dfbbc466/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tree.JPG
Type: image/jpeg
Size: 4536 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060419/dfbbc466/attachment.jpe>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: scheme.JPG
Type: image/jpeg
Size: 93088 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060419/dfbbc466/attachment-0001.jpe>

From francisco at fusemail.com  Wed Apr 19 12:03:01 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Wed, 19 Apr 2006 11:03:01 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <44460860.1070605@fusemail.com>
References: <444518AC.1080102@fusemail.com> <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com> <44460860.1070605@fusemail.com>
Message-ID: <44460AD5.6060608@fusemail.com>

Images (i hope you see them).. :)

Francisco A


-------------- next part --------------
A non-text attachment was scrubbed...
Name: tree.JPG
Type: image/jpeg
Size: 4536 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060419/5eb41488/attachment.jpe>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: scheme.JPG
Type: image/jpeg
Size: 93088 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060419/5eb41488/attachment-0001.jpe>

From francisco at fusemail.com  Wed Apr 19 12:22:16 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Wed, 19 Apr 2006 11:22:16 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <44460860.1070605@fusemail.com>
References: <444518AC.1080102@fusemail.com> <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com> <44460860.1070605@fusemail.com>
Message-ID: <44460F58.4000707@fusemail.com>

img Zip

Francisco A
-------------- next part --------------
A non-text attachment was scrubbed...
Name: img.zip
Type: application/octet-stream
Size: 89364 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060419/8e8ac552/attachment.obj>

From pieter at yellowduck.be  Wed Apr 19 12:44:19 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Wed, 19 Apr 2006 12:44:19 +0200
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <44460F58.4000707@fusemail.com>
References: <444518AC.1080102@fusemail.com>
	 <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com>
	 <44460860.1070605@fusemail.com> <44460F58.4000707@fusemail.com>
Message-ID: <4aef63030604190344u7d6786dcheae8153c8bb855fe@mail.gmail.com>

Looks really cool for a way of working. Are you planning to share this with
the other Yellow Duck Users?

pieter

On 4/19/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
> img Zip
>
> Francisco A
>
>
>


--
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060419/3a240471/attachment.html>

From francisco at fusemail.com  Wed Apr 19 13:05:57 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Wed, 19 Apr 2006 12:05:57 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4aef63030604190344u7d6786dcheae8153c8bb855fe@mail.gmail.com>
References: <444518AC.1080102@fusemail.com>	 <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com>	 <44460860.1070605@fusemail.com> <44460F58.4000707@fusemail.com> <4aef63030604190344u7d6786dcheae8153c8bb855fe@mail.gmail.com>
Message-ID: <44461995.9010604@fusemail.com>

Pieter,
> Looks really cool for a way of working. Are you planning to share this 
> with the other Yellow Duck Users?
>  
I think this is a specific way of doing things because almost all cms 
share a common structure and this is very different.. and if YFcm start 
with it all components must be created with this structure in mind.. and 
i don't know your feedback about it.

About sharing.. no problem at all. Languages and dbObject logic (read: 
the main parts) are the most difficult part because have all component 
operations.. pHObject and templating is different because each 
aplication has it's own way of presentation.. but i think we should 
create a generic "pHObject" (read: a class and a template directory to 
show how the component works).

What do you think?

Francisco A

> pieter
>  
> On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com 
> <mailto:francisco at fusemail.com>> wrote:
>
>     img Zip
>
>     Francisco A
>
>
>
>
>
> -- 
> pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> 
> . http://www.yellowduck.be/ 



From pieter at yellowduck.be  Wed Apr 19 13:37:25 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Wed, 19 Apr 2006 13:37:25 +0200
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <44461995.9010604@fusemail.com>
References: <444518AC.1080102@fusemail.com>
	 <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com>
	 <44460860.1070605@fusemail.com> <44460F58.4000707@fusemail.com>
	 <4aef63030604190344u7d6786dcheae8153c8bb855fe@mail.gmail.com>
	 <44461995.9010604@fusemail.com>
Message-ID: <4aef63030604190437j526a0d7bl2bba2da175699cf1@mail.gmail.com>

I like your proposed way of seeing everything as components. I think that
this is a very good basis for a CMS application.

I guess that if we add the building blocks for that to the framework, and
create an example with one or two modules, people can start developing their
own modules. The modules in the end are where most of the logic is stored,
while the underlying CMS framework is just making it easier to hook
everything up. The admin side of things should be part of the framework as
well as we don't want users to create this from scratch.

We can leave the choice then to the users whether they want to share out
their custom modules with other users or not.

Cheers,


pieter

On 4/19/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
> Pieter,
> > Looks really cool for a way of working. Are you planning to share this
> > with the other Yellow Duck Users?
> >
> I think this is a specific way of doing things because almost all cms
> share a common structure and this is very different.. and if YFcm start
> with it all components must be created with this structure in mind.. and
> i don't know your feedback about it.
>
> About sharing.. no problem at all. Languages and dbObject logic (read:
> the main parts) are the most difficult part because have all component
> operations.. pHObject and templating is different because each
> aplication has it's own way of presentation.. but i think we should
> create a generic "pHObject" (read: a class and a template directory to
> show how the component works).
>
> What do you think?
>
> Francisco A
>
> > pieter
> >
> > On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com
> > <mailto:francisco at fusemail.com>> wrote:
> >
> >     img Zip
> >
> >     Francisco A
> >
> >
> >
> >
> >
> > --
> > pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be>
> > . http://www.yellowduck.be/
>
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
>



--
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060419/2c938a91/attachment.html>

From francisco at fusemail.com  Wed Apr 19 16:11:59 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Wed, 19 Apr 2006 15:11:59 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4aef63030604190437j526a0d7bl2bba2da175699cf1@mail.gmail.com>
References: <444518AC.1080102@fusemail.com>	 <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com>	 <44460860.1070605@fusemail.com> <44460F58.4000707@fusemail.com>	 <4aef63030604190344u7d6786dcheae8153c8bb855fe@mail.gmail.com>	 <44461995.9010604@fusemail.com> <4aef63030604190437j526a0d7bl2bba2da175699cf1@mail.gmail.com>
Message-ID: <4446452F.1060102@fusemail.com>

Pieter,

> I like your proposed way of seeing everything as components. I think 
> that this is a very good basis for a CMS application.
>  
> I guess that if we add the building blocks for that to the framework, 
> and create an example with one or two modules, people can start 
> developing their own modules. The modules in the end are where most of 
> the logic is stored, while the underlying CMS framework is just making 
> it easier to hook everything up. The admin side of things should be part 
> of the framework as well as we don't want users to create this from 
> scratch.

I think that we can start to develop some draft ;) but i think it's 
better to define some standard rules for it.
I propose that:

- components should be created inside the YDF addons directory (like a 
standard addon)... or a specific YDCM directory?

- each component should have a name with prefix YDCM and be defined 
inside a directory with same name (like any YDF addon but specific for 
CM). Eg: component 'page' should be defined as YDCMPage.php inside a 
directory YDCMPage.

- each component extends YDDatabaseObject (or a class that we can create 
that defines an abstract component) and has (at least) a table name with 
same name.

- we should have a DBDesigner4 file that defined the db scheme of _all_ 
current components and not a separated file (or sql file) for each 
component. Because we have an integrated environment with relations it's 
not recommended to create a sql/DBDesigner4 file for each one. Btw, with 
DBDesigner4 we can export sql files individually ;) and it's free.

- inside each component directory we must create a "languages" directory 
that stores filenames about translations (when they are used in 
component). I propose that a filename here should have the same name as 
locale (eg, english filename is "en.php", portugueses filename is "pt.php").

- in YDF example directory we can create the component example directory 
(that demonstrates the visitors and administration side). Inside that 
directory, a template directory with the correspondent templates.


... and i think we can start it.


What you think?

Francisco A

> We can leave the choice then to the users whether they want to share out 
> their custom modules with other users or not.
>  
> Cheers,
>  
>  
> pieter
>  
> On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com 
> <mailto:francisco at fusemail.com>> wrote:
> 
>     Pieter,
>      > Looks really cool for a way of working. Are you planning to share
>     this
>      > with the other Yellow Duck Users?
>      >
>     I think this is a specific way of doing things because almost all cms
>     share a common structure and this is very different.. and if YFcm start
>     with it all components must be created with this structure in mind..
>     and
>     i don't know your feedback about it.
> 
>     About sharing.. no problem at all. Languages and dbObject logic (read:
>     the main parts) are the most difficult part because have all component
>     operations.. pHObject and templating is different because each
>     aplication has it's own way of presentation.. but i think we should
>     create a generic "pHObject" (read: a class and a template directory to
>     show how the component works).
> 
>     What do you think?
> 
>     Francisco A
> 
>      > pieter
>      >
>      > On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      > <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>>
>     wrote:
>      >
>      >     img Zip
>      >
>      >     Francisco A
>      >
>      >
>      >
>      >
>      >
>      > --
>      > pieter claerhout . pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto: pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>>
>      > . http://www.yellowduck.be/
> 
>     _______________________________________________
>     YDFramework-devel mailing list
>     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> 
> 
> 
> 
> -- 
> pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> . 
> http://www.yellowduck.be/



From ydfpoi at gmail.com  Wed Apr 19 17:05:26 2006
From: ydfpoi at gmail.com (ydf poi)
Date: Wed, 19 Apr 2006 17:05:26 +0200
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4446452F.1060102@fusemail.com>
References: <444518AC.1080102@fusemail.com>
	 <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com>
	 <44460860.1070605@fusemail.com> <44460F58.4000707@fusemail.com>
	 <4aef63030604190344u7d6786dcheae8153c8bb855fe@mail.gmail.com>
	 <44461995.9010604@fusemail.com>
	 <4aef63030604190437j526a0d7bl2bba2da175699cf1@mail.gmail.com>
	 <4446452F.1060102@fusemail.com>
Message-ID: <306340e00604190805s5232a52bt9a59ff9692232a2@mail.gmail.com>

Hi all!

I am very interested in this CMS project.
As you already know i'm french, so if you are in lack of french
translator please note that i can do the job...

Kind regards

2006/4/19, Francisco Azevedo <francisco at fusemail.com>:
[...]
> - inside each component directory we must create a "languages" directory
> that stores filenames about translations (when they are used in
> component). I propose that a filename here should have the same name as
> locale (eg, english filename is "en.php", portugueses filename is "pt.php").
>
[...]

--
po?


From pieter at yellowduck.be  Wed Apr 19 17:24:02 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Wed, 19 Apr 2006 17:24:02 +0200
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4446452F.1060102@fusemail.com>
References: <444518AC.1080102@fusemail.com>
	 <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com>
	 <44460860.1070605@fusemail.com> <44460F58.4000707@fusemail.com>
	 <4aef63030604190344u7d6786dcheae8153c8bb855fe@mail.gmail.com>
	 <44461995.9010604@fusemail.com>
	 <4aef63030604190437j526a0d7bl2bba2da175699cf1@mail.gmail.com>
	 <4446452F.1060102@fusemail.com>
Message-ID: <4aef63030604190824o6d113337u86698b5d363e6587@mail.gmail.com>

Hi Francisco,

a few things:

- I would keep the CMS components in a different directory than the

- I like the fact that the components should have a predefined prefix
(preferably configurable)

- Extending YDDatabaseObject seems like a good idea. How will different
languages be handled with that?

- Do we really need the DBDesigner4 files, or are the SQL files enough?

- The language files are only for the common strings, right, not for the
actual contents (such as title, body, ...)

- Adding the components example is definitely a good way to show how this
works.

Regards,


pieter

On 4/19/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
> Pieter,
>
> > I like your proposed way of seeing everything as components. I think
> > that this is a very good basis for a CMS application.
> >
> > I guess that if we add the building blocks for that to the framework,
> > and create an example with one or two modules, people can start
> > developing their own modules. The modules in the end are where most of
> > the logic is stored, while the underlying CMS framework is just making
> > it easier to hook everything up. The admin side of things should be part
> > of the framework as well as we don't want users to create this from
> > scratch.
>
> I think that we can start to develop some draft ;) but i think it's
> better to define some standard rules for it.
> I propose that:
>
> - components should be created inside the YDF addons directory (like a
> standard addon)... or a specific YDCM directory?
>
> - each component should have a name with prefix YDCM and be defined
> inside a directory with same name (like any YDF addon but specific for
> CM). Eg: component 'page' should be defined as YDCMPage.php inside a
> directory YDCMPage.
>
> - each component extends YDDatabaseObject (or a class that we can create
> that defines an abstract component) and has (at least) a table name with
> same name.
>
> - we should have a DBDesigner4 file that defined the db scheme of _all_
> current components and not a separated file (or sql file) for each
> component. Because we have an integrated environment with relations it's
> not recommended to create a sql/DBDesigner4 file for each one. Btw, with
> DBDesigner4 we can export sql files individually ;) and it's free.
>
> - inside each component directory we must create a "languages" directory
> that stores filenames about translations (when they are used in
> component). I propose that a filename here should have the same name as
> locale (eg, english filename is "en.php", portugueses filename is "pt.php
> ").
>
> - in YDF example directory we can create the component example directory
> (that demonstrates the visitors and administration side). Inside that
> directory, a template directory with the correspondent templates.
>
>
> ... and i think we can start it.
>
>
> What you think?
>
> Francisco A
>
> > We can leave the choice then to the users whether they want to share out
> > their custom modules with other users or not.
> >
> > Cheers,
> >
> >
> > pieter
> >
> > On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com
> > <mailto:francisco at fusemail.com>> wrote:
> >
> >     Pieter,
> >      > Looks really cool for a way of working. Are you planning to share
> >     this
> >      > with the other Yellow Duck Users?
> >      >
> >     I think this is a specific way of doing things because almost all
> cms
> >     share a common structure and this is very different.. and if YFcm
> start
> >     with it all components must be created with this structure in mind..
> >     and
> >     i don't know your feedback about it.
> >
> >     About sharing.. no problem at all. Languages and dbObject logic
> (read:
> >     the main parts) are the most difficult part because have all
> component
> >     operations.. pHObject and templating is different because each
> >     aplication has it's own way of presentation.. but i think we should
> >     create a generic "pHObject" (read: a class and a template directory
> to
> >     show how the component works).
> >
> >     What do you think?
> >
> >     Francisco A
> >
> >      > pieter
> >      >
> >      > On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      > <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>>
> >     wrote:
> >      >
> >      >     img Zip
> >      >
> >      >     Francisco A
> >      >
> >      >
> >      >
> >      >
> >      >
> >      > --
> >      > pieter claerhout . pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be> <mailto: pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>>
> >      > . http://www.yellowduck.be/
> >
> >     _______________________________________________
> >     YDFramework-devel mailing list
> >     YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> >
> >
> >
> >
> > --
> > pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> .
> > http://www.yellowduck.be/
>
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
>



--
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060419/9819b4c4/attachment.html>

From francisco at fusemail.com  Wed Apr 19 17:41:29 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Wed, 19 Apr 2006 16:41:29 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <306340e00604190805s5232a52bt9a59ff9692232a2@mail.gmail.com>
References: <444518AC.1080102@fusemail.com>	 <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com>	 <44460860.1070605@fusemail.com> <44460F58.4000707@fusemail.com>	 <4aef63030604190344u7d6786dcheae8153c8bb855fe@mail.gmail.com>	 <44461995.9010604@fusemail.com>	 <4aef63030604190437j526a0d7bl2bba2da175699cf1@mail.gmail.com>	 <4446452F.1060102@fusemail.com> <306340e00604190805s5232a52bt9a59ff9692232a2@mail.gmail.com>
Message-ID: <44465A29.6010509@fusemail.com>

hi poi

> I am very interested in this CMS project.

Cool! ;)  ... just a fix.. this is more a "CMS component structure" than 
a "CMS project". With a "CMS component structure" you can make CMSs or 
integrate components into other php aplications.

> As you already know i'm french, so if you are in lack of french
> translator please note that i can do the job...

Sure.. Keep in touch :D

Francisco A

> 
> 2006/4/19, Francisco Azevedo <francisco at fusemail.com>:
> [...]
>> - inside each component directory we must create a "languages" directory
>> that stores filenames about translations (when they are used in
>> component). I propose that a filename here should have the same name as
>> locale (eg, english filename is "en.php", portugueses filename is "pt.php").
>>
> [...]
> 
> --
> po?
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
> 



From pclaerhout at berlios.de  Thu Apr 20 17:00:18 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Thu, 20 Apr 2006 17:00:18 +0200
Subject: [ydf-devel] r1857 - in YDFramework2.0/trunk/examples/cms: includes modules modules/ydcmfgallery modules/ydcmfgalleryalbum modules/ydcmfgalleryitem modules/ydcmfhome
Message-ID: <200604201500.k3KF0Iip018664@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-20 17:00:17 +0200 (Thu, 20 Apr 2006)
New Revision: 1857

Added:
   YDFramework2.0/trunk/examples/cms/modules/ydcmfgallery/
   YDFramework2.0/trunk/examples/cms/modules/ydcmfgallery/ydcmfgallery.php
   YDFramework2.0/trunk/examples/cms/modules/ydcmfgallery/ydcmfgallery.tpl
   YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryalbum/
   YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryalbum/ydcmfgalleryalbum.php
   YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryalbum/ydcmfgalleryalbum.tpl
   YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryitem/
   YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryitem/ydcmfgalleryitem.php
   YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryitem/ydcmfgalleryitem.tpl
Modified:
   YDFramework2.0/trunk/examples/cms/includes/YDCmfContentStoreInstaller.php
   YDFramework2.0/trunk/examples/cms/includes/YDCmfInit.php
   YDFramework2.0/trunk/examples/cms/modules/ydcmfhome/ydcmfhome.tpl
Log:
Added some more modules to show the functionality of this CMF framework.

Modified: YDFramework2.0/trunk/examples/cms/includes/YDCmfContentStoreInstaller.php
===================================================================
--- YDFramework2.0/trunk/examples/cms/includes/YDCmfContentStoreInstaller.php	2006-04-18 12:55:49 UTC (rev 1856)
+++ YDFramework2.0/trunk/examples/cms/includes/YDCmfContentStoreInstaller.php	2006-04-20 15:00:17 UTC (rev 1857)
@@ -2,7 +2,13 @@
 
     // Include the YDDatabaseMetaData class
     include_once( YD_DIR_HOME_CLS . '/YDDatabaseMetaData.php' );
+    include_once( YD_DIR_HOME_CLS . '/YDFileSystem.php' );
 
+    include( YDCMS_DIR_MOD . '/ydcmfhome/ydcmfhome.php' );
+    include( YDCMS_DIR_MOD . '/ydcmfgallery/ydcmfgallery.php' );
+    include( YDCMS_DIR_MOD . '/ydcmfgalleryalbum/ydcmfgalleryalbum.php' );
+    include( YDCMS_DIR_MOD . '/ydcmfgalleryitem/ydcmfgalleryitem.php' );
+
     // Get the metadata object
     $meta = new YDDatabaseMetaData( $this->db );
 
@@ -83,16 +89,13 @@
     $node->setValue( 'title',           'Titel Nederlands', 'nl' );
     $node->setValue( 'title',           'Title English', 'en' );
     $node->setValue( 'title',           'Titre Fran&ccedil;ais', 'fr' );
-    $node->setValue( 'property',        'Property Nederlands', 'nl' );
-    $node->setValue( 'property',        'Property English', 'en' );
-    $node->setValue( 'property',        'Property Fran&ccedil;ais', 'fr' );
-    $node->setValue( 'property_other',  'Property1' );
-
-    // Add it to the store
+//    $node->setValue( 'property',        'Property Nederlands', 'nl' );
+//    $node->setValue( 'property',        'Property English', 'en' );
+//    $node->setValue( 'property',        'Property Fran&ccedil;ais', 'fr' );
+//    $node->setValue( 'property_other',  'Property1' );
     $this->addNode( $node );
 
     // Create a new node
-    include( YDCMS_DIR_MOD . '/ydcmfhome/ydcmfhome.php' );
     $node = new YDCmfHome();
     $node->setValue( 'id',              2 );
     $node->setValue( 'parent_id',       1 );
@@ -100,12 +103,10 @@
     $node->setValue( 'title',           'Titel2 Nederlands', 'nl' );
     $node->setValue( 'title',           'Title2 English', 'en' );
     $node->setValue( 'title',           'Titre2 Fran&ccedil;ais', 'fr' );
-    $node->setValue( 'property',        'Property2 Nederlands', 'nl' );
-    $node->setValue( 'property',        'Property2 English', 'en' );
-    $node->setValue( 'property',        'Property2 Fran&ccedil;ais', 'fr' );
-    $node->setValue( 'property_other',  'Property21' );
-
-    // Add it to the store
+//    $node->setValue( 'property',        'Property2 Nederlands', 'nl' );
+//    $node->setValue( 'property',        'Property2 English', 'en' );
+//    $node->setValue( 'property',        'Property2 Fran&ccedil;ais', 'fr' );
+//    $node->setValue( 'property_other',  'Property21' );
     $this->addNode( $node );
 
     // Create a new node
@@ -116,12 +117,10 @@
     $node->setValue( 'title',           'News Nederlands', 'nl' );
     $node->setValue( 'title',           'News English', 'en' );
     $node->setValue( 'title',           'News Fran&ccedil;ais', 'fr' );
-    $node->setValue( 'property',        'Property Nederlands', 'nl' );
-    $node->setValue( 'property',        'Property English', 'en' );
-    $node->setValue( 'property',        'Property Fran&ccedil;ais', 'fr' );
-    $node->setValue( 'property_other',  'Property1' );
-
-    // Add it to the store
+//    $node->setValue( 'property',        'Property Nederlands', 'nl' );
+//    $node->setValue( 'property',        'Property English', 'en' );
+//    $node->setValue( 'property',        'Property Fran&ccedil;ais', 'fr' );
+//    $node->setValue( 'property_other',  'Property1' );
     $this->addNode( $node );
 
     // Create a new node
@@ -132,12 +131,10 @@
     $node->setValue( 'title',           'News Krabrally 2006 Nederlands', 'nl' );
     $node->setValue( 'title',           'News Krabrally 2006 English', 'en' );
     $node->setValue( 'title',           'News Krabrally 2006 Fran&ccedil;ais', 'fr' );
-    $node->setValue( 'property',        'Property Nederlands', 'nl' );
-    $node->setValue( 'property',        'Property English', 'en' );
-    $node->setValue( 'property',        'Property Fran&ccedil;ais', 'fr' );
-    $node->setValue( 'property_other',  'Property1' );
-
-    // Add it to the store
+//    $node->setValue( 'property',        'Property Nederlands', 'nl' );
+//    $node->setValue( 'property',        'Property English', 'en' );
+//    $node->setValue( 'property',        'Property Fran&ccedil;ais', 'fr' );
+//    $node->setValue( 'property_other',  'Property1' );
     $this->addNode( $node );
 
     // Create a new node
@@ -148,12 +145,56 @@
     $node->setValue( 'title',           'News Krabrally 2007 Nederlands', 'nl' );
     $node->setValue( 'title',           'News Krabrally 2007 English', 'en' );
     $node->setValue( 'title',           'News Krabrally 2007 Fran&ccedil;ais', 'fr' );
-    $node->setValue( 'property',        'Property Nederlands', 'nl' );
-    $node->setValue( 'property',        'Property English', 'en' );
-    $node->setValue( 'property',        'Property Fran&ccedil;ais', 'fr' );
-    $node->setValue( 'property_other',  'Property1' );
+//    $node->setValue( 'property',        'Property Nederlands', 'nl' );
+//    $node->setValue( 'property',        'Property English', 'en' );
+//    $node->setValue( 'property',        'Property Fran&ccedil;ais', 'fr' );
+//    $node->setValue( 'property_other',  'Property1' );
+    $this->addNode( $node );
 
-    // Add it to the store
+    // Add a new photo gallery list
+    $node = new YDCmfGallery();
+    $node->setValue( 'id',        6 );
+    $node->setValue( 'parent_id', 1 );
+    $node->setValue( 'name',      'photo' );
+    $node->setValue( 'title',     'Photo Galleries' );
     $this->addNode( $node );
 
+    // Add a new photo gallery list
+    $node = new YDCmfGalleryAlbum();
+    $node->setValue( 'id',        7 );
+    $node->setValue( 'parent_id', 6 );
+    $node->setValue( 'name',      'photo/krabrally2006' );
+    $node->setValue( 'title',     'Krabrally 2006' );
+    $this->addNode( $node );
+
+    // Add a new photo gallery list
+    $node = new YDCmfGalleryAlbum();
+    $node->setValue( 'id',        8 );
+    $node->setValue( 'parent_id', 6 );
+    $node->setValue( 'name',      'photo/krabrally2007' );
+    $node->setValue( 'title',     'Krabrally 2007' );
+    $this->addNode( $node );
+
+    // Add some images
+    $dir = new YDFSDirectory( dirname( __FILE__ ) . '/../uploads/krabrally2006' );
+    foreach ( $dir->getContents() as $idx => $file ) {
+        $node = new YDCmfGalleryItem();
+        $node->setValue( 'parent_id', 7 );
+        $node->setValue( 'name', 'photo/krabrally2006/' . $file->getBasenameNoExt() );
+        $node->setValue( 'title', $file->getBasename() );
+        $node->setValue( 'relative_path', 'uploads/krabrally2006/' . $file->getBasename() );
+        $this->addNode( $node );
+    }
+
+    // Add some images
+    $dir = new YDFSDirectory( dirname( __FILE__ ) . '/../uploads/krabrally2007' );
+    foreach ( $dir->getContents() as $idx => $file ) {
+        $node = new YDCmfGalleryItem();
+        $node->setValue( 'parent_id', 8 );
+        $node->setValue( 'name', 'photo/krabrally2007/' . $file->getBasenameNoExt() );
+        $node->setValue( 'title', $file->getBasename() );
+        $node->setValue( 'relative_path', 'uploads/krabrally2007/' . $file->getBasename() );
+        $this->addNode( $node );
+    }
+
 ?>

Modified: YDFramework2.0/trunk/examples/cms/includes/YDCmfInit.php
===================================================================
--- YDFramework2.0/trunk/examples/cms/includes/YDCmfInit.php	2006-04-18 12:55:49 UTC (rev 1856)
+++ YDFramework2.0/trunk/examples/cms/includes/YDCmfInit.php	2006-04-20 15:00:17 UTC (rev 1857)
@@ -205,8 +205,8 @@
             $this->addMeta( 'nright', null, 'int', false, null, false );
             $this->addMeta( 'nlevel', null, 'int', false, null, false );
             $this->addMeta( 'title', null, 'string', true, null );
-            $this->addMeta( 'property', 'property_0', 'string', true, null );
-            $this->addMeta( 'property_other', 'property_1', 'string', false, null );
+//            $this->addMeta( 'property', 'property_0', 'string', true, null );
+//            $this->addMeta( 'property_other', 'property_1', 'string', false, null );
             $this->addMeta( 'created', null, 'datetime', false, time() );
             $this->addMeta( 'created_by', null, 'string', false, YDBrowserInfo::getComputerName() );
             $this->addMeta( 'modified', null, 'datetime', false, time() );

Added: YDFramework2.0/trunk/examples/cms/modules/ydcmfgallery/ydcmfgallery.php
===================================================================
--- YDFramework2.0/trunk/examples/cms/modules/ydcmfgallery/ydcmfgallery.php	2006-04-18 12:55:49 UTC (rev 1856)
+++ YDFramework2.0/trunk/examples/cms/modules/ydcmfgallery/ydcmfgallery.php	2006-04-20 15:00:17 UTC (rev 1857)
@@ -0,0 +1,16 @@
+<?php
+
+    // Class
+    class ydcmfgallery extends YDCmfContentNode {
+
+        // Constructor
+        function ydcmfgallery() {
+
+            // Initialize the parent
+            $this->YDCmfContentNode();
+
+        }
+
+    }
+
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/cms/modules/ydcmfgallery/ydcmfgallery.tpl
===================================================================
--- YDFramework2.0/trunk/examples/cms/modules/ydcmfgallery/ydcmfgallery.tpl	2006-04-18 12:55:49 UTC (rev 1856)
+++ YDFramework2.0/trunk/examples/cms/modules/ydcmfgallery/ydcmfgallery.tpl	2006-04-20 15:00:17 UTC (rev 1857)
@@ -0,0 +1,65 @@
+<h2><?php echo( $node->getTranslatedValue( 'title' ) ); ?></h2>
+
+<p>Hello world from template.</p>
+
+<?php if ( sizeof( $languages ) > 1 ) { ?>
+<p>
+    <b>Languages:</b>
+    <?php foreach ( $languages as $l => $fl ) { ?>
+        <?php if ( $l == $language ) { ?>
+            [<?php echo( $l ); ?>]
+        <? } else { ?>
+            <?php echo( $node->getTitleLink( null, $fl, $l ) ); ?>
+        <? } ?>
+    <?php } ?>
+</p>
+<?php } ?>
+
+<?php if ( sizeof( $node->getPossibleActions() ) > 1 ) { ?>
+<p>
+    <b>Actions:</b>
+    <?php foreach ( $node->getPossibleActions() as $a ) { ?>
+        <?php if ( $a == $YD_MODULE_ACTION ) { ?>
+            [<?php echo( $a ); ?>]
+        <? } else { ?>
+            <?php echo( $node->getTitleLink( $a, $language, $a ) ); ?>
+        <? } ?>
+    <?php } ?>
+</p>
+<?php } ?>
+
+<?php if ( $YD_MODULE_ACTION == 'custom' ) { ?>
+    <hr size="1" noshade="" />
+    <b>MySQL version:</b> <?php echo( $mysql_version ); ?>
+<?php } ?>
+
+<?php if ( $YD_MODULE_ACTION == 'form' ) { ?>
+    <hr size="1" noshade="" />
+    <b>Using forms</b>
+    <?php echo( $form ); ?>
+<?php } ?>
+
+<hr size="1" noshade="" />
+
+<p><b>Template:</b> <?php echo( $tplName ); ?></p>
+
+<p><b>Content-Type:</b> <?php echo( $node->getValue( 'content_type' ) ); ?></p>
+
+<p><b>Action:</b> <?php echo( $YD_MODULE_ACTION ); ?></p>
+
+<p><b>Parameters:</b> <?php YDDebugUtil::dump( $_GET ); ?></p>
+
+<?php if ( $node->getChildren() ) { ?>
+    <p><b>Children</b></p>
+    <ul>
+        <?php foreach ( $node->getChildren() as $child ) { ?>
+            <li><?php echo( $child->getTitleLink( '' ) ); ?></li>
+        <?php } ?>
+    </ul>
+<?php } ?>
+
+<p><b>Path</b>
+<?php foreach ( $node->getPath() as $path ) { ?>
+    &raquo; <?php echo( $path->getTitleLink( '' ) ); ?>
+<?php } ?>
+</p>

Added: YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryalbum/ydcmfgalleryalbum.php
===================================================================
--- YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryalbum/ydcmfgalleryalbum.php	2006-04-18 12:55:49 UTC (rev 1856)
+++ YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryalbum/ydcmfgalleryalbum.php	2006-04-20 15:00:17 UTC (rev 1857)
@@ -0,0 +1,16 @@
+<?php
+
+    // Class
+    class ydcmfgalleryalbum extends YDCmfContentNode {
+
+        // Constructor
+        function ydcmfgalleryalbum() {
+
+            // Initialize the parent
+            $this->YDCmfContentNode();
+
+        }
+
+    }
+
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryalbum/ydcmfgalleryalbum.tpl
===================================================================
--- YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryalbum/ydcmfgalleryalbum.tpl	2006-04-18 12:55:49 UTC (rev 1856)
+++ YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryalbum/ydcmfgalleryalbum.tpl	2006-04-20 15:00:17 UTC (rev 1857)
@@ -0,0 +1,65 @@
+<h2><?php echo( $node->getTranslatedValue( 'title' ) ); ?></h2>
+
+<p>Hello world from template.</p>
+
+<?php if ( sizeof( $languages ) > 1 ) { ?>
+<p>
+    <b>Languages:</b>
+    <?php foreach ( $languages as $l => $fl ) { ?>
+        <?php if ( $l == $language ) { ?>
+            [<?php echo( $l ); ?>]
+        <? } else { ?>
+            <?php echo( $node->getTitleLink( null, $fl, $l ) ); ?>
+        <? } ?>
+    <?php } ?>
+</p>
+<?php } ?>
+
+<?php if ( sizeof( $node->getPossibleActions() ) > 1 ) { ?>
+<p>
+    <b>Actions:</b>
+    <?php foreach ( $node->getPossibleActions() as $a ) { ?>
+        <?php if ( $a == $YD_MODULE_ACTION ) { ?>
+            [<?php echo( $a ); ?>]
+        <? } else { ?>
+            <?php echo( $node->getTitleLink( $a, $language, $a ) ); ?>
+        <? } ?>
+    <?php } ?>
+</p>
+<?php } ?>
+
+<?php if ( $YD_MODULE_ACTION == 'custom' ) { ?>
+    <hr size="1" noshade="" />
+    <b>MySQL version:</b> <?php echo( $mysql_version ); ?>
+<?php } ?>
+
+<?php if ( $YD_MODULE_ACTION == 'form' ) { ?>
+    <hr size="1" noshade="" />
+    <b>Using forms</b>
+    <?php echo( $form ); ?>
+<?php } ?>
+
+<hr size="1" noshade="" />
+
+<p><b>Template:</b> <?php echo( $tplName ); ?></p>
+
+<p><b>Content-Type:</b> <?php echo( $node->getValue( 'content_type' ) ); ?></p>
+
+<p><b>Action:</b> <?php echo( $YD_MODULE_ACTION ); ?></p>
+
+<p><b>Parameters:</b> <?php YDDebugUtil::dump( $_GET ); ?></p>
+
+<?php if ( $node->getChildren() ) { ?>
+    <p><b>Children</b></p>
+    <ul>
+        <?php foreach ( $node->getChildren( 'created DESC, title_' . $language . ' DESC' ) as $child ) { ?>
+            <li><?php echo( $child->getTitleLink( '' ) ); ?></li>
+        <?php } ?>
+    </ul>
+<?php } ?>
+
+<p><b>Path</b>
+<?php foreach ( $node->getPath() as $path ) { ?>
+    &raquo; <?php echo( $path->getTitleLink( '' ) ); ?>
+<?php } ?>
+</p>

Added: YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryitem/ydcmfgalleryitem.php
===================================================================
--- YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryitem/ydcmfgalleryitem.php	2006-04-18 12:55:49 UTC (rev 1856)
+++ YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryitem/ydcmfgalleryitem.php	2006-04-20 15:00:17 UTC (rev 1857)
@@ -0,0 +1,19 @@
+<?php
+
+    // Class
+    class ydcmfgalleryitem extends YDCmfContentNode {
+
+        // Constructor
+        function ydcmfgalleryitem() {
+
+            // Initialize the parent
+            $this->YDCmfContentNode();
+
+            // Add the path to the image
+            $this->addMeta( 'relative_path', 'property_0', 'string', false, null );
+
+        }
+
+    }
+
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryitem/ydcmfgalleryitem.tpl
===================================================================
--- YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryitem/ydcmfgalleryitem.tpl	2006-04-18 12:55:49 UTC (rev 1856)
+++ YDFramework2.0/trunk/examples/cms/modules/ydcmfgalleryitem/ydcmfgalleryitem.tpl	2006-04-20 15:00:17 UTC (rev 1857)
@@ -0,0 +1,65 @@
+<h2><?php echo( $node->getTranslatedValue( 'title' ) ); ?></h2>
+
+<p>Hello world from template.</p>
+
+<?php if ( sizeof( $languages ) > 1 ) { ?>
+<p>
+    <b>Languages:</b>
+    <?php foreach ( $languages as $l => $fl ) { ?>
+        <?php if ( $l == $language ) { ?>
+            [<?php echo( $l ); ?>]
+        <? } else { ?>
+            <?php echo( $node->getTitleLink( null, $fl, $l ) ); ?>
+        <? } ?>
+    <?php } ?>
+</p>
+<?php } ?>
+
+<?php if ( sizeof( $node->getPossibleActions() ) > 1 ) { ?>
+<p>
+    <b>Actions:</b>
+    <?php foreach ( $node->getPossibleActions() as $a ) { ?>
+        <?php if ( $a == $YD_MODULE_ACTION ) { ?>
+            [<?php echo( $a ); ?>]
+        <? } else { ?>
+            <?php echo( $node->getTitleLink( $a, $language, $a ) ); ?>
+        <? } ?>
+    <?php } ?>
+</p>
+<?php } ?>
+
+<?php if ( $YD_MODULE_ACTION == 'custom' ) { ?>
+    <hr size="1" noshade="" />
+    <b>MySQL version:</b> <?php echo( $mysql_version ); ?>
+<?php } ?>
+
+<?php if ( $YD_MODULE_ACTION == 'form' ) { ?>
+    <hr size="1" noshade="" />
+    <b>Using forms</b>
+    <?php echo( $form ); ?>
+<?php } ?>
+
+<hr size="1" noshade="" />
+
+<p><b>Template:</b> <?php echo( $tplName ); ?></p>
+
+<p><b>Content-Type:</b> <?php echo( $node->getValue( 'content_type' ) ); ?></p>
+
+<p><b>Action:</b> <?php echo( $YD_MODULE_ACTION ); ?></p>
+
+<p><b>Parameters:</b> <?php YDDebugUtil::dump( $_GET ); ?></p>
+
+<?php if ( $node->getChildren() ) { ?>
+    <p><b>Children</b></p>
+    <ul>
+        <?php foreach ( $node->getChildren( 'created DESC, title_' . $language . ' DESC' ) as $child ) { ?>
+            <li><?php echo( $child->getTitleLink( '' ) ); ?></li>
+        <?php } ?>
+    </ul>
+<?php } ?>
+
+<p><b>Path</b>
+<?php foreach ( $node->getPath() as $path ) { ?>
+    &raquo; <?php echo( $path->getTitleLink( '' ) ); ?>
+<?php } ?>
+</p>

Modified: YDFramework2.0/trunk/examples/cms/modules/ydcmfhome/ydcmfhome.tpl
===================================================================
--- YDFramework2.0/trunk/examples/cms/modules/ydcmfhome/ydcmfhome.tpl	2006-04-18 12:55:49 UTC (rev 1856)
+++ YDFramework2.0/trunk/examples/cms/modules/ydcmfhome/ydcmfhome.tpl	2006-04-20 15:00:17 UTC (rev 1857)
@@ -5,11 +5,11 @@
 <?php if ( sizeof( $languages ) > 1 ) { ?>
 <p>
     <b>Languages:</b>
-    <?php foreach ( $languages as $l => $fl ) { ?>
+    <?php foreach ( $languages as $fl => $l ) { ?>
         <?php if ( $l == $language ) { ?>
-            [<?php echo( $l ); ?>]
+            [<?php echo( $fl ); ?>]
         <? } else { ?>
-            <?php echo( $node->getTitleLink( null, $fl, $l ) ); ?>
+            <?php echo( $node->getTitleLink( null, $l, $fl ) ); ?>
         <? } ?>
     <?php } ?>
 </p>



From ximian at berlios.de  Fri Apr 21 17:43:46 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Fri, 21 Apr 2006 17:43:46 +0200
Subject: [ydf-devel] r1858 - YDFramework2.0/trunk/YDFramework2
Message-ID: <200604211543.k3LFhktk019473@sheep.berlios.de>

Author: ximian
Date: 2006-04-21 17:43:27 +0200 (Fri, 21 Apr 2006)
New Revision: 1858

Modified:
   YDFramework2.0/trunk/YDFramework2/YDF2_init.php
Log:
FIX: YDLocale::set must include always (because of previous array initialization).
     now works even on special cases.

Modified: YDFramework2.0/trunk/YDFramework2/YDF2_init.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDF2_init.php	2006-04-20 15:00:17 UTC (rev 1857)
+++ YDFramework2.0/trunk/YDFramework2/YDF2_init.php	2006-04-21 15:43:27 UTC (rev 1858)
@@ -483,7 +483,7 @@
             // if directories array exist we must include all files
             if ( isset( $GLOBALS[ 'YD_LANGUAGES_DIRECTORIES' ] ) )
                 foreach ( $GLOBALS[ 'YD_LANGUAGES_DIRECTORIES' ] as $dir )
-                    @include_once( $dir . '/' . YDLocale::get() . '.php' );
+                    @include( $dir . '/' . YDLocale::get() . '.php' );
         }
 
         /**



From ximian at berlios.de  Sat Apr 22 18:50:26 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sat, 22 Apr 2006 18:50:26 +0200
Subject: [ydf-devel] r1859 - in YDFramework2.0/trunk/YDFramework2: YDClasses YDClasses/YDCMComponent addons addons/YDCMLanguages addons/YDCMLink addons/YDCMLocks addons/YDCMPage addons/YDCMRootmenu addons/YDCMTree addons/YDCMUsers addons/YDCMUsers/languages
Message-ID: <200604221650.k3MGoQ8U030223@sheep.berlios.de>

Author: ximian
Date: 2006-04-22 18:49:13 +0200 (Sat, 22 Apr 2006)
New Revision: 1859

Added:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLink/
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLink/YDCMLink.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLocks/
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLocks/YDCMLocks.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMRootmenu/
   YDFramework2.0/trunk/YDFramework2/addons/YDCMRootmenu/YDCMRootmenu.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/
   YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/YDCMTree.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php
Log:
first release of a Content Management Component structure.

Added: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml	2006-04-21 15:43:27 UTC (rev 1858)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml	2006-04-22 16:49:13 UTC (rev 1859)
@@ -0,0 +1,1213 @@
+<?xml version="1.0" standalone="yes" ?>
+<DBMODEL Version="4.0">
+<SETTINGS>
+<GLOBALSETTINGS ModelName="YDCM scheme" IDModel="0" IDVersion="0" VersionStr="1.0.0.0" Comments="" UseVersionHistroy="1" AutoIncVersion="1" DatabaseType="MySQL" ZoomFac="73.00" XPos="25" YPos="329" DefaultDataType="5" DefaultTablePrefix="0" DefSaveDBConn="" DefSyncDBConn="" DefQueryDBConn="" Printer="" HPageCount="4.0" PageAspectRatio="1.440892512336408" PageOrientation="1" PageFormat="A4 (210x297 mm, 8.26x11.7 inches)" SelectedPages="" UsePositionGrid="1" PositionGridX="20" PositionGridY="20" TableNameInRefs="0" DefaultTableType="0" ActivateRefDefForNewRelations="1" FKPrefix="" FKPostfix="" CreateFKRefDefIndex="0" DBQuoteCharacter="`" CreateSQLforLinkedObjects="0" DefModelFont="Tahoma" CanvasWidth="4096" CanvasHeight="2842" />
+<DATATYPEGROUPS>
+<DATATYPEGROUP Name="Numeric Types" Icon="1" />
+<DATATYPEGROUP Name="Date and Time Types" Icon="2" />
+<DATATYPEGROUP Name="String Types" Icon="3" />
+<DATATYPEGROUP Name="Blob and Text Types" Icon="4" />
+<DATATYPEGROUP Name="User defined Types" Icon="5" />
+<DATATYPEGROUP Name="Geographic Types" Icon="6" />
+</DATATYPEGROUPS>
+<DATATYPES>
+<DATATYPE ID="1" IDGroup="0" TypeName="TINYINT" Description="A very small integer. The signed range is -128 to 127. The unsigned range is 0 to 255." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="1" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="2" IDGroup="0" TypeName="SMALLINT" Description="A small integer. The signed range is -32768 to 32767. The unsigned range is 0 to 65535." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="1" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="3" IDGroup="0" TypeName="MEDIUMINT" Description="A medium-size integer. The signed range is -8388608 to 8388607. The unsigned range is 0 to 16777215." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="1" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="4" IDGroup="0" TypeName="INT" Description="A normal-size integer. The signed range is -2147483648 to 2147483647. The unsigned range is 0 to 4294967295." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="1" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="0" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="5" IDGroup="0" TypeName="INTEGER" Description="A normal-size integer. The signed range is -2147483648 to 2147483647. The unsigned range is 0 to 4294967295." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="1" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="1" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="6" IDGroup="0" TypeName="BIGINT" Description="A large integer. The signed range is -9223372036854775808 to 9223372036854775807. The unsigned range is 0 to 18446744073709551615." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="0" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="7" IDGroup="0" TypeName="FLOAT" Description="A small (single-precision) floating-point number. Cannot be unsigned. Allowable values are -3.402823466E+38 to -1.175494351E-38, 0, and 1.175494351E-38 to 3.402823466E+38." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="precision" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="8" IDGroup="0" TypeName="FLOAT" Description="A small (single-precision) floating-point number. Cannot be unsigned. Allowable values are -3.402823466E+38 to -1.175494351E-38, 0, and 1.175494351E-38 to 3.402823466E+38." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="9" IDGroup="0" TypeName="DOUBLE" Description="A normal-size (double-precision) floating-point number. Cannot be unsigned. Allowable values are -1.7976931348623157E+308 to -2.2250738585072014E-308, 0, and 2.2250738585072014E-308 to 1.7976931348623157E+308." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="10" IDGroup="0" TypeName="DOUBLE PRECISION" Description="This is a synonym for DOUBLE." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="11" IDGroup="0" TypeName="REAL" Description="This is a synonym for DOUBLE." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="12" IDGroup="0" TypeName="DECIMAL" Description="An unpacked floating-point number. Cannot be unsigned. Behaves like a CHAR column." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="3" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="13" IDGroup="0" TypeName="NUMERIC" Description="This is a synonym for DECIMAL." ParamCount="2" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="3" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="14" IDGroup="1" TypeName="DATE" Description="A date. The supported range is \a1000-01-01\a to \a9999-12-31\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="15" IDGroup="1" TypeName="DATETIME" Description="A date and time combination. The supported range is \a1000-01-01 00:00:00\a to \a9999-12-31 23:59:59\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="16" IDGroup="1" TypeName="TIMESTAMP" Description="A timestamp. The range is \a1970-01-01 00:00:00\a to sometime in the year 2037. The length can be 14 (or missing), 12, 10, 8, 6, 4, or 2 representing YYYYMMDDHHMMSS, ... , YYYYMMDD, ... , YY formats." ParamCount="1" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+</DATATYPE>
+<DATATYPE ID="17" IDGroup="1" TypeName="TIME" Description="A time. The range is \a-838:59:59\a to \a838:59:59\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="18" IDGroup="1" TypeName="YEAR" Description="A year in 2- or 4-digit format (default is 4-digit)." ParamCount="1" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+</DATATYPE>
+<DATATYPE ID="19" IDGroup="2" TypeName="CHAR" Description="A fixed-length string (1 to 255 characters) that is always right-padded with spaces to the specified length when stored. values are sorted and compared in case-insensitive fashion according to the default character set unless the BINARY keyword is given." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="20" IDGroup="2" TypeName="VARCHAR" Description="A variable-length string (1 to 255 characters). Values are sorted and compared in case-sensitive fashion unless the BINARY keyword is given." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="21" IDGroup="2" TypeName="BIT" Description="This is a synonym for CHAR(1)." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="22" IDGroup="2" TypeName="BOOL" Description="This is a synonym for CHAR(1)." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="23" IDGroup="3" TypeName="TINYBLOB" Description="A column maximum length of 255 (2^8 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="24" IDGroup="3" TypeName="BLOB" Description="A column maximum length of 65535 (2^16 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="25" IDGroup="3" TypeName="MEDIUMBLOB" Description="A column maximum length of 16777215 (2^24 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="26" IDGroup="3" TypeName="LONGBLOB" Description="A column maximum length of 4294967295 (2^32 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="27" IDGroup="3" TypeName="TINYTEXT" Description="A column maximum length of 255 (2^8 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="28" IDGroup="3" TypeName="TEXT" Description="A column maximum length of 65535 (2^16 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="29" IDGroup="3" TypeName="MEDIUMTEXT" Description="A column maximum length of 16777215 (2^24 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="30" IDGroup="3" TypeName="LONGTEXT" Description="A column maximum length of 4294967295 (2^32 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="31" IDGroup="3" TypeName="ENUM" Description="An enumeration. A string object that can have only one value, chosen from the list of values." ParamCount="1" OptionCount="0" ParamRequired="1" EditParamsAsString="1" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="values" />
+</PARAMS>
+</DATATYPE>
+<DATATYPE ID="32" IDGroup="3" TypeName="SET" Description="A set. A string object that can have zero or more values, each of which must be chosen from the list of values." ParamCount="1" OptionCount="0" ParamRequired="1" EditParamsAsString="1" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="values" />
+</PARAMS>
+</DATATYPE>
+<DATATYPE ID="33" IDGroup="4" TypeName="Varchar(20)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="34" IDGroup="4" TypeName="Varchar(45)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="35" IDGroup="4" TypeName="Varchar(255)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="36" IDGroup="5" TypeName="GEOMETRY" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="38" IDGroup="5" TypeName="LINESTRING" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="39" IDGroup="5" TypeName="POLYGON" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="40" IDGroup="5" TypeName="MULTIPOINT" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="41" IDGroup="5" TypeName="MULTILINESTRING" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="42" IDGroup="5" TypeName="MULTIPOLYGON" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="43" IDGroup="5" TypeName="GEOMETRYCOLLECTION" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+</DATATYPES>
+<COMMON_DATATYPES>
+<COMMON_DATATYPE ID="5" />
+<COMMON_DATATYPE ID="8" />
+<COMMON_DATATYPE ID="20" />
+<COMMON_DATATYPE ID="15" />
+<COMMON_DATATYPE ID="22" />
+<COMMON_DATATYPE ID="28" />
+<COMMON_DATATYPE ID="26" />
+<COMMON_DATATYPE ID="33" />
+<COMMON_DATATYPE ID="34" />
+<COMMON_DATATYPE ID="35" />
+</COMMON_DATATYPES>
+<TABLEPREFIXES>
+<TABLEPREFIX Name="Default (no prefix)" />
+</TABLEPREFIXES>
+<REGIONCOLORS>
+<REGIONCOLOR Color="Red=#FFEEEC" />
+<REGIONCOLOR Color="Yellow=#FEFDED" />
+<REGIONCOLOR Color="Green=#EAFFE5" />
+<REGIONCOLOR Color="Cyan=#ECFDFF" />
+<REGIONCOLOR Color="Blue=#F0F1FE" />
+<REGIONCOLOR Color="Magenta=#FFEBFA" />
+</REGIONCOLORS>
+<POSITIONMARKERS>
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+</POSITIONMARKERS>
+</SETTINGS>
+<METADATA>
+<REGIONS>
+</REGIONS>
+<TABLES>
+<TABLE ID="1158" Tablename="YDCMAudit" PrevTableName="admin_log" XPos="700" YPos="260" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="2" >
+<COLUMNS>
+<COLUMN ID="1169" ColName="YDCMAudit_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement action">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1171" ColName="user_id" PrevColName="username" Pos="3" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="user id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1170" ColName="date" PrevColName="timestamp" Pos="2" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="date of this action">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1172" ColName="object" PrevColName="action" Pos="4" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="action object">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1174" ColName="object_action" PrevColName="itemname" Pos="6" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="action name of the above object">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1173" ColName="object_id" PrevColName="itemid" Pos="5" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="action parameter">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1333" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1176" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1169" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1160" Tablename="YDCMPage" PrevTableName="component_page" XPos="360" YPos="800" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="4" >
+<COLUMNS>
+<COLUMN ID="1315" ColName="component_id" PrevColName="" Pos="10" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="page id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1424" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="component code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1187" ColName="language_id" PrevColName="language" Pos="8" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1297" ColName="current_version" PrevColName="version" Pos="9" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="this is the current version of this page">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1293" ColName="title" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="page title">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1181" ColName="html" PrevColName="content" Pos="2" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="page html">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1440" ColName="xhtml" PrevColName="" Pos="11" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional page xhtml">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1182" ColName="template_pack" PrevColName="" Pos="3" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="template pack used">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1183" ColName="template" PrevColName="" Pos="4" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="template name">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1184" ColName="metatags" PrevColName="" Pos="5" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="metatags are used. 1 true, 0 false">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1185" ColName="description" PrevColName="" Pos="6" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="metatag description">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1186" ColName="keywords" PrevColName="" Pos="7" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="metatag keywords">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1331" />
+<RELATION_END ID="1340" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1327" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1315" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1161" Tablename="YDCMConfiguration" PrevTableName="configuration" XPos="1420" YPos="60" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO configuration(name, value)\nVALUES(\aname\a, \a\A.$site_name.\A\a);\nINSERT INTO configuration(name, value)\nVALUES(\aadministrator_id\a, \a1\a);\nINSERT INTO configuration(name, value)\nVALUES(\aserver_type\a, \a0\a);\nINSERT INTO configuration(name, value)\nVALUES(\agmt\a, \a0\a);\nINSERT INTO configuration(name, value)\nVALUES(\acharset\a, \aiso-8859-15\a);\nINSERT INTO configuration(name, value)\nVALUES(\astate\a, \a1\a);\nINSERT INTO configuration(name, value)\nVALUES(\aoffline_msg\a, \aPortal indisponivel\a);\nINSERT INTO configuration(name, value)\nVALUES(\aerror_msg\a, \aOcorreu um erro\a);\nINSERT INTO configuration(name, value)\nVALUES(\avisits_total\a, \a0\a);\nINSERT INTO configuration(name, value)\nVALUES(\avisits_current\a, \a0\a);\nINSERT INTO configuratio!
 n(name, value)\nVALUES(\apack\a, \adefault\a);\nINSERT INTO configuration(name, value)\nVALUES(\ainstalation_date\a, \a123123123\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_server\a, \a0\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_from\a, \a\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_host\a, \alocalhost\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_port\a, \a25\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_user\a, \a\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_pass\a, \a\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_priority\a, \a1\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_helo\a, \a\a);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="5" >
+<COLUMNS>
+<COLUMN ID="1188" ColName="name" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(50)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="variable name">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1189" ColName="value" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="value">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<INDICES>
+<INDEX ID="1281" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1188" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+<INDEX ID="1190" IndexName="name" IndexKind="1" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1188" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1162" Tablename="YDCMTree" PrevTableName="content" XPos="40" YPos="820" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO content(id, parent, path, pathname, position, type, children, reference, state, services, author, date, access, search, published, date_start, date_end, published_after, published_after_notify)\nVALUES(2, 1, \a1\a, \a/\a, 1, \amenu\a, 0, \astandard\a, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0);\nINSERT INTO content(id, parent, path, pathname, position, type, children, reference, state, services, author, date, access, search, published, date_start, date_end, published_after, published_after_notify)\nVALUES(3, 1, \a1\a, \a/\a, 9999999, \amenu_archive\a, 0, \aarchive\a, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="6"!
  >
+<COLUMNS>
+<COLUMN ID="1191" ColName="content_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="Autoincrement id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1192" ColName="parent_id" PrevColName="parent" Pos="2" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="Parent node id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1418" ColName="nleft" PrevColName="" Pos="18" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1419" ColName="nright" PrevColName="" Pos="19" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1420" ColName="nlevel" PrevColName="" Pos="20" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1195" ColName="position" PrevColName="" Pos="5" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="1" Comments="position related to brothers">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1196" ColName="type" PrevColName="" Pos="6" idDatatype="20" DatatypeParams="(20)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="component type name. eg YDCMPage">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1198" ColName="reference" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(100)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="internal name">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1199" ColName="state" PrevColName="" Pos="9" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="state code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1203" ColName="access" PrevColName="" Pos="13" idDatatype="1" DatatypeParams="(2)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="1" Comments="access code. 0 private, 1 public">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1204" ColName="searcheable" PrevColName="search" Pos="14" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="component will be afected by visitors searches">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1206" ColName="published_date_start" PrevColName="date_start" Pos="16" idDatatype="5" DatatypeParams="(20)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="schedule start date (used when state is schedule)">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1207" ColName="published_date_end" PrevColName="date_end" Pos="17" idDatatype="5" DatatypeParams="(20)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="schedule end date (used when state is schedule)">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1340" />
+<RELATION_START ID="1341" />
+<RELATION_START ID="1437" />
+<RELATION_START ID="1526" />
+<RELATION_START ID="1535" />
+<RELATION_START ID="1572" />
+</RELATIONS_START>
+<INDICES>
+<INDEX ID="1210" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1191" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1163" Tablename="YDCMLink" PrevTableName="content_language" XPos="360" YPos="1060" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="7" >
+<COLUMNS>
+<COLUMN ID="1318" ColName="component_id" PrevColName="" Pos="5" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1425" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1213" ColName="language_id" PrevColName="language" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1212" ColName="title" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(200)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="link title">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1295" ColName="url" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="link url">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1332" />
+<RELATION_END ID="1341" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1325" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1318" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1164" Tablename="YDCMConfiguration_files" PrevTableName="files" XPos="1420" YPos="160" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO files(name, value)\nVALUES(\amaxfilesize_mb\a, \a5\a);\nINSERT INTO files(name, value)\nVALUES(\aimage\a, \ajpeg, gif, png, ico, psd, bmp\a);\nINSERT INTO files(name, value)\nVALUES(\atext\a, \ahtm, html, xml, js, css, doc, pdf, xls, ppt, txt\a);\nINSERT INTO files(name, value)\nVALUES(\avideo\a, \ampg, mpeg, avi, wmv\a);\nINSERT INTO files(name, value)\nVALUES(\aaudio\a, \amp3, wav, ogg, mid\a);\nINSERT INTO files(name, value)\nVALUES(\acompress\a, \azip, rar, gz, tgz\a);\nINSERT INTO files(name, value)\nVALUES(\aother\a, \aswf\a);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="8" >
+<COLUMNS>
+<COLUMN ID="1214" ColName="name" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(50)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1215" ColName="value" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<INDICES>
+<INDEX ID="1282" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1214" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+<INDEX ID="1216" IndexName="name" IndexKind="1" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1214" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1165" Tablename="YDCMLanguages" PrevTableName="languages" XPos="700" YPos="920" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO languages(interface, name, lang, active, default_lang)\nVALUES(\aadmin\a, \aen\a, \aEnglish\a, 1, 1);\nINSERT INTO languages(interface, name, lang, active, default_lang)\nVALUES(\aadmin\a, \apt\a, \aPortugu\234s\a, 1, 0);\nINSERT INTO languages(interface, name, lang, active, default_lang)\nVALUES(\aclient\a, \aen\a, \aEnglish\a, 1, 1);\nINSERT INTO languages(interface, name, lang, active, default_lang)\nVALUES(\aclient\a, \apt\a, \aPortugu\234s\a, 1, 0);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="9" >
+<COLUMNS>
+<COLUMN ID="1219" ColName="language_id" PrevColName="lang" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="language code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1218" ColName="name" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(50)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="language name">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1220" ColName="active" PrevColName="" Pos="4" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="is active. 1 true, 0 false">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1221" ColName="visitors_default" PrevColName="default_lang" Pos="5" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="this is the default language for visitors side. 1 true, 0 false">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1331" />
+<RELATION_START ID="1332" />
+<RELATION_START ID="1366" />
+<RELATION_START ID="1527" />
+<RELATION_START ID="1536" />
+<RELATION_START ID="1573" />
+</RELATIONS_START>
+<INDICES>
+<INDEX ID="1290" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1219" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1166" Tablename="YDCMVisits" PrevTableName="site_log" XPos="1120" YPos="60" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="10" >
+<COLUMNS>
+<COLUMN ID="1222" ColName="visit_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1224" ColName="date" PrevColName="timestamp" Pos="3" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="visit date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1228" ColName="browser" PrevColName="" Pos="7" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="browser info">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1229" ColName="platform" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="user platform">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<INDICES>
+<INDEX ID="1230" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1222" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1167" Tablename="YDCMSearches" PrevTableName="site_searches" XPos="940" YPos="60" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="11" >
+<COLUMNS>
+<COLUMN ID="1231" ColName="search_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1232" ColName="date" PrevColName="timestamp" Pos="2" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="search date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1236" ColName="word" PrevColName="" Pos="6" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="word used on search">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<INDICES>
+<INDEX ID="1237" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1231" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1168" Tablename="YDCMUsers" PrevTableName="users" XPos="900" YPos="480" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO users(id, parent, path, position, children, master, username, password, name, email, other, language, state, login_start, login_end, created, created_user, login_counter, login_last, login_current, personalconfig_access, content_access, content_create, content_edit, content_approve, content_move, content_copy, content_block, content_delete, content_custom, visits_access, searches_access, downloads_access, information_access, database_access, audit_access, files_access, files_configuration, users_access, configuration_general_access, configuration_languages_access)\nVALUES(1, 0, \a0\a, 1, 0, 0, \a21232f297a57a5a\a, \a21232f297a57a5a743894a0e4a801fc3\a, \apH cms - Super administrator\a, \a \a, \a \a, \aEnglish\a, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1!
 , 1, 1, 1);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="12" >
+<COLUMNS>
+<COLUMN ID="1238" ColName="user_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement user id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1239" ColName="parent_id" PrevColName="parent" Pos="2" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional parent of this user">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1240" ColName="nleft" PrevColName="path" Pos="3" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional nleft">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1241" ColName="nright" PrevColName="position" Pos="4" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional nright">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1242" ColName="nlevel" PrevColName="children" Pos="5" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional nlevel">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1244" ColName="username" PrevColName="" Pos="7" idDatatype="20" DatatypeParams="(100)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1245" ColName="password" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(100)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1246" ColName="name" PrevColName="" Pos="9" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1247" ColName="email" PrevColName="" Pos="10" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1248" ColName="other" PrevColName="" Pos="11" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="other user informations">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1249" ColName="language_id" PrevColName="language" Pos="12" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code for administration">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1250" ColName="state" PrevColName="" Pos="13" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="user state">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1251" ColName="login_start" PrevColName="" Pos="14" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="when state is schedule this is the start date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1252" ColName="login_end" PrevColName="" Pos="15" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="when state is schedule this is the end date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1255" ColName="login_counter" PrevColName="" Pos="18" idDatatype="5" DatatypeParams="(11)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="login counter">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1256" ColName="login_last" PrevColName="" Pos="19" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="last login date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1257" ColName="login_current" PrevColName="" Pos="20" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="date of current session">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1254" ColName="created_user" PrevColName="" Pos="17" idDatatype="5" DatatypeParams="(20)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="id  of user that created this user">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1253" ColName="created_date" PrevColName="created" Pos="16" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="creation date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1333" />
+<RELATION_START ID="1383" />
+<RELATION_START ID="1410" />
+<RELATION_START ID="1436" />
+</RELATIONS_START>
+<RELATIONS_END>
+<RELATION_END ID="1366" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1279" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1238" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1367" Tablename="YDCMHelpdesk_posts" PrevTableName="Table_11" XPos="740" YPos="1540" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="20" >
+<COLUMNS>
+<COLUMN ID="1581" ColName="post_id" PrevColName="" Pos="13" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1369" ColName="component_id" PrevColName="ticket_id" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1371" ColName="user_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1372" ColName="subject" PrevColName="" Pos="2" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1373" ColName="localization" PrevColName="" Pos="3" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1374" ColName="urgency_id" PrevColName="urgency" Pos="4" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="0" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1375" ColName="state_id" PrevColName="state" Pos="5" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="1" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1376" ColName="text" PrevColName="" Pos="6" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1377" ColName="created_in" PrevColName="" Pos="7" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1378" ColName="reported_in" PrevColName="" Pos="8" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1379" ColName="reported_by" PrevColName="" Pos="9" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1380" ColName="reported_to_in" PrevColName="" Pos="10" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1381" ColName="reported_to" PrevColName="" Pos="11" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1382" ColName="reported_to_local" PrevColName="" Pos="12" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1409" />
+</RELATIONS_START>
+<RELATIONS_END>
+<RELATION_END ID="1383" />
+<RELATION_END ID="1392" />
+<RELATION_END ID="1413" />
+<RELATION_END ID="1575" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1582" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1581" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1384" Tablename="YDCMHelpdesk_state" PrevTableName="Table_12" XPos="1080" YPos="1760" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="22" >
+<COLUMNS>
+<COLUMN ID="1386" ColName="state_id" PrevColName="" Pos="0" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1388" ColName="description" PrevColName="state_name" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1392" />
+</RELATIONS_START>
+<INDICES>
+<INDEX ID="1387" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1386" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1393" Tablename="YDCMHelpdesk_urgency" PrevTableName="Table_13" XPos="1080" YPos="1680" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="24" >
+<COLUMNS>
+<COLUMN ID="1395" ColName="urgency_id" PrevColName="" Pos="0" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1397" ColName="description" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1416" ColName="color" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(45)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1413" />
+</RELATIONS_START>
+<INDICES>
+<INDEX ID="1396" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1395" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1401" Tablename="YDCMHelpdesk_response" PrevTableName="Table_14" XPos="1080" YPos="1560" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="26" >
+<COLUMNS>
+<COLUMN ID="1403" ColName="response_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1584" ColName="post_id" PrevColName="" Pos="4" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1406" ColName="user_id" PrevColName="" Pos="2" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1407" ColName="date" PrevColName="" Pos="3" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1408" ColName="description" PrevColName="" Pos="4" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1409" />
+<RELATION_END ID="1410" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1404" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1403" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1430" Tablename="YDCMLocks" PrevTableName="Table_15" XPos="40" YPos="620" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" >
+<COLUMNS>
+<COLUMN ID="1578" ColName="lock_id" PrevColName="" Pos="2" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="lock ID">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1432" ColName="content_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="component code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1434" ColName="user_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="user id that lock component">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1436" />
+<RELATION_END ID="1437" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1579" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1578" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1519" Tablename="YDCMMenu" PrevTableName="Table_21" XPos="360" YPos="680" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="31" >
+<COLUMNS>
+<COLUMN ID="1521" ColName="component_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1523" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1524" ColName="language_id" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1525" ColName="title" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="menu title">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1526" />
+<RELATION_END ID="1527" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1522" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1521" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1528" Tablename="YDCMGuestbook" PrevTableName="Table_22" XPos="360" YPos="1200" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="34" >
+<COLUMNS>
+<COLUMN ID="1530" ColName="component_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1532" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1533" ColName="language_id" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1534" ColName="title" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="guestbook name">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1547" />
+</RELATIONS_START>
+<RELATIONS_END>
+<RELATION_END ID="1535" />
+<RELATION_END ID="1536" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1531" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1530" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1537" Tablename="YDCMGuestbook_posts" PrevTableName="Table_23" XPos="640" YPos="1320" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" >
+<COLUMNS>
+<COLUMN ID="1539" ColName="post_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement post id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1541" ColName="component_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="guestbook id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1542" ColName="date" PrevColName="" Pos="2" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="post date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1543" ColName="name" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="post user name">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1544" ColName="email" PrevColName="" Pos="4" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="email of poster">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1545" ColName="message" PrevColName="" Pos="5" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1546" ColName="active" PrevColName="" Pos="6" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="1" Comments="post is active and can be seen after creation. 1 yes, 0 no">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1547" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1540" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1539" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1565" Tablename="YDCMHelpdesk" PrevTableName="Table_20" XPos="360" YPos="1520" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="39" >
+<COLUMNS>
+<COLUMN ID="1567" ColName="component_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1569" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1570" ColName="language_id" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1571" ColName="title" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="help desk title">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1575" />
+</RELATIONS_START>
+<RELATIONS_END>
+<RELATION_END ID="1572" />
+<RELATION_END ID="1573" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1568" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1567" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+</TABLES>
+<RELATIONS>
+<RELATION ID="1331" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1160" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="12" />
+<RELATION ID="1332" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1163" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="13" />
+<RELATION ID="1333" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1158" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="14" />
+<RELATION ID="1340" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1160" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="15" />
+<RELATION ID="1341" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1163" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="11" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="16" />
+<RELATION ID="1366" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1168" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="19" />
+<RELATION ID="1383" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1367" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="21" />
+<RELATION ID="1392" RelationName="state_id" Kind="2" SrcTable="1384" DestTable="1367" FKFields="state_id=state_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="23" />
+<RELATION ID="1409" RelationName="post_id" Kind="2" SrcTable="1367" DestTable="1401" FKFields="post_id=post_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" />
+<RELATION ID="1410" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1401" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
+<RELATION ID="1413" RelationName="urgency_id" Kind="2" SrcTable="1393" DestTable="1367" FKFields="urgency_id=urgency_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
+<RELATION ID="1436" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1430" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
+<RELATION ID="1437" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1430" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="29" />
+<RELATION ID="1526" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1519" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="32" />
+<RELATION ID="1527" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1519" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="18" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="33" />
+<RELATION ID="1535" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1528" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="-15" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="35" />
+<RELATION ID="1536" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1528" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="14" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="28" CaptionOffsetY="-48" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="36" />
+<RELATION ID="1547" RelationName="component_id" Kind="2" SrcTable="1528" DestTable="1537" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="-4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="38" />
+<RELATION ID="1572" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1565" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="110" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="40" />
+<RELATION ID="1573" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1565" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="236" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="41" />
+<RELATION ID="1575" RelationName="component_id" Kind="2" SrcTable="1565" DestTable="1367" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="41" />
+</RELATIONS>
+<NOTES>
+</NOTES>
+<IMAGES>
+</IMAGES>
+</METADATA>
+<PLUGINDATA>
+<PLUGINDATARECORDS>
+</PLUGINDATARECORDS>
+</PLUGINDATA>
+<QUERYDATA>
+<QUERYRECORDS>
+</QUERYRECORDS>
+</QUERYDATA>
+<LINKEDMODELS>
+</LINKEDMODELS>
+</DBMODEL>

Added: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql	2006-04-21 15:43:27 UTC (rev 1858)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql	2006-04-22 16:49:13 UTC (rev 1859)
@@ -0,0 +1,1213 @@
+<?xml version="1.0" standalone="yes" ?>
+<DBMODEL Version="4.0">
+<SETTINGS>
+<GLOBALSETTINGS ModelName="YDCM scheme" IDModel="0" IDVersion="0" VersionStr="1.0.0.0" Comments="" UseVersionHistroy="1" AutoIncVersion="1" DatabaseType="MySQL" ZoomFac="73.00" XPos="25" YPos="329" DefaultDataType="5" DefaultTablePrefix="0" DefSaveDBConn="" DefSyncDBConn="" DefQueryDBConn="" Printer="" HPageCount="4.0" PageAspectRatio="1.440892512336408" PageOrientation="1" PageFormat="A4 (210x297 mm, 8.26x11.7 inches)" SelectedPages="" UsePositionGrid="1" PositionGridX="20" PositionGridY="20" TableNameInRefs="0" DefaultTableType="0" ActivateRefDefForNewRelations="1" FKPrefix="" FKPostfix="" CreateFKRefDefIndex="0" DBQuoteCharacter="`" CreateSQLforLinkedObjects="0" DefModelFont="Tahoma" CanvasWidth="4096" CanvasHeight="2842" />
+<DATATYPEGROUPS>
+<DATATYPEGROUP Name="Numeric Types" Icon="1" />
+<DATATYPEGROUP Name="Date and Time Types" Icon="2" />
+<DATATYPEGROUP Name="String Types" Icon="3" />
+<DATATYPEGROUP Name="Blob and Text Types" Icon="4" />
+<DATATYPEGROUP Name="User defined Types" Icon="5" />
+<DATATYPEGROUP Name="Geographic Types" Icon="6" />
+</DATATYPEGROUPS>
+<DATATYPES>
+<DATATYPE ID="1" IDGroup="0" TypeName="TINYINT" Description="A very small integer. The signed range is -128 to 127. The unsigned range is 0 to 255." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="1" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="2" IDGroup="0" TypeName="SMALLINT" Description="A small integer. The signed range is -32768 to 32767. The unsigned range is 0 to 65535." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="1" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="3" IDGroup="0" TypeName="MEDIUMINT" Description="A medium-size integer. The signed range is -8388608 to 8388607. The unsigned range is 0 to 16777215." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="1" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="4" IDGroup="0" TypeName="INT" Description="A normal-size integer. The signed range is -2147483648 to 2147483647. The unsigned range is 0 to 4294967295." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="1" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="0" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="5" IDGroup="0" TypeName="INTEGER" Description="A normal-size integer. The signed range is -2147483648 to 2147483647. The unsigned range is 0 to 4294967295." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="1" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="1" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="6" IDGroup="0" TypeName="BIGINT" Description="A large integer. The signed range is -9223372036854775808 to 9223372036854775807. The unsigned range is 0 to 18446744073709551615." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="0" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="7" IDGroup="0" TypeName="FLOAT" Description="A small (single-precision) floating-point number. Cannot be unsigned. Allowable values are -3.402823466E+38 to -1.175494351E-38, 0, and 1.175494351E-38 to 3.402823466E+38." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="precision" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="8" IDGroup="0" TypeName="FLOAT" Description="A small (single-precision) floating-point number. Cannot be unsigned. Allowable values are -3.402823466E+38 to -1.175494351E-38, 0, and 1.175494351E-38 to 3.402823466E+38." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="9" IDGroup="0" TypeName="DOUBLE" Description="A normal-size (double-precision) floating-point number. Cannot be unsigned. Allowable values are -1.7976931348623157E+308 to -2.2250738585072014E-308, 0, and 2.2250738585072014E-308 to 1.7976931348623157E+308." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="10" IDGroup="0" TypeName="DOUBLE PRECISION" Description="This is a synonym for DOUBLE." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="11" IDGroup="0" TypeName="REAL" Description="This is a synonym for DOUBLE." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="12" IDGroup="0" TypeName="DECIMAL" Description="An unpacked floating-point number. Cannot be unsigned. Behaves like a CHAR column." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="3" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="13" IDGroup="0" TypeName="NUMERIC" Description="This is a synonym for DECIMAL." ParamCount="2" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="3" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="14" IDGroup="1" TypeName="DATE" Description="A date. The supported range is \a1000-01-01\a to \a9999-12-31\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="15" IDGroup="1" TypeName="DATETIME" Description="A date and time combination. The supported range is \a1000-01-01 00:00:00\a to \a9999-12-31 23:59:59\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="16" IDGroup="1" TypeName="TIMESTAMP" Description="A timestamp. The range is \a1970-01-01 00:00:00\a to sometime in the year 2037. The length can be 14 (or missing), 12, 10, 8, 6, 4, or 2 representing YYYYMMDDHHMMSS, ... , YYYYMMDD, ... , YY formats." ParamCount="1" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+</DATATYPE>
+<DATATYPE ID="17" IDGroup="1" TypeName="TIME" Description="A time. The range is \a-838:59:59\a to \a838:59:59\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="18" IDGroup="1" TypeName="YEAR" Description="A year in 2- or 4-digit format (default is 4-digit)." ParamCount="1" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+</DATATYPE>
+<DATATYPE ID="19" IDGroup="2" TypeName="CHAR" Description="A fixed-length string (1 to 255 characters) that is always right-padded with spaces to the specified length when stored. values are sorted and compared in case-insensitive fashion according to the default character set unless the BINARY keyword is given." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="20" IDGroup="2" TypeName="VARCHAR" Description="A variable-length string (1 to 255 characters). Values are sorted and compared in case-sensitive fashion unless the BINARY keyword is given." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="21" IDGroup="2" TypeName="BIT" Description="This is a synonym for CHAR(1)." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="22" IDGroup="2" TypeName="BOOL" Description="This is a synonym for CHAR(1)." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="23" IDGroup="3" TypeName="TINYBLOB" Description="A column maximum length of 255 (2^8 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="24" IDGroup="3" TypeName="BLOB" Description="A column maximum length of 65535 (2^16 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="25" IDGroup="3" TypeName="MEDIUMBLOB" Description="A column maximum length of 16777215 (2^24 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="26" IDGroup="3" TypeName="LONGBLOB" Description="A column maximum length of 4294967295 (2^32 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="27" IDGroup="3" TypeName="TINYTEXT" Description="A column maximum length of 255 (2^8 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="28" IDGroup="3" TypeName="TEXT" Description="A column maximum length of 65535 (2^16 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="29" IDGroup="3" TypeName="MEDIUMTEXT" Description="A column maximum length of 16777215 (2^24 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="30" IDGroup="3" TypeName="LONGTEXT" Description="A column maximum length of 4294967295 (2^32 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="31" IDGroup="3" TypeName="ENUM" Description="An enumeration. A string object that can have only one value, chosen from the list of values." ParamCount="1" OptionCount="0" ParamRequired="1" EditParamsAsString="1" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="values" />
+</PARAMS>
+</DATATYPE>
+<DATATYPE ID="32" IDGroup="3" TypeName="SET" Description="A set. A string object that can have zero or more values, each of which must be chosen from the list of values." ParamCount="1" OptionCount="0" ParamRequired="1" EditParamsAsString="1" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="values" />
+</PARAMS>
+</DATATYPE>
+<DATATYPE ID="33" IDGroup="4" TypeName="Varchar(20)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="34" IDGroup="4" TypeName="Varchar(45)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="35" IDGroup="4" TypeName="Varchar(255)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="36" IDGroup="5" TypeName="GEOMETRY" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="38" IDGroup="5" TypeName="LINESTRING" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="39" IDGroup="5" TypeName="POLYGON" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="40" IDGroup="5" TypeName="MULTIPOINT" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="41" IDGroup="5" TypeName="MULTILINESTRING" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="42" IDGroup="5" TypeName="MULTIPOLYGON" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="43" IDGroup="5" TypeName="GEOMETRYCOLLECTION" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+</DATATYPES>
+<COMMON_DATATYPES>
+<COMMON_DATATYPE ID="5" />
+<COMMON_DATATYPE ID="8" />
+<COMMON_DATATYPE ID="20" />
+<COMMON_DATATYPE ID="15" />
+<COMMON_DATATYPE ID="22" />
+<COMMON_DATATYPE ID="28" />
+<COMMON_DATATYPE ID="26" />
+<COMMON_DATATYPE ID="33" />
+<COMMON_DATATYPE ID="34" />
+<COMMON_DATATYPE ID="35" />
+</COMMON_DATATYPES>
+<TABLEPREFIXES>
+<TABLEPREFIX Name="Default (no prefix)" />
+</TABLEPREFIXES>
+<REGIONCOLORS>
+<REGIONCOLOR Color="Red=#FFEEEC" />
+<REGIONCOLOR Color="Yellow=#FEFDED" />
+<REGIONCOLOR Color="Green=#EAFFE5" />
+<REGIONCOLOR Color="Cyan=#ECFDFF" />
+<REGIONCOLOR Color="Blue=#F0F1FE" />
+<REGIONCOLOR Color="Magenta=#FFEBFA" />
+</REGIONCOLORS>
+<POSITIONMARKERS>
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+</POSITIONMARKERS>
+</SETTINGS>
+<METADATA>
+<REGIONS>
+</REGIONS>
+<TABLES>
+<TABLE ID="1158" Tablename="YDCMAudit" PrevTableName="admin_log" XPos="700" YPos="260" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="2" >
+<COLUMNS>
+<COLUMN ID="1169" ColName="YDCMAudit_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement action">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1171" ColName="user_id" PrevColName="username" Pos="3" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="user id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1170" ColName="date" PrevColName="timestamp" Pos="2" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="date of this action">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1172" ColName="object" PrevColName="action" Pos="4" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="action object">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1174" ColName="object_action" PrevColName="itemname" Pos="6" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="action name of the above object">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1173" ColName="object_id" PrevColName="itemid" Pos="5" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="action parameter">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1333" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1176" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1169" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1160" Tablename="YDCMPage" PrevTableName="component_page" XPos="360" YPos="800" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="4" >
+<COLUMNS>
+<COLUMN ID="1315" ColName="component_id" PrevColName="" Pos="10" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="page id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1424" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="component code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1187" ColName="language_id" PrevColName="language" Pos="8" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1297" ColName="current_version" PrevColName="version" Pos="9" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="this is the current version of this page">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1293" ColName="title" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="page title">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1181" ColName="html" PrevColName="content" Pos="2" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="page html">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1440" ColName="xhtml" PrevColName="" Pos="11" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional page xhtml">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1182" ColName="template_pack" PrevColName="" Pos="3" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="template pack used">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1183" ColName="template" PrevColName="" Pos="4" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="template name">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1184" ColName="metatags" PrevColName="" Pos="5" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="metatags are used. 1 true, 0 false">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1185" ColName="description" PrevColName="" Pos="6" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="metatag description">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1186" ColName="keywords" PrevColName="" Pos="7" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="metatag keywords">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1331" />
+<RELATION_END ID="1340" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1327" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1315" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1161" Tablename="YDCMConfiguration" PrevTableName="configuration" XPos="1420" YPos="60" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO configuration(name, value)\nVALUES(\aname\a, \a\A.$site_name.\A\a);\nINSERT INTO configuration(name, value)\nVALUES(\aadministrator_id\a, \a1\a);\nINSERT INTO configuration(name, value)\nVALUES(\aserver_type\a, \a0\a);\nINSERT INTO configuration(name, value)\nVALUES(\agmt\a, \a0\a);\nINSERT INTO configuration(name, value)\nVALUES(\acharset\a, \aiso-8859-15\a);\nINSERT INTO configuration(name, value)\nVALUES(\astate\a, \a1\a);\nINSERT INTO configuration(name, value)\nVALUES(\aoffline_msg\a, \aPortal indisponivel\a);\nINSERT INTO configuration(name, value)\nVALUES(\aerror_msg\a, \aOcorreu um erro\a);\nINSERT INTO configuration(name, value)\nVALUES(\avisits_total\a, \a0\a);\nINSERT INTO configuration(name, value)\nVALUES(\avisits_current\a, \a0\a);\nINSERT INTO configuratio!
 n(name, value)\nVALUES(\apack\a, \adefault\a);\nINSERT INTO configuration(name, value)\nVALUES(\ainstalation_date\a, \a123123123\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_server\a, \a0\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_from\a, \a\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_host\a, \alocalhost\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_port\a, \a25\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_user\a, \a\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_pass\a, \a\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_priority\a, \a1\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_helo\a, \a\a);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="5" >
+<COLUMNS>
+<COLUMN ID="1188" ColName="name" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(50)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="variable name">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1189" ColName="value" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="value">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<INDICES>
+<INDEX ID="1281" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1188" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+<INDEX ID="1190" IndexName="name" IndexKind="1" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1188" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1162" Tablename="YDCMTree" PrevTableName="content" XPos="40" YPos="820" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO content(id, parent, path, pathname, position, type, children, reference, state, services, author, date, access, search, published, date_start, date_end, published_after, published_after_notify)\nVALUES(2, 1, \a1\a, \a/\a, 1, \amenu\a, 0, \astandard\a, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0);\nINSERT INTO content(id, parent, path, pathname, position, type, children, reference, state, services, author, date, access, search, published, date_start, date_end, published_after, published_after_notify)\nVALUES(3, 1, \a1\a, \a/\a, 9999999, \amenu_archive\a, 0, \aarchive\a, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="6"!
  >
+<COLUMNS>
+<COLUMN ID="1191" ColName="content_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="Autoincrement id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1192" ColName="parent_id" PrevColName="parent" Pos="2" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="Parent node id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1418" ColName="nleft" PrevColName="" Pos="18" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1419" ColName="nright" PrevColName="" Pos="19" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1420" ColName="nlevel" PrevColName="" Pos="20" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1195" ColName="position" PrevColName="" Pos="5" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="1" Comments="position related to brothers">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1196" ColName="type" PrevColName="" Pos="6" idDatatype="20" DatatypeParams="(20)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="component type name. eg YDCMPage">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1198" ColName="reference" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(100)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="internal name">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1199" ColName="state" PrevColName="" Pos="9" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="state code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1203" ColName="access" PrevColName="" Pos="13" idDatatype="1" DatatypeParams="(2)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="1" Comments="access code. 0 private, 1 public">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1204" ColName="searcheable" PrevColName="search" Pos="14" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="component will be afected by visitors searches">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1206" ColName="published_date_start" PrevColName="date_start" Pos="16" idDatatype="5" DatatypeParams="(20)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="schedule start date (used when state is schedule)">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1207" ColName="published_date_end" PrevColName="date_end" Pos="17" idDatatype="5" DatatypeParams="(20)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="schedule end date (used when state is schedule)">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1340" />
+<RELATION_START ID="1341" />
+<RELATION_START ID="1437" />
+<RELATION_START ID="1526" />
+<RELATION_START ID="1535" />
+<RELATION_START ID="1572" />
+</RELATIONS_START>
+<INDICES>
+<INDEX ID="1210" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1191" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1163" Tablename="YDCMLink" PrevTableName="content_language" XPos="360" YPos="1060" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="7" >
+<COLUMNS>
+<COLUMN ID="1318" ColName="component_id" PrevColName="" Pos="5" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1425" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1213" ColName="language_id" PrevColName="language" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1212" ColName="title" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(200)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="link title">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1295" ColName="url" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="link url">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1332" />
+<RELATION_END ID="1341" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1325" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1318" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1164" Tablename="YDCMConfiguration_files" PrevTableName="files" XPos="1420" YPos="160" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO files(name, value)\nVALUES(\amaxfilesize_mb\a, \a5\a);\nINSERT INTO files(name, value)\nVALUES(\aimage\a, \ajpeg, gif, png, ico, psd, bmp\a);\nINSERT INTO files(name, value)\nVALUES(\atext\a, \ahtm, html, xml, js, css, doc, pdf, xls, ppt, txt\a);\nINSERT INTO files(name, value)\nVALUES(\avideo\a, \ampg, mpeg, avi, wmv\a);\nINSERT INTO files(name, value)\nVALUES(\aaudio\a, \amp3, wav, ogg, mid\a);\nINSERT INTO files(name, value)\nVALUES(\acompress\a, \azip, rar, gz, tgz\a);\nINSERT INTO files(name, value)\nVALUES(\aother\a, \aswf\a);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="8" >
+<COLUMNS>
+<COLUMN ID="1214" ColName="name" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(50)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1215" ColName="value" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<INDICES>
+<INDEX ID="1282" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1214" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+<INDEX ID="1216" IndexName="name" IndexKind="1" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1214" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1165" Tablename="YDCMLanguages" PrevTableName="languages" XPos="700" YPos="920" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO languages(interface, name, lang, active, default_lang)\nVALUES(\aadmin\a, \aen\a, \aEnglish\a, 1, 1);\nINSERT INTO languages(interface, name, lang, active, default_lang)\nVALUES(\aadmin\a, \apt\a, \aPortugu\234s\a, 1, 0);\nINSERT INTO languages(interface, name, lang, active, default_lang)\nVALUES(\aclient\a, \aen\a, \aEnglish\a, 1, 1);\nINSERT INTO languages(interface, name, lang, active, default_lang)\nVALUES(\aclient\a, \apt\a, \aPortugu\234s\a, 1, 0);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="9" >
+<COLUMNS>
+<COLUMN ID="1219" ColName="language_id" PrevColName="lang" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="language code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1218" ColName="name" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(50)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="language name">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1220" ColName="active" PrevColName="" Pos="4" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="is active. 1 true, 0 false">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1221" ColName="visitors_default" PrevColName="default_lang" Pos="5" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="this is the default language for visitors side. 1 true, 0 false">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1331" />
+<RELATION_START ID="1332" />
+<RELATION_START ID="1366" />
+<RELATION_START ID="1527" />
+<RELATION_START ID="1536" />
+<RELATION_START ID="1573" />
+</RELATIONS_START>
+<INDICES>
+<INDEX ID="1290" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1219" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1166" Tablename="YDCMVisits" PrevTableName="site_log" XPos="1120" YPos="60" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="10" >
+<COLUMNS>
+<COLUMN ID="1222" ColName="visit_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1224" ColName="date" PrevColName="timestamp" Pos="3" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="visit date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1228" ColName="browser" PrevColName="" Pos="7" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="browser info">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1229" ColName="platform" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="user platform">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<INDICES>
+<INDEX ID="1230" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1222" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1167" Tablename="YDCMSearches" PrevTableName="site_searches" XPos="940" YPos="60" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="11" >
+<COLUMNS>
+<COLUMN ID="1231" ColName="search_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1232" ColName="date" PrevColName="timestamp" Pos="2" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="search date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1236" ColName="word" PrevColName="" Pos="6" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="word used on search">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<INDICES>
+<INDEX ID="1237" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1231" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1168" Tablename="YDCMUsers" PrevTableName="users" XPos="900" YPos="480" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO users(id, parent, path, position, children, master, username, password, name, email, other, language, state, login_start, login_end, created, created_user, login_counter, login_last, login_current, personalconfig_access, content_access, content_create, content_edit, content_approve, content_move, content_copy, content_block, content_delete, content_custom, visits_access, searches_access, downloads_access, information_access, database_access, audit_access, files_access, files_configuration, users_access, configuration_general_access, configuration_languages_access)\nVALUES(1, 0, \a0\a, 1, 0, 0, \a21232f297a57a5a\a, \a21232f297a57a5a743894a0e4a801fc3\a, \apH cms - Super administrator\a, \a \a, \a \a, \aEnglish\a, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1!
 , 1, 1, 1);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="12" >
+<COLUMNS>
+<COLUMN ID="1238" ColName="user_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement user id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1239" ColName="parent_id" PrevColName="parent" Pos="2" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional parent of this user">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1240" ColName="nleft" PrevColName="path" Pos="3" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional nleft">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1241" ColName="nright" PrevColName="position" Pos="4" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional nright">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1242" ColName="nlevel" PrevColName="children" Pos="5" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional nlevel">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1244" ColName="username" PrevColName="" Pos="7" idDatatype="20" DatatypeParams="(100)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1245" ColName="password" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(100)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1246" ColName="name" PrevColName="" Pos="9" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1247" ColName="email" PrevColName="" Pos="10" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1248" ColName="other" PrevColName="" Pos="11" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="other user informations">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1249" ColName="language_id" PrevColName="language" Pos="12" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code for administration">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1250" ColName="state" PrevColName="" Pos="13" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="user state">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1251" ColName="login_start" PrevColName="" Pos="14" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="when state is schedule this is the start date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1252" ColName="login_end" PrevColName="" Pos="15" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="when state is schedule this is the end date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1255" ColName="login_counter" PrevColName="" Pos="18" idDatatype="5" DatatypeParams="(11)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="login counter">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1256" ColName="login_last" PrevColName="" Pos="19" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="last login date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1257" ColName="login_current" PrevColName="" Pos="20" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="date of current session">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1254" ColName="created_user" PrevColName="" Pos="17" idDatatype="5" DatatypeParams="(20)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="id  of user that created this user">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1253" ColName="created_date" PrevColName="created" Pos="16" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="creation date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1333" />
+<RELATION_START ID="1383" />
+<RELATION_START ID="1410" />
+<RELATION_START ID="1436" />
+</RELATIONS_START>
+<RELATIONS_END>
+<RELATION_END ID="1366" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1279" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1238" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1367" Tablename="YDCMHelpdesk_posts" PrevTableName="Table_11" XPos="740" YPos="1540" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="20" >
+<COLUMNS>
+<COLUMN ID="1581" ColName="post_id" PrevColName="" Pos="13" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1369" ColName="component_id" PrevColName="ticket_id" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1371" ColName="user_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1372" ColName="subject" PrevColName="" Pos="2" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1373" ColName="localization" PrevColName="" Pos="3" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1374" ColName="urgency_id" PrevColName="urgency" Pos="4" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="0" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1375" ColName="state_id" PrevColName="state" Pos="5" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="1" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1376" ColName="text" PrevColName="" Pos="6" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1377" ColName="created_in" PrevColName="" Pos="7" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1378" ColName="reported_in" PrevColName="" Pos="8" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1379" ColName="reported_by" PrevColName="" Pos="9" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1380" ColName="reported_to_in" PrevColName="" Pos="10" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1381" ColName="reported_to" PrevColName="" Pos="11" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1382" ColName="reported_to_local" PrevColName="" Pos="12" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1409" />
+</RELATIONS_START>
+<RELATIONS_END>
+<RELATION_END ID="1383" />
+<RELATION_END ID="1392" />
+<RELATION_END ID="1413" />
+<RELATION_END ID="1575" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1582" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1581" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1384" Tablename="YDCMHelpdesk_state" PrevTableName="Table_12" XPos="1080" YPos="1760" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="22" >
+<COLUMNS>
+<COLUMN ID="1386" ColName="state_id" PrevColName="" Pos="0" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1388" ColName="description" PrevColName="state_name" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1392" />
+</RELATIONS_START>
+<INDICES>
+<INDEX ID="1387" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1386" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1393" Tablename="YDCMHelpdesk_urgency" PrevTableName="Table_13" XPos="1080" YPos="1680" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="24" >
+<COLUMNS>
+<COLUMN ID="1395" ColName="urgency_id" PrevColName="" Pos="0" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1397" ColName="description" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1416" ColName="color" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(45)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1413" />
+</RELATIONS_START>
+<INDICES>
+<INDEX ID="1396" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1395" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1401" Tablename="YDCMHelpdesk_response" PrevTableName="Table_14" XPos="1080" YPos="1560" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="26" >
+<COLUMNS>
+<COLUMN ID="1403" ColName="response_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1584" ColName="post_id" PrevColName="" Pos="4" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1406" ColName="user_id" PrevColName="" Pos="2" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1407" ColName="date" PrevColName="" Pos="3" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1408" ColName="description" PrevColName="" Pos="4" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1409" />
+<RELATION_END ID="1410" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1404" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1403" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1430" Tablename="YDCMLocks" PrevTableName="Table_15" XPos="40" YPos="620" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" >
+<COLUMNS>
+<COLUMN ID="1578" ColName="lock_id" PrevColName="" Pos="2" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="lock ID">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1432" ColName="content_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="component code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1434" ColName="user_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="user id that lock component">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1436" />
+<RELATION_END ID="1437" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1579" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1578" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1519" Tablename="YDCMMenu" PrevTableName="Table_21" XPos="360" YPos="680" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="31" >
+<COLUMNS>
+<COLUMN ID="1521" ColName="component_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1523" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1524" ColName="language_id" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1525" ColName="title" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="menu title">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1526" />
+<RELATION_END ID="1527" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1522" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1521" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1528" Tablename="YDCMGuestbook" PrevTableName="Table_22" XPos="360" YPos="1200" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="34" >
+<COLUMNS>
+<COLUMN ID="1530" ColName="component_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1532" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1533" ColName="language_id" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1534" ColName="title" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="guestbook name">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1547" />
+</RELATIONS_START>
+<RELATIONS_END>
+<RELATION_END ID="1535" />
+<RELATION_END ID="1536" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1531" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1530" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1537" Tablename="YDCMGuestbook_posts" PrevTableName="Table_23" XPos="640" YPos="1320" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" >
+<COLUMNS>
+<COLUMN ID="1539" ColName="post_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement post id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1541" ColName="component_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="guestbook id">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1542" ColName="date" PrevColName="" Pos="2" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="post date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1543" ColName="name" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="post user name">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1544" ColName="email" PrevColName="" Pos="4" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="email of poster">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1545" ColName="message" PrevColName="" Pos="5" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1546" ColName="active" PrevColName="" Pos="6" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="1" Comments="post is active and can be seen after creation. 1 yes, 0 no">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_END>
+<RELATION_END ID="1547" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1540" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1539" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+<TABLE ID="1565" Tablename="YDCMHelpdesk" PrevTableName="Table_20" XPos="360" YPos="1520" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="39" >
+<COLUMNS>
+<COLUMN ID="1567" ColName="component_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1569" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1570" ColName="language_id" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1571" ColName="title" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="help desk title">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1575" />
+</RELATIONS_START>
+<RELATIONS_END>
+<RELATION_END ID="1572" />
+<RELATION_END ID="1573" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1568" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1567" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
+</TABLES>
+<RELATIONS>
+<RELATION ID="1331" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1160" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="12" />
+<RELATION ID="1332" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1163" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="13" />
+<RELATION ID="1333" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1158" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="14" />
+<RELATION ID="1340" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1160" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="15" />
+<RELATION ID="1341" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1163" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="11" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="16" />
+<RELATION ID="1366" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1168" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="19" />
+<RELATION ID="1383" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1367" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="21" />
+<RELATION ID="1392" RelationName="state_id" Kind="2" SrcTable="1384" DestTable="1367" FKFields="state_id=state_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="23" />
+<RELATION ID="1409" RelationName="post_id" Kind="2" SrcTable="1367" DestTable="1401" FKFields="post_id=post_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" />
+<RELATION ID="1410" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1401" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
+<RELATION ID="1413" RelationName="urgency_id" Kind="2" SrcTable="1393" DestTable="1367" FKFields="urgency_id=urgency_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
+<RELATION ID="1436" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1430" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
+<RELATION ID="1437" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1430" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="29" />
+<RELATION ID="1526" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1519" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="32" />
+<RELATION ID="1527" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1519" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="18" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="33" />
+<RELATION ID="1535" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1528" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="-15" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="35" />
+<RELATION ID="1536" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1528" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="14" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="28" CaptionOffsetY="-48" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="36" />
+<RELATION ID="1547" RelationName="component_id" Kind="2" SrcTable="1528" DestTable="1537" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="-4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="38" />
+<RELATION ID="1572" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1565" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="110" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="40" />
+<RELATION ID="1573" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1565" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="236" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="41" />
+<RELATION ID="1575" RelationName="component_id" Kind="2" SrcTable="1565" DestTable="1367" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="41" />
+</RELATIONS>
+<NOTES>
+</NOTES>
+<IMAGES>
+</IMAGES>
+</METADATA>
+<PLUGINDATA>
+<PLUGINDATARECORDS>
+</PLUGINDATARECORDS>
+</PLUGINDATA>
+<QUERYDATA>
+<QUERYRECORDS>
+</QUERYRECORDS>
+</QUERYDATA>
+<LINKEDMODELS>
+</LINKEDMODELS>
+</DBMODEL>

Added: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php	2006-04-21 15:43:27 UTC (rev 1858)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php	2006-04-22 16:49:13 UTC (rev 1859)
@@ -0,0 +1,144 @@
+<?php
+
+    /*
+
+        Yellow Duck Framework version 2.0
+        (c) Copyright 2002-2005 Pieter Claerhout
+
+        This library is free software; you can redistribute it and/or
+        modify it under the terms of the GNU Lesser General Public
+        License as published by the Free Software Foundation; either
+        version 2.1 of the License, or (at your option) any later version.
+
+        This library is distributed in the hope that it will be useful,
+        but WITHOUT ANY WARRANTY; without even the implied warranty of
+        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+        Lesser General Public License for more details.
+
+        You should have received a copy of the GNU Lesser General Public
+        License along with this library; if not, write to the Free Software
+        Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
+
+    */
+
+    // Check if the framework is loaded
+    if ( ! defined( 'YD_FW_NAME' ) ) {
+        die( 'Yellow Duck Framework is not loaded.' );
+    }
+
+    YDInclude( 'YDDatabaseObject.php' );
+
+
+    class YDCMComponent extends YDDatabaseObject {
+
+        function YDCMComponent( $name, $standardComponent = true ) {
+
+			// init DB object
+            $this->YDDatabaseObject();
+
+            $this->_author = 'unknown author';
+            $this->_version = 'unknown version';
+            $this->_copyright = 'no copyright';
+            $this->_description = 'no description';
+
+			// register database as default
+            $this->registerDatabase();
+
+			// register table for this component
+            $this->registerTable( $name );
+
+			// if this is a standard component has primary key 'component_id' and 2 standard relations
+			if ( $standardComponent ){
+
+				// register standard Key
+				$this->registerKey( 'component_id', true );
+
+				// register tree field and relation
+				$this->registerField( 'content_id' );
+	            $relTree = & $this->registerRelation( 'YDCMTree', false, 'YDCMTree' );
+				$relTree->setLocalKey( 'content_id' );
+            	$relTree->setForeignKey( 'content_id' );
+
+				// register language field and relation
+				$this->registerField( 'language_id' );
+         		$relLanguage = & $this->registerRelation( 'YDCMLanguages', false, 'YDCMLanguages' );
+				$relLanguage->setLocalKey( 'language_id' );
+				$relLanguage->setForeignKey( 'language_id' );
+			}
+
+		}
+
+
+        /**
+         *  This function returns the component author
+         *
+         *  @returns    component author
+         */
+		function getAuthor(){
+			return $this->_author;
+		}
+
+
+        /**
+         *  This function returns the component version
+         *
+         *  @returns    component version
+         */
+		function getVersion(){
+			return $this->_version;
+		}
+
+
+        /**
+         *  This function returns the component copyright
+         *
+         *  @returns    component copyright
+         */
+		function getCopyright(){
+			return $this->_copyright;
+		}
+
+
+        /**
+         *  This function returns the component description
+         *
+         *  @returns    component description
+         */
+		function getDescription(){
+			return $this->_description;
+		}
+
+
+		// this function will fix the current YDDatabaseObject::registerRelation
+		// TODO: delete it when YDDatabaseObject::registerRelation support seach inside YDF addons directory
+		function registerRelation( $a, $b, $c ){
+		
+			YDInclude( $a . '.php' );
+			YDInclude( $c . '.php' );			
+			
+			return parent::registerRelation( $a, $b, $c );
+		}
+		
+
+        /**
+         *  This function adds a standard node in the tree. Experimental
+         *
+         *  @param $values  Node values
+         */
+		function add( $values ){
+
+			// reset values
+			$this->reset();
+			
+			// set values
+			$this->setValues( $values );
+
+			// TODO: check if language_id (another admin could delete or deactivate it)
+			// TODO: check if content_id exist (not required because it should be locked anyway)
+
+			// insert values
+			return $this->insert();
+		}
+
+    }
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php	2006-04-21 15:43:27 UTC (rev 1858)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php	2006-04-22 16:49:13 UTC (rev 1859)
@@ -0,0 +1,55 @@
+<?php
+
+    /*
+
+        Yellow Duck Framework version 2.0
+        (c) Copyright 2002-2005 Pieter Claerhout
+
+        This library is free software; you can redistribute it and/or
+        modify it under the terms of the GNU Lesser General Public
+        License as published by the Free Software Foundation; either
+        version 2.1 of the License, or (at your option) any later version.
+
+        This library is distributed in the hope that it will be useful,
+        but WITHOUT ANY WARRANTY; without even the implied warranty of
+        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+        Lesser General Public License for more details.
+
+        You should have received a copy of the GNU Lesser General Public
+        License along with this library; if not, write to the Free Software
+        Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
+
+    */
+
+    // Check if the framework is loaded
+    if ( ! defined( 'YD_FW_NAME' ) ) {
+        die( 'Yellow Duck Framework is not loaded.' );
+    }
+
+	YDInclude( 'YDCMComponent.php' );
+
+    class YDCMLanguages extends YDCMComponent {
+
+        function YDCMLanguages() {
+        
+			// init component as a non standard component
+            $this->YDCMComponent( 'YDCMLanguages', false );
+
+            $this->_author = 'Francisco Azevedo';
+            $this->_version = '0.1';
+            $this->_copyright = '(c) Copyright 2006 Francisco Azevedo';
+            $this->_description = 'This is a CM component for language management';
+
+            // define custom key
+            $this->registerKey( 'language_id', true );
+
+			// Fields
+			$this->registerField( 'name' );
+			$this->registerField( 'active' );
+			$this->registerField( 'visitors_default' );
+
+			// we don't have relations from here (just TO here, and we don't need to define that)
+		}
+
+    }
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMLink/YDCMLink.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLink/YDCMLink.php	2006-04-21 15:43:27 UTC (rev 1858)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLink/YDCMLink.php	2006-04-22 16:49:13 UTC (rev 1859)
@@ -0,0 +1,50 @@
+<?php
+
+    /*
+
+        Yellow Duck Framework version 2.0
+        (c) Copyright 2002-2005 Pieter Claerhout
+
+        This library is free software; you can redistribute it and/or
+        modify it under the terms of the GNU Lesser General Public
+        License as published by the Free Software Foundation; either
+        version 2.1 of the License, or (at your option) any later version.
+
+        This library is distributed in the hope that it will be useful,
+        but WITHOUT ANY WARRANTY; without even the implied warranty of
+        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+        Lesser General Public License for more details.
+
+        You should have received a copy of the GNU Lesser General Public
+        License along with this library; if not, write to the Free Software
+        Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
+
+    */
+
+    // Check if the framework is loaded
+    if ( ! defined( 'YD_FW_NAME' ) ) {
+        die( 'Yellow Duck Framework is not loaded.' );
+    }
+
+    class YDCMLink extends YDCMComponent {
+    
+        function YDCMLink() {
+        
+			// init component
+            $this->YDCMComponent( 'YDCMLink' );
+
+            $this->_author = 'Francisco Azevedo';
+            $this->_version = '0.1';
+            $this->_copyright = '(c) Copyright 2006 Francisco Azevedo';
+            $this->_description = 'This is a link component';
+
+			// register custom fields
+			$this->registerField( 'title' );
+			$this->registerField( 'url' );
+
+			// we don't have custom relations
+		}
+
+
+    }
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMLocks/YDCMLocks.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLocks/YDCMLocks.php	2006-04-21 15:43:27 UTC (rev 1858)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLocks/YDCMLocks.php	2006-04-22 16:49:13 UTC (rev 1859)
@@ -0,0 +1,57 @@
+<?php
+
+    /*
+
+        Yellow Duck Framework version 2.0
+        (c) Copyright 2002-2005 Pieter Claerhout
+
+        This library is free software; you can redistribute it and/or
+        modify it under the terms of the GNU Lesser General Public
+        License as published by the Free Software Foundation; either
+        version 2.1 of the License, or (at your option) any later version.
+
+        This library is distributed in the hope that it will be useful,
+        but WITHOUT ANY WARRANTY; without even the implied warranty of
+        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+        Lesser General Public License for more details.
+
+        You should have received a copy of the GNU Lesser General Public
+        License along with this library; if not, write to the Free Software
+        Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
+
+    */
+
+    // Check if the framework is loaded
+    if ( ! defined( 'YD_FW_NAME' ) ) {
+        die( 'Yellow Duck Framework is not loaded.' );
+    }
+
+    class YDCMLocks extends YDCMComponent {
+    
+        function YDCMLocks() {
+        
+			// init component as non default component
+            $this->YDCMComponent( 'YDCMLocks', false );
+
+            $this->_author = 'Francisco Azevedo';
+            $this->_version = '0.1';
+            $this->_copyright = '(c) Copyright 2006 Francisco Azevedo';
+            $this->_description = 'This is a content lock management component';
+
+            // register custom fields
+			$this->registerField( 'content_id' );
+			$this->registerField( 'user_id' );
+
+			// register custom relations
+            $relTree = & $this->registerRelation( 'YDCMTree', false, 'YDCMTree' );
+			$relTree->setLocalKey( 'content_id' );
+            $relTree->setForeignKey( 'content_id' );
+
+            $relUsers = & $this->registerRelation( 'YDCMUsers', false, 'YDCMUsers' );
+			$relUsers->setLocalKey( 'user_id' );
+            $relUsers->setForeignKey( 'user_id' );
+		}
+
+
+    }
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-04-21 15:43:27 UTC (rev 1858)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-04-22 16:49:13 UTC (rev 1859)
@@ -0,0 +1,61 @@
+<?php
+
+    /*
+
+        Yellow Duck Framework version 2.0
+        (c) Copyright 2002-2005 Pieter Claerhout
+
+        This library is free software; you can redistribute it and/or
+        modify it under the terms of the GNU Lesser General Public
+        License as published by the Free Software Foundation; either
+        version 2.1 of the License, or (at your option) any later version.
+
+        This library is distributed in the hope that it will be useful,
+        but WITHOUT ANY WARRANTY; without even the implied warranty of
+        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+        Lesser General Public License for more details.
+
+        You should have received a copy of the GNU Lesser General Public
+        License along with this library; if not, write to the Free Software
+        Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
+
+    */
+
+    // Check if the framework is loaded
+    if ( ! defined( 'YD_FW_NAME' ) ) {
+        die( 'Yellow Duck Framework is not loaded.' );
+    }
+
+    class YDCMPage extends YDCMComponent {
+    
+        function YDCMPage() {
+
+			// init component
+            $this->YDCMComponent( 'YDCMPage' );
+
+            $this->_author = 'Francisco Azevedo';
+            $this->_version = '0.1';
+            $this->_copyright = '(c) Copyright 2006 Francisco Azevedo';
+            $this->_description = 'This is a page component';
+
+            // define custom fields
+			$this->registerField( 'content_id' );
+			$this->registerField( 'language_id' );
+			$this->registerField( 'current_version' );
+			$this->registerField( 'title' );
+			$this->registerField( 'html' );
+			$this->registerField( 'xhtml' );
+			$this->registerField( 'template_pack' );
+			$this->registerField( 'template' );
+			$this->registerField( 'metatags' );			
+			$this->registerField( 'description' );
+			$this->registerField( 'keywords' );			
+			$this->registerField( 'access' );
+			$this->registerField( 'search' );
+
+			// we don't have custom relations
+		}
+		
+		
+    }
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMRootmenu/YDCMRootmenu.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMRootmenu/YDCMRootmenu.php	2006-04-21 15:43:27 UTC (rev 1858)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMRootmenu/YDCMRootmenu.php	2006-04-22 16:49:13 UTC (rev 1859)
@@ -0,0 +1,48 @@
+<?php
+
+    /*
+
+        Yellow Duck Framework version 2.0
+        (c) Copyright 2002-2005 Pieter Claerhout
+
+        This library is free software; you can redistribute it and/or
+        modify it under the terms of the GNU Lesser General Public
+        License as published by the Free Software Foundation; either
+        version 2.1 of the License, or (at your option) any later version.
+
+        This library is distributed in the hope that it will be useful,
+        but WITHOUT ANY WARRANTY; without even the implied warranty of
+        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+        Lesser General Public License for more details.
+
+        You should have received a copy of the GNU Lesser General Public
+        License along with this library; if not, write to the Free Software
+        Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
+
+    */
+
+    // Check if the framework is loaded
+    if ( ! defined( 'YD_FW_NAME' ) ) {
+        die( 'Yellow Duck Framework is not loaded.' );
+    }
+
+    class YDCMRootmenu extends YDCMComponent {
+    
+        function YDCMRootmenu() {
+        
+			// init component
+            $this->YDCMComponent( 'YDCMRootmenu' );
+
+            $this->_author = 'Francisco Azevedo';
+            $this->_version = '0.1';
+            $this->_copyright = '(c) Copyright 2006 Francisco Azevedo';
+            $this->_description = 'This is a menu component';
+
+			// register custom fields
+			$this->registerField( 'title' );
+
+			// we don't have custom relations
+		}
+
+    }
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/YDCMTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/YDCMTree.php	2006-04-21 15:43:27 UTC (rev 1858)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/YDCMTree.php	2006-04-22 16:49:13 UTC (rev 1859)
@@ -0,0 +1,136 @@
+<?php
+
+    /*
+
+        Yellow Duck Framework version 2.0
+        (c) Copyright 2002-2005 Pieter Claerhout
+
+        This library is free software; you can redistribute it and/or
+        modify it under the terms of the GNU Lesser General Public
+        License as published by the Free Software Foundation; either
+        version 2.1 of the License, or (at your option) any later version.
+
+        This library is distributed in the hope that it will be useful,
+        but WITHOUT ANY WARRANTY; without even the implied warranty of
+        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+        Lesser General Public License for more details.
+
+        You should have received a copy of the GNU Lesser General Public
+        License along with this library; if not, write to the Free Software
+        Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
+
+    */
+
+    // Check if the framework is loaded
+    if ( ! defined( 'YD_FW_NAME' ) ) {
+        die( 'Yellow Duck Framework is not loaded.' );
+    }
+
+	YDInclude( 'YDDatabaseTree.php' );
+
+	// dbobject will delete records even if there are NO conditions ('where' sql conditions)
+	YDConfig::set( 'YD_DBOBJECT_DELETE', true );
+
+    class YDCMTree extends YDCMComponent {
+    
+        function YDCMTree() {
+        
+			// init component as non default
+            $this->YDCMComponent( 'YDCMTree', false );
+
+            $this->_author = 'Francisco Azevedo';
+            $this->_version = '0.1';
+            $this->_copyright = '(c) Copyright 2006 Francisco Azevedo';
+            $this->_description = 'This CM component manages the content tree';
+
+            // register custom key
+            $this->registerKey( 'content_id', true );
+
+			// register fields	
+			$this->registerField( 'parent_id' );
+			$this->registerField( 'nleft' );
+			$this->registerField( 'nright' );
+			$this->registerField( 'nlevel' );
+			$this->registerField( 'position' );
+			$this->registerField( 'type' );
+			$this->registerField( 'reference' );
+			$this->registerField( 'state' );
+			$this->registerField( 'access' );			
+			$this->registerField( 'searcheable' );			
+			$this->registerField( 'published_date_start' );
+			$this->registerField( 'published_date_end' );			
+
+			// setup tree
+			// TODO: position is required and we must change order from 'parent_id' to 'parent_id ASC, position ASC'
+			$this->tree = new YDDatabaseTree( 'default', 'YDCMTree', 'content_id', 'parent_id', 'parent_id' );
+		
+			// add tree fields
+			$this->tree->addField( 'type' );
+			$this->tree->addField( 'reference' );
+			$this->tree->addField( 'state' );
+
+			// we don't have relations from here (just TO here, and we don't need to define that)
+		}
+
+
+        /**
+         *  This function deletes a tree node
+         *
+         *  @param $elementID  The node id
+         */
+		function deleteNode( $elementID ){
+
+			// delete node and all children of this node
+			// TODO: maybe we could return the nodes deleted
+			return $this->tree->deleteNode( intval( $elementID ) );
+		}
+		
+		
+        /**
+         *  This function inverts a state
+         *
+         *  @param $elementID  The node id
+         *
+         *  @returns    1 if state changed, 0 otherwise
+         */
+		function toogleState( $elementID ){
+		
+			$this->resetValues();
+
+			// sets element id
+			$this->content_id = intval( $elementID );
+
+			// search element id and assign values
+			$this->find();
+
+			// change state attribute
+			if ( $this->state == 0 ) $this->state = 1;
+			else                     $this->state = 0;
+
+			// update id with new values
+			return $this->update();			
+		}
+
+
+        /**
+         *  This function sets a node state
+         *
+         *  @param $elementID  The node id
+         *  @param $state      The state code
+         *
+         *  @returns    1 if state changed, 0 otherwise
+         */
+		function setState( $elementID, $state ){
+		
+			$this->resetValues();
+
+			// set id and state
+			$this->content_id = intval( $elementID );
+			$this->state = intval( $state );
+
+			// update values
+			return $this->update();
+		}
+		
+    }
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php	2006-04-21 15:43:27 UTC (rev 1858)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php	2006-04-22 16:49:13 UTC (rev 1859)
@@ -0,0 +1,300 @@
+<?php
+
+    /*
+
+        Yellow Duck Framework version 2.0
+        (c) Copyright 2002-2005 Pieter Claerhout
+
+        This library is free software; you can redistribute it and/or
+        modify it under the terms of the GNU Lesser General Public
+        License as published by the Free Software Foundation; either
+        version 2.1 of the License, or (at your option) any later version.
+
+        This library is distributed in the hope that it will be useful,
+        but WITHOUT ANY WARRANTY; without even the implied warranty of
+        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+        Lesser General Public License for more details.
+
+        You should have received a copy of the GNU Lesser General Public
+        License along with this library; if not, write to the Free Software
+        Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
+
+    */
+
+    // Check if the framework is loaded
+    if ( ! defined( 'YD_FW_NAME' ) ) {
+        die( 'Yellow Duck Framework is not loaded.' );
+    }
+
+	YDInclude( 'YDCMComponent.php' );
+	YDInclude( 'YDDatabaseTree.php' );
+
+	// add local translation directory
+	YDLocale::addDirectory( dirname( __FILE__ ) . '/languages/' );
+
+
+    class YDCMUsers extends YDCMComponent {
+    
+        function YDCMUsers() {
+        
+			// init component as non default component
+            $this->YDCMComponent( 'YDCMUsers', false );
+
+            $this->_author = 'Francisco Azevedo';
+            $this->_version = '0.1';
+            $this->_copyright = '(c) Copyright 2006 Francisco Azevedo';
+            $this->_description = 'This is a CM component for user management';
+
+            // register custom key
+            $this->registerKey( 'user_id', true );
+
+			// register custom fields
+			$this->registerField( 'parent_id' );
+			$this->registerField( 'nleft' );
+			$this->registerField( 'nright' );
+			$this->registerField( 'nlevel' );
+			$this->registerField( 'username' );
+			$this->registerField( 'password' );
+			$this->registerField( 'name' );
+			$this->registerField( 'email' );			
+			$this->registerField( 'other' );			
+			$this->registerField( 'language_id' );
+			$this->registerField( 'state' );			
+			$this->registerField( 'login_start' );
+			$this->registerField( 'login_end' );
+			$this->registerField( 'login_counter' );			
+			$this->registerField( 'login_last' );
+			$this->registerField( 'login_current' );
+			$this->registerField( 'created_user' );
+			$this->registerField( 'created_date' );
+
+			// custom relations
+            $relLocks = & $this->registerRelation( 'YDCMLocks', false, 'YDCMLocks' );
+			$relLocks->setLocalKey( 'user_id' );
+            $relLocks->setForeignKey( 'user_id' );
+			$relLocks->setForeignJoin( 'LEFT' );
+			
+            $relLanguages = & $this->registerRelation( 'YDCMLanguages', false, 'YDCMLanguages' );
+			$relLanguages->setLocalKey( 'language_id' );
+            $relLanguages->setForeignKey( 'language_id' );
+
+			// setup tree (NOT USED YET)
+			$this->tree = new YDDatabaseTree( 'default', 'YDCMUsers', 'content_id', 'parent_id', 'parent_id' );
+		}
+
+
+        /**
+         *  This function return the id of the current user
+         *
+         *  @returns    user id
+         */
+		function currentID(){
+		
+			// reset user values
+			$this->reset();
+		
+			// set username and password. TODO: parse PHP_AUTH_USER
+			$this->username =      $_SERVER['PHP_AUTH_USER'];
+			$this->password = md5( $_SERVER['PHP_AUTH_PW'] );
+			
+			// get user
+			$this->findAll();
+
+			// return user id found
+			return $this->user_id;
+		}
+
+        /**
+         *  This function checks if a username and password are valid
+         *
+         *  @param $username  User username
+         *  @param $password  User password (if password length is smaller than 32 we must md5 it)
+         *
+         *  @returns    true if valid, false otherwise
+         */
+		function valid( $username = '', $password = '' ){
+
+			// teste username and password rules
+			if (!YDValidateRules::alphanumeric(	$username))			return false;
+			if (!YDValidateRules::maxlength(	$username, 100))	return false;
+			if (!YDValidateRules::alphanumeric(	$password))			return false;
+			if (!YDValidateRules::maxlength(	$password, 32))		return false;
+
+			// reset values
+			$this->resetValues();
+
+			// set username
+			$this->username = $username;
+
+			// if password is not in md5 format we must set it
+			if ( strlen( $password ) != 32 ) $password = md5( $password );
+
+			// set password
+			$this->password = $password;
+			
+			// check user state
+			// TODO: format 'time()' to a 'datetimesql'
+			$this->where( '(state = 1 OR (state = 2 AND login_start < ' . time() . ' AND login_end > ' . time() . '))' );
+
+			// test if we get just one user
+			if ( $this->find() == 1 ) return true;
+
+			return false;
+		}
+		
+		
+        /**
+         *  This function updates the current user attributes (ignoring passwords and statistics)
+         *
+         *  @param $values  User attributes as array
+         *
+         *  @returns    true if updated, false otherwise
+         */
+		function changeCurrentUser( $values ){
+		
+			$this->resetValues();
+
+			$this->name        = $values['name'];
+			$this->email       = $values['email'];
+			$this->other       = $values['other'];
+			$this->language_id = $values['language_id'];
+			$this->template    = $values['template'];
+
+			// TODO: parse PHP_AUTH_USER string
+			$this->where( 'username = "' .      $_SERVER['PHP_AUTH_USER'] . '"' );
+			$this->where( 'password = "' . md5( $_SERVER['PHP_AUTH_PW'] ) . '"' );
+
+			// return updated rows
+			return $this->update();
+		}
+
+
+        /**
+         *  This function updates the current user attributes (ignoring passwords and statistics) using form values
+         *
+         *  @param $formvalues  Array with user attributes
+         *
+         *  @returns    true if updated, array with form errors otherwise
+         */
+		function changeCurrentUserForm( $formvalues = array() ){
+
+			// get user YDForm object
+			$form = $this->getFormUser();
+
+			// check form validation
+ 			// TODO: check if language exist in YDCMLanguages before update
+			if ( !$form->validate( $formvalues ) )
+				return $form->getErrors( true );
+
+			return $this->changeCurrentUser( $form->getValues() );
+		}
+		
+
+        /**
+         *  This function return the user form
+         *
+         *  @returns    form object
+         */
+		function getFormUser( $name = 'YDCMUsersForm' ){
+
+			// create form object
+            $form = new YDForm( $name );
+
+	        $form->addElement( 'span',		'username',		t('user_username') );
+            $form->addElement( 'text',		'name',			t('user_name') );
+            $form->addElement( 'text',		'email',		t('user_email') );
+            $form->addElement( 'textarea',	'other',		t('user_other') );
+            $form->addElement( 'select',	'language_id',	t('user_language') );
+            $form->addElement( 'select',	'template',		t('user_template') );
+
+			return $form;
+		}
+
+
+        /**
+         *  This function updates the current user password
+         *
+         *  @param $oldpassword  Old user password
+         *  @param $newpassword  New password
+         *
+         *  @returns    true if updated, false when old password is incorrect
+         */
+		function changeCurrentUserPassword( $oldpassword = '', $newpassword = '' ){
+		
+			$this->resetValues();
+
+			$this->password = md5( $newpassword );
+
+			// TODO: parse PHP_AUTH_USER string
+			$this->where( 'username = "' .      $_SERVER['PHP_AUTH_USER'] . '"' );
+			$this->where( 'password = "' . md5( $_SERVER['PHP_AUTH_PW'] ) . '"' );
+			$this->where( 'password = "' . md5( $oldpassword )            . '"' );
+
+			return $this->update();
+		}
+
+
+        /**
+         *  This function updates the current user password using form values
+         *
+         *  @param $formvalues  Array with 3 passwords (old, new and new_confirm)
+         *
+         *  @returns    true if updated, array with form errors, 0 if old password is incorrect
+         */
+		function changeCurrentUserPasswordForm( $formvalues = array() ){
+
+			// get password form
+			$form = $this->getFormPassword();
+
+			// check form validation
+			if ( !$form->validate( $formvalues ) )
+				return $form->getErrors( true );
+
+			return $this->changeCurrentUserPassword( $form->getValue( 'old' ), $form->getValue( 'new' ) );
+		}
+
+
+        /**
+         *  This function return the form of password changing
+         *
+         *  @returns    form object
+         */
+		function getFormPassword( $name = 'YDCMUsersFormPassword'){
+
+			// create form object
+            $form = new YDForm( $name );
+
+			// add form elements
+            $form->addElement( 'password', 'old',         t('password_old'),         array('size' => 40) );
+            $form->addElement( 'password', 'new',         t('password_new'),         array('size' => 50) );
+            $form->addElement( 'password', 'new_confirm', t('password_new_confirm'), array('size' => 50) );
+
+			// add compare rules
+			$form->addCompareRule( array( 'new', 'new_confirm' ), 'equal', t('passwords dont match') );
+
+			return $form;
+		}
+
+
+        /**
+         *  This function return the current user attributes
+         *
+         *  @returns    current user id
+         */
+		function getCurrentUser(){
+		
+			$this->resetValues();
+			
+			// get current user id
+			$this->user_id = $this->currentID();
+			
+			// get all attributes
+			$this->find();
+
+			// return values
+			return $this->getValues();
+		}
+
+		
+    }
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php	2006-04-21 15:43:27 UTC (rev 1858)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php	2006-04-22 16:49:13 UTC (rev 1859)
@@ -0,0 +1,14 @@
+<?php
+
+$GLOBALS['t']['user_username'] = 'Username';
+$GLOBALS['t']['user_name'] = 'Name';
+$GLOBALS['t']['user_email'] = 'Email';
+$GLOBALS['t']['user_other'] = 'Other';
+$GLOBALS['t']['user_language'] = 'Language';
+$GLOBALS['t']['user_template'] = 'Template';
+$GLOBALS['t']['password_old'] = 'Current password';
+$GLOBALS['t']['password_new'] = 'New password';
+$GLOBALS['t']['password_new_confirm'] = 'Confirm new password';
+$GLOBALS['t']['passwords dont match'] = 'Passwords do not match';
+
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php	2006-04-21 15:43:27 UTC (rev 1858)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php	2006-04-22 16:49:13 UTC (rev 1859)
@@ -0,0 +1,14 @@
+<?php
+
+$GLOBALS['t']['user_username'] = 'Username';
+$GLOBALS['t']['user_name'] = 'Nome';
+$GLOBALS['t']['user_email'] = 'Email';
+$GLOBALS['t']['user_other'] = 'Outras informa&ccedil;oes';
+$GLOBALS['t']['user_language'] = 'Idioma';
+$GLOBALS['t']['user_template'] = 'Template';
+$GLOBALS['t']['password_old'] = 'Password actual';
+$GLOBALS['t']['password_new'] = 'Nova password';
+$GLOBALS['t']['password_new_confirm'] = 'Confirme a nova password';
+$GLOBALS['t']['passwords dont match'] = 'As passwords n&atilde;o s&atilde;o iguais';
+
+?>
\ No newline at end of file



From ximian at berlios.de  Sat Apr 22 21:13:49 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sat, 22 Apr 2006 21:13:49 +0200
Subject: [ydf-devel] r1860 - YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages
Message-ID: <200604221913.k3MJDnId026725@sheep.berlios.de>

Author: ximian
Date: 2006-04-22 21:13:08 +0200 (Sat, 22 Apr 2006)
New Revision: 1860

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php
Log:
added new language files to YDCMUsers component

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php	2006-04-22 16:49:13 UTC (rev 1859)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php	2006-04-22 19:13:08 UTC (rev 1860)
@@ -11,4 +11,9 @@
 $GLOBALS['t']['password_new_confirm'] = 'Confirm new password';
 $GLOBALS['t']['passwords dont match'] = 'Passwords do not match';
 
+$GLOBALS['t']['passwords'] = 'Passwords';
+$GLOBALS['t']['change password'] = 'Change password';
+$GLOBALS['t']['personal info'] = 'Personal informations';
+$GLOBALS['t']['access'] = 'Access';
+
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php	2006-04-22 16:49:13 UTC (rev 1859)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php	2006-04-22 19:13:08 UTC (rev 1860)
@@ -11,4 +11,9 @@
 $GLOBALS['t']['password_new_confirm'] = 'Confirme a nova password';
 $GLOBALS['t']['passwords dont match'] = 'As passwords n&atilde;o s&atilde;o iguais';
 
+$GLOBALS['t']['passwords'] = 'Passwords';
+$GLOBALS['t']['change password'] = 'Modificar a password';
+$GLOBALS['t']['personal info'] = 'Configura&ccedil;&otilde;es pessoais';
+$GLOBALS['t']['access'] = 'Acesso';
+
 ?>
\ No newline at end of file



From ximian at berlios.de  Sat Apr 22 21:16:33 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sat, 22 Apr 2006 21:16:33 +0200
Subject: [ydf-devel] r1861 - in YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages: . languages
Message-ID: <200604221916.k3MJGX66027320@sheep.berlios.de>

Author: ximian
Date: 2006-04-22 21:15:56 +0200 (Sat, 22 Apr 2006)
New Revision: 1861

Added:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php
Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php
Log:
YDCMLanguages is the master component that contains the common translation words.
added translations

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php	2006-04-22 19:13:08 UTC (rev 1860)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php	2006-04-22 19:15:56 UTC (rev 1861)
@@ -28,6 +28,10 @@
 
 	YDInclude( 'YDCMComponent.php' );
 
+	// add local translation directory
+	YDLocale::addDirectory( dirname( __FILE__ ) . '/languages/' );
+
+
     class YDCMLanguages extends YDCMComponent {
 
         function YDCMLanguages() {

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php	2006-04-22 19:13:08 UTC (rev 1860)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php	2006-04-22 19:15:56 UTC (rev 1861)
@@ -0,0 +1,9 @@
+<?php
+
+$GLOBALS['t']['save'] = 'Save';
+$GLOBALS['t']['close'] = 'Close';
+$GLOBALS['t']['open'] = 'Open';
+$GLOBALS['t']['help'] = 'Help';
+$GLOBALS['t']['back'] = 'Back';
+
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php	2006-04-22 19:13:08 UTC (rev 1860)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php	2006-04-22 19:15:56 UTC (rev 1861)
@@ -0,0 +1,9 @@
+<?php
+
+$GLOBALS['t']['save'] = 'Guardar';
+$GLOBALS['t']['close'] = 'Fechar';
+$GLOBALS['t']['open'] = 'Abrir';
+$GLOBALS['t']['help'] = 'Ajuda';
+$GLOBALS['t']['back'] = 'Voltar';
+
+?>
\ No newline at end of file



From ximian at berlios.de  Sun Apr 23 00:18:36 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sun, 23 Apr 2006 00:18:36 +0200
Subject: [ydf-devel] r1862 - in YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers: . languages
Message-ID: <200604222218.k3MMIaVZ021065@sheep.berlios.de>

Author: ximian
Date: 2006-04-23 00:17:43 +0200 (Sun, 23 Apr 2006)
New Revision: 1862

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php
Log:
- added new translations to YDCMUsers
- added 2 YDConfigs for form name definition
- added span elements (because attributes are read only) about user statistics

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php	2006-04-22 19:15:56 UTC (rev 1861)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php	2006-04-22 22:17:43 UTC (rev 1862)
@@ -32,7 +32,13 @@
 	// add local translation directory
 	YDLocale::addDirectory( dirname( __FILE__ ) . '/languages/' );
 
+	// set user form name
+	YDConfig::set( 'YDCMUSERS_FORMUSER', 'YDCMUsersForm' );
 
+	// set password form name
+	YDConfig::set( 'YDCMUSERS_FORMPASSWORD', 'YDCMUsersFormPassword' );
+
+
     class YDCMUsers extends YDCMComponent {
     
         function YDCMUsers() {
@@ -195,10 +201,10 @@
          *
          *  @returns    form object
          */
-		function getFormUser( $name = 'YDCMUsersForm' ){
+		function getFormUser(){
 
 			// create form object
-            $form = new YDForm( $name );
+            $form = new YDForm( YDConfig::get( 'YDCMUSERS_FORMUSER' ) );
 
 	        $form->addElement( 'span',		'username',		t('user_username') );
             $form->addElement( 'text',		'name',			t('user_name') );
@@ -207,6 +213,15 @@
             $form->addElement( 'select',	'language_id',	t('user_language') );
             $form->addElement( 'select',	'template',		t('user_template') );
 
+            $form->addElement( 'span',		'login_start',	t('login_start') );
+            $form->addElement( 'span',		'login_end',	t('login_end') );
+            $form->addElement( 'span',		'login_counter',t('login_counter') );
+            $form->addElement( 'span',		'login_last',	t('login_last') );
+            $form->addElement( 'span',		'login_current',t('login_current') );
+
+            $form->addElement( 'span',		'created_user',	t('created_user') );
+            $form->addElement( 'span',		'created_date',	t('created_date') );
+
 			return $form;
 		}
 
@@ -259,16 +274,19 @@
          *
          *  @returns    form object
          */
-		function getFormPassword( $name = 'YDCMUsersFormPassword'){
+		function getFormPassword(){
 
 			// create form object
-            $form = new YDForm( $name );
+            $form = new YDForm( YDConfig::get( 'YDCMUSERS_FORMPASSWORD' ) );
 
 			// add form elements
             $form->addElement( 'password', 'old',         t('password_old'),         array('size' => 40) );
             $form->addElement( 'password', 'new',         t('password_new'),         array('size' => 50) );
             $form->addElement( 'password', 'new_confirm', t('password_new_confirm'), array('size' => 50) );
 
+			// add rules
+			$form->addRule( array( 'old', 'new', 'new_confirm' ), 'maxlength', t('passwords too big'), 31 );
+
 			// add compare rules
 			$form->addCompareRule( array( 'new', 'new_confirm' ), 'equal', t('passwords dont match') );
 

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php	2006-04-22 19:15:56 UTC (rev 1861)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php	2006-04-22 22:17:43 UTC (rev 1862)
@@ -1,16 +1,32 @@
 <?php
 
+// USER FORM
 $GLOBALS['t']['user_username'] = 'Username';
 $GLOBALS['t']['user_name'] = 'Name';
 $GLOBALS['t']['user_email'] = 'Email';
 $GLOBALS['t']['user_other'] = 'Other';
 $GLOBALS['t']['user_language'] = 'Language';
 $GLOBALS['t']['user_template'] = 'Template';
+$GLOBALS['t']['login_start'] = 'Login start date';
+$GLOBALS['t']['login_end'] = 'Login end date';
+$GLOBALS['t']['login_counter'] = 'Total of logins';
+$GLOBALS['t']['login_last'] = 'Last login date';
+$GLOBALS['t']['login_current'] = 'Current login date';
+$GLOBALS['t']['created_user'] = 'Created by';
+$GLOBALS['t']['created_date'] = 'Created in';
+
+// USER FORM RULES
+$GLOBALS['t']['passwords dont match'] = 'Passwords do not match';
+
+// PASSWORD FORM
 $GLOBALS['t']['password_old'] = 'Current password';
 $GLOBALS['t']['password_new'] = 'New password';
 $GLOBALS['t']['password_new_confirm'] = 'Confirm new password';
-$GLOBALS['t']['passwords dont match'] = 'Passwords do not match';
 
+// PASSWORD FORM RULES
+$GLOBALS['t']['passwords too big'] = 'There is at least one password too big';
+
+// OTHER
 $GLOBALS['t']['passwords'] = 'Passwords';
 $GLOBALS['t']['change password'] = 'Change password';
 $GLOBALS['t']['personal info'] = 'Personal informations';

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php	2006-04-22 19:15:56 UTC (rev 1861)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php	2006-04-22 22:17:43 UTC (rev 1862)
@@ -1,16 +1,32 @@
 <?php
 
+// USER FORM
 $GLOBALS['t']['user_username'] = 'Username';
 $GLOBALS['t']['user_name'] = 'Nome';
 $GLOBALS['t']['user_email'] = 'Email';
 $GLOBALS['t']['user_other'] = 'Outras informa&ccedil;oes';
 $GLOBALS['t']['user_language'] = 'Idioma';
 $GLOBALS['t']['user_template'] = 'Template';
+$GLOBALS['t']['login_start'] = 'Data para inicio de login';
+$GLOBALS['t']['login_end'] = 'Data em que o login expira';
+$GLOBALS['t']['login_counter'] = 'Total de logins';
+$GLOBALS['t']['login_last'] = 'Data do &uacute;ltimo login';
+$GLOBALS['t']['login_current'] = 'Data do login actual';
+$GLOBALS['t']['created_user'] = 'Criado por';
+$GLOBALS['t']['created_date'] = 'Criado em';
+
+// USER FORM RULES
+$GLOBALS['t']['passwords dont match'] = 'As passwords n&atilde;o s&atilde;o iguais';
+
+// PASSWORD FORM
 $GLOBALS['t']['password_old'] = 'Password actual';
 $GLOBALS['t']['password_new'] = 'Nova password';
 $GLOBALS['t']['password_new_confirm'] = 'Confirme a nova password';
-$GLOBALS['t']['passwords dont match'] = 'As passwords n&atilde;o s&atilde;o iguais';
 
+// PASSWORD FORM RULES
+$GLOBALS['t']['passwords too big'] = 'Existe pelo menos uma password demasiado grande';
+
+// OTHER
 $GLOBALS['t']['passwords'] = 'Passwords';
 $GLOBALS['t']['change password'] = 'Modificar a password';
 $GLOBALS['t']['personal info'] = 'Configura&ccedil;&otilde;es pessoais';



From ximian at berlios.de  Sun Apr 23 01:37:58 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sun, 23 Apr 2006 01:37:58 +0200
Subject: [ydf-devel] r1864 - in YDFramework2.0/trunk/YDFramework2/addons: . YDCMTemplates
Message-ID: <200604222337.k3MNbwLo022699@sheep.berlios.de>

Author: ximian
Date: 2006-04-23 01:37:28 +0200 (Sun, 23 Apr 2006)
New Revision: 1864

Added:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/
   YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php
Log:
new component YDCMTemplates to manage all templating stuff. 
(this is a very special component because it's the only one that don't have a DB table, yet)

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php	2006-04-22 23:31:09 UTC (rev 1863)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php	2006-04-22 23:37:28 UTC (rev 1864)
@@ -0,0 +1,84 @@
+<?php
+
+    /*
+
+        Yellow Duck Framework version 2.0
+        (c) Copyright 2002-2005 Pieter Claerhout
+
+        This library is free software; you can redistribute it and/or
+        modify it under the terms of the GNU Lesser General Public
+        License as published by the Free Software Foundation; either
+        version 2.1 of the License, or (at your option) any later version.
+
+        This library is distributed in the hope that it will be useful,
+        but WITHOUT ANY WARRANTY; without even the implied warranty of
+        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+        Lesser General Public License for more details.
+
+        You should have received a copy of the GNU Lesser General Public
+        License along with this library; if not, write to the Free Software
+        Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
+
+    */
+
+    // Check if the framework is loaded
+    if ( ! defined( 'YD_FW_NAME' ) ) {
+        die( 'Yellow Duck Framework is not loaded.' );
+    }
+
+	// set admin template directory
+	YDConfig::set( 'YDCMTEMPLATES_ADMIN_PATH', YD_SELF_DIR, false );
+
+	// set visitors template directory
+	YDConfig::set( 'YDCMTEMPLATES_VISITORS_PATH', YD_SELF_DIR, false );
+
+
+	// this is a very special component because don't have any DB table (that's way do not extends YDCMComponent)
+    class YDCMTemplates {
+
+        function YDCMTemplates() {
+        
+            $this->_author = 'Francisco Azevedo';
+            $this->_version = '0.1';
+            $this->_copyright = '(c) Copyright 2006 Francisco Azevedo';
+            $this->_description = 'This is a CM component for template management';
+		}
+
+
+        /**
+         *  This function returns templates in administration side
+         *
+         *  @returns    Array of templates, eg: array( 'default', 'orange', ... )
+         */
+		function forAdministrators(){
+		
+			return $this->__getFiles( YDConfig::get( 'YDCMTEMPLATES_ADMIN_PATH' ) );
+		}
+
+
+        /**
+         *  This function returns templates in visitors side
+         *
+         *  @returns    Array of templates, eg: array( 'default', 'orange', ... )
+         */
+		function forVisitors(){
+		
+			return $this->__getFiles( YDConfig::get( 'YDCMTEMPLATES_VISITORS_PATH' ) );
+		}
+
+
+        /**
+         *  This private function returns all filenames of a directory
+         *
+         *  @returns    Array of filenames, eg: array( 'default', 'orange', ... )
+         */
+		function __getFiles( $dir ){
+		
+			$dir = new YDFSDirectory( $dir );
+			
+			// return all visible directories only
+			return $dir->getContents( '!.*', '', 'YDFSDirectory' );
+		}
+
+    }
+?>
\ No newline at end of file



From ximian at berlios.de  Sun Apr 23 01:31:36 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sun, 23 Apr 2006 01:31:36 +0200
Subject: [ydf-devel] r1863 - YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages
Message-ID: <200604222331.k3MNVaEm022156@sheep.berlios.de>

Author: ximian
Date: 2006-04-23 01:31:09 +0200 (Sun, 23 Apr 2006)
New Revision: 1863

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php
Log:
YDCMLanguages:
- new method YDCMLanguages::active that returns all valid administration languages as array

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php	2006-04-22 22:17:43 UTC (rev 1862)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php	2006-04-22 23:31:09 UTC (rev 1863)
@@ -55,5 +55,26 @@
 			// we don't have relations from here (just TO here, and we don't need to define that)
 		}
 
+
+        /**
+         *  This function returns all active languages
+         *
+         *  @returns    Array of languages, eg: array( 'en' => 'English', 'pt' => ... )
+         */
+		function active(){
+		
+			// reset values
+			$this->resetValues();
+
+			// we want only results where active is 1
+			$this->active = 1;
+
+			// find all languages
+			$this->find();
+
+			// return results as array
+			return $this->getResultsAsAssocArray( 'language_id', 'name' );
+		}
+
     }
 ?>
\ No newline at end of file



From ximian at berlios.de  Sun Apr 23 02:07:47 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sun, 23 Apr 2006 02:07:47 +0200
Subject: [ydf-devel] r1865 - YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates
Message-ID: <200604230007.k3N07lDY028489@sheep.berlios.de>

Author: ximian
Date: 2006-04-23 02:06:24 +0200 (Sun, 23 Apr 2006)
New Revision: 1865

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php
Log:
YDCMTemplates::__getFiles now returns an associative array

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php	2006-04-22 23:37:28 UTC (rev 1864)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php	2006-04-23 00:06:24 UTC (rev 1865)
@@ -48,7 +48,7 @@
         /**
          *  This function returns templates in administration side
          *
-         *  @returns    Array of templates, eg: array( 'default', 'orange', ... )
+         *  @returns    Array of templates, eg: array( 'default' => 'Default', 'orange' => ... )
          */
 		function forAdministrators(){
 		
@@ -59,7 +59,7 @@
         /**
          *  This function returns templates in visitors side
          *
-         *  @returns    Array of templates, eg: array( 'default', 'orange', ... )
+         *  @returns    Array of templates, eg: array( 'default' => 'Default', 'orange' => ... )
          */
 		function forVisitors(){
 		
@@ -70,14 +70,21 @@
         /**
          *  This private function returns all filenames of a directory
          *
-         *  @returns    Array of filenames, eg: array( 'default', 'orange', ... )
+         *  @returns    Array of filenames, eg: array( 'default' => 'Default', 'orange' => ... )
          */
 		function __getFiles( $dir ){
 		
+			// init directories
+			$directories = array();
+
+			// init template directory
 			$dir = new YDFSDirectory( $dir );
 			
-			// return all visible directories only
-			return $dir->getContents( '!.*', '', 'YDFSDirectory' );
+			// compute directories array
+			foreach( $dir->getContents( '!.*', '', 'YDFSDirectory' ) as $d )
+				$directories[ $d ] = $d;
+
+			return $directories;
 		}
 
     }



From ximian at berlios.de  Sun Apr 23 02:11:02 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sun, 23 Apr 2006 02:11:02 +0200
Subject: [ydf-devel] r1866 - in YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers: . languages
Message-ID: <200604230011.k3N0B2Ur029389@sheep.berlios.de>

Author: ximian
Date: 2006-04-23 02:10:19 +0200 (Sun, 23 Apr 2006)
New Revision: 1866

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php
Log:
in YDCMUsers: fixed YDConfigs, added form rules and new translations

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php	2006-04-23 00:06:24 UTC (rev 1865)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php	2006-04-23 00:10:19 UTC (rev 1866)
@@ -33,10 +33,10 @@
 	YDLocale::addDirectory( dirname( __FILE__ ) . '/languages/' );
 
 	// set user form name
-	YDConfig::set( 'YDCMUSERS_FORMUSER', 'YDCMUsersForm' );
+	YDConfig::set( 'YDCMUSERS_FORMUSER', 'YDCMUsersForm', false );
 
 	// set password form name
-	YDConfig::set( 'YDCMUSERS_FORMPASSWORD', 'YDCMUsersFormPassword' );
+	YDConfig::set( 'YDCMUSERS_FORMPASSWORD', 'YDCMUsersFormPassword', false );
 
 
     class YDCMUsers extends YDCMComponent {
@@ -188,9 +188,8 @@
 			$form = $this->getFormUser();
 
 			// check form validation
- 			// TODO: check if language exist in YDCMLanguages before update
 			if ( !$form->validate( $formvalues ) )
-				return $form->getErrors( true );
+				return $form->getErrors();
 
 			return $this->changeCurrentUser( $form->getValues() );
 		}
@@ -203,25 +202,38 @@
          */
 		function getFormUser(){
 
+			// include languages and templates lib
+			YDInclude( 'YDCMLanguages.php' );
+			YDInclude( 'YDCMTemplates.php' );
+
+			// create languages and templates object
+			$languages = new YDCMLanguages();
+			$templates = new YDCMTemplates();
+
 			// create form object
             $form = new YDForm( YDConfig::get( 'YDCMUSERS_FORMUSER' ) );
 
-	        $form->addElement( 'span',		'username',		t('user_username') );
-            $form->addElement( 'text',		'name',			t('user_name') );
-            $form->addElement( 'text',		'email',		t('user_email') );
-            $form->addElement( 'textarea',	'other',		t('user_other') );
-            $form->addElement( 'select',	'language_id',	t('user_language') );
-            $form->addElement( 'select',	'template',		t('user_template') );
+	        $form->addElement( 'span',      'username',     t('user_username') );
+            $form->addElement( 'text',      'name',         t('user_name'),     array('size' => 50, 'maxlength' => 255) );
+            $form->addElement( 'text',      'email',        t('user_email') );
+            $form->addElement( 'textarea',  'other',        t('user_other'),    array('rows' => 4, 'cols' => 30) );
+            $form->addElement( 'select',    'language_id',  t('user_language'), array(), $languages->active() );
+            $form->addElement( 'select',    'template',     t('user_template'), array(), $templates->forAdministrators() );
+            $form->addElement( 'span',      'login_start',  t('login_start') );
+            $form->addElement( 'span',      'login_end',    t('login_end') );
+            $form->addElement( 'span',      'login_counter',t('login_counter') );
+            $form->addElement( 'span',      'login_last',   t('login_last') );
+            $form->addElement( 'span',      'login_current',t('login_current') );
+            $form->addElement( 'span',      'created_user', t('created_user') );
+            $form->addElement( 'span',      'created_date', t('created_date') );
 
-            $form->addElement( 'span',		'login_start',	t('login_start') );
-            $form->addElement( 'span',		'login_end',	t('login_end') );
-            $form->addElement( 'span',		'login_counter',t('login_counter') );
-            $form->addElement( 'span',		'login_last',	t('login_last') );
-            $form->addElement( 'span',		'login_current',t('login_current') );
+			// add rules
+			$form->addRule( 'name',        'maxlength', t('name too big'),       255 );
+			$form->addRule( 'email',       'email',     t('email not valid') );
+			$form->addRule( 'other',       'maxlength', t('other too big'),      5000 );
+			$form->addRule( 'language_id', 'in_array',  t('language not valid'), array_keys( $languages->active() ) );
+			$form->addRule( 'template',    'in_array',  t('template not valid'), array_keys( $templates->forAdministrators() ) );
 
-            $form->addElement( 'span',		'created_user',	t('created_user') );
-            $form->addElement( 'span',		'created_date',	t('created_date') );
-
 			return $form;
 		}
 
@@ -263,7 +275,7 @@
 
 			// check form validation
 			if ( !$form->validate( $formvalues ) )
-				return $form->getErrors( true );
+				return $form->getErrors();
 
 			return $this->changeCurrentUserPassword( $form->getValue( 'old' ), $form->getValue( 'new' ) );
 		}
@@ -280,14 +292,15 @@
             $form = new YDForm( YDConfig::get( 'YDCMUSERS_FORMPASSWORD' ) );
 
 			// add form elements
-            $form->addElement( 'password', 'old',         t('password_old'),         array('size' => 40) );
-            $form->addElement( 'password', 'new',         t('password_new'),         array('size' => 50) );
-            $form->addElement( 'password', 'new_confirm', t('password_new_confirm'), array('size' => 50) );
+            $form->addElement( 'password', 'old',         t('password_old'),         array('size' => 20, 'maxlength' => 31) );
+            $form->addElement( 'password', 'new',         t('password_new'),         array('size' => 30, 'maxlength' => 31) );
+            $form->addElement( 'password', 'new_confirm', t('password_new_confirm'), array('size' => 30, 'maxlength' => 31) );
 
 			// add rules
-			$form->addRule( array( 'old', 'new', 'new_confirm' ), 'maxlength', t('passwords too big'), 31 );
+			$form->addRule( array( 'old', 'new', 'new_confirm' ), 'maxlength',    t('passwords too big'), 31 );
+			$form->addRule( array( 'old', 'new', 'new_confirm' ), 'alphanumeric', t('passwords not alphanumeric') );
 
-			// add compare rules
+			// add compare rule
 			$form->addCompareRule( array( 'new', 'new_confirm' ), 'equal', t('passwords dont match') );
 
 			return $form;

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php	2006-04-23 00:06:24 UTC (rev 1865)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php	2006-04-23 00:10:19 UTC (rev 1866)
@@ -16,7 +16,11 @@
 $GLOBALS['t']['created_date'] = 'Created in';
 
 // USER FORM RULES
-$GLOBALS['t']['passwords dont match'] = 'Passwords do not match';
+$GLOBALS['t']['name too big'] = 'Name is too big';
+$GLOBALS['t']['email not valid'] = 'Email is not valid';
+$GLOBALS['t']['other too big'] = 'Other informations about the user are to big';
+$GLOBALS['t']['language not valid'] = 'Language is not valid';
+$GLOBALS['t']['template not valid'] = 'Template is not valid';
 
 // PASSWORD FORM
 $GLOBALS['t']['password_old'] = 'Current password';
@@ -24,7 +28,9 @@
 $GLOBALS['t']['password_new_confirm'] = 'Confirm new password';
 
 // PASSWORD FORM RULES
+$GLOBALS['t']['passwords dont match'] = 'Passwords do not match';
 $GLOBALS['t']['passwords too big'] = 'There is at least one password too big';
+$GLOBALS['t']['passwords not alphanumeric'] = 'All passwords must be alphanumeric';
 
 // OTHER
 $GLOBALS['t']['passwords'] = 'Passwords';

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php	2006-04-23 00:06:24 UTC (rev 1865)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php	2006-04-23 00:10:19 UTC (rev 1866)
@@ -16,7 +16,11 @@
 $GLOBALS['t']['created_date'] = 'Criado em';
 
 // USER FORM RULES
-$GLOBALS['t']['passwords dont match'] = 'As passwords n&atilde;o s&atilde;o iguais';
+$GLOBALS['t']['name too big'] = 'O nome &eacute; demasiado grande';
+$GLOBALS['t']['email not valid'] = 'O email n&atilde;o &eacute; v&aacute;lido';
+$GLOBALS['t']['other too big'] = 'As informa&ccedil;&otilde;es adicionais s&atilde;o demasiado grandes';
+$GLOBALS['t']['language not valid'] = 'O idioma n&atilde;o &eacute; v&aacute;lido';
+$GLOBALS['t']['template not valid'] = 'O template n&atilde;o &eacute; v&aacute;lido';
 
 // PASSWORD FORM
 $GLOBALS['t']['password_old'] = 'Password actual';
@@ -24,7 +28,9 @@
 $GLOBALS['t']['password_new_confirm'] = 'Confirme a nova password';
 
 // PASSWORD FORM RULES
+$GLOBALS['t']['passwords dont match'] = 'As passwords n&atilde;o s&atilde;o iguais';
 $GLOBALS['t']['passwords too big'] = 'Existe pelo menos uma password demasiado grande';
+$GLOBALS['t']['passwords not alphanumeric'] = 'As password t&ecirc;em de ser alfanum&eacute;ricas';
 
 // OTHER
 $GLOBALS['t']['passwords'] = 'Passwords';



From ximian at berlios.de  Sun Apr 23 02:56:14 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sun, 23 Apr 2006 02:56:14 +0200
Subject: [ydf-devel] r1867 - in YDFramework2.0/trunk/YDFramework2: YDClasses/YDCMComponent addons/YDCMLanguages/languages addons/YDCMUsers addons/YDCMUsers/languages
Message-ID: <200604230056.k3N0uEi4008199@sheep.berlios.de>

Author: ximian
Date: 2006-04-23 02:55:04 +0200 (Sun, 23 Apr 2006)
New Revision: 1867

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php
Log:
- new method YDCMUsers::updateLogin
- new generic translation
- updated DB scheme with not null values for datetime elements in YDCMUsers

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml	2006-04-23 00:10:19 UTC (rev 1866)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml	2006-04-23 00:55:04 UTC (rev 1867)
@@ -736,11 +736,11 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1251" ColName="login_start" PrevColName="" Pos="14" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="when state is schedule this is the start date">
+<COLUMN ID="1251" ColName="login_start" PrevColName="" Pos="14" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="when state is schedule this is the start date">
 <OPTIONSELECTED>
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1252" ColName="login_end" PrevColName="" Pos="15" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="when state is schedule this is the end date">
+<COLUMN ID="1252" ColName="login_end" PrevColName="" Pos="15" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="when state is schedule this is the end date">
 <OPTIONSELECTED>
 </OPTIONSELECTED>
 </COLUMN>
@@ -750,11 +750,11 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1256" ColName="login_last" PrevColName="" Pos="19" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="last login date">
+<COLUMN ID="1256" ColName="login_last" PrevColName="" Pos="19" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="last login date">
 <OPTIONSELECTED>
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1257" ColName="login_current" PrevColName="" Pos="20" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="date of current session">
+<COLUMN ID="1257" ColName="login_current" PrevColName="" Pos="20" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="date of current session">
 <OPTIONSELECTED>
 </OPTIONSELECTED>
 </COLUMN>
@@ -764,7 +764,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1253" ColName="created_date" PrevColName="created" Pos="16" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="creation date">
+<COLUMN ID="1253" ColName="created_date" PrevColName="created" Pos="16" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="creation date">
 <OPTIONSELECTED>
 </OPTIONSELECTED>
 </COLUMN>

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php	2006-04-23 00:10:19 UTC (rev 1866)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php	2006-04-23 00:55:04 UTC (rev 1867)
@@ -5,5 +5,6 @@
 $GLOBALS['t']['open'] = 'Open';
 $GLOBALS['t']['help'] = 'Help';
 $GLOBALS['t']['back'] = 'Back';
+$GLOBALS['t']['not applicable'] = 'Not applicable';
 
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php	2006-04-23 00:10:19 UTC (rev 1866)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php	2006-04-23 00:55:04 UTC (rev 1867)
@@ -5,5 +5,6 @@
 $GLOBALS['t']['open'] = 'Abrir';
 $GLOBALS['t']['help'] = 'Ajuda';
 $GLOBALS['t']['back'] = 'Voltar';
+$GLOBALS['t']['not applicable'] = 'N&atilde;o aplic&aacute;vel';
 
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php	2006-04-23 00:10:19 UTC (rev 1866)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php	2006-04-23 00:55:04 UTC (rev 1867)
@@ -297,6 +297,7 @@
             $form->addElement( 'password', 'new_confirm', t('password_new_confirm'), array('size' => 30, 'maxlength' => 31) );
 
 			// add rules
+			$form->addRule( array( 'old', 'new', 'new_confirm' ), 'required',     t('passwords are required') );
 			$form->addRule( array( 'old', 'new', 'new_confirm' ), 'maxlength',    t('passwords too big'), 31 );
 			$form->addRule( array( 'old', 'new', 'new_confirm' ), 'alphanumeric', t('passwords not alphanumeric') );
 
@@ -326,6 +327,37 @@
 			return $this->getValues();
 		}
 
+
+        /**
+         *  This function updates user login details
+         *
+         *  @returns    updated result
+         */
+		function updateLogin(){
+
+			YDInclude( 'YDUtil.php' );
+
+			$this->resetValues();
+			
+			// get current user id
+			$this->user_id = $this->currentID();
+			
+			// get all attributes
+			$this->find();
+
+			// increase login value
+			$this->login_counter ++;
+
+			// set last login date
+			$this->login_last = $this->login_current;
+
+			// set current login
+			$this->login_current = YDStringUtil::formatDate( time(), 'datetimesql' );
+
+			// return values
+			return $this->update();
+		}
+
 		
     }
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php	2006-04-23 00:10:19 UTC (rev 1866)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php	2006-04-23 00:55:04 UTC (rev 1867)
@@ -28,6 +28,7 @@
 $GLOBALS['t']['password_new_confirm'] = 'Confirm new password';
 
 // PASSWORD FORM RULES
+$GLOBALS['t']['passwords are required'] = 'All passwords are required';
 $GLOBALS['t']['passwords dont match'] = 'Passwords do not match';
 $GLOBALS['t']['passwords too big'] = 'There is at least one password too big';
 $GLOBALS['t']['passwords not alphanumeric'] = 'All passwords must be alphanumeric';

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php	2006-04-23 00:10:19 UTC (rev 1866)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php	2006-04-23 00:55:04 UTC (rev 1867)
@@ -28,6 +28,7 @@
 $GLOBALS['t']['password_new_confirm'] = 'Confirme a nova password';
 
 // PASSWORD FORM RULES
+$GLOBALS['t']['passwords are required'] = 'Todas as passwords s&atilde;o obrigat&oacute;rias';
 $GLOBALS['t']['passwords dont match'] = 'As passwords n&atilde;o s&atilde;o iguais';
 $GLOBALS['t']['passwords too big'] = 'Existe pelo menos uma password demasiado grande';
 $GLOBALS['t']['passwords not alphanumeric'] = 'As password t&ecirc;em de ser alfanum&eacute;ricas';



From ximian at berlios.de  Sun Apr 23 17:58:41 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sun, 23 Apr 2006 17:58:41 +0200
Subject: [ydf-devel] r1868 - in YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers: . languages
Message-ID: <200604231558.k3NFwf7U019246@sheep.berlios.de>

Author: ximian
Date: 2006-04-23 17:58:22 +0200 (Sun, 23 Apr 2006)
New Revision: 1868

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php
Log:
on YDCMUsers:
 - methods currentID, changeCurrentUser, changeCurrentUserPassword check if user is valid before update
 - method valid uses datetime sql for user schedule time compare
 - new translations about users added

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php	2006-04-23 00:55:04 UTC (rev 1867)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php	2006-04-23 15:58:22 UTC (rev 1868)
@@ -90,22 +90,21 @@
 
 
         /**
-         *  This function return the id of the current user
+         *  This function returns the id of the current user
          *
-         *  @returns    user id
+         *  @returns    User id if user exists, false otherwise
          */
 		function currentID(){
 		
 			// reset user values
-			$this->reset();
+			$this->resetValues();
 		
-			// set username and password. TODO: parse PHP_AUTH_USER
-			$this->username =      $_SERVER['PHP_AUTH_USER'];
-			$this->password = md5( $_SERVER['PHP_AUTH_PW'] );
-			
-			// get user
-			$this->findAll();
+			// check if user is valid and get user id ( YDCMUsers::valid does it )
+			$valid = $this->valid( $_SERVER['PHP_AUTH_USER'], $_SERVER['PHP_AUTH_PW'] );
 
+			// if user is not valid we should return false
+			if ( $valid === false ) return false;
+
 			// return user id found
 			return $this->user_id;
 		}
@@ -138,10 +137,11 @@
 			// set password
 			$this->password = $password;
 			
-			// check user state
-			// TODO: format 'time()' to a 'datetimesql'
-			$this->where( '(state = 1 OR (state = 2 AND login_start < ' . time() . ' AND login_end > ' . time() . '))' );
+			// check user state based on state and/or user login schedule
+			$now = YDStringUtil::formatDate( time(), 'datetimesql' );
 
+			$this->where( '(state = 1 OR (state = 2 AND login_start < "' . $now . '" AND login_end > "' . $now . '"))' );
+
 			// test if we get just one user
 			if ( $this->find() == 1 ) return true;
 
@@ -154,24 +154,34 @@
          *
          *  @param $values  User attributes as array
          *
-         *  @returns    true if updated, false otherwise
+         *  @returns    true if updated, false if current user is not valid
          */
 		function changeCurrentUser( $values ){
 		
 			$this->resetValues();
 
+			// check if user is valid
+			$valid = $this->valid( $_SERVER['PHP_AUTH_USER'], $_SERVER['PHP_AUTH_PW'] );
+
+			if ( $valid === false ) return false;
+
+			// reset values added from valid method
+			$this->resetValues();
+
+			// set new values
 			$this->name        = $values['name'];
 			$this->email       = $values['email'];
 			$this->other       = $values['other'];
 			$this->language_id = $values['language_id'];
 			$this->template    = $values['template'];
 
-			// TODO: parse PHP_AUTH_USER string
 			$this->where( 'username = "' .      $_SERVER['PHP_AUTH_USER'] . '"' );
 			$this->where( 'password = "' . md5( $_SERVER['PHP_AUTH_PW'] ) . '"' );
 
-			// return updated rows
-			return $this->update();
+			// return update result
+			if ( $this->update() == 1 ) return true;
+			
+			return false;
 		}
 
 
@@ -244,20 +254,32 @@
          *  @param $oldpassword  Old user password
          *  @param $newpassword  New password
          *
-         *  @returns    true if updated, false when old password is incorrect
+         *  @returns    true if updated, false when old password is incorrect or user is invalid
          */
 		function changeCurrentUserPassword( $oldpassword = '', $newpassword = '' ){
 		
 			$this->resetValues();
 
+			// check if user is valid
+			$valid = $this->valid( $_SERVER['PHP_AUTH_USER'], $_SERVER['PHP_AUTH_PW'] );
+
+			if ( $valid === false ) return false;
+
+			// reset values added from valid method
+			$this->resetValues();
+
+			// set new password
 			$this->password = md5( $newpassword );
 
-			// TODO: parse PHP_AUTH_USER string
+			// change only current user
 			$this->where( 'username = "' .      $_SERVER['PHP_AUTH_USER'] . '"' );
 			$this->where( 'password = "' . md5( $_SERVER['PHP_AUTH_PW'] ) . '"' );
 			$this->where( 'password = "' . md5( $oldpassword )            . '"' );
 
-			return $this->update();
+			// update user and get result
+			if ( $this->update() == 1 ) return true;
+
+			return false;
 		}
 
 

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php	2006-04-23 00:55:04 UTC (rev 1867)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/en.php	2006-04-23 15:58:22 UTC (rev 1868)
@@ -38,5 +38,11 @@
 $GLOBALS['t']['change password'] = 'Change password';
 $GLOBALS['t']['personal info'] = 'Personal informations';
 $GLOBALS['t']['access'] = 'Access';
+$GLOBALS['t']['old password is incorrect'] = 'Current password is incorrect';
+$GLOBALS['t']['user password updated'] = 'Password is updated';
+$GLOBALS['t']['user is incorrect'] = 'Current user is not valid';
+$GLOBALS['t']['user details updated'] = 'User details updated';
+$GLOBALS['t']['password not updated'] = 'Password was not updated';
+$GLOBALS['t']['user not updated'] = 'User was not updated';
 
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php	2006-04-23 00:55:04 UTC (rev 1867)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/languages/pt.php	2006-04-23 15:58:22 UTC (rev 1868)
@@ -38,5 +38,11 @@
 $GLOBALS['t']['change password'] = 'Modificar a password';
 $GLOBALS['t']['personal info'] = 'Configura&ccedil;&otilde;es pessoais';
 $GLOBALS['t']['access'] = 'Acesso';
+$GLOBALS['t']['old password is incorrect'] = 'A password actual &eacute; incorrecta';
+$GLOBALS['t']['user password updated'] = 'A password foi actualizada';
+$GLOBALS['t']['user is incorrect'] = 'O utilizador actual &eacute; incorrecto';
+$GLOBALS['t']['user details updated'] = 'Informa&ccedil;&otilde;es do utilizador actualizadas';
+$GLOBALS['t']['password not updated'] = 'A password n&atilde;o foi actualizada';
+$GLOBALS['t']['user not updated'] = 'O utilizador n&atilde;o foi actualizado';
 
 ?>
\ No newline at end of file



From ximian at berlios.de  Sun Apr 23 18:46:05 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sun, 23 Apr 2006 18:46:05 +0200
Subject: [ydf-devel] r1869 - in YDFramework2.0/trunk/YDFramework2/addons: YDCMTemplates YDCMUsers
Message-ID: <200604231646.k3NGk5df028171@sheep.berlios.de>

Author: ximian
Date: 2006-04-23 18:45:23 +0200 (Sun, 23 Apr 2006)
New Revision: 1869

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php
Log:
- new methods on YDCMTemplates to get template names and paths, and updated YDCMUsers

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php	2006-04-23 15:58:22 UTC (rev 1868)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php	2006-04-23 16:45:23 UTC (rev 1869)
@@ -26,13 +26,19 @@
         die( 'Yellow Duck Framework is not loaded.' );
     }
 
-	// set admin template directory
+	// set admin template directory (without template name directory)
 	YDConfig::set( 'YDCMTEMPLATES_ADMIN_PATH', YD_SELF_DIR, false );
 
-	// set visitors template directory
+	// set admin template name
+	YDConfig::set( 'YDCMTEMPLATES_ADMIN_TEMPLATE', '', false );
+
+	// set visitors template directory (without template name directory)
 	YDConfig::set( 'YDCMTEMPLATES_VISITORS_PATH', YD_SELF_DIR, false );
 
+	// set visitors template name
+	YDConfig::set( 'YDCMTEMPLATES_VISITORS_TEMPLATE', '', false );
 
+
 	// this is a very special component because don't have any DB table (that's way do not extends YDCMComponent)
     class YDCMTemplates {
 
@@ -42,32 +48,86 @@
             $this->_version = '0.1';
             $this->_copyright = '(c) Copyright 2006 Francisco Azevedo';
             $this->_description = 'This is a CM component for template management';
+			
+			$this->admin_path        = YDConfig::get( 'YDCMTEMPLATES_ADMIN_PATH' );
+			$this->admin_template    = YDConfig::get( 'YDCMTEMPLATES_ADMIN_TEMPLATE' );
+			$this->visitors_path     = YDConfig::get( 'YDCMTEMPLATES_VISITORS_PATH' );
+			$this->visitors_template = YDConfig::get( 'YDCMTEMPLATES_VISITORS_TEMPLATE' );
+
 		}
 
 
         /**
-         *  This function returns templates in administration side
+         *  This function returns all possible templates for administration side
          *
-         *  @returns    Array of templates, eg: array( 'default' => 'Default', 'orange' => ... )
+         *  @returns    Associative array of templates, eg: array( 'Default' => 'Default', 'orange' => ... )
          */
-		function forAdministrators(){
+		function admin_templates(){
 		
-			return $this->__getFiles( YDConfig::get( 'YDCMTEMPLATES_ADMIN_PATH' ) );
+			return $this->__getFiles( $this->admin_path );
 		}
 
 
         /**
-         *  This function returns templates in visitors side
+         *  This function return the template name of administration side
          *
-         *  @returns    Array of templates, eg: array( 'default' => 'Default', 'orange' => ... )
+         *  @returns    Template name
          */
-		function forVisitors(){
+		function admin_template(){
 		
-			return $this->__getFiles( YDConfig::get( 'YDCMTEMPLATES_VISITORS_PATH' ) );
+			return $this->admin_template;
 		}
 
 
         /**
+         *  This function return the full template path of administration side
+         *
+         *  @param $subdir  (Optional) template subdirectory
+         *
+         *  @returns    full path
+         */
+		function admin_complete( $subdir = '' ){
+		
+			return $this->admin_path . '/' . $this->admin_template . '/' . $subdir;
+		}
+
+
+        /**
+         *  This function returns all possible templates for visitors side
+         *
+         *  @returns    Associative array of templates, eg: array( 'Default' => 'Default', 'orange' => ... )
+         */
+		function visitors_templates(){
+		
+			return $this->__getFiles( $this->visitors_path );
+		}
+
+
+        /**
+         *  This function return the template name of administration side
+         *
+         *  @returns    Template name
+         */
+		function visitors_template(){
+		
+			return $this->visitors_template;
+		}
+
+
+        /**
+         *  This function return the full template path of visitors side
+         *
+         *  @param $subdir  (Optional) template subdirectory
+         *
+         *  @returns    full path
+         */
+		function visitors_complete( $subdir = '' ){
+		
+			return $this->visitors_path . '/' . $this->visitors_template . '/' . $subdir;
+		}
+
+
+        /**
          *  This private function returns all filenames of a directory
          *
          *  @returns    Array of filenames, eg: array( 'default' => 'Default', 'orange' => ... )

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php	2006-04-23 15:58:22 UTC (rev 1868)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMUsers/YDCMUsers.php	2006-04-23 16:45:23 UTC (rev 1869)
@@ -228,7 +228,7 @@
             $form->addElement( 'text',      'email',        t('user_email') );
             $form->addElement( 'textarea',  'other',        t('user_other'),    array('rows' => 4, 'cols' => 30) );
             $form->addElement( 'select',    'language_id',  t('user_language'), array(), $languages->active() );
-            $form->addElement( 'select',    'template',     t('user_template'), array(), $templates->forAdministrators() );
+            $form->addElement( 'select',    'template',     t('user_template'), array(), $templates->admin_templates() );
             $form->addElement( 'span',      'login_start',  t('login_start') );
             $form->addElement( 'span',      'login_end',    t('login_end') );
             $form->addElement( 'span',      'login_counter',t('login_counter') );
@@ -242,7 +242,7 @@
 			$form->addRule( 'email',       'email',     t('email not valid') );
 			$form->addRule( 'other',       'maxlength', t('other too big'),      5000 );
 			$form->addRule( 'language_id', 'in_array',  t('language not valid'), array_keys( $languages->active() ) );
-			$form->addRule( 'template',    'in_array',  t('template not valid'), array_keys( $templates->forAdministrators() ) );
+			$form->addRule( 'template',    'in_array',  t('template not valid'), array_keys( $templates->admin_templates() ) );
 
 			return $form;
 		}
@@ -353,7 +353,7 @@
         /**
          *  This function updates user login details
          *
-         *  @returns    updated result
+         *  @returns    true if user login details updated, false user is not valid or details not updated
          */
 		function updateLogin(){
 
@@ -362,8 +362,10 @@
 			$this->resetValues();
 			
 			// get current user id
-			$this->user_id = $this->currentID();
+			$res = $this->currentID();
 			
+			if ( $res == false ) return false;
+			
 			// get all attributes
 			$this->find();
 
@@ -376,8 +378,10 @@
 			// set current login
 			$this->login_current = YDStringUtil::formatDate( time(), 'datetimesql' );
 
-			// return values
-			return $this->update();
+			// return update result
+			if ( $this->update() == 1 ) return true;
+			
+			return false;
 		}
 
 		



From ximian at berlios.de  Sun Apr 23 21:40:44 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sun, 23 Apr 2006 21:40:44 +0200
Subject: [ydf-devel] r1870 - in YDFramework2.0/trunk/YDFramework2/YDClasses: . YDCMComponent
Message-ID: <200604231940.k3NJei8e019112@sheep.berlios.de>

Author: ximian
Date: 2006-04-23 21:40:11 +0200 (Sun, 23 Apr 2006)
New Revision: 1870

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql
Log:
YDCMComponent has correct inserts and a new method

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql	2006-04-23 16:45:23 UTC (rev 1869)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql	2006-04-23 19:40:11 UTC (rev 1870)
@@ -1,1213 +1,33 @@
-<?xml version="1.0" standalone="yes" ?>
-<DBMODEL Version="4.0">
-<SETTINGS>
-<GLOBALSETTINGS ModelName="YDCM scheme" IDModel="0" IDVersion="0" VersionStr="1.0.0.0" Comments="" UseVersionHistroy="1" AutoIncVersion="1" DatabaseType="MySQL" ZoomFac="73.00" XPos="25" YPos="329" DefaultDataType="5" DefaultTablePrefix="0" DefSaveDBConn="" DefSyncDBConn="" DefQueryDBConn="" Printer="" HPageCount="4.0" PageAspectRatio="1.440892512336408" PageOrientation="1" PageFormat="A4 (210x297 mm, 8.26x11.7 inches)" SelectedPages="" UsePositionGrid="1" PositionGridX="20" PositionGridY="20" TableNameInRefs="0" DefaultTableType="0" ActivateRefDefForNewRelations="1" FKPrefix="" FKPostfix="" CreateFKRefDefIndex="0" DBQuoteCharacter="`" CreateSQLforLinkedObjects="0" DefModelFont="Tahoma" CanvasWidth="4096" CanvasHeight="2842" />
-<DATATYPEGROUPS>
-<DATATYPEGROUP Name="Numeric Types" Icon="1" />
-<DATATYPEGROUP Name="Date and Time Types" Icon="2" />
-<DATATYPEGROUP Name="String Types" Icon="3" />
-<DATATYPEGROUP Name="Blob and Text Types" Icon="4" />
-<DATATYPEGROUP Name="User defined Types" Icon="5" />
-<DATATYPEGROUP Name="Geographic Types" Icon="6" />
-</DATATYPEGROUPS>
-<DATATYPES>
-<DATATYPE ID="1" IDGroup="0" TypeName="TINYINT" Description="A very small integer. The signed range is -128 to 127. The unsigned range is 0 to 255." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="UNSIGNED" Default="1" />
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="2" IDGroup="0" TypeName="SMALLINT" Description="A small integer. The signed range is -32768 to 32767. The unsigned range is 0 to 65535." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="UNSIGNED" Default="1" />
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="3" IDGroup="0" TypeName="MEDIUMINT" Description="A medium-size integer. The signed range is -8388608 to 8388607. The unsigned range is 0 to 16777215." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="UNSIGNED" Default="1" />
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="4" IDGroup="0" TypeName="INT" Description="A normal-size integer. The signed range is -2147483648 to 2147483647. The unsigned range is 0 to 4294967295." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="1" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="UNSIGNED" Default="0" />
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="5" IDGroup="0" TypeName="INTEGER" Description="A normal-size integer. The signed range is -2147483648 to 2147483647. The unsigned range is 0 to 4294967295." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="1" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="UNSIGNED" Default="1" />
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="6" IDGroup="0" TypeName="BIGINT" Description="A large integer. The signed range is -9223372036854775808 to 9223372036854775807. The unsigned range is 0 to 18446744073709551615." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="UNSIGNED" Default="0" />
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="7" IDGroup="0" TypeName="FLOAT" Description="A small (single-precision) floating-point number. Cannot be unsigned. Allowable values are -3.402823466E+38 to -1.175494351E-38, 0, and 1.175494351E-38 to 3.402823466E+38." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="precision" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="8" IDGroup="0" TypeName="FLOAT" Description="A small (single-precision) floating-point number. Cannot be unsigned. Allowable values are -3.402823466E+38 to -1.175494351E-38, 0, and 1.175494351E-38 to 3.402823466E+38." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-<PARAM Name="decimals" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="9" IDGroup="0" TypeName="DOUBLE" Description="A normal-size (double-precision) floating-point number. Cannot be unsigned. Allowable values are -1.7976931348623157E+308 to -2.2250738585072014E-308, 0, and 2.2250738585072014E-308 to 1.7976931348623157E+308." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-<PARAM Name="decimals" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="10" IDGroup="0" TypeName="DOUBLE PRECISION" Description="This is a synonym for DOUBLE." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-<PARAM Name="decimals" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="11" IDGroup="0" TypeName="REAL" Description="This is a synonym for DOUBLE." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-<PARAM Name="decimals" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="12" IDGroup="0" TypeName="DECIMAL" Description="An unpacked floating-point number. Cannot be unsigned. Behaves like a CHAR column." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="3" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-<PARAM Name="decimals" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="13" IDGroup="0" TypeName="NUMERIC" Description="This is a synonym for DECIMAL." ParamCount="2" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="3" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-<PARAM Name="decimals" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="14" IDGroup="1" TypeName="DATE" Description="A date. The supported range is \a1000-01-01\a to \a9999-12-31\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="15" IDGroup="1" TypeName="DATETIME" Description="A date and time combination. The supported range is \a1000-01-01 00:00:00\a to \a9999-12-31 23:59:59\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="16" IDGroup="1" TypeName="TIMESTAMP" Description="A timestamp. The range is \a1970-01-01 00:00:00\a to sometime in the year 2037. The length can be 14 (or missing), 12, 10, 8, 6, 4, or 2 representing YYYYMMDDHHMMSS, ... , YYYYMMDD, ... , YY formats." ParamCount="1" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-</DATATYPE>
-<DATATYPE ID="17" IDGroup="1" TypeName="TIME" Description="A time. The range is \a-838:59:59\a to \a838:59:59\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="18" IDGroup="1" TypeName="YEAR" Description="A year in 2- or 4-digit format (default is 4-digit)." ParamCount="1" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-</DATATYPE>
-<DATATYPE ID="19" IDGroup="2" TypeName="CHAR" Description="A fixed-length string (1 to 255 characters) that is always right-padded with spaces to the specified length when stored. values are sorted and compared in case-insensitive fashion according to the default character set unless the BINARY keyword is given." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="BINARY" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="20" IDGroup="2" TypeName="VARCHAR" Description="A variable-length string (1 to 255 characters). Values are sorted and compared in case-sensitive fashion unless the BINARY keyword is given." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="BINARY" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="21" IDGroup="2" TypeName="BIT" Description="This is a synonym for CHAR(1)." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="22" IDGroup="2" TypeName="BOOL" Description="This is a synonym for CHAR(1)." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="23" IDGroup="3" TypeName="TINYBLOB" Description="A column maximum length of 255 (2^8 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="24" IDGroup="3" TypeName="BLOB" Description="A column maximum length of 65535 (2^16 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="25" IDGroup="3" TypeName="MEDIUMBLOB" Description="A column maximum length of 16777215 (2^24 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="26" IDGroup="3" TypeName="LONGBLOB" Description="A column maximum length of 4294967295 (2^32 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="27" IDGroup="3" TypeName="TINYTEXT" Description="A column maximum length of 255 (2^8 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="28" IDGroup="3" TypeName="TEXT" Description="A column maximum length of 65535 (2^16 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="29" IDGroup="3" TypeName="MEDIUMTEXT" Description="A column maximum length of 16777215 (2^24 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="30" IDGroup="3" TypeName="LONGTEXT" Description="A column maximum length of 4294967295 (2^32 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="31" IDGroup="3" TypeName="ENUM" Description="An enumeration. A string object that can have only one value, chosen from the list of values." ParamCount="1" OptionCount="0" ParamRequired="1" EditParamsAsString="1" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="values" />
-</PARAMS>
-</DATATYPE>
-<DATATYPE ID="32" IDGroup="3" TypeName="SET" Description="A set. A string object that can have zero or more values, each of which must be chosen from the list of values." ParamCount="1" OptionCount="0" ParamRequired="1" EditParamsAsString="1" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="values" />
-</PARAMS>
-</DATATYPE>
-<DATATYPE ID="33" IDGroup="4" TypeName="Varchar(20)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<OPTIONS>
-<OPTION Name="BINARY" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="34" IDGroup="4" TypeName="Varchar(45)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<OPTIONS>
-<OPTION Name="BINARY" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="35" IDGroup="4" TypeName="Varchar(255)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<OPTIONS>
-<OPTION Name="BINARY" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="36" IDGroup="5" TypeName="GEOMETRY" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="38" IDGroup="5" TypeName="LINESTRING" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="39" IDGroup="5" TypeName="POLYGON" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="40" IDGroup="5" TypeName="MULTIPOINT" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="41" IDGroup="5" TypeName="MULTILINESTRING" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="42" IDGroup="5" TypeName="MULTIPOLYGON" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="43" IDGroup="5" TypeName="GEOMETRYCOLLECTION" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-</DATATYPES>
-<COMMON_DATATYPES>
-<COMMON_DATATYPE ID="5" />
-<COMMON_DATATYPE ID="8" />
-<COMMON_DATATYPE ID="20" />
-<COMMON_DATATYPE ID="15" />
-<COMMON_DATATYPE ID="22" />
-<COMMON_DATATYPE ID="28" />
-<COMMON_DATATYPE ID="26" />
-<COMMON_DATATYPE ID="33" />
-<COMMON_DATATYPE ID="34" />
-<COMMON_DATATYPE ID="35" />
-</COMMON_DATATYPES>
-<TABLEPREFIXES>
-<TABLEPREFIX Name="Default (no prefix)" />
-</TABLEPREFIXES>
-<REGIONCOLORS>
-<REGIONCOLOR Color="Red=#FFEEEC" />
-<REGIONCOLOR Color="Yellow=#FEFDED" />
-<REGIONCOLOR Color="Green=#EAFFE5" />
-<REGIONCOLOR Color="Cyan=#ECFDFF" />
-<REGIONCOLOR Color="Blue=#F0F1FE" />
-<REGIONCOLOR Color="Magenta=#FFEBFA" />
-</REGIONCOLORS>
-<POSITIONMARKERS>
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-</POSITIONMARKERS>
-</SETTINGS>
-<METADATA>
-<REGIONS>
-</REGIONS>
-<TABLES>
-<TABLE ID="1158" Tablename="YDCMAudit" PrevTableName="admin_log" XPos="700" YPos="260" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="2" >
-<COLUMNS>
-<COLUMN ID="1169" ColName="YDCMAudit_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement action">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1171" ColName="user_id" PrevColName="username" Pos="3" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="user id">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1170" ColName="date" PrevColName="timestamp" Pos="2" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="date of this action">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1172" ColName="object" PrevColName="action" Pos="4" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="action object">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1174" ColName="object_action" PrevColName="itemname" Pos="6" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="action name of the above object">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1173" ColName="object_id" PrevColName="itemid" Pos="5" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="action parameter">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_END>
-<RELATION_END ID="1333" />
-</RELATIONS_END>
-<INDICES>
-<INDEX ID="1176" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1169" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1160" Tablename="YDCMPage" PrevTableName="component_page" XPos="360" YPos="800" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="4" >
-<COLUMNS>
-<COLUMN ID="1315" ColName="component_id" PrevColName="" Pos="10" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="page id">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1424" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="component code">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1187" ColName="language_id" PrevColName="language" Pos="8" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1297" ColName="current_version" PrevColName="version" Pos="9" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="this is the current version of this page">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1293" ColName="title" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="page title">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1181" ColName="html" PrevColName="content" Pos="2" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="page html">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1440" ColName="xhtml" PrevColName="" Pos="11" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional page xhtml">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1182" ColName="template_pack" PrevColName="" Pos="3" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="template pack used">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1183" ColName="template" PrevColName="" Pos="4" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="template name">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1184" ColName="metatags" PrevColName="" Pos="5" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="metatags are used. 1 true, 0 false">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1185" ColName="description" PrevColName="" Pos="6" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="metatag description">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1186" ColName="keywords" PrevColName="" Pos="7" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="metatag keywords">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_END>
-<RELATION_END ID="1331" />
-<RELATION_END ID="1340" />
-</RELATIONS_END>
-<INDICES>
-<INDEX ID="1327" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1315" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1161" Tablename="YDCMConfiguration" PrevTableName="configuration" XPos="1420" YPos="60" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO configuration(name, value)\nVALUES(\aname\a, \a\A.$site_name.\A\a);\nINSERT INTO configuration(name, value)\nVALUES(\aadministrator_id\a, \a1\a);\nINSERT INTO configuration(name, value)\nVALUES(\aserver_type\a, \a0\a);\nINSERT INTO configuration(name, value)\nVALUES(\agmt\a, \a0\a);\nINSERT INTO configuration(name, value)\nVALUES(\acharset\a, \aiso-8859-15\a);\nINSERT INTO configuration(name, value)\nVALUES(\astate\a, \a1\a);\nINSERT INTO configuration(name, value)\nVALUES(\aoffline_msg\a, \aPortal indisponivel\a);\nINSERT INTO configuration(name, value)\nVALUES(\aerror_msg\a, \aOcorreu um erro\a);\nINSERT INTO configuration(name, value)\nVALUES(\avisits_total\a, \a0\a);\nINSERT INTO configuration(name, value)\nVALUES(\avisits_current\a, \a0\a);\nINSERT INTO configuratio!
 n(name, value)\nVALUES(\apack\a, \adefault\a);\nINSERT INTO configuration(name, value)\nVALUES(\ainstalation_date\a, \a123123123\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_server\a, \a0\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_from\a, \a\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_host\a, \alocalhost\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_port\a, \a25\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_user\a, \a\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_pass\a, \a\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_priority\a, \a1\a);\nINSERT INTO configuration(name, value)\nVALUES(\aemail_helo\a, \a\a);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="5" >
-<COLUMNS>
-<COLUMN ID="1188" ColName="name" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(50)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="variable name">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1189" ColName="value" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="value">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<INDICES>
-<INDEX ID="1281" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1188" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-<INDEX ID="1190" IndexName="name" IndexKind="1" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1188" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1162" Tablename="YDCMTree" PrevTableName="content" XPos="40" YPos="820" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO content(id, parent, path, pathname, position, type, children, reference, state, services, author, date, access, search, published, date_start, date_end, published_after, published_after_notify)\nVALUES(2, 1, \a1\a, \a/\a, 1, \amenu\a, 0, \astandard\a, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0);\nINSERT INTO content(id, parent, path, pathname, position, type, children, reference, state, services, author, date, access, search, published, date_start, date_end, published_after, published_after_notify)\nVALUES(3, 1, \a1\a, \a/\a, 9999999, \amenu_archive\a, 0, \aarchive\a, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="6"!
  >
-<COLUMNS>
-<COLUMN ID="1191" ColName="content_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="Autoincrement id">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1192" ColName="parent_id" PrevColName="parent" Pos="2" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="Parent node id">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1418" ColName="nleft" PrevColName="" Pos="18" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1419" ColName="nright" PrevColName="" Pos="19" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1420" ColName="nlevel" PrevColName="" Pos="20" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1195" ColName="position" PrevColName="" Pos="5" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="1" Comments="position related to brothers">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1196" ColName="type" PrevColName="" Pos="6" idDatatype="20" DatatypeParams="(20)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="component type name. eg YDCMPage">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1198" ColName="reference" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(100)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="internal name">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1199" ColName="state" PrevColName="" Pos="9" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="state code">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1203" ColName="access" PrevColName="" Pos="13" idDatatype="1" DatatypeParams="(2)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="1" Comments="access code. 0 private, 1 public">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1204" ColName="searcheable" PrevColName="search" Pos="14" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="component will be afected by visitors searches">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1206" ColName="published_date_start" PrevColName="date_start" Pos="16" idDatatype="5" DatatypeParams="(20)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="schedule start date (used when state is schedule)">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1207" ColName="published_date_end" PrevColName="date_end" Pos="17" idDatatype="5" DatatypeParams="(20)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="schedule end date (used when state is schedule)">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_START>
-<RELATION_START ID="1340" />
-<RELATION_START ID="1341" />
-<RELATION_START ID="1437" />
-<RELATION_START ID="1526" />
-<RELATION_START ID="1535" />
-<RELATION_START ID="1572" />
-</RELATIONS_START>
-<INDICES>
-<INDEX ID="1210" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1191" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1163" Tablename="YDCMLink" PrevTableName="content_language" XPos="360" YPos="1060" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="7" >
-<COLUMNS>
-<COLUMN ID="1318" ColName="component_id" PrevColName="" Pos="5" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1425" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1213" ColName="language_id" PrevColName="language" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1212" ColName="title" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(200)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="link title">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1295" ColName="url" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="link url">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_END>
-<RELATION_END ID="1332" />
-<RELATION_END ID="1341" />
-</RELATIONS_END>
-<INDICES>
-<INDEX ID="1325" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1318" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1164" Tablename="YDCMConfiguration_files" PrevTableName="files" XPos="1420" YPos="160" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO files(name, value)\nVALUES(\amaxfilesize_mb\a, \a5\a);\nINSERT INTO files(name, value)\nVALUES(\aimage\a, \ajpeg, gif, png, ico, psd, bmp\a);\nINSERT INTO files(name, value)\nVALUES(\atext\a, \ahtm, html, xml, js, css, doc, pdf, xls, ppt, txt\a);\nINSERT INTO files(name, value)\nVALUES(\avideo\a, \ampg, mpeg, avi, wmv\a);\nINSERT INTO files(name, value)\nVALUES(\aaudio\a, \amp3, wav, ogg, mid\a);\nINSERT INTO files(name, value)\nVALUES(\acompress\a, \azip, rar, gz, tgz\a);\nINSERT INTO files(name, value)\nVALUES(\aother\a, \aswf\a);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="8" >
-<COLUMNS>
-<COLUMN ID="1214" ColName="name" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(50)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1215" ColName="value" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<INDICES>
-<INDEX ID="1282" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1214" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-<INDEX ID="1216" IndexName="name" IndexKind="1" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1214" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1165" Tablename="YDCMLanguages" PrevTableName="languages" XPos="700" YPos="920" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO languages(interface, name, lang, active, default_lang)\nVALUES(\aadmin\a, \aen\a, \aEnglish\a, 1, 1);\nINSERT INTO languages(interface, name, lang, active, default_lang)\nVALUES(\aadmin\a, \apt\a, \aPortugu\234s\a, 1, 0);\nINSERT INTO languages(interface, name, lang, active, default_lang)\nVALUES(\aclient\a, \aen\a, \aEnglish\a, 1, 1);\nINSERT INTO languages(interface, name, lang, active, default_lang)\nVALUES(\aclient\a, \apt\a, \aPortugu\234s\a, 1, 0);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="9" >
-<COLUMNS>
-<COLUMN ID="1219" ColName="language_id" PrevColName="lang" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="language code">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1218" ColName="name" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(50)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="language name">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1220" ColName="active" PrevColName="" Pos="4" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="is active. 1 true, 0 false">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1221" ColName="visitors_default" PrevColName="default_lang" Pos="5" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="this is the default language for visitors side. 1 true, 0 false">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_START>
-<RELATION_START ID="1331" />
-<RELATION_START ID="1332" />
-<RELATION_START ID="1366" />
-<RELATION_START ID="1527" />
-<RELATION_START ID="1536" />
-<RELATION_START ID="1573" />
-</RELATIONS_START>
-<INDICES>
-<INDEX ID="1290" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1219" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1166" Tablename="YDCMVisits" PrevTableName="site_log" XPos="1120" YPos="60" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="10" >
-<COLUMNS>
-<COLUMN ID="1222" ColName="visit_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement id">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1224" ColName="date" PrevColName="timestamp" Pos="3" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="visit date">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1228" ColName="browser" PrevColName="" Pos="7" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="browser info">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1229" ColName="platform" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="user platform">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<INDICES>
-<INDEX ID="1230" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1222" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1167" Tablename="YDCMSearches" PrevTableName="site_searches" XPos="940" YPos="60" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="11" >
-<COLUMNS>
-<COLUMN ID="1231" ColName="search_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement id">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1232" ColName="date" PrevColName="timestamp" Pos="2" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="search date">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1236" ColName="word" PrevColName="" Pos="6" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="word used on search">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<INDICES>
-<INDEX ID="1237" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1231" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1168" Tablename="YDCMUsers" PrevTableName="users" XPos="900" YPos="480" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO users(id, parent, path, position, children, master, username, password, name, email, other, language, state, login_start, login_end, created, created_user, login_counter, login_last, login_current, personalconfig_access, content_access, content_create, content_edit, content_approve, content_move, content_copy, content_block, content_delete, content_custom, visits_access, searches_access, downloads_access, information_access, database_access, audit_access, files_access, files_configuration, users_access, configuration_general_access, configuration_languages_access)\nVALUES(1, 0, \a0\a, 1, 0, 0, \a21232f297a57a5a\a, \a21232f297a57a5a743894a0e4a801fc3\a, \apH cms - Super administrator\a, \a \a, \a \a, \aEnglish\a, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1!
 , 1, 1, 1);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="12" >
-<COLUMNS>
-<COLUMN ID="1238" ColName="user_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement user id">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1239" ColName="parent_id" PrevColName="parent" Pos="2" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional parent of this user">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1240" ColName="nleft" PrevColName="path" Pos="3" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional nleft">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1241" ColName="nright" PrevColName="position" Pos="4" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional nright">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1242" ColName="nlevel" PrevColName="children" Pos="5" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional nlevel">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1244" ColName="username" PrevColName="" Pos="7" idDatatype="20" DatatypeParams="(100)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1245" ColName="password" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(100)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1246" ColName="name" PrevColName="" Pos="9" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1247" ColName="email" PrevColName="" Pos="10" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1248" ColName="other" PrevColName="" Pos="11" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="other user informations">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1249" ColName="language_id" PrevColName="language" Pos="12" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code for administration">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1250" ColName="state" PrevColName="" Pos="13" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="user state">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1251" ColName="login_start" PrevColName="" Pos="14" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="when state is schedule this is the start date">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1252" ColName="login_end" PrevColName="" Pos="15" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="when state is schedule this is the end date">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1255" ColName="login_counter" PrevColName="" Pos="18" idDatatype="5" DatatypeParams="(11)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="login counter">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1256" ColName="login_last" PrevColName="" Pos="19" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="last login date">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1257" ColName="login_current" PrevColName="" Pos="20" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="date of current session">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1254" ColName="created_user" PrevColName="" Pos="17" idDatatype="5" DatatypeParams="(20)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="id  of user that created this user">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1253" ColName="created_date" PrevColName="created" Pos="16" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="creation date">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_START>
-<RELATION_START ID="1333" />
-<RELATION_START ID="1383" />
-<RELATION_START ID="1410" />
-<RELATION_START ID="1436" />
-</RELATIONS_START>
-<RELATIONS_END>
-<RELATION_END ID="1366" />
-</RELATIONS_END>
-<INDICES>
-<INDEX ID="1279" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1238" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1367" Tablename="YDCMHelpdesk_posts" PrevTableName="Table_11" XPos="740" YPos="1540" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="20" >
-<COLUMNS>
-<COLUMN ID="1581" ColName="post_id" PrevColName="" Pos="13" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1369" ColName="component_id" PrevColName="ticket_id" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1371" ColName="user_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1372" ColName="subject" PrevColName="" Pos="2" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1373" ColName="localization" PrevColName="" Pos="3" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1374" ColName="urgency_id" PrevColName="urgency" Pos="4" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="0" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1375" ColName="state_id" PrevColName="state" Pos="5" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="1" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1376" ColName="text" PrevColName="" Pos="6" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1377" ColName="created_in" PrevColName="" Pos="7" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1378" ColName="reported_in" PrevColName="" Pos="8" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1379" ColName="reported_by" PrevColName="" Pos="9" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1380" ColName="reported_to_in" PrevColName="" Pos="10" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1381" ColName="reported_to" PrevColName="" Pos="11" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1382" ColName="reported_to_local" PrevColName="" Pos="12" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_START>
-<RELATION_START ID="1409" />
-</RELATIONS_START>
-<RELATIONS_END>
-<RELATION_END ID="1383" />
-<RELATION_END ID="1392" />
-<RELATION_END ID="1413" />
-<RELATION_END ID="1575" />
-</RELATIONS_END>
-<INDICES>
-<INDEX ID="1582" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1581" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1384" Tablename="YDCMHelpdesk_state" PrevTableName="Table_12" XPos="1080" YPos="1760" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="22" >
-<COLUMNS>
-<COLUMN ID="1386" ColName="state_id" PrevColName="" Pos="0" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1388" ColName="description" PrevColName="state_name" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_START>
-<RELATION_START ID="1392" />
-</RELATIONS_START>
-<INDICES>
-<INDEX ID="1387" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1386" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1393" Tablename="YDCMHelpdesk_urgency" PrevTableName="Table_13" XPos="1080" YPos="1680" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="24" >
-<COLUMNS>
-<COLUMN ID="1395" ColName="urgency_id" PrevColName="" Pos="0" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1397" ColName="description" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1416" ColName="color" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(45)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_START>
-<RELATION_START ID="1413" />
-</RELATIONS_START>
-<INDICES>
-<INDEX ID="1396" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1395" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1401" Tablename="YDCMHelpdesk_response" PrevTableName="Table_14" XPos="1080" YPos="1560" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="26" >
-<COLUMNS>
-<COLUMN ID="1403" ColName="response_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1584" ColName="post_id" PrevColName="" Pos="4" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1406" ColName="user_id" PrevColName="" Pos="2" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1407" ColName="date" PrevColName="" Pos="3" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1408" ColName="description" PrevColName="" Pos="4" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_END>
-<RELATION_END ID="1409" />
-<RELATION_END ID="1410" />
-</RELATIONS_END>
-<INDICES>
-<INDEX ID="1404" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1403" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1430" Tablename="YDCMLocks" PrevTableName="Table_15" XPos="40" YPos="620" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" >
-<COLUMNS>
-<COLUMN ID="1578" ColName="lock_id" PrevColName="" Pos="2" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="lock ID">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1432" ColName="content_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="component code">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1434" ColName="user_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="user id that lock component">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_END>
-<RELATION_END ID="1436" />
-<RELATION_END ID="1437" />
-</RELATIONS_END>
-<INDICES>
-<INDEX ID="1579" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1578" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1519" Tablename="YDCMMenu" PrevTableName="Table_21" XPos="360" YPos="680" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="31" >
-<COLUMNS>
-<COLUMN ID="1521" ColName="component_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1523" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1524" ColName="language_id" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1525" ColName="title" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="menu title">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_END>
-<RELATION_END ID="1526" />
-<RELATION_END ID="1527" />
-</RELATIONS_END>
-<INDICES>
-<INDEX ID="1522" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1521" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1528" Tablename="YDCMGuestbook" PrevTableName="Table_22" XPos="360" YPos="1200" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="34" >
-<COLUMNS>
-<COLUMN ID="1530" ColName="component_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1532" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1533" ColName="language_id" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1534" ColName="title" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="guestbook name">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_START>
-<RELATION_START ID="1547" />
-</RELATIONS_START>
-<RELATIONS_END>
-<RELATION_END ID="1535" />
-<RELATION_END ID="1536" />
-</RELATIONS_END>
-<INDICES>
-<INDEX ID="1531" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1530" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1537" Tablename="YDCMGuestbook_posts" PrevTableName="Table_23" XPos="640" YPos="1320" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" >
-<COLUMNS>
-<COLUMN ID="1539" ColName="post_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement post id">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1541" ColName="component_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="guestbook id">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1542" ColName="date" PrevColName="" Pos="2" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="post date">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1543" ColName="name" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="post user name">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1544" ColName="email" PrevColName="" Pos="4" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="email of poster">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1545" ColName="message" PrevColName="" Pos="5" idDatatype="28" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1546" ColName="active" PrevColName="" Pos="6" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="1" Comments="post is active and can be seen after creation. 1 yes, 0 no">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_END>
-<RELATION_END ID="1547" />
-</RELATIONS_END>
-<INDICES>
-<INDEX ID="1540" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1539" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1565" Tablename="YDCMHelpdesk" PrevTableName="Table_20" XPos="360" YPos="1520" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="39" >
-<COLUMNS>
-<COLUMN ID="1567" ColName="component_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1569" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1570" ColName="language_id" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1571" ColName="title" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="help desk title">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_START>
-<RELATION_START ID="1575" />
-</RELATIONS_START>
-<RELATIONS_END>
-<RELATION_END ID="1572" />
-<RELATION_END ID="1573" />
-</RELATIONS_END>
-<INDICES>
-<INDEX ID="1568" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1567" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-</TABLES>
-<RELATIONS>
-<RELATION ID="1331" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1160" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="12" />
-<RELATION ID="1332" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1163" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="13" />
-<RELATION ID="1333" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1158" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="14" />
-<RELATION ID="1340" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1160" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="15" />
-<RELATION ID="1341" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1163" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="11" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="16" />
-<RELATION ID="1366" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1168" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="19" />
-<RELATION ID="1383" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1367" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="21" />
-<RELATION ID="1392" RelationName="state_id" Kind="2" SrcTable="1384" DestTable="1367" FKFields="state_id=state_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="23" />
-<RELATION ID="1409" RelationName="post_id" Kind="2" SrcTable="1367" DestTable="1401" FKFields="post_id=post_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" />
-<RELATION ID="1410" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1401" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
-<RELATION ID="1413" RelationName="urgency_id" Kind="2" SrcTable="1393" DestTable="1367" FKFields="urgency_id=urgency_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
-<RELATION ID="1436" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1430" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
-<RELATION ID="1437" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1430" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="29" />
-<RELATION ID="1526" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1519" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="32" />
-<RELATION ID="1527" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1519" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="18" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="33" />
-<RELATION ID="1535" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1528" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="-15" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="35" />
-<RELATION ID="1536" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1528" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="14" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="28" CaptionOffsetY="-48" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="36" />
-<RELATION ID="1547" RelationName="component_id" Kind="2" SrcTable="1528" DestTable="1537" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="-4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="38" />
-<RELATION ID="1572" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1565" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="110" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="40" />
-<RELATION ID="1573" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1565" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="236" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="41" />
-<RELATION ID="1575" RelationName="component_id" Kind="2" SrcTable="1565" DestTable="1367" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="41" />
-</RELATIONS>
-<NOTES>
-</NOTES>
-<IMAGES>
-</IMAGES>
-</METADATA>
-<PLUGINDATA>
-<PLUGINDATARECORDS>
-</PLUGINDATARECORDS>
-</PLUGINDATA>
-<QUERYDATA>
-<QUERYRECORDS>
-</QUERYRECORDS>
-</QUERYDATA>
-<LINKEDMODELS>
-</LINKEDMODELS>
-</DBMODEL>
+
+
+INSERT INTO `ydcmconfiguration_files` VALUES ('audio','mp3, wav, ogg, mid');
+INSERT INTO `ydcmconfiguration_files` VALUES ('compress','zip, rar, gz, tgz');
+INSERT INTO `ydcmconfiguration_files` VALUES ('image','jpeg, gif, png, ico, psd, bmp');
+INSERT INTO `ydcmconfiguration_files` VALUES ('maxfilesize_mb','5');
+INSERT INTO `ydcmconfiguration_files` VALUES ('other','swf');
+INSERT INTO `ydcmconfiguration_files` VALUES ('text','htm, html, xml, js, css, doc, pdf, xls, ppt, txt');
+INSERT INTO `ydcmconfiguration_files` VALUES ('video','mpg, mpeg, avi, wmv');
+
+
+
+
+
+INSERT INTO `ydcmlanguages` VALUES ('en','English',1,1);
+INSERT INTO `ydcmlanguages` VALUES ('pt','Portugu?s',1,0);
+
+
+
+
+INSERT INTO `ydcmtree` VALUES (1,0,1,22,1,1,'YDCMRoot','',1,1,1,0,0);
+INSERT INTO `ydcmtree` VALUES (2,1,2,3,2,1,'YDCMRootmenu','menu Code Paste',1,1,1,0,0);
+INSERT INTO `ydcmtree` VALUES (3,1,4,5,2,1,'YDCMRootmenu','menu Documentation',1,1,1,0,0);
+INSERT INTO `ydcmtree` VALUES (4,1,6,13,2,1,'YDCMRootmenu','menu Books',1,1,1,0,0);
+INSERT INTO `ydcmtree` VALUES (5,4,7,8,3,1,'YDCMPage','Apache',1,1,1,0,0);
+INSERT INTO `ydcmtree` VALUES (6,4,9,10,3,1,'YDCMPage','PostegreSQL',1,1,1,0,0);
+INSERT INTO `ydcmtree` VALUES (7,4,11,12,3,1,'YDCMPage','mysql',1,1,1,0,0);
+INSERT INTO `ydcmtree` VALUES (8,1,14,21,2,1,'YDCMRootmenu','links',1,1,1,0,0);
+INSERT INTO `ydcmtree` VALUES (9,8,15,16,3,1,'YDCMPage','databases',1,1,1,0,0);
+INSERT INTO `ydcmtree` VALUES (10,8,17,18,3,1,'YDCMPage','generators',1,1,1,0,0);
+INSERT INTO `ydcmtree` VALUES (11,8,19,20,3,1,'YDCMPage','portals',1,1,1,0,0);
+
+INSERT INTO `ydcmusers` VALUES (2,0,0,0,0,'admin','21232f297a57a5a743894a0e4a801fc3','name','email at test.com','a','en',1,NULL,NULL,7,'2006-04-23 17:02:27','2006-04-23 17:02:34',0,'0000-00-00 00:00:00');

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php	2006-04-23 16:45:23 UTC (rev 1869)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php	2006-04-23 19:40:11 UTC (rev 1870)
@@ -27,8 +27,8 @@
     }
 
     YDInclude( 'YDDatabaseObject.php' );
+    YDInclude( 'YDCMTree.php' );
 
-
     class YDCMComponent extends YDDatabaseObject {
 
         function YDCMComponent( $name, $standardComponent = true ) {
@@ -47,6 +47,9 @@
 			// register table for this component
             $this->registerTable( $name );
 
+			// set standard component
+			$this->standardComponent = $standardComponent;
+
 			// if this is a standard component has primary key 'component_id' and 2 standard relations
 			if ( $standardComponent ){
 
@@ -64,6 +67,9 @@
          		$relLanguage = & $this->registerRelation( 'YDCMLanguages', false, 'YDCMLanguages' );
 				$relLanguage->setLocalKey( 'language_id' );
 				$relLanguage->setForeignKey( 'language_id' );
+
+				// a standard component has tree operations
+				$this->tree = new YDCMTree();
 			}
 
 		}
@@ -121,6 +127,20 @@
 		
 
         /**
+         *  This function changes component state
+         *
+         *  @param $id  The node id
+         *
+         *  @returns    true if state changed, false otherwise
+         *
+         */
+		function toogleState( $id ){
+		
+			return $this->tree->toogleState( $id );
+		}
+
+
+        /**
          *  This function adds a standard node in the tree. Experimental
          *
          *  @param $values  Node values



From ximian at berlios.de  Sun Apr 23 21:42:21 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sun, 23 Apr 2006 21:42:21 +0200
Subject: [ydf-devel] r1871 - YDFramework2.0/trunk/YDFramework2/addons/YDAjax
Message-ID: <200604231942.k3NJgLcM020222@sheep.berlios.de>

Author: ximian
Date: 2006-04-23 21:41:54 +0200 (Sun, 23 Apr 2006)
New Revision: 1871

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php
Log:
new static method YDAjax::script

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php	2006-04-23 19:40:11 UTC (rev 1870)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php	2006-04-23 19:41:54 UTC (rev 1871)
@@ -798,7 +798,7 @@
 
 
         /**
-         *	This method sends a ajax response message
+         *	This static method sends a ajax response message
          *
          *	@param $message			Message to display or array.
          */		
@@ -818,6 +818,25 @@
 		}
 
 
+        /**
+         *	This static method sends a ajax response script
+         *
+         *	@param $code			Javascript code
+         */		
+		function script( $code ){
+
+			// create ajax response
+			$response = new YDAjaxResponse( YDConfig::get( 'YD_AJAX_ENCODING' ) );
+
+			// add message to alert
+			$response->addScript( $code );
+
+			// return response
+			return $response;
+		}
+
+
+
 	}
 
 



From ximian at berlios.de  Sun Apr 23 21:43:29 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Sun, 23 Apr 2006 21:43:29 +0200
Subject: [ydf-devel] r1872 - in YDFramework2.0/trunk/YDFramework2/addons: YDCMPage YDCMTree
Message-ID: <200604231943.k3NJhTws021253@sheep.berlios.de>

Author: ximian
Date: 2006-04-23 21:43:06 +0200 (Sun, 23 Apr 2006)
New Revision: 1872

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/YDCMTree.php
Log:
updated YDCMPage and YDCMTree

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-04-23 19:41:54 UTC (rev 1871)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-04-23 19:43:06 UTC (rev 1872)
@@ -39,8 +39,6 @@
             $this->_description = 'This is a page component';
 
             // define custom fields
-			$this->registerField( 'content_id' );
-			$this->registerField( 'language_id' );
 			$this->registerField( 'current_version' );
 			$this->registerField( 'title' );
 			$this->registerField( 'html' );
@@ -56,6 +54,6 @@
 			// we don't have custom relations
 		}
 		
-		
+
     }
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/YDCMTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/YDCMTree.php	2006-04-23 19:41:54 UTC (rev 1871)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/YDCMTree.php	2006-04-23 19:43:06 UTC (rev 1872)
@@ -27,17 +27,25 @@
     }
 
 	YDInclude( 'YDDatabaseTree.php' );
+    YDInclude( 'YDDatabaseObject.php' );
 
 	// dbobject will delete records even if there are NO conditions ('where' sql conditions)
 	YDConfig::set( 'YD_DBOBJECT_DELETE', true );
 
-    class YDCMTree extends YDCMComponent {
+    class YDCMTree extends YDDatabaseObject {
     
         function YDCMTree() {
         
 			// init component as non default
-            $this->YDCMComponent( 'YDCMTree', false );
+            $this->YDDatabaseObject();
+			
+			// register database as default
+            $this->registerDatabase();
 
+			// register table for this component
+            $this->registerTable( 'YDCMTree' );
+
+			// set component details
             $this->_author = 'Francisco Azevedo';
             $this->_version = '0.1';
             $this->_copyright = '(c) Copyright 2006 Francisco Azevedo';
@@ -87,18 +95,29 @@
 		
 		
         /**
+         *  This function return tree element (except the root)
+         *
+         *  @returns    Array of elements
+         */
+		function getElements(){
+		
+			return $this->tree->getDescendants( 1 );
+		}
+		
+
+        /**
          *  This function inverts a state
          *
-         *  @param $elementID  The node id
+         *  @param $id  The node id
          *
-         *  @returns    1 if state changed, 0 otherwise
+         *  @returns    true if state changed, false otherwise
          */
-		function toogleState( $elementID ){
+		function toogleState( $id ){
 		
 			$this->resetValues();
 
 			// sets element id
-			$this->content_id = intval( $elementID );
+			$this->content_id = intval( $id );
 
 			// search element id and assign values
 			$this->find();
@@ -107,8 +126,10 @@
 			if ( $this->state == 0 ) $this->state = 1;
 			else                     $this->state = 0;
 
-			// update id with new values
-			return $this->update();			
+			// update id with new values an return
+			if ( $this->update() == 1 ) return true;
+			
+			return false;
 		}
 
 



From pclaerhout at berlios.de  Mon Apr 24 07:45:35 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Mon, 24 Apr 2006 07:45:35 +0200
Subject: [ydf-devel] r1873 - YDFramework2.0/trunk/examples/cms/includes
Message-ID: <200604240545.k3O5jZi2029474@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-24 07:45:31 +0200 (Mon, 24 Apr 2006)
New Revision: 1873

Added:
   YDFramework2.0/trunk/examples/cms/includes/ydcms.sql
Log:
Added the missing database schema for the cms application (which is not the same as the new CMS framework Francisco is adding as we speak).

Added: YDFramework2.0/trunk/examples/cms/includes/ydcms.sql
===================================================================
--- YDFramework2.0/trunk/examples/cms/includes/ydcms.sql	2006-04-23 19:43:06 UTC (rev 1872)
+++ YDFramework2.0/trunk/examples/cms/includes/ydcms.sql	2006-04-24 05:45:31 UTC (rev 1873)
@@ -0,0 +1,97 @@
+# MySQL-Front Dump 2.5
+#
+# Host: localhost   Database: ydcms
+# --------------------------------------------------------
+# Server version 4.0.20a-nt
+
+USE ydcms;
+
+
+#
+# Table structure for table 'content'
+#
+
+DROP TABLE IF EXISTS `content`;
+CREATE TABLE `content` (
+  `id` int(11) NOT NULL auto_increment,
+  `parent_id` int(11) NOT NULL default '0',
+  `name` varchar(255) NOT NULL default '',
+  `nleft` int(11) NOT NULL default '0',
+  `nright` int(11) NOT NULL default '0',
+  `nlevel` int(11) NOT NULL default '0',
+  `created` int(11) NOT NULL default '0',
+  `created_by` varchar(255) NOT NULL default '',
+  `modified` int(11) NOT NULL default '0',
+  `modified_by` varchar(255) NOT NULL default '',
+  `content_type` varchar(255) NOT NULL default 'YDCmfContentNode',
+  `can_delete` tinyint(1) NOT NULL default '1',
+  `title_nl` longtext NOT NULL,
+  `title_en` longtext NOT NULL,
+  `title_fr` longtext NOT NULL,
+  `property_0_nl` longtext,
+  `property_0_en` longtext,
+  `property_0_fr` longtext,
+  `property_1_nl` longtext,
+  `property_1_en` longtext,
+  `property_1_fr` longtext,
+  `property_2_nl` longtext,
+  `property_2_en` longtext,
+  `property_2_fr` longtext,
+  `property_3_nl` longtext,
+  `property_3_en` longtext,
+  `property_3_fr` longtext,
+  `property_4_nl` longtext,
+  `property_4_en` longtext,
+  `property_4_fr` longtext,
+  `property_5_nl` longtext,
+  `property_5_en` longtext,
+  `property_5_fr` longtext,
+  `property_6_nl` longtext,
+  `property_6_en` longtext,
+  `property_6_fr` longtext,
+  `property_7_nl` longtext,
+  `property_7_en` longtext,
+  `property_7_fr` longtext,
+  `property_8_nl` longtext,
+  `property_8_en` longtext,
+  `property_8_fr` longtext,
+  `property_9_nl` longtext,
+  `property_9_en` longtext,
+  `property_9_fr` longtext,
+  `property_10_nl` longtext,
+  `property_10_en` longtext,
+  `property_10_fr` longtext,
+  PRIMARY KEY  (`id`),
+  UNIQUE KEY `content_name` (`name`),
+  KEY `content_parent_id` (`parent_id`),
+  KEY `content_nleft` (`nleft`),
+  KEY `content_nright` (`nright`),
+  KEY `content_nlevel` (`nlevel`),
+  KEY `content_content_type` (`content_type`),
+  KEY `content_can_delete` (`can_delete`)
+) TYPE=MyISAM;
+
+
+
+#
+# Dumping data for table 'content'
+#
+
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("1", "0", "home", "1", "36", "1", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfcontentnode", "1", "Titel Nederlands", "Title English", "Titre Fran&ccedil;ais", NULL, NULL, NUL!
 L, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("2", "1", "home2", "2", "3", "2", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfhome", "1", "Titel2 Nederlands", "Title2 English", "Titre2 Fran&ccedil;ais", NULL, NULL, NULL, N!
 ULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("3", "1", "news", "4", "9", "2", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfhome", "1", "News Nederlands", "News English", "News Fran&ccedil;ais", NULL, NULL, NULL, NULL, NU!
 LL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("4", "3", "news/20060417_krabrally_2006", "5", "6", "3", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfhome", "1", "News Krabrally 2006 Nederlands", "News Krabrally 2006 Englis!
 h", "News Krabrally 2006 Fran&ccedil;ais", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("5", "3", "news/20060418_krabrally_2007", "7", "8", "3", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfhome", "1", "News Krabrally 2007 Nederlands", "News Krabrally 2007 Englis!
 h", "News Krabrally 2007 Fran&ccedil;ais", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("6", "1", "photo", "10", "35", "2", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfgallery", "1", "Photo Galleries", "Photo Galleries", "Photo Galleries", NULL, NULL, NULL, NULL!
 , NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("7", "6", "photo/krabrally2006", "11", "22", "3", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfgalleryalbum", "1", "Krabrally 2006", "Krabrally 2006", "Krabrally 2006", NULL, !
 NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("8", "6", "photo/krabrally2007", "23", "34", "3", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfgalleryalbum", "1", "Krabrally 2007", "Krabrally 2007", "Krabrally 2007", NULL, !
 NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("131", "7", "photo/krabrally2006/19990716-MVC-P-014F", "12", "13", "4", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfgalleryitem", "1", "19990716-MVC-P-014F.JPG", "19990716-MV!
 C-P-014F.JPG", "19990716-MVC-P-014F.JPG", "uploads/krabrally2006/19990716-MVC-P-014F.JPG", "uploads/krabrally2006/19990716-MVC-P-014F.JPG", "uploads/krabrally2006/19990716-MVC-P-014F.JPG", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("132", "7", "photo/krabrally2006/19990716-MVC-P-015F", "14", "15", "4", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfgalleryitem", "1", "19990716-MVC-P-015F.JPG", "19990716-MV!
 C-P-015F.JPG", "19990716-MVC-P-015F.JPG", "uploads/krabrally2006/19990716-MVC-P-015F.JPG", "uploads/krabrally2006/19990716-MVC-P-015F.JPG", "uploads/krabrally2006/19990716-MVC-P-015F.JPG", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("133", "7", "photo/krabrally2006/19990716-MVC-P-016F", "16", "17", "4", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfgalleryitem", "1", "19990716-MVC-P-016F.JPG", "19990716-MV!
 C-P-016F.JPG", "19990716-MVC-P-016F.JPG", "uploads/krabrally2006/19990716-MVC-P-016F.JPG", "uploads/krabrally2006/19990716-MVC-P-016F.JPG", "uploads/krabrally2006/19990716-MVC-P-016F.JPG", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("134", "7", "photo/krabrally2006/19990716-MVC-P-017F", "18", "19", "4", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfgalleryitem", "1", "19990716-MVC-P-017F.JPG", "19990716-MV!
 C-P-017F.JPG", "19990716-MVC-P-017F.JPG", "uploads/krabrally2006/19990716-MVC-P-017F.JPG", "uploads/krabrally2006/19990716-MVC-P-017F.JPG", "uploads/krabrally2006/19990716-MVC-P-017F.JPG", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("135", "7", "photo/krabrally2006/19990716-MVC-P-018F", "20", "21", "4", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfgalleryitem", "1", "19990716-MVC-P-018F.JPG", "19990716-MV!
 C-P-018F.JPG", "19990716-MVC-P-018F.JPG", "uploads/krabrally2006/19990716-MVC-P-018F.JPG", "uploads/krabrally2006/19990716-MVC-P-018F.JPG", "uploads/krabrally2006/19990716-MVC-P-018F.JPG", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("136", "8", "photo/krabrally2007/19990716-MVC-P-019F", "24", "25", "4", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfgalleryitem", "1", "19990716-MVC-P-019F.JPG", "19990716-MV!
 C-P-019F.JPG", "19990716-MVC-P-019F.JPG", "uploads/krabrally2007/19990716-MVC-P-019F.JPG", "uploads/krabrally2007/19990716-MVC-P-019F.JPG", "uploads/krabrally2007/19990716-MVC-P-019F.JPG", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("137", "8", "photo/krabrally2007/19990716-MVC-P-020F", "26", "27", "4", "1145389437", "pclaerho-lt.cem.creo.com", "1145389437", "pclaerho-lt.cem.creo.com", "ydcmfgalleryitem", "1", "19990716-MVC-P-020F.JPG", "19990716-MV!
 C-P-020F.JPG", "19990716-MVC-P-020F.JPG", "uploads/krabrally2007/19990716-MVC-P-020F.JPG", "uploads/krabrally2007/19990716-MVC-P-020F.JPG", "uploads/krabrally2007/19990716-MVC-P-020F.JPG", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("138", "8", "photo/krabrally2007/19990716-MVC-P-021F", "28", "29", "4", "1145389438", "pclaerho-lt.cem.creo.com", "1145389438", "pclaerho-lt.cem.creo.com", "ydcmfgalleryitem", "1", "19990716-MVC-P-021F.JPG", "19990716-MV!
 C-P-021F.JPG", "19990716-MVC-P-021F.JPG", "uploads/krabrally2007/19990716-MVC-P-021F.JPG", "uploads/krabrally2007/19990716-MVC-P-021F.JPG", "uploads/krabrally2007/19990716-MVC-P-021F.JPG", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("139", "8", "photo/krabrally2007/19990716-MVC-P-022F", "30", "31", "4", "1145389438", "pclaerho-lt.cem.creo.com", "1145389438", "pclaerho-lt.cem.creo.com", "ydcmfgalleryitem", "1", "19990716-MVC-P-022F.JPG", "19990716-MV!
 C-P-022F.JPG", "19990716-MVC-P-022F.JPG", "uploads/krabrally2007/19990716-MVC-P-022F.JPG", "uploads/krabrally2007/19990716-MVC-P-022F.JPG", "uploads/krabrally2007/19990716-MVC-P-022F.JPG", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
+INSERT INTO `content` (`id`, `parent_id`, `name`, `nleft`, `nright`, `nlevel`, `created`, `created_by`, `modified`, `modified_by`, `content_type`, `can_delete`, `title_nl`, `title_en`, `title_fr`, `property_0_nl`, `property_0_en`, `property_0_fr`, `property_1_nl`, `property_1_en`, `property_1_fr`, `property_2_nl`, `property_2_en`, `property_2_fr`, `property_3_nl`, `property_3_en`, `property_3_fr`, `property_4_nl`, `property_4_en`, `property_4_fr`, `property_5_nl`, `property_5_en`, `property_5_fr`, `property_6_nl`, `property_6_en`, `property_6_fr`, `property_7_nl`, `property_7_en`, `property_7_fr`, `property_8_nl`, `property_8_en`, `property_8_fr`, `property_9_nl`, `property_9_en`, `property_9_fr`, `property_10_nl`, `property_10_en`, `property_10_fr`) VALUES("140", "8", "photo/krabrally2007/19990716-MVC-P-023F", "32", "33", "4", "1145389438", "pclaerho-lt.cem.creo.com", "1145389438", "pclaerho-lt.cem.creo.com", "ydcmfgalleryitem", "1", "19990716-MVC-P-023F.JPG", "19990716-MV!
 C-P-023F.JPG", "19990716-MVC-P-023F.JPG", "uploads/krabrally2007/19990716-MVC-P-023F.JPG", "uploads/krabrally2007/19990716-MVC-P-023F.JPG", "uploads/krabrally2007/19990716-MVC-P-023F.JPG", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);



From pclaerhout at berlios.de  Mon Apr 24 07:50:48 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Mon, 24 Apr 2006 07:50:48 +0200
Subject: [ydf-devel] r1874 - YDFramework2.0/trunk/examples
Message-ID: <200604240550.k3O5omgv031476@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-24 07:50:28 +0200 (Mon, 24 Apr 2006)
New Revision: 1874

Removed:
   YDFramework2.0/trunk/examples/cms/
Log:
Removed the CMS example as it will get replaced with a new one.




From ximian at berlios.de  Mon Apr 24 12:13:10 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 24 Apr 2006 12:13:10 +0200
Subject: [ydf-devel] r1875 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604241013.k3OADAPw024610@sheep.berlios.de>

Author: ximian
Date: 2006-04-24 12:12:52 +0200 (Mon, 24 Apr 2006)
New Revision: 1875

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
Log:
new method YDFormElement::setAttributes to set an array of attributes

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-04-24 05:50:28 UTC (rev 1874)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-04-24 10:12:52 UTC (rev 1875)
@@ -1341,7 +1341,19 @@
             $this->_attributes[$key] = $val;
         }
 
+
         /**
+         *  Function to set attributes of a form element
+         *
+         *  @param  $attributes    Associative array of attributes
+         */
+        function setAttributes( $attributes ) {
+            foreach ( $attributes as $k => $v )
+                $this->setAttribute( $k, $v );
+        }
+
+
+        /**
          *  Function to delete an attribute of a form element
          *
          *  @param  $key    The name of the attribute



From ximian at berlios.de  Mon Apr 24 12:14:21 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 24 Apr 2006 12:14:21 +0200
Subject: [ydf-devel] r1876 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604241014.k3OAELmG024743@sheep.berlios.de>

Author: ximian
Date: 2006-04-24 12:14:02 +0200 (Mon, 24 Apr 2006)
New Revision: 1876

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php
Log:
new method YDCMComponent::delete to delete the tree part of a node

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php	2006-04-24 10:12:52 UTC (rev 1875)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php	2006-04-24 10:14:02 UTC (rev 1876)
@@ -140,7 +140,20 @@
 		}
 
 
+
         /**
+         *  This function deletes the tree part of a component only
+         *
+         *  @param $id  The node id
+         *
+         */
+		function deleteNode( $id ){
+		
+			return $this->tree->deleteNode( $id );
+		}
+
+
+        /**
          *  This function adds a standard node in the tree. Experimental
          *
          *  @param $values  Node values



From ximian at berlios.de  Mon Apr 24 12:15:25 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 24 Apr 2006 12:15:25 +0200
Subject: [ydf-devel] r1877 - YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates
Message-ID: <200604241015.k3OAFPrB024952@sheep.berlios.de>

Author: ximian
Date: 2006-04-24 12:15:05 +0200 (Mon, 24 Apr 2006)
New Revision: 1877

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php
Log:
YDCMTemplates can now support template pack names

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php	2006-04-24 10:14:02 UTC (rev 1876)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMTemplates/YDCMTemplates.php	2006-04-24 10:15:05 UTC (rev 1877)
@@ -38,7 +38,10 @@
 	// set visitors template name
 	YDConfig::set( 'YDCMTEMPLATES_VISITORS_TEMPLATE', '', false );
 
+	// set template pack ( a pH technology )
+	YDConfig::set( 'YDCMTEMPLATES_PACK', false, false );
 
+
 	// this is a very special component because don't have any DB table (that's way do not extends YDCMComponent)
     class YDCMTemplates {
 
@@ -53,7 +56,7 @@
 			$this->admin_template    = YDConfig::get( 'YDCMTEMPLATES_ADMIN_TEMPLATE' );
 			$this->visitors_path     = YDConfig::get( 'YDCMTEMPLATES_VISITORS_PATH' );
 			$this->visitors_template = YDConfig::get( 'YDCMTEMPLATES_VISITORS_TEMPLATE' );
-
+			$this->template_pack     = YDConfig::get( 'YDCMTEMPLATES_PACK' );
 		}
 
 
@@ -93,6 +96,17 @@
 
 
         /**
+         *  This function return the template pack
+         *
+         *  @returns    full path
+         */
+		function template_pack(){
+		
+			return $this->template_pack;
+		}
+
+
+        /**
          *  This function returns all possible templates for visitors side
          *
          *  @returns    Associative array of templates, eg: array( 'Default' => 'Default', 'orange' => ... )



From ximian at berlios.de  Mon Apr 24 12:16:46 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 24 Apr 2006 12:16:46 +0200
Subject: [ydf-devel] r1878 - YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages
Message-ID: <200604241016.k3OAGkJb025437@sheep.berlios.de>

Author: ximian
Date: 2006-04-24 12:16:25 +0200 (Mon, 24 Apr 2006)
New Revision: 1878

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php
Log:
added new generic languages to the master languages component

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php	2006-04-24 10:15:05 UTC (rev 1877)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php	2006-04-24 10:16:25 UTC (rev 1878)
@@ -6,5 +6,8 @@
 $GLOBALS['t']['help'] = 'Help';
 $GLOBALS['t']['back'] = 'Back';
 $GLOBALS['t']['not applicable'] = 'Not applicable';
+$GLOBALS['t']['yes'] = 'Yes';
+$GLOBALS['t']['no'] = 'No';
+$GLOBALS['t']['schedule'] = 'Schedule';
 
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php	2006-04-24 10:15:05 UTC (rev 1877)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php	2006-04-24 10:16:25 UTC (rev 1878)
@@ -6,5 +6,8 @@
 $GLOBALS['t']['help'] = 'Ajuda';
 $GLOBALS['t']['back'] = 'Voltar';
 $GLOBALS['t']['not applicable'] = 'N&atilde;o aplic&aacute;vel';
+$GLOBALS['t']['yes'] = 'Sim';
+$GLOBALS['t']['no'] = 'N&atilde;o';
+$GLOBALS['t']['schedule'] = 'Calend&aacute;rio';
 
 ?>
\ No newline at end of file



From ximian at berlios.de  Mon Apr 24 12:47:05 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 24 Apr 2006 12:47:05 +0200
Subject: [ydf-devel] r1879 - YDFramework2.0/trunk/YDFramework2/addons/YDCMTree
Message-ID: <200604241047.k3OAl5cZ006389@sheep.berlios.de>

Author: ximian
Date: 2006-04-24 12:46:29 +0200 (Mon, 24 Apr 2006)
New Revision: 1879

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/YDCMTree.php
Log:
added new method to YDCMTree node delete

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/YDCMTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/YDCMTree.php	2006-04-24 10:16:25 UTC (rev 1878)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/YDCMTree.php	2006-04-24 10:46:29 UTC (rev 1879)
@@ -84,13 +84,12 @@
         /**
          *  This function deletes a tree node
          *
-         *  @param $elementID  The node id
+         *  @param $id  The node id
          */
-		function deleteNode( $elementID ){
+		function deleteNode( $id ){
 
 			// delete node and all children of this node
-			// TODO: maybe we could return the nodes deleted
-			return $this->tree->deleteNode( intval( $elementID ) );
+			return $this->tree->deleteNode( intval( $id ) );
 		}
 		
 		



From ximian at berlios.de  Mon Apr 24 12:48:25 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 24 Apr 2006 12:48:25 +0200
Subject: [ydf-devel] r1880 - in YDFramework2.0/trunk/YDFramework2/addons/YDCMPage: . languages
Message-ID: <200604241048.k3OAmPrm007546@sheep.berlios.de>

Author: ximian
Date: 2006-04-24 12:48:06 +0200 (Mon, 24 Apr 2006)
New Revision: 1880

Added:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/ph.php
Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
Log:
- added YDCMPage method to get the standard page form
- added form page translations


Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-04-24 10:46:29 UTC (rev 1879)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-04-24 10:48:06 UTC (rev 1880)
@@ -26,6 +26,13 @@
         die( 'Yellow Duck Framework is not loaded.' );
     }
 
+	// add local translation directory
+	YDLocale::addDirectory( dirname( __FILE__ ) . '/languages/' );
+
+	// set page form name
+	YDConfig::set( 'YDCMPAGE_FORMPAGE', 'YDCMPageForm', false );
+
+
     class YDCMPage extends YDCMComponent {
     
         function YDCMPage() {
@@ -55,5 +62,51 @@
 		}
 		
 
+        /**
+         *  This function returns the page form
+         *
+         *  @returns    YDForm object
+         */
+		function getFormPage(){
+		
+			YDInclude( 'YDForm.php' );
+			YDInclude( 'YDCMTemplates.php' );
+		
+			// create access options
+			$access = array( 0 => t('public'), 1 => t('private') );
+
+			// get all possible visitors templates
+			$templates = new YDCMTemplates();
+
+			// create 'template pack' options
+			$template_pack = array(	'pack'	=> t('use templatepack') .' ('. $templates->template_pack() .')',
+									0		=> t('use custom template') );
+	
+			// create form object
+			$form = new YDForm( YDConfig::get( 'YDCMPAGE_FORMPAGE' ) );
+
+	        $form->addElement( 'text',           'reference',     t('page_reference'),      array('size' => 25, 'maxlength' => 35) );
+	        $form->addElement( 'text',           'title',         t('page_title'),          array('size' => 70, 'maxlength' => 70) );
+	        $form->addElement( 'hidden',         'content',       t('page_content') );
+	        $form->addElement( 'select',         'access',        t('page_access'),         array(), $access);
+	        $form->addElement( 'select',         'published',     t('page_published'),      array(), array(1 => t('yes'), 0 => t('no'), 2 => t('schedule')) );
+	        $form->addElement( 'datetimeselect', 'date_start',    t('page_startdate') );
+	        $form->addElement( 'datetimeselect', 'date_end',      t('page_enddate'));
+	        $form->addElement( 'select',         'template_pack', '',                       array(), $template_pack );
+	        $form->addElement( 'select',         'template',      t('page_template'),       array(), $templates->visitors_templates());
+	        $form->addElement( 'select',         'metatags',      t('page_metatags'),       array(), array(0 => t('no'), 1 => t('yes')));
+	        $form->addElement( 'textarea',       'description',   t('page_description'),    array('cols' => 50, 'rows' => 5) );
+	        $form->addElement( 'textarea',       'keywords',      t('page_keywords'),       array('cols' => 50, 'rows' => 5) );
+	        $form->addElement( 'select',         'search',        t('page_search'),         array(), array(0 => t('no'), 1 => t('yes')) );
+	        $form->addElement( 'hidden',         'content_id' );
+	        $form->addElement( 'hidden',         'parent_id' );
+
+			// parent of new page is 0 by default
+			$form->setDefault( 'content_id', 0 );
+			$form->setDefault( 'parent_id', 0 );
+
+			return $form;
+		}
+
     }
 ?>
\ No newline at end of file

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php	2006-04-24 10:46:29 UTC (rev 1879)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php	2006-04-24 10:48:06 UTC (rev 1880)
@@ -0,0 +1,21 @@
+<?php
+
+// PAGE FORM
+$GLOBALS['t']['page_reference'] = 'Reference';
+$GLOBALS['t']['page_title'] = 'Title';
+$GLOBALS['t']['page_content'] = 'Content';
+$GLOBALS['t']['page_access'] = 'Access';
+$GLOBALS['t']['page_published'] = 'Published';
+$GLOBALS['t']['page_startdate'] = 'Start date';
+$GLOBALS['t']['page_enddate'] = 'End date';
+$GLOBALS['t']['page_templates'] = 'Templates';
+$GLOBALS['t']['page_metatags'] = 'Metatags';
+$GLOBALS['t']['page_description'] = 'Description';
+$GLOBALS['t']['page_keywords'] = 'Keywords';
+$GLOBALS['t']['page_search'] = 'Searcheable';
+
+// PAGE FORM RULES
+
+// OTHER
+
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/ph.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/ph.php	2006-04-24 10:46:29 UTC (rev 1879)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/ph.php	2006-04-24 10:48:06 UTC (rev 1880)
@@ -0,0 +1,21 @@
+<?php
+
+// PAGE FORM
+$GLOBALS['t']['page_reference'] = 'Refer&ecirc;ncia';
+$GLOBALS['t']['page_title'] = 'Titulo';
+$GLOBALS['t']['page_content'] = 'Conte&uacute;do';
+$GLOBALS['t']['page_access'] = 'Acesso';
+$GLOBALS['t']['page_published'] = 'Publicado';
+$GLOBALS['t']['page_startdate'] = 'Data inicial';
+$GLOBALS['t']['page_enddate'] = 'Data final';
+$GLOBALS['t']['page_templates'] = 'Templates';
+$GLOBALS['t']['page_metatags'] = 'Metatags';
+$GLOBALS['t']['page_description'] = 'Descri&ccedil;&atilde;o';
+$GLOBALS['t']['page_keywords'] = 'Keywords';
+$GLOBALS['t']['page_search'] = 'Pesquis&aacute;vel';
+
+// PAGE FORM RULES
+
+// OTHER
+
+?>
\ No newline at end of file



From ximian at berlios.de  Mon Apr 24 15:49:55 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 24 Apr 2006 15:49:55 +0200
Subject: [ydf-devel] r1881 - YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent
Message-ID: <200604241349.k3ODntf1005508@sheep.berlios.de>

Author: ximian
Date: 2006-04-24 15:49:30 +0200 (Mon, 24 Apr 2006)
New Revision: 1881

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql
Log:
- added rows about YDCMPage components and a new language type 'all' that identifies all language types

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql	2006-04-24 10:48:06 UTC (rev 1880)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql	2006-04-24 13:49:30 UTC (rev 1881)
@@ -12,6 +12,7 @@
 
 
 
+INSERT INTO `ydcmlanguages` VALUES ('all','All',1,0);
 INSERT INTO `ydcmlanguages` VALUES ('en','English',1,1);
 INSERT INTO `ydcmlanguages` VALUES ('pt','Portugu?s',1,0);
 
@@ -30,4 +31,16 @@
 INSERT INTO `ydcmtree` VALUES (10,8,17,18,3,1,'YDCMPage','generators',1,1,1,0,0);
 INSERT INTO `ydcmtree` VALUES (11,8,19,20,3,1,'YDCMPage','portals',1,1,1,0,0);
 
+
+INSERT INTO `ydcmpage` VALUES (1,  5, 'en', 1, 'Apache in english', '', '', 0, '', 0, '', '');
+INSERT INTO `ydcmpage` VALUES (2,  6, 'all', 1, 'PostgreSQL in all lang', '', '', 0, '', 0, '', '');
+INSERT INTO `ydcmpage` VALUES (3,  7, 'pt', 1, 'mySQL in PT', '', '', 0, '', 0, '', '');
+INSERT INTO `ydcmpage` VALUES (4,  9, 'en', 1, 'Our databases', '', '', 0, '', 0, '', '');
+INSERT INTO `ydcmpage` VALUES (5, 10, 'en', 1, 'Generators', '', '', 0, '', 0, '', '');
+INSERT INTO `ydcmpage` VALUES (6, 11, 'all', 1, 'Portals for all', '', '', 0, '', 0, '', '');
+
+
 INSERT INTO `ydcmusers` VALUES (2,0,0,0,0,'admin','21232f297a57a5a743894a0e4a801fc3','name','email at test.com','a','en',1,NULL,NULL,7,'2006-04-23 17:02:27','2006-04-23 17:02:34',0,'0000-00-00 00:00:00');
+
+
+



From ximian at berlios.de  Mon Apr 24 15:52:31 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 24 Apr 2006 15:52:31 +0200
Subject: [ydf-devel] r1882 - in YDFramework2.0/trunk/YDFramework2/addons/YDCMPage: . languages
Message-ID: <200604241352.k3ODqVoT007411@sheep.berlios.de>

Author: ximian
Date: 2006-04-24 15:52:04 +0200 (Mon, 24 Apr 2006)
New Revision: 1882

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/ph.php
Log:
- added new method YDCMPage::getNode that returns all information about a page
- new YDCMPage translations

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-04-24 13:49:30 UTC (rev 1881)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-04-24 13:52:04 UTC (rev 1882)
@@ -55,8 +55,6 @@
 			$this->registerField( 'metatags' );			
 			$this->registerField( 'description' );
 			$this->registerField( 'keywords' );			
-			$this->registerField( 'access' );
-			$this->registerField( 'search' );
 
 			// we don't have custom relations
 		}
@@ -85,19 +83,19 @@
 			// create form object
 			$form = new YDForm( YDConfig::get( 'YDCMPAGE_FORMPAGE' ) );
 
-	        $form->addElement( 'text',           'reference',     t('page_reference'),      array('size' => 25, 'maxlength' => 35) );
-	        $form->addElement( 'text',           'title',         t('page_title'),          array('size' => 70, 'maxlength' => 70) );
-	        $form->addElement( 'hidden',         'content',       t('page_content') );
-	        $form->addElement( 'select',         'access',        t('page_access'),         array(), $access);
-	        $form->addElement( 'select',         'published',     t('page_published'),      array(), array(1 => t('yes'), 0 => t('no'), 2 => t('schedule')) );
-	        $form->addElement( 'datetimeselect', 'date_start',    t('page_startdate') );
-	        $form->addElement( 'datetimeselect', 'date_end',      t('page_enddate'));
-	        $form->addElement( 'select',         'template_pack', '',                       array(), $template_pack );
-	        $form->addElement( 'select',         'template',      t('page_template'),       array(), $templates->visitors_templates());
-	        $form->addElement( 'select',         'metatags',      t('page_metatags'),       array(), array(0 => t('no'), 1 => t('yes')));
-	        $form->addElement( 'textarea',       'description',   t('page_description'),    array('cols' => 50, 'rows' => 5) );
-	        $form->addElement( 'textarea',       'keywords',      t('page_keywords'),       array('cols' => 50, 'rows' => 5) );
-	        $form->addElement( 'select',         'search',        t('page_search'),         array(), array(0 => t('no'), 1 => t('yes')) );
+	        $form->addElement( 'text',           'reference',            t('page_reference'),      array('size' => 25, 'maxlength' => 35) );
+	        $form->addElement( 'text',           'title',                t('page_title'),          array('size' => 70, 'maxlength' => 70) );
+	        $form->addElement( 'hidden',         'content',              t('page_content') );
+	        $form->addElement( 'select',         'access',               t('page_access'),         array(), $access);
+	        $form->addElement( 'select',         'published',            t('page_published'),      array(), array(1 => t('yes'), 0 => t('no'), 2 => t('schedule')) );
+	        $form->addElement( 'datetimeselect', 'published_date_start', t('page_startdate') );
+	        $form->addElement( 'datetimeselect', 'published_date_end',   t('page_enddate'));
+	        $form->addElement( 'select',         'template_pack',        '',                       array(), $template_pack );
+	        $form->addElement( 'select',         'template',             t('page_template'),       array(), $templates->visitors_templates());
+	        $form->addElement( 'select',         'metatags',             t('page_metatags'),       array(), array(0 => t('no'), 1 => t('yes')));
+	        $form->addElement( 'textarea',       'description',          t('page_description'),    array('cols' => 50, 'rows' => 5) );
+	        $form->addElement( 'textarea',       'keywords',             t('page_keywords'),       array('cols' => 50, 'rows' => 5) );
+	        $form->addElement( 'select',         'search',               t('page_search'),         array(), array(0 => t('no'), 1 => t('yes')) );
 	        $form->addElement( 'hidden',         'content_id' );
 	        $form->addElement( 'hidden',         'parent_id' );
 
@@ -108,5 +106,26 @@
 			return $form;
 		}
 
+
+        /**
+         *  This function returns the page sttributes
+         *
+         *  @returns    Node id
+         */
+		function getNode( $id ){
+		
+			// delete previous stored values
+			$this->resetValues();
+
+			// define our id to find		
+			$this->content_id = intval( $id );
+			
+			// find node
+			$this->findAll();
+			
+			// return node attributes without relation prefixs
+			return $this->getValues( false, false, false, false );
+		}
+
     }
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php	2006-04-24 13:49:30 UTC (rev 1881)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php	2006-04-24 13:52:04 UTC (rev 1882)
@@ -17,5 +17,11 @@
 // PAGE FORM RULES
 
 // OTHER
+$GLOBALS['t']['page'] = 'Page';
+$GLOBALS['t']['page content'] = 'Content';
+$GLOBALS['t']['page template'] = 'Template';
+$GLOBALS['t']['page access'] = 'Access';
+$GLOBALS['t']['new page'] = 'New page';
+$GLOBALS['t']['edit page'] = 'Edit page';
 
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/ph.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/ph.php	2006-04-24 13:49:30 UTC (rev 1881)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/ph.php	2006-04-24 13:52:04 UTC (rev 1882)
@@ -17,5 +17,11 @@
 // PAGE FORM RULES
 
 // OTHER
+$GLOBALS['t']['page'] = 'P&aacute;gina';
+$GLOBALS['t']['page content'] = 'Conte&uacute;do';
+$GLOBALS['t']['page template'] = 'Template';
+$GLOBALS['t']['page access'] = 'Acesso';
+$GLOBALS['t']['new page'] = 'Nova p&aacute;gina';
+$GLOBALS['t']['edit page'] = 'Editar p&aacute;gina';
 
 ?>
\ No newline at end of file



From ximian at berlios.de  Mon Apr 24 15:53:56 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 24 Apr 2006 15:53:56 +0200
Subject: [ydf-devel] r1883 - YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages
Message-ID: <200604241353.k3ODru2Y008014@sheep.berlios.de>

Author: ximian
Date: 2006-04-24 15:53:27 +0200 (Mon, 24 Apr 2006)
New Revision: 1883

Added:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/pt.php
Removed:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/ph.php
Log:
fixed portuguese translation filename from 'ph.php' to 'pt.php'

Deleted: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/ph.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/ph.php	2006-04-24 13:52:04 UTC (rev 1882)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/ph.php	2006-04-24 13:53:27 UTC (rev 1883)
@@ -1,27 +0,0 @@
-<?php
-
-// PAGE FORM
-$GLOBALS['t']['page_reference'] = 'Refer&ecirc;ncia';
-$GLOBALS['t']['page_title'] = 'Titulo';
-$GLOBALS['t']['page_content'] = 'Conte&uacute;do';
-$GLOBALS['t']['page_access'] = 'Acesso';
-$GLOBALS['t']['page_published'] = 'Publicado';
-$GLOBALS['t']['page_startdate'] = 'Data inicial';
-$GLOBALS['t']['page_enddate'] = 'Data final';
-$GLOBALS['t']['page_templates'] = 'Templates';
-$GLOBALS['t']['page_metatags'] = 'Metatags';
-$GLOBALS['t']['page_description'] = 'Descri&ccedil;&atilde;o';
-$GLOBALS['t']['page_keywords'] = 'Keywords';
-$GLOBALS['t']['page_search'] = 'Pesquis&aacute;vel';
-
-// PAGE FORM RULES
-
-// OTHER
-$GLOBALS['t']['page'] = 'P&aacute;gina';
-$GLOBALS['t']['page content'] = 'Conte&uacute;do';
-$GLOBALS['t']['page template'] = 'Template';
-$GLOBALS['t']['page access'] = 'Acesso';
-$GLOBALS['t']['new page'] = 'Nova p&aacute;gina';
-$GLOBALS['t']['edit page'] = 'Editar p&aacute;gina';
-
-?>
\ No newline at end of file

Copied: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/pt.php (from rev 1882, YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/ph.php)



From ximian at berlios.de  Mon Apr 24 17:22:00 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 24 Apr 2006 17:22:00 +0200
Subject: [ydf-devel] r1884 - in YDFramework2.0/trunk/YDFramework2/addons: YDCMLanguages/languages YDCMPage YDCMPage/languages
Message-ID: <200604241522.k3OFM0JG009472@sheep.berlios.de>

Author: ximian
Date: 2006-04-24 17:21:39 +0200 (Mon, 24 Apr 2006)
New Revision: 1884

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/pt.php
Log:
- added more translations (generic and for YDCMPage)
- fixed template_pack options

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php	2006-04-24 13:53:27 UTC (rev 1883)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/en.php	2006-04-24 15:21:39 UTC (rev 1884)
@@ -9,5 +9,9 @@
 $GLOBALS['t']['yes'] = 'Yes';
 $GLOBALS['t']['no'] = 'No';
 $GLOBALS['t']['schedule'] = 'Schedule';
+$GLOBALS['t']['delete'] = 'Delete';
+$GLOBALS['t']['toggle state'] = 'Toggle state';
+$GLOBALS['t']['public'] = 'Public';
+$GLOBALS['t']['private'] = 'Private';
 
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php	2006-04-24 13:53:27 UTC (rev 1883)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/languages/pt.php	2006-04-24 15:21:39 UTC (rev 1884)
@@ -9,5 +9,9 @@
 $GLOBALS['t']['yes'] = 'Sim';
 $GLOBALS['t']['no'] = 'N&atilde;o';
 $GLOBALS['t']['schedule'] = 'Calend&aacute;rio';
+$GLOBALS['t']['delete'] = 'Eliminar';
+$GLOBALS['t']['toggle state'] = 'Inverter estado';
+$GLOBALS['t']['public'] = 'P&uacute;blico';
+$GLOBALS['t']['private'] = 'Privado';
 
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-04-24 13:53:27 UTC (rev 1883)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-04-24 15:21:39 UTC (rev 1884)
@@ -77,8 +77,8 @@
 			$templates = new YDCMTemplates();
 
 			// create 'template pack' options
-			$template_pack = array(	'pack'	=> t('use templatepack') .' ('. $templates->template_pack() .')',
-									0		=> t('use custom template') );
+			$template_pack = array(	1	=> t('use templatepack') .' ('. $templates->template_pack() .')',
+									0	=> t('use custom template') );
 	
 			// create form object
 			$form = new YDForm( YDConfig::get( 'YDCMPAGE_FORMPAGE' ) );

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php	2006-04-24 13:53:27 UTC (rev 1883)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php	2006-04-24 15:21:39 UTC (rev 1884)
@@ -9,6 +9,7 @@
 $GLOBALS['t']['page_startdate'] = 'Start date';
 $GLOBALS['t']['page_enddate'] = 'End date';
 $GLOBALS['t']['page_templates'] = 'Templates';
+$GLOBALS['t']['page_template'] = 'Template';
 $GLOBALS['t']['page_metatags'] = 'Metatags';
 $GLOBALS['t']['page_description'] = 'Description';
 $GLOBALS['t']['page_keywords'] = 'Keywords';
@@ -23,5 +24,8 @@
 $GLOBALS['t']['page access'] = 'Access';
 $GLOBALS['t']['new page'] = 'New page';
 $GLOBALS['t']['edit page'] = 'Edit page';
+$GLOBALS['t']['add page'] = 'Add page';
+$GLOBALS['t']['use custom template'] = 'Use custom template';
+$GLOBALS['t']['use templatepack'] = 'Use template pack';
 
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/pt.php	2006-04-24 13:53:27 UTC (rev 1883)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/pt.php	2006-04-24 15:21:39 UTC (rev 1884)
@@ -9,6 +9,7 @@
 $GLOBALS['t']['page_startdate'] = 'Data inicial';
 $GLOBALS['t']['page_enddate'] = 'Data final';
 $GLOBALS['t']['page_templates'] = 'Templates';
+$GLOBALS['t']['page_template'] = 'Template';
 $GLOBALS['t']['page_metatags'] = 'Metatags';
 $GLOBALS['t']['page_description'] = 'Descri&ccedil;&atilde;o';
 $GLOBALS['t']['page_keywords'] = 'Keywords';
@@ -23,5 +24,8 @@
 $GLOBALS['t']['page access'] = 'Acesso';
 $GLOBALS['t']['new page'] = 'Nova p&aacute;gina';
 $GLOBALS['t']['edit page'] = 'Editar p&aacute;gina';
+$GLOBALS['t']['add page'] = 'Adicionar p&aacute;gina';
+$GLOBALS['t']['use custom template'] = 'Usar template especial';
+$GLOBALS['t']['use templatepack'] = 'Usar template pack';
 
 ?>
\ No newline at end of file



From ximian at berlios.de  Mon Apr 24 18:01:27 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 24 Apr 2006 18:01:27 +0200
Subject: [ydf-devel] r1885 - YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent
Message-ID: <200604241601.k3OG1RM0017432@sheep.berlios.de>

Author: ximian
Date: 2006-04-24 18:01:15 +0200 (Mon, 24 Apr 2006)
New Revision: 1885

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql
Log:
- fixed rootmenu name (YDCMRootmenu instead of YDCMMenu) in db scheme
- added YDCMRootmenu items that matches tree elements already defined

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml	2006-04-24 15:21:39 UTC (rev 1884)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml	2006-04-24 16:01:15 UTC (rev 1885)
@@ -1004,7 +1004,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1519" Tablename="YDCMMenu" PrevTableName="Table_21" XPos="360" YPos="680" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="31" >
+<TABLE ID="1519" Tablename="YDCMRootmenu" PrevTableName="Table_21" XPos="360" YPos="680" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="31" >
 <COLUMNS>
 <COLUMN ID="1521" ColName="component_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql	2006-04-24 15:21:39 UTC (rev 1884)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql	2006-04-24 16:01:15 UTC (rev 1885)
@@ -39,7 +39,12 @@
 INSERT INTO `ydcmpage` VALUES (5, 10, 'en', 1, 'Generators', '', '', 0, '', 0, '', '');
 INSERT INTO `ydcmpage` VALUES (6, 11, 'all', 1, 'Portals for all', '', '', 0, '', 0, '', '');
 
+INSERT INTO `ydcmrootmenu` VALUES (1, 2, 'all', 'my menu paste');
+INSERT INTO `ydcmrootmenu` VALUES (2, 3, 'en',  'documentation in EN');
+INSERT INTO `ydcmrootmenu` VALUES (3, 4, 'pt',  'PT books menu');
+INSERT INTO `ydcmrootmenu` VALUES (4, 8, 'all', 'links menu');
 
+
 INSERT INTO `ydcmusers` VALUES (2,0,0,0,0,'admin','21232f297a57a5a743894a0e4a801fc3','name','email at test.com','a','en',1,NULL,NULL,7,'2006-04-23 17:02:27','2006-04-23 17:02:34',0,'0000-00-00 00:00:00');
 
 



From ximian at berlios.de  Mon Apr 24 18:09:27 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 24 Apr 2006 18:09:27 +0200
Subject: [ydf-devel] r1886 - YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent
Message-ID: <200604241609.k3OG9RbJ019920@sheep.berlios.de>

Author: ximian
Date: 2006-04-24 18:09:00 +0200 (Mon, 24 Apr 2006)
New Revision: 1886

Added:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner.png
Log:
- added db scheme image DBDesigner.png ( exported by DBDesigner4 )

Added: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner.png
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From francisco at fusemail.com  Tue Apr 25 01:57:28 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Tue, 25 Apr 2006 00:57:28 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4aef63030604190824o6d113337u86698b5d363e6587@mail.gmail.com>
References: <444518AC.1080102@fusemail.com>	 <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com>	 <44460860.1070605@fusemail.com> <44460F58.4000707@fusemail.com>	 <4aef63030604190344u7d6786dcheae8153c8bb855fe@mail.gmail.com>	 <44461995.9010604@fusemail.com>	 <4aef63030604190437j526a0d7bl2bba2da175699cf1@mail.gmail.com>	 <4446452F.1060102@fusemail.com> <4aef63030604190824o6d113337u86698b5d363e6587@mail.gmail.com>
Message-ID: <444D65E8.2070401@fusemail.com>

Hi Pieter

Sorry but this email was in my spam box until now (i don't know whay but..)

> a few things:
>  
> - I would keep the CMS components in a different directory than the


.. "addons" right? No problem at all


> - I like the fact that the components should have a predefined prefix 
> (preferably configurable)

Sure.. but that depends on your instalation script. DB table handling 
should be completly transparent (eg, that's way we have the PREFIX 
YDConfig set for dbs.. i don't know if it's working with 
YDDatabaseObject but it doesn't seems difficult to implement).


> - Extending YDDatabaseObject seems like a good idea. How will different 
> languages be handled with that?


There are 2 types of components: standard and non-standard.
- Standard components are components that are related with _content_ 
(eg, page, guestbook, ...)
- Non-standard components are normal (?) components (eg, newsletter 
sending, visitors statistics..) and these are not related to content

Because standard components are related to content, they are 
automatically related with the content tree and the language management. 
And the abstract Component object will care about that because it 
extends YDDatabaseObject (for db table relations management, eg with 
languages) and uses an internal YDDatabaseTree (for node management).


> - Do we really need the DBDesigner4 files, or are the SQL files enough?


DBDesigner4 is the only (free) way i can think of manage a db scheme. 
Instead of lots of separated sql files you will have just 1 file. Btw, 
with DBDesigner4:
- you can create the separated sql files you want (selecting tables to 
export)
- you can visually manage tables and relations
- you can export directly to your local development db

.. the only feature i miss is be able to store example data (that's way 
i created the 'inserts.sql' file.


> - The language files are only for the common strings, right, not for the 
> actual contents (such as title, body, ...)

No.
- Each component has it's own language files (eg, YDCMPage has 
translations for it's own form elements: 'title', 'body'..., form 
validation rules: 'title is required'...)
and
- There is one component YDCMLanguages that contains the common strings 
(eg: 'yes', 'copy', 'delete', 'exit'..)


> - Adding the components example is definitely a good way to show how 
> this works.


Currently i'm developing the YDCMPage component.

regards
Francisco A


>  
> On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com 
> <mailto:francisco at fusemail.com>> wrote:
> 
>     Pieter,
> 
>      > I like your proposed way of seeing everything as components. I think
>      > that this is a very good basis for a CMS application.
>      >
>      > I guess that if we add the building blocks for that to the framework,
>      > and create an example with one or two modules, people can start
>      > developing their own modules. The modules in the end are where
>     most of
>      > the logic is stored, while the underlying CMS framework is just
>     making
>      > it easier to hook everything up. The admin side of things should
>     be part
>      > of the framework as well as we don't want users to create this from
>      > scratch.
> 
>     I think that we can start to develop some draft ;) but i think it's
>     better to define some standard rules for it.
>     I propose that:
> 
>     - components should be created inside the YDF addons directory (like a
>     standard addon)... or a specific YDCM directory?
> 
>     - each component should have a name with prefix YDCM and be defined
>     inside a directory with same name (like any YDF addon but specific for
>     CM). Eg: component 'page' should be defined as YDCMPage.php inside a
>     directory YDCMPage.
> 
>     - each component extends YDDatabaseObject (or a class that we can create
>     that defines an abstract component) and has (at least) a table name with
>     same name.
> 
>     - we should have a DBDesigner4 file that defined the db scheme of _all_
>     current components and not a separated file (or sql file) for each
>     component. Because we have an integrated environment with relations it's
>     not recommended to create a sql/DBDesigner4 file for each one. Btw, with
>     DBDesigner4 we can export sql files individually ;) and it's free.
> 
>     - inside each component directory we must create a "languages"
>     directory
>     that stores filenames about translations (when they are used in
>     component). I propose that a filename here should have the same name as
>     locale (eg, english filename is "en.php", portugueses filename is "
>     pt.php").
> 
>     - in YDF example directory we can create the component example directory
>     (that demonstrates the visitors and administration side). Inside that
>     directory, a template directory with the correspondent templates.
> 
> 
>     ... and i think we can start it.
> 
> 
>     What you think?
> 
>     Francisco A
> 
>      > We can leave the choice then to the users whether they want to
>     share out
>      > their custom modules with other users or not.
>      >
>      > Cheers,
>      >
>      >
>      > pieter
>      >
>      > On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      > <mailto: francisco at fusemail.com <mailto:francisco at fusemail.com>>>
>     wrote:
>      >
>      >     Pieter,
>      >      > Looks really cool for a way of working. Are you planning
>     to share
>      >     this
>      >      > with the other Yellow Duck Users?
>      >      >
>      >     I think this is a specific way of doing things because almost
>     all cms
>      >     share a common structure and this is very different.. and if
>     YFcm start
>      >     with it all components must be created with this structure in
>     mind..
>      >     and
>      >     i don't know your feedback about it.
>      >
>      >     About sharing.. no problem at all. Languages and dbObject
>     logic (read:
>      >     the main parts) are the most difficult part because have all
>     component
>      >     operations.. pHObject and templating is different because each
>      >     aplication has it's own way of presentation.. but i think we
>     should
>      >     create a generic "pHObject" (read: a class and a template
>     directory to
>      >     show how the component works).
>      >
>      >     What do you think?
>      >
>      >     Francisco A
>      >
>      >      > pieter
>      >      >
>      >      > On 4/19/06, *Francisco Azevedo* < francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>
>      >      > <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com> <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>>>>
>      >     wrote:
>      >      >
>      >      >     img Zip
>      >      >
>      >      >     Francisco A
>      >      >
>      >      >
>      >      >
>      >      >
>      >      >
>      >      > --
>      >      > pieter claerhout . pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>
>      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
>     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>
>      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>>
>      >      > . http://www.yellowduck.be/
>      >
>      >     _______________________________________________
>      >     YDFramework-devel mailing list
>      >     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto:YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>
>      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
>      >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
>      >
>      >
>      >
>      >
>      > --
>      > pieter claerhout . pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>> .
>      > http://www.yellowduck.be/
> 
>     _______________________________________________
>     YDFramework-devel mailing list
>     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> 
> 
> 
> 
> -- 
> pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> . 
> http://www.yellowduck.be/



From pieter at yellowduck.be  Tue Apr 25 13:19:57 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Tue, 25 Apr 2006 13:19:57 +0200
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <444D65E8.2070401@fusemail.com>
References: <444518AC.1080102@fusemail.com>
	 <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com>
	 <44460860.1070605@fusemail.com> <44460F58.4000707@fusemail.com>
	 <4aef63030604190344u7d6786dcheae8153c8bb855fe@mail.gmail.com>
	 <44461995.9010604@fusemail.com>
	 <4aef63030604190437j526a0d7bl2bba2da175699cf1@mail.gmail.com>
	 <4446452F.1060102@fusemail.com>
	 <4aef63030604190824o6d113337u86698b5d363e6587@mail.gmail.com>
	 <444D65E8.2070401@fusemail.com>
Message-ID: <4aef63030604250419h67f11459qd13ebd2264c01a5a@mail.gmail.com>

Hi Francisco,

you did manage to confuse me for a second. The framework does allow
multi-lingual content, right?

pieter


On 4/25/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
> Hi Pieter
>
> Sorry but this email was in my spam box until now (i don't know whay
> but..)
>
> > a few things:
> >
> > - I would keep the CMS components in a different directory than the
>
>
> .. "addons" right? No problem at all
>
>
> > - I like the fact that the components should have a predefined prefix
> > (preferably configurable)
>
> Sure.. but that depends on your instalation script. DB table handling
> should be completly transparent (eg, that's way we have the PREFIX
> YDConfig set for dbs.. i don't know if it's working with
> YDDatabaseObject but it doesn't seems difficult to implement).
>
>
> > - Extending YDDatabaseObject seems like a good idea. How will different
> > languages be handled with that?
>
>
> There are 2 types of components: standard and non-standard.
> - Standard components are components that are related with _content_
> (eg, page, guestbook, ...)
> - Non-standard components are normal (?) components (eg, newsletter
> sending, visitors statistics..) and these are not related to content
>
> Because standard components are related to content, they are
> automatically related with the content tree and the language management.
> And the abstract Component object will care about that because it
> extends YDDatabaseObject (for db table relations management, eg with
> languages) and uses an internal YDDatabaseTree (for node management).
>
>
> > - Do we really need the DBDesigner4 files, or are the SQL files enough?
>
>
> DBDesigner4 is the only (free) way i can think of manage a db scheme.
> Instead of lots of separated sql files you will have just 1 file. Btw,
> with DBDesigner4:
> - you can create the separated sql files you want (selecting tables to
> export)
> - you can visually manage tables and relations
> - you can export directly to your local development db
>
> .. the only feature i miss is be able to store example data (that's way
> i created the 'inserts.sql' file.
>
>
> > - The language files are only for the common strings, right, not for the
> > actual contents (such as title, body, ...)
>
> No.
> - Each component has it's own language files (eg, YDCMPage has
> translations for it's own form elements: 'title', 'body'..., form
> validation rules: 'title is required'...)
> and
> - There is one component YDCMLanguages that contains the common strings
> (eg: 'yes', 'copy', 'delete', 'exit'..)
>
>
> > - Adding the components example is definitely a good way to show how
> > this works.
>
>
> Currently i'm developing the YDCMPage component.
>
> regards
> Francisco A
>
>
> >
> > On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com
> > <mailto:francisco at fusemail.com>> wrote:
> >
> >     Pieter,
> >
> >      > I like your proposed way of seeing everything as components. I
> think
> >      > that this is a very good basis for a CMS application.
> >      >
> >      > I guess that if we add the building blocks for that to the
> framework,
> >      > and create an example with one or two modules, people can start
> >      > developing their own modules. The modules in the end are where
> >     most of
> >      > the logic is stored, while the underlying CMS framework is just
> >     making
> >      > it easier to hook everything up. The admin side of things should
> >     be part
> >      > of the framework as well as we don't want users to create this
> from
> >      > scratch.
> >
> >     I think that we can start to develop some draft ;) but i think it's
> >     better to define some standard rules for it.
> >     I propose that:
> >
> >     - components should be created inside the YDF addons directory (like
> a
> >     standard addon)... or a specific YDCM directory?
> >
> >     - each component should have a name with prefix YDCM and be defined
> >     inside a directory with same name (like any YDF addon but specific
> for
> >     CM). Eg: component 'page' should be defined as YDCMPage.php inside a
> >     directory YDCMPage.
> >
> >     - each component extends YDDatabaseObject (or a class that we can
> create
> >     that defines an abstract component) and has (at least) a table name
> with
> >     same name.
> >
> >     - we should have a DBDesigner4 file that defined the db scheme of
> _all_
> >     current components and not a separated file (or sql file) for each
> >     component. Because we have an integrated environment with relations
> it's
> >     not recommended to create a sql/DBDesigner4 file for each one. Btw,
> with
> >     DBDesigner4 we can export sql files individually ;) and it's free.
> >
> >     - inside each component directory we must create a "languages"
> >     directory
> >     that stores filenames about translations (when they are used in
> >     component). I propose that a filename here should have the same name
> as
> >     locale (eg, english filename is "en.php", portugueses filename is "
> >     pt.php").
> >
> >     - in YDF example directory we can create the component example
> directory
> >     (that demonstrates the visitors and administration side). Inside
> that
> >     directory, a template directory with the correspondent templates.
> >
> >
> >     ... and i think we can start it.
> >
> >
> >     What you think?
> >
> >     Francisco A
> >
> >      > We can leave the choice then to the users whether they want to
> >     share out
> >      > their custom modules with other users or not.
> >      >
> >      > Cheers,
> >      >
> >      >
> >      > pieter
> >      >
> >      > On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      > <mailto: francisco at fusemail.com <mailto:francisco at fusemail.com>>>
> >     wrote:
> >      >
> >      >     Pieter,
> >      >      > Looks really cool for a way of working. Are you planning
> >     to share
> >      >     this
> >      >      > with the other Yellow Duck Users?
> >      >      >
> >      >     I think this is a specific way of doing things because almost
> >     all cms
> >      >     share a common structure and this is very different.. and if
> >     YFcm start
> >      >     with it all components must be created with this structure in
> >     mind..
> >      >     and
> >      >     i don't know your feedback about it.
> >      >
> >      >     About sharing.. no problem at all. Languages and dbObject
> >     logic (read:
> >      >     the main parts) are the most difficult part because have all
> >     component
> >      >     operations.. pHObject and templating is different because
> each
> >      >     aplication has it's own way of presentation.. but i think we
> >     should
> >      >     create a generic "pHObject" (read: a class and a template
> >     directory to
> >      >     show how the component works).
> >      >
> >      >     What do you think?
> >      >
> >      >     Francisco A
> >      >
> >      >      > pieter
> >      >      >
> >      >      > On 4/19/06, *Francisco Azevedo* < francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com
> >>
> >      >      > <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com> <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>>>>
> >      >     wrote:
> >      >      >
> >      >      >     img Zip
> >      >      >
> >      >      >     Francisco A
> >      >      >
> >      >      >
> >      >      >
> >      >      >
> >      >      >
> >      >      > --
> >      >      > pieter claerhout . pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>
> >      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
> >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>
> >      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>>
> >      >      > . http://www.yellowduck.be/
> >      >
> >      >     _______________________________________________
> >      >     YDFramework-devel mailing list
> >      >     YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >      >     <mailto:YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>>
> >      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> >      >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> >      >
> >      >
> >      >
> >      >
> >      > --
> >      > pieter claerhout . pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>> .
> >      > http://www.yellowduck.be/
> >
> >     _______________________________________________
> >     YDFramework-devel mailing list
> >     YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >
> >
> >
> >
> > --
> > pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> .
> > http://www.yellowduck.be/
>
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
>



--
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060425/3edfa925/attachment.html>

From francisco at fusemail.com  Tue Apr 25 15:13:55 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Tue, 25 Apr 2006 14:13:55 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4aef63030604250419h67f11459qd13ebd2264c01a5a@mail.gmail.com>
References: <444518AC.1080102@fusemail.com>	 <4aef63030604181214u20f2e20aw38140fa1a0278266@mail.gmail.com>	 <44460860.1070605@fusemail.com> <44460F58.4000707@fusemail.com>	 <4aef63030604190344u7d6786dcheae8153c8bb855fe@mail.gmail.com>	 <44461995.9010604@fusemail.com>	 <4aef63030604190437j526a0d7bl2bba2da175699cf1@mail.gmail.com>	 <4446452F.1060102@fusemail.com>	 <4aef63030604190824o6d113337u86698b5d363e6587@mail.gmail.com>	 <444D65E8.2070401@fusemail.com> <4aef63030604250419h67f11459qd13ebd2264c01a5a@mail.gmail.com>
Message-ID: <444E2093.7060105@fusemail.com>

Hi Pieter

> you did manage to confuse me for a second. 

ehehehe... omg.


> The framework does allow multi-lingual content, right?

Yes.
Each component has automatically Node properties and multi-langual 
properties.

Francisco A


> pieter
> 
>  
> On 4/25/06, *Francisco Azevedo* <francisco at fusemail.com 
> <mailto:francisco at fusemail.com>> wrote:
> 
>     Hi Pieter
> 
>     Sorry but this email was in my spam box until now (i don't know whay
>     but..)
> 
>      > a few things:
>      >
>      > - I would keep the CMS components in a different directory than the
> 
> 
>     .. "addons" right? No problem at all
> 
> 
>      > - I like the fact that the components should have a predefined
>     prefix
>      > (preferably configurable)
> 
>     Sure.. but that depends on your instalation script. DB table handling
>     should be completly transparent (eg, that's way we have the PREFIX
>     YDConfig set for dbs.. i don't know if it's working with
>     YDDatabaseObject but it doesn't seems difficult to implement).
> 
> 
>      > - Extending YDDatabaseObject seems like a good idea. How will
>     different
>      > languages be handled with that?
> 
> 
>     There are 2 types of components: standard and non-standard.
>     - Standard components are components that are related with _content_
>     (eg, page, guestbook, ...)
>     - Non-standard components are normal (?) components (eg, newsletter
>     sending, visitors statistics..) and these are not related to content
> 
>     Because standard components are related to content, they are
>     automatically related with the content tree and the language management.
>     And the abstract Component object will care about that because it
>     extends YDDatabaseObject (for db table relations management, eg with
>     languages) and uses an internal YDDatabaseTree (for node management).
> 
> 
>      > - Do we really need the DBDesigner4 files, or are the SQL files
>     enough?
> 
> 
>     DBDesigner4 is the only (free) way i can think of manage a db scheme.
>     Instead of lots of separated sql files you will have just 1 file. Btw,
>     with DBDesigner4:
>     - you can create the separated sql files you want (selecting tables to
>     export)
>     - you can visually manage tables and relations
>     - you can export directly to your local development db
> 
>     .. the only feature i miss is be able to store example data (that's way
>     i created the 'inserts.sql' file.
> 
> 
>      > - The language files are only for the common strings, right, not
>     for the
>      > actual contents (such as title, body, ...)
> 
>     No.
>     - Each component has it's own language files (eg, YDCMPage has
>     translations for it's own form elements: 'title', 'body'..., form
>     validation rules: 'title is required'...)
>     and
>     - There is one component YDCMLanguages that contains the common strings
>     (eg: 'yes', 'copy', 'delete', 'exit'..)
> 
> 
>      > - Adding the components example is definitely a good way to show how
>      > this works.
> 
> 
>     Currently i'm developing the YDCMPage component.
> 
>     regards
>     Francisco A
> 
> 
>      >
>      > On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      > <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>>
>     wrote:
>      >
>      >     Pieter,
>      >
>      >      > I like your proposed way of seeing everything as
>     components. I think
>      >      > that this is a very good basis for a CMS application.
>      >      >
>      >      > I guess that if we add the building blocks for that to the
>     framework,
>      >      > and create an example with one or two modules, people can
>     start
>      >      > developing their own modules. The modules in the end are where
>      >     most of
>      >      > the logic is stored, while the underlying CMS framework is
>     just
>      >     making
>      >      > it easier to hook everything up. The admin side of things
>     should
>      >     be part
>      >      > of the framework as well as we don't want users to create
>     this from
>      >      > scratch.
>      >
>      >     I think that we can start to develop some draft ;) but i
>     think it's
>      >     better to define some standard rules for it.
>      >     I propose that:
>      >
>      >     - components should be created inside the YDF addons
>     directory (like a
>      >     standard addon)... or a specific YDCM directory?
>      >
>      >     - each component should have a name with prefix YDCM and be
>     defined
>      >     inside a directory with same name (like any YDF addon but
>     specific for
>      >     CM). Eg: component 'page' should be defined as YDCMPage.php
>     inside a
>      >     directory YDCMPage.
>      >
>      >     - each component extends YDDatabaseObject (or a class that we
>     can create
>      >     that defines an abstract component) and has (at least) a
>     table name with
>      >     same name.
>      >
>      >     - we should have a DBDesigner4 file that defined the db
>     scheme of _all_
>      >     current components and not a separated file (or sql file) for
>     each
>      >     component. Because we have an integrated environment with
>     relations it's
>      >     not recommended to create a sql/DBDesigner4 file for each
>     one. Btw, with
>      >     DBDesigner4 we can export sql files individually ;) and it's
>     free.
>      >
>      >     - inside each component directory we must create a "languages"
>      >     directory
>      >     that stores filenames about translations (when they are used in
>      >     component). I propose that a filename here should have the
>     same name as
>      >     locale (eg, english filename is " en.php", portugueses
>     filename is "
>      >     pt.php").
>      >
>      >     - in YDF example directory we can create the component
>     example directory
>      >     (that demonstrates the visitors and administration side).
>     Inside that
>      >     directory, a template directory with the correspondent templates.
>      >
>      >
>      >     ... and i think we can start it.
>      >
>      >
>      >     What you think?
>      >
>      >     Francisco A
>      >
>      >      > We can leave the choice then to the users whether they want to
>      >     share out
>      >      > their custom modules with other users or not.
>      >      >
>      >      > Cheers,
>      >      >
>      >      >
>      >      > pieter
>      >      >
>      >      > On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto: francisco at fusemail.com <mailto:francisco at fusemail.com>>
>      >      > <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com> <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>>>>
>      >     wrote:
>      >      >
>      >      >     Pieter,
>      >      >      > Looks really cool for a way of working. Are you
>     planning
>      >     to share
>      >      >     this
>      >      >      > with the other Yellow Duck Users?
>      >      >      >
>      >      >     I think this is a specific way of doing things because
>     almost
>      >     all cms
>      >      >     share a common structure and this is very different..
>     and if
>      >     YFcm start
>      >      >     with it all components must be created with this
>     structure in
>      >     mind..
>      >      >     and
>      >      >     i don't know your feedback about it.
>      >      >
>      >      >     About sharing.. no problem at all. Languages and dbObject
>      >     logic (read:
>      >      >     the main parts) are the most difficult part because
>     have all
>      >     component
>      >      >     operations.. pHObject and templating is different
>     because each
>      >      >     aplication has it's own way of presentation.. but i
>     think we
>      >     should
>      >      >     create a generic "pHObject" (read: a class and a template
>      >     directory to
>      >      >     show how the component works).
>      >      >
>      >      >     What do you think?
>      >      >
>      >      >     Francisco A
>      >      >
>      >      >      > pieter
>      >      >      >
>      >      >      > On 4/19/06, *Francisco Azevedo* <
>     francisco at fusemail.com <mailto:francisco at fusemail.com>
>      >     <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>
>      >      >     <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com> <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>>>
>      >      >      > <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>> <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>>>>>
>      >      >     wrote:
>      >      >      >
>      >      >      >     img Zip
>      >      >      >
>      >      >      >     Francisco A
>      >      >      >
>      >      >      >
>      >      >      >
>      >      >      >
>      >      >      >
>      >      >      > --
>      >      >      > pieter claerhout . pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>
>      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
>      >      >     <mailto: pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>>>
>      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>
>     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
>      >      >     <mailto: pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>>>>
>      >      >      > . http://www.yellowduck.be/
>      >      >
>      >      >     _______________________________________________
>      >      >     YDFramework-devel mailing list
>      >      >     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto:YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>
>      >      >     <mailto:YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto:YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>>
>      >      >    
>     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
>      >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
>      >      >     <
>     http://lists.berlios.de/mailman/listinfo/ydframework-devel>
>      >      >
>      >      >
>      >      >
>      >      >
>      >      > --
>      >      > pieter claerhout . pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>
>      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
>     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>
>      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>>> .
>      >      > http://www.yellowduck.be/
>      >
>      >     _______________________________________________
>      >     YDFramework-devel mailing list
>      >     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto:YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>
>      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>      >
>      >
>      >
>      >
>      > --
>      > pieter claerhout . pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>> .
>      > http://www.yellowduck.be/
> 
>     _______________________________________________
>     YDFramework-devel mailing list
>     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> 
> 
> 
> 
> -- 
> pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> . 
> http://www.yellowduck.be/



From pieter at yellowduck.be  Tue Apr 25 16:00:24 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Tue, 25 Apr 2006 16:00:24 +0200
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <444E2093.7060105@fusemail.com>
References: <444518AC.1080102@fusemail.com> <44460F58.4000707@fusemail.com>
	 <4aef63030604190344u7d6786dcheae8153c8bb855fe@mail.gmail.com>
	 <44461995.9010604@fusemail.com>
	 <4aef63030604190437j526a0d7bl2bba2da175699cf1@mail.gmail.com>
	 <4446452F.1060102@fusemail.com>
	 <4aef63030604190824o6d113337u86698b5d363e6587@mail.gmail.com>
	 <444D65E8.2070401@fusemail.com>
	 <4aef63030604250419h67f11459qd13ebd2264c01a5a@mail.gmail.com>
	 <444E2093.7060105@fusemail.com>
Message-ID: <4aef63030604250700v16e434c9k5ab03f963efbd296@mail.gmail.com>

When do you expect to have a first "alpha" version we can start using?

regards,


pieter

On 4/25/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
> Hi Pieter
>
> > you did manage to confuse me for a second.
>
> ehehehe... omg.
>
>
> > The framework does allow multi-lingual content, right?
>
> Yes.
> Each component has automatically Node properties and multi-langual
> properties.
>
> Francisco A
>
>
> > pieter
> >
> >
> > On 4/25/06, *Francisco Azevedo* <francisco at fusemail.com
> > <mailto:francisco at fusemail.com>> wrote:
> >
> >     Hi Pieter
> >
> >     Sorry but this email was in my spam box until now (i don't know whay
> >     but..)
> >
> >      > a few things:
> >      >
> >      > - I would keep the CMS components in a different directory than
> the
> >
> >
> >     .. "addons" right? No problem at all
> >
> >
> >      > - I like the fact that the components should have a predefined
> >     prefix
> >      > (preferably configurable)
> >
> >     Sure.. but that depends on your instalation script. DB table
> handling
> >     should be completly transparent (eg, that's way we have the PREFIX
> >     YDConfig set for dbs.. i don't know if it's working with
> >     YDDatabaseObject but it doesn't seems difficult to implement).
> >
> >
> >      > - Extending YDDatabaseObject seems like a good idea. How will
> >     different
> >      > languages be handled with that?
> >
> >
> >     There are 2 types of components: standard and non-standard.
> >     - Standard components are components that are related with _content_
> >     (eg, page, guestbook, ...)
> >     - Non-standard components are normal (?) components (eg, newsletter
> >     sending, visitors statistics..) and these are not related to content
> >
> >     Because standard components are related to content, they are
> >     automatically related with the content tree and the language
> management.
> >     And the abstract Component object will care about that because it
> >     extends YDDatabaseObject (for db table relations management, eg with
> >     languages) and uses an internal YDDatabaseTree (for node
> management).
> >
> >
> >      > - Do we really need the DBDesigner4 files, or are the SQL files
> >     enough?
> >
> >
> >     DBDesigner4 is the only (free) way i can think of manage a db
> scheme.
> >     Instead of lots of separated sql files you will have just 1 file.
> Btw,
> >     with DBDesigner4:
> >     - you can create the separated sql files you want (selecting tables
> to
> >     export)
> >     - you can visually manage tables and relations
> >     - you can export directly to your local development db
> >
> >     .. the only feature i miss is be able to store example data (that's
> way
> >     i created the 'inserts.sql' file.
> >
> >
> >      > - The language files are only for the common strings, right, not
> >     for the
> >      > actual contents (such as title, body, ...)
> >
> >     No.
> >     - Each component has it's own language files (eg, YDCMPage has
> >     translations for it's own form elements: 'title', 'body'..., form
> >     validation rules: 'title is required'...)
> >     and
> >     - There is one component YDCMLanguages that contains the common
> strings
> >     (eg: 'yes', 'copy', 'delete', 'exit'..)
> >
> >
> >      > - Adding the components example is definitely a good way to show
> how
> >      > this works.
> >
> >
> >     Currently i'm developing the YDCMPage component.
> >
> >     regards
> >     Francisco A
> >
> >
> >      >
> >      > On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      > <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>>
> >     wrote:
> >      >
> >      >     Pieter,
> >      >
> >      >      > I like your proposed way of seeing everything as
> >     components. I think
> >      >      > that this is a very good basis for a CMS application.
> >      >      >
> >      >      > I guess that if we add the building blocks for that to the
> >     framework,
> >      >      > and create an example with one or two modules, people can
> >     start
> >      >      > developing their own modules. The modules in the end are
> where
> >      >     most of
> >      >      > the logic is stored, while the underlying CMS framework is
> >     just
> >      >     making
> >      >      > it easier to hook everything up. The admin side of things
> >     should
> >      >     be part
> >      >      > of the framework as well as we don't want users to create
> >     this from
> >      >      > scratch.
> >      >
> >      >     I think that we can start to develop some draft ;) but i
> >     think it's
> >      >     better to define some standard rules for it.
> >      >     I propose that:
> >      >
> >      >     - components should be created inside the YDF addons
> >     directory (like a
> >      >     standard addon)... or a specific YDCM directory?
> >      >
> >      >     - each component should have a name with prefix YDCM and be
> >     defined
> >      >     inside a directory with same name (like any YDF addon but
> >     specific for
> >      >     CM). Eg: component 'page' should be defined as YDCMPage.php
> >     inside a
> >      >     directory YDCMPage.
> >      >
> >      >     - each component extends YDDatabaseObject (or a class that we
> >     can create
> >      >     that defines an abstract component) and has (at least) a
> >     table name with
> >      >     same name.
> >      >
> >      >     - we should have a DBDesigner4 file that defined the db
> >     scheme of _all_
> >      >     current components and not a separated file (or sql file) for
> >     each
> >      >     component. Because we have an integrated environment with
> >     relations it's
> >      >     not recommended to create a sql/DBDesigner4 file for each
> >     one. Btw, with
> >      >     DBDesigner4 we can export sql files individually ;) and it's
> >     free.
> >      >
> >      >     - inside each component directory we must create a
> "languages"
> >      >     directory
> >      >     that stores filenames about translations (when they are used
> in
> >      >     component). I propose that a filename here should have the
> >     same name as
> >      >     locale (eg, english filename is " en.php", portugueses
> >     filename is "
> >      >     pt.php").
> >      >
> >      >     - in YDF example directory we can create the component
> >     example directory
> >      >     (that demonstrates the visitors and administration side).
> >     Inside that
> >      >     directory, a template directory with the correspondent
> templates.
> >      >
> >      >
> >      >     ... and i think we can start it.
> >      >
> >      >
> >      >     What you think?
> >      >
> >      >     Francisco A
> >      >
> >      >      > We can leave the choice then to the users whether they
> want to
> >      >     share out
> >      >      > their custom modules with other users or not.
> >      >      >
> >      >      > Cheers,
> >      >      >
> >      >      >
> >      >      > pieter
> >      >      >
> >      >      > On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto: francisco at fusemail.com <mailto:
> francisco at fusemail.com>>
> >      >      > <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com> <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>>>>
> >      >     wrote:
> >      >      >
> >      >      >     Pieter,
> >      >      >      > Looks really cool for a way of working. Are you
> >     planning
> >      >     to share
> >      >      >     this
> >      >      >      > with the other Yellow Duck Users?
> >      >      >      >
> >      >      >     I think this is a specific way of doing things because
> >     almost
> >      >     all cms
> >      >      >     share a common structure and this is very different..
> >     and if
> >      >     YFcm start
> >      >      >     with it all components must be created with this
> >     structure in
> >      >     mind..
> >      >      >     and
> >      >      >     i don't know your feedback about it.
> >      >      >
> >      >      >     About sharing.. no problem at all. Languages and
> dbObject
> >      >     logic (read:
> >      >      >     the main parts) are the most difficult part because
> >     have all
> >      >     component
> >      >      >     operations.. pHObject and templating is different
> >     because each
> >      >      >     aplication has it's own way of presentation.. but i
> >     think we
> >      >     should
> >      >      >     create a generic "pHObject" (read: a class and a
> template
> >      >     directory to
> >      >      >     show how the component works).
> >      >      >
> >      >      >     What do you think?
> >      >      >
> >      >      >     Francisco A
> >      >      >
> >      >      >      > pieter
> >      >      >      >
> >      >      >      > On 4/19/06, *Francisco Azevedo* <
> >     francisco at fusemail.com <mailto:francisco at fusemail.com>
> >      >     <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com
> >>
> >      >      >     <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com> <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>>>
> >      >      >      > <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>> <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>>>>>
> >      >      >     wrote:
> >      >      >      >
> >      >      >      >     img Zip
> >      >      >      >
> >      >      >      >     Francisco A
> >      >      >      >
> >      >      >      >
> >      >      >      >
> >      >      >      >
> >      >      >      >
> >      >      >      > --
> >      >      >      > pieter claerhout . pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>
> >      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
> >      >      >     <mailto: pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>>>
> >      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>
> >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
> >      >      >     <mailto: pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>>>>
> >      >      >      > . http://www.yellowduck.be/
> >      >      >
> >      >      >     _______________________________________________
> >      >      >     YDFramework-devel mailing list
> >      >      >     YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >      >     <mailto:YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>>
> >      >      >     <mailto:YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >      >     <mailto:YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>>>
> >      >      >
> >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> >      >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> >      >      >     <
> >     http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> >      >      >
> >      >      >
> >      >      >
> >      >      >
> >      >      > --
> >      >      > pieter claerhout . pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>
> >      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
> >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>
> >      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>>>
> .
> >      >      > http://www.yellowduck.be/
> >      >
> >      >     _______________________________________________
> >      >     YDFramework-devel mailing list
> >      >     YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >      >     <mailto:YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>>
> >      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >      >
> >      >
> >      >
> >      >
> >      > --
> >      > pieter claerhout . pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>> .
> >      > http://www.yellowduck.be/
> >
> >     _______________________________________________
> >     YDFramework-devel mailing list
> >     YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> >
> >
> >
> >
> > --
> > pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> .
> > http://www.yellowduck.be/
>
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
>



--
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060425/c1e44806/attachment.html>

From francisco at fusemail.com  Tue Apr 25 16:14:05 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Tue, 25 Apr 2006 15:14:05 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4aef63030604250700v16e434c9k5ab03f963efbd296@mail.gmail.com>
References: <444518AC.1080102@fusemail.com> <44460F58.4000707@fusemail.com>	 <4aef63030604190344u7d6786dcheae8153c8bb855fe@mail.gmail.com>	 <44461995.9010604@fusemail.com>	 <4aef63030604190437j526a0d7bl2bba2da175699cf1@mail.gmail.com>	 <4446452F.1060102@fusemail.com>	 <4aef63030604190824o6d113337u86698b5d363e6587@mail.gmail.com>	 <444D65E8.2070401@fusemail.com>	 <4aef63030604250419h67f11459qd13ebd2264c01a5a@mail.gmail.com>	 <444E2093.7060105@fusemail.com> <4aef63030604250700v16e434c9k5ab03f963efbd296@mail.gmail.com>
Message-ID: <444E2EAD.3060601@fusemail.com>

> When do you expect to have a first "alpha" version we can start using?

I don't know when i get a apha version of it. All i know is that i'm 
delevoping it in the next steps:

- Base structure (db schemes, Abstract component class, tree class, 
language management) *we have a simple working version now

- User information component ( to get/change details of current admin ) 
*we have a simple working version now

- Menu component ( to render visitors menus ) *only a constructor 
without methods

- First component: page ( for handling simple html ) *started the admin 
part with good success. i think we have 30%

.. and these are APIs of the administration side

then we have:

- methods for use in visitors side (from page and menu component)

after that:

- complete the users component to handle user/permissions creation

- create simple visit and search statistics about visitors side

.. and i think we have a platform. then it's just about creating and 
adding components.


Francisco A



>  
> On 4/25/06, *Francisco Azevedo* <francisco at fusemail.com 
> <mailto:francisco at fusemail.com>> wrote:
> 
>     Hi Pieter
> 
>      > you did manage to confuse me for a second.
> 
>     ehehehe... omg.
> 
> 
>      > The framework does allow multi-lingual content, right?
> 
>     Yes.
>     Each component has automatically Node properties and multi-langual
>     properties.
> 
>     Francisco A
> 
> 
>      > pieter
>      >
>      >
>      > On 4/25/06, *Francisco Azevedo* < francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      > <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>>
>     wrote:
>      >
>      >     Hi Pieter
>      >
>      >     Sorry but this email was in my spam box until now (i don't
>     know whay
>      >     but..)
>      >
>      >      > a few things:
>      >      >
>      >      > - I would keep the CMS components in a different directory
>     than the
>      >
>      >
>      >     .. "addons" right? No problem at all
>      >
>      >
>      >      > - I like the fact that the components should have a predefined
>      >     prefix
>      >      > (preferably configurable)
>      >
>      >     Sure.. but that depends on your instalation script. DB table
>     handling
>      >     should be completly transparent (eg, that's way we have the
>     PREFIX
>      >     YDConfig set for dbs.. i don't know if it's working with
>      >     YDDatabaseObject but it doesn't seems difficult to implement).
>      >
>      >
>      >      > - Extending YDDatabaseObject seems like a good idea. How will
>      >     different
>      >      > languages be handled with that?
>      >
>      >
>      >     There are 2 types of components: standard and non-standard.
>      >     - Standard components are components that are related with
>     _content_
>      >     (eg, page, guestbook, ...)
>      >     - Non-standard components are normal (?) components (eg,
>     newsletter
>      >     sending, visitors statistics..) and these are not related to
>     content
>      >
>      >     Because standard components are related to content, they are
>      >     automatically related with the content tree and the language
>     management.
>      >     And the abstract Component object will care about that
>     because it
>      >     extends YDDatabaseObject (for db table relations management,
>     eg with
>      >     languages) and uses an internal YDDatabaseTree (for node
>     management).
>      >
>      >
>      >      > - Do we really need the DBDesigner4 files, or are the SQL
>     files
>      >     enough?
>      >
>      >
>      >     DBDesigner4 is the only (free) way i can think of manage a db
>     scheme.
>      >     Instead of lots of separated sql files you will have just 1
>     file. Btw,
>      >     with DBDesigner4:
>      >     - you can create the separated sql files you want (selecting
>     tables to
>      >     export)
>      >     - you can visually manage tables and relations
>      >     - you can export directly to your local development db
>      >
>      >     .. the only feature i miss is be able to store example data
>     (that's way
>      >     i created the 'inserts.sql' file.
>      >
>      >
>      >      > - The language files are only for the common strings,
>     right, not
>      >     for the
>      >      > actual contents (such as title, body, ...)
>      >
>      >     No.
>      >     - Each component has it's own language files (eg, YDCMPage has
>      >     translations for it's own form elements: 'title', 'body'...,
>     form
>      >     validation rules: 'title is required'...)
>      >     and
>      >     - There is one component YDCMLanguages that contains the
>     common strings
>      >     (eg: 'yes', 'copy', 'delete', 'exit'..)
>      >
>      >
>      >      > - Adding the components example is definitely a good way
>     to show how
>      >      > this works.
>      >
>      >
>      >     Currently i'm developing the YDCMPage component.
>      >
>      >     regards
>      >     Francisco A
>      >
>      >
>      >      >
>      >      > On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto: francisco at fusemail.com <mailto:francisco at fusemail.com>>
>      >      > <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com> <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>>>>
>      >     wrote:
>      >      >
>      >      >     Pieter,
>      >      >
>      >      >      > I like your proposed way of seeing everything as
>      >     components. I think
>      >      >      > that this is a very good basis for a CMS application.
>      >      >      >
>      >      >      > I guess that if we add the building blocks for that
>     to the
>      >     framework,
>      >      >      > and create an example with one or two modules,
>     people can
>      >     start
>      >      >      > developing their own modules. The modules in the
>     end are where
>      >      >     most of
>      >      >      > the logic is stored, while the underlying CMS
>     framework is
>      >     just
>      >      >     making
>      >      >      > it easier to hook everything up. The admin side of
>     things
>      >     should
>      >      >     be part
>      >      >      > of the framework as well as we don't want users to
>     create
>      >     this from
>      >      >      > scratch.
>      >      >
>      >      >     I think that we can start to develop some draft ;) but i
>      >     think it's
>      >      >     better to define some standard rules for it.
>      >      >     I propose that:
>      >      >
>      >      >     - components should be created inside the YDF addons
>      >     directory (like a
>      >      >     standard addon)... or a specific YDCM directory?
>      >      >
>      >      >     - each component should have a name with prefix YDCM
>     and be
>      >     defined
>      >      >     inside a directory with same name (like any YDF addon but
>      >     specific for
>      >      >     CM). Eg: component 'page' should be defined as
>     YDCMPage.php
>      >     inside a
>      >      >     directory YDCMPage.
>      >      >
>      >      >     - each component extends YDDatabaseObject (or a class
>     that we
>      >     can create
>      >      >     that defines an abstract component) and has (at least) a
>      >     table name with
>      >      >     same name.
>      >      >
>      >      >     - we should have a DBDesigner4 file that defined the db
>      >     scheme of _all_
>      >      >     current components and not a separated file (or sql
>     file) for
>      >     each
>      >      >     component. Because we have an integrated environment with
>      >     relations it's
>      >      >     not recommended to create a sql/DBDesigner4 file for each
>      >     one. Btw, with
>      >      >     DBDesigner4 we can export sql files individually ;)
>     and it's
>      >     free.
>      >      >
>      >      >     - inside each component directory we must create a
>     "languages"
>      >      >     directory
>      >      >     that stores filenames about translations (when they
>     are used in
>      >      >     component). I propose that a filename here should have
>     the
>      >     same name as
>      >      >     locale (eg, english filename is " en.php", portugueses
>      >     filename is "
>      >      >     pt.php").
>      >      >
>      >      >     - in YDF example directory we can create the component
>      >     example directory
>      >      >     (that demonstrates the visitors and administration side).
>      >     Inside that
>      >      >     directory, a template directory with the correspondent
>     templates.
>      >      >
>      >      >
>      >      >     ... and i think we can start it.
>      >      >
>      >      >
>      >      >     What you think?
>      >      >
>      >      >     Francisco A
>      >      >
>      >      >      > We can leave the choice then to the users whether
>     they want to
>      >      >     share out
>      >      >      > their custom modules with other users or not.
>      >      >      >
>      >      >      > Cheers,
>      >      >      >
>      >      >      >
>      >      >      > pieter
>      >      >      >
>      >      >      > On 4/19/06, *Francisco Azevedo* <
>     francisco at fusemail.com <mailto:francisco at fusemail.com>
>      >     <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>
>      >      >     <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com> <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>>>
>      >      >      > <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>> <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>>>>>
>      >      >     wrote:
>      >      >      >
>      >      >      >     Pieter,
>      >      >      >      > Looks really cool for a way of working. Are you
>      >     planning
>      >      >     to share
>      >      >      >     this
>      >      >      >      > with the other Yellow Duck Users?
>      >      >      >      >
>      >      >      >     I think this is a specific way of doing things
>     because
>      >     almost
>      >      >     all cms
>      >      >      >     share a common structure and this is very
>     different..
>      >     and if
>      >      >     YFcm start
>      >      >      >     with it all components must be created with this
>      >     structure in
>      >      >     mind..
>      >      >      >     and
>      >      >      >     i don't know your feedback about it.
>      >      >      >
>      >      >      >     About sharing.. no problem at all. Languages
>     and dbObject
>      >      >     logic (read:
>      >      >      >     the main parts) are the most difficult part because
>      >     have all
>      >      >     component
>      >      >      >     operations.. pHObject and templating is different
>      >     because each
>      >      >      >     aplication has it's own way of presentation.. but i
>      >     think we
>      >      >     should
>      >      >      >     create a generic "pHObject" (read: a class and
>     a template
>      >      >     directory to
>      >      >      >     show how the component works).
>      >      >      >
>      >      >      >     What do you think?
>      >      >      >
>      >      >      >     Francisco A
>      >      >      >
>      >      >      >      > pieter
>      >      >      >      >
>      >      >      >      > On 4/19/06, *Francisco Azevedo* <
>      >     francisco at fusemail.com <mailto:francisco at fusemail.com>
>     <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>
>      >      >     <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com> <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>>>
>      >      >      >     <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>> <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>>>
>      >      >      >      > <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>
>      >      >     <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>>> <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto: francisco at fusemail.com <mailto:francisco at fusemail.com>>
>      >      >     <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>>>>>>
>      >      >      >     wrote:
>      >      >      >      >
>      >      >      >      >     img Zip
>      >      >      >      >
>      >      >      >      >     Francisco A
>      >      >      >      >
>      >      >      >      >
>      >      >      >      >
>      >      >      >      >
>      >      >      >      >
>      >      >      >      > --
>      >      >      >      > pieter claerhout . pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>
>      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
>      >      >     <mailto: pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>>>
>      >      >      >     <mailto: pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>
>      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
>     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>
>      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>>>>
>      >      >     <mailto: pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>>
>      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>
>     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>>
>      >      >      >     <mailto: pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>
>      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
>     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>
>      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>>>>>
>      >      >      >      > . http://www.yellowduck.be/
>      >      >      >
>      >      >      >     _______________________________________________
>      >      >      >     YDFramework-devel mailing list
>      >      >      >     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto: YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>
>      >      >     <mailto:YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto: YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>>
>      >      >      >     <mailto:YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto: YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>
>      >      >     <mailto:YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto: YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>>>
>      >      >      >
>      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>      >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
>      >      >     <
>     http://lists.berlios.de/mailman/listinfo/ydframework-devel>
>      >      >      >     <
>      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>>
>      >      >      >
>      >      >      >
>      >      >      >
>      >      >      >
>      >      >      > --
>      >      >      > pieter claerhout . pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>
>      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
>      >      >     <mailto:pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto: pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>>>
>      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>
>     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
>      >      >     <mailto: pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>>>> .
>      >      >      > http://www.yellowduck.be/
>      >      >
>      >      >     _______________________________________________
>      >      >     YDFramework-devel mailing list
>      >      >     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto:YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>
>      >      >     <mailto: YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto:YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>>
>      >      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>      >      >
>      >      >
>      >      >
>      >      >
>      >      > --
>      >      > pieter claerhout . pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>
>      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
>     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>
>      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>> .
>      >      > http://www.yellowduck.be/
>      >
>      >     _______________________________________________
>      >     YDFramework-devel mailing list
>      >     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto: YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>
>      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>      >     < http://lists.berlios.de/mailman/listinfo/ydframework-devel>
>      >
>      >
>      >
>      >
>      > --
>      > pieter claerhout . pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto: pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>> .
>      > http://www.yellowduck.be/
> 
>     _______________________________________________
>     YDFramework-devel mailing list
>     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> 
> 
> 
> 
> -- 
> pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> . 
> http://www.yellowduck.be/



From pieter at yellowduck.be  Tue Apr 25 16:27:37 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Tue, 25 Apr 2006 16:27:37 +0200
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <444E2EAD.3060601@fusemail.com>
References: <444518AC.1080102@fusemail.com> <44461995.9010604@fusemail.com>
	 <4aef63030604190437j526a0d7bl2bba2da175699cf1@mail.gmail.com>
	 <4446452F.1060102@fusemail.com>
	 <4aef63030604190824o6d113337u86698b5d363e6587@mail.gmail.com>
	 <444D65E8.2070401@fusemail.com>
	 <4aef63030604250419h67f11459qd13ebd2264c01a5a@mail.gmail.com>
	 <444E2093.7060105@fusemail.com>
	 <4aef63030604250700v16e434c9k5ab03f963efbd296@mail.gmail.com>
	 <444E2EAD.3060601@fusemail.com>
Message-ID: <4aef63030604250727o434580ebi7ace3791f6860203@mail.gmail.com>

If there's anything we can help with, let us know.

Regards,


pieter

On 4/25/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
>
> > When do you expect to have a first "alpha" version we can start using?
>
> I don't know when i get a apha version of it. All i know is that i'm
> delevoping it in the next steps:
>
> - Base structure (db schemes, Abstract component class, tree class,
> language management) *we have a simple working version now
>
> - User information component ( to get/change details of current admin )
> *we have a simple working version now
>
> - Menu component ( to render visitors menus ) *only a constructor
> without methods
>
> - First component: page ( for handling simple html ) *started the admin
> part with good success. i think we have 30%
>
> .. and these are APIs of the administration side
>
> then we have:
>
> - methods for use in visitors side (from page and menu component)
>
> after that:
>
> - complete the users component to handle user/permissions creation
>
> - create simple visit and search statistics about visitors side
>
> .. and i think we have a platform. then it's just about creating and
> adding components.
>
>
> Francisco A
>
>
>
> >
> > On 4/25/06, *Francisco Azevedo* <francisco at fusemail.com
> > <mailto:francisco at fusemail.com>> wrote:
> >
> >     Hi Pieter
> >
> >      > you did manage to confuse me for a second.
> >
> >     ehehehe... omg.
> >
> >
> >      > The framework does allow multi-lingual content, right?
> >
> >     Yes.
> >     Each component has automatically Node properties and multi-langual
> >     properties.
> >
> >     Francisco A
> >
> >
> >      > pieter
> >      >
> >      >
> >      > On 4/25/06, *Francisco Azevedo* < francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      > <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>>
> >     wrote:
> >      >
> >      >     Hi Pieter
> >      >
> >      >     Sorry but this email was in my spam box until now (i don't
> >     know whay
> >      >     but..)
> >      >
> >      >      > a few things:
> >      >      >
> >      >      > - I would keep the CMS components in a different directory
> >     than the
> >      >
> >      >
> >      >     .. "addons" right? No problem at all
> >      >
> >      >
> >      >      > - I like the fact that the components should have a
> predefined
> >      >     prefix
> >      >      > (preferably configurable)
> >      >
> >      >     Sure.. but that depends on your instalation script. DB table
> >     handling
> >      >     should be completly transparent (eg, that's way we have the
> >     PREFIX
> >      >     YDConfig set for dbs.. i don't know if it's working with
> >      >     YDDatabaseObject but it doesn't seems difficult to
> implement).
> >      >
> >      >
> >      >      > - Extending YDDatabaseObject seems like a good idea. How
> will
> >      >     different
> >      >      > languages be handled with that?
> >      >
> >      >
> >      >     There are 2 types of components: standard and non-standard.
> >      >     - Standard components are components that are related with
> >     _content_
> >      >     (eg, page, guestbook, ...)
> >      >     - Non-standard components are normal (?) components (eg,
> >     newsletter
> >      >     sending, visitors statistics..) and these are not related to
> >     content
> >      >
> >      >     Because standard components are related to content, they are
> >      >     automatically related with the content tree and the language
> >     management.
> >      >     And the abstract Component object will care about that
> >     because it
> >      >     extends YDDatabaseObject (for db table relations management,
> >     eg with
> >      >     languages) and uses an internal YDDatabaseTree (for node
> >     management).
> >      >
> >      >
> >      >      > - Do we really need the DBDesigner4 files, or are the SQL
> >     files
> >      >     enough?
> >      >
> >      >
> >      >     DBDesigner4 is the only (free) way i can think of manage a db
> >     scheme.
> >      >     Instead of lots of separated sql files you will have just 1
> >     file. Btw,
> >      >     with DBDesigner4:
> >      >     - you can create the separated sql files you want (selecting
> >     tables to
> >      >     export)
> >      >     - you can visually manage tables and relations
> >      >     - you can export directly to your local development db
> >      >
> >      >     .. the only feature i miss is be able to store example data
> >     (that's way
> >      >     i created the 'inserts.sql' file.
> >      >
> >      >
> >      >      > - The language files are only for the common strings,
> >     right, not
> >      >     for the
> >      >      > actual contents (such as title, body, ...)
> >      >
> >      >     No.
> >      >     - Each component has it's own language files (eg, YDCMPage
> has
> >      >     translations for it's own form elements: 'title', 'body'...,
> >     form
> >      >     validation rules: 'title is required'...)
> >      >     and
> >      >     - There is one component YDCMLanguages that contains the
> >     common strings
> >      >     (eg: 'yes', 'copy', 'delete', 'exit'..)
> >      >
> >      >
> >      >      > - Adding the components example is definitely a good way
> >     to show how
> >      >      > this works.
> >      >
> >      >
> >      >     Currently i'm developing the YDCMPage component.
> >      >
> >      >     regards
> >      >     Francisco A
> >      >
> >      >
> >      >      >
> >      >      > On 4/19/06, *Francisco Azevedo* <francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto: francisco at fusemail.com <mailto:
> francisco at fusemail.com>>
> >      >      > <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com> <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>>>>
> >      >     wrote:
> >      >      >
> >      >      >     Pieter,
> >      >      >
> >      >      >      > I like your proposed way of seeing everything as
> >      >     components. I think
> >      >      >      > that this is a very good basis for a CMS
> application.
> >      >      >      >
> >      >      >      > I guess that if we add the building blocks for that
> >     to the
> >      >     framework,
> >      >      >      > and create an example with one or two modules,
> >     people can
> >      >     start
> >      >      >      > developing their own modules. The modules in the
> >     end are where
> >      >      >     most of
> >      >      >      > the logic is stored, while the underlying CMS
> >     framework is
> >      >     just
> >      >      >     making
> >      >      >      > it easier to hook everything up. The admin side of
> >     things
> >      >     should
> >      >      >     be part
> >      >      >      > of the framework as well as we don't want users to
> >     create
> >      >     this from
> >      >      >      > scratch.
> >      >      >
> >      >      >     I think that we can start to develop some draft ;) but
> i
> >      >     think it's
> >      >      >     better to define some standard rules for it.
> >      >      >     I propose that:
> >      >      >
> >      >      >     - components should be created inside the YDF addons
> >      >     directory (like a
> >      >      >     standard addon)... or a specific YDCM directory?
> >      >      >
> >      >      >     - each component should have a name with prefix YDCM
> >     and be
> >      >     defined
> >      >      >     inside a directory with same name (like any YDF addon
> but
> >      >     specific for
> >      >      >     CM). Eg: component 'page' should be defined as
> >     YDCMPage.php
> >      >     inside a
> >      >      >     directory YDCMPage.
> >      >      >
> >      >      >     - each component extends YDDatabaseObject (or a class
> >     that we
> >      >     can create
> >      >      >     that defines an abstract component) and has (at least)
> a
> >      >     table name with
> >      >      >     same name.
> >      >      >
> >      >      >     - we should have a DBDesigner4 file that defined the
> db
> >      >     scheme of _all_
> >      >      >     current components and not a separated file (or sql
> >     file) for
> >      >     each
> >      >      >     component. Because we have an integrated environment
> with
> >      >     relations it's
> >      >      >     not recommended to create a sql/DBDesigner4 file for
> each
> >      >     one. Btw, with
> >      >      >     DBDesigner4 we can export sql files individually ;)
> >     and it's
> >      >     free.
> >      >      >
> >      >      >     - inside each component directory we must create a
> >     "languages"
> >      >      >     directory
> >      >      >     that stores filenames about translations (when they
> >     are used in
> >      >      >     component). I propose that a filename here should have
> >     the
> >      >     same name as
> >      >      >     locale (eg, english filename is " en.php", portugueses
> >      >     filename is "
> >      >      >     pt.php").
> >      >      >
> >      >      >     - in YDF example directory we can create the component
> >      >     example directory
> >      >      >     (that demonstrates the visitors and administration
> side).
> >      >     Inside that
> >      >      >     directory, a template directory with the correspondent
> >     templates.
> >      >      >
> >      >      >
> >      >      >     ... and i think we can start it.
> >      >      >
> >      >      >
> >      >      >     What you think?
> >      >      >
> >      >      >     Francisco A
> >      >      >
> >      >      >      > We can leave the choice then to the users whether
> >     they want to
> >      >      >     share out
> >      >      >      > their custom modules with other users or not.
> >      >      >      >
> >      >      >      > Cheers,
> >      >      >      >
> >      >      >      >
> >      >      >      > pieter
> >      >      >      >
> >      >      >      > On 4/19/06, *Francisco Azevedo* <
> >     francisco at fusemail.com <mailto:francisco at fusemail.com>
> >      >     <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com
> >>
> >      >      >     <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com> <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>>>
> >      >      >      > <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>> <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>>>>>
> >      >      >     wrote:
> >      >      >      >
> >      >      >      >     Pieter,
> >      >      >      >      > Looks really cool for a way of working. Are
> you
> >      >     planning
> >      >      >     to share
> >      >      >      >     this
> >      >      >      >      > with the other Yellow Duck Users?
> >      >      >      >      >
> >      >      >      >     I think this is a specific way of doing things
> >     because
> >      >     almost
> >      >      >     all cms
> >      >      >      >     share a common structure and this is very
> >     different..
> >      >     and if
> >      >      >     YFcm start
> >      >      >      >     with it all components must be created with
> this
> >      >     structure in
> >      >      >     mind..
> >      >      >      >     and
> >      >      >      >     i don't know your feedback about it.
> >      >      >      >
> >      >      >      >     About sharing.. no problem at all. Languages
> >     and dbObject
> >      >      >     logic (read:
> >      >      >      >     the main parts) are the most difficult part
> because
> >      >     have all
> >      >      >     component
> >      >      >      >     operations.. pHObject and templating is
> different
> >      >     because each
> >      >      >      >     aplication has it's own way of presentation..
> but i
> >      >     think we
> >      >      >     should
> >      >      >      >     create a generic "pHObject" (read: a class and
> >     a template
> >      >      >     directory to
> >      >      >      >     show how the component works).
> >      >      >      >
> >      >      >      >     What do you think?
> >      >      >      >
> >      >      >      >     Francisco A
> >      >      >      >
> >      >      >      >      > pieter
> >      >      >      >      >
> >      >      >      >      > On 4/19/06, *Francisco Azevedo* <
> >      >     francisco at fusemail.com <mailto:francisco at fusemail.com>
> >     <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>
> >      >      >     <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com> <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>>>
> >      >      >      >     <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>> <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com
> >>>>
> >      >      >      >      > <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com
> >>
> >      >      >     <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>>> <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto: francisco at fusemail.com <mailto:
> francisco at fusemail.com>>
> >      >      >     <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>>>>>>
> >      >      >      >     wrote:
> >      >      >      >      >
> >      >      >      >      >     img Zip
> >      >      >      >      >
> >      >      >      >      >     Francisco A
> >      >      >      >      >
> >      >      >      >      >
> >      >      >      >      >
> >      >      >      >      >
> >      >      >      >      >
> >      >      >      >      > --
> >      >      >      >      > pieter claerhout . pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>
> >      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
> >      >      >     <mailto: pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>>>
> >      >      >      >     <mailto: pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>
> >      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
> >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>
> >      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be
> >>>>
> >      >      >     <mailto: pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>>
> >      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>
> >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>>
> >      >      >      >     <mailto: pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>
> >      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
> >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>
> >      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be
> >>>>>
> >      >      >      >      > . http://www.yellowduck.be/
> >      >      >      >
> >      >      >      >     _______________________________________________
> >      >      >      >     YDFramework-devel mailing list
> >      >      >      >     YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >      >     <mailto: YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>>
> >      >      >     <mailto:YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >      >     <mailto: YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>>>
> >      >      >      >     <mailto:YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >      >     <mailto: YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>>
> >      >      >     <mailto:YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >      >     <mailto: YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>>>>
> >      >      >      >
> >      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >      >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> >      >      >     <
> >     http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> >      >      >      >     <
> >      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>>
> >      >      >      >
> >      >      >      >
> >      >      >      >
> >      >      >      >
> >      >      >      > --
> >      >      >      > pieter claerhout . pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>
> >      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
> >      >      >     <mailto:pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be> <mailto: pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>>>
> >      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>
> >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
> >      >      >     <mailto: pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>>>> .
> >      >      >      > http://www.yellowduck.be/
> >      >      >
> >      >      >     _______________________________________________
> >      >      >     YDFramework-devel mailing list
> >      >      >     YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >      >     <mailto:YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>>
> >      >      >     <mailto: YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >      >     <mailto:YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>>>
> >      >      >
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >      >      >
> >      >      >
> >      >      >
> >      >      >
> >      >      > --
> >      >      > pieter claerhout . pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>
> >      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
> >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>
> >      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>>
> .
> >      >      > http://www.yellowduck.be/
> >      >
> >      >     _______________________________________________
> >      >     YDFramework-devel mailing list
> >      >     YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >      >     <mailto: YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>>
> >      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >      >     < http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> >      >
> >      >
> >      >
> >      >
> >      > --
> >      > pieter claerhout . pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be> <mailto: pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>> .
> >      > http://www.yellowduck.be/
> >
> >     _______________________________________________
> >     YDFramework-devel mailing list
> >     YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >
> >
> >
> >
> > --
> > pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> .
> > http://www.yellowduck.be/
>
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
>



--
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060425/aace0aae/attachment.html>

From francisco at fusemail.com  Tue Apr 25 20:04:28 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Tue, 25 Apr 2006 19:04:28 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4aef63030604250727o434580ebi7ace3791f6860203@mail.gmail.com>
References: <444518AC.1080102@fusemail.com> <44461995.9010604@fusemail.com>	 <4aef63030604190437j526a0d7bl2bba2da175699cf1@mail.gmail.com>	 <4446452F.1060102@fusemail.com>	 <4aef63030604190824o6d113337u86698b5d363e6587@mail.gmail.com>	 <444D65E8.2070401@fusemail.com>	 <4aef63030604250419h67f11459qd13ebd2264c01a5a@mail.gmail.com>	 <444E2093.7060105@fusemail.com>	 <4aef63030604250700v16e434c9k5ab03f963efbd296@mail.gmail.com>	 <444E2EAD.3060601@fusemail.com> <4aef63030604250727o434580ebi7ace3791f6860203@mail.gmail.com>
Message-ID: <444E64AC.8070405@fusemail.com>

> If there's anything we can help with, let us know.

Sure.. Now, a good help could be:

- add YDDatabaseTree::updateNode

- add the position column feature #001986

- be able to define: setSortField( "parent_id ASC, position ASC" ) that 
will sort nodes by parent and nodes with same parent will be sorted by 
its position ;)

Francisco A


From pieter at yellowduck.be  Wed Apr 26 08:50:45 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Wed, 26 Apr 2006 08:50:45 +0200
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <444E64AC.8070405@fusemail.com>
References: <444518AC.1080102@fusemail.com> <4446452F.1060102@fusemail.com>
	 <4aef63030604190824o6d113337u86698b5d363e6587@mail.gmail.com>
	 <444D65E8.2070401@fusemail.com>
	 <4aef63030604250419h67f11459qd13ebd2264c01a5a@mail.gmail.com>
	 <444E2093.7060105@fusemail.com>
	 <4aef63030604250700v16e434c9k5ab03f963efbd296@mail.gmail.com>
	 <444E2EAD.3060601@fusemail.com>
	 <4aef63030604250727o434580ebi7ace3791f6860203@mail.gmail.com>
	 <444E64AC.8070405@fusemail.com>
Message-ID: <4aef63030604252350y7ed6f36bqbaeb34bdc879f4c@mail.gmail.com>

I will take care of that.

pieter

On 4/25/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
> > If there's anything we can help with, let us know.
>
> Sure.. Now, a good help could be:
>
> - add YDDatabaseTree::updateNode
>
> - add the position column feature #001986
>
> - be able to define: setSortField( "parent_id ASC, position ASC" ) that
> will sort nodes by parent and nodes with same parent will be sorted by
> its position ;)
>
> Francisco A
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
>



--
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060426/c494e0ab/attachment.html>

From pclaerhout at berlios.de  Wed Apr 26 12:41:56 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Wed, 26 Apr 2006 12:41:56 +0200
Subject: [ydf-devel] r1887 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604261041.k3QAfutJ023083@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-26 12:41:54 +0200 (Wed, 26 Apr 2006)
New Revision: 1887

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
Log:
Added the YDDatabaseTree::updateNode function.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-24 16:09:00 UTC (rev 1886)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-26 10:41:54 UTC (rev 1887)
@@ -691,6 +691,8 @@
          *
          *  @param $values      The field values of the node.
          *  @param $parent_id   (optional) The parent ID of the node. The default takes it from the $values.
+         *
+         *  @returns    The ID of the newly inserted node.
          */
         function addNode( $values, $parent_id=null ) {
 
@@ -734,6 +736,38 @@
         }
 
         /**
+         *  This function updates a node in the database.
+         *
+         *  @param $values      The field values of the node.
+         *
+         *  @returns    The values of the node that is updated.
+         */
+        function updateNode( $values ) {
+
+            // The ID and parent field
+            $idField = $this->fields['id'];
+
+            // Convert the values from an ojbect to an array
+            $values = $this->_toNodeArray( $values );
+
+            // Clear the cache
+            $this->_clearCache();
+
+            // Perform the insert
+            $this->db->executeUpdate(
+                $this->table, $values,
+                sprintf( '%s = %', $idField, $this->db->escapeSql( $values['id'] ) )
+            );
+
+            // Rebuild the tree
+            $this->rebuild();
+
+            // Return the node
+            return $values;
+
+        }
+
+        /**
          *  Delete the node and it's children.
          *
          *  @param $id  The ID of the node to delete.



From pclaerhout at berlios.de  Wed Apr 26 12:45:39 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Wed, 26 Apr 2006 12:45:39 +0200
Subject: [ydf-devel] r1888 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604261045.k3QAjdEU028297@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-26 12:45:29 +0200 (Wed, 26 Apr 2006)
New Revision: 1888

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
Log:
Added support for a position field in the database tree.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-26 10:41:54 UTC (rev 1887)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-26 10:45:29 UTC (rev 1888)
@@ -42,16 +42,16 @@
          *  @param $table          Name of the tree database table
          *  @param $idField        (optional) Name of the primary key ID field. Default is id.
          *  @param $parentField    (optional) Name of the parent ID field. Default is parent_id.
-         *  @param $sortField      (optional) Name of the field to sort data. Default is title.
+         *  @param $sortField      (optional) Name of the field to sort data. Default is position, title.
          */
-        function YDDatabaseTree( $db='default', $table, $idField='id', $parentField='parent_id', $sortField='title' ) {
+        function YDDatabaseTree( $db='default', $table, $idField='id', $parentField='parent_id', $sortField='position, title' ) {
 
             $this->db = YDDatabase::getNamedInstance( $db );
 
             $this->table = $table;
             $this->fields = array(
                 'id' => $idField, 'parent' => $parentField, 'sort' => $sortField,
-                'nleft' => 'nleft', 'nright' => 'nright', 'nlevel' => 'nlevel'
+                'nleft' => 'nleft', 'nright' => 'nright', 'nlevel' => 'nlevel', 'position' => 'position'
             );
             $this->_use_query_cache = true;
             $this->_query_cache = array();



From pieter at yellowduck.be  Wed Apr 26 12:46:58 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Wed, 26 Apr 2006 12:46:58 +0200
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4aef63030604252350y7ed6f36bqbaeb34bdc879f4c@mail.gmail.com>
References: <444518AC.1080102@fusemail.com>
	 <4aef63030604190824o6d113337u86698b5d363e6587@mail.gmail.com>
	 <444D65E8.2070401@fusemail.com>
	 <4aef63030604250419h67f11459qd13ebd2264c01a5a@mail.gmail.com>
	 <444E2093.7060105@fusemail.com>
	 <4aef63030604250700v16e434c9k5ab03f963efbd296@mail.gmail.com>
	 <444E2EAD.3060601@fusemail.com>
	 <4aef63030604250727o434580ebi7ace3791f6860203@mail.gmail.com>
	 <444E64AC.8070405@fusemail.com>
	 <4aef63030604252350y7ed6f36bqbaeb34bdc879f4c@mail.gmail.com>
Message-ID: <4aef63030604260346w41b35917i7419bb8b30bad7c3@mail.gmail.com>

Done in build 1888.

pieter

On 4/26/06, Pieter Claerhout <pieter at yellowduck.be> wrote:
>
>  I will take care of that.
>
> pieter
>
>  On 4/25/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
> > > If there's anything we can help with, let us know.
> >
> > Sure.. Now, a good help could be:
> >
> > - add YDDatabaseTree::updateNode
> >
> > - add the position column feature #001986
> >
> > - be able to define: setSortField( "parent_id ASC, position ASC" ) that
> > will sort nodes by parent and nodes with same parent will be sorted by
> > its position ;)
> >
> > Francisco A
> > _______________________________________________
> > YDFramework-devel mailing list
> > YDFramework-devel at lists.berlios.de
> > http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >
>
>
>
> --
> pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
>



--
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060426/4833d217/attachment.html>

From francisco at fusemail.com  Wed Apr 26 12:51:24 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Wed, 26 Apr 2006 11:51:24 +0100
Subject: [ydf-devel] optional id in updateNode
Message-ID: <444F50AC.8050903@fusemail.com>

Pieter,

can you make updateNode like addNode with an optional argument?

In updateNode would be possible to hardcode the id (not parent_id) of 
the node to update..

updateNode( $values, $id = null )


Francisco A


From francisco at fusemail.com  Wed Apr 26 12:56:07 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Wed, 26 Apr 2006 11:56:07 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4aef63030604260346w41b35917i7419bb8b30bad7c3@mail.gmail.com>
References: <444518AC.1080102@fusemail.com>	 <4aef63030604190824o6d113337u86698b5d363e6587@mail.gmail.com>	 <444D65E8.2070401@fusemail.com>	 <4aef63030604250419h67f11459qd13ebd2264c01a5a@mail.gmail.com>	 <444E2093.7060105@fusemail.com>	 <4aef63030604250700v16e434c9k5ab03f963efbd296@mail.gmail.com>	 <444E2EAD.3060601@fusemail.com>	 <4aef63030604250727o434580ebi7ace3791f6860203@mail.gmail.com>	 <444E64AC.8070405@fusemail.com>	 <4aef63030604252350y7ed6f36bqbaeb34bdc879f4c@mail.gmail.com> <4aef63030604260346w41b35917i7419bb8b30bad7c3@mail.gmail.com>
Message-ID: <444F51C7.2050402@fusemail.com>

> Done in build 1888.

Well.. feature #001986 is missing :)

YDDatabaseTree should internally care about positions (eg: like 'nleft') 
and manage that automatically. This way:
- when we are inserting a node, it should calculate the last position 
for that parent
- when deleting a node, it should decrease positions of bigger brothers..

it's not trivial. ;)

Francisco A

> On 4/26/06, *Pieter Claerhout* <pieter at yellowduck.be 
> <mailto:pieter at yellowduck.be>> wrote:
> 
>     I will take care of that.
>      
>     pieter
>      
>     On 4/25/06, *Francisco Azevedo* < francisco at fusemail.com
>     <mailto:francisco at fusemail.com>> wrote:
> 
>         >  If there's anything we can help with, let us know.
> 
>         Sure.. Now, a good help could be:
> 
>         - add YDDatabaseTree::updateNode
> 
>         - add the position column feature #001986
> 
>         - be able to define: setSortField( "parent_id ASC, position ASC"
>         ) that
>         will sort nodes by parent and nodes with same parent will be
>         sorted by
>         its position ;)
> 
>         Francisco A



From pclaerhout at berlios.de  Wed Apr 26 13:16:14 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Wed, 26 Apr 2006 13:16:14 +0200
Subject: [ydf-devel] r1889 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604261116.k3QBGE4e008183@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-26 13:16:13 +0200 (Wed, 26 Apr 2006)
New Revision: 1889

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
Log:
Added the optional ID argument for YDDatabaseTree::updateNode.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-26 10:45:29 UTC (rev 1888)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-26 11:16:13 UTC (rev 1889)
@@ -739,10 +739,11 @@
          *  This function updates a node in the database.
          *
          *  @param $values      The field values of the node.
+         *  @param $id          (optional) The ID of the node to update.
          *
          *  @returns    The values of the node that is updated.
          */
-        function updateNode( $values ) {
+        function updateNode( $values, $id=null ) {
 
             // The ID and parent field
             $idField = $this->fields['id'];
@@ -753,10 +754,12 @@
             // Clear the cache
             $this->_clearCache();
 
+            // Get the ID of the node to update
+            $id = empty( $id ) ? $values['id'] : $id;
+
             // Perform the insert
             $this->db->executeUpdate(
-                $this->table, $values,
-                sprintf( '%s = %', $idField, $this->db->escapeSql( $values['id'] ) )
+                $this->table, $values, sprintf( '%s = %', $idField, $this->db->escapeSql( $id ) )
             );
 
             // Rebuild the tree



From pieter at yellowduck.be  Wed Apr 26 13:16:19 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Wed, 26 Apr 2006 13:16:19 +0200
Subject: [ydf-devel] optional id in updateNode
In-Reply-To: <444F50AC.8050903@fusemail.com>
References: <444F50AC.8050903@fusemail.com>
Message-ID: <4aef63030604260416m658e1d75od7d997a14bf17bf0@mail.gmail.com>

Added in build 1889.

pieter

On 4/26/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
> Pieter,
>
> can you make updateNode like addNode with an optional argument?
>
> In updateNode would be possible to hardcode the id (not parent_id) of
> the node to update..
>
> updateNode( $values, $id = null )
>
>
> Francisco A
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
>



--
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060426/3cdb0f85/attachment.html>

From pieter at yellowduck.be  Wed Apr 26 13:18:03 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Wed, 26 Apr 2006 13:18:03 +0200
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <444F51C7.2050402@fusemail.com>
References: <444518AC.1080102@fusemail.com>
	 <4aef63030604250419h67f11459qd13ebd2264c01a5a@mail.gmail.com>
	 <444E2093.7060105@fusemail.com>
	 <4aef63030604250700v16e434c9k5ab03f963efbd296@mail.gmail.com>
	 <444E2EAD.3060601@fusemail.com>
	 <4aef63030604250727o434580ebi7ace3791f6860203@mail.gmail.com>
	 <444E64AC.8070405@fusemail.com>
	 <4aef63030604252350y7ed6f36bqbaeb34bdc879f4c@mail.gmail.com>
	 <4aef63030604260346w41b35917i7419bb8b30bad7c3@mail.gmail.com>
	 <444F51C7.2050402@fusemail.com>
Message-ID: <4aef63030604260418m4954bbbblfa7e2b146dd332c2@mail.gmail.com>

Hmm, that's indeed not trivial.

They way I did it now was to add an extra field called position that can be
used to sort on. By default, the sorting is done on title, but now it's
changed to first sort on position, and then on title. From what I can see,
that should work just fine and have no influence on the nleft/nright/nlevel
values.

pieter

On 4/26/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
>
> > Done in build 1888.
>
> Well.. feature #001986 is missing :)
>
> YDDatabaseTree should internally care about positions (eg: like 'nleft')
> and manage that automatically. This way:
> - when we are inserting a node, it should calculate the last position
> for that parent
> - when deleting a node, it should decrease positions of bigger brothers..
>
> it's not trivial. ;)
>
> Francisco A
>
> > On 4/26/06, *Pieter Claerhout* <pieter at yellowduck.be
> > <mailto:pieter at yellowduck.be>> wrote:
> >
> >     I will take care of that.
> >
> >     pieter
> >
> >     On 4/25/06, *Francisco Azevedo* < francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>> wrote:
> >
> >         >  If there's anything we can help with, let us know.
> >
> >         Sure.. Now, a good help could be:
> >
> >         - add YDDatabaseTree::updateNode
> >
> >         - add the position column feature #001986
> >
> >         - be able to define: setSortField( "parent_id ASC, position ASC"
> >         ) that
> >         will sort nodes by parent and nodes with same parent will be
> >         sorted by
> >         its position ;)
> >
> >         Francisco A
>
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
>



--
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060426/cd780efd/attachment.html>

From pclaerhout at berlios.de  Wed Apr 26 13:25:33 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Wed, 26 Apr 2006 13:25:33 +0200
Subject: [ydf-devel] r1890 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604261125.k3QBPXgN012819@sheep.berlios.de>

Author: pclaerhout
Date: 2006-04-26 13:25:24 +0200 (Wed, 26 Apr 2006)
New Revision: 1890

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
Log:
Did some code cleanup.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-26 11:16:13 UTC (rev 1889)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-04-26 11:25:24 UTC (rev 1890)
@@ -632,26 +632,11 @@
                 if ( $id == 0 ) {
                     continue;
                 }
-//                if ( version_compare( phpversion(), '5' ) >= 0 ) {
-                    $query = sprintf(
-                        'update %s set nlevel = %d, nleft = %d, nright = %d where %s = %d',
-                        $this->table, $row->nlevel, $row->nleft, $row->nright, $this->fields['id'], $id
-                    );
-                    $this->db->executeSql( $query );
-//                } else {
-//                    if (
-//                        $data[$id]->nlevel != $data_ori[$id]->nlevel ||
-//                        $data[$id]->nleft  != $data_ori[$id]->nleft ||
-//                        $data[$id]->nright != $data_ori[$id]->nright
-//                    ) {
-//                        $query = sprintf(
-//                            'update %s set nlevel = %d, nleft = %d, nright = %d where %s = %d',
-//                            $this->table, $row->nlevel, $row->nleft, $row->nright, $this->fields['id'], $id
-//                        );
-//                        $this->db->executeSql( $query );
-//                    }
-//                }
-
+                $query = sprintf(
+                    'update %s set nlevel = %d, nleft = %d, nright = %d where %s = %d',
+                    $this->table, $row->nlevel, $row->nleft, $row->nright, $this->fields['id'], $id
+                );
+                $this->db->executeSql( $query );
             }
 
         }



From francisco at fusemail.com  Wed Apr 26 15:07:24 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Wed, 26 Apr 2006 14:07:24 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4aef63030604260418m4954bbbblfa7e2b146dd332c2@mail.gmail.com>
References: <444518AC.1080102@fusemail.com>	 <4aef63030604250419h67f11459qd13ebd2264c01a5a@mail.gmail.com>	 <444E2093.7060105@fusemail.com>	 <4aef63030604250700v16e434c9k5ab03f963efbd296@mail.gmail.com>	 <444E2EAD.3060601@fusemail.com>	 <4aef63030604250727o434580ebi7ace3791f6860203@mail.gmail.com>	 <444E64AC.8070405@fusemail.com>	 <4aef63030604252350y7ed6f36bqbaeb34bdc879f4c@mail.gmail.com>	 <4aef63030604260346w41b35917i7419bb8b30bad7c3@mail.gmail.com>	 <444F51C7.2050402@fusemail.com> <4aef63030604260418m4954bbbblfa7e2b146dd332c2@mail.gmail.com>
Message-ID: <444F708C.6010907@fusemail.com>

> They way I did it now was to add an extra field called position that can 
> be used to sort on. By default, the sorting is done on title, but now 
> it's changed to first sort on position, and then on title. From what I 
> can see, that should work just fine and have no influence on the 
> nleft/nright/nlevel values.

Yes, nleft, nright and nlevel should not be touched.. but we will need 
another value 'nposition' to control the order of nodes with same parent 
(that, of course, have the same nlevel too).

Unless you have some idea how to manage positions.. basically all we 
need is support in addNode and moveNode to define the position.
This way we can do things like move node C upper, moveNode( B, A, 2 ):

+ A          + A
| +- B       | +- C
| +- C    => | +- B
|            |
+-D          +-D


or... addNode X after B, addNode( X, A, 2 ):


+ A          + A
| +- B       | +- B
| +- C    => | +- X
|            | +- C
+-D          |
              +-D


This is really needed..

Francisco A


> pieter
>  
> On 4/26/06, *Francisco Azevedo* <francisco at fusemail.com 
> <mailto:francisco at fusemail.com>> wrote:
> 
> 
>      > Done in build 1888.
> 
>     Well.. feature #001986 is missing :)
> 
>     YDDatabaseTree should internally care about positions (eg: like
>     'nleft')
>     and manage that automatically. This way:
>     - when we are inserting a node, it should calculate the last position
>     for that parent
>     - when deleting a node, it should decrease positions of bigger
>     brothers..
> 
>     it's not trivial. ;)
> 
>     Francisco A
> 
>      > On 4/26/06, *Pieter Claerhout* <pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>
>      > <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>> wrote:
>      >
>      >     I will take care of that.
>      >
>      >     pieter
>      >
>      >     On 4/25/06, *Francisco Azevedo* < francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>>> wrote:
>      >
>      >         >  If there's anything we can help with, let us know.
>      >
>      >         Sure.. Now, a good help could be:
>      >
>      >         - add YDDatabaseTree::updateNode
>      >
>      >         - add the position column feature #001986
>      >
>      >         - be able to define: setSortField( "parent_id ASC,
>     position ASC"
>      >         ) that
>      >         will sort nodes by parent and nodes with same parent will be
>      >         sorted by
>      >         its position ;)
>      >
>      >         Francisco A
> 
>     _______________________________________________
>     YDFramework-devel mailing list
>     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> 
> 
> 
> 
> -- 
> pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> . 
> http://www.yellowduck.be/



From ximian at berlios.de  Wed Apr 26 16:12:53 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Wed, 26 Apr 2006 16:12:53 +0200
Subject: [ydf-devel] r1891 - YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements
Message-ID: <200604261412.k3QECreZ027258@sheep.berlios.de>

Author: ximian
Date: 2006-04-26 16:12:30 +0200 (Wed, 26 Apr 2006)
New Revision: 1891

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Date.php
Log:
added support for setting values like "2007-01-01 00:00:00" to a date form element

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Date.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Date.php	2006-04-26 11:25:24 UTC (rev 1890)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Date.php	2006-04-26 14:12:30 UTC (rev 1891)
@@ -304,6 +304,17 @@
                 'seconds' => 'seconds'
             );
             
+            // if we have a string (eg: "2007-01-01 00:00:01") we will get the array
+            if ( !is_numeric( $val ) && !is_array( $val ) ){
+
+                 // include YDDate lib
+                 YDInclude( 'YDDate.php' );
+
+                 // create date object and export array
+                 $_d = new YDDate( $val );
+                 $val = $_d->toArray();
+            }
+
             if ( is_numeric( $val ) ) {
                 
                 $now = getdate( $val );



From ximian at berlios.de  Wed Apr 26 16:21:38 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Wed, 26 Apr 2006 16:21:38 +0200
Subject: [ydf-devel] r1892 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604261421.k3QELckj005275@sheep.berlios.de>

Author: ximian
Date: 2006-04-26 16:21:27 +0200 (Wed, 26 Apr 2006)
New Revision: 1892

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDError.php
Log:
changed YDError::catch method name to YDError::catchError  (it was incompatible with php5)

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDError.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDError.php	2006-04-26 14:12:30 UTC (rev 1891)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDError.php	2006-04-26 14:21:27 UTC (rev 1892)
@@ -92,6 +92,7 @@
             
         }
         
+
         /**
          *  This function catch the last stored error.
          *
@@ -102,7 +103,7 @@
          *
          *  @static
          */
-        function catch( $error=null, $level=YD_ERROR_FATAL ) {
+        function catchError( $error=null, $level=YD_ERROR_FATAL ) {
             
             $catch = YDConfig::get( 'YD_ERROR_CATCH' );
             $catch_temp = YDConfig::get( 'YD_ERROR_CATCH_TEMP' );



From ximian at berlios.de  Wed Apr 26 16:23:08 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Wed, 26 Apr 2006 16:23:08 +0200
Subject: [ydf-devel] r1893 - YDFramework2.0/trunk/examples
Message-ID: <200604261423.k3QEN8em005833@sheep.berlios.de>

Author: ximian
Date: 2006-04-26 16:22:55 +0200 (Wed, 26 Apr 2006)
New Revision: 1893

Modified:
   YDFramework2.0/trunk/examples/error.php
Log:
updated error.php example for YDError::catchError

Modified: YDFramework2.0/trunk/examples/error.php
===================================================================
--- YDFramework2.0/trunk/examples/error.php	2006-04-26 14:21:27 UTC (rev 1892)
+++ YDFramework2.0/trunk/examples/error.php	2006-04-26 14:22:55 UTC (rev 1893)
@@ -36,7 +36,7 @@
             $res = $my->test(); 
 
             // Check for errors
-            while ( $err = YDError::catch( $res ) ) {
+            while ( $err = YDError::catchError( $res ) ) {
                 YDDebugUtil::dump( $err, '$err' );
                 $err->level; // 3 
                 $err->name; // fatal 
@@ -56,7 +56,7 @@
             YDDebugUtil::dump( $errors, '$errors' );
 
             // Or we could dump the error 
-            if ( $err = YDError::catch( $res ) ) { 
+            if ( $err = YDError::catchError( $res ) ) { 
                 $err->dump();
             } 
 



From ximian at berlios.de  Wed Apr 26 16:27:43 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Wed, 26 Apr 2006 16:27:43 +0200
Subject: [ydf-devel] r1894 - YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent
Message-ID: <200604261427.k3QERhgE007868@sheep.berlios.de>

Author: ximian
Date: 2006-04-26 16:27:02 +0200 (Wed, 26 Apr 2006)
New Revision: 1894

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner.png
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql
Log:
updated db scheme with YDCMPage inserts and YDCMLanguages support for default admin content creation

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner.png
===================================================================
(Binary files differ)

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml	2006-04-26 14:22:55 UTC (rev 1893)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml	2006-04-26 14:27:02 UTC (rev 1894)
@@ -583,18 +583,24 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1220" ColName="active" PrevColName="" Pos="4" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="is active. 1 true, 0 false">
+<COLUMN ID="1220" ColName="active" PrevColName="" Pos="4" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="is active. 1 true, 0 false">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1221" ColName="visitors_default" PrevColName="default_lang" Pos="5" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="this is the default language for visitors side. 1 true, 0 false">
+<COLUMN ID="1221" ColName="visitors_default" PrevColName="default_lang" Pos="5" idDatatype="1" DatatypeParams="(1)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="this is the default language for visitors side. 1 true, 0 false">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
+<COLUMN ID="1586" ColName="admin_default" PrevColName="" Pos="4" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="default language for content creation. 1 true, 0 false">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
 </COLUMNS>
 <RELATIONS_START>
 <RELATION_START ID="1331" />

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql	2006-04-26 14:22:55 UTC (rev 1893)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/inserts.sql	2006-04-26 14:27:02 UTC (rev 1894)
@@ -12,9 +12,9 @@
 
 
 
-INSERT INTO `ydcmlanguages` VALUES ('all','All',1,0);
-INSERT INTO `ydcmlanguages` VALUES ('en','English',1,1);
-INSERT INTO `ydcmlanguages` VALUES ('pt','Portugu?s',1,0);
+INSERT INTO `ydcmlanguages` VALUES ('all','All',1,0,0);
+INSERT INTO `ydcmlanguages` VALUES ('en','English',1,1,1);
+INSERT INTO `ydcmlanguages` VALUES ('pt','Portugu?s',1,0,0);
 
 
 



From ximian at berlios.de  Wed Apr 26 16:30:00 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Wed, 26 Apr 2006 16:30:00 +0200
Subject: [ydf-devel] r1895 - YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages
Message-ID: <200604261430.k3QEU00K009195@sheep.berlios.de>

Author: ximian
Date: 2006-04-26 16:29:50 +0200 (Wed, 26 Apr 2006)
New Revision: 1895

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php
Log:
added new method YDCMLanguages::adminDefault to get default language for content creation

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php	2006-04-26 14:27:02 UTC (rev 1894)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLanguages/YDCMLanguages.php	2006-04-26 14:29:50 UTC (rev 1895)
@@ -51,6 +51,7 @@
 			$this->registerField( 'name' );
 			$this->registerField( 'active' );
 			$this->registerField( 'visitors_default' );
+			$this->registerField( 'admin_default' );
 
 			// we don't have relations from here (just TO here, and we don't need to define that)
 		}
@@ -76,5 +77,27 @@
 			return $this->getResultsAsAssocArray( 'language_id', 'name' );
 		}
 
+
+        /**
+         *  This function returns the default language for content creation
+         *
+         *  @returns    Language code, eg: 'en'. or false
+         */
+		function adminDefault(){
+		
+			// reset values
+			$this->resetValues();
+
+			// we want the result where admin default is 1
+			$this->admin_default = 1;
+			$this->limit( 1 );
+			
+			// find language
+			if ( $this->find() == 1 ) return $this->language_id;
+			
+			return false;
+		}
+
+
     }
 ?>
\ No newline at end of file



From ximian at berlios.de  Wed Apr 26 16:33:58 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Wed, 26 Apr 2006 16:33:58 +0200
Subject: [ydf-devel] r1896 - in YDFramework2.0/trunk/YDFramework2/addons/YDCMPage: . languages
Message-ID: <200604261433.k3QEXwh8011769@sheep.berlios.de>

Author: ximian
Date: 2006-04-26 16:33:41 +0200 (Wed, 26 Apr 2006)
New Revision: 1896

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/pt.php
Log:
on YDCMPage:
- new translations
- new method for page store/update
- updated generic page form

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-04-26 14:29:50 UTC (rev 1895)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-04-26 14:33:41 UTC (rev 1896)
@@ -69,15 +69,17 @@
 		
 			YDInclude( 'YDForm.php' );
 			YDInclude( 'YDCMTemplates.php' );
-		
+			YDInclude( 'YDCMLanguages.php' );
+
+			// init template and language object
+			$templates = new YDCMTemplates();
+			$languages = new YDCMLanguages();
+
 			// create access options
 			$access = array( 0 => t('public'), 1 => t('private') );
 
-			// get all possible visitors templates
-			$templates = new YDCMTemplates();
-
 			// create 'template pack' options
-			$template_pack = array(	1	=> t('use templatepack') .' ('. $templates->template_pack() .')',
+			$template_pack = array(	1	=> t('use templatepack') . ' (' . $templates->template_pack() . ')',
 									0	=> t('use custom template') );
 	
 			// create form object
@@ -85,9 +87,10 @@
 
 	        $form->addElement( 'text',           'reference',            t('page_reference'),      array('size' => 25, 'maxlength' => 35) );
 	        $form->addElement( 'text',           'title',                t('page_title'),          array('size' => 70, 'maxlength' => 70) );
-	        $form->addElement( 'hidden',         'content',              t('page_content') );
+	        $form->addElement( 'textarea',       'html',                 t('page_html') );
+	        $form->addElement( 'textarea',       'xhtml',                t('page_xhtml') );
 	        $form->addElement( 'select',         'access',               t('page_access'),         array(), $access);
-	        $form->addElement( 'select',         'published',            t('page_published'),      array(), array(1 => t('yes'), 0 => t('no'), 2 => t('schedule')) );
+	        $form->addElement( 'select',         'state',                t('page_state'),      array(), array(1 => t('yes'), 0 => t('no'), 2 => t('schedule')) );
 	        $form->addElement( 'datetimeselect', 'published_date_start', t('page_startdate') );
 	        $form->addElement( 'datetimeselect', 'published_date_end',   t('page_enddate'));
 	        $form->addElement( 'select',         'template_pack',        '',                       array(), $template_pack );
@@ -95,19 +98,88 @@
 	        $form->addElement( 'select',         'metatags',             t('page_metatags'),       array(), array(0 => t('no'), 1 => t('yes')));
 	        $form->addElement( 'textarea',       'description',          t('page_description'),    array('cols' => 50, 'rows' => 5) );
 	        $form->addElement( 'textarea',       'keywords',             t('page_keywords'),       array('cols' => 50, 'rows' => 5) );
-	        $form->addElement( 'select',         'search',               t('page_search'),         array(), array(0 => t('no'), 1 => t('yes')) );
+	        $form->addElement( 'select',         'searcheable',          t('page_search'),         array(), array(0 => t('no'), 1 => t('yes')) );
 	        $form->addElement( 'hidden',         'content_id' );
 	        $form->addElement( 'hidden',         'parent_id' );
+	        $form->addElement( 'hidden',         'language_id' );
 
 			// parent of new page is 0 by default
-			$form->setDefault( 'content_id', 0 );
-			$form->setDefault( 'parent_id', 0 );
+			$form->setDefault( 'content_id',  0 );
+			$form->setDefault( 'parent_id',   0 );
+			$form->setDefault( 'language_id', $languages->adminDefault() );
 
+			// TODO: add form rules
+			
+			// content_id .. integer
+			// language_id .. valid in possible languages
+
 			return $form;
 		}
 
 
+
         /**
+         *  This function adds/updates a page (if content_id is 0 will add a page, otherwise will update)
+         *
+         *  @param $formvalues  Array with page attributes from the standard form
+         *
+         *  @returns    true if updated, array with form errors otherwise
+         */
+		function savePageForm( $formvalues = array() ){
+
+			// get page YDForm object
+			$form = $this->getFormPage();
+
+			// check form validation
+			if ( !$form->validate( $formvalues ) )
+				return $form->getErrors();
+
+			// init node values
+			$node = array();			
+			$node[ 'type' ]        = 'YDCMPage';
+			$node[ 'reference' ]   = $form->getValue( 'reference' );
+			$node[ 'state' ]       = $form->getValue( 'state' );
+			$node[ 'access' ]      = $form->getValue( 'access' );
+			$node[ 'searcheable' ] = $form->getValue( 'searcheable' );
+
+			// convert published date start/end timestamp to a db datetime format
+			$node[ 'published_date_start' ] = YDStringUtil::formatDate( $form->getValue( 'published_date_start' ), 'datetimesql' );
+			$node[ 'published_date_end' ]   = YDStringUtil::formatDate( $form->getValue( 'published_date_end' ),   'datetimesql' );
+
+			// get id of this node
+			$id = $form->getValue( 'content_id' );
+
+			// if content_id is 0 we are trying to add a new node, otherwise we only need to update it
+			if ( $id == 0 ) $id = $this->addNode(    $node, intval( $form->getValue( 'parent_id' ) ) );
+			else                  $this->updateNode( $node, intval( $form->getValue( 'content_id' ) ) );
+			
+			// create page
+			$page = array();
+
+			$page[ 'content_id' ]    = $id;
+			$page[ 'language_id' ]   = $form->getValue( 'language_id' );
+			$page[ 'title' ]         = $form->getValue( 'title' );
+			$page[ 'hmtl' ]          = $form->getValue( 'html' );
+			$page[ 'xhmtl' ]         = $form->getValue( 'xhtml' );
+			$page[ 'template_pack' ] = $form->getValue( 'template_pack' );
+			$page[ 'template' ]      = $form->getValue( 'template' );
+			$page[ 'metatags' ]      = $form->getValue( 'metatags' );
+			$page[ 'description' ]   = $form->getValue( 'description' );
+			$page[ 'keywords' ]      = $form->getValue( 'keywords' );
+
+			// TODO: care about version control
+			$page[ 'current_version' ] = 1;
+						
+			// add page
+			$this->resetValues();
+			
+			$this->setValues( $page );
+
+			return $this->insert();
+		}
+
+
+        /**
          *  This function returns the page sttributes
          *
          *  @returns    Node id
@@ -120,9 +192,15 @@
 			// define our id to find		
 			$this->content_id = intval( $id );
 			
+			// because we can more than one page with same id (content versioning)
+			// we will get the highest (latest).
+			// TODO: get the highest if user did not define a custom version
+			$this->orderBy( 'component_id', 'desc' );
+			$this->limit( 1 );
+			
 			// find node
 			$this->findAll();
-			
+
 			// return node attributes without relation prefixs
 			return $this->getValues( false, false, false, false );
 		}

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php	2006-04-26 14:29:50 UTC (rev 1895)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/en.php	2006-04-26 14:33:41 UTC (rev 1896)
@@ -5,7 +5,7 @@
 $GLOBALS['t']['page_title'] = 'Title';
 $GLOBALS['t']['page_content'] = 'Content';
 $GLOBALS['t']['page_access'] = 'Access';
-$GLOBALS['t']['page_published'] = 'Published';
+$GLOBALS['t']['page_state'] = 'Published';
 $GLOBALS['t']['page_startdate'] = 'Start date';
 $GLOBALS['t']['page_enddate'] = 'End date';
 $GLOBALS['t']['page_templates'] = 'Templates';

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/pt.php	2006-04-26 14:29:50 UTC (rev 1895)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/languages/pt.php	2006-04-26 14:33:41 UTC (rev 1896)
@@ -5,7 +5,7 @@
 $GLOBALS['t']['page_title'] = 'Titulo';
 $GLOBALS['t']['page_content'] = 'Conte&uacute;do';
 $GLOBALS['t']['page_access'] = 'Acesso';
-$GLOBALS['t']['page_published'] = 'Publicado';
+$GLOBALS['t']['page_state'] = 'Publicado';
 $GLOBALS['t']['page_startdate'] = 'Data inicial';
 $GLOBALS['t']['page_enddate'] = 'Data final';
 $GLOBALS['t']['page_templates'] = 'Templates';



From ximian at berlios.de  Wed Apr 26 16:36:59 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Wed, 26 Apr 2006 16:36:59 +0200
Subject: [ydf-devel] r1897 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200604261436.k3QEaxBC013641@sheep.berlios.de>

Author: ximian
Date: 2006-04-26 16:36:47 +0200 (Wed, 26 Apr 2006)
New Revision: 1897

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php
Log:
YDCMComponent has built-in methods for tree management

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php	2006-04-26 14:33:41 UTC (rev 1896)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php	2006-04-26 14:36:47 UTC (rev 1897)
@@ -27,8 +27,8 @@
     }
 
     YDInclude( 'YDDatabaseObject.php' );
-    YDInclude( 'YDCMTree.php' );
 
+
     class YDCMComponent extends YDDatabaseObject {
 
         function YDCMComponent( $name, $standardComponent = true ) {
@@ -67,15 +67,37 @@
          		$relLanguage = & $this->registerRelation( 'YDCMLanguages', false, 'YDCMLanguages' );
 				$relLanguage->setLocalKey( 'language_id' );
 				$relLanguage->setForeignKey( 'language_id' );
-
-				// a standard component has tree operations
-				$this->tree = new YDCMTree();
 			}
+				
+			// a standard component has tree operations
+			// TODO: position is required and we must change order from 'parent_id' to 'parent_id ASC, position ASC'
+			$this->tree = new YDDatabaseTree( 'default', 'YDCMTree', 'content_id', 'parent_id', 'parent_id' );
 
+			// TODO: set sort by parent & position
+			// $this->tree->setSortField( 'parent_id ASC, position ASC' );
+
+			// add tree fields
+			$this->tree->addField( 'type' );
+			$this->tree->addField( 'state' );
+			$this->tree->addField( 'reference' );
+			$this->tree->addField( 'access' );
+			$this->tree->addField( 'searcheable' );
+			$this->tree->addField( 'published_date_start' );
+			$this->tree->addField( 'published_date_end' );
 		}
 
 
         /**
+         *  This function returns all elements (except root)
+         *
+         *  @returns    all tree elements 
+         */
+		function getTreeElements(){
+			return $this->tree->getDescendants( 1 );
+		}
+
+
+        /**
          *  This function returns the component author
          *
          *  @returns    component author
@@ -115,17 +137,6 @@
 		}
 
 
-		// this function will fix the current YDDatabaseObject::registerRelation
-		// TODO: delete it when YDDatabaseObject::registerRelation support seach inside YDF addons directory
-		function registerRelation( $a, $b, $c ){
-		
-			YDInclude( $a . '.php' );
-			YDInclude( $c . '.php' );			
-			
-			return parent::registerRelation( $a, $b, $c );
-		}
-		
-
         /**
          *  This function changes component state
          *
@@ -135,12 +146,30 @@
          *
          */
 		function toogleState( $id ){
+
+			// get node values
+			$old_node = $this->tree->getNode( $id );
+
+			// change state attribute
+			if ( $old_node[ 'state' ] == 0 ) return $this->setState( $id, 1 );
+			else                             return $this->setState( $id, 0 );
+		}
+
+
+        /**
+         *  This function sets a node state
+         *
+         *  @param $id         The node id
+         *  @param $state      The state code
+         *
+         *  @returns    1 if state changed, 0 otherwise
+         */
+		function setState( $id, $state ){
 		
-			return $this->tree->toogleState( $id );
+			return $this->tree->updateNode( array( 'state' => $state ), $id );
 		}
 
 
-
         /**
          *  This function deletes the tree part of a component only
          *
@@ -149,7 +178,7 @@
          */
 		function deleteNode( $id ){
 		
-			return $this->tree->deleteNode( $id );
+			return $this->tree->deleteNode( intval( $id ) );
 		}
 
 
@@ -158,20 +187,56 @@
          *
          *  @param $values  Node values
          */
-		function add( $values ){
+		function addNode( $values, $parent_id = null ){
 
-			// reset values
-			$this->reset();
+			// user YDDatabasetree method
+			return $this->tree->addNode( $values, $parent_id );
+		}
+
+
+        /**
+         *  This function updates a node
+         *
+         *  @param $values  Node values
+         */
+		function updateNode( $values, $node_id = null ){
+
+			// user YDDatabasetree method
+			return $this->tree->updateNode( $values, $node_id );
+		}
+
+
+    }
+
+
+
+
+    class YDCMTree extends YDDatabaseObject {
+    
+        function YDCMTree() {
+        
+			// init component as non default
+            $this->YDDatabaseObject();
 			
-			// set values
-			$this->setValues( $values );
+			// register database as default
+            $this->registerDatabase();
 
-			// TODO: check if language_id (another admin could delete or deactivate it)
-			// TODO: check if content_id exist (not required because it should be locked anyway)
+			// register table for this component
+            $this->registerTable( 'YDCMTree' );
 
-			// insert values
-			return $this->insert();
+            // register custom key
+            $this->registerKey( 'content_id', true );
+
+			// register fields	
+			$this->registerField( 'parent_id' );
+			$this->registerField( 'type' );
+			$this->registerField( 'state' );
+			$this->registerField( 'reference' );
+			$this->registerField( 'access' );			
+			$this->registerField( 'searcheable' );			
+			$this->registerField( 'published_date_start' );
+			$this->registerField( 'published_date_end' );			
 		}
+	}
 
-    }
 ?>
\ No newline at end of file



From ximian at berlios.de  Wed Apr 26 16:41:49 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Wed, 26 Apr 2006 16:41:49 +0200
Subject: [ydf-devel] r1898 - YDFramework2.0/trunk/YDFramework2/addons
Message-ID: <200604261441.k3QEfnEx015570@sheep.berlios.de>

Author: ximian
Date: 2006-04-26 16:41:36 +0200 (Wed, 26 Apr 2006)
New Revision: 1898

Removed:
   YDFramework2.0/trunk/YDFramework2/addons/YDCMTree/
Log:
we don't need a separated tree component (YDCMComponent will care about content tree)



From pieter at yellowduck.be  Wed Apr 26 17:29:40 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Wed, 26 Apr 2006 17:29:40 +0200
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <444F708C.6010907@fusemail.com>
References: <444518AC.1080102@fusemail.com>
	 <4aef63030604250700v16e434c9k5ab03f963efbd296@mail.gmail.com>
	 <444E2EAD.3060601@fusemail.com>
	 <4aef63030604250727o434580ebi7ace3791f6860203@mail.gmail.com>
	 <444E64AC.8070405@fusemail.com>
	 <4aef63030604252350y7ed6f36bqbaeb34bdc879f4c@mail.gmail.com>
	 <4aef63030604260346w41b35917i7419bb8b30bad7c3@mail.gmail.com>
	 <444F51C7.2050402@fusemail.com>
	 <4aef63030604260418m4954bbbblfa7e2b146dd332c2@mail.gmail.com>
	 <444F708C.6010907@fusemail.com>
Message-ID: <4aef63030604260829y7673249eka2b9b3e05e9ed93c@mail.gmail.com>

That's why I added the position field for every node. Using updateNode and
addingNode, you can take care of the ordering, provided the node contains a
field called "position" with the right value.

pieter

On 4/26/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
>
> > They way I did it now was to add an extra field called position that can
> > be used to sort on. By default, the sorting is done on title, but now
> > it's changed to first sort on position, and then on title. From what I
> > can see, that should work just fine and have no influence on the
> > nleft/nright/nlevel values.
>
> Yes, nleft, nright and nlevel should not be touched.. but we will need
> another value 'nposition' to control the order of nodes with same parent
> (that, of course, have the same nlevel too).
>
> Unless you have some idea how to manage positions.. basically all we
> need is support in addNode and moveNode to define the position.
> This way we can do things like move node C upper, moveNode( B, A, 2 ):
>
> + A          + A
> | +- B       | +- C
> | +- C    => | +- B
> |            |
> +-D          +-D
>
>
> or... addNode X after B, addNode( X, A, 2 ):
>
>
> + A          + A
> | +- B       | +- B
> | +- C    => | +- X
> |            | +- C
> +-D          |
>              +-D
>
>
> This is really needed..
>
> Francisco A
>
>
> > pieter
> >
> > On 4/26/06, *Francisco Azevedo* <francisco at fusemail.com
> > <mailto:francisco at fusemail.com>> wrote:
> >
> >
> >      > Done in build 1888.
> >
> >     Well.. feature #001986 is missing :)
> >
> >     YDDatabaseTree should internally care about positions (eg: like
> >     'nleft')
> >     and manage that automatically. This way:
> >     - when we are inserting a node, it should calculate the last
> position
> >     for that parent
> >     - when deleting a node, it should decrease positions of bigger
> >     brothers..
> >
> >     it's not trivial. ;)
> >
> >     Francisco A
> >
> >      > On 4/26/06, *Pieter Claerhout* <pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>
> >      > <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>>
> wrote:
> >      >
> >      >     I will take care of that.
> >      >
> >      >     pieter
> >      >
> >      >     On 4/25/06, *Francisco Azevedo* < francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>>> wrote:
> >      >
> >      >         >  If there's anything we can help with, let us know.
> >      >
> >      >         Sure.. Now, a good help could be:
> >      >
> >      >         - add YDDatabaseTree::updateNode
> >      >
> >      >         - add the position column feature #001986
> >      >
> >      >         - be able to define: setSortField( "parent_id ASC,
> >     position ASC"
> >      >         ) that
> >      >         will sort nodes by parent and nodes with same parent will
> be
> >      >         sorted by
> >      >         its position ;)
> >      >
> >      >         Francisco A
> >
> >     _______________________________________________
> >     YDFramework-devel mailing list
> >     YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> >
> >
> >
> >
> > --
> > pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> .
> > http://www.yellowduck.be/
>
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
>



--
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060426/714c0ca5/attachment.html>

From francisco at fusemail.com  Wed Apr 26 18:26:50 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Wed, 26 Apr 2006 17:26:50 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4aef63030604260829y7673249eka2b9b3e05e9ed93c@mail.gmail.com>
References: <444518AC.1080102@fusemail.com>	 <4aef63030604250700v16e434c9k5ab03f963efbd296@mail.gmail.com>	 <444E2EAD.3060601@fusemail.com>	 <4aef63030604250727o434580ebi7ace3791f6860203@mail.gmail.com>	 <444E64AC.8070405@fusemail.com>	 <4aef63030604252350y7ed6f36bqbaeb34bdc879f4c@mail.gmail.com>	 <4aef63030604260346w41b35917i7419bb8b30bad7c3@mail.gmail.com>	 <444F51C7.2050402@fusemail.com>	 <4aef63030604260418m4954bbbblfa7e2b146dd332c2@mail.gmail.com>	 <444F708C.6010907@fusemail.com> <4aef63030604260829y7673249eka2b9b3e05e9ed93c@mail.gmail.com>
Message-ID: <444F9F4A.9020904@fusemail.com>

> That's why I added the position field for every node. Using updateNode 
> and addingNode, you can take care of the ordering, provided the node 
> contains a field called "position" with the right value.

Well.. now i'm confused. You added a new column 'position' but.. addNode 
and updateNode are still the same (read: they don't care about node 
reordering).

I mean.. imagine this example


    + A (1)
    | +- B  (1)
    | +- C  (2)
    |
    +-D     (2)

Inside '()' we have the correspondent position value for each node.

When i use addNode like:  addNode( X, A, 2 ), this is will be the tree 
with current addNode implementation:

    + A (1)
    | +- B  (1)
    | +- X  (2)
    | +- C  (2)
    |
    +-D     (2)

but it's _wrong_ because addNode didn't update new brother with upper 
position value than 2.


The same for moveNode... if i have the next _correct_ tree

    + A (1)
    | +- B  (1)
    | +- X  (2)
    | +- C  (3)
    |
    +-D     (2)


and i want to move node X to be the first child of A i use: moveNode( X, 
A, 1 ) ... but with current moveNode implementation i will get:


    + A (1)
    | +- B  (1)
    | +- X  (1)
    | +- C  (3)
    |
    +-D     (2)

and not:

    + A (1)
    | +- X  (1)
    | +- B  (2)
    | +- C  (3)
    |
    +-D     (2)


because of the update stuff again..

So, these methods must care about position changing of brothers.. and 
they aren't yet.

Francisco A


> On 4/26/06, *Francisco Azevedo* <francisco at fusemail.com 
> <mailto:francisco at fusemail.com>> wrote:
> 
> 
>      > They way I did it now was to add an extra field called position
>     that can
>      > be used to sort on. By default, the sorting is done on title, but
>     now
>      > it's changed to first sort on position, and then on title. From
>     what I
>      > can see, that should work just fine and have no influence on the
>      > nleft/nright/nlevel values.
> 
>     Yes, nleft, nright and nlevel should not be touched.. but we will need
>     another value 'nposition' to control the order of nodes with same parent
>     (that, of course, have the same nlevel too).
> 
>     Unless you have some idea how to manage positions.. basically all we
>     need is support in addNode and moveNode to define the position.
>     This way we can do things like move node C upper, moveNode( B, A, 2 ):
> 
>     + A          + A
>     | +- B       | +- C
>     | +- C    => | +- B
>     |            |
>     +-D          +-D
> 
> 
>     or... addNode X after B, addNode( X, A, 2 ):
> 
> 
>     + A          + A
>     | +- B       | +- B
>     | +- C    => | +- X
>     |            | +- C
>     +-D          |
>                  +-D
> 
> 
>     This is really needed..
> 
>     Francisco A
> 
> 
>      > pieter
>      >
>      > On 4/26/06, *Francisco Azevedo* <francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      > <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>>
>     wrote:
>      >
>      >
>      >      > Done in build 1888.
>      >
>      >     Well.. feature #001986 is missing :)
>      >
>      >     YDDatabaseTree should internally care about positions (eg: like
>      >     'nleft')
>      >     and manage that automatically. This way:
>      >     - when we are inserting a node, it should calculate the last
>     position
>      >     for that parent
>      >     - when deleting a node, it should decrease positions of bigger
>      >     brothers..
>      >
>      >     it's not trivial. ;)
>      >
>      >     Francisco A
>      >
>      >      > On 4/26/06, *Pieter Claerhout* <pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>
>      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
>      >      > <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>
>     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>>> wrote:
>      >      >
>      >      >     I will take care of that.
>      >      >
>      >      >     pieter
>      >      >
>      >      >     On 4/25/06, *Francisco Azevedo* <
>     francisco at fusemail.com <mailto:francisco at fusemail.com>
>      >     <mailto: francisco at fusemail.com <mailto:francisco at fusemail.com>>
>      >      >     <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com> >>> wrote:
>      >      >
>      >      >         >  If there's anything we can help with, let us know.
>      >      >
>      >      >         Sure.. Now, a good help could be:
>      >      >
>      >      >         - add YDDatabaseTree::updateNode
>      >      >
>      >      >         - add the position column feature #001986
>      >      >
>      >      >         - be able to define: setSortField( "parent_id ASC,
>      >     position ASC"
>      >      >         ) that
>      >      >         will sort nodes by parent and nodes with same
>     parent will be
>      >      >         sorted by
>      >      >         its position ;)
>      >      >
>      >      >         Francisco A
>      >
>      >     _______________________________________________
>      >     YDFramework-devel mailing list
>      >     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto: YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>
>      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
>      >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
>      >
>      >
>      >
>      >
>      > --
>      > pieter claerhout . pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>> .
>      > http://www.yellowduck.be/
> 
>     _______________________________________________
>     YDFramework-devel mailing list
>     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> 
> 
> 
> 
> -- 
> pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> . 
> http://www.yellowduck.be/



From pieter at yellowduck.be  Thu Apr 27 17:42:30 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Thu, 27 Apr 2006 17:42:30 +0200
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <444F9F4A.9020904@fusemail.com>
References: <444518AC.1080102@fusemail.com>
	 <4aef63030604250727o434580ebi7ace3791f6860203@mail.gmail.com>
	 <444E64AC.8070405@fusemail.com>
	 <4aef63030604252350y7ed6f36bqbaeb34bdc879f4c@mail.gmail.com>
	 <4aef63030604260346w41b35917i7419bb8b30bad7c3@mail.gmail.com>
	 <444F51C7.2050402@fusemail.com>
	 <4aef63030604260418m4954bbbblfa7e2b146dd332c2@mail.gmail.com>
	 <444F708C.6010907@fusemail.com>
	 <4aef63030604260829y7673249eka2b9b3e05e9ed93c@mail.gmail.com>
	 <444F9F4A.9020904@fusemail.com>
Message-ID: <4aef63030604270842o4683e83ei358c8def8a50d8b0@mail.gmail.com>

Hi Francisco,

I did some thinking about your request about the position field in the
YDDatabaseTree class, but I don't think we should hardcode it in the class.
The class is very generic right now and that's what most people prefer. The
application could and should take care of maintaining the data for the
position column.

Regards,


pieter

On 4/26/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
>
> > That's why I added the position field for every node. Using updateNode
> > and addingNode, you can take care of the ordering, provided the node
> > contains a field called "position" with the right value.
>
> Well.. now i'm confused. You added a new column 'position' but.. addNode
> and updateNode are still the same (read: they don't care about node
> reordering).
>
> I mean.. imagine this example
>
>
>    + A (1)
>    | +- B  (1)
>    | +- C  (2)
>    |
>    +-D     (2)
>
> Inside '()' we have the correspondent position value for each node.
>
> When i use addNode like:  addNode( X, A, 2 ), this is will be the tree
> with current addNode implementation:
>
>    + A (1)
>    | +- B  (1)
>    | +- X  (2)
>    | +- C  (2)
>    |
>    +-D     (2)
>
> but it's _wrong_ because addNode didn't update new brother with upper
> position value than 2.
>
>
> The same for moveNode... if i have the next _correct_ tree
>
>    + A (1)
>    | +- B  (1)
>    | +- X  (2)
>    | +- C  (3)
>    |
>    +-D     (2)
>
>
> and i want to move node X to be the first child of A i use: moveNode( X,
> A, 1 ) ... but with current moveNode implementation i will get:
>
>
>    + A (1)
>    | +- B  (1)
>    | +- X  (1)
>    | +- C  (3)
>    |
>    +-D     (2)
>
> and not:
>
>    + A (1)
>    | +- X  (1)
>    | +- B  (2)
>    | +- C  (3)
>    |
>    +-D     (2)
>
>
> because of the update stuff again..
>
> So, these methods must care about position changing of brothers.. and
> they aren't yet.
>
> Francisco A
>
>
> > On 4/26/06, *Francisco Azevedo* <francisco at fusemail.com
> > <mailto:francisco at fusemail.com>> wrote:
> >
> >
> >      > They way I did it now was to add an extra field called position
> >     that can
> >      > be used to sort on. By default, the sorting is done on title, but
> >     now
> >      > it's changed to first sort on position, and then on title. From
> >     what I
> >      > can see, that should work just fine and have no influence on the
> >      > nleft/nright/nlevel values.
> >
> >     Yes, nleft, nright and nlevel should not be touched.. but we will
> need
> >     another value 'nposition' to control the order of nodes with same
> parent
> >     (that, of course, have the same nlevel too).
> >
> >     Unless you have some idea how to manage positions.. basically all we
> >     need is support in addNode and moveNode to define the position.
> >     This way we can do things like move node C upper, moveNode( B, A, 2
> ):
> >
> >     + A          + A
> >     | +- B       | +- C
> >     | +- C    => | +- B
> >     |            |
> >     +-D          +-D
> >
> >
> >     or... addNode X after B, addNode( X, A, 2 ):
> >
> >
> >     + A          + A
> >     | +- B       | +- B
> >     | +- C    => | +- X
> >     |            | +- C
> >     +-D          |
> >                  +-D
> >
> >
> >     This is really needed..
> >
> >     Francisco A
> >
> >
> >      > pieter
> >      >
> >      > On 4/26/06, *Francisco Azevedo* <francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      > <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>>
> >     wrote:
> >      >
> >      >
> >      >      > Done in build 1888.
> >      >
> >      >     Well.. feature #001986 is missing :)
> >      >
> >      >     YDDatabaseTree should internally care about positions (eg:
> like
> >      >     'nleft')
> >      >     and manage that automatically. This way:
> >      >     - when we are inserting a node, it should calculate the last
> >     position
> >      >     for that parent
> >      >     - when deleting a node, it should decrease positions of
> bigger
> >      >     brothers..
> >      >
> >      >     it's not trivial. ;)
> >      >
> >      >     Francisco A
> >      >
> >      >      > On 4/26/06, *Pieter Claerhout* <pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>
> >      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
> >      >      > <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>
> >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>>> wrote:
> >      >      >
> >      >      >     I will take care of that.
> >      >      >
> >      >      >     pieter
> >      >      >
> >      >      >     On 4/25/06, *Francisco Azevedo* <
> >     francisco at fusemail.com <mailto:francisco at fusemail.com>
> >      >     <mailto: francisco at fusemail.com <mailto:
> francisco at fusemail.com>>
> >      >      >     <mailto: francisco at fusemail.com
> >     <mailto:francisco at fusemail.com>
> >      >     <mailto:francisco at fusemail.com
> >     <mailto:francisco at fusemail.com> >>> wrote:
> >      >      >
> >      >      >         >  If there's anything we can help with, let us
> know.
> >      >      >
> >      >      >         Sure.. Now, a good help could be:
> >      >      >
> >      >      >         - add YDDatabaseTree::updateNode
> >      >      >
> >      >      >         - add the position column feature #001986
> >      >      >
> >      >      >         - be able to define: setSortField( "parent_id ASC,
> >      >     position ASC"
> >      >      >         ) that
> >      >      >         will sort nodes by parent and nodes with same
> >     parent will be
> >      >      >         sorted by
> >      >      >         its position ;)
> >      >      >
> >      >      >         Francisco A
> >      >
> >      >     _______________________________________________
> >      >     YDFramework-devel mailing list
> >      >     YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >      >     <mailto: YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>>
> >      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> >      >     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> >      >
> >      >
> >      >
> >      >
> >      > --
> >      > pieter claerhout . pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
> >     <mailto:pieter at yellowduck.be>> .
> >      > http://www.yellowduck.be/
> >
> >     _______________________________________________
> >     YDFramework-devel mailing list
> >     YDFramework-devel at lists.berlios.de
> >     <mailto:YDFramework-devel at lists.berlios.de>
> >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
> >
> >
> >
> >
> > --
> > pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> .
> > http://www.yellowduck.be/
>
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
>



--
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060427/86d4be13/attachment.html>

From francisco at fusemail.com  Thu Apr 27 17:52:30 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Thu, 27 Apr 2006 16:52:30 +0100
Subject: [ydf-devel] YDCM feedback
In-Reply-To: <4aef63030604270842o4683e83ei358c8def8a50d8b0@mail.gmail.com>
References: <444518AC.1080102@fusemail.com>	 <4aef63030604250727o434580ebi7ace3791f6860203@mail.gmail.com>	 <444E64AC.8070405@fusemail.com>	 <4aef63030604252350y7ed6f36bqbaeb34bdc879f4c@mail.gmail.com>	 <4aef63030604260346w41b35917i7419bb8b30bad7c3@mail.gmail.com>	 <444F51C7.2050402@fusemail.com>	 <4aef63030604260418m4954bbbblfa7e2b146dd332c2@mail.gmail.com>	 <444F708C.6010907@fusemail.com>	 <4aef63030604260829y7673249eka2b9b3e05e9ed93c@mail.gmail.com>	 <444F9F4A.9020904@fusemail.com> <4aef63030604270842o4683e83ei358c8def8a50d8b0@mail.gmail.com>
Message-ID: <4450E8BE.40003@fusemail.com>

Hi Pieter


> I did some thinking about your request about the position field in the 
> YDDatabaseTree class, but I don't think we should hardcode it in the 
> class. The class is very generic right now and that's what most people 
> prefer. The application could and should take care of maintaining the 
> data for the position column.

Sorry to disagree but this is a internal tree state. If some 
applications don't use that it will be no problem.
I can change the tree state externally but it would become an violation 
(like changing 'nleft' or 'nright').

It's not trivial to implement but i made that tree position management 
in the past and i think it can be done with 2 sql queries before the 
adding/moving sql query.

I think that can be incorporated.. if the developer want's to use 
position, those 2 queries will be executed, otherwise it will be like 
it's now.

What do you think?

Francisco A

>  
> On 4/26/06, *Francisco Azevedo* <francisco at fusemail.com 
> <mailto:francisco at fusemail.com>> wrote:
> 
> 
>      > That's why I added the position field for every node. Using
>     updateNode
>      > and addingNode, you can take care of the ordering, provided the node
>      > contains a field called "position" with the right value.
> 
>     Well.. now i'm confused. You added a new column 'position' but.. addNode
>     and updateNode are still the same (read: they don't care about node
>     reordering).
> 
>     I mean.. imagine this example
> 
> 
>        + A (1)
>        | +- B  (1)
>        | +- C  (2)
>        |
>        +-D     (2)
> 
>     Inside '()' we have the correspondent position value for each node.
> 
>     When i use addNode like:  addNode( X, A, 2 ), this is will be the tree
>     with current addNode implementation:
> 
>        + A (1)
>        | +- B  (1)
>        | +- X  (2)
>        | +- C  (2)
>        |
>        +-D     (2)
> 
>     but it's _wrong_ because addNode didn't update new brother with upper
>     position value than 2.
> 
> 
>     The same for moveNode... if i have the next _correct_ tree
> 
>        + A (1)
>        | +- B  (1)
>        | +- X  (2)
>        | +- C  (3)
>        |
>        +-D     (2)
> 
> 
>     and i want to move node X to be the first child of A i use:
>     moveNode( X,
>     A, 1 ) ... but with current moveNode implementation i will get:
> 
> 
>        + A (1)
>        | +- B  (1)
>        | +- X  (1)
>        | +- C  (3)
>        |
>        +-D     (2)
> 
>     and not:
> 
>        + A (1)
>        | +- X  (1)
>        | +- B  (2)
>        | +- C  (3)
>        |
>        +-D     (2)
> 
> 
>     because of the update stuff again..
> 
>     So, these methods must care about position changing of brothers.. and
>     they aren't yet.
> 
>     Francisco A
> 
> 
>      > On 4/26/06, *Francisco Azevedo* <francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      > <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>>
>     wrote:
>      >
>      >
>      >      > They way I did it now was to add an extra field called
>     position
>      >     that can
>      >      > be used to sort on. By default, the sorting is done on
>     title, but
>      >     now
>      >      > it's changed to first sort on position, and then on title.
>     From
>      >     what I
>      >      > can see, that should work just fine and have no influence
>     on the
>      >      > nleft/nright/nlevel values.
>      >
>      >     Yes, nleft, nright and nlevel should not be touched.. but we
>     will need
>      >     another value 'nposition' to control the order of nodes with
>     same parent
>      >     (that, of course, have the same nlevel too).
>      >
>      >     Unless you have some idea how to manage positions.. basically
>     all we
>      >     need is support in addNode and moveNode to define the position.
>      >     This way we can do things like move node C upper, moveNode(
>     B, A, 2 ):
>      >
>      >     + A          + A
>      >     | +- B       | +- C
>      >     | +- C    => | +- B
>      >     |            |
>      >     +-D          +-D
>      >
>      >
>      >     or... addNode X after B, addNode( X, A, 2 ):
>      >
>      >
>      >     + A          + A
>      >     | +- B       | +- B
>      >     | +- C    => | +- X
>      >     |            | +- C
>      >     +-D          |
>      >                  +-D
>      >
>      >
>      >     This is really needed..
>      >
>      >     Francisco A
>      >
>      >
>      >      > pieter
>      >      >
>      >      > On 4/26/06, *Francisco Azevedo* <francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto: francisco at fusemail.com <mailto:francisco at fusemail.com>>
>      >      > <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com> <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>>>>
>      >     wrote:
>      >      >
>      >      >
>      >      >      > Done in build 1888.
>      >      >
>      >      >     Well.. feature #001986 is missing :)
>      >      >
>      >      >     YDDatabaseTree should internally care about positions
>     (eg: like
>      >      >     'nleft')
>      >      >     and manage that automatically. This way:
>      >      >     - when we are inserting a node, it should calculate
>     the last
>      >     position
>      >      >     for that parent
>      >      >     - when deleting a node, it should decrease positions
>     of bigger
>      >      >     brothers..
>      >      >
>      >      >     it's not trivial. ;)
>      >      >
>      >      >     Francisco A
>      >      >
>      >      >      > On 4/26/06, *Pieter Claerhout*
>     <pieter at yellowduck.be <mailto:pieter at yellowduck.be>
>      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
>      >      >     <mailto:pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>>>
>      >      >      > <mailto: pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>>
>      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>
>     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>>>> wrote:
>      >      >      >
>      >      >      >     I will take care of that.
>      >      >      >
>      >      >      >     pieter
>      >      >      >
>      >      >      >     On 4/25/06, *Francisco Azevedo* <
>      >     francisco at fusemail.com <mailto:francisco at fusemail.com>
>     <mailto: francisco at fusemail.com <mailto:francisco at fusemail.com>>
>      >      >     <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com> <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>>>
>      >      >      >     <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto:francisco at fusemail.com <mailto:francisco at fusemail.com>>
>      >      >     <mailto: francisco at fusemail.com
>     <mailto:francisco at fusemail.com>
>      >     <mailto:francisco at fusemail.com
>     <mailto:francisco at fusemail.com>> >>> wrote:
>      >      >      >
>      >      >      >         >  If there's anything we can help with,
>     let us know.
>      >      >      >
>      >      >      >         Sure.. Now, a good help could be:
>      >      >      >
>      >      >      >         - add YDDatabaseTree::updateNode
>      >      >      >
>      >      >      >         - add the position column feature #001986
>      >      >      >
>      >      >      >         - be able to define: setSortField(
>     "parent_id ASC,
>      >      >     position ASC"
>      >      >      >         ) that
>      >      >      >         will sort nodes by parent and nodes with same
>      >     parent will be
>      >      >      >         sorted by
>      >      >      >         its position ;)
>      >      >      >
>      >      >      >         Francisco A
>      >      >
>      >      >     _______________________________________________
>      >      >     YDFramework-devel mailing list
>      >      >     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto:YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de> >
>      >      >     <mailto: YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto:YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>>
>      >      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>      >     < http://lists.berlios.de/mailman/listinfo/ydframework-devel>
>      >      >    
>     <http://lists.berlios.de/mailman/listinfo/ydframework-devel >
>      >      >
>      >      >
>      >      >
>      >      >
>      >      > --
>      >      > pieter claerhout . pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>
>      >     <mailto: pieter at yellowduck.be <mailto:pieter at yellowduck.be>>
>     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>
>      >     <mailto:pieter at yellowduck.be <mailto:pieter at yellowduck.be>>> .
>      >      > http://www.yellowduck.be/
>      >
>      >     _______________________________________________
>      >     YDFramework-devel mailing list
>      >     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>      >     <mailto:YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>>
>      >     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>      >
>      >
>      >
>      >
>      > --
>      > pieter claerhout . pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be> <mailto:pieter at yellowduck.be
>     <mailto:pieter at yellowduck.be>> .
>      > http://www.yellowduck.be/
> 
>     _______________________________________________
>     YDFramework-devel mailing list
>     YDFramework-devel at lists.berlios.de
>     <mailto:YDFramework-devel at lists.berlios.de>
>     http://lists.berlios.de/mailman/listinfo/ydframework-devel
>     <http://lists.berlios.de/mailman/listinfo/ydframework-devel>
> 
> 
> 
> 
> -- 
> pieter claerhout . pieter at yellowduck.be <mailto:pieter at yellowduck.be> . 
> http://www.yellowduck.be/



