<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ydf-devel] r2482 - in	YDFramework2.0/trunk/YDFramework2/addons/YDAjax: . editors
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/ydframework-devel/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:ydframework-devel%40lists.berlios.de?Subject=Re%3A%20%5Bydf-devel%5D%20r2482%20-%20in%0A%09YDFramework2.0/trunk/YDFramework2/addons/YDAjax%3A%20.%20editors&In-Reply-To=%3C200709101644.l8AGiMAe013316%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001075.html">
   <LINK REL="Next"  HREF="001077.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ydf-devel] r2482 - in	YDFramework2.0/trunk/YDFramework2/addons/YDAjax: . editors</H1>
    <B>ximian at mail.berlios.de</B> 
    <A HREF="mailto:ydframework-devel%40lists.berlios.de?Subject=Re%3A%20%5Bydf-devel%5D%20r2482%20-%20in%0A%09YDFramework2.0/trunk/YDFramework2/addons/YDAjax%3A%20.%20editors&In-Reply-To=%3C200709101644.l8AGiMAe013316%40sheep.berlios.de%3E"
       TITLE="[ydf-devel] r2482 - in	YDFramework2.0/trunk/YDFramework2/addons/YDAjax: . editors">ximian at mail.berlios.de
       </A><BR>
    <I>Mon Sep 10 18:44:22 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001075.html">[ydf-devel] r2481 -	YDFramework2.0/trunk/YDFramework2/addons/YDDatabaseObject
</A></li>
        <LI>Next message: <A HREF="001077.html">[ydf-devel] r2483 -	YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1076">[ date ]</a>
              <a href="thread.html#1076">[ thread ]</a>
              <a href="subject.html#1076">[ subject ]</a>
              <a href="author.html#1076">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: ximian
Date: 2007-09-10 18:44:03 +0200 (Mon, 10 Sep 2007)
New Revision: 2482

Modified:
   YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php
   YDFramework2.0/trunk/YDFramework2/addons/YDAjax/editors/YDAjaxEditor.php
   YDFramework2.0/trunk/YDFramework2/addons/YDAjax/xajaxResponse.inc.php
Log:
on YDAjax:
 - simple fixes

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php	2007-09-10 16:38:40 UTC (rev 2481)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDAjax/YDAjax.php	2007-09-10 16:44:03 UTC (rev 2482)
@@ -128,6 +128,9 @@
 
 			// add default header to template
 			$this-&gt;template-&gt;addJavascript( $html, true, false );
+			
+			// array to store events already added
+			$this-&gt;_eventsAdded = array();
 		}
 
 
@@ -222,6 +225,23 @@
 		}
 
 
+        /**
+         *	This function sets YDAjax to use a custom js function when invoke/close an ajax connection
+         *
+         *	@param $onopen      Javascript function to invoke when opening the box
+         *	@param $onclose     Javascript function to invoke when closing the box
+         */
+		function useWaitingCode( $onopen, $onclose ){
+
+			// create js functions to show/hide div
+			$waitingMessageCodeFunction  = &quot;xajax.loadingFunction     = &quot; . $onopen  . &quot;;\n&quot;;
+			$waitingMessageCodeFunction .= &quot;xajax.doneLoadingFunction = &quot; . $onclose . &quot;;\n&quot;;
+
+			// add waiting message code (that invokes the load/done show/hide) to template 'onload' section
+			$this-&gt;template-&gt;addJavascript( $waitingMessageCodeFunction, false, false );
+		}
+
+
 		// internal method to get a form of an element
 		function &amp; __getForm( $name ){
 
@@ -335,6 +355,17 @@
          */		
 		 function addEvent( $formElementName, $serverFunction, $arguments = null, $event = null, $options = null, $effects = null ){ 
 
+			// compute event signature
+			$sig = $formElementName . serialize( $serverFunction );
+
+			// check if event already added
+			if( in_array( $sig, $this-&gt;_eventsAdded ) ){
+				return;
+			}
+
+			// add signature to list
+			$this-&gt;_eventsAdded[] = $sig;
+
 			// if formElementName is &quot;*&quot; we want to define a default event (only before responses)
 			if ( $formElementName === &quot;*&quot; )
 				return $this-&gt;registerCatchAllFunction( array( $serverFunction[1], $serverFunction[0], $serverFunction[1] ) );
@@ -715,7 +746,7 @@
          *	@param $attribute			(Optional) Optional atribute to apply result (auto-detection by default when using null).
          *	@param $options				(Optional) Aditional options.
          */	
-		function addResult( $formElementName, $result, $attribute = null, $options = array() ){
+		function addResult( $formElementName, &amp; $result, $attribute = null, $options = array() ){
 
 			// if result is a string we must parse it. Javascript strings cannot contain new lines
 			if ( is_string( $result ) ){
@@ -750,7 +781,7 @@
 			$result = 'document.getElementById(&quot;' . $formElementName . '&quot;).' . $attribute . ' = &quot;' . $result . '&quot;;';
 			
 			// assign result to form element using the id
-			return $this-&gt;response-&gt;addScript( &amp;$result  );
+			return $this-&gt;response-&gt;addScript( $result );
 		}
 
 

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDAjax/editors/YDAjaxEditor.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDAjax/editors/YDAjaxEditor.php	2007-09-10 16:38:40 UTC (rev 2481)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDAjax/editors/YDAjaxEditor.php	2007-09-10 16:44:03 UTC (rev 2482)
@@ -75,7 +75,7 @@
 		
 			// start by creating an FCKeditor object
 			$js  = &quot;oFCKeditor = new FCKeditor( '&quot; . $htmlID .&quot;' );&quot;;
-			
+
 			// set the editor path
 			$js .= &quot;oFCKeditor.BasePath = '&quot; . YDConfig::get( 'YD_AJAXEDITOR_FCKEDITOR_Url' ) . &quot;';&quot;;
 			
@@ -89,15 +89,14 @@
 			$js .= 'oFCKeditor.ToolbarSet = &quot;' . YDConfig::get( 'YD_AJAXEDITOR_FCKEDITOR_ToolbarSet' ) . '&quot;;';
 
 			// set size and language
-			$js .= &quot;oFCKeditor.Height = 510;&quot;;
-			$js .= 'oFCKeditor.Width = &quot;100%&quot;;';
+			$js .= &quot;oFCKeditor.Height = 210;&quot;;
+			$js .= 'oFCKeditor.Width = &quot;90%&quot;;';
 			$js .= 'oFCKeditor.Config[&quot;AutoDetectLanguage&quot;] = false;';
 			$js .= 'oFCKeditor.Config[&quot;DefaultLanguage&quot;] = &quot;' . YDConfig::get( 'YD_AJAXEDITOR_FCKEDITOR_DefaultLanguage' ) . '&quot;;';
 
 
 			// on fckeditor we add a replace method (that will replace the textarea)
 			$js .= &quot;oFCKeditor.ReplaceTextarea();&quot;;
-
 			return $js;
 		}
 

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDAjax/xajaxResponse.inc.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDAjax/xajaxResponse.inc.php	2007-09-10 16:38:40 UTC (rev 2481)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDAjax/xajaxResponse.inc.php	2007-09-10 16:44:03 UTC (rev 2482)
@@ -1,360 +1,360 @@
-&lt;?php
-///////////////////////////////////////////////////////////////////////////////
-// xajaxResponse.inc.php :: xajax XML response class
-//
-// xajax version 0.2.3
-// copyright (c) 2005 by Jared White &amp; J. Max Wilson
-// <A HREF="http://www.xajaxproject.org">http://www.xajaxproject.org</A>
-//
-// xajax is an open source PHP class library for easily creating powerful
-// PHP-driven, web-based Ajax Applications. Using xajax, you can asynchronously
-// call PHP functions and update the content of your your webpage without
-// reloading the page.
-//
-// xajax is released under the terms of the LGPL license
-// <A HREF="http://www.gnu.org/copyleft/lesser.html#SEC3">http://www.gnu.org/copyleft/lesser.html#SEC3</A>
-//
-// This library is free software; you can redistribute it and/or
-// modify it under the terms of the GNU Lesser General Public
-// License as published by the Free Software Foundation; either
-// version 2.1 of the License, or (at your option) any later version.
-//
-// This library is distributed in the hope that it will be useful,
-// but WITHOUT ANY WARRANTY; without even the implied warranty of
-// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-// Lesser General Public License for more details.
-// 
-// You should have received a copy of the GNU Lesser General Public
-// License along with this library; if not, write to the Free Software
-// Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
-///////////////////////////////////////////////////////////////////////////////
-
-/*
-   ----------------------------------------------------------------------------
-   | Online documentation for this class is available on the xajax wiki at:   |
-   | <A HREF="http://wiki.xajaxproject.org/Documentation:xajaxResponse.inc.php">http://wiki.xajaxproject.org/Documentation:xajaxResponse.inc.php</A>         |
-   ----------------------------------------------------------------------------
-*/
-
-// The xajaxResponse class is used to created responses to be sent back to your
-// webpage.  A response contains one or more command messages for updating your page.
-// Currently xajax supports 18 kinds of command messages, including some common ones such as:
-// * Assign - sets the specified attribute of an element in your page
-// * Append - appends data to the end of the specified attribute of an element in your page
-// * Prepend - prepends data to the beginning of the specified attribute of an element in your page
-// * Replace - searches for and replaces data in the specified attribute of an element in your page
-// * Script - runs the supplied JavaScript code
-// * Alert - shows an alert box with the supplied message text
-//
-// *Note: elements are identified by their HTML id, so if you don't see your browser HTML display changing from the request, make sure you're using the right id names in your response.
-
-class xajaxResponse
-{
-	var $xml;
-	var $sEncoding;
-	var $bOutputEntities;
-
-	// Constructor. Its main job is to set the character encoding for the response.
-	// $sEncoding is a string containing the character encoding string to use.
-	// $bOutputEntities lets you set if you want special characters in the output
-	//  converted to HTML entities
-	// * Note: to change the character encoding for all of the responses, set the
-	// XAJAX_DEFAULT_ENCODING constant near the beginning of the xajax.inc.php file
-	function xajaxResponse($sEncoding=XAJAX_DEFAULT_CHAR_ENCODING, $bOutputEntities=false)
-	{
-		$this-&gt;setCharEncoding($sEncoding);
-		$this-&gt;bOutputEntities = $bOutputEntities;
-	}
-	
-	// setCharEncoding() sets the character encoding for the response based on
-	// $sEncoding, which is a string containing the character encoding to use. You
-	// don't need to use this method normally, since the character encoding for the
-	// response gets set automatically based on the XAJAX_DEFAULT_CHAR_ENCODING
-	// constant.
-	function setCharEncoding($sEncoding)
-	{
-		$this-&gt;sEncoding = $sEncoding;
-	}
-	
-	// outputEntitiesOn() tells the response object to convert special characters to
-	// HTML entities automatically (only works if the mb_string extension is available).
-	function outputEntitiesOn()
-	{
-		$this-&gt;bOutputEntities = true;
-	}
-	
-	// outputEntitiesOff() tells the response object to output special characters
-	// intact. (default behavior)
-	function outputEntitiesOff()
-	{
-		$this-&gt;bOutputEntities = false;
-	}
-	
-	// addAssign() adds an assign command message to the XML response
-	// $sTarget is a string containing the id of an HTML element
-	// $sAttribute is the part of the element you wish to modify (&quot;innerHTML&quot;, &quot;value&quot;, etc.)
-	// $sData is the data you want to set the attribute to
-	// usage: $objResponse-&gt;addAssign(&quot;contentDiv&quot;, &quot;innerHTML&quot;, &quot;Some Text&quot;);
-	function addAssign($sTarget,$sAttribute,$sData)
-	{
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;as&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sAttribute),$sData);
-	}
-	
-	// addAppend() adds an append command message to the XML response
-	// $sTarget is a string containing the id of an HTML element
-	// $sAttribute is the part of the element you wish to modify (&quot;innerHTML&quot;, &quot;value&quot;, etc.)
-	// $sData is the data you want to append to the end of the attribute
-	// usage: $objResponse-&gt;addAppend(&quot;contentDiv&quot;, &quot;innerHTML&quot;, &quot;Some New Text&quot;);
-	function addAppend($sTarget,$sAttribute,$sData)
-	{	
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ap&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sAttribute),$sData);
-	}
-	
-	// addPrepend() adds an prepend command message to the XML response
-	// $sTarget is a string containing the id of an HTML element
-	// $sAttribute is the part of the element you wish to modify (&quot;innerHTML&quot;, &quot;value&quot;, etc.)
-	// $sData is the data you want to prepend to the beginning of the attribute
-	// usage: $objResponse-&gt;addPrepend(&quot;contentDiv&quot;, &quot;innerHTML&quot;, &quot;Some Starting Text&quot;);
-	function addPrepend($sTarget,$sAttribute,$sData)
-	{
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;pp&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sAttribute),$sData);
-	}
-	
-	// addReplace() adds an replace command message to the XML response
-	// $sTarget is a string containing the id of an HTML element
-	// $sAttribute is the part of the element you wish to modify (&quot;innerHTML&quot;, &quot;value&quot;, etc.)
-	// $sSearch is a string to search for
-	// $sData is a string to replace the search string when found in the attribute
-	// usage: $objResponse-&gt;addReplace(&quot;contentDiv&quot;, &quot;innerHTML&quot;, &quot;text&quot;, &quot;&lt;b&gt;text&lt;/b&gt;&quot;);
-	function addReplace($sTarget,$sAttribute,$sSearch,$sData)
-	{
-		$sDta = &quot;&lt;s&gt;&lt;![CDATA[$sSearch]]&gt;&lt;/s&gt;&lt;r&gt;&lt;![CDATA[$sData]]&gt;&lt;/r&gt;&quot;;
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;rp&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sAttribute),$sDta);
-	}
-	
-	// addClear() adds an clear command message to the XML response
-	// $sTarget is a string containing the id of an HTML element
-	// $sAttribute is the part of the element you wish to clear (&quot;innerHTML&quot;, &quot;value&quot;, etc.)
-	// usage: $objResponse-&gt;addClear(&quot;contentDiv&quot;, &quot;innerHTML&quot;);
-	function addClear($sTarget,$sAttribute)
-	{
-		$this-&gt;addAssign($sTarget,$sAttribute,'');
-	}
-	
-	// addAlert() adds an alert command message to the XML response
-	// $sMsg is the text to be displayed in the Javascript alert box
-	// usage: $objResponse-&gt;addAlert(&quot;This is important information&quot;);
-	function addAlert($sMsg)
-	{
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;al&quot;),$sMsg);
-	}
-	
-	// addRedirect() uses the addScript() method to add a Javascript redirect to
-	// another URL
-	// $sURL is the URL to redirect the client browser to
-	// usage: $objResponse-&gt;addRedirect(&quot;<A HREF="http://www.xajaxproject.org">http://www.xajaxproject.org</A>&quot;);
-	function addRedirect($sURL)
-	{
-		//we need to parse the query part so that the values are rawurlencode()'ed
-		//can't just use parse_url() cos we could be dealing with a relative URL which
-		//  parse_url() can't deal with.
-		$queryStart = strpos($sURL, '?', strrpos($sURL, '/'));
-		if ($queryStart !== FALSE)
-		{
-			$queryStart++;
-			$queryEnd = strpos($sURL, '#', $queryStart);
-			if ($queryEnd === FALSE)
-				$queryEnd = strlen($sURL);
-			$queryPart = substr($sURL, $queryStart, $queryEnd-$queryStart);
-			parse_str($queryPart, $queryParts);
-			$newQueryPart = &quot;&quot;;
-			foreach($queryParts as $key =&gt; $value)
-			{
-				$newQueryPart .= rawurlencode($key).'='.rawurlencode($value).ini_get('arg_separator.output');
-			}
-			$sURL = str_replace($queryPart, $newQueryPart, $sURL);
-		}
-		$this-&gt;addScript('window.location = &quot;'.$sURL.'&quot;;');
-	}
-
-	// addScript() adds a Javascript command message to the XML response
-	// $sJS is a string containing Javascript code to be executed
-	// usage: $objResponse-&gt;addScript(&quot;var x = prompt('get some text');&quot;);
-	function addScript($sJS)
-	{
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;js&quot;),$sJS);
-	}
-	
-	// addRemove() adds a remove element command message to the XML response
-	// $sTarget is a string containing the id of an HTML element to be removed
-	// from your page
-	// usage: $objResponse-&gt;addRemove(&quot;Div2&quot;);
-	function addRemove($sTarget)
-	{
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;rm&quot;,&quot;t&quot;=&gt;$sTarget),'');
-	}
-	
-	// addCreate() adds a create element command message to the XML response
-	// $sParent is a string containing the id of an HTML element to which the new
-	// element will be appended.
-	// $sTag is the tag to be added
-	// $sId is the id to be assigned to the new element
-	// $sType has been deprecated, use the addCreateInput() method instead
-	// usage: $objResponse-&gt;addCreate(&quot;parentDiv&quot;, &quot;h3&quot;, &quot;myid&quot;);
-	function addCreate($sParent, $sTag, $sId, $sType=&quot;&quot;)
-	{
-		if ($sType)
-		{
-			trigger_error(&quot;The \$sType parameter of addCreate has been deprecated.  Use the addCreateInput() method instead.&quot;, E_USER_WARNING);
-			return;
-		}
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ce&quot;,&quot;t&quot;=&gt;$sParent,&quot;p&quot;=&gt;$sId),$sTag);
-	}
-	
-	// addInsert() adds an insert element command message to the XML response
-	// $sBefore is a string containing the id of the child before which the new element
-	// will be inserted
-	// $sTag is the tag to be added
-	// $sId is the id to be assigned to the new element
-	// usage: $objResponse-&gt;addInsert(&quot;childDiv&quot;, &quot;h3&quot;, &quot;myid&quot;);
-	function addInsert($sBefore, $sTag, $sId)
-	{
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ie&quot;,&quot;t&quot;=&gt;$sBefore,&quot;p&quot;=&gt;$sId),$sTag);
-	}
-
-	// addInsertAfter() adds an insert element command message to the XML response
-	// $sAfter is a string containing the id of the child after which the new element
-	// will be inserted
-	// $sTag is the tag to be added
-	// $sId is the id to be assigned to the new element
-	// usage: $objResponse-&gt;addInsertAfter(&quot;childDiv&quot;, &quot;h3&quot;, &quot;myid&quot;);	
-	function addInsertAfter($sAfter, $sTag, $sId)
-	{
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ia&quot;,&quot;t&quot;=&gt;$sAfter,&quot;p&quot;=&gt;$sId),$sTag);
-	}
-	
-	// addCreateInput() adds a create input command message to the XML response
-	// $sParent is a string containing the id of an HTML element to which the new
-	// input will be appended
-	// $sType is the type of input to be created (text, radio, checkbox, etc.)
-	// $sName is the name to be assigned to the new input and the variable name when it is submitted
-	// $sId is the id to be assigned to the new input
-	// usage: $objResponse-&gt;addCreateInput(&quot;form1&quot;, &quot;text&quot;, &quot;username&quot;, &quot;input1&quot;);
-	function addCreateInput($sParent, $sType, $sName, $sId)
-	{
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ci&quot;,&quot;t&quot;=&gt;$sParent,&quot;p&quot;=&gt;$sId,&quot;c&quot;=&gt;$sType),$sName);
-	}
-	
-	// addInsertInput() adds an insert input command message to the XML response
-	// $sBefore is a string containing the id of the child before which the new element
-	// will be inserted
-	// $sType is the type of input to be created (text, radio, checkbox, etc.)
-	// $sName is the name to be assigned to the new input and the variable name when it is submitted
-	// $sId is the id to be assigned to the new input
-	// usage: $objResponse-&gt;addInsertInput(&quot;input5&quot;, &quot;text&quot;, &quot;username&quot;, &quot;input1&quot;);
-	function addInsertInput($sBefore, $sType, $sName, $sId)
-	{
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ii&quot;,&quot;t&quot;=&gt;$sBefore,&quot;p&quot;=&gt;$sId,&quot;c&quot;=&gt;$sType),$sName);
-	}
-	
-	// addEvent() adds an event command message to the XML response
-	// $sTarget is a string containing the id of an HTML element
-	// $sEvent is the event you wish to set (&quot;click&quot;, &quot;mouseover&quot;, etc.)
-	// $sScript is the Javascript string you want to the event to invoke
-	// usage: $objResponse-&gt;addEvent(&quot;contentDiv&quot;, &quot;click&quot;, &quot;alert(\'Hello World\');&quot;);
-	function addEvent($sTarget,$sEvent,$sScript)
-	{
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ev&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sEvent),$sScript);
-	}
-	
-	// addHandler() adds a handler command message to the XML response
-	// $sTarget is a string containing the id of an HTML element
-	// $sEvent is the event you wish to set (&quot;click&quot;, &quot;mouseover&quot;, etc.)
-	// $sHandler is a string containing the name of a Javascript function
-	// that will handle the event. Multiple handlers can be added for the same event
-	// usage: $objResponse-&gt;addHandler(&quot;contentDiv&quot;, &quot;click&quot;, &quot;content_click&quot;);
-	function addHandler($sTarget,$sEvent,$sHandler)
-	{	
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ah&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sEvent),$sHandler);
-	}
-	
-	// addRemoveHandler() adds a remove handler command message to the XML response
-	// $sTarget is a string containing the id of an HTML element
-	// $sEvent is the event you wish to remove (&quot;click&quot;, &quot;mouseover&quot;, etc.)
-	// $sHandler is a string containing the name of a Javascript handler function
-	// that you want to remove
-	// usage: $objResponse-&gt;addRemoveHandler(&quot;contentDiv&quot;, &quot;click&quot;, &quot;content_click&quot;);
-	function addRemoveHandler($sTarget,$sEvent,$sHandler)
-	{	
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;rh&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sEvent),$sHandler);
-	}
-	
-	// addIncludeScript() adds an include script command message to the XML response
-	// $sFileName is a URL of the Javascript file to include
-	// usage: $objResponse-&gt;addIncludeScript(&quot;functions.js&quot;);
-	function addIncludeScript($sFileName)
-	{
-		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;in&quot;),$sFileName);
-	}
-	
-	// getXML() returns the XML to be returned from your function to the xajax
-	// processor on your page. Since xajax 0.2, you can also return an xajaxResponse
-	// object from your function directly, and xajax will automatically request the
-	// XML using this method call.
-	// usage: return $objResponse-&gt;getXML();
-	function getXML()
-	{
-		$sXML = &quot;&lt;?xml version=\&quot;1.0\&quot;&quot;;
-		if ($this-&gt;sEncoding &amp;&amp; strlen(trim($this-&gt;sEncoding)) &gt; 0)
-			$sXML .= &quot; encoding=\&quot;&quot;.$this-&gt;sEncoding.&quot;\&quot;&quot;;
-		$sXML .= &quot; ?&quot;.&quot;&gt;&lt;xjx&gt;&quot; . $this-&gt;xml . &quot;&lt;/xjx&gt;&quot;;
-		
-		return $sXML;
-	}
-	
-	// loadXML() adds the commands of the provided response XML output to this
-	// response object
-	// $sXML is the response XML (returned from a getXML() method) to add to the
-	// end of this response object
-	// usage: $r1 = $objResponse1-&gt;getXML();
-	//        $objResponse2-&gt;loadXML($r1);
-	//        return $objResponse2-&gt;getXML();
-	function loadXML($mXML)
-	{
-		if (is_a($mXML, &quot;xajaxResponse&quot;)) {
-			$mXML = $mXML-&gt;getXML();
-		}
-		$sNewXML = &quot;&quot;;
-		$iStartPos = strpos($mXML, &quot;&lt;xjx&gt;&quot;) + 5;
-		$sNewXML = substr($mXML, $iStartPos);
-		$iEndPos = strpos($sNewXML, &quot;&lt;/xjx&gt;&quot;);
-		$sNewXML = substr($sNewXML, 0, $iEndPos);
-		$this-&gt;xml .= $sNewXML;
-	}
-
-	// private method, used internally
-	function _cmdXML($aAttributes, $sData)
-	{
-		if ($this-&gt;bOutputEntities) {
-			if (function_exists('mb_convert_encoding')) {
-				$sData = call_user_func_array('mb_convert_encoding', array(&amp;$sData, 'HTML-ENTITIES', $this-&gt;sEncoding));
-			}
-			else {
-				trigger_error(&quot;The xajax XML response output could not be converted to HTML entities because the mb_convert_encoding function is not available&quot;, E_USER_NOTICE);
-			}
-		}
-		$xml = &quot;&lt;cmd&quot;;
-		foreach($aAttributes as $sAttribute =&gt; $sValue)
-			$xml .= &quot; $sAttribute=\&quot;$sValue\&quot;&quot;;
-		if ($sData !== null &amp;&amp; !stristr($sData,'&lt;![CDATA['))
-			$xml .= &quot;&gt;&lt;![CDATA[$sData]]&gt;&lt;/cmd&gt;&quot;;
-		else if ($sData !== null)
-			$xml .= &quot;&gt;$sData&lt;/cmd&gt;&quot;;
-		else
-			$xml .= &quot;&gt;&lt;/cmd&gt;&quot;;
-		
-		return $xml;
-	}
-	
-}// end class xajaxResponse
-?&gt;
+&lt;?php
+///////////////////////////////////////////////////////////////////////////////
+// xajaxResponse.inc.php :: xajax XML response class
+//
+// xajax version 0.2.3
+// copyright (c) 2005 by Jared White &amp; J. Max Wilson
+// <A HREF="http://www.xajaxproject.org">http://www.xajaxproject.org</A>
+//
+// xajax is an open source PHP class library for easily creating powerful
+// PHP-driven, web-based Ajax Applications. Using xajax, you can asynchronously
+// call PHP functions and update the content of your your webpage without
+// reloading the page.
+//
+// xajax is released under the terms of the LGPL license
+// <A HREF="http://www.gnu.org/copyleft/lesser.html#SEC3">http://www.gnu.org/copyleft/lesser.html#SEC3</A>
+//
+// This library is free software; you can redistribute it and/or
+// modify it under the terms of the GNU Lesser General Public
+// License as published by the Free Software Foundation; either
+// version 2.1 of the License, or (at your option) any later version.
+//
+// This library is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+// Lesser General Public License for more details.
+// 
+// You should have received a copy of the GNU Lesser General Public
+// License along with this library; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+///////////////////////////////////////////////////////////////////////////////
+
+/*
+   ----------------------------------------------------------------------------
+   | Online documentation for this class is available on the xajax wiki at:   |
+   | <A HREF="http://wiki.xajaxproject.org/Documentation:xajaxResponse.inc.php">http://wiki.xajaxproject.org/Documentation:xajaxResponse.inc.php</A>         |
+   ----------------------------------------------------------------------------
+*/
+
+// The xajaxResponse class is used to created responses to be sent back to your
+// webpage.  A response contains one or more command messages for updating your page.
+// Currently xajax supports 18 kinds of command messages, including some common ones such as:
+// * Assign - sets the specified attribute of an element in your page
+// * Append - appends data to the end of the specified attribute of an element in your page
+// * Prepend - prepends data to the beginning of the specified attribute of an element in your page
+// * Replace - searches for and replaces data in the specified attribute of an element in your page
+// * Script - runs the supplied JavaScript code
+// * Alert - shows an alert box with the supplied message text
+//
+// *Note: elements are identified by their HTML id, so if you don't see your browser HTML display changing from the request, make sure you're using the right id names in your response.
+
+class xajaxResponse
+{
+	var $xml;
+	var $sEncoding;
+	var $bOutputEntities;
+
+	// Constructor. Its main job is to set the character encoding for the response.
+	// $sEncoding is a string containing the character encoding string to use.
+	// $bOutputEntities lets you set if you want special characters in the output
+	//  converted to HTML entities
+	// * Note: to change the character encoding for all of the responses, set the
+	// XAJAX_DEFAULT_ENCODING constant near the beginning of the xajax.inc.php file
+	function xajaxResponse($sEncoding=XAJAX_DEFAULT_CHAR_ENCODING, $bOutputEntities=false)
+	{
+		$this-&gt;setCharEncoding($sEncoding);
+		$this-&gt;bOutputEntities = $bOutputEntities;
+	}
+	
+	// setCharEncoding() sets the character encoding for the response based on
+	// $sEncoding, which is a string containing the character encoding to use. You
+	// don't need to use this method normally, since the character encoding for the
+	// response gets set automatically based on the XAJAX_DEFAULT_CHAR_ENCODING
+	// constant.
+	function setCharEncoding($sEncoding)
+	{
+		$this-&gt;sEncoding = $sEncoding;
+	}
+	
+	// outputEntitiesOn() tells the response object to convert special characters to
+	// HTML entities automatically (only works if the mb_string extension is available).
+	function outputEntitiesOn()
+	{
+		$this-&gt;bOutputEntities = true;
+	}
+	
+	// outputEntitiesOff() tells the response object to output special characters
+	// intact. (default behavior)
+	function outputEntitiesOff()
+	{
+		$this-&gt;bOutputEntities = false;
+	}
+	
+	// addAssign() adds an assign command message to the XML response
+	// $sTarget is a string containing the id of an HTML element
+	// $sAttribute is the part of the element you wish to modify (&quot;innerHTML&quot;, &quot;value&quot;, etc.)
+	// $sData is the data you want to set the attribute to
+	// usage: $objResponse-&gt;addAssign(&quot;contentDiv&quot;, &quot;innerHTML&quot;, &quot;Some Text&quot;);
+	function addAssign($sTarget,$sAttribute,$sData)
+	{
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;as&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sAttribute),$sData);
+	}
+	
+	// addAppend() adds an append command message to the XML response
+	// $sTarget is a string containing the id of an HTML element
+	// $sAttribute is the part of the element you wish to modify (&quot;innerHTML&quot;, &quot;value&quot;, etc.)
+	// $sData is the data you want to append to the end of the attribute
+	// usage: $objResponse-&gt;addAppend(&quot;contentDiv&quot;, &quot;innerHTML&quot;, &quot;Some New Text&quot;);
+	function addAppend($sTarget,$sAttribute,$sData)
+	{	
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ap&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sAttribute),$sData);
+	}
+	
+	// addPrepend() adds an prepend command message to the XML response
+	// $sTarget is a string containing the id of an HTML element
+	// $sAttribute is the part of the element you wish to modify (&quot;innerHTML&quot;, &quot;value&quot;, etc.)
+	// $sData is the data you want to prepend to the beginning of the attribute
+	// usage: $objResponse-&gt;addPrepend(&quot;contentDiv&quot;, &quot;innerHTML&quot;, &quot;Some Starting Text&quot;);
+	function addPrepend($sTarget,$sAttribute,$sData)
+	{
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;pp&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sAttribute),$sData);
+	}
+	
+	// addReplace() adds an replace command message to the XML response
+	// $sTarget is a string containing the id of an HTML element
+	// $sAttribute is the part of the element you wish to modify (&quot;innerHTML&quot;, &quot;value&quot;, etc.)
+	// $sSearch is a string to search for
+	// $sData is a string to replace the search string when found in the attribute
+	// usage: $objResponse-&gt;addReplace(&quot;contentDiv&quot;, &quot;innerHTML&quot;, &quot;text&quot;, &quot;&lt;b&gt;text&lt;/b&gt;&quot;);
+	function addReplace($sTarget,$sAttribute,$sSearch,$sData)
+	{
+		$sDta = &quot;&lt;s&gt;&lt;![CDATA[$sSearch]]&gt;&lt;/s&gt;&lt;r&gt;&lt;![CDATA[$sData]]&gt;&lt;/r&gt;&quot;;
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;rp&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sAttribute),$sDta);
+	}
+	
+	// addClear() adds an clear command message to the XML response
+	// $sTarget is a string containing the id of an HTML element
+	// $sAttribute is the part of the element you wish to clear (&quot;innerHTML&quot;, &quot;value&quot;, etc.)
+	// usage: $objResponse-&gt;addClear(&quot;contentDiv&quot;, &quot;innerHTML&quot;);
+	function addClear($sTarget,$sAttribute)
+	{
+		$this-&gt;addAssign($sTarget,$sAttribute,'');
+	}
+	
+	// addAlert() adds an alert command message to the XML response
+	// $sMsg is the text to be displayed in the Javascript alert box
+	// usage: $objResponse-&gt;addAlert(&quot;This is important information&quot;);
+	function addAlert($sMsg)
+	{
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;al&quot;),$sMsg);
+	}
+	
+	// addRedirect() uses the addScript() method to add a Javascript redirect to
+	// another URL
+	// $sURL is the URL to redirect the client browser to
+	// usage: $objResponse-&gt;addRedirect(&quot;<A HREF="http://www.xajaxproject.org">http://www.xajaxproject.org</A>&quot;);
+	function addRedirect($sURL)
+	{
+		//we need to parse the query part so that the values are rawurlencode()'ed
+		//can't just use parse_url() cos we could be dealing with a relative URL which
+		//  parse_url() can't deal with.
+		$queryStart = strpos($sURL, '?', strrpos($sURL, '/'));
+		if ($queryStart !== FALSE)
+		{
+			$queryStart++;
+			$queryEnd = strpos($sURL, '#', $queryStart);
+			if ($queryEnd === FALSE)
+				$queryEnd = strlen($sURL);
+			$queryPart = substr($sURL, $queryStart, $queryEnd-$queryStart);
+			parse_str($queryPart, $queryParts);
+			$newQueryPart = &quot;&quot;;
+			foreach($queryParts as $key =&gt; $value)
+			{
+				$newQueryPart .= rawurlencode($key).'='.rawurlencode($value).ini_get('arg_separator.output');
+			}
+			$sURL = str_replace($queryPart, $newQueryPart, $sURL);
+		}
+		$this-&gt;addScript('window.location = &quot;'.$sURL.'&quot;;');
+	}
+
+	// addScript() adds a Javascript command message to the XML response
+	// $sJS is a string containing Javascript code to be executed
+	// usage: $objResponse-&gt;addScript(&quot;var x = prompt('get some text');&quot;);
+	function addScript(&amp; $sJS)
+	{
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;js&quot;),$sJS);
+	}
+	
+	// addRemove() adds a remove element command message to the XML response
+	// $sTarget is a string containing the id of an HTML element to be removed
+	// from your page
+	// usage: $objResponse-&gt;addRemove(&quot;Div2&quot;);
+	function addRemove($sTarget)
+	{
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;rm&quot;,&quot;t&quot;=&gt;$sTarget),'');
+	}
+	
+	// addCreate() adds a create element command message to the XML response
+	// $sParent is a string containing the id of an HTML element to which the new
+	// element will be appended.
+	// $sTag is the tag to be added
+	// $sId is the id to be assigned to the new element
+	// $sType has been deprecated, use the addCreateInput() method instead
+	// usage: $objResponse-&gt;addCreate(&quot;parentDiv&quot;, &quot;h3&quot;, &quot;myid&quot;);
+	function addCreate($sParent, $sTag, $sId, $sType=&quot;&quot;)
+	{
+		if ($sType)
+		{
+			trigger_error(&quot;The \$sType parameter of addCreate has been deprecated.  Use the addCreateInput() method instead.&quot;, E_USER_WARNING);
+			return;
+		}
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ce&quot;,&quot;t&quot;=&gt;$sParent,&quot;p&quot;=&gt;$sId),$sTag);
+	}
+	
+	// addInsert() adds an insert element command message to the XML response
+	// $sBefore is a string containing the id of the child before which the new element
+	// will be inserted
+	// $sTag is the tag to be added
+	// $sId is the id to be assigned to the new element
+	// usage: $objResponse-&gt;addInsert(&quot;childDiv&quot;, &quot;h3&quot;, &quot;myid&quot;);
+	function addInsert($sBefore, $sTag, $sId)
+	{
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ie&quot;,&quot;t&quot;=&gt;$sBefore,&quot;p&quot;=&gt;$sId),$sTag);
+	}
+
+	// addInsertAfter() adds an insert element command message to the XML response
+	// $sAfter is a string containing the id of the child after which the new element
+	// will be inserted
+	// $sTag is the tag to be added
+	// $sId is the id to be assigned to the new element
+	// usage: $objResponse-&gt;addInsertAfter(&quot;childDiv&quot;, &quot;h3&quot;, &quot;myid&quot;);	
+	function addInsertAfter($sAfter, $sTag, $sId)
+	{
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ia&quot;,&quot;t&quot;=&gt;$sAfter,&quot;p&quot;=&gt;$sId),$sTag);
+	}
+	
+	// addCreateInput() adds a create input command message to the XML response
+	// $sParent is a string containing the id of an HTML element to which the new
+	// input will be appended
+	// $sType is the type of input to be created (text, radio, checkbox, etc.)
+	// $sName is the name to be assigned to the new input and the variable name when it is submitted
+	// $sId is the id to be assigned to the new input
+	// usage: $objResponse-&gt;addCreateInput(&quot;form1&quot;, &quot;text&quot;, &quot;username&quot;, &quot;input1&quot;);
+	function addCreateInput($sParent, $sType, $sName, $sId)
+	{
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ci&quot;,&quot;t&quot;=&gt;$sParent,&quot;p&quot;=&gt;$sId,&quot;c&quot;=&gt;$sType),$sName);
+	}
+	
+	// addInsertInput() adds an insert input command message to the XML response
+	// $sBefore is a string containing the id of the child before which the new element
+	// will be inserted
+	// $sType is the type of input to be created (text, radio, checkbox, etc.)
+	// $sName is the name to be assigned to the new input and the variable name when it is submitted
+	// $sId is the id to be assigned to the new input
+	// usage: $objResponse-&gt;addInsertInput(&quot;input5&quot;, &quot;text&quot;, &quot;username&quot;, &quot;input1&quot;);
+	function addInsertInput($sBefore, $sType, $sName, $sId)
+	{
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ii&quot;,&quot;t&quot;=&gt;$sBefore,&quot;p&quot;=&gt;$sId,&quot;c&quot;=&gt;$sType),$sName);
+	}
+	
+	// addEvent() adds an event command message to the XML response
+	// $sTarget is a string containing the id of an HTML element
+	// $sEvent is the event you wish to set (&quot;click&quot;, &quot;mouseover&quot;, etc.)
+	// $sScript is the Javascript string you want to the event to invoke
+	// usage: $objResponse-&gt;addEvent(&quot;contentDiv&quot;, &quot;click&quot;, &quot;alert(\'Hello World\');&quot;);
+	function addEvent($sTarget,$sEvent,$sScript)
+	{
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ev&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sEvent),$sScript);
+	}
+	
+	// addHandler() adds a handler command message to the XML response
+	// $sTarget is a string containing the id of an HTML element
+	// $sEvent is the event you wish to set (&quot;click&quot;, &quot;mouseover&quot;, etc.)
+	// $sHandler is a string containing the name of a Javascript function
+	// that will handle the event. Multiple handlers can be added for the same event
+	// usage: $objResponse-&gt;addHandler(&quot;contentDiv&quot;, &quot;click&quot;, &quot;content_click&quot;);
+	function addHandler($sTarget,$sEvent,$sHandler)
+	{	
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;ah&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sEvent),$sHandler);
+	}
+	
+	// addRemoveHandler() adds a remove handler command message to the XML response
+	// $sTarget is a string containing the id of an HTML element
+	// $sEvent is the event you wish to remove (&quot;click&quot;, &quot;mouseover&quot;, etc.)
+	// $sHandler is a string containing the name of a Javascript handler function
+	// that you want to remove
+	// usage: $objResponse-&gt;addRemoveHandler(&quot;contentDiv&quot;, &quot;click&quot;, &quot;content_click&quot;);
+	function addRemoveHandler($sTarget,$sEvent,$sHandler)
+	{	
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;rh&quot;,&quot;t&quot;=&gt;$sTarget,&quot;p&quot;=&gt;$sEvent),$sHandler);
+	}
+	
+	// addIncludeScript() adds an include script command message to the XML response
+	// $sFileName is a URL of the Javascript file to include
+	// usage: $objResponse-&gt;addIncludeScript(&quot;functions.js&quot;);
+	function addIncludeScript($sFileName)
+	{
+		$this-&gt;xml .= $this-&gt;_cmdXML(array(&quot;n&quot;=&gt;&quot;in&quot;),$sFileName);
+	}
+	
+	// getXML() returns the XML to be returned from your function to the xajax
+	// processor on your page. Since xajax 0.2, you can also return an xajaxResponse
+	// object from your function directly, and xajax will automatically request the
+	// XML using this method call.
+	// usage: return $objResponse-&gt;getXML();
+	function getXML()
+	{
+		$sXML = &quot;&lt;?xml version=\&quot;1.0\&quot;&quot;;
+		if ($this-&gt;sEncoding &amp;&amp; strlen(trim($this-&gt;sEncoding)) &gt; 0)
+			$sXML .= &quot; encoding=\&quot;&quot;.$this-&gt;sEncoding.&quot;\&quot;&quot;;
+		$sXML .= &quot; ?&quot;.&quot;&gt;&lt;xjx&gt;&quot; . $this-&gt;xml . &quot;&lt;/xjx&gt;&quot;;
+		
+		return $sXML;
+	}
+	
+	// loadXML() adds the commands of the provided response XML output to this
+	// response object
+	// $sXML is the response XML (returned from a getXML() method) to add to the
+	// end of this response object
+	// usage: $r1 = $objResponse1-&gt;getXML();
+	//        $objResponse2-&gt;loadXML($r1);
+	//        return $objResponse2-&gt;getXML();
+	function loadXML($mXML)
+	{
+		if (is_a($mXML, &quot;xajaxResponse&quot;)) {
+			$mXML = $mXML-&gt;getXML();
+		}
+		$sNewXML = &quot;&quot;;
+		$iStartPos = strpos($mXML, &quot;&lt;xjx&gt;&quot;) + 5;
+		$sNewXML = substr($mXML, $iStartPos);
+		$iEndPos = strpos($sNewXML, &quot;&lt;/xjx&gt;&quot;);
+		$sNewXML = substr($sNewXML, 0, $iEndPos);
+		$this-&gt;xml .= $sNewXML;
+	}
+
+	// private method, used internally
+	function _cmdXML($aAttributes, &amp; $sData)
+	{
+		if ($this-&gt;bOutputEntities) {
+			if (function_exists('mb_convert_encoding')) {
+				$sData = call_user_func_array('mb_convert_encoding', array(&amp;$sData, 'HTML-ENTITIES', $this-&gt;sEncoding));
+			}
+			else {
+				trigger_error(&quot;The xajax XML response output could not be converted to HTML entities because the mb_convert_encoding function is not available&quot;, E_USER_NOTICE);
+			}
+		}
+		$xml = &quot;&lt;cmd&quot;;
+		foreach($aAttributes as $sAttribute =&gt; $sValue)
+			$xml .= &quot; $sAttribute=\&quot;$sValue\&quot;&quot;;
+		if ($sData !== null )//&amp;&amp; !strstr($sData,'&lt;![CDATA['))
+			$xml .= &quot;&gt;&lt;![CDATA[$sData]]&gt;&lt;/cmd&gt;&quot;;
+		else if ($sData !== null)
+			$xml .= &quot;&gt;$sData&lt;/cmd&gt;&quot;;
+		else
+			$xml .= &quot;&gt;&lt;/cmd&gt;&quot;;
+		
+		return $xml;
+	}
+	
+}// end class xajaxResponse
+?&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001075.html">[ydf-devel] r2481 -	YDFramework2.0/trunk/YDFramework2/addons/YDDatabaseObject
</A></li>
	<LI>Next message: <A HREF="001077.html">[ydf-devel] r2483 -	YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1076">[ date ]</a>
              <a href="thread.html#1076">[ thread ]</a>
              <a href="subject.html#1076">[ subject ]</a>
              <a href="author.html#1076">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/ydframework-devel">More information about the YDFramework-devel
mailing list</a><br>
</body></html>
