From ximian at berlios.de  Mon Jul  3 13:15:57 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 3 Jul 2006 13:15:57 +0200
Subject: [ydf-devel] r1952 - in YDFramework2.0/trunk/YDFramework2: YDClasses YDClasses/YDCMComponent YDClasses/YDCMComponent/languages addons/YDCMLink addons/YDCMPage
Message-ID: <200607031115.k63BFvju023924@sheep.berlios.de>

Author: ximian
Date: 2006-07-03 13:15:11 +0200 (Mon, 03 Jul 2006)
New Revision: 1952

Added:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMComp.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMStatistics_system.php
Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMTree.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMUsers.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/en.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/pt.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLink/YDCMLink.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
Log:
- YDCM new version, modified scheme

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml	2006-06-23 08:13:24 UTC (rev 1951)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml	2006-07-03 11:15:11 UTC (rev 1952)
@@ -1,7 +1,7 @@
 <?xml version="1.0" standalone="yes" ?>
 <DBMODEL Version="4.0">
 <SETTINGS>
-<GLOBALSETTINGS ModelName="YDCM scheme" IDModel="0" IDVersion="0" VersionStr="1.0.0.0" Comments="" UseVersionHistroy="1" AutoIncVersion="1" DatabaseType="MySQL" ZoomFac="75.00" XPos="791" YPos="875" DefaultDataType="5" DefaultTablePrefix="0" DefSaveDBConn="" DefSyncDBConn="" DefQueryDBConn="" Printer="" HPageCount="4.0" PageAspectRatio="1.440892512336408" PageOrientation="1" PageFormat="A4 (210x297 mm, 8.26x11.7 inches)" SelectedPages="" UsePositionGrid="1" PositionGridX="20" PositionGridY="20" TableNameInRefs="0" DefaultTableType="0" ActivateRefDefForNewRelations="1" FKPrefix="" FKPostfix="" CreateFKRefDefIndex="0" DBQuoteCharacter="`" CreateSQLforLinkedObjects="0" DefModelFont="Tahoma" CanvasWidth="4096" CanvasHeight="2842" />
+<GLOBALSETTINGS ModelName="YDCM scheme" IDModel="0" IDVersion="0" VersionStr="1.0.0.0" Comments="" UseVersionHistroy="1" AutoIncVersion="1" DatabaseType="MySQL" ZoomFac="72.00" XPos="103" YPos="95" DefaultDataType="5" DefaultTablePrefix="0" DefSaveDBConn="" DefSyncDBConn="" DefQueryDBConn="" Printer="" HPageCount="4.0" PageAspectRatio="1.440892512336408" PageOrientation="1" PageFormat="A4 (210x297 mm, 8.26x11.7 inches)" SelectedPages="" UsePositionGrid="1" PositionGridX="20" PositionGridY="20" TableNameInRefs="0" DefaultTableType="0" ActivateRefDefForNewRelations="1" FKPrefix="" FKPostfix="" CreateFKRefDefIndex="0" DBQuoteCharacter="`" CreateSQLforLinkedObjects="0" DefModelFont="Tahoma" CanvasWidth="4096" CanvasHeight="2842" />
 <DATATYPEGROUPS>
 <DATATYPEGROUP Name="Numeric Types" Icon="1" />
 <DATATYPEGROUP Name="Date and Time Types" Icon="2" />
@@ -258,13 +258,12 @@
 </SETTINGS>
 <METADATA>
 <REGIONS>
-<REGION ID="1635" RegionName="Portal Statistics ( YDCMStatistics )" XPos="140" YPos="680" Width="280" Height="340" RegionColor="2" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="51" />
-<REGION ID="1613" RegionName="Guestbook component" XPos="1180" YPos="890" Width="500" Height="280" RegionColor="1" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="45" />
-<REGION ID="1615" RegionName="Helpdesk component" XPos="1180" YPos="1210" Width="800" Height="520" RegionColor="5" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="46" />
-<REGION ID="1616" RegionName="Rootmenu component ( YDCMRootmenu )" XPos="1180" YPos="170" Width="280" Height="140" RegionColor="5" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="47" />
-<REGION ID="1619" RegionName="Page component ( YDCMPage )" XPos="1180" YPos="350" Width="260" Height="300" RegionColor="1" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="49" />
-<REGION ID="1620" RegionName="Link component" XPos="1180" YPos="690" Width="260" Height="160" RegionColor="5" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="50" />
-<REGION ID="1621" RegionName="MASTER COMPONENT ( YDCMComponent )" XPos="140" YPos="150" Width="940" Height="480" RegionColor="3" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="50" />
+<REGION ID="1635" RegionName="Portal Statistics ( YDCMStatistics )" XPos="140" YPos="720" Width="220" Height="380" RegionColor="2" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="51" />
+<REGION ID="1613" RegionName="Guestbook component ( YDCMGuestbook )" XPos="1180" YPos="640" Width="260" Height="240" RegionColor="1" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="45" />
+<REGION ID="1615" RegionName="Helpdesk component ( YDCMHelpdesk )" XPos="1180" YPos="920" Width="520" Height="380" RegionColor="5" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="46" />
+<REGION ID="1619" RegionName="Page component ( YDCMPage )" XPos="1180" YPos="160" Width="260" Height="260" RegionColor="1" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="49" />
+<REGION ID="1620" RegionName="Link component ( YDCMLink )" XPos="1180" YPos="460" Width="260" Height="140" RegionColor="5" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="50" />
+<REGION ID="1621" RegionName="MASTER COMPONENT ( YDCMComponent )" XPos="140" YPos="150" Width="960" Height="520" RegionColor="3" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="50" />
 </REGIONS>
 <TABLES>
 <TABLE ID="1158" Tablename="YDCMAudit" PrevTableName="admin_log" XPos="500" YPos="490" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="2" >
@@ -313,36 +312,20 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1160" Tablename="YDCMPage" PrevTableName="component_page" XPos="1200" YPos="390" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmpage` VALUES (1,  5, \aen\a, 1, \aApache in english\a, \a\a, \a\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (2,  6, \aall\a, 1, \aPostgreSQL in all lang\a, \a\a, \a\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (3,  7, \apt\a, 1, \amySQL in PT\a, \a\a, \a\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (4,  9, \aen\a, 1, \aOur databases\a, \a\a, \a\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (5, 10, \aen\a, 1, \aGenerators\a, \a\a, \a\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (6, 11, \aall\a, 1, \aPortals for all\a, \a\a, \a\a, 0, \a\a, 0, \a\a, \a\a);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLi!
 nkedModel="-1" Obj_id_Linked="-1" OrderPos="4" >
+<TABLE ID="1160" Tablename="YDCMPage" PrevTableName="component_page" XPos="1200" YPos="200" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmpage` VALUES (1,  1, \aApache html all lang\a, \aApache xhtml all lang\a, 0, \a\a, 0, \a\a, \a\a);\n\nINSERT INTO `ydcmpage` VALUES (2,  1, \aPostgreSQL en html\a, \aPostgreSQL en xhtml\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (3,  1, \aPostgreSQL pt html\a, \aPostgreSQL pt xhtml\a, 0, \a\a, 0, \a\a, \a\a);\n\nINSERT INTO `ydcmpage` VALUES (4,  1, \amySQL en html\a, \amySQL en xhtml\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (5,  1, \amySQL pt html\a, \amySQL pt xhtml\a, 0, \a\a, 0, \a\a, \a\a);\n\nINSERT INTO `ydcmpage` VALUES (6, 1, \aDatabases html\a, \aDatabases xhtml\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (7, 1, \aBases de dados html\a, \aBases de dados xhtml\a, 0, \a\a, 0, \a\a, \a\a);\n\nINSERT INTO `ydcmpage` VA!
 LUES (8, 1, \aGenerators html\a, \aGenerators xhtml\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (9, 1, \aGeradores html\a, \aGeradores xhtml\a, 0, \a\a, 0, \a\a, \a\a);\n\nINSERT INTO `ydcmpage` VALUES (10, 1, \aPortals html\a, \aPortals xhtml\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (11, 1, \aPortais html\a, \aPortais xhtml\a, 0, \a\a, 0, \a\a, \a\a);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="4" >
 <COLUMNS>
-<COLUMN ID="1315" ColName="component_id" PrevColName="" Pos="10" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="page id">
+<COLUMN ID="1732" ColName="component_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1424" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="component code">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1187" ColName="language_id" PrevColName="language" Pos="8" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
 <COLUMN ID="1297" ColName="current_version" PrevColName="version" Pos="9" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="this is the current version of this page">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1293" ColName="title" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="page title">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
 <COLUMN ID="1181" ColName="html" PrevColName="content" Pos="2" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="page html">
 <OPTIONSELECTED>
 </OPTIONSELECTED>
@@ -372,22 +355,14 @@
 <OPTIONSELECTED>
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1186" ColName="keywords" PrevColName="" Pos="7" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="metatag keywords">
+<COLUMN ID="1186" ColName="keywords" PrevColName="" Pos="7" idDatatype="28" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="\a\a," Comments="metatag keywords">
 <OPTIONSELECTED>
 </OPTIONSELECTED>
 </COLUMN>
 </COLUMNS>
 <RELATIONS_END>
-<RELATION_END ID="1331" />
-<RELATION_END ID="1340" />
+<RELATION_END ID="1704" />
 </RELATIONS_END>
-<INDICES>
-<INDEX ID="1327" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1315" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
 </TABLE>
 <TABLE ID="1162" Tablename="YDCMTree" PrevTableName="content" XPos="160" YPos="210" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmtree` VALUES (1,NULL,1,22,1,1,\aYDCMRoot\a,\a\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (2,1,2,3,2,1,\aYDCMRootmenu\a,\amenu Code Paste\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (3,1,4,5,2,1,\aYDCMRootmenu\a,\amenu Documentation\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (4,1,6,13,2,1,\aYDCMRootmenu\a,\amenu Books\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (5,4,7,8,3,1,\aYDCMPage\a,\aApache\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (6,4,9,10,3,1,\aYDCMPage\a,\aPostegreSQL\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (7,4,11,12,3,1,\aYDCMPage\a,\amysql\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (8,1,14,21,2,1,\aYDCMRootmenu\a,\alinks\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (9,8,15,16,3,1,\aYDCMPage\a,\adatabases\a,1,1,1,0,0,0,0);\!
 nINSERT INTO `ydcmtree` VALUES (10,8,17,18,3,1,\aYDCMPage\a,\agenerators\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (11,8,19,20,3,1,\aYDCMPage\a,\aportals\a,1,1,1,0,0,0,0);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="6" >
 <COLUMNS>
@@ -477,13 +452,9 @@
 </COLUMN>
 </COLUMNS>
 <RELATIONS_START>
-<RELATION_START ID="1340" />
-<RELATION_START ID="1341" />
 <RELATION_START ID="1437" />
-<RELATION_START ID="1535" />
-<RELATION_START ID="1572" />
-<RELATION_START ID="1526" />
 <RELATION_START ID="1646" />
+<RELATION_START ID="1692" />
 </RELATIONS_START>
 <RELATIONS_END>
 <RELATION_END ID="1646" />
@@ -496,36 +467,20 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1163" Tablename="YDCMLink" PrevTableName="content_language" XPos="1200" YPos="720" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="7" >
+<TABLE ID="1163" Tablename="YDCMLink" PrevTableName="content_language" XPos="1200" YPos="500" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="7" >
 <COLUMNS>
-<COLUMN ID="1318" ColName="component_id" PrevColName="" Pos="5" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1733" ColName="component_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1425" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1213" ColName="language_id" PrevColName="language" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1212" ColName="title" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(200)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="link title">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
 <COLUMN ID="1295" ColName="url" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="link url">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1661" ColName="num_visits" PrevColName="" Pos="5" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="total of visits">
+<COLUMN ID="1661" ColName="num_visits" PrevColName="" Pos="5" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0," Comments="total of visits">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
@@ -533,16 +488,8 @@
 </COLUMN>
 </COLUMNS>
 <RELATIONS_END>
-<RELATION_END ID="1332" />
-<RELATION_END ID="1341" />
+<RELATION_END ID="1706" />
 </RELATIONS_END>
-<INDICES>
-<INDEX ID="1325" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1318" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
 </TABLE>
 <TABLE ID="1165" Tablename="YDCMLanguages" PrevTableName="languages" XPos="500" YPos="210" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmlanguages` VALUES (\aall\a,\aAll\a,1,0,0);\nINSERT INTO `ydcmlanguages` VALUES (\aen\a,\aEnglish\a,1,1,1);\nINSERT INTO `ydcmlanguages` VALUES (\apt\a,\aPortugu\234s\a,1,0,0);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="9" >
 <COLUMNS>
@@ -576,12 +523,8 @@
 </COLUMN>
 </COLUMNS>
 <RELATIONS_START>
-<RELATION_START ID="1331" />
-<RELATION_START ID="1332" />
 <RELATION_START ID="1366" />
-<RELATION_START ID="1527" />
-<RELATION_START ID="1536" />
-<RELATION_START ID="1573" />
+<RELATION_START ID="1693" />
 </RELATIONS_START>
 <INDICES>
 <INDEX ID="1290" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
@@ -591,7 +534,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1166" Tablename="YDCMStatistics_visits" PrevTableName="site_log" XPos="180" YPos="720" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="10" >
+<TABLE ID="1166" Tablename="YDCMStatistics_visits" PrevTableName="site_log" XPos="160" YPos="760" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="10" >
 <COLUMNS>
 <COLUMN ID="1222" ColName="visit_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement id">
 <OPTIONSELECTED>
@@ -633,7 +576,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1167" Tablename="YDCMStatistics_searches" PrevTableName="site_searches" XPos="180" YPos="860" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="11" >
+<TABLE ID="1167" Tablename="YDCMStatistics_searches" PrevTableName="site_searches" XPos="160" YPos="900" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="11" >
 <COLUMNS>
 <COLUMN ID="1231" ColName="search_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement id">
 <OPTIONSELECTED>
@@ -762,9 +705,9 @@
 <RELATIONS_START>
 <RELATION_START ID="1333" />
 <RELATION_START ID="1383" />
-<RELATION_START ID="1410" />
 <RELATION_START ID="1436" />
 <RELATION_START ID="1648" />
+<RELATION_START ID="1410" />
 </RELATIONS_START>
 <RELATIONS_END>
 <RELATION_END ID="1366" />
@@ -778,7 +721,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1367" Tablename="YDCMHelpdesk_posts" PrevTableName="Table_11" XPos="1460" YPos="1270" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="20" >
+<TABLE ID="1367" Tablename="YDCMHelpdesk_posts" PrevTableName="Table_11" XPos="1200" YPos="960" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="20" >
 <COLUMNS>
 <COLUMN ID="1581" ColName="post_id" PrevColName="" Pos="13" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -786,19 +729,19 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1671" ColName="state_id" PrevColName="" Pos="16" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1734" ColName="component_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1673" ColName="urgency_id" PrevColName="" Pos="16" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1671" ColName="state_id" PrevColName="" Pos="16" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1369" ColName="component_id" PrevColName="ticket_id" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<COLUMN ID="1673" ColName="urgency_id" PrevColName="" Pos="16" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
@@ -872,7 +815,7 @@
 </RELATIONS_START>
 <RELATIONS_END>
 <RELATION_END ID="1383" />
-<RELATION_END ID="1575" />
+<RELATION_END ID="1712" />
 </RELATIONS_END>
 <INDICES>
 <INDEX ID="1582" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
@@ -882,7 +825,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1401" Tablename="YDCMHelpdesk_response" PrevTableName="Table_14" XPos="1760" YPos="1310" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="26" >
+<TABLE ID="1401" Tablename="YDCMHelpdesk_response" PrevTableName="Table_14" XPos="1500" YPos="980" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="26" >
 <COLUMNS>
 <COLUMN ID="1403" ColName="response_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -890,16 +833,16 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1584" ColName="post_id" PrevColName="" Pos="4" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<COLUMN ID="1701" ColName="user_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1406" ColName="user_id" PrevColName="" Pos="2" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<COLUMN ID="1584" ColName="post_id" PrevColName="" Pos="4" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
 <COLUMN ID="1407" ColName="date" PrevColName="" Pos="3" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
@@ -956,92 +899,15 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1519" Tablename="YDCMRootmenu" PrevTableName="Table_21" XPos="1200" YPos="210" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmrootmenu` (`component_id`,`content_id`,`language_id`,`title`) VALUES (1,2,\aall\a,\amy menu paste\a);\nINSERT INTO `ydcmrootmenu` (`component_id`,`content_id`,`language_id`,`title`) VALUES (2,3,\aen\a,\adocumentation in EN\a);\nINSERT INTO `ydcmrootmenu` (`component_id`,`content_id`,`language_id`,`title`) VALUES (3,4,\apt\a,\aPT books menu\a);\nINSERT INTO `ydcmrootmenu` (`component_id`,`content_id`,`language_id`,`title`) VALUES (4,8,\aall\a,\alinks menu\a);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="31" >
+<TABLE ID="1537" Tablename="YDCMGuestbook_posts" PrevTableName="Table_23" XPos="1200" YPos="680" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" >
 <COLUMNS>
-<COLUMN ID="1521" ColName="component_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1612" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1524" ColName="language_id" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1525" ColName="title" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="menu title">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_END>
-<RELATION_END ID="1527" />
-<RELATION_END ID="1526" />
-</RELATIONS_END>
-<INDICES>
-<INDEX ID="1522" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1521" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1528" Tablename="YDCMGuestbook" PrevTableName="Table_22" XPos="1200" YPos="930" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="34" >
-<COLUMNS>
-<COLUMN ID="1530" ColName="component_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1532" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1533" ColName="language_id" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="language code">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1534" ColName="title" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="guestbook name">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<RELATIONS_START>
-<RELATION_START ID="1547" />
-</RELATIONS_START>
-<RELATIONS_END>
-<RELATION_END ID="1535" />
-<RELATION_END ID="1536" />
-</RELATIONS_END>
-<INDICES>
-<INDEX ID="1531" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1530" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1537" Tablename="YDCMGuestbook_posts" PrevTableName="Table_23" XPos="1480" YPos="980" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" >
-<COLUMNS>
 <COLUMN ID="1539" ColName="post_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1541" ColName="component_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="guestbook id">
+<COLUMN ID="1735" ColName="component_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
@@ -1083,7 +949,7 @@
 </COLUMN>
 </COLUMNS>
 <RELATIONS_END>
-<RELATION_END ID="1547" />
+<RELATION_END ID="1709" />
 </RELATIONS_END>
 <INDICES>
 <INDEX ID="1540" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
@@ -1093,95 +959,98 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1565" Tablename="YDCMHelpdesk" PrevTableName="Table_20" XPos="1200" YPos="1270" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="39" >
+<TABLE ID="1626" Tablename="YDCMStatistics_downloads" PrevTableName="Table_21" XPos="160" YPos="1000" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="50" >
 <COLUMNS>
-<COLUMN ID="1567" ColName="component_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1631" ColName="download_is" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1569" ColName="content_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<COLUMN ID="1633" ColName="date" PrevColName="" Pos="1" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1570" ColName="language_id" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<COLUMN ID="1634" ColName="filename" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1571" ColName="title" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="help desk title">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
 </COLUMNS>
-<RELATIONS_START>
-<RELATION_START ID="1575" />
-</RELATIONS_START>
-<RELATIONS_END>
-<RELATION_END ID="1572" />
-<RELATION_END ID="1573" />
-</RELATIONS_END>
 <INDICES>
-<INDEX ID="1568" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEX ID="1632" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
 <INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1567" LengthParam="0" />
+<INDEXCOLUMN idColumn="1631" LengthParam="0" />
 </INDEXCOLUMNS>
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1626" Tablename="YDCMStatistics_downloads" PrevTableName="Table_21" XPos="180" YPos="940" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="50" >
+<TABLE ID="1678" Tablename="YDCMComp" PrevTableName="Table_17" XPos="160" YPos="540" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmcomp` VALUES (1,   5, \aall\a, \aApache friends\a,0); \n\nINSERT INTO `ydcmcomp` VALUES (2,   6, \aen\a, \aPostGre en\a,0); \nINSERT INTO `ydcmcomp` VALUES (3,   6, \apt\a,  \aPostGre pt\a,0); \n\nINSERT INTO `ydcmcomp` VALUES (4,   7, \aen\a, \amySql howto\a,0); \nINSERT INTO `ydcmcomp` VALUES (5,   7, \apt\a,  \aajuda mySql\a,0);\n\nINSERT INTO `ydcmcomp` VALUES (6,   9, \aen\a, \aDatabases we use\a,0); \nINSERT INTO `ydcmcomp` VALUES (7,   9, \apt\a,  \aBases de dados\a,0);\n\nINSERT INTO `ydcmcomp` VALUES (8,  10,\aen\a, \aGenerators help\a,0); \nINSERT INTO `ydcmcomp` VALUES (9,  10,\apt\a,  \aAjuda sobre geradores\a,0);\n\nINSERT INTO `ydcmcomp` VALUES (10,11,\aen\a, \aPortals\a,0);\nINSERT INTO `ydcmcomp` VALUES (11,11,\apt\a,  \aPortais\a,0); \n" TableOptions="DelayKeyTbl!
 Updates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="46" >
 <COLUMNS>
-<COLUMN ID="1631" ColName="download_is" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1680" ColName="component_id" PrevColName="title_id" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1633" ColName="date" PrevColName="" Pos="1" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1684" ColName="content_id" PrevColName="" Pos="3" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1634" ColName="filename" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1686" ColName="language_id" PrevColName="" Pos="4" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="Language code of this title translation">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
+<COLUMN ID="1682" ColName="title" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1683" ColName="rendered" PrevColName="" Pos="2" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="Element has a simple string as title or must be rendered">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
 </COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1704" />
+<RELATION_START ID="1706" />
+<RELATION_START ID="1709" />
+<RELATION_START ID="1712" />
+</RELATIONS_START>
+<RELATIONS_END>
+<RELATION_END ID="1692" />
+<RELATION_END ID="1693" />
+</RELATIONS_END>
 <INDICES>
-<INDEX ID="1632" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEX ID="1681" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
 <INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1631" LengthParam="0" />
+<INDEXCOLUMN idColumn="1680" LengthParam="0" />
 </INDEXCOLUMNS>
 </INDEX>
 </INDICES>
 </TABLE>
 </TABLES>
 <RELATIONS>
-<RELATION ID="1331" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1160" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="1" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="12" />
-<RELATION ID="1332" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1163" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="13" />
 <RELATION ID="1333" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1158" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="-22" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="-42" CaptionOffsetY="-25" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="14" />
-<RELATION ID="1340" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1160" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="-71" StartIntervalOffsetY="-7" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="15" />
-<RELATION ID="1341" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1163" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="-1" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="16" />
 <RELATION ID="1366" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1168" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="38" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="38" CaptionOffsetY="19" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="19" />
-<RELATION ID="1383" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1367" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="1" EndIntervalOffsetY="10" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="21" />
+<RELATION ID="1383" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1367" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="5" EndIntervalOffsetY="-4" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="21" />
 <RELATION ID="1409" RelationName="post_id" Kind="2" SrcTable="1367" DestTable="1401" FKFields="post_id=post_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" />
-<RELATION ID="1410" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1401" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="14" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
 <RELATION ID="1436" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1430" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="26" CaptionOffsetY="4" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
-<RELATION ID="1437" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1430" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="12" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="49" CaptionOffsetY="-12" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="29" />
-<RELATION ID="1527" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1519" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="1" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="18" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="33" />
-<RELATION ID="1535" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1528" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="60" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="-4" EndIntervalOffsetY="3" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="35" />
-<RELATION ID="1536" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1528" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="-1" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="28" CaptionOffsetY="-48" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="36" />
-<RELATION ID="1547" RelationName="component_id" Kind="2" SrcTable="1528" DestTable="1537" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="51" CaptionOffsetY="-43" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="38" />
-<RELATION ID="1572" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1565" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="73" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="10" EndIntervalOffsetY="4" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="40" />
-<RELATION ID="1573" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1565" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="109" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="3" EndIntervalOffsetY="3" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="41" />
-<RELATION ID="1575" RelationName="component_id" Kind="2" SrcTable="1565" DestTable="1367" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="-4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="51" CaptionOffsetY="-40" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="41" />
-<RELATION ID="1526" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1519" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="20" CaptionOffsetY="-20" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="32" />
+<RELATION ID="1437" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1430" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="12" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="31" CaptionOffsetY="-6" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="29" />
 <RELATION ID="1646" RelationName="parent_id" Kind="5" SrcTable="1162" DestTable="1162" FKFields="content_id=parent_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="1" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="51" />
 <RELATION ID="1648" RelationName="parent_id" Kind="5" SrcTable="1168" DestTable="1168" FKFields="user_id=parent_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="52" />
+<RELATION ID="1692" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1678" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="-41" CaptionOffsetY="-14" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="47" />
+<RELATION ID="1693" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1678" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="31" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="19" CaptionOffsetY="-72" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="48" />
+<RELATION ID="1410" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1401" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="14" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
+<RELATION ID="1704" RelationName="component_id" Kind="2" SrcTable="1678" DestTable="1160" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="43" />
+<RELATION ID="1706" RelationName="component_id" Kind="2" SrcTable="1678" DestTable="1163" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="42" />
+<RELATION ID="1709" RelationName="component_id" Kind="2" SrcTable="1678" DestTable="1537" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="390" StartIntervalOffsetY="212" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="39" />
+<RELATION ID="1712" RelationName="component_id" Kind="2" SrcTable="1678" DestTable="1367" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="1" CaptionOffsetY="1" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="36" />
 </RELATIONS>
 <NOTES>
 </NOTES>

Added: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMComp.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMComp.php	2006-06-23 08:13:24 UTC (rev 1951)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMComp.php	2006-07-03 11:15:11 UTC (rev 1952)
@@ -0,0 +1,216 @@
+<?php
+
+    /*
+
+        Yellow Duck Framework version 2.0
+        (c) Copyright 2002-2005 Pieter Claerhout
+
+        This library is free software; you can redistribute it and/or
+        modify it under the terms of the GNU Lesser General Public
+        License as published by the Free Software Foundation; either
+        version 2.1 of the License, or (at your option) any later version.
+
+        This library is distributed in the hope that it will be useful,
+        but WITHOUT ANY WARRANTY; without even the implied warranty of
+        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+        Lesser General Public License for more details.
+
+        You should have received a copy of the GNU Lesser General Public
+        License along with this library; if not, write to the Free Software
+        Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
+
+    */
+
+    // Check if the framework is loaded
+    if ( ! defined( 'YD_FW_NAME' ) ) {
+        die( 'Yellow Duck Framework is not loaded.' );
+    }
+
+	require_once( dirname( __FILE__ ) . '/YDCMTree.php' );
+	require_once( dirname( __FILE__ ) . '/YDCMLanguages.php' );
+
+    class YDCMComp extends YDDatabaseObject {
+    
+        function YDCMComp( $name ) {
+        
+			// init component as non default
+            $this->YDDatabaseObject();
+			
+			// register database as default
+            $this->registerDatabase();
+
+			// register table for this component
+            $this->registerTable( 'YDCMComp' );
+
+            // register custom key
+            $this->registerKey( 'component_id', true );
+
+			// register fields	
+			$this->registerField( 'title' );
+			$this->registerField( 'rendered' );
+			
+			// add static relations to tree and language
+			$this->registerField( 'content_id' );
+       		$rel = & $this->registerRelation( 'YDCMTree', false, 'YDCMTree' );
+			$rel->setLocalKey( 'content_id' );
+			$rel->setForeignKey( 'content_id' );
+
+			$this->registerField( 'language_id' );
+       		$rel = & $this->registerRelation( 'YDCMLanguages', false, 'YDCMLanguages' );
+			$rel->setLocalKey( 'language_id' );
+			$rel->setForeignKey( 'language_id' );
+
+			// add dynamic relation
+       		$rel = & $this->registerRelation( $name, false, $name );
+			$rel->setLocalKey( 'component_id' );
+			$rel->setForeignKey( 'component_id' );
+			$rel->setForeignJoin( 'LEFT' );
+			
+//			$this->name = $name;
+		}
+
+
+        /**
+         *  This function return an array of parent nodes giving an node id
+         *
+         *  @param $id           Node id
+         *  @param $language_id  Language id
+         *
+         *  @returns    An array with all parent nodes
+         */
+		function getPath( $id, $language_id ){
+		
+			// 1st step: GET nleft and nright of this node. yes, it's ugly.. 
+			// TODO: change it with a better tree implementation
+			$this->resetValues();
+			$this->content_id = intval( $id );
+			$this->language_id = $language_id;
+
+			if ( $this->find( 'ydcmtree' ) != 1 ) return array();
+
+			$node = $this->getValues( false, false, false, false );
+		
+			// 2nd step: GET parents (based on previous nleft and nright)
+			$this->resetAll();
+
+			$this->language_id = $language_id;
+			$this->where( 'YDCMTree.nleft  <= ' . intval( $node[ 'nleft' ] ) );
+			$this->where( 'YDCMTree.nright >= ' . intval( $node[ 'nright' ] ) );
+			$this->orderBy( 'YDCMTree.nlevel' );
+			$this->find( 'ydcmtree' );
+
+			return $this->getResults( false, false, false,false );
+		}
+
+
+        /**
+         *  This function returns the path string to a node
+         *
+         *  @param $id           Node id
+         *  @param $language_id  Language id
+         *  @param $separator    Html separator string
+         *  @param $url          Url object for element links
+         *  @param $classParents Html class for html links of parents
+         *  @param $classCurrent Url object for element links
+         *
+         *  @returns    An html string
+         */
+		function getBreadcrum( $id, $language_id, $separator, $url, $classParents, $classCurrent ){
+
+			// init array for results
+			$res = array();
+
+			// cycle elements to get titles
+			foreach( $this->getPath( $id, $language_id ) as $elements ){
+			
+				// set url var ID to this element
+				$url->setQueryVar( 'id',        $elements[ 'component_id' ] );
+				$url->setQueryVar( 'component', $elements[ 'type' ] );
+
+				// compute class name
+				if ( $id != $elements[ 'content_id' ] ) $res[] = '<a class="' . $classParents . '" href="' . $url->getUrl() . '">' . $elements[ 'title' ] . '</a>';
+				else                                    $res[] = '<span class="' . $classCurrent . '">' . $elements[ 'title' ] . '</span>';
+			}
+
+			// return html string
+			return implode( $separator, $res );
+		}
+		
+		
+        /**
+         *  This function returns an array with all direct children
+         *
+         *  @param $id           Node id
+         *  @param $language_id  Language id
+         *
+         *  @returns    An array with all direct children
+         */
+		function getMenu( $id, $language_id ){
+		
+			$this->resetValues();
+
+			$this->language_id = $language_id;
+			$this->where( 'YDCMTree.parent_id  = ' . intval( $id ) );
+			$this->find( 'ydcmtree' );
+			
+			return $this->getResults( false, false, false, false );
+		}
+
+
+        /**
+         *  This function will render all menu elements
+         *
+         *  @param $id           Menu id
+         *  @param $language_id  Language id
+         *  @param $urlObj       YDUrl object
+         *
+         *  @returns    An array with all direct children
+         */
+		function renderMenu( $id, $language_id, $urlObj ){
+
+			$menu = array();
+
+			// render each element
+			foreach( $this->getMenu( $id, $language_id ) as $element ){
+
+				$el = new $element[ 'type' ];
+				$menu[] = $el->render( $element, &$urlObj );
+			}
+
+			return $menu;
+		}
+
+
+        /**
+         *  This function return node attributes
+         *
+         *  @param $id           Menu id
+         *  @param $language_id  Language id
+         *
+         *  @returns    An array with all attributes
+         */
+		function getNode( $id, $language_id ){
+		
+			// delete previous stored values
+			$this->resetValues();
+
+			// define our id to find		
+			$this->content_id = intval( $id );
+			$this->language_id = $language_id;
+			
+			$this->limit( 1 );
+			
+			// find node
+			$this->findAll();
+			
+			// parse html
+			if ( isset( $this->html ) )  $this->html  = htmlentities( $this->html );
+			if ( isset( $this->xhtml ) ) $this->xhtml = htmlentities( $this->xhtml );
+
+			// return node attributes without relation prefixs
+			return $this->getValues( false, false, false, false );
+		}
+
+}
+
+?>
\ No newline at end of file

Added: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMStatistics_system.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMStatistics_system.php	2006-06-23 08:13:24 UTC (rev 1951)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMStatistics_system.php	2006-07-03 11:15:11 UTC (rev 1952)
@@ -0,0 +1,87 @@
+<?php
+
+    /*
+
+        Yellow Duck Framework version 2.0
+        (c) Copyright 2002-2005 Pieter Claerhout
+
+        This library is free software; you can redistribute it and/or
+        modify it under the terms of the GNU Lesser General Public
+        License as published by the Free Software Foundation; either
+        version 2.1 of the License, or (at your option) any later version.
+
+        This library is distributed in the hope that it will be useful,
+        but WITHOUT ANY WARRANTY; without even the implied warranty of
+        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+        Lesser General Public License for more details.
+
+        You should have received a copy of the GNU Lesser General Public
+        License along with this library; if not, write to the Free Software
+        Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
+
+    */
+
+    // Check if the framework is loaded
+    if ( ! defined( 'YD_FW_NAME' ) ) {
+        die( 'Yellow Duck Framework is not loaded.' );
+    }
+
+    class YDCMStatistics_system {
+    
+        function YDCMStatistics_system() {
+		}
+
+
+		function getPHPInfo(){
+
+            // Get the general PHP info
+            ob_start();
+            phpinfo( INFO_GENERAL );
+            $phpInfo .= ob_get_contents();
+            ob_end_clean();
+
+            // Get the right part
+            $phpInfo = substr( $phpInfo, strpos( $phpInfo, '<tr>' ) );
+            $phpInfo = substr( $phpInfo, 0, strpos( $phpInfo, '</table>' ) );
+
+            // Strip unneeded things
+            $phpInfo = str_replace( '<tr><td class="e">', '', $phpInfo );
+            $phpInfo = str_replace( ' </td></tr>', '', $phpInfo );
+            $phpInfo = trim( $phpInfo );
+
+            // Get the settings
+            $settings = array();
+            foreach ( explode( "\n", $phpInfo ) as $line ) {
+                $line = explode( ' </td><td class="v">', $line );
+
+                if ( isset( $line[1] ) ) $settings[ strtolower( str_replace( ' ', '_', $line[0] ) ) ] = $line[1];
+                else                     $settings[ strtolower( str_replace( ' ', '_', $line[0] ) ) ] = '';
+			}
+			
+			$settings[ 'version']  = phpversion();
+			$settings[ 'modules' ] = implode( get_loaded_extensions(), ', ' );
+			
+			ksort( $settings );
+			
+			return $settings;
+		}
+
+
+
+		function getMailInfo(){
+
+			// Includes
+			YDInclude( 'phpmailer/class.phpmailer.php' );
+		
+			$p = new PHPMailer();
+			
+			$settings = array( 'system' => 'PHPMailer',
+							   'version' => $p->Version );
+
+			ksort( $settings );
+			
+			return $settings;
+		}
+
+    }
+?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMTree.php	2006-06-23 08:13:24 UTC (rev 1951)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMTree.php	2006-07-03 11:15:11 UTC (rev 1952)
@@ -54,6 +54,9 @@
 			$this->registerField( 'published_date_end' );			
 			$this->registerField( 'candrag' );
 			$this->registerField( 'candrop' );
+			$this->registerField( 'nleft' );
+			$this->registerField( 'nright' );
+
 		}
 
 
@@ -85,6 +88,7 @@
 		}
 
 
+
 	}
 
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMUsers.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMUsers.php	2006-06-23 08:13:24 UTC (rev 1951)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMUsers.php	2006-07-03 11:15:11 UTC (rev 1952)
@@ -252,13 +252,9 @@
          */
 		function changeCurrentUserPassword( $oldpassword = '', $newpassword = '' ){
 		
-			$this->resetValues();
-
 			// check if user is valid
-			$valid = $this->valid( $_SERVER['PHP_AUTH_USER'], $_SERVER['PHP_AUTH_PW'] );
+			if ( !$this->valid( $_SERVER['PHP_AUTH_USER'], $_SERVER['PHP_AUTH_PW'] ) ) return false;
 
-			if ( $valid === false ) return false;
-
 			// reset values added from valid method
 			$this->resetValues();
 

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/en.php	2006-06-23 08:13:24 UTC (rev 1951)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/en.php	2006-07-03 11:15:11 UTC (rev 1952)
@@ -20,4 +20,14 @@
 
 $GLOBALS['t']['add page'] = 'Add page';
 $GLOBALS['t']['please wait'] = 'Please wait';
+
+$GLOBALS['t']['content'] = 'Content';
+$GLOBALS['t']['general view'] = 'General view';
+$GLOBALS['t']['statistics'] = 'Statistics';
+$GLOBALS['t']['administration'] = 'Administration';
+$GLOBALS['t']['system information'] = 'System information';
+$GLOBALS['t']['backup'] = 'Backup';
+$GLOBALS['t']['audit'] = 'Audit';
+$GLOBALS['t']['user management'] = 'User management';
+$GLOBALS['t']['general configuration'] = 'General configuration';
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/pt.php	2006-06-23 08:13:24 UTC (rev 1951)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/pt.php	2006-07-03 11:15:11 UTC (rev 1952)
@@ -20,4 +20,14 @@
 
 $GLOBALS['t']['add page'] = 'Adicionar p&aacute;gina';
 $GLOBALS['t']['please wait'] = 'Por favor aguarde';
+
+$GLOBALS['t']['content'] = 'Conte&uacute;do';
+$GLOBALS['t']['general view'] = 'Vista geral';
+$GLOBALS['t']['statistics'] = 'Estat&iacute;sticas';
+$GLOBALS['t']['administration'] = 'Administra&ccedil;&atilde;o';
+$GLOBALS['t']['system information'] = 'Informa&ccedil;&otilde;es do sistema';
+$GLOBALS['t']['backup'] = 'C&oacute;pias de seguran&ccedil;a';
+$GLOBALS['t']['audit'] = 'Auditoria';
+$GLOBALS['t']['user management'] = 'Gest&atilde;o de utilizadores';
+$GLOBALS['t']['general configuration'] = 'Configura&ccedil;&atilde;o geral';
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php	2006-06-23 08:13:24 UTC (rev 1951)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php	2006-07-03 11:15:11 UTC (rev 1952)
@@ -30,8 +30,7 @@
     YDInclude( 'YDDatabaseObject.php' );
 	YDInclude( 'YDDatabaseTree.php' );
 
-	// set core libs directory
-    YDConfig::set( 'YD_DBOBJECT_PATH', dirname( __FILE__ ) . '/YDCMComponent/');
+	require_once( dirname( __FILE__ ) . '/YDCMComponent/YDCMComp.php' );
 
 	// add generic translation directory
 	YDLocale::addDirectory( dirname( __FILE__ ) . '/YDCMComponent/languages/' );
@@ -55,29 +54,12 @@
 			// register table for this component
             $this->registerTable( $name );
 
-			// set standard component
-			$this->standardComponent = $standardComponent;
+			// add standard relation
+			$this->registerField( 'component_id' );
+       		$rel = & $this->registerRelation( 'YDCMComp', false, 'YDCMComp' );
+			$rel->setLocalKey( 'component_id' );
+			$rel->setForeignKey( 'component_id' );
 
-			// if this is a standard component has primary key 'component_id' and 2 standard relations
-			if ( $standardComponent ){
-
-				// register standard Key
-				$this->registerKey( 'component_id', true );
-
-				// register tree field and relation
-				$this->registerField( 'content_id' );
-	            $relTree = & $this->registerRelation( 'YDCMTree', false, 'YDCMTree' );
-				$relTree->setLocalKey( 'content_id' );
-            	$relTree->setForeignKey( 'content_id' );
-
-				// register language field and relation
-				$this->registerField( 'language_id' );
-         		$relLanguage = & $this->registerRelation( 'YDCMLanguages', false, 'YDCMLanguages' );
-				$relLanguage->setLocalKey( 'language_id' );
-				$relLanguage->setForeignKey( 'language_id' );
-			}
-				
-			// a standard component has tree operations
 			// TODO: position is required and we must change order from 'parent_id' to 'parent_id ASC, position ASC'
 			$this->tree = new YDDatabaseTree( 'default', 'YDCMTree', 'content_id', 'parent_id', 'parent_id' );
 
@@ -94,10 +76,58 @@
 			$this->tree->addField( 'published_date_end' );
 			$this->tree->addField( 'candrag' );
 			$this->tree->addField( 'candrop' );
+
+			// add comp object
+			if ( $standardComponent )
+				$this->comp = new YDCMComp( $name );
 		}
 
 
         /**
+         *  This function renders this element for menu
+         *
+         *  @param $id           Component id
+         *  @param $urlObj       Url object
+         *
+         *  @returns    An html string
+         */
+
+		function render( $id, $url ){
+		
+			return '';
+		}
+
+
+        /**
+         *  This function will render a menu
+         *
+         *  @param $id           Menu id
+         *  @param $language_id  Language id
+         *  @param $urlObj       Url object
+         *
+         *  @returns    An array with all direct children
+         */
+		function renderMenu( $id, $language_id, $urlObj ){
+		
+			return $this->comp->renderMenu( $id, $language_id, $urlObj );
+		}
+
+
+        /**
+         *  This function returns node attributes
+         *
+         *  @param $id           Menu id
+         *  @param $language_id  Language id
+         *
+         *  @returns    An array with node attributes
+         */
+		function getNode( $id, $language = 'all' ){
+		
+			return $this->comp->getNode( $id, $language );
+		}
+
+
+        /**
          *  This static function returns an YDCMComponent module
          *
          *  @returns    an module object
@@ -106,20 +136,20 @@
 
 			// include lib
 			// TODO: check if name is a valid lib name
-			require_once( YDConfig::get( 'YD_DBOBJECT_PATH' ) . '/' . $name . '.php' );
+			require_once( dirname( __FILE__ ) . '/YDCMComponent/' . $name . '.php' );
 
 			// return class
 			return new $name();
 		}
 
 
-
         /**
          *  This function returns all elements (except root)
          *
          *  @returns    all tree elements 
          */
 		function getTreeElements(){
+
 			return $this->tree->getDescendants( 1 );
 		}
 
@@ -128,9 +158,8 @@
          *  This function checks if elements are valid drag&dropable
          *
          *  @param $x  Id of dragable node
+         *  @param $y  Id of dropable node
          *
-         *  @param $y  Id of dropable node
-
          *  @returns    false if elements are invalid, an associative array with node types (eg: array( $x => 'PHCMPage', $y => 'PHCMRootmenu ))'
          */
 		function getDragDropElements( $x = null, $y = null ){
@@ -144,11 +173,62 @@
 
 
         /**
+         *  This function returns the path to current node
+         *
+         *  @param $id           (Optional) Node id
+         *  @param $language_id  (Optional) Language id
+         *
+         *  @returns    An array with all parents
+         */
+		function getPath( $id = 0, $language_id = 'all' ){
+
+			return $this->comp->getPath( $id, $language_id );
+		}
+
+
+        /**
+         *  This function returns all direct elements of a menu
+         *
+         *  @param $id           (Optional) Menu id
+         *  @param $language_id  (Optional) Language id
+         *
+         *  @returns    An array with all direct children
+         */
+		function getMenu( $id = 0, $language_id = 'all' ){
+
+			return $this->comp->getMenu( $id, $language_id );
+		}
+
+
+        /**
+         *  This function returns the path string to current node
+         *
+         *  @param $id           (Optional) Node id
+         *  @param $language_id  (Optional) Language id
+         *  @param $separator    (Optional) Html separator string
+         *  @param $url          (Optional) Url object for element links
+         *  @param $classParents (Optional) Html class for html links of parents
+         *  @param $classCurrent (Optional) Url object for element links
+         *
+         *  @returns    An html string
+         */
+		function getBreadcrum( $id = 0, $language_id = 'all', $separator = ' &gt; ', $url = null, $classParents = 'breadParents', $classCurrent = 'breadCurrent' ){
+
+			// if url object is not set we use the current url
+			if( is_null( $url ) ) $url = new YDUrl( YD_SELF_SCRIPT );
+
+			// get breadcrum from component
+			return $this->comp->getBreadcrum( $id, $language_id, $separator, $url, $classParents, $classCurrent );
+		}
+
+
+        /**
          *  This function returns the component author
          *
          *  @returns    component author
          */
 		function getAuthor(){
+
 			return $this->_author;
 		}
 
@@ -159,6 +239,7 @@
          *  @returns    component version
          */
 		function getVersion(){
+
 			return $this->_version;
 		}
 
@@ -169,6 +250,7 @@
          *  @returns    component copyright
          */
 		function getCopyright(){
+
 			return $this->_copyright;
 		}
 
@@ -179,6 +261,7 @@
          *  @returns    component description
          */
 		function getDescription(){
+
 			return $this->_description;
 		}
 

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-06-23 08:13:24 UTC (rev 1951)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-07-03 11:15:11 UTC (rev 1952)
@@ -169,6 +169,18 @@
         }
 
         /**
+         *  Delete a field
+         *
+         *  @param  $name   The name of the field that should be deleted
+         */
+        function delField( $name ) {
+            if ( ! in_array( $name, $this->fields ) ) {
+                unset( $this->fields[ $name ] );
+            }
+        }
+
+
+        /**
          *  Add a number of fields to the list of fields to will get returned by this class.
          *
          *  @param  $names   The name of the field that should be added.
@@ -341,7 +353,7 @@
          *
          *  @returns An array of each node to passed node
          */
-        function getPath( $id=0, $includeSelf=false ) {
+        function getPath( $id=0, $includeSelf=false, $customTable = null, $customWhere = null ) {
 
             // Get the ID field
             $idField = $this->fields['id'];
@@ -354,16 +366,25 @@
                 return array();
             }
 
+			// check if we have a custom where clause
+			if ( is_null( $customWhere ) ) $where = '';
+			else                           $where = ' and ' . $customWhere;
+
+			// check if we have a custom table
+			if ( !is_null( $customTable ) ) $table = $customTable;
+			else                            $table = $this->table;
+
+
             // Include ourselves?
             if ( $includeSelf ) {
                 $query = sprintf(
-                    'select %s from %s where nleft <= %d and nright >= %d order by nlevel',
-                    $this->_getFieldsAsString(), $this->table, $node['nleft'], $node['nright']
+                    'select %s from %s where nleft <= %d and nright >= %d %s order by nlevel',
+                    $this->_getFieldsAsString(), $table, $node['nleft'], $node['nright'], $where
                 );
             } else {
                 $query = sprintf(
-                    'select %s from %s where nleft < %d and nright > %d order by nlevel',
-                    $this->_getFieldsAsString(), $this->table, $node['nleft'], $node['nright']
+                    'select %s from %s where nleft < %d and nright > %d %s order by nlevel',
+                    $this->_getFieldsAsString(), $table, $node['nleft'], $node['nright'], $where
                 );
             }
 

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMLink/YDCMLink.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLink/YDCMLink.php	2006-06-23 08:13:24 UTC (rev 1951)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLink/YDCMLink.php	2006-07-03 11:15:11 UTC (rev 1952)
@@ -42,8 +42,8 @@
             $this->_description = 'This is a link component';
 
 			// register custom fields
-			$this->registerField( 'title' );
 			$this->registerField( 'url' );
+			$this->registerField( 'num_visits' );
 
 			// we don't have custom relations
 		}

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-06-23 08:13:24 UTC (rev 1951)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-07-03 11:15:11 UTC (rev 1952)
@@ -49,7 +49,6 @@
 
             // define custom fields
 			$this->registerField( 'current_version' );
-			$this->registerField( 'title' );
 			$this->registerField( 'html' );
 			$this->registerField( 'xhtml' );
 			$this->registerField( 'template_pack' );
@@ -60,8 +59,22 @@
 
 			// we don't have custom relations
 		}
+
 		
+        /**
+         *  This function will render this element (to be used in a menu)
+         *
+         *  @returns    Html link
+         */
+		function render( $component, $url ){
 
+			$url->setQueryVar( 'component', $component[ 'type' ] );
+			$url->setQueryVar( 'id',        $component[ 'content_id' ] );
+
+			return '<a href="' . $url->getUrl() . '">' . $component[ 'title' ] . '</a>';
+		}
+
+
         /**
          *  This function returns the page form
          *
@@ -196,37 +209,6 @@
 
 
         /**
-         *  This function returns the page sttributes
-         *
-         *  @returns    Node id
-         */
-		function getNode( $id ){
-		
-			// delete previous stored values
-			$this->resetValues();
-
-			// define our id to find		
-			$this->content_id = intval( $id );
-			
-			// because we can more than one page with same id (content versioning)
-			// we will get the highest (latest).
-			// TODO: get the highest if user did not define a custom version
-			$this->orderBy( 'component_id', 'desc' );
-			$this->limit( 1 );
-			
-			// find node
-			$this->findAll();
-			
-			// parse html
-			if ( isset( $this->html ) )  $this->html  = htmlentities( $this->html );
-			if ( isset( $this->xhtml ) ) $this->xhtml = htmlentities( $this->xhtml );
-
-			// return node attributes without relation prefixs
-			return $this->getValues( false, false, false, false );
-		}
-
-
-        /**
          *  This function will delete a page node (and not its children)
          *
          *  @param $id  Node id
@@ -237,7 +219,6 @@
 			$this->resetValues();
 
 			$this->content_id = intval( $id );
-		
 			$this->delete();
 			
 			// delete node from tree



From ximian at berlios.de  Mon Jul  3 13:23:55 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 3 Jul 2006 13:23:55 +0200
Subject: [ydf-devel] r1953 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200607031123.k63BNtQg026903@sheep.berlios.de>

Author: ximian
Date: 2006-07-03 13:23:42 +0200 (Mon, 03 Jul 2006)
New Revision: 1953

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
Log:
fixed previous YDDatabaseTree update

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-07-03 11:15:11 UTC (rev 1952)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDDatabaseTree.php	2006-07-03 11:23:42 UTC (rev 1953)
@@ -169,18 +169,6 @@
         }
 
         /**
-         *  Delete a field
-         *
-         *  @param  $name   The name of the field that should be deleted
-         */
-        function delField( $name ) {
-            if ( ! in_array( $name, $this->fields ) ) {
-                unset( $this->fields[ $name ] );
-            }
-        }
-
-
-        /**
          *  Add a number of fields to the list of fields to will get returned by this class.
          *
          *  @param  $names   The name of the field that should be added.
@@ -353,7 +341,7 @@
          *
          *  @returns An array of each node to passed node
          */
-        function getPath( $id=0, $includeSelf=false, $customTable = null, $customWhere = null ) {
+        function getPath( $id=0, $includeSelf=false ) {
 
             // Get the ID field
             $idField = $this->fields['id'];
@@ -366,25 +354,16 @@
                 return array();
             }
 
-			// check if we have a custom where clause
-			if ( is_null( $customWhere ) ) $where = '';
-			else                           $where = ' and ' . $customWhere;
-
-			// check if we have a custom table
-			if ( !is_null( $customTable ) ) $table = $customTable;
-			else                            $table = $this->table;
-
-
             // Include ourselves?
             if ( $includeSelf ) {
                 $query = sprintf(
-                    'select %s from %s where nleft <= %d and nright >= %d %s order by nlevel',
-                    $this->_getFieldsAsString(), $table, $node['nleft'], $node['nright'], $where
+                    'select %s from %s where nleft <= %d and nright >= %d order by nlevel',
+                    $this->_getFieldsAsString(), $this->table, $node['nleft'], $node['nright']
                 );
             } else {
                 $query = sprintf(
-                    'select %s from %s where nleft < %d and nright > %d %s order by nlevel',
-                    $this->_getFieldsAsString(), $table, $node['nleft'], $node['nright'], $where
+                    'select %s from %s where nleft < %d and nright > %d order by nlevel',
+                    $this->_getFieldsAsString(), $this->table, $node['nleft'], $node['nright']
                 );
             }
 



From pclaerhout at berlios.de  Thu Jul  6 19:39:53 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Thu, 6 Jul 2006 19:39:53 +0200
Subject: [ydf-devel] r1954 - in YDFramework2.0/trunk/examples/weblog: . include include/languages manage skins/default tiny_mce tiny_mce/langs tiny_mce/plugins tiny_mce/plugins/fullscreen tiny_mce/plugins/fullscreen/images tiny_mce/plugins/fullscreen/langs tiny_mce/plugins/imgselector tiny_mce/plugins/imgselector/images tiny_mce/themes tiny_mce/themes/advanced tiny_mce/themes/advanced/css tiny_mce/themes/advanced/docs tiny_mce/themes/advanced/docs/en tiny_mce/themes/advanced/docs/en/images tiny_mce/themes/advanced/docs/nl tiny_mce/themes/advanced/docs/nl/images tiny_mce/themes/advanced/images tiny_mce/themes/advanced/images/xp tiny_mce/themes/advanced/jscripts tiny_mce/themes/advanced/langs tiny_mce/utils
Message-ID: <200607061739.k66HdrD3028518@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-06 19:39:30 +0200 (Thu, 06 Jul 2006)
New Revision: 1954

Added:
   YDFramework2.0/trunk/examples/weblog/tiny_mce/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/blank.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/langs/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/langs/en.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/langs/nl.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/langs/readme.txt
   YDFramework2.0/trunk/examples/weblog/tiny_mce/license.txt
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/editor_plugin.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/editor_plugin_src.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/fullscreen.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/images/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/images/fullscreen.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/langs/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/langs/en.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/langs/nl.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/readme.txt
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/editor_plugin.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/images/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/images/Thumbs.db
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/images/constrain.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/images/ibrowser.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/images/textflow.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/imgselector.php
   YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/readme.txt
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/about.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/anchor.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/charmap.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/color_picker.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/css/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/css/editor_content.css
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/css/editor_popup.css
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/css/editor_ui.css
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/about.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/common_buttons.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/create_accessible_content.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/images/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/images/insert_anchor_window.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/images/insert_image_window.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/images/insert_link_window.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/images/insert_table_window.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/index.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_anchor_button.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_image_button.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_link_button.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_table_button.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/style.css
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/about.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/common_buttons.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/html_source_window.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_anchor_window.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_image_window.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_link_window.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_specchar_window.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_table_window.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/index.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_anchor_button.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_image_button.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_link_button.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_specchar_button.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_table_button.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/style.css
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/editor_template.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/editor_template_src.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/image.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/anchor.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/anchor_symbol.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/backcolor.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_de_se.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_es.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_fr.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_ru.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_tw.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/browse.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bullist.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/button_menu.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/buttons.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/cancel_button_bg.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/charmap.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/cleanup.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/close.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/code.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/color.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/copy.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/custom_1.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/cut.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/forecolor.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/help.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/hr.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/image.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/indent.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/insert_button_bg.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic_de_se.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic_es.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic_ru.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic_tw.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/justifycenter.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/justifyfull.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/justifyleft.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/justifyright.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/link.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/menu_check.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/newdocument.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/numlist.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/opacity.png
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/outdent.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/paste.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/redo.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/removeformat.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/separator.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/spacer.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/statusbar_resize.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/strikethrough.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/sub.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/sup.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline_es.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline_fr.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline_ru.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline_tw.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/undo.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/unlink.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/visualaid.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tab_bg.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tab_end.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tab_sel_bg.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tab_sel_end.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tabs_bg.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/about.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/anchor.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/charmap.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/color_picker.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/image.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/link.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/source_editor.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/langs/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/langs/en.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/langs/nl.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/link.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/source_editor.htm
   YDFramework2.0/trunk/examples/weblog/tiny_mce/tiny_mce.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/tiny_mce_gzip.php
   YDFramework2.0/trunk/examples/weblog/tiny_mce/tiny_mce_popup.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/editable_selects.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/form_utils.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/mclayer.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/mctabs.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/validate.js
Modified:
   YDFramework2.0/trunk/examples/weblog/include/YDWeblogAPI.php
   YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php
   YDFramework2.0/trunk/examples/weblog/include/YDWeblog_init.php
   YDFramework2.0/trunk/examples/weblog/include/languages/language_en.php
   YDFramework2.0/trunk/examples/weblog/include/languages/language_nl.php
   YDFramework2.0/trunk/examples/weblog/item.php
   YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl
   YDFramework2.0/trunk/examples/weblog/manage/comments.php
   YDFramework2.0/trunk/examples/weblog/manage/config.php
   YDFramework2.0/trunk/examples/weblog/manage/config.tpl
   YDFramework2.0/trunk/examples/weblog/manage/images.php
   YDFramework2.0/trunk/examples/weblog/manage/images_selector.tpl
   YDFramework2.0/trunk/examples/weblog/manage/items.php
   YDFramework2.0/trunk/examples/weblog/manage/manage.css
   YDFramework2.0/trunk/examples/weblog/manage/pages.php
   YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default/default.css
Log:
Added support for TinyMCE.
Added support for Google Analytics.

Modified: YDFramework2.0/trunk/examples/weblog/include/YDWeblogAPI.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/YDWeblogAPI.php	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/include/YDWeblogAPI.php	2006-07-06 17:39:30 UTC (rev 1954)
@@ -282,6 +282,13 @@
 
             }
 
+            // Fix the image paths
+            if( strtolower( basename( dirname( YD_SELF_FILE ) ) ) != 'manage' ) {
+                $uploads = YDConfig::get( 'dir_uploads', 'uploads' );
+                $item['body'] = str_replace( '../' . $uploads, $uploads, $item['body'] );
+                $item['body_more'] = str_replace( '../' . $uploads, $uploads, $item['body_more'] );
+            }
+
             // Get the count of images
             $item['num_images'] = sizeof( $item['images'] );
 

Modified: YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php	2006-07-06 17:39:30 UTC (rev 1954)
@@ -152,6 +152,17 @@
             $this->tpl->assign( 'weblog_link_archive',         YDUrl::makeLinkAbsolute( 'archive.php' ) );
             $this->tpl->assign( 'weblog_link_archive_gallery', YDUrl::makeLinkAbsolute( 'archive_gallery.php' ) );
 
+            // Add the Google Analytics tag
+            if ( YDConfig::get( 'google_analytics', '' ) != '' ) {
+                $out = '<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>' . YD_CRLF;
+                $out .= '<script type="text/javascript">' . YD_CRLF;
+                $out .= '_uacct = "' . YDConfig::get( 'google_analytics', '' ) . '"; urchinTracker();' . YD_CRLF;
+                $out .= '</script>' . YD_CRLF;
+                $this->tpl->assign( 'weblog_google_analytics', $out );
+            } else {
+                $this->tpl->assign( 'weblog_google_analytics', '' );
+            }
+
             // Get the link to the different directories
             $uploads_dir = YDUrl::makeLinkAbsolute( $this->dir_uploads );
             $skin_dir    = YDUrl::makeLinkAbsolute( $this->dir_skins . $this->skin );
@@ -322,6 +333,8 @@
             // Assign the weblog details
             $this->tpl->assign( 'weblog_title',       YDConfig::get( 'weblog_title', 'Untitled Weblog' ) );
             $this->tpl->assign( 'weblog_description', YDConfig::get( 'weblog_description', 'Untitled Weblog Description' ) );
+            $this->tpl->assign( 'weblog_language',    YDConfig::get( 'weblog_language', 'en' ) );
+            $this->tpl->assign( 'google_analytics',   YDConfig::get( 'google_analytics', '' ) != '' );
 
             // Get the link to the different directories
             $uploads_dir = YDUrl::makeLinkAbsolute( '../' . $this->dir_uploads );

Modified: YDFramework2.0/trunk/examples/weblog/include/YDWeblog_init.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/YDWeblog_init.php	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/include/YDWeblog_init.php	2006-07-06 17:39:30 UTC (rev 1954)
@@ -87,7 +87,7 @@
     YDInclude( 'YDUtil.php' );
     YDInclude( 'YDForm.php' );
     YDInclude( 'YDFileSystem.php' );
-    YDInclude( 'YDFormElements/YDFormElement_BBTextArea.php' );
+    YDInclude( 'YDFormElements/YDFormElement_TextArea.php' );
 
     // Check if the weblog application is locked or not
     $db = YDDatabase::getInstance(
@@ -240,22 +240,11 @@
     }
 
     // A BB Text Area form element
-    class YDWeblogFormElement_BBTextArea extends YDFormElement_BBTextArea {
+    class YDWeblogFormElement_BBTextArea extends YDFormElement_TextArea {
 
         // Class constructor
         function YDWeblogFormElement_BBTextArea( $form, $name, $label='', $attributes=array(), $options=array() ) {
-
-            // Initialize the parent
-            $this->YDFormElement_BBTextArea( $form, $name, $label, $attributes, $options );
-
-            // Create the toolbar
-            $this->clearButtons();
-            $this->addModifier( 'b', 'bold' );
-            $this->addModifier( 'i', 'italic' );
-            $this->addSimplePopup( 'url',   'url',   t( 'ta_enter_url' ) . ':',   'http://' );
-            $this->addSimplePopup( 'email', 'email', t( 'ta_enter_email' ) . ':' );
-            $this->addSimplePopup( 'img',   'img',   t( 'ta_enter_image' ) . ':', 'http://' );
-
+            $this->YDFormElement_TextArea( $form, $name, $label, $attributes, $options );
         }
 
     }
@@ -265,24 +254,7 @@
 
         // Class constructor
         function YDFormElement_AdminTextArea( $form, $name, $label='', $attributes=array(), $options=array() ) {
-
-            // Initialize the parent
             $this->YDWeblogFormElement_BBTextArea( $form, $name, $label, $attributes, $options );
-
-            // Create the base url
-            $baseurl = 'images.php?do=selectorImages&field=' . rawurlencode( $form . '_' . $name );
-
-            // Parameters for the window
-            $params = 'width=880,height=660,location=0,menubar=0,resizable=1,scrollbars=1,status=1,titlebar=1';
-
-            // Create the toolbar
-            $this->clearButtons();
-            $this->addModifier( 'b', 'bold' );
-            $this->addModifier( 'i', 'italic' );
-            $this->addSimplePopup( 'url',   'url',   t( 'ta_enter_url' ) . ':',   'http://' );
-            $this->addSimplePopup( 'email', 'email', t( 'ta_enter_email' ) . ':' );
-            $this->addPopupWindow( $baseurl, strtolower( t('select_image') ), 'YDImageSelector', $params );
-
         }
 
     }

Modified: YDFramework2.0/trunk/examples/weblog/include/languages/language_en.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/languages/language_en.php	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/include/languages/language_en.php	2006-07-06 17:39:30 UTC (rev 1954)
@@ -284,6 +284,8 @@
 $GLOBALS['t']['err_auto_close_items'] = 'Do not allow comment after x days should be numeric';
 $GLOBALS['t']['cfg_include_debug_info'] = 'Show debugging information';
 $GLOBALS['t']['cfg_default_item_settings'] = 'Default values for new items';
+$GLOBALS['t']['cfg_weblog_google_analytics'] = 'Google Analytics Account';
+$GLOBALS['t']['cfg_google_analytics'] = 'Google Analytics';
 
 // manage/item.tpl
 $GLOBALS['t']['item_title'] = 'Item Title';

Modified: YDFramework2.0/trunk/examples/weblog/include/languages/language_nl.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/languages/language_nl.php	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/include/languages/language_nl.php	2006-07-06 17:39:30 UTC (rev 1954)
@@ -284,6 +284,8 @@
 $GLOBALS['t']['err_auto_close_items'] = 'Laat geen commentaren toe na x dagen moet een getal zijn';
 $GLOBALS['t']['cfg_include_debug_info'] = 'Toon debugging informatie';
 $GLOBALS['t']['cfg_default_item_settings'] = 'Standaard waardes voor nieuwe posts';
+$GLOBALS['t']['cfg_weblog_google_analytics'] = 'Google Analytics Account';
+$GLOBALS['t']['cfg_google_analytics'] = 'Google Analytics';
 
 // manage/item.tpl
 $GLOBALS['t']['item_title'] = 'Item Titel';

Modified: YDFramework2.0/trunk/examples/weblog/item.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/item.php	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/item.php	2006-07-06 17:39:30 UTC (rev 1954)
@@ -56,7 +56,7 @@
                 $form->addElement( 'text', 'username', t( 'name' ) );
                 $form->addElement( 'text', 'useremail', t( 'mail_not_published' ) );
                 $form->addElement( 'text', 'userwebsite', t( 'website' ) );
-                $form->addElement( 'wlbbtextarea', 'comment', '', array( 'style' => 'width: 450px' ) );
+                $form->addElement( 'textarea', 'comment', '' );
                 $form->addElement( 'submit', 'cmdSubmit', t( 'submit_comment' ), array( 'id' => 'submit' ) );
                 $form->addElement( 'hidden', 'item_id' );
 

Modified: YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl	2006-07-06 17:39:30 UTC (rev 1954)
@@ -6,6 +6,8 @@
 
     <link rel="stylesheet" type="text/css" href="manage.css" />
 
+    <script language="JavaScript" src="../tiny_mce/tiny_mce_gzip.php"></script>
+
     <script language="JavaScript">
     <!--
 
@@ -25,6 +27,19 @@
             obj.bgColor = '#FFFFFF';
         {literal}}{/literal}
 
+        {literal}tinyMCE.init({
+            mode : "textareas",
+            theme : "advanced",
+            language: "{/literal}{$weblog_language}{literal}",
+            plugins : "imgselector,fullscreen",
+            theme_advanced_buttons1 : "bold,italic,separator,justifyleft,justifycenter,justifyright,separator,bullist,numlist,separator,undo,redo,separator,link,unlink,code,fullscreen,separator,imgselector",
+            theme_advanced_buttons2 : "",
+            theme_advanced_buttons3 : "",
+            theme_advanced_toolbar_location : "top",
+            theme_advanced_toolbar_align : "left",
+            theme_advanced_path_location : ""
+        });{/literal}
+
     //-->
     </script>
 
@@ -110,6 +125,9 @@
                     <td class="adminRowL">
                         <b>{t w="h_statistics"}</b><br/>
                         &raquo; <a href="stats.php">{t w="a_statistics"}</a><br/>
+                        {if $google_analytics}
+                            &raquo; <a href="https://www.google.com/analytics/home/" target="_blank">{t w="cfg_google_analytics"}</a><br/>
+                        {/if}
                     </td>
                 </tr>
                 <tr>

Modified: YDFramework2.0/trunk/examples/weblog/manage/comments.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/comments.php	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/manage/comments.php	2006-07-06 17:39:30 UTC (rev 1954)
@@ -80,6 +80,7 @@
 
                 // Get the comment by ID
                 $defaults = $this->weblog->getCommentById( $id );
+                $defaults['comment'] = YDTemplate_modifier_bbcode( $defaults['comment'] );
 
                 // Set the defaults
                 $form->setDefaults( $defaults );

Modified: YDFramework2.0/trunk/examples/weblog/manage/config.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/config.php	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/manage/config.php	2006-07-06 17:39:30 UTC (rev 1954)
@@ -49,7 +49,7 @@
 
             // Get the list of skins
             $dir = new YDFSDirectory( dirname( __FILE__ ) . '/../' . $this->dir_skins );
-            $items = $dir->getContents( '!.*', '', array( 'YDFSDirectory' ) );
+            $items = $dir->getContents( null, '', array( 'YDFSDirectory' ) );
             $skins = array();
             foreach ( $items as $item ) {
                 $skins[ $item ] = $item;
@@ -80,6 +80,7 @@
             $form->addElement( 'select', 'weblog_skin', t( 'cfg_weblog_skin' ), array( 'class' => 'tfM', 'style' => 'width: 100%' ), $skins );
             $form->addElement( 'select', 'weblog_language', t( 'cfg_weblog_language' ), array( 'class' => 'tfM', 'style' => 'width: 100%' ), $languages );
             $form->addElement( 'checkbox', 'include_debug_info', t( 'cfg_include_debug_info' ), array( 'style' => 'border: none;' ) );
+            $form->addElement( 'text', 'google_analytics', t( 'cfg_weblog_google_analytics' ), array( 'class' => 'tfM' ) );
 
             $form->addElement( 'checkbox', 'email_new_comment', t( 'cfg_notification_email_comment' ),  array( 'style' => 'border: none;' ) );
             $form->addElement( 'checkbox', 'email_new_item', t( 'cfg_notification_email_item' ),  array( 'style' => 'border: none;' ) );
@@ -154,6 +155,7 @@
             $config['weblog_entries_fp']    = YDConfig::get( 'weblog_entries_fp',    1 );
             $config['weblog_skin']          = YDConfig::get( 'weblog_skin',          'default' );
             $config['weblog_language']      = YDConfig::get( 'weblog_language',      'nl' );
+            $config['google_analytics']     = YDConfig::get( 'google_analytics',     '' );
             $config['include_debug_info']   = YDConfig::get( 'include_debug_info',   false );
             $config['email_new_comment']    = YDConfig::get( 'email_new_comment',    true );
             $config['email_new_item']       = YDConfig::get( 'email_new_item',       true );

Modified: YDFramework2.0/trunk/examples/weblog/manage/config.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/config.tpl	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/manage/config.tpl	2006-07-06 17:39:30 UTC (rev 1954)
@@ -76,6 +76,10 @@
             <td class="adminRowL">{t w="cfg_include_debug_info"}</td>
             <td class="adminRowL">{$config.include_debug_info}</td>
         </tr>
+        <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
+            <td class="adminRowL">{t w="cfg_weblog_google_analytics"}</td>
+            <td class="adminRowL">{$config.google_analytics|default:'&nbsp;'}</td>
+        </tr>
     </table>
     <table width="700" cellspacing="0" cellpadding="0" border="0">
         <tr><td colspan="3">&nbsp;</td></tr>
@@ -129,14 +133,6 @@
             <td class="adminRowL" width="400">{$config.max_syndicated_items}</td>
         </tr>
     </table>
-    {*
-    <table width="700" cellspacing="0" cellpadding="0" border="0">
-        <tr><td colspan="3">&nbsp;</td></tr>
-        <tr>
-            <th colspan="3" class="adminRowLG">&raquo; {t w="cfg_spam_protection"}</th>
-        </tr>
-    </table>
-    *}
     <p><input type="button" class="button" onClick="window.location='{$YD_SELF_SCRIPT}?do=edit';" value="{t w="change_config"}" />
 {/if}
 
@@ -202,6 +198,10 @@
                 <td class="adminRowL">{$form.include_debug_info.label_html}</td>
                 <td class="adminRowL">{$form.include_debug_info.html}</td>
             </tr>
+            <tr>
+                <td class="adminRowL">{$form.google_analytics.label_html}</td>
+                <td class="adminRowL">{$form.google_analytics.html}</td>
+            </tr>
         </table>
         <table width="700" cellspacing="0" cellpadding="0" border="0">
             <tr><td colspan="3">&nbsp;</td></tr>

Modified: YDFramework2.0/trunk/examples/weblog/manage/images.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/images.php	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/manage/images.php	2006-07-06 17:39:30 UTC (rev 1954)
@@ -173,7 +173,7 @@
 
             // Get the list of files
             $dir = new YDFSDirectory( $this->dir_rel );
-            $images = @ $dir->getContents( array( '!index.html', '!index.php' ), null, array( 'YDFSImage' ), true, 'desc' );
+            $images = $dir->getContents( null, null, array( 'YDFSImage' ), true, 'desc' );
 
             // Make the relative path for each file
             foreach ( $images as $key=>$image ) {

Modified: YDFramework2.0/trunk/examples/weblog/manage/images_selector.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/images_selector.tpl	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/manage/images_selector.tpl	2006-07-06 17:39:30 UTC (rev 1954)
@@ -13,12 +13,11 @@
             return confirm( '{t w="confirm_delete"}\n\n"' + img + '"?');
         {literal}}{/literal}
 
-        {literal}function addItem( item ) {{/literal}
-            window.opener.focus();
-            window.opener.AddText( '{$smarty.get.field}', '[img]{$uploads_dir}/' , item, '[/img]' );
-            window.close()
-            return false;
-        {literal}}{/literal}
+        {literal}function addItem( item ) {
+            var src = '{/literal}{$uploads_dir}{literal}/' + item;
+            window.opener.tinyMCE.themes['advanced']._insertImage(src);
+            window.close();
+        }{/literal}
 
         {literal}function YDRowMouseOver( obj ) {{/literal}
             document.getElementById( obj + '_1' ).bgColor = '#EDF3FE';

Modified: YDFramework2.0/trunk/examples/weblog/manage/items.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/items.php	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/manage/items.php	2006-07-06 17:39:30 UTC (rev 1954)
@@ -69,6 +69,8 @@
 
                 // Get the comment by ID
                 $defaults = $this->weblog->getItemById( $id );
+                $defaults['body'] = YDTemplate_modifier_bbcode( $defaults['body'] );
+                $defaults['body_more'] = YDTemplate_modifier_bbcode( $defaults['body_more'] );
                 $defaults['modified'] = gmmktime();
 
                 // Assign the values to the template

Modified: YDFramework2.0/trunk/examples/weblog/manage/manage.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/manage.css	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/manage/manage.css	2006-07-06 17:39:30 UTC (rev 1954)
@@ -82,12 +82,7 @@
     width: 400px;
 }
 
-textarea.taM {
-    width: 400px;
-    height: 200px;
-}
-
-textarea.bbtextarea {
+textarea {
     width: 700px;
     height: 200px;
     font-family: "Lucida Sans Typewriter", "Andale Mono", "Courier New", "Courier";

Modified: YDFramework2.0/trunk/examples/weblog/manage/pages.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/pages.php	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/manage/pages.php	2006-07-06 17:39:30 UTC (rev 1954)
@@ -64,6 +64,7 @@
 
                 // Get the page by ID
                 $defaults = $this->weblog->getPageById( $id );
+                $defaults['body'] = YDTemplate_modifier_bbcode( $defaults['body'] );
 
                 // Get the current date/time
                 $defaults['modified'] = gmmktime();

Modified: YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl	2006-07-06 17:39:30 UTC (rev 1954)
@@ -44,6 +44,8 @@
         </script>
     {/if}
 
+    {$weblog_google_analytics}
+
 </head>
 
 <body>

Modified: YDFramework2.0/trunk/examples/weblog/skins/default/default.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default/default.css	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/skins/default/default.css	2006-07-06 17:39:30 UTC (rev 1954)
@@ -1,7 +1,6 @@
-/* Begin Typography & Colors */
 body {
-	font-size: 62.5%; /* Resets 1em to 10px */
-	font-size: 10px; /* Resets 1em to 10px */
+	font-size: 62.5%;
+	font-size: 10px;
 	font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif;
 	background-color: #d5d6d7;
 	color: #333;
@@ -113,7 +112,7 @@
 	}
 
 #commentform textarea {
-	font-size: 1.3em;
+	font-size: 1.0em;
 	}
 
 .commentlist li {
@@ -185,11 +184,7 @@
 	font-style: normal;
 	text-transform: capitalize;
 	}
-/* End Typography & Colors */
 
-
-
-/* Begin Structure */
 body {
 	margin: 0;
 	padding: 0; 
@@ -259,11 +254,7 @@
 	padding: 20px 0;
 	text-align: center;
 	}
-/* End Structure */
 
-
-
-/*	Begin Headers */
 h1 {
 	padding-top: 70px;
 	margin: 0;
@@ -296,21 +287,12 @@
 	padding: 0;
 	margin: 40px auto 20px ;
 	}
-/* End Headers */
 
-
-
-/* Begin Images */
 p img {
 	padding: 0;
 	max-width: 100%;
 	}
 
-/*	Using 'class="alignright"' on an image will (who would've
-	thought?!) align the image to the right. And using 'class="centered',
-	will of course center the image. This is much better than using
-	align="center", being much more futureproof (and valid) */
-	
 img.centered {
 	display: block;
 	margin-left: auto;
@@ -336,15 +318,7 @@
 .alignleft {
 	float: left
 	}
-/* End Images */
 
-
-
-/* Begin Lists
-
-	Special stylized non-IE bullets
-	Do not work in Internet Explorer, which merely default to normal bullets. */
-
 html>body .entry ul {
 	margin-left: 0px;
 	padding: 0 0 0 30px;
@@ -408,11 +382,7 @@
 	margin: 3px 0 0;
 	padding: 0;
 	}
-/* End Entry Lists */
 
-
-
-/* Begin Form Elements */
 #searchform {
 	margin: 10px auto;
 	padding: 5px 3px; 
@@ -428,7 +398,7 @@
 	padding: 1px;
 	}
 
-.entry form { /* This is mainly for password protected posts, makes them look better. */
+.entry form {
 	text-align:center;
 	}
 
@@ -444,6 +414,7 @@
 
 #commentform textarea {
 	width: 100%;
+	height: 160px;
 	padding: 2px;
 	}
 
@@ -451,13 +422,8 @@
 	margin: 0;
 	background-color: #06c;
 	color: #fff;
-	/*float: right;*/
 	}
-/* End Form Elements */
 
-
-
-/* Begin Comments*/
 .alt {
 	margin: 0;
 	padding: 10px;
@@ -492,11 +458,7 @@
 	margin: 0;
 	display: block;
 	}
-/* End Comments */
 
-
-
-/* Begin Sidebar */
 #sidebar
 {
 	padding: 20px 0 10px 0;
@@ -507,48 +469,7 @@
 #sidebar form {
 	margin: 0;
 	}
-/* End Sidebar */
 
-
-
-/* Begin Calendar */
-#wp-calendar {
-	empty-cells: show;
-	margin: 10px auto 0;
-	width: 155px;
-	}
-
-#wp-calendar #next a {
-	padding-right: 10px;
-	text-align: right;
-	}
-
-#wp-calendar #prev a {
-	padding-left: 10px;
-	text-align: left;
-	}
-
-#wp-calendar a {
-	display: block;
-	}
-
-#wp-calendar caption {
-	text-align: center;
-	width: 100%;
-	}
-
-#wp-calendar td {
-	padding: 3px 0;
-	text-align: center;
-	}
-
-#wp-calendar td.pad:hover { /* Doesn't work in IE */
-	background-color: #fff; }
-/* End Calendar */
-
-
-
-/* Begin Various Tags & Classes */
 acronym, abbr, span.caps {
 	cursor: help;
 	}
@@ -595,14 +516,6 @@
 	font-size: 0.8em;
 }
 
-/* End Various Tags & Classes*/
-
-
-
-/* "Daisy, Daisy, give me your answer do. I'm half crazy all for the love of you.
-	It won't be a stylish marriage, I can't afford a carriage.
-	But you'll look sweet upon the seat of a bicycle built for two." */
-
 .required {
 	color: red;
 }

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/blank.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/blank.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/blank.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,9 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+	<title>blank_page</title>
+	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
+</head>
+<body class="mceContentBody">
+
+</body>
+</html>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/langs/en.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/langs/en.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/langs/en.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,41 @@
+// UK lang variables
+
+tinyMCE.addToLang('',{
+bold_desc : 'Bold (Ctrl+B)',
+italic_desc : 'Italic (Ctrl+I)',
+underline_desc : 'Underline (Ctrl+U)',
+striketrough_desc : 'Strikethrough',
+justifyleft_desc : 'Align left',
+justifycenter_desc : 'Align center',
+justifyright_desc : 'Align right',
+justifyfull_desc : 'Align full',
+bullist_desc : 'Unordered list',
+numlist_desc : 'Ordered list',
+outdent_desc : 'Outdent',
+indent_desc : 'Indent',
+undo_desc : 'Undo (Ctrl+Z)',
+redo_desc : 'Redo (Ctrl+Y)',
+link_desc : 'Insert/edit link',
+unlink_desc : 'Unlink',
+image_desc : 'Insert/edit image',
+cleanup_desc : 'Cleanup messy code',
+focus_alert : 'A editor instance must be focused before using this command.',
+edit_confirm : 'Do you want to use the WYSIWYG mode for this textarea?',
+insert_link_title : 'Insert/edit link',
+insert : 'Insert',
+update : 'Update',
+cancel : 'Cancel',
+insert_link_url : 'Link URL',
+insert_link_target : 'Target',
+insert_link_target_same : 'Open link in the same window',
+insert_link_target_blank : 'Open link in a new window',
+insert_image_title : 'Insert/edit image',
+insert_image_src : 'Image URL',
+insert_image_alt : 'Image description',
+help_desc : 'Help',
+bold_img : "bold.gif",
+italic_img : "italic.gif",
+underline_img : "underline.gif",
+clipboard_msg : 'Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?',
+popup_blocked : 'Sorry, but we have noticed that your popup-blocker has disabled a window that provides application functionality. You will need to disable popup blocking on this site in order to fully utilize this tool.'
+});

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/langs/nl.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/langs/nl.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/langs/nl.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,42 @@
+// NL lang variables thanks to "Meint Post"
+// Updates by (2.0) Mark van der Sanden
+
+tinyMCE.addToLang('',{
+bold_desc : 'Vet (Ctrl+B)',
+italic_desc : 'Cursief (Ctrl+I)',
+underline_desc : 'Onderstrepen (Ctrl+U)',
+striketrough_desc : 'Doorhalen',
+justifyleft_desc : 'Links uitlijnen',
+justifycenter_desc : 'Centreren',
+justifyright_desc : 'Rechts uitlijnen',
+justifyfull_desc : 'Volledig uitlijnen',
+bullist_desc : 'Opsommingstekens',
+numlist_desc : 'Genummerde lijst',
+outdent_desc : 'Inspringen verkleinen',
+indent_desc : 'Inspringen vergroten',
+undo_desc : 'Ongedaan maken (Ctrl+Z)',
+redo_desc : 'Opnieuw (Ctrl+Y)',
+link_desc : 'Hyperlink invoegen/bewerken',
+unlink_desc : 'Hyperlink verwijderen',
+image_desc : 'Afbeelding invoegen',
+cleanup_desc : 'Code opschonen',
+focus_alert : 'Klik op de tekst in de editor voor het uitvoeren van dit commando.',
+edit_confirm : 'Wilt u de WYSIWYG modus voor deze textarea gebruiken?',
+insert_link_title : 'Hyperlink invoegen/bewerken',
+insert : 'OK',
+update : 'Toepassen',
+cancel : 'Annuleren',
+insert_link_url : 'URL link',
+insert_link_target : 'Bestemming',
+insert_link_target_same : 'Open link in hetzelfde venster',
+insert_link_target_blank : 'Open link in een nieuw venster',
+insert_image_title : 'Afbeelding invoegen/bewerken',
+insert_image_src : 'Afbeelding',
+insert_image_alt : 'Beschrijving',
+help_desc : 'Help',
+bold_img : "bold.gif",
+italic_img : "italic.gif",
+underline_img : "underline.gif",
+clipboard_msg : 'Kopi?ren/knippen/plakken is niet beschikbaar in Mozilla en Firefox.\nWilt u meer informatie over deze kwestie?',
+popup_blocked : 'Uw browser heeft zojuist geweigerd een popup-venster te tonen. Waarschijnlijk gebruikt u een poup-blocker die voor deze editor te streng omgaat met popups. Om het venster toch te tonen, zult u uw popup-blocker zo in moeten stellen dat het popups van deze website toestaat.'
+});

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/langs/readme.txt
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/langs/readme.txt	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/langs/readme.txt	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,7 @@
+Language packs are from version 2.0.5 removed from the core but can be downloadable from the TinyMCE website.
+http://tinymce.moxiecode.com/download.php
+
+The language pack codes are based on ISO-639-1
+http://www.loc.gov/standards/iso639-2/englangn.html
+
+Try using entires if possible. &aring; etc.

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/license.txt
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/license.txt	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/license.txt	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,437 @@
+		  GNU LIBRARY GENERAL PUBLIC LICENSE
+		       Version 2, June 1991
+
+ Copyright (C) 1991 Free Software Foundation, Inc.
+ 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ Everyone is permitted to copy and distribute verbatim copies
+ of this license document, but changing it is not allowed.
+
+[This is the first released version of the library GPL.  It is
+ numbered 2 because it goes with version 2 of the ordinary GPL.]
+
+			    Preamble
+
+  The licenses for most software are designed to take away your
+freedom to share and change it.  By contrast, the GNU General Public
+Licenses are intended to guarantee your freedom to share and change
+free software--to make sure the software is free for all its users.
+
+  This license, the Library General Public License, applies to some
+specially designated Free Software Foundation software, and to any
+other libraries whose authors decide to use it.  You can use it for
+your libraries, too.
+
+  When we speak of free software, we are referring to freedom, not
+price.  Our General Public Licenses are designed to make sure that you
+have the freedom to distribute copies of free software (and charge for
+this service if you wish), that you receive source code or can get it
+if you want it, that you can change the software or use pieces of it
+in new free programs; and that you know you can do these things.
+
+  To protect your rights, we need to make restrictions that forbid
+anyone to deny you these rights or to ask you to surrender the rights.
+These restrictions translate to certain responsibilities for you if
+you distribute copies of the library, or if you modify it.
+
+  For example, if you distribute copies of the library, whether gratis
+or for a fee, you must give the recipients all the rights that we gave
+you.  You must make sure that they, too, receive or can get the source
+code.  If you link a program with the library, you must provide
+complete object files to the recipients so that they can relink them
+with the library, after making changes to the library and recompiling
+it.  And you must show them these terms so they know their rights.
+
+  Our method of protecting your rights has two steps: (1) copyright
+the library, and (2) offer you this license which gives you legal
+permission to copy, distribute and/or modify the library.
+
+  Also, for each distributor's protection, we want to make certain
+that everyone understands that there is no warranty for this free
+library.  If the library is modified by someone else and passed on, we
+want its recipients to know that what they have is not the original
+version, so that any problems introduced by others will not reflect on
+the original authors' reputations.
+.
+  Finally, any free program is threatened constantly by software
+patents.  We wish to avoid the danger that companies distributing free
+software will individually obtain patent licenses, thus in effect
+transforming the program into proprietary software.  To prevent this,
+we have made it clear that any patent must be licensed for everyone's
+free use or not licensed at all.
+
+  Most GNU software, including some libraries, is covered by the ordinary
+GNU General Public License, which was designed for utility programs.  This
+license, the GNU Library General Public License, applies to certain
+designated libraries.  This license is quite different from the ordinary
+one; be sure to read it in full, and don't assume that anything in it is
+the same as in the ordinary license.
+
+  The reason we have a separate public license for some libraries is that
+they blur the distinction we usually make between modifying or adding to a
+program and simply using it.  Linking a program with a library, without
+changing the library, is in some sense simply using the library, and is
+analogous to running a utility program or application program.  However, in
+a textual and legal sense, the linked executable is a combined work, a
+derivative of the original library, and the ordinary General Public License
+treats it as such.
+
+  Because of this blurred distinction, using the ordinary General
+Public License for libraries did not effectively promote software
+sharing, because most developers did not use the libraries.  We
+concluded that weaker conditions might promote sharing better.
+
+  However, unrestricted linking of non-free programs would deprive the
+users of those programs of all benefit from the free status of the
+libraries themselves.  This Library General Public License is intended to
+permit developers of non-free programs to use free libraries, while
+preserving your freedom as a user of such programs to change the free
+libraries that are incorporated in them.  (We have not seen how to achieve
+this as regards changes in header files, but we have achieved it as regards
+changes in the actual functions of the Library.)  The hope is that this
+will lead to faster development of free libraries.
+
+  The precise terms and conditions for copying, distribution and
+modification follow.  Pay close attention to the difference between a
+"work based on the library" and a "work that uses the library".  The
+former contains code derived from the library, while the latter only
+works together with the library.
+
+  Note that it is possible for a library to be covered by the ordinary
+General Public License rather than by this special one.
+.
+		  GNU LIBRARY GENERAL PUBLIC LICENSE
+   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
+
+  0. This License Agreement applies to any software library which
+contains a notice placed by the copyright holder or other authorized
+party saying it may be distributed under the terms of this Library
+General Public License (also called "this License").  Each licensee is
+addressed as "you".
+
+  A "library" means a collection of software functions and/or data
+prepared so as to be conveniently linked with application programs
+(which use some of those functions and data) to form executables.
+
+  The "Library", below, refers to any such software library or work
+which has been distributed under these terms.  A "work based on the
+Library" means either the Library or any derivative work under
+copyright law: that is to say, a work containing the Library or a
+portion of it, either verbatim or with modifications and/or translated
+straightforwardly into another language.  (Hereinafter, translation is
+included without limitation in the term "modification".)
+
+  "Source code" for a work means the preferred form of the work for
+making modifications to it.  For a library, complete source code means
+all the source code for all modules it contains, plus any associated
+interface definition files, plus the scripts used to control compilation
+and installation of the library.
+
+  Activities other than copying, distribution and modification are not
+covered by this License; they are outside its scope.  The act of
+running a program using the Library is not restricted, and output from
+such a program is covered only if its contents constitute a work based
+on the Library (independent of the use of the Library in a tool for
+writing it).  Whether that is true depends on what the Library does
+and what the program that uses the Library does.
+  
+  1. You may copy and distribute verbatim copies of the Library's
+complete source code as you receive it, in any medium, provided that
+you conspicuously and appropriately publish on each copy an
+appropriate copyright notice and disclaimer of warranty; keep intact
+all the notices that refer to this License and to the absence of any
+warranty; and distribute a copy of this License along with the
+Library.
+
+  You may charge a fee for the physical act of transferring a copy,
+and you may at your option offer warranty protection in exchange for a
+fee.
+.
+  2. You may modify your copy or copies of the Library or any portion
+of it, thus forming a work based on the Library, and copy and
+distribute such modifications or work under the terms of Section 1
+above, provided that you also meet all of these conditions:
+
+    a) The modified work must itself be a software library.
+
+    b) You must cause the files modified to carry prominent notices
+    stating that you changed the files and the date of any change.
+
+    c) You must cause the whole of the work to be licensed at no
+    charge to all third parties under the terms of this License.
+
+    d) If a facility in the modified Library refers to a function or a
+    table of data to be supplied by an application program that uses
+    the facility, other than as an argument passed when the facility
+    is invoked, then you must make a good faith effort to ensure that,
+    in the event an application does not supply such function or
+    table, the facility still operates, and performs whatever part of
+    its purpose remains meaningful.
+
+    (For example, a function in a library to compute square roots has
+    a purpose that is entirely well-defined independent of the
+    application.  Therefore, Subsection 2d requires that any
+    application-supplied function or table used by this function must
+    be optional: if the application does not supply it, the square
+    root function must still compute square roots.)
+
+These requirements apply to the modified work as a whole.  If
+identifiable sections of that work are not derived from the Library,
+and can be reasonably considered independent and separate works in
+themselves, then this License, and its terms, do not apply to those
+sections when you distribute them as separate works.  But when you
+distribute the same sections as part of a whole which is a work based
+on the Library, the distribution of the whole must be on the terms of
+this License, whose permissions for other licensees extend to the
+entire whole, and thus to each and every part regardless of who wrote
+it.
+
+Thus, it is not the intent of this section to claim rights or contest
+your rights to work written entirely by you; rather, the intent is to
+exercise the right to control the distribution of derivative or
+collective works based on the Library.
+
+In addition, mere aggregation of another work not based on the Library
+with the Library (or with a work based on the Library) on a volume of
+a storage or distribution medium does not bring the other work under
+the scope of this License.
+
+  3. You may opt to apply the terms of the ordinary GNU General Public
+License instead of this License to a given copy of the Library.  To do
+this, you must alter all the notices that refer to this License, so
+that they refer to the ordinary GNU General Public License, version 2,
+instead of to this License.  (If a newer version than version 2 of the
+ordinary GNU General Public License has appeared, then you can specify
+that version instead if you wish.)  Do not make any other change in
+these notices.
+.
+  Once this change is made in a given copy, it is irreversible for
+that copy, so the ordinary GNU General Public License applies to all
+subsequent copies and derivative works made from that copy.
+
+  This option is useful when you wish to copy part of the code of
+the Library into a program that is not a library.
+
+  4. You may copy and distribute the Library (or a portion or
+derivative of it, under Section 2) in object code or executable form
+under the terms of Sections 1 and 2 above provided that you accompany
+it with the complete corresponding machine-readable source code, which
+must be distributed under the terms of Sections 1 and 2 above on a
+medium customarily used for software interchange.
+
+  If distribution of object code is made by offering access to copy
+from a designated place, then offering equivalent access to copy the
+source code from the same place satisfies the requirement to
+distribute the source code, even though third parties are not
+compelled to copy the source along with the object code.
+
+  5. A program that contains no derivative of any portion of the
+Library, but is designed to work with the Library by being compiled or
+linked with it, is called a "work that uses the Library".  Such a
+work, in isolation, is not a derivative work of the Library, and
+therefore falls outside the scope of this License.
+
+  However, linking a "work that uses the Library" with the Library
+creates an executable that is a derivative of the Library (because it
+contains portions of the Library), rather than a "work that uses the
+library".  The executable is therefore covered by this License.
+Section 6 states terms for distribution of such executables.
+
+  When a "work that uses the Library" uses material from a header file
+that is part of the Library, the object code for the work may be a
+derivative work of the Library even though the source code is not.
+Whether this is true is especially significant if the work can be
+linked without the Library, or if the work is itself a library.  The
+threshold for this to be true is not precisely defined by law.
+
+  If such an object file uses only numerical parameters, data
+structure layouts and accessors, and small macros and small inline
+functions (ten lines or less in length), then the use of the object
+file is unrestricted, regardless of whether it is legally a derivative
+work.  (Executables containing this object code plus portions of the
+Library will still fall under Section 6.)
+
+  Otherwise, if the work is a derivative of the Library, you may
+distribute the object code for the work under the terms of Section 6.
+Any executables containing that work also fall under Section 6,
+whether or not they are linked directly with the Library itself.
+.
+  6. As an exception to the Sections above, you may also compile or
+link a "work that uses the Library" with the Library to produce a
+work containing portions of the Library, and distribute that work
+under terms of your choice, provided that the terms permit
+modification of the work for the customer's own use and reverse
+engineering for debugging such modifications.
+
+  You must give prominent notice with each copy of the work that the
+Library is used in it and that the Library and its use are covered by
+this License.  You must supply a copy of this License.  If the work
+during execution displays copyright notices, you must include the
+copyright notice for the Library among them, as well as a reference
+directing the user to the copy of this License.  Also, you must do one
+of these things:
+
+    a) Accompany the work with the complete corresponding
+    machine-readable source code for the Library including whatever
+    changes were used in the work (which must be distributed under
+    Sections 1 and 2 above); and, if the work is an executable linked
+    with the Library, with the complete machine-readable "work that
+    uses the Library", as object code and/or source code, so that the
+    user can modify the Library and then relink to produce a modified
+    executable containing the modified Library.  (It is understood
+    that the user who changes the contents of definitions files in the
+    Library will not necessarily be able to recompile the application
+    to use the modified definitions.)
+
+    b) Accompany the work with a written offer, valid for at
+    least three years, to give the same user the materials
+    specified in Subsection 6a, above, for a charge no more
+    than the cost of performing this distribution.
+
+    c) If distribution of the work is made by offering access to copy
+    from a designated place, offer equivalent access to copy the above
+    specified materials from the same place.
+
+    d) Verify that the user has already received a copy of these
+    materials or that you have already sent this user a copy.
+
+  For an executable, the required form of the "work that uses the
+Library" must include any data and utility programs needed for
+reproducing the executable from it.  However, as a special exception,
+the source code distributed need not include anything that is normally
+distributed (in either source or binary form) with the major
+components (compiler, kernel, and so on) of the operating system on
+which the executable runs, unless that component itself accompanies
+the executable.
+
+  It may happen that this requirement contradicts the license
+restrictions of other proprietary libraries that do not normally
+accompany the operating system.  Such a contradiction means you cannot
+use both them and the Library together in an executable that you
+distribute.
+.
+  7. You may place library facilities that are a work based on the
+Library side-by-side in a single library together with other library
+facilities not covered by this License, and distribute such a combined
+library, provided that the separate distribution of the work based on
+the Library and of the other library facilities is otherwise
+permitted, and provided that you do these two things:
+
+    a) Accompany the combined library with a copy of the same work
+    based on the Library, uncombined with any other library
+    facilities.  This must be distributed under the terms of the
+    Sections above.
+
+    b) Give prominent notice with the combined library of the fact
+    that part of it is a work based on the Library, and explaining
+    where to find the accompanying uncombined form of the same work.
+
+  8. You may not copy, modify, sublicense, link with, or distribute
+the Library except as expressly provided under this License.  Any
+attempt otherwise to copy, modify, sublicense, link with, or
+distribute the Library is void, and will automatically terminate your
+rights under this License.  However, parties who have received copies,
+or rights, from you under this License will not have their licenses
+terminated so long as such parties remain in full compliance.
+
+  9. You are not required to accept this License, since you have not
+signed it.  However, nothing else grants you permission to modify or
+distribute the Library or its derivative works.  These actions are
+prohibited by law if you do not accept this License.  Therefore, by
+modifying or distributing the Library (or any work based on the
+Library), you indicate your acceptance of this License to do so, and
+all its terms and conditions for copying, distributing or modifying
+the Library or works based on it.
+
+  10. Each time you redistribute the Library (or any work based on the
+Library), the recipient automatically receives a license from the
+original licensor to copy, distribute, link with or modify the Library
+subject to these terms and conditions.  You may not impose any further
+restrictions on the recipients' exercise of the rights granted herein.
+You are not responsible for enforcing compliance by third parties to
+this License.
+.
+  11. If, as a consequence of a court judgment or allegation of patent
+infringement or for any other reason (not limited to patent issues),
+conditions are imposed on you (whether by court order, agreement or
+otherwise) that contradict the conditions of this License, they do not
+excuse you from the conditions of this License.  If you cannot
+distribute so as to satisfy simultaneously your obligations under this
+License and any other pertinent obligations, then as a consequence you
+may not distribute the Library at all.  For example, if a patent
+license would not permit royalty-free redistribution of the Library by
+all those who receive copies directly or indirectly through you, then
+the only way you could satisfy both it and this License would be to
+refrain entirely from distribution of the Library.
+
+If any portion of this section is held invalid or unenforceable under any
+particular circumstance, the balance of the section is intended to apply,
+and the section as a whole is intended to apply in other circumstances.
+
+It is not the purpose of this section to induce you to infringe any
+patents or other property right claims or to contest validity of any
+such claims; this section has the sole purpose of protecting the
+integrity of the free software distribution system which is
+implemented by public license practices.  Many people have made
+generous contributions to the wide range of software distributed
+through that system in reliance on consistent application of that
+system; it is up to the author/donor to decide if he or she is willing
+to distribute software through any other system and a licensee cannot
+impose that choice.
+
+This section is intended to make thoroughly clear what is believed to
+be a consequence of the rest of this License.
+
+  12. If the distribution and/or use of the Library is restricted in
+certain countries either by patents or by copyrighted interfaces, the
+original copyright holder who places the Library under this License may add
+an explicit geographical distribution limitation excluding those countries,
+so that distribution is permitted only in or among countries not thus
+excluded.  In such case, this License incorporates the limitation as if
+written in the body of this License.
+
+  13. The Free Software Foundation may publish revised and/or new
+versions of the Library General Public License from time to time.
+Such new versions will be similar in spirit to the present version,
+but may differ in detail to address new problems or concerns.
+
+Each version is given a distinguishing version number.  If the Library
+specifies a version number of this License which applies to it and
+"any later version", you have the option of following the terms and
+conditions either of that version or of any later version published by
+the Free Software Foundation.  If the Library does not specify a
+license version number, you may choose any version ever published by
+the Free Software Foundation.
+.
+  14. If you wish to incorporate parts of the Library into other free
+programs whose distribution conditions are incompatible with these,
+write to the author to ask for permission.  For software which is
+copyrighted by the Free Software Foundation, write to the Free
+Software Foundation; we sometimes make exceptions for this.  Our
+decision will be guided by the two goals of preserving the free status
+of all derivatives of our free software and of promoting the sharing
+and reuse of software generally.
+
+			    NO WARRANTY
+
+  15. BECAUSE THE LIBRARY IS LICENSED FREE OF CHARGE, THERE IS NO
+WARRANTY FOR THE LIBRARY, TO THE EXTENT PERMITTED BY APPLICABLE LAW.
+EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
+OTHER PARTIES PROVIDE THE LIBRARY "AS IS" WITHOUT WARRANTY OF ANY
+KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE
+IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
+PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE
+LIBRARY IS WITH YOU.  SHOULD THE LIBRARY PROVE DEFECTIVE, YOU ASSUME
+THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.
+
+  16. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
+WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY
+AND/OR REDISTRIBUTE THE LIBRARY AS PERMITTED ABOVE, BE LIABLE TO YOU
+FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
+CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE
+LIBRARY (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING
+RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A
+FAILURE OF THE LIBRARY TO OPERATE WITH ANY OTHER SOFTWARE), EVEN IF
+SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
+DAMAGES.
+
+		     END OF TERMS AND CONDITIONS

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/editor_plugin.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/editor_plugin.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/editor_plugin.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1 @@
+tinyMCE.importPluginLanguagePack('fullscreen','en,tr,sv,cs,fr_ca,zh_cn,da,he,nb,de,hu,ru,ru_KOI8-R,ru_UTF-8,nn,es,cy,is,pl,nl,fr,pt_br');var TinyMCE_FullScreenPlugin={getInfo:function(){return{longname:'Fullscreen',author:'Moxiecode Systems',authorurl:'http://tinymce.moxiecode.com',infourl:'http://tinymce.moxiecode.com/tinymce/docs/plugin_fullscreen.html',version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion};},getControlHTML:function(cn){switch(cn){case"fullscreen":return tinyMCE.getButtonHTML(cn,'lang_fullscreen_desc','{$pluginurl}/images/fullscreen.gif','mceFullScreen');}return"";},execCommand:function(editor_id,element,command,user_interface,value){switch(command){case"mceFullScreen":if(tinyMCE.getParam('fullscreen_is_enabled')){window.opener.tinyMCE.execInstanceCommand(tinyMCE.getParam('fullscreen_editor_id'),'mceSetContent',false,tinyMCE.getContent(editor_id));top.close();}else{tinyMCE.setWindowArg('editor_id',editor_id);var win=window.open(tinyMCE.baseURL+"/plugins/f!
 ullscreen/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{win.resizeTo(screen.availWidth,screen.availHeight);}catch(e){}}return true;}return false;},handleNodeChange:function(editor_id,node,undo_index,undo_levels,visual_aid,any_selection){if(tinyMCE.getParam('fullscreen_is_enabled'))tinyMCE.switchClass(editor_id+'_fullscreen','mceButtonSelected');return true;}};tinyMCE.addPlugin("fullscreen",TinyMCE_FullScreenPlugin);
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/editor_plugin_src.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/editor_plugin_src.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/editor_plugin_src.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,63 @@
+/**
+ * $RCSfile: editor_plugin_src.js,v $
+ * $Revision: 1.16 $
+ * $Date: 2006/03/14 17:33:39 $
+ *
+ * @author Moxiecode
+ * @copyright Copyright ? 2004-2006, Moxiecode Systems AB, All rights reserved.
+ */
+
+/* Import plugin specific language pack */
+tinyMCE.importPluginLanguagePack('fullscreen', 'en,tr,sv,cs,fr_ca,zh_cn,da,he,nb,de,hu,ru,ru_KOI8-R,ru_UTF-8,nn,es,cy,is,pl,nl,fr,pt_br');
+
+var TinyMCE_FullScreenPlugin = {
+	getInfo : function() {
+		return {
+			longname : 'Fullscreen',
+			author : 'Moxiecode Systems',
+			authorurl : 'http://tinymce.moxiecode.com',
+			infourl : 'http://tinymce.moxiecode.com/tinymce/docs/plugin_fullscreen.html',
+			version : tinyMCE.majorVersion + "." + tinyMCE.minorVersion
+		};
+	},
+
+	getControlHTML : function(cn) {
+		switch (cn) {
+			case "fullscreen":
+				return tinyMCE.getButtonHTML(cn, 'lang_fullscreen_desc', '{$pluginurl}/images/fullscreen.gif', 'mceFullScreen');
+		}
+
+		return "";
+	},
+
+	execCommand : function(editor_id, element, command, user_interface, value) {
+		// Handle commands
+		switch (command) {
+			case "mceFullScreen":
+				if (tinyMCE.getParam('fullscreen_is_enabled')) {
+					// In fullscreen mode
+					window.opener.tinyMCE.execInstanceCommand(tinyMCE.getParam('fullscreen_editor_id'), 'mceSetContent', false, tinyMCE.getContent(editor_id));
+					top.close();
+				} else {
+					tinyMCE.setWindowArg('editor_id', editor_id);
+
+					var win = window.open(tinyMCE.baseURL + "/plugins/fullscreen/fullscreen.htm", "mceFullScreenPopup", "fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width=" + screen.availWidth + ",height=" + screen.availHeight);
+					try { win.resizeTo(screen.availWidth, screen.availHeight); } catch (e) {}
+				}
+		
+				return true;
+		}
+
+		// Pass to next handler in chain
+		return false;
+	},
+
+	handleNodeChange : function(editor_id, node, undo_index, undo_levels, visual_aid, any_selection) {
+		if (tinyMCE.getParam('fullscreen_is_enabled'))
+			tinyMCE.switchClass(editor_id + '_fullscreen', 'mceButtonSelected');
+
+		return true;
+	}
+};
+
+tinyMCE.addPlugin("fullscreen", TinyMCE_FullScreenPlugin);

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/fullscreen.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/fullscreen.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/fullscreen.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,91 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+	<title>{$lang_fullscreen_title}</title>
+	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
+	<script language="javascript" type="text/javascript" src="../../tiny_mce.js"></script>
+	<script language="javascript" type="text/javascript">
+		function patchCallback(settings, key) {
+			if (settings[key])
+				settings[key] = "window.opener." + settings[key];
+		}
+
+		var settings = new Array();
+
+		// Clone array
+		for (var name in window.opener.tinyMCE.settings)
+			settings[name] = window.opener.tinyMCE.settings[name];
+
+		// Override options for fullscreen
+		for (var name in window.opener.tinyMCE.settings.fullscreen_settings)
+			settings[name] = window.opener.tinyMCE.settings.fullscreen_settings[name];
+
+		// Patch callbacks, make them point to window.opener
+		patchCallback(settings, 'urlconverter_callback');
+		patchCallback(settings, 'insertlink_callback');
+		patchCallback(settings, 'insertimage_callback');
+		patchCallback(settings, 'setupcontent_callback');
+		patchCallback(settings, 'save_callback');
+		patchCallback(settings, 'onchange_callback');
+		patchCallback(settings, 'init_instance_callback');
+		patchCallback(settings, 'file_browser_callback');
+		patchCallback(settings, 'cleanup_callback');
+		patchCallback(settings, 'execcommand_callback');
+		patchCallback(settings, 'oninit');
+
+		// Set options
+		settings['mode'] = 'exact';
+		settings['elements'] = 'fullscreenarea';
+		settings['ask'] = false;
+		settings['setupcontent_callback'] = 'setupContent';
+		settings['fullscreen_is_enabled'] = true;
+		settings['fullscreen_editor_id'] = window.opener.tinyMCE.getWindowArg("editor_id");
+		settings['theme_advanced_resizing'] = false;
+
+		// Init
+		tinyMCE.init(settings);
+		tinyMCE.documentBasePath = window.opener.tinyMCE.documentBasePath;
+
+		function setupContent(editor_id, body, doc) {
+			var inst = tinyMCE.getInstanceById(editor_id);
+			var content = window.opener.tinyMCE.getContent(tinyMCE.getParam('fullscreen_editor_id'));
+
+			// Setup title
+			var divElm = document.createElement("div");
+			divElm.innerHTML = tinyMCELang['lang_fullscreen_title'];
+			document.title = divElm.innerHTML;
+
+			// Get content
+			inst.execCommand('mceSetContent', false, content);
+		}
+
+		function unloadHandler(e) {
+			moveContent();
+		}
+
+		function moveContent() {
+			var doc = tinyMCE.isMSIE ? window.frames['mce_editor_0'].window.document : document.getElementById('mce_editor_0').contentDocument;
+			window.opener.tinyMCE.setInnerHTML(window.opener.tinyMCE.selectedInstance.getBody(), doc.body.innerHTML);
+		}
+
+		// Add onunload
+		tinyMCE.addEvent(window, "beforeunload", unloadHandler);
+
+		function doParentSubmit() {
+			moveContent();
+
+			if (window.opener.tinyMCE.selectedInstance.formElement.form)
+				window.opener.tinyMCE.selectedInstance.formElement.form.submit();
+
+			window.close();
+
+			return false;
+		}
+	</script>
+	<base target="_self" />
+</head>
+<body style="margin: 0; overflow: hidden; height: 100%" scrolling="no" scroll="no">
+<form onsubmit="doParentSubmit();" style="height: 100%">
+<textarea id="fullscreenarea" style="width: 100%; height: 100%"></textarea>
+</form>
+</body>
+</html>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/images/fullscreen.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/images/fullscreen.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/langs/en.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/langs/en.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/langs/en.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,6 @@
+// UK lang variables
+
+tinyMCE.addToLang('',{
+fullscreen_title : 'Fullscreen mode',
+fullscreen_desc : 'Toggle fullscreen mode'
+});

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/langs/nl.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/langs/nl.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/langs/nl.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,6 @@
+// NL lang variables
+
+tinyMCE.addToLang('',{
+fullscreen_title : 'Volledig scherm',
+fullscreen_desc : 'Volledig scherm aan/uit'
+});

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/readme.txt
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/readme.txt	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/fullscreen/readme.txt	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1 @@
+Check the TinyMCE documentation for details on this plugin.

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/editor_plugin.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/editor_plugin.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/editor_plugin.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,20 @@
+function TinyMCE_imgselector_getControlHTML(control_name) {
+    switch (control_name) {
+        case "imgselector":
+            return '<img id="{$editor_id}_imgselector" src="{$pluginurl}/images/ibrowser.gif" title="Select Image" width="20" height="20" class="mceButtonNormal" onmouseover="tinyMCE.switchClass(this,\'mceButtonOver\');" onmouseout="tinyMCE.restoreClass(this);" onmousedown="tinyMCE.restoreAndSwitchClass(this,\'mceButtonDown\');" onclick="tinyMCE.execInstanceCommand(\'{$editor_id}\',\'mceBrowseImage\');">';
+    }
+    return "";
+}
+
+function TinyMCE_imgselector_execCommand(editor_id, element, command, user_interface, value) {
+    switch (command) {
+        case "mceBrowseImage":
+            var template = new Array();
+            template['file'] = '../../../manage/images.php?do=SelectorImages'; // Relative to theme location
+            template['width'] = 880;
+            template['height'] = 660;
+            tinyMCE.openWindow(template, new Array());
+                return true;
+    }
+    return false;
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/images/Thumbs.db
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/images/Thumbs.db
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/images/constrain.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/images/constrain.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/images/ibrowser.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/images/ibrowser.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/images/textflow.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/images/textflow.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/imgselector/imgselector.php
===================================================================

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/readme.txt
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/readme.txt	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/plugins/readme.txt	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1 @@
+This is the location you place TinyMCE plugins.

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/about.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/about.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/about.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,52 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+	<title>{$lang_about_title}</title>
+	<script language="javascript" type="text/javascript" src="../../tiny_mce_popup.js"></script>
+	<script language="javascript" type="text/javascript" src="../../utils/mctabs.js"></script>
+	<script language="javascript" type="text/javascript" src="jscripts/about.js"></script>
+	<base target="_self" />
+</head>
+<body id="about" onload="tinyMCEPopup.executeOnLoad('init();');" style="display: none">
+		<div class="tabs">
+			<ul>
+				<li id="general_tab" class="current"><span><a href="javascript:mcTabs.displayTab('general_tab','general_panel');" onmousedown="return false;">{$lang_about}</a></span></li>
+				<li id="help_tab"><span><a href="javascript:mcTabs.displayTab('help_tab','help_panel');" onmousedown="return false;">{$lang_help}</a></span></li>
+				<li id="plugins_tab"><span><a href="javascript:mcTabs.displayTab('plugins_tab','plugins_panel');" onmousedown="return false;">{$lang_plugins}</a></span></li>
+			</ul>
+		</div>
+
+		<div class="panel_wrapper">
+			<div id="general_panel" class="panel current">
+				<h3>{$lang_about_title}</h3>
+				<p>Version: {$tinymce_version} ({$tinymce_releasedate})</p>
+				<p>TinyMCE is a platform independent web based Javascript HTML WYSIWYG editor control released as Open Source under <a href="../../license.txt" target="_blank">LGPL</a>
+				by Moxiecode Systems AB. It has the ability to convert HTML TEXTAREA fields or other HTML elements to editor instances.</p>
+				<p>Copyright &copy; 2003-2006, <a href="http://www.moxiecode.com" target="_blank">Moxiecode Systems AB</a>, All rights reserved.</p>
+				<p>For more information about this software visit the <a href="http://tinymce.moxiecode.com" target="_blank">TinyMCE website</a>.</p>
+
+				<div id="buttoncontainer"></div>
+			</div>
+
+			<div id="plugins_panel" class="panel">
+				<div id="pluginscontainer">
+					<h3>{$lang_loaded_plugins}</h3>
+
+					<div id="plugintablecontainer">
+					</div>
+
+					<p>&nbsp;</p>
+				</div>
+			</div>
+
+			<div id="help_panel" class="panel noscroll" style="overflow: visible;">
+				<div id="iframecontainer"></div>
+			</div>
+		</div>
+
+		<div class="mceActionPanel">
+			<div style="float: right">
+				<input type="button" id="cancel" name="cancel" value="{$lang_close}" onclick="tinyMCEPopup.close();" />
+			</div>
+		</div>
+</body>
+</html>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/anchor.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/anchor.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/anchor.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,33 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+	<title>{$lang_insert_anchor_title}</title>
+	<script language="javascript" type="text/javascript" src="../../tiny_mce_popup.js"></script>
+	<script language="javascript" type="text/javascript" src="jscripts/anchor.js"></script>
+	<base target="_self" />
+</head>
+<body onload="tinyMCEPopup.executeOnLoad('init();');" style="display: none">
+<form onsubmit="insertAnchor();return false;" action="#">
+
+	<table border="0" cellpadding="4" cellspacing="0">
+		<tr>
+			<td colspan="2" class="title">{$lang_insert_anchor_title}</td>
+		</tr>
+		<tr>
+			<td nowrap="nowrap">{$lang_insert_anchor_name}:</td>
+			<td><input name="anchorName" type="text" id="anchorName" value="" style="width: 200px" /></td>
+		</tr>
+	</table>
+
+	<div class="mceActionPanel">
+		<div style="float: left">
+			<input type="button" id="insert" name="insert" value="{$lang_update}" onclick="insertAnchor();" />
+		</div>
+
+		<div style="float: right">
+			<input type="button" id="cancel" name="cancel" value="{$lang_cancel}" onclick="tinyMCEPopup.close();" />
+		</div>
+	</div>
+
+</form>
+</body>
+</html>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/charmap.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/charmap.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/charmap.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,53 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+	<title>{$lang_theme_charmap_title}</title>
+	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
+	<script language="javascript" type="text/javascript" src="../../tiny_mce_popup.js"></script>
+	<script language="javascript" type="text/javascript" src="jscripts/charmap.js"></script>
+	<base target="_self" />
+</head>
+<body onload="tinyMCEPopup.executeOnLoad('init();');" style="display: none">
+<table align="center" border="0" cellspacing="0" cellpadding="2">
+    <tr>
+        <td colspan="2" class="title">{$lang_theme_charmap_title}</td>
+    </tr>
+    <tr>
+        <td rowspan="2" align="left" valign="top">
+            <script language="javascript" type="text/javascript">renderCharMapHTML();</script>
+        </td>
+        <td width="100" align="center" valign="top">
+            <table border="0" cellpadding="0" cellspacing="0" width="100" style="height: 100px">
+                <tr>
+                    <td class="charmapOver" style="font-size: 40px; height:80px;" id="codeV">&nbsp;</td>
+                </tr>
+                <tr>
+                    <td style="font-size: 10px; font-family: Arial, Helvetica, sans-serif; text-align:center;" id="codeN">&nbsp;</td>
+                </tr>
+            </table>
+        </td>
+    </tr>
+    <tr>
+        <td valign="bottom" style="padding-bottom: 3px;">
+            <table width="100" align="center" border="0" cellpadding="2" cellspacing="0">
+                <tr>
+                    <td align="center" style="border-left: 1px solid #666699; border-top: 1px solid #666699; border-right: 1px solid #666699;">HTML-Code</td>
+                </tr>
+                <tr>
+                    <td style="font-size: 16px; font-weight: bold; border-left: 1px solid #666699; border-bottom: 1px solid #666699; border-right: 1px solid #666699;" id="codeA" align="center">&nbsp;</td>
+                </tr>
+                <tr>
+                    <td style="font-size: 1px;">&nbsp;</td>
+                </tr>
+                <tr>
+                    <td align="center" style="border-left: 1px solid #666699; border-top: 1px solid #666699; border-right: 1px solid #666699;">NUM-Code</td>
+                </tr>
+                <tr>
+                    <td style="font-size: 16px; font-weight: bold; border-left: 1px solid #666699; border-bottom: 1px solid #666699; border-right: 1px solid #666699;" id="codeB" align="center">&nbsp;</td>
+                </tr>
+            </table>
+        </td>
+    </tr>
+</table>
+
+</body>
+</html>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/color_picker.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/color_picker.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/color_picker.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,13 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+	<title>{$lang_theme_colorpicker_title}</title>
+	<script language="javascript" type="text/javascript" src="../../tiny_mce_popup.js"></script>
+	<script language="javascript" type="text/javascript" src="jscripts/color_picker.js"></script>
+	<base target="_self" />
+</head>
+<body onload="tinyMCEPopup.executeOnLoad('init();');" style="margin: 3px; display: none">
+	<div align="center">
+	   <script language="javascript" type="text/javascript">renderColorMap();</script>
+	</div>
+</body>
+</html>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/css/editor_content.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/css/editor_content.css	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/css/editor_content.css	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,58 @@
+/* This file contains the CSS data for the editable area(iframe) of TinyMCE */
+/* You can extend this CSS by adding your own CSS file with the the content_css option */
+
+body, td, pre {
+	font-family: Verdana, Arial, Helvetica, sans-serif;
+	font-size: 10px;
+}
+
+body {
+	background-color: #FFFFFF;
+}
+
+.mceVisualAid {
+	border: 1px dashed #BBBBBB !important;
+}
+
+div.mceVisualAid {
+	background-image:url('../images/spacer.gif');
+	visibility: visible !important;
+}
+
+.mceItemAnchor {
+	width: 12px;
+	line-height: 6px;
+	overflow: hidden;
+	padding-left: 12px;
+	background-image: url('../images/anchor_symbol.gif');
+	background-position: bottom;
+	background-repeat: no-repeat;
+}
+
+/* Important is needed in Gecko browsers inorder to style links */
+/*
+a {
+	color: green !important;
+}
+*/
+
+/* Style selection range colors in Gecko browsers */
+/*
+::-moz-selection {
+	background-color: red;
+	color: green;
+}
+*/
+
+/* MSIE specific */
+
+* html body {
+	scrollbar-3dlight-color: #F0F0EE;
+	scrollbar-arrow-color: #676662;
+	scrollbar-base-color: #F0F0EE;
+	scrollbar-darkshadow-color: #DDDDDD;
+	scrollbar-face-color: #E0E0DD;
+	scrollbar-highlight-color: #F0F0EE;
+	scrollbar-shadow-color: #F0F0EE;
+	scrollbar-track-color: #F5F5F5;
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/css/editor_popup.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/css/editor_popup.css	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/css/editor_popup.css	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,327 @@
+/* This file contains the CSS data for all popups in TinyMCE */
+
+body {
+	background-color: #F0F0EE;
+	font-family: Verdana, Arial, Helvetica, sans-serif;
+	font-size: 11px;
+	scrollbar-3dlight-color: #F0F0EE;
+	scrollbar-arrow-color: #676662;
+	scrollbar-base-color: #F0F0EE;
+	scrollbar-darkshadow-color: #DDDDDD;
+	scrollbar-face-color: #E0E0DD;
+	scrollbar-highlight-color: #F0F0EE;
+	scrollbar-shadow-color: #F0F0EE;
+	scrollbar-track-color: #F5F5F5;
+	margin: 8px;
+}
+
+td {
+	font-family: Verdana, Arial, Helvetica, sans-serif;
+	font-size: 11px;
+}
+
+input {
+	background: #FFFFFF;
+	border: 1px solid #cccccc;
+}
+
+td, input, select, textarea {
+	font-family: Verdana, Arial, Helvetica, sans-serif;
+	font-size: 10px;
+}
+
+input, select, textarea {
+	border: 1px solid #808080;
+}
+
+.input_noborder {
+	border: 0;
+}
+
+#insert, .updateButton {
+   font-weight: bold;
+   width: 90px;
+   height: 21px;
+   border: 0;
+   background-image: url('../images/insert_button_bg.gif');
+   cursor: pointer;
+}
+
+#cancel {
+   font-weight: bold;
+   width: 90px;
+   height: 21px;
+   border: 0;
+   background-image: url('../images/cancel_button_bg.gif');
+   cursor: pointer;
+}
+
+/* Mozilla only style */
+html>body #insert, html>body #cancel {
+	padding-bottom: 2px;
+}
+
+.title {
+	font-size: 12px;
+	font-weight: bold;
+	color: #2B6FB6;
+}
+
+table.charmap {
+	border-style: solid;
+	border-width: 1px;
+	border-color: #AAAAAA;
+}
+
+td.charmap, td.charmapOver {
+	color: #000000;
+	border-color: #AAAAAA;
+	border-style: solid;
+	border-width: 1px;
+	text-align: center;
+	font-size: 12px;
+}
+
+td.charmapOver {
+	background-color: #CCCCCC;
+	cursor: default;
+}
+
+a.charmap {
+	color: #000000;
+	text-decoration: none
+}
+
+.wordWrapCode {
+	vertical-align: middle;
+	border: 1px none #000000;
+	background-color: transparent;
+}
+
+input.radio {
+	border: 1px none #000000;
+	background-color: transparent;
+	vertical-align: middle;
+}
+
+input.checkbox {
+	border: 1px none #000000;
+	background-color: transparent;
+	vertical-align: middle;
+}
+
+.mceButtonNormal, .mceButtonOver, .mceButtonDown, .mceSeparator, .mceButtonDisabled, .mceButtonSelected {
+	margin-left: 1px;
+}
+
+.mceButtonNormal {
+	border-top: 1px solid;
+	border-left: 1px solid;
+	border-bottom: 1px solid;
+	border-right: 1px solid;
+	border-color: #F0F0EE;
+	cursor: default;
+}
+
+.mceButtonOver {
+	border: 1px solid #0A246A;
+	cursor: default;
+	background-color: #B6BDD2;
+}
+
+.mceButtonDown {
+	cursor: default;
+	border: 1px solid #0A246A;
+	background-color: #8592B5;
+}
+
+.mceButtonDisabled {
+	filter:progid:DXImageTransform.Microsoft.Alpha(opacity=30);
+	-moz-opacity:0.3;
+	opacity: 0.3;
+	border-top: 1px solid;
+	border-left: 1px solid;
+	border-bottom: 1px solid;
+	border-right: 1px solid;
+	border-color: #F0F0EE;
+	cursor: default;
+}
+
+.mceActionPanel {
+	margin-top: 5px;
+}
+
+/* Tabs classes */
+
+.tabs {
+	float: left;
+	width: 100%;
+	line-height: normal;
+	background-image: url("../images/xp/tabs_bg.gif");
+}
+
+.tabs ul {
+	margin: 0;
+	padding: 0 0 0;
+	list-style: none;
+}
+
+.tabs li {
+	float: left;
+	background: url("../images/xp/tab_bg.gif") no-repeat left top;
+	margin: 0;
+	margin-left: 0;
+	margin-right: 2px;
+	padding: 0 0 0 10px;
+	line-height: 18px;
+}
+
+.tabs li.current {
+	background: url("../images/xp/tab_sel_bg.gif") no-repeat left top;
+	margin-right: 2px;
+}
+
+.tabs span {
+	float: left;
+	display: block;
+	background: url("../images/xp/tab_end.gif") no-repeat right top;
+	padding: 0px 10px 0 0;
+}
+
+.tabs .current span {
+	background: url("../images/xp/tab_sel_end.gif") no-repeat right top;
+}
+
+.tabs a {
+	text-decoration: none;
+	font-family: Verdana, Arial;
+	font-size: 10px;
+}
+
+.tabs a:link, .tabs a:visited, .tabs a:hover {
+	color: black;
+}
+
+.tabs a:hover {
+}
+
+.tabs .current {
+}
+
+.tabs .current a, .tabs .current a:link, .tabs .current a:visited {
+}
+
+.panel_wrapper div.panel {
+	display: none;
+}
+
+.panel_wrapper div.current {
+	display: block;
+	width: 100%;
+	height: 300px;
+	overflow: visible; /* Should be auto but that breaks Safari */
+}
+
+.panel_wrapper {
+	border: 1px solid #919B9C;
+	border-top: 0px;
+	padding: 10px;
+	padding-top: 5px;
+	clear: both;
+	background-color: white;
+}
+
+fieldset {
+	border: 1px solid #919B9C;
+	font-family: Verdana, Arial;
+	font-size: 10px;
+	padding: 0;
+	margin: 0;
+	padding: 4px;
+}
+
+legend {
+	color: #2B6FB6;
+	font-weight: bold;
+}
+
+.properties {
+	width: 100%;
+}
+
+.properties .column1 {
+}
+
+.properties .column2 {
+	text-align: left;
+}
+
+a:link, a:visited {
+	color: black;
+}
+
+a:hover {
+	color: #2B6FB6;
+}
+
+#plugintable thead {
+	font-weight: bold;
+	background-color: #DDDDDD;
+}
+
+#plugintable, #about #plugintable td {
+	border: 1px solid #919B9C;
+}
+
+#plugintable {
+	width: 99%;
+	margin-top: 10px;
+}
+
+#pluginscontainer {
+	height: 290px;
+	overflow: auto;
+}
+
+/* MSIE Specific styles */
+
+* html .panel_wrapper {
+	width: 100%;
+}
+
+.column {
+	float: left;
+}
+
+h1, h2, h3, h4 {
+	color: #2B6FB6;
+	margin: 0;
+	padding: 0;
+	padding-top: 5px;
+}
+
+h3 {
+	font-size: 14px;
+}
+
+#link .panel_wrapper, #link div.current {
+	height: 125px;
+}
+
+#image .panel_wrapper, #image div.current {
+	height: 190px;
+}
+
+/* Disables the advanced tab in the table plugin. */
+/*
+#table #advanced_tab {
+	display: none;
+}
+*/
+
+/* Disables the border input field and label in the table plugin. */
+/*
+#table #border, #table #borderlabel {
+	display: none;
+}
+*/

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/css/editor_ui.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/css/editor_ui.css	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/css/editor_ui.css	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,353 @@
+/* This file contains the CSS data for the editor UI of TinyMCE instances */
+
+.mceToolbarTop a, .mceToolbarTop a:visited, .mceToolbarTop a:hover, .mceToolbarBottom a, .mceToolbarBottom a:visited, .mceToolbarBottom a:hover {
+	border: 0; margin: 0; padding: 0; background: transparent;
+}
+
+.mceSeparatorLine {
+	border: 0;
+	padding: 0;
+	margin-left: 4px;
+	margin-right: 2px;
+}
+
+.mceSelectList {
+	font-family: 'MS Sans Serif', sans-serif, Verdana, Arial;
+	font-size: 7pt !important;
+	font-weight: normal;
+	margin-top: 3px;
+	padding: 0;
+	display: inline;
+	vertical-align: top;
+	background-color: #F0F0EE;
+}
+
+.mceLabel, .mceLabelDisabled {
+	font-family: 'MS Sans Serif', sans-serif, Verdana, Arial;
+	font-size: 9pt;
+}
+
+.mceLabel {
+	color: #000000;
+}
+
+.mceLabelDisabled {
+	cursor: text;
+	color: #999999;
+}
+
+.mceEditor {
+	background: #F0F0EE;
+	border: 1px solid #cccccc;
+	padding: 0;
+	margin: 0;
+}
+
+.mceEditorArea {
+	font-family: 'MS Sans Serif', sans-serif, Verdana, Arial;
+	background: #FFFFFF;
+	padding: 0;
+	margin: 0;
+}
+
+.mceToolbarTop, .mceToolbarBottom {
+	background: #F0F0EE;
+	line-height: 1px;
+	font-size: 1px;
+}
+
+.mceToolbarTop {
+	border-bottom: 1px solid #cccccc;
+	padding-bottom: 1px;
+}
+
+.mceToolbarBottom {
+	border-top: 1px solid #cccccc;
+}
+
+.mceStatusbarTop, .mceStatusbarBottom, .mceStatusbar {
+	height: 20px;
+}
+
+.mceStatusbarTop .mceStatusbarPathText, .mceStatusbarBottom .mceStatusbarPathText, .mceStatusbar .mceStatusbarPathText {
+	font-family: 'MS Sans Serif', sans-serif, Verdana, Arial;
+	font-size: 9pt;
+	padding: 2px;
+	line-height: 16px;
+	overflow: visible;
+}
+
+.mceStatusbarTop {
+	border-bottom: 1px solid #cccccc;
+}
+
+.mceStatusbarBottom {
+	border-top: 1px solid #cccccc;
+}
+
+.mceStatusbar {
+	border-bottom: 1px solid #cccccc;
+}
+
+.mcePathItem, .mcePathItem:link, .mcePathItem:visited, .mcePathItem:hover {
+	text-decoration: none;
+	font-family: 'MS Sans Serif', sans-serif, Verdana, Arial;
+	font-size: 9pt;
+	color: #000000;
+}
+
+.mcePathItem:hover {
+	text-decoration: underline;
+}
+
+.mceStatusbarPathText {
+	float: left;
+}
+
+.mceStatusbarResize {
+	float: right;
+	background-image: url('../images/statusbar_resize.gif');
+	background-repeat: no-repeat;
+	width: 11px;
+	height: 20px;
+	cursor: se-resize;
+}
+
+.mceResizeBox {
+	width: 10px;
+	height: 10px;
+	display: none;
+	border: 1px dotted gray;
+	margin: 0;
+	padding: 0;
+}
+
+.mceEditorIframe {
+	border: 0;
+}
+
+/* Button CSS rules */
+
+a.mceButtonDisabled img, a.mceButtonNormal img, a.mceButtonSelected img {
+	width: 20px;
+	height: 20px;
+	cursor: default;
+	margin-top: 1px;
+	margin-left: 1px;
+}
+
+a.mceButtonDisabled img {
+	border: 0 !important;
+}
+
+a.mceButtonNormal img, a.mceButtonSelected img {
+	border: 1px solid #F0F0EE !important;
+}
+
+a.mceButtonSelected img {
+	border: 1px solid #6779AA !important;
+	background-color: #D4D5D8;
+}
+
+a.mceButtonNormal img:hover, a.mceButtonSelected img:hover {
+	border: 1px solid #0A246A !important;
+	cursor: default;
+	background-color: #B6BDD2;
+}
+
+a.mceButtonDisabled img {
+	-moz-opacity:0.3;
+	opacity: 0.3;
+	border: 1px solid #F0F0EE !important;
+	cursor: default;
+}
+
+a.mceTiledButton img {
+	background-image: url('../images/buttons.gif');
+	background-repeat: no-repeat;
+}
+
+/* MSIE specific rules */
+
+* html a.mceButtonNormal img, * html a.mceButtonSelected img, * html a.mceButtonDisabled img {
+	border: 0 !important;
+	margin-top: 2px;
+	margin-bottom: 1px;
+}
+
+* html a.mceButtonDisabled img {
+	filter:progid:DXImageTransform.Microsoft.Alpha(opacity=30);
+	border: 0 !important;
+}
+
+* html a.mceButtonDisabled {
+	border: 1px solid #F0F0EE !important;
+}
+
+* html a.mceButtonNormal, * html a.mceButtonSelected {
+	border: 1px solid #F0F0EE !important;
+	cursor: default;
+}
+
+* html a.mceButtonSelected {
+	border: 1px solid #6779AA !important;
+	background-color: #D4D5D8;
+}
+
+* html a.mceButtonNormal:hover, * html a.mceButtonSelected:hover {
+	border: 1px solid #0A246A !important;
+	cursor: default;
+	background-color: #B6BDD2;
+}
+
+* html .mceSelectList {
+	margin-top: 2px;
+}
+
+/* Menu button CSS rules */
+
+span.mceMenuButton img, span.mceMenuButtonSelected img {
+	border: 1px solid #F0F0EE;
+	margin-left: 1px;
+}
+
+span.mceMenuButtonSelected img {
+	border: 1px solid #6779AA;
+	background-color: #B6BDD2;
+}
+
+span.mceMenuButtonSelected img.mceMenuButton {
+	border: 1px solid #F0F0EE;
+	background-color: transparent;
+}
+
+span.mceMenuButton img.mceMenuButton, span.mceMenuButtonSelected img.mceMenuButton {
+	border-left: 0;
+	margin-left: 0;
+}
+
+span.mceMenuButton:hover img, span.mceMenuButtonSelected:hover img {
+	border: 1px solid #0A246A;
+	background-color: #B6BDD2;
+}
+
+span.mceMenuButton:hover img.mceMenuButton, span.mceMenuButtonSelected:hover img.mceMenuButton {
+	border-left: 0;
+}
+
+span.mceMenuButtonFocus img {
+	border: 1px solid gray;
+	border-right: 0;
+	margin-left: 1px;
+	background-color: #F5F4F2;
+}
+
+span.mceMenuButtonFocus img.mceMenuButton {
+	border: 1px solid gray;
+	border-left: 1px solid #F5F4F2;
+	margin-left: 0;
+}
+
+/* Menu button MSIE specific rules */
+
+* html span.mceMenuButton, * html span.mceMenuButtonFocus {
+	position: relative;
+	left: 0;
+	top: 0;
+}
+
+* html span.mceMenuButton img, * html span.mceMenuButtonSelected img, * html span.mceMenuButtonFocus img {
+	position: relative;
+	top: 1px;
+}
+
+* html span.mceMenuHover img {
+	border: 1px solid #0A246A;
+	background-color: #B6BDD2;
+}
+
+* html span.mceMenuButtonSelected.mceMenuHover img.mceMenuButton {
+	border: 1px solid #0A246A;
+	background-color: #B6BDD2;
+	border-left: 0;
+}
+
+/* Menu */
+
+.mceMenu {
+	position: absolute;
+	left: 0;
+	top: 0;
+	display: none;
+	z-index: 100;
+	background-color: white;
+	border: 1px solid gray;
+	font-weight: normal;
+}
+
+.mceMenu a, .mceMenuTitle, .mceMenuDisabled {
+	display: block;
+	width: 100%;
+	text-decoration: none;
+	background-color: white;
+	font-family: Tahoma, Verdana, Arial, Helvetica;
+	font-size: 11px;
+	line-height: 20px;
+	color: black;
+}
+
+.mceMenu a:hover {
+	background-color: #B6BDD2;
+	color: black;
+	text-decoration: none !important;
+}
+
+.mceMenu span {
+	padding-left: 10px;
+	padding-right: 10px;
+	display: block;
+	line-height: 20px;
+}
+
+.mceMenuSeparator {
+	border-bottom: 1px solid gray;
+	background-color: gray;
+	height: 1px;
+}
+
+.mceMenuTitle span {
+	padding-left: 5px;
+}
+
+.mceMenuTitle {
+	background-color: #DDDDDD;
+	font-weight: bold;
+}
+
+.mceMenuDisabled {
+	color: gray;
+}
+
+span.mceMenuSelectedItem {
+	background-image: url('../images/menu_check.gif');
+	background-repeat: no-repeat;
+	background-position: 5px 8px;
+	padding-left: 20px;
+}
+
+span.mceMenuCheckItem {
+	padding-left: 20px;
+}
+
+span.mceMenuLine {
+	display: block;
+	position: absolute;
+	left: 0;
+	top: -1px;
+	background-color: #F5F4F2;
+	width: 30px;
+	height: 1px;
+	overflow: hidden;
+	padding-left: 0;
+	padding-right: 0;
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/about.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/about.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/about.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,31 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>About TinyMCE</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+
+<BODY>
+
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr> 
+    <td><span class="title">About TinyMCE</span></td>
+    <td align="right"><a href="index.htm"><acronym title="Table of contents">TOC</acronym></a></td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+TinyMCE is a small WYSIWYG editor control for web browsers such as MSIE or Mozilla 
+that enables you to edit HTML contents in a more user friendly way. It has common 
+features that are found in most word processors and should not be difficult to 
+use.<br>
+<br>
+<hr noshade>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr> 
+    <td>Go to: <a href="index.htm">Table of contents</a></td>
+    <td align="right"><a href="#">Top</a></td>
+  </tr>
+</table>
+<br>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/common_buttons.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/common_buttons.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/common_buttons.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,162 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Common buttons</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+
+<BODY>
+
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr> 
+    <td><span class="title">Common buttons</span></td>
+    <td align="right"><a href="index.htm"><acronym title="Table of contents">TOC</acronym></a></td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+Below is a short description about each button.
+<br>
+<br>
+<table border="1" cellpadding="3" cellspacing="0">
+  <tr>
+    <td><img src="../../images/bold.gif" width="20" height="20" alt="Bold text icon" /></td>
+    <td>Bold text style (Ctrl+B).</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/italic.gif" width="20" height="20" alt="Italic text icon" /></td>
+    <td>Italic text style (Ctrl+I).</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/underline.gif" width="20" height="20" alt="Underline text icon." /></td>
+    <td>Underline text style (Ctrl+U).</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/strikethrough.gif" width="20" height="20" alt="Strikethrough text icon." /></td>
+    <td>Strikethrough text style.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/justifyleft.gif" width="20" height="20" alt="Align left icon." /></td>
+    <td>Align left.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/justifycenter.gif" width="20" height="20" alt="Align center icon." /></td>
+    <td>Align center.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/justifyright.gif" width="20" height="20" alt="Align right icon." /></td>
+    <td>Align right.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/justifyfull.gif" width="20" height="20" alt="Align full icon." /></td>
+    <td>Align full.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/bullist.gif" width="20" height="20" alt="Unordered list/bullet list icon." /></td>
+    <td>Unordered list/bullet list.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/numlist.gif" width="20" height="20" alt="Ordered list/numbered list icon." /></td>
+    <td>Ordered list/numbered list</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/outdent.gif" width="20" height="20" alt="Outdent/decrease indentation icon." /></td>
+    <td>Outdent/decrease indentation.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/indent.gif" width="20" height="20" alt="Indent/increase indentation icon." /></td>
+    <td>Indent/increase indentation.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/undo.gif" width="20" height="20" alt="Undo the last operation." /></td>
+    <td>Undo the last operation (Ctrl+Z).</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/redo.gif" width="20" height="20" alt="Redo the last operation icon." /></td>
+    <td>Redo the last operation (Ctrl+Y).</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/link.gif" width="20" height="20" alt="Insert a new link icon." /></td>
+    <td>Insert a new link, read more about this function in the <a href="insert_link_button.htm">Insert 
+      link section</a>.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/unlink.gif" width="20" height="20" alt="Unlinks the current selection icon." /></td>
+    <td>Unlinks the current selection/removes all selected links.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/anchor.gif" width="20" height="20" alt="Insert a new anchor icon." /></td>
+    <td>Insert a new anchor, read more about this function in the <a href="insert_anchor_button.htm">Insert anchor section.</a></td>
+  </tr>
+  <tr>
+    <td><img src="../../images/image.gif" width="20" height="20" alt="Insert a new image icon." /></td>
+    <td>Insert a new image, read more about this function in the <a href="insert_image_button.htm">Insert 
+      image section</a>.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/cleanup.gif" width="20" height="20" alt="Cleanup code icon." /></td>
+    <td>Cleanup code/Removes unwanted formating. This function is useful when 
+      you copy contents from for example a office product.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/help.gif" width="20" height="20" alt="Show help icon." /></td>
+    <td>Shows this help window.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/code.gif" width="20" height="20" alt="Source code editor icon." /></td>
+    <td>Opens HTML source code editor. </td>
+  </tr>
+  <tr>
+    <td><img src="../../../../plugins/table/images/table.gif" width="20" height="20" alt="Insert table icon." /></td>
+    <td>Inserts a new table at the current location. </td>
+  </tr>
+  <tr>
+    <td><img src="../../../../plugins/table/images/table_insert_row_before.gif" width="20" height="20" alt="Adds a row above icon." /></td>
+    <td>Adds a row above the current one. </td>
+  </tr>
+  <tr>
+    <td><img src="../../../../plugins/table/images/table_insert_row_after.gif" width="20" height="20" alt="Adds a row under icon." /></td>
+    <td>Adds a row under the current one. </td>
+  </tr>
+  <tr>
+    <td><img src="../../../../plugins/table/images/table_delete_row.gif" width="20" height="20" alt="Remove row icon." /></td>
+    <td>Removes the row. </td>
+  </tr>
+  <tr>
+    <td><img src="../../../../plugins/table/images/table_insert_col_before.gif" width="20" height="20" alt="Add column before icon." /></td>
+    <td>Adds a column before the current one.</td>
+  </tr>
+  <tr>
+    <td><img src="../../../../plugins/table/images/table_insert_col_after.gif" width="20" height="20" alt="Add column after icon." /></td>
+    <td>Adds a column after the current one.</td>
+  </tr>
+  <tr>
+    <td><img src="../../../../plugins/table/images/table_delete_col.gif" width="20" height="20" alt="Remove column icon." /></td>
+    <td>Removes the current column.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/hr.gif" width="20" height="20" alt="Insert horizontal ruler icon." /></td>
+    <td>Inserts a new horizontal ruler </td>
+  </tr>
+  <tr>
+    <td><img src="../../images/removeformat.gif" width="20" height="20" alt="Remove formatting icon." /></td>
+    <td>Removes formatting from the selection. </td>
+  </tr>
+  <tr>
+    <td><img src="../../images/sub.gif" width="20" height="20" alt="Subscript icon." /></td>
+    <td>Makes the selection to be subscript. </td>
+  </tr>
+  <tr>
+    <td><img src="../../images/sup.gif" width="20" height="20" alt="Superscript icon." /></td>
+    <td>Makes the selection to be superscripted. </td>
+  </tr>
+</table>
+<br>
+<hr noshade="noshade" />
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr> 
+    <td>Go to: <a href="index.htm">Table of contents</a></td>
+    <td align="right"><a href="#">Top</a></td>
+  </tr>
+</table>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/create_accessible_content.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/create_accessible_content.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/create_accessible_content.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,45 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Insert table button</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+
+<BODY>
+
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr> 
+    <td><span class="title">Create accessible content</span></td>
+    <td align="right"><a href="index.htm"><acronym title="Table of contents">TOC</acronym></a></td>
+  </tr>
+</table>
+<hr noshade>
+<p>TinyMCE can create HTML content that will be accessible to all users, including those with disabilities using assistive technologies, as well as those using text-based browsers, or those browsing the Web with images turned off. </p>
+
+<p><strong>Things you can do to make your content accessible:</strong></p>
+<ol>
+<li><strong>Include an Image Description:</strong> Blind users, or others who are unable to view images, will rely on the Image Description (or Alt text) to take the place of the image. If an image contains no meaning, such as a decoration or a spacer image, leave the Image Description empty. TinyMCE will then insert an empty Alt text attribute that will force assistive technologies to ignore the image. <br /><br /></li>
+
+<li> <strong>Add Scope to data table header cells:</strong> In the table cell editor dialog window, choose a Scope when creating Header cells so the column or row label in that cell becomes explicitely associated with its data cells. Table cell headers will then be announced with each data cell, making it easier for blind users using a screen reader to understand what the content of each cell represents. <br /><br /></li>
+
+<li><strong> Structure content with properly nested headings:</strong> In the format selection menu choose Heading 1 to Heading 6 to represent headings in your content,  rather than using other font formating options. Blind users using a screen reader can then extract the headings from the page to generate a summary of the content it contains, and use those headings to navigate quickly to subsections within the page.<br /><br /></li>
+
+<li><strong> Include alternate content:</strong> Create an alternate page for non-HTML content such as Flash, Java applets, or  embedded movies. This might be a static image, with a description of the image, and a description of the content that would have appeared in its place. An alternate HTML page could also be created, and a link to it included next to the non-HTML object. This will ensure that the content will be accessible to users of assistive technologies that can not view or play the content, and ensure the content will be available to those who do not have the appropriate plugin or helper application installed.<br /><br /></li>
+
+<li><strong> Check accessbility: </strong> When the AChecker plugin is installed with TinyMCE, click on the Check Accessibility button to generate a report of potential accessibility problems.<br /><br /></li>
+
+</ol>
+
+<p>See the <a href="http://checker.atrc.utoronto.ca" target="_new">AChecker Web Site</a> for further details about creating content that will be accessible to all users.<br />
+</p>
+
+<hr noshade>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr> 
+    <td>Go to: <a href="index.htm">Table of contents</a></td>
+    <td align="right"><a href="#">Top</a></td>
+  </tr>
+</table>
+
+<br>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/images/insert_anchor_window.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/images/insert_anchor_window.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/images/insert_image_window.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/images/insert_image_window.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/images/insert_link_window.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/images/insert_link_window.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/images/insert_table_window.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/images/insert_table_window.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/index.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/index.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/index.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,27 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Help Index</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+<BODY onload="window.focus();">
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr> 
+    <td><span class="title">Table of contents</span></td>
+    <td align="right">&nbsp;</td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+Click the links below to go to the different help sections. 
+<ul class="toc_ul">
+  <li class="toc_li"><a href="about.htm">About TinyMCE</a></li>
+  <li class="toc_li"><a href="common_buttons.htm">Common buttons</a></li>
+  <li class="toc_li"><a href="insert_image_button.htm">Insert image button</a></li>
+  <li class="toc_li"><a href="insert_link_button.htm">Insert link button</a></li>
+  <li class="toc_li"><a href="insert_anchor_button.htm">Insert anchor button</a></li>
+  <li class="toc_li"><a href="insert_table_button.htm">Insert table button</a></li>
+ <li class="toc_li"><a href="create_accessible_content.htm">Create accessible content</a></li>
+</ul>
+<hr noshade>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_anchor_button.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_anchor_button.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_anchor_button.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,32 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Insert anchor button</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+
+<BODY>
+
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr> 
+    <td><span class="title">Insert anchor button</span></td>
+    <td align="right"><a href="index.htm"><acronym title="Table of contents">TOC</acronym></a></td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+This button opens a new window with the insert/edit anchor function.<br>
+<br>
+<img src="images/insert_anchor_window.gif" width="330" height="139" alt="Anchor dialog/window" /><br>
+<br>
+There are one field in this window, this is where you enter the name of you anchor point. Remember the anchor name needs to be unique. <br>
+<br>
+<hr noshade>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr> 
+    <td>Go to: <a href="index.htm">Table of contents</a></td>
+    <td align="right"><a href="#">Top</a></td>
+  </tr>
+</table>
+<br>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_image_button.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_image_button.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_image_button.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,65 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Insert image button</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+
+<BODY>
+
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr> 
+    <td><span class="title">Insert image button</span></td>
+    <td align="right"><a href="index.htm"><acronym title="Table of contents">TOC</acronym></a></td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+The insert image button opens the window shown below.<br>
+<br>
+<img src="images/insert_image_window.gif" alt="Insert image dialog/window" /><br>
+<br>
+You simply enter a URL to the image you want to link to and enter a image description, 
+this is then displayed as an alternative text descripton of the image on the page.<br>
+<br>
+<strong>Field descriptions:</strong><br>
+<table border="1" cellspacing="0">
+  <tr>
+    <td width="150"><strong>Image URL </strong></td>
+    <td>URL/path to the image.</td>
+  </tr>
+  <tr>
+    <td width="150"><strong>Image description </strong></td>
+    <td>Alternative description of image contents.</td>
+  </tr>
+  <tr>
+    <td><strong>Dimentions</strong></td>
+    <td>Image width/height. </td>
+  </tr>
+  <tr>
+    <td><strong>Alignment</strong></td>
+    <td>Image alignment, useful when wrapping text around images.</td>
+  </tr>
+  <tr>
+    <td><strong>Border</strong></td>
+    <td>Border thickness. </td>
+  </tr>
+  <tr>
+    <td><strong>VSpace</strong></td>
+    <td>Vertical space, useful when wrapping text around images.</td>
+  </tr>
+  <tr>
+    <td><strong>HSpace</strong></td>
+    <td>Horizontal space, useful when wrapping text around images.</td>
+  </tr>
+</table>
+<br>
+<hr noshade>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr> 
+    <td>Go to: <a href="index.htm">Table of contents</a></td>
+    <td align="right"><a href="#">Top</a></td>
+  </tr>
+</table>
+<br>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_link_button.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_link_button.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_link_button.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,33 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Insert link button</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+
+<BODY>
+
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr> 
+    <td><span class="title">Insert link button</span></td>
+    <td align="right"><a href="index.htm"><acronym title="Table of contents">TOC</acronym></a></td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+This button opens a new window with the insert/edit link function.<br>
+<br>
+<img src="images/insert_link_window.gif" width="330" height="159" alt="Insert link dialog/window" /><br>
+<br>
+There are two fields in this window the first one &quot;Link URL&quot; is the 
+URL of the link. The target enables you to select how the link is to be opened.<br>
+<br>
+<hr noshade>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr> 
+    <td>Go to: <a href="index.htm">Table of contents</a></td>
+    <td align="right"><a href="#">Top</a></td>
+  </tr>
+</table>
+<br>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_table_button.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_table_button.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/insert_table_button.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,71 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Insert table button</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+
+<BODY>
+
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr> 
+    <td><span class="title">Insert table button</span></td>
+    <td align="right"><a href="index.htm"><acronym title="Table of contents">TOC</acronym></a></td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+The insert table button opens the window shown below. This action enables you to create tables. <br>
+<br>
+<img src="images/insert_table_window.gif" width="340" height="229" alt="Image of table window" /><br>
+<br>
+<strong>Field descriptions:</strong><br>
+<table border="1" cellspacing="0">
+  <tr>
+    <td width="150"><strong>Columns</strong></td>
+    <td>Number of columns in the  table. </td>
+  </tr>
+  <tr>
+    <td width="150"><strong>Rows</strong></td>
+    <td>Number of rows in the new table.</td>
+  </tr>
+  <tr>
+    <td><strong>Cellpadding</strong></td>
+    <td>Cellpadding of the table . </td>
+  </tr>
+  <tr>
+    <td><strong>Cellspacing</strong></td>
+    <td>Cellspacing of the table .</td>
+  </tr>
+  <tr>
+    <td><strong>Alignment</strong></td>
+    <td>Table alignment . </td>
+  </tr>
+  <tr>
+    <td><strong>Border</strong></td>
+    <td>Border thinkness of table.</td>
+  </tr>
+  <tr>
+    <td><strong>Width</strong></td>
+    <td>Width in pixels of table .</td>
+  </tr>
+  <tr>
+    <td><strong>Height</strong></td>
+    <td>Height in pixels of table.</td>
+  </tr>
+  <tr>
+    <td><strong>Class</strong></td>
+    <td>Style or CSS class of table.</td>
+  </tr>
+</table>
+<br>
+<br>
+<hr noshade>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr> 
+    <td>Go to: <a href="index.htm">Table of contents</a></td>
+    <td align="right"><a href="#">Top</a></td>
+  </tr>
+</table>
+<br>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/style.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/style.css	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/en/style.css	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,28 @@
+body { background-color: #FFFFFF; }
+body, td, .content { font-family: Verdana, Arial, helvetica, sans-serif; font-size: 12px; }
+.title { font-family: Verdana, Arial, helvetica, sans-serif; font-size: 16px; font-weight: bold; }
+.subtitle { font-size: 12px; font-weight: bold; }
+
+.toc_ul, .toc_li { margin-left: 8px; line-height: 16px; }
+.step_ol, .step_li { margin-left: 11px; line-height: 16px; }
+img { border: #000000 solid 1px; }
+
+a:visited { color: #666666; text-decoration: underline; }
+a:active { color: #666666; text-decoration: underline; }
+a:hover { color: #666666; text-decoration: underline; }
+a { color: #666666; text-decoration: underline; }
+
+.pageheader { border: #E0E0E0 solid 1px; }
+.pagefooter { border: #E0E0E0 solid 1px; }
+.sample { background-color: #FFFFFF; border: #000000 solid 1px; }
+.samplecontent { font-size: 10px; }
+
+.code { background-color: #FFFFFF; border: #000000 solid 1px; }
+.codecontent { font-size: 10px; }
+.codecontent a:visited { color: #666666; text-decoration: none; font-weight: bold }
+.codecontent a:active { color: #666666; text-decoration: none; font-weight: bold  }
+.codecontent a:hover { color: #666666; text-decoration: none; font-weight: bold  }
+.codecontent a { color: #666666; text-decoration: none; font-weight: bold  }
+
+hr { height: 1px; }
+

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/about.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/about.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/about.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,31 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Over TinyMCE</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+
+<BODY>
+
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr> 
+    <td><span class="title">Over TinyMCE</span></td>
+    <td align="right"><a href="index.htm">Inhoudsopgave</a></td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+TinyMCE is een kleine <i>What-You-See-Is-What-You-Get</i> (WYSIWYG)
+editor voor teksten. De bediening vindt plaats in de web browser, zoals MSIE of Mozilla.
+Het werken met deze editor is eenvoudig, omdat de bediening veel lijkt op het werken
+met teksten in (office-)tekstverwerkers.
+<br><br>
+<hr noshade>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr>
+    <td>Ga naar: <a href="index.htm">Inhoudsopgave</a></td>
+    <td align="right"><a href="#">Naar boven</a></td>
+  </tr>
+</table>
+<br>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/common_buttons.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/common_buttons.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/common_buttons.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,188 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Functies van TinyMCE</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+
+<BODY>
+
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr>
+    <td><span class="title">Functies van TinyMCE</span></td>
+    <td align="right"><a href="index.htm">Inhoudsopgave</a></td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+Het werken met de editor komt sterk overeen met wat u gewend bent van uw tekstverwerker:
+Dubbel-klik op een woord in de tekst, of trek een kader met de muis terwijl u
+de linkerknop inhoudt om een gedeelte van de tekst te kiezen. Het aldus gemarkeerde woord of
+tekstfragment noemen we 'selecteerd'. Met de knoppen en stijl-keuzelijsten
+in de editor kunt u hiervan vervolgens de opmaak aanpassen of (indien deze reeds was toegekend) verwijderen.
+<br><br>
+De meeste functies voert u eenvoudig uit door het klikken
+van de knoppen (buttons) boven het tekstvenster in de editor. Hieronder vindt u van elk van deze
+knoppen een beknopte beschrijving.
+<br>
+<br>
+<table width=100% border="1" cellpadding="3" cellspacing="0">
+  <tr>
+    <td width=20><img src="../../images/bold.gif" width="20" height="20"></td>
+    <td>Gekozen tekstfragment 'Vet' (Bold) maken.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/italic.gif" width="20" height="20"></td>
+    <td>Gekozen tekstfragment 'Cursief' (Italic) maken.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/underline.gif" width="20" height="20"></td>
+    <td>Gekozen tekstfragment 'Onderstrepen' (Underline).</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/strikethrough.gif" width="20" height="20"></td>
+    <td>Gekozen tekstfragment 'Doorstrepen' (Strikethrough).</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/justifyleft.gif" width="20" height="20"></td>
+    <td>Gekozen tekstfragment naar links uitlijnen.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/justifycenter.gif" width="20" height="20"></td>
+    <td>Gekozen tekstfragment centreren.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/justifyright.gif" width="20" height="20"></td>
+    <td>Gekozen tekstfragment naar rechts uitlijnen.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/justifyfull.gif" width="20" height="20"></td>
+    <td>Gekozen tekstfragment 'uitvullen' tot complete regels.</td>
+  </tr>
+</table>
+<br>
+<table width=100% border="1" cellpadding="3" cellspacing="0">
+  <tr>
+    <td><img src="../../images/bullist.gif" width="20" height="20"></td>
+    <td>Gekozen tekstfragment omzetten naar ongeordende (bullet-)lijst of opsomming.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/numlist.gif" width="20" height="20"></td>
+    <td>Gekozen tekstfragment omzetten naar doorgenummerde lijst.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/outdent.gif" width="20" height="20"></td>
+    <td>Inspringniveau van het gekozen tekstfragment verkleinen.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/indent.gif" width="20" height="20"></td>
+    <td>Inspringniveau van het gekozen tekstfragment vergroten.</td>
+  </tr>
+  <tr>
+    <td width=20><img src="../../images/undo.gif" width="20" height="20"></td>
+    <td>De laaste bewerking ongedaan maken. De toetscombinatie CRTL-Z doet hetzelfde.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/redo.gif" width="20" height="20"></td>
+    <td>De laatste bewerking opnieuw uitvoeren.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/link.gif" width="20" height="20"></td>
+    <td>Invoegen van een <i>Link</i> (Cross-Link) via dialoogmenu.<br>
+		  Zie de beschrijving bij <a href="insert_link_button.htm">Links en verwijzingen in tekst invoegen</a>.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/unlink.gif" width="20" height="20"></td>
+    <td>Verwijdert alle gevonden <i>Links</i> (Cross-Links) uit de tekstselectie.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/anchor.gif" width="20" height="20"></td>
+    <td>Anker aan de tekstselectie toekennen of wijzigen.<br>
+		  Zie de beschrijving bij <a href="insert_anchor_button.htm">Anker Toevoegen.</a></td>
+  </tr>
+  <tr>
+    <td><img src="../../images/image.gif" width="20" height="20"></td>
+    <td>Voegt een afbeelding in.<br>
+		  Zie de beschrijving bij <a href="insert_image_button.htm">Afbeeldingen invoegen</a>.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/cleanup.gif" width="20" height="20"></td>
+    <td>Schoont ongewenste opmaak en codering van de tekstselectie op. Deze functie is erg nuttig na het
+		  overkopi&euml;ren van teksten vanuit uw (Office-)tekstverwerker.</td>
+  </tr>
+	<tr>
+    <td><img src="../../images/help.gif" width="20" height="20"></td>
+    <td>Toont dit helpvenster met uitleg van alle functionaliteit van de editor.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/code.gif" width="20" height="20"></td>
+    <td>Opent het venster met de HTML-broncode voor het direct maken van wijzigingen
+		  in de achterliggende pagina-codering. Kennis van de HTML-taal is vereist.</td>
+  </tr>
+</table>
+
+<br>
+<table width=100% border="1" cellpadding="3" cellspacing="0">
+  <tr>
+    <td><img src="../../../../plugins/table/images/table.gif" width="20" height="20"></td>
+    <td>Voegt een nieuwe tabel met 2 rijen en kolommen in op de huidige positie in te tekst. </td>
+  </tr>
+  <tr>
+    <td><img src="../../../../plugins/table/images/table_insert_row_before.gif" width="20" height="20"></td>
+    <td>Voegt een nieuwe rij toe aan de tabel boven de huidige.</td>
+  </tr>
+  <tr>
+    <td><img src="../../../../plugins/table/images/table_insert_row_after.gif" width="20" height="20"></td>
+    <td>Voegt een nieuwe rij toe aan de tabel onder de huidige.</td>
+  </tr>
+  <tr>
+    <td><img src="../../../../plugins/table/images/table_delete_row.gif" width="20" height="20"></td>
+    <td>Verwijdert de huidige rij uit de tabel.</td>
+  </tr>
+  <tr>
+    <td><img src="../../../../plugins/table/images/table_insert_col_before.gif" width="20" height="20"></td>
+    <td>Voegt een nieuwe kolom toe aan de tabel voor de huidige.</td>
+  </tr>
+  <tr>
+    <td><img src="../../../../plugins/table/images/table_insert_col_after.gif" width="20" height="20"></td>
+    <td>Voegt een nieuwe kolom toe aan de tabel achter de huidige.</td>
+  </tr>
+  <tr>
+    <td><img src="../../../../plugins/table/images/table_delete_col.gif" width="20" height="20"></td>
+    <td>Verwijdert de huidige kolom uit de tabel.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/hr.gif" width="20" height="20"></td>
+    <td>Voegt een horizontale lijn in de tekst toe.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/removeformat.gif" width="20" height="20"></td>
+    <td>Verwijdert alle tekst-opmaak van de tekstselectie.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/visualaid.gif" width="20" height="20"></td>
+    <td>Toon of verberg hulplijnen voor tabellen in het tekstvenster.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/sub.gif" width="20" height="20"></td>
+    <td>Verandert het gekozen tekstfragment in <i>Subscript</i>.</td>
+  </tr>
+  <tr>
+    <td><img src="../../images/sup.gif" width="20" height="20"></td>
+    <td>Verandert het gekozen tekstfragment in <i>Superscript</i>.</td>
+  </tr>
+	<tr>
+    <td><img src="../../images/charmap.gif" width="20" height="20"></td>
+    <td>De <i>Karaktertabel</i> maakt het eenvoudig invoegen van bijzondere karakters mogelijk.<br>
+		  Zie de beschrijving bij <a href="insert_specchar_button.htm">Bijzondere karakers in de tekst invoegen.</a></td>
+  </tr>
+</table>
+<br>
+<hr noshade>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr>
+    <td>Ga naar: <a href="index.htm">Inhoudsopgave</a></td>
+    <td align="right"><a href="#">Naar boven</a></td>
+  </tr>
+</table>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/html_source_window.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/html_source_window.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_anchor_window.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_anchor_window.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_image_window.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_image_window.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_link_window.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_link_window.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_specchar_window.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_specchar_window.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_table_window.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/images/insert_table_window.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/index.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/index.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/index.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,27 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Help Index</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+<BODY onload="window.focus();">
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr> 
+    <td><span class="title">Inhoudsopgave</span></td>
+    <td align="right">&nbsp;</td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+Klik op de onderwerpen in onderstaande inhoudsopgave voor meer informatie.
+<ul class="toc_ul">
+  <li class="toc_li"><a href="about.htm">Over TinyMCE</a></li>
+  <li class="toc_li"><a href="common_buttons.htm">Functies van TinyMCE</a></li>
+	<li class="toc_li"><a href="insert_image_button.htm">Afbeeldingen invoegen</a></li>
+	<li class="toc_li"><a href="insert_link_button.htm">Links en verwijzingen in tekst invoegen</a></li>
+  <li class="toc_li"><a href="insert_specchar_button.htm">Bijzondere karakers in de tekst invoegen</a></li>
+  <li class="toc_li"><a href="insert_anchor_button.htm">Ankers in de tekst gebruiken</a></li>
+  <li class="toc_li"><a href="insert_table_button.htm">Tabellen invoegen en aanpassen</a></li>
+</ul>
+<hr noshade>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_anchor_button.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_anchor_button.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_anchor_button.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,37 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Ankers in de tekst gebruiken</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+<BODY>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr>
+    <td><span class="title">Ankers in de tekst gebruiken</span></td>
+    <td align="right"><a href="index.htm">Inhoudsopgave</a></td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+Met de knop 'Invoegen Anker' kunt u in de tekst z.g. HTML-ankers invoegen en
+aanpassen. Deze ankers maken het mogelijk snel naar bepaalde tekstfragmenten te springen.
+Door het toevoegen van de ankernaam (voorafgegaan door een '#')
+aan de link naar een pagina (Zie <a href="insert_link_button.htm">'Links en verwijzingen in tekst invoegen'</a>)
+kan op deze wijze desgewenst direct naar een bepaalde passage in een pagina worden doorgelinkt.
+<br><br>
+Voor het toevoegen of aanpassen van een anker wordt onderstaand dialoogvenster getoond.<br>
+<br>
+<center><img src="images/insert_anchor_window.gif"></center>
+<br>
+Bij het veld 'Anker naam' kan de gewenste naam van het anker worden ingevuld.
+Let op: Binnen een complete pagina binnen uw website dient de naam van dit anker uniek zijn.<br>
+<br>
+<hr noshade>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr>
+    <td>Ga naar: <a href="index.htm">Inhoudsopgave</a></td>
+    <td align="right"><a href="#">Naar boven</a></td>
+  </tr>
+</table>
+<br>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_image_button.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_image_button.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_image_button.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,65 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Afbeeldingen invoegen</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+
+<BODY>
+
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr> 
+    <td><span class="title">Afbeeldingen invoegen</span></td>
+    <td align="right"><a href="index.htm">Inhoudsopgave</a></td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+Voer simpelweg de URL van de afbeelding en de beschrijving in.
+De omschrijvende tekst wordt in sommige browsers bij de muiswijzer getoond
+wanneer deze boven de afbeelding wordt stilgehouden.
+De knop 'Afbeelding Invoegen' opent onderstaand dialoogvenster.<br>
+<br>
+<center><img src="images/insert_image_window.gif"></center>
+<br>
+<strong>Omschrijving van de velden:</strong><br>
+<table border="1" cellspacing="0">
+  <tr>
+    <td width="150"><strong>Afbeelding</strong></td>
+    <td>In dit veld dient u een complete URL op te geven van de afbeelding.</td>
+  </tr>
+  <tr>
+    <td width="150"><strong>Beschrijving</strong></td>
+    <td>Omschrijvende tekst die in sommige browsers bij de muiswijzer wordt getoond wanneer deze boven de afbeelding wordt stilgehouden.</td>
+  </tr>
+  <tr>
+    <td><strong>Uitlijning</strong></td>
+    <td>Uit de lijst kan worden gekozen op welke wijze de afbeelding in de tekst wordt ingebed.</td>
+  </tr>
+	<tr>
+    <td><strong>Afmetingen</strong></td>
+    <td>De breedte en hoogte van de afbeelding in pixels. Laat deze velden leeg als de originele afmetingen gewenst zijn.</td>
+  </tr>
+  <tr>
+    <td><strong>Omranding</strong></td>
+    <td>De dikte (in pixels) van de omranding om de afbeelding.</td>
+  </tr>
+  <tr>
+    <td><strong>Verticale marge</strong></td>
+    <td>De verticale marge (in pixels) gebruikt voor de omloop van teksten om de afbeelding.</td>
+  </tr>
+  <tr>
+    <td><strong>Horizontale marge</strong></td>
+    <td>De horizontale marge (in pixels) gebruikt voor de omloop van teksten om de afbeelding.</td>
+  </tr>
+</table>
+<br>
+<hr noshade>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr>
+    <td>Ga naar: <a href="index.htm">Inhoudsopgave</a></td>
+    <td align="right"><a href="#">Naar boven</a></td>
+  </tr>
+</table>
+<br>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_link_button.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_link_button.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_link_button.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,35 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Links en verwijzingen in tekst invoegen</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+
+<BODY>
+
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr> 
+    <td><span class="title">Links en verwijzingen in tekst invoegen</span></td>
+    <td align="right"><a href="index.htm">Inhoudsopgave</a></td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+De knop 'Link Invoegen' leidt u naar onderstaand dialoogvenster waarmee u eenvoudig
+een <i>Link</i> (Cross-Link) kunt aanbrengen in uw teksten.
+<br><br>
+<center><img src="images/insert_link_window.gif"></center>
+<br>
+Bij 'Link URL' dient de de url van
+de link te worden ingevuld (desgewenst voorafgegaan door 'http://' voor een externe
+website), bij 'target' kan worden bepaald hoe de link moet openen.
+<br>
+<hr noshade>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr>
+    <td>Ga naar: <a href="index.htm">Inhoudsopgave</a></td>
+    <td align="right"><a href="#">Naar boven</a></td>
+  </tr>
+</table>
+<br>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_specchar_button.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_specchar_button.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_specchar_button.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,32 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Bijzondere karakers in de tekst invoegen</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+<BODY>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr>
+    <td><span class="title">Bijzondere karakers in de tekst invoegen</span></td>
+    <td align="right"><a href="index.htm">Inhoudsopgave</a></td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+Met de knop 'Bijzondere Karakters' kunt u in de tekst bijzondere karakters, die soms
+op het toetsenbord lastig te vinden zijn, invoegen.
+<br><br>
+Voor het invoegen van een deze karakters wordt onderstaand keuzevenster getoond.
+Door het eenvoudigweg klikken op het gewenste karakter in het overzicht, wordt het op de huidige positie in de tekst ingevoegd.<br>
+<br>
+<center><img src="images/insert_specchar_window.gif"></center>
+<br>
+<hr noshade>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr>
+    <td>Ga naar: <a href="index.htm">Inhoudsopgave</a></td>
+    <td align="right"><a href="#">Naar boven</a></td>
+  </tr>
+</table>
+<br>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_table_button.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_table_button.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/insert_table_button.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,73 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<HEAD>
+<TITLE>Tabellen invoegen en aanpassen</TITLE>
+<link href="style.css" rel="stylesheet" type="text/css">
+</HEAD>
+
+<BODY>
+
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pageheader">
+  <tr> 
+    <td><span class="title">Tabellen invoegen en aanpassen</span></td>
+    <td align="right"><a href="index.htm">Inhoudsopgave</a></td>
+  </tr>
+</table>
+<hr noshade>
+<br>
+De knop 'Invoegen Tabel' stelt u in staat op de huidige plek een nieuwe tabel
+in uw tekst in te voegen en opent onderstaand dialoogvenster.<br>
+<br>
+<center><img src="images/insert_table_window.gif"></center>
+<br>
+<strong>Omschrijving van de velden:</strong><br>
+<table border="1" cellspacing="0">
+  <tr>
+    <td width="150"><strong>Kolommen</strong></td>
+    <td>Het gewenste aantal kolommen in de tabel.</td>
+  </tr>
+  <tr>
+    <td width="150"><strong>Rijen</strong></td>
+    <td>Het gewenste aantal rijen in de tabel.</td>
+  </tr>
+  <tr>
+    <td><strong>Celvulling</strong></td>
+    <td>De 'Celvulling' (Cellpadding)<br>
+		De opvulmarge rondom binnen elke cel in de tabel in pixels.</td>
+  </tr>
+  <tr>
+    <td><strong>Celafstand</strong></td>
+    <td>De 'Celafstand' (Cellspacing)<br>
+		De ruimte tussen de cellen onderling binnen de tabel in pixels.</td>
+  </tr>
+  <tr>
+    <td><strong>Positionering</strong></td>
+    <td>De positionering van de tabel in de paragraaf.</td>
+  </tr>
+  <tr>
+    <td><strong>Omranding</strong></td>
+    <td>De dikte in pixels van de omranding van de tabel.</td>
+  </tr>
+  <tr>
+    <td><strong>Breedte</strong></td>
+    <td>De breedte van de tabel (in pixels of percentuele notatie).</td>
+  </tr>
+  <tr>
+    <td><strong>Hoogte</strong></td>
+    <td>De breedte van de tabel (in pixels of percentuele notatie).</td>
+  </tr>
+  <tr>
+    <td><strong>CSS-Stijl</strong></td>
+    <td>Optionele stijlkeuze uit de voor de website aangemaakte <i>Cascading Style Sheet</i> (CSS).</td>
+  </tr>
+</table>
+<br>
+<hr noshade>
+<table width="100%" border="0" cellpadding="1" cellspacing="3" class="pagefooter">
+  <tr>
+    <td>Ga naar: <a href="index.htm">Inhoudsopgave</a></td>
+    <td align="right"><a href="#">Naar boven</a></td>
+  </tr>
+</table>
+<br>
+</BODY>
+</HTML>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/style.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/style.css	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/docs/nl/style.css	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,28 @@
+/* body { background-color: #FFFFFF; } */
+body, td, .content { font-family: Verdana, Arial, helvetica, sans-serif; font-size: 12px; }
+.title { font-family: Verdana, Arial, helvetica, sans-serif; font-size: 16px; font-weight: bold; }
+.subtitle { font-size: 12px; font-weight: bold; }
+
+.toc_ul, .toc_li { margin-left: 8px; line-height: 16px; }
+.step_ol, .step_li { margin-left: 11px; line-height: 16px; }
+img { border: #000000 solid 1px; }
+
+a:visited { color: #666666; text-decoration: underline; }
+a:active { color: #666666; text-decoration: underline; }
+a:hover { color: #666666; text-decoration: underline; }
+a { color: #666666; text-decoration: underline; }
+
+.pageheader { border: #E0E0E0 solid 1px; }
+.pagefooter { border: #E0E0E0 solid 1px; }
+.sample { background-color: #FFFFFF; border: #000000 solid 1px; }
+.samplecontent { font-size: 10px; }
+
+.code { background-color: #FFFFFF; border: #000000 solid 1px; }
+.codecontent { font-size: 10px; }
+.codecontent a:visited { color: #666666; text-decoration: none; font-weight: bold }
+.codecontent a:active { color: #666666; text-decoration: none; font-weight: bold  }
+.codecontent a:hover { color: #666666; text-decoration: none; font-weight: bold  }
+.codecontent a { color: #666666; text-decoration: none; font-weight: bold  }
+
+hr { height: 1px; }
+

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/editor_template.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/editor_template.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/editor_template.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1 @@
+tinyMCE.importThemeLanguagePack('advanced');var TinyMCE_AdvancedTheme={_autoImportCSSClasses:true,_resizer:{},_buttons:[['bold','{$lang_bold_img}','lang_bold_desc','Bold'],['italic','{$lang_italic_img}','lang_italic_desc','Italic'],['underline','{$lang_underline_img}','lang_underline_desc','Underline'],['strikethrough','strikethrough.gif','lang_striketrough_desc','Strikethrough'],['justifyleft','justifyleft.gif','lang_justifyleft_desc','JustifyLeft'],['justifycenter','justifycenter.gif','lang_justifycenter_desc','JustifyCenter'],['justifyright','justifyright.gif','lang_justifyright_desc','JustifyRight'],['justifyfull','justifyfull.gif','lang_justifyfull_desc','JustifyFull'],['bullist','bullist.gif','lang_bullist_desc','InsertUnorderedList'],['numlist','numlist.gif','lang_numlist_desc','InsertOrderedList'],['outdent','outdent.gif','lang_outdent_desc','Outdent'],['indent','indent.gif','lang_indent_desc','Indent'],['cut','cut.gif','lang_cut_desc','Cut'],['copy','copy.gif','lan!
 g_copy_desc','Copy'],['paste','paste.gif','lang_paste_desc','Paste'],['undo','undo.gif','lang_undo_desc','Undo'],['redo','redo.gif','lang_redo_desc','Redo'],['link','link.gif','lang_link_desc','mceLink',true],['unlink','unlink.gif','lang_unlink_desc','unlink'],['image','image.gif','lang_image_desc','mceImage',true],['cleanup','cleanup.gif','lang_cleanup_desc','mceCleanup'],['help','help.gif','lang_help_desc','mceHelp'],['code','code.gif','lang_theme_code_desc','mceCodeEditor'],['hr','hr.gif','lang_theme_hr_desc','inserthorizontalrule'],['removeformat','removeformat.gif','lang_theme_removeformat_desc','removeformat'],['sub','sub.gif','lang_theme_sub_desc','subscript'],['sup','sup.gif','lang_theme_sup_desc','superscript'],['forecolor','forecolor.gif','lang_theme_forecolor_desc','mceForeColor',true],['backcolor','backcolor.gif','lang_theme_backcolor_desc','mceBackColor',true],['charmap','charmap.gif','lang_theme_charmap_desc','mceCharMap'],['visualaid','visualaid.gif','lang_th!
 eme_visualaid_desc','mceToggleVisualAid'],['anchor','anchor.gi!
 f','lang
_theme_anchor_desc','mceInsertAnchor'],['newdocument','newdocument.gif','lang_newdocument_desc','mceNewDocument']],_buttonMap:'anchor,backcolor,bold,bullist,charmap,cleanup,code,copy,cut,forecolor,help,hr,image,indent,italic,justifycenter,justifyfull,justifyleft,justifyright,link,newdocument,numlist,outdent,paste,redo,removeformat,strikethrough,sub,sup,underline,undo,unlink,visualaid,advhr,ltr,rtl,emotions,flash,fullpage,fullscreen,iespell,insertdate,inserttime,pastetext,pasteword,selectall,preview,print,save,replace,search,table,cell_props,delete_col,delete_row,col_after,col_before,row_after,row_before,merge_cells,row_props,split_cells',getControlHTML:function(button_name){var i,x;for(i=0;i<TinyMCE_AdvancedTheme._buttons.length;i++){var but=TinyMCE_AdvancedTheme._buttons[i];if(but[0]==button_name)return tinyMCE.getButtonHTML(but[0],but[2],'{$themeurl}/images/'+but[1],but[3],(but.length>4?but[4]:false),(but.length>5?but[5]:null));}switch(button_name){case"formatselect":var h!
 tml='<select id="{$editor_id}_formatSelect" name="{$editor_id}_formatSelect" onfocus="tinyMCE.addSelectAccessibility(event, this, window);" onchange="tinyMCE.execInstanceCommand(\'{$editor_id}\',\'FormatBlock\',false,this.options[this.selectedIndex].value);" class="mceSelectList">';var formats=tinyMCE.getParam("theme_advanced_blockformats","p,address,pre,h1,h2,h3,h4,h5,h6",true).split(',');var lookup=[['p','{$lang_theme_paragraph}'],['address','{$lang_theme_address}'],['pre','{$lang_theme_pre}'],['h1','{$lang_theme_h1}'],['h2','{$lang_theme_h2}'],['h3','{$lang_theme_h3}'],['h4','{$lang_theme_h4}'],['h5','{$lang_theme_h5}'],['h6','{$lang_theme_h6}'],['div','{$lang_theme_div}'],['blockquote','{$lang_theme_blockquote}'],['code','{$lang_theme_code}'],['dt','{$lang_theme_dt}'],['dd','{$lang_theme_dd}'],['samp','{$lang_theme_samp}']];html+='<option value="">{$lang_theme_block}</option>';for(var i=0;i<formats.length;i++){for(var x=0;x<lookup.length;x++){if(formats[i]==lookup[x][0]!
 )html+='<option value="&lt;'+lookup[x][0]+'&gt;">'+lookup[x][1!
 ]+'</opt
ion>';}}html+='</select>';return html;case"styleselect":return'<select id="{$editor_id}_styleSelect" onmousedown="tinyMCE.themes.advanced._setupCSSClasses(\'{$editor_id}\');" name="{$editor_id}_styleSelect" onfocus="tinyMCE.addSelectAccessibility(event,this,window);" onchange="tinyMCE.execInstanceCommand(\'{$editor_id}\',\'mceSetCSSClass\',false,this.options[this.selectedIndex].value);" class="mceSelectList">{$style_select_options}</select>';case"fontselect":var fontHTML='<select id="{$editor_id}_fontNameSelect" name="{$editor_id}_fontNameSelect" onfocus="tinyMCE.addSelectAccessibility(event, this, window);" onchange="tinyMCE.execInstanceCommand(\'{$editor_id}\',\'FontName\',false,this.options[this.selectedIndex].value);" class="mceSelectList"><option value="">{$lang_theme_fontdefault}</option>';var iFonts='Arial=arial,helvetica,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,times new roman,times,serif;Tahoma=tahoma,arial,helvetica,sans-serif;Times New !
 Roman=times new roman,times,serif;Verdana=verdana,arial,helvetica,sans-serif;Impact=impact;WingDings=wingdings';var nFonts='Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sand;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats';var fonts=tinyMCE.getParam("theme_advanced_fonts",nFonts).split(';');for(i=0;i<fonts.length;i++){if(fonts[i]!=''){var parts=fonts[i].split('=');fontHTML+='<option value="'+parts[1]+'">'+parts[0]+'</option>';}}fontHTML+='</select>';return fontHTML;case"fontsizeselect":return'<select id="{$editor_id}_fontSizeSelect" name="{$editor_id}_fontSizeSelect" onfocus="tinyMCE.add!
 SelectAccessibility(event, this, window);" onchange="tinyMCE.e!
 xecInsta
nceCommand(\'{$editor_id}\',\'FontSize\',false,this.options[this.selectedIndex].value);" class="mceSelectList">'+'<option value="0">{$lang_theme_font_size}</option>'+'<option value="1">1 (8 pt)</option>'+'<option value="2">2 (10 pt)</option>'+'<option value="3">3 (12 pt)</option>'+'<option value="4">4 (14 pt)</option>'+'<option value="5">5 (18 pt)</option>'+'<option value="6">6 (24 pt)</option>'+'<option value="7">7 (36 pt)</option>'+'</select>';case"|":case"separator":return'<img src="{$themeurl}/images/separator.gif" width="2" height="20" class="mceSeparatorLine" />';case"spacer":return'<img src="{$themeurl}/images/separator.gif" width="2" height="15" border="0" class="mceSeparatorLine" style="vertical-align: middle" />';case"rowseparator":return'<br />';}return"";},execCommand:function(editor_id,element,command,user_interface,value){switch(command){case"mceLink":var inst=tinyMCE.getInstanceById(editor_id);var doc=inst.getDoc();var selectedText="";if(tinyMCE.isMSIE){var rn!
 g=doc.selection.createRange();selectedText=rng.text;}else selectedText=inst.getSel().toString();if(!tinyMCE.linkElement){if((tinyMCE.selectedElement.nodeName.toLowerCase()!="img")&&(selectedText.length<=0))return true;}var href="",target="",title="",onclick="",action="insert",style_class="";if(tinyMCE.selectedElement.nodeName.toLowerCase()=="a")tinyMCE.linkElement=tinyMCE.selectedElement;if(tinyMCE.linkElement!=null&&tinyMCE.getAttrib(tinyMCE.linkElement,'href')=="")tinyMCE.linkElement=null;if(tinyMCE.linkElement){href=tinyMCE.getAttrib(tinyMCE.linkElement,'href');target=tinyMCE.getAttrib(tinyMCE.linkElement,'target');title=tinyMCE.getAttrib(tinyMCE.linkElement,'title');onclick=tinyMCE.getAttrib(tinyMCE.linkElement,'onclick');style_class=tinyMCE.getAttrib(tinyMCE.linkElement,'class');if(onclick=="")onclick=tinyMCE.getAttrib(tinyMCE.linkElement,'onclick');onclick=tinyMCE.cleanupEventStr(onclick);href=eval(tinyMCE.settings['urlconverter_callback']+"(href, tinyMCE.linkElement,!
  true);");mceRealHref=tinyMCE.getAttrib(tinyMCE.linkElement,'m!
 ce_href'
);if(mceRealHref!=""){href=mceRealHref;if(tinyMCE.getParam('convert_urls'))href=eval(tinyMCE.settings['urlconverter_callback']+"(href, tinyMCE.linkElement, true);");}action="update";}var template=new Array();template['file']='link.htm';template['width']=310;template['height']=200;template['width']+=tinyMCE.getLang('lang_insert_link_delta_width',0);template['height']+=tinyMCE.getLang('lang_insert_link_delta_height',0);if(inst.settings['insertlink_callback']){var returnVal=eval(inst.settings['insertlink_callback']+"(href, target, title, onclick, action, style_class);");if(returnVal&&returnVal['href'])TinyMCE_AdvancedTheme._insertLink(returnVal['href'],returnVal['target'],returnVal['title'],returnVal['onclick'],returnVal['style_class']);}else{tinyMCE.openWindow(template,{href:href,target:target,title:title,onclick:onclick,action:action,className:style_class,inline:"yes"});}return true;case"mceImage":var src="",alt="",border="",hspace="",vspace="",width="",height="",align="";var!
  title="",onmouseover="",onmouseout="",action="insert";var img=tinyMCE.imgElement;var inst=tinyMCE.getInstanceById(editor_id);if(tinyMCE.selectedElement!=null&&tinyMCE.selectedElement.nodeName.toLowerCase()=="img"){img=tinyMCE.selectedElement;tinyMCE.imgElement=img;}if(img){if(tinyMCE.getAttrib(img,'name').indexOf('mce_')==0)return true;src=tinyMCE.getAttrib(img,'src');alt=tinyMCE.getAttrib(img,'alt');if(alt=="")alt=tinyMCE.getAttrib(img,'title');if(tinyMCE.isGecko){var w=img.style.width;if(w!=null&&w!="")img.setAttribute("width",w);var h=img.style.height;if(h!=null&&h!="")img.setAttribute("height",h);}border=tinyMCE.getAttrib(img,'border');hspace=tinyMCE.getAttrib(img,'hspace');vspace=tinyMCE.getAttrib(img,'vspace');width=tinyMCE.getAttrib(img,'width');height=tinyMCE.getAttrib(img,'height');align=tinyMCE.getAttrib(img,'align');onmouseover=tinyMCE.getAttrib(img,'onmouseover');onmouseout=tinyMCE.getAttrib(img,'onmouseout');title=tinyMCE.getAttrib(img,'title');if(tinyMCE.isMS!
 IE){width=img.attributes['width'].specified?width:"";height=im!
 g.attrib
utes['height'].specified?height:"";}src=eval(tinyMCE.settings['urlconverter_callback']+"(src, img, true);");mceRealSrc=tinyMCE.getAttrib(img,'mce_src');if(mceRealSrc!=""){src=mceRealSrc;if(tinyMCE.getParam('convert_urls'))src=eval(tinyMCE.settings['urlconverter_callback']+"(src, img, true);");}action="update";}var template=new Array();template['file']='image.htm?src={$src}';template['width']=355;template['height']=265+(tinyMCE.isMSIE?25:0);template['width']+=tinyMCE.getLang('lang_insert_image_delta_width',0);template['height']+=tinyMCE.getLang('lang_insert_image_delta_height',0);if(inst.settings['insertimage_callback']){var returnVal=eval(inst.settings['insertimage_callback']+"(src, alt, border, hspace, vspace, width, height, align, title, onmouseover, onmouseout, action);");if(returnVal&&returnVal['src'])TinyMCE_AdvancedTheme._insertImage(returnVal['src'],returnVal['alt'],returnVal['border'],returnVal['hspace'],returnVal['vspace'],returnVal['width'],returnVal['height'],retu!
 rnVal['align'],returnVal['title'],returnVal['onmouseover'],returnVal['onmouseout']);}else tinyMCE.openWindow(template,{src:src,alt:alt,border:border,hspace:hspace,vspace:vspace,width:width,height:height,align:align,title:title,onmouseover:onmouseover,onmouseout:onmouseout,action:action,inline:"yes"});return true;case"mceForeColor":var template=new Array();var elm=tinyMCE.selectedInstance.getFocusElement();var inputColor=tinyMCE.getAttrib(elm,"color");if(inputColor=='')inputColor=elm.style.color;if(!inputColor)inputColor="#000000";template['file']='color_picker.htm';template['width']=220;template['height']=190;tinyMCE.openWindow(template,{editor_id:editor_id,inline:"yes",command:"forecolor",input_color:inputColor});return true;case"mceBackColor":var template=new Array();var elm=tinyMCE.selectedInstance.getFocusElement();var inputColor=elm.style.backgroundColor;if(!inputColor)inputColor="#000000";template['file']='color_picker.htm';template['width']=220;template['height']=190!
 ;template['width']+=tinyMCE.getLang('lang_theme_advanced_backc!
 olor_del
ta_width',0);template['height']+=tinyMCE.getLang('lang_theme_advanced_backcolor_delta_height',0);tinyMCE.openWindow(template,{editor_id:editor_id,inline:"yes",command:"HiliteColor",input_color:inputColor});return true;case"mceColorPicker":if(user_interface){var template=new Array();var inputColor=value['document'].getElementById(value['element_id']).value;template['file']='color_picker.htm';template['width']=220;template['height']=190;template['close_previous']="no";template['width']+=tinyMCE.getLang('lang_theme_advanced_colorpicker_delta_width',0);template['height']+=tinyMCE.getLang('lang_theme_advanced_colorpicker_delta_height',0);if(typeof(value['store_selection'])=="undefined")value['store_selection']=true;tinyMCE.lastColorPickerValue=value;tinyMCE.openWindow(template,{editor_id:editor_id,mce_store_selection:value['store_selection'],inline:"yes",command:"mceColorPicker",input_color:inputColor});}else{var savedVal=tinyMCE.lastColorPickerValue;var elm=savedVal['document'].!
 getElementById(savedVal['element_id']);elm.value=value;if(elm.onchange!=null&&elm.onchange!='')eval('elm.onchange();');}return true;case"mceCodeEditor":var template=new Array();template['file']='source_editor.htm';template['width']=parseInt(tinyMCE.getParam("theme_advanced_source_editor_width",720));template['height']=parseInt(tinyMCE.getParam("theme_advanced_source_editor_height",580));tinyMCE.openWindow(template,{editor_id:editor_id,resizable:"yes",scrollbars:"no",inline:"yes"});return true;case"mceCharMap":var template=new Array();template['file']='charmap.htm';template['width']=550+(tinyMCE.isOpera?40:0);template['height']=250;template['width']+=tinyMCE.getLang('lang_theme_advanced_charmap_delta_width',0);template['height']+=tinyMCE.getLang('lang_theme_advanced_charmap_delta_height',0);tinyMCE.openWindow(template,{editor_id:editor_id,inline:"yes"});return true;case"mceInsertAnchor":var template=new Array();template['file']='anchor.htm';template['width']=320;template['he!
 ight']=90+(tinyMCE.isNS7?30:0);template['width']+=tinyMCE.getL!
 ang('lan
g_theme_advanced_anchor_delta_width',0);template['height']+=tinyMCE.getLang('lang_theme_advanced_anchor_delta_height',0);tinyMCE.openWindow(template,{editor_id:editor_id,inline:"yes"});return true;case"mceNewDocument":if(confirm(tinyMCE.getLang('lang_newdocument')))tinyMCE.execInstanceCommand(editor_id,'mceSetContent',false,' ');return true;}return false;},getEditorTemplate:function(settings,editorId){function removeFromArray(in_array,remove_array){var outArray=new Array();for(var i=0;i<in_array.length;i++){skip=false;for(var j=0;j<remove_array.length;j++){if(in_array[i]==remove_array[j]){skip=true;}}if(!skip){outArray[outArray.length]=in_array[i];}}return outArray;}function addToArray(in_array,add_array){for(var i=0;i<add_array.length;i++){in_array[in_array.length]=add_array[i];}return in_array;}var template=new Array();var deltaHeight=0;var resizing=tinyMCE.getParam("theme_advanced_resizing",false);var path=tinyMCE.getParam("theme_advanced_path",true);var statusbarHTML='<d!
 iv id="{$editor_id}_path" class="mceStatusbarPathText" style="display: '+(path?"block":"none")+'">&#160;</div><div id="{$editor_id}_resize" class="mceStatusbarResize" style="display: '+(resizing?"block":"none")+'" onmousedown="tinyMCE.themes.advanced._setResizing(event,\'{$editor_id}\',true);"></div><br style="clear: both" />';var layoutManager=tinyMCE.getParam("theme_advanced_layout_manager","SimpleLayout");var styleSelectHTML='<option value="">{$lang_theme_style_select}</option>';if(settings['theme_advanced_styles']){var stylesAr=settings['theme_advanced_styles'].split(';');for(var i=0;i<stylesAr.length;i++){var key,value;key=stylesAr[i].split('=')[0];value=stylesAr[i].split('=')[1];styleSelectHTML+='<option value="'+value+'">'+key+'</option>';}TinyMCE_AdvancedTheme._autoImportCSSClasses=false;}switch(layoutManager){case"SimpleLayout":var toolbarHTML="";var toolbarLocation=tinyMCE.getParam("theme_advanced_toolbar_location","bottom");var toolbarAlign=tinyMCE.getParam("them!
 e_advanced_toolbar_align","center");var pathLocation=tinyMCE.g!
 etParam(
"theme_advanced_path_location","none");var statusbarLocation=tinyMCE.getParam("theme_advanced_statusbar_location",pathLocation);var defVals={theme_advanced_buttons1:"bold,italic,underline,strikethrough,separator,justifyleft,justifycenter,justifyright,justifyfull,separator,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,separator,outdent,indent,separator,undo,redo,separator,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,separator,sub,sup,separator,charmap"};toolbarHTML+='<a href="#" accesskey="q" title="'+tinyMCE.getLang("lang_toolbar_focus")+'"';if(!tinyMCE.getParam("accessibility_focus"))toolbarHTML+=' onfocus="tinyMCE.getInstanceById(\''+editorId+'\').getWin().focus();"';toolbarHTML+='></a>';for(var i=1;i<100;i++){var def=defVals["theme_advanced_buttons"+i];var buttons=tinyMCE.getParam("theme_advanced_buttons"+i,def==null?'':def,true,',');if(buttons.length==0)break;buttons=removeFromArray(buttons,tinyMCE.ge!
 tParam("theme_advanced_disable","",true,','));buttons=addToArray(buttons,tinyMCE.getParam("theme_advanced_buttons"+i+"_add","",true,','));buttons=addToArray(tinyMCE.getParam("theme_advanced_buttons"+i+"_add_before","",true,','),buttons);for(var b=0;b<buttons.length;b++)toolbarHTML+=tinyMCE.getControlHTML(buttons[b]);if(buttons.length>0){toolbarHTML+="<br />";deltaHeight-=23;}}toolbarHTML+='<a href="#" accesskey="z" onfocus="tinyMCE.getInstanceById(\''+editorId+'\').getWin().focus();"></a>';template['html']='<table class="mceEditor" border="0" cellpadding="0" cellspacing="0" width="{$width}" height="{$height}" style="width:{$width}px;height:{$height}px"><tbody>';if(toolbarLocation=="top"){template['html']+='<tr><td class="mceToolbarTop" align="'+toolbarAlign+'" height="1" nowrap="nowrap">'+toolbarHTML+'</td></tr>';}if(statusbarLocation=="top"){template['html']+='<tr><td class="mceStatusbarTop" height="1">'+statusbarHTML+'</td></tr>';deltaHeight-=23;}template['html']+='<tr><t!
 d align="center"><span id="{$editor_id}"></span></td></tr>';if!
 (toolbar
Location=="bottom"){template['html']+='<tr><td class="mceToolbarBottom" align="'+toolbarAlign+'" height="1">'+toolbarHTML+'</td></tr>';}if(toolbarLocation=="external"){var bod=document.body;var elm=document.createElement("div");toolbarHTML=tinyMCE.replaceVar(toolbarHTML,'style_select_options',styleSelectHTML);toolbarHTML=tinyMCE.applyTemplate(toolbarHTML,{editor_id:editorId});elm.className="mceToolbarExternal";elm.id=editorId+"_toolbar";elm.innerHTML='<table width="100%" border="0" align="center"><tr><td align="center">'+toolbarHTML+'</td></tr></table>';bod.appendChild(elm);deltaHeight=0;tinyMCE.getInstanceById(editorId).toolbarElement=elm;}else{tinyMCE.getInstanceById(editorId).toolbarElement=null;}if(statusbarLocation=="bottom"){template['html']+='<tr><td class="mceStatusbarBottom" height="1">'+statusbarHTML+'</td></tr>';deltaHeight-=23;}template['html']+='</tbody></table>';break;case"RowLayout":template['html']='<table class="mceEditor" border="0" cellpadding="0" cellspac!
 ing="0" width="{$width}" height="{$height}" style="width:{$width}px;height:{$height}px"><tbody>';var containers=tinyMCE.getParam("theme_advanced_containers","",true,",");var defaultContainerCSS=tinyMCE.getParam("theme_advanced_containers_default_class","container");var defaultContainerAlign=tinyMCE.getParam("theme_advanced_containers_default_align","center");for(var i=0;i<containers.length;i++){if(containers[i]=="mceEditor")template['html']+='<tr><td align="center" class="mceEditor_border"><span id="{$editor_id}"></span></td></tr>';else if(containers[i]=="mceElementpath"||containers[i]=="mceStatusbar"){var pathClass="mceStatusbar";if(i==containers.length-1){pathClass="mceStatusbarBottom";}else if(i==0){pathClass="mceStatusbar";}else{deltaHeight-=2;}template['html']+='<tr><td class="'+pathClass+'" height="1">'+statusbarHTML+'</td></tr>';deltaHeight-=22;}else{var curContainer=tinyMCE.getParam("theme_advanced_container_"+containers[i],"",true,',');var curContainerHTML="";var c!
 urAlign=tinyMCE.getParam("theme_advanced_container_"+container!
 s[i]+"_a
lign",defaultContainerAlign);var curCSS=tinyMCE.getParam("theme_advanced_container_"+containers[i]+"_class",defaultContainerCSS);for(var j=0;j<curContainer.length;j++){curContainerHTML+=tinyMCE.getControlHTML(curContainer[j]);}if(curContainer.length>0){curContainerHTML+="<br />";deltaHeight-=23;}template['html']+='<tr><td class="'+curCSS+'" align="'+curAlign+'" height="1">'+curContainerHTML+'</td></tr>';}}template['html']+='</tbody></table>';break;case"CustomLayout":var customLayout=tinyMCE.getParam("theme_advanced_custom_layout","");if(customLayout!=""&&eval("typeof("+customLayout+")")!="undefined"){template=eval(customLayout+"(template);");}break;}if(resizing)template['html']+='<span id="{$editor_id}_resize_box" class="mceResizeBox"></span>';template['html']=tinyMCE.replaceVar(template['html'],'style_select_options',styleSelectHTML);template['delta_width']=0;template['delta_height']=deltaHeight;return template;},initInstance:function(inst){if(tinyMCE.getParam("theme_advanc!
 ed_resizing",false)){if(tinyMCE.getParam("theme_advanced_resizing_use_cookie",true)){var w=TinyMCE_AdvancedTheme._getCookie("TinyMCE_"+inst.editorId+"_width");var h=TinyMCE_AdvancedTheme._getCookie("TinyMCE_"+inst.editorId+"_height");TinyMCE_AdvancedTheme._resizeTo(inst,w,h,tinyMCE.getParam("theme_advanced_resize_horizontal",true));}}inst.addShortcut('ctrl','k','lang_link_desc','mceLink');},handleNodeChange:function(editor_id,node,undo_index,undo_levels,visual_aid,any_selection,setup_content){function selectByValue(select_elm,value,first_index){first_index=typeof(first_index)=="undefined"?false:true;if(select_elm){for(var i=0;i<select_elm.options.length;i++){var ov=""+select_elm.options[i].value;if(first_index&&ov.toLowerCase().indexOf(value.toLowerCase())==0){select_elm.selectedIndex=i;return true;}if(ov==value){select_elm.selectedIndex=i;return true;}}}return false;};function getAttrib(elm,name){return elm.getAttribute(name)?elm.getAttribute(name):"";};if(node==null)retur!
 n;var pathElm=document.getElementById(editor_id+"_path");var i!
 nst=tiny
MCE.getInstanceById(editor_id);var doc=inst.getDoc();if(pathElm){var parentNode=node;var path=new Array();while(parentNode!=null){if(parentNode.nodeName.toUpperCase()=="BODY"){break;}if(parentNode.nodeType==1&&tinyMCE.getAttrib(parentNode,"class").indexOf('mceItemHidden')==-1){path[path.length]=parentNode;}parentNode=parentNode.parentNode;}var html="";for(var i=path.length-1;i>=0;i--){var nodeName=path[i].nodeName.toLowerCase();var nodeData="";if(nodeName=="b"){nodeName="strong";}if(nodeName=="i"){nodeName="em";}if(nodeName=="span"){var cn=tinyMCE.getAttrib(path[i],"class");if(cn!=""&&cn.indexOf('mceItem')==-1)nodeData+="class: "+cn+" ";var st=tinyMCE.getAttrib(path[i],"style");if(st!=""){st=tinyMCE.serializeStyle(tinyMCE.parseStyle(st));nodeData+="style: "+st+" ";}}if(nodeName=="font"){if(tinyMCE.getParam("convert_fonts_to_spans"))nodeName="span";var face=tinyMCE.getAttrib(path[i],"face");if(face!="")nodeData+="font: "+face+" ";var size=tinyMCE.getAttrib(path[i],"size");if(!
 size!="")nodeData+="size: "+size+" ";var color=tinyMCE.getAttrib(path[i],"color");if(color!="")nodeData+="color: "+color+" ";}if(getAttrib(path[i],'id')!=""){nodeData+="id: "+path[i].getAttribute('id')+" ";}var className=tinyMCE.getVisualAidClass(tinyMCE.getAttrib(path[i],"class"),false);if(className!=""&&className.indexOf('mceItem')==-1)nodeData+="class: "+className+" ";if(getAttrib(path[i],'src')!=""){var src=tinyMCE.getAttrib(path[i],"mce_src");if(src=="")src=tinyMCE.getAttrib(path[i],"src");nodeData+="src: "+src+" ";}if(getAttrib(path[i],'href')!=""){var href=tinyMCE.getAttrib(path[i],"mce_href");if(href=="")href=tinyMCE.getAttrib(path[i],"href");nodeData+="href: "+href+" ";}if(nodeName=="img"&&tinyMCE.getAttrib(path[i],"class").indexOf('mceItemFlash')!=-1){nodeName="flash";nodeData="src: "+path[i].getAttribute('title');}if(nodeName=="a"&&(anchor=tinyMCE.getAttrib(path[i],"name"))!=""){nodeName="a";nodeName+="#"+anchor;nodeData="";}if(getAttrib(path[i],'name').indexOf("!
 mce_")!=0){var className=tinyMCE.getVisualAidClass(tinyMCE.get!
 Attrib(p
ath[i],"class"),false);if(className!=""&&className.indexOf('mceItem')==-1){nodeName+="."+className;}}var cmd='tinyMCE.execInstanceCommand(\''+editor_id+'\',\'mceSelectNodeDepth\',false,\''+i+'\');';html+='<a title="'+nodeData+'" href="javascript:'+cmd+'" onclick="'+cmd+'return false;" onmousedown="return false;" target="_self" class="mcePathItem">'+nodeName+'</a>';if(i>0){html+=" &raquo; ";}}pathElm.innerHTML='<a href="#" accesskey="x"></a>'+tinyMCE.getLang('lang_theme_path')+": "+html+'&#160;';}tinyMCE.switchClass(editor_id+'_justifyleft','mceButtonNormal');tinyMCE.switchClass(editor_id+'_justifyright','mceButtonNormal');tinyMCE.switchClass(editor_id+'_justifycenter','mceButtonNormal');tinyMCE.switchClass(editor_id+'_justifyfull','mceButtonNormal');tinyMCE.switchClass(editor_id+'_bold','mceButtonNormal');tinyMCE.switchClass(editor_id+'_italic','mceButtonNormal');tinyMCE.switchClass(editor_id+'_underline','mceButtonNormal');tinyMCE.switchClass(editor_id+'_strikethrough','mce!
 ButtonNormal');tinyMCE.switchClass(editor_id+'_bullist','mceButtonNormal');tinyMCE.switchClass(editor_id+'_numlist','mceButtonNormal');tinyMCE.switchClass(editor_id+'_sub','mceButtonNormal');tinyMCE.switchClass(editor_id+'_sup','mceButtonNormal');tinyMCE.switchClass(editor_id+'_anchor','mceButtonNormal');tinyMCE.switchClass(editor_id+'_link','mceButtonDisabled');tinyMCE.switchClass(editor_id+'_unlink','mceButtonDisabled');tinyMCE.switchClass(editor_id+'_outdent','mceButtonDisabled');tinyMCE.switchClass(editor_id+'_image','mceButtonNormal');tinyMCE.switchClass(editor_id+'_hr','mceButtonNormal');if(node.nodeName=="A"&&tinyMCE.getAttrib(node,"class").indexOf('mceItemAnchor')!=-1)tinyMCE.switchClass(editor_id+'_anchor','mceButtonSelected');var anchorLink=tinyMCE.getParentElement(node,"a","href");if(anchorLink||any_selection){tinyMCE.switchClass(editor_id+'_link',anchorLink?'mceButtonSelected':'mceButtonNormal');tinyMCE.switchClass(editor_id+'_unlink',anchorLink?'mceButtonSelect!
 ed':'mceButtonNormal');}tinyMCE.switchClass(editor_id+'_visual!
 aid',vis
ual_aid?'mceButtonSelected':'mceButtonNormal');if(undo_levels!=-1){tinyMCE.switchClass(editor_id+'_undo','mceButtonDisabled');tinyMCE.switchClass(editor_id+'_redo','mceButtonDisabled');}if(tinyMCE.getParentElement(node,"li,blockquote"))tinyMCE.switchClass(editor_id+'_outdent','mceButtonNormal');if(undo_index!=-1&&(undo_index<undo_levels-1&&undo_levels>0))tinyMCE.switchClass(editor_id+'_redo','mceButtonNormal');if(undo_index!=-1&&(undo_index>0&&undo_levels>0))tinyMCE.switchClass(editor_id+'_undo','mceButtonNormal');var selectElm=document.getElementById(editor_id+"_styleSelect");if(selectElm){TinyMCE_AdvancedTheme._setupCSSClasses(editor_id);classNode=node;breakOut=false;var index=0;do{if(classNode&&classNode.className){for(var i=0;i<selectElm.options.length;i++){if(selectElm.options[i].value==classNode.className){index=i;breakOut=true;break;}}}}while(!breakOut&&classNode!=null&&(classNode=classNode.parentNode)!=null);selectElm.selectedIndex=index;}var selectElm=document.getEl!
 ementById(editor_id+"_formatSelect");if(selectElm){var elm=tinyMCE.getParentElement(node,"p,div,h1,h2,h3,h4,h5,h6,pre,address");if(elm)selectByValue(selectElm,"<"+elm.nodeName.toLowerCase()+">");else selectByValue(selectElm,"");}var selectElm=document.getElementById(editor_id+"_fontNameSelect");if(selectElm){if(!tinyMCE.isSafari&&!(tinyMCE.isMSIE&&!tinyMCE.isOpera)){var face=inst.queryCommandValue('FontName');face=face==null||face==""?"":face;selectByValue(selectElm,face,face!="");}else{var elm=tinyMCE.getParentElement(node,"font","face");if(elm){var family=tinyMCE.getAttrib(elm,"face");if(family=='')family=''+elm.style.fontFamily;if(!selectByValue(selectElm,family,family!=""))selectByValue(selectElm,"");}else selectByValue(selectElm,"");}}var selectElm=document.getElementById(editor_id+"_fontSizeSelect");if(selectElm){if(!tinyMCE.isSafari&&!tinyMCE.isOpera){var size=inst.queryCommandValue('FontSize');selectByValue(selectElm,size==null||size==""?"0":size);}else{var elm=tiny!
 MCE.getParentElement(node,"font","size");if(elm){var size=tiny!
 MCE.getA
ttrib(elm,"size");if(size==''){var sizes=new Array('','8px','10px','12px','14px','18px','24px','36px');size=''+elm.style.fontSize;for(var i=0;i<sizes.length;i++){if((''+sizes[i])==size){size=i;break;}}}if(!selectByValue(selectElm,size))selectByValue(selectElm,"");}else selectByValue(selectElm,"0");}}alignNode=node;breakOut=false;do{if(!alignNode.getAttribute||!alignNode.getAttribute('align'))continue;switch(alignNode.getAttribute('align').toLowerCase()){case"left":tinyMCE.switchClass(editor_id+'_justifyleft','mceButtonSelected');breakOut=true;break;case"right":tinyMCE.switchClass(editor_id+'_justifyright','mceButtonSelected');breakOut=true;break;case"middle":case"center":tinyMCE.switchClass(editor_id+'_justifycenter','mceButtonSelected');breakOut=true;break;case"justify":tinyMCE.switchClass(editor_id+'_justifyfull','mceButtonSelected');breakOut=true;break;}}while(!breakOut&&(alignNode=alignNode.parentNode)!=null);var div=tinyMCE.getParentElement(node,"div");if(div&&div.style!
 .textAlign=="center")tinyMCE.switchClass(editor_id+'_justifycenter','mceButtonSelected');if(!setup_content){var ar=new Array("Bold","_bold","Italic","_italic","Strikethrough","_strikethrough","superscript","_sup","subscript","_sub");for(var i=0;i<ar.length;i+=2){if(inst.queryCommandState(ar[i]))tinyMCE.switchClass(editor_id+ar[i+1],'mceButtonSelected');}if(inst.queryCommandState("Underline")&&(node.parentNode==null||node.parentNode.nodeName!="A"))tinyMCE.switchClass(editor_id+'_underline','mceButtonSelected');}do{switch(node.nodeName){case"UL":tinyMCE.switchClass(editor_id+'_bullist','mceButtonSelected');break;case"OL":tinyMCE.switchClass(editor_id+'_numlist','mceButtonSelected');break;case"HR":tinyMCE.switchClass(editor_id+'_hr','mceButtonSelected');break;case"IMG":if(getAttrib(node,'name').indexOf('mce_')!=0){tinyMCE.switchClass(editor_id+'_image','mceButtonSelected');}break;}}while((node=node.parentNode)!=null);},_setupCSSClasses:function(editor_id){var i,selectElm;if(!T!
 inyMCE_AdvancedTheme._autoImportCSSClasses)return;selectElm=do!
 cument.g
etElementById(editor_id+'_styleSelect');if(selectElm&&selectElm.getAttribute('cssImported')!='true'){var csses=tinyMCE.getCSSClasses(editor_id);if(csses&&selectElm){for(i=0;i<csses.length;i++)selectElm.options[selectElm.options.length]=new Option(csses[i],csses[i]);}if(csses!=null&&csses.length>0)selectElm.setAttribute('cssImported','true');}},_setCookie:function(name,value,expires,path,domain,secure){var curCookie=name+"="+escape(value)+((expires)?"; expires="+expires.toGMTString():"")+((path)?"; path="+escape(path):"")+((domain)?"; domain="+domain:"")+((secure)?"; secure":"");document.cookie=curCookie;},_getCookie:function(name){var dc=document.cookie;var prefix=name+"=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!=0)return null;}else begin+=2;var end=document.cookie.indexOf(";",begin);if(end==-1)end=dc.length;return unescape(dc.substring(begin+prefix.length,end));},_resizeTo:function(inst,w,h,set_w){var editorContainer=document.getEle!
 mentById(inst.editorId+'_parent');var tableElm=editorContainer.firstChild;var iframe=inst.iframeElement;if(w==null||w=="null"){set_w=false;w=0;}if(h==null||h=="null")return;w=parseInt(w);h=parseInt(h);if(tinyMCE.isGecko){w+=2;h+=2;}var dx=w-tableElm.clientWidth;var dy=h-tableElm.clientHeight;w=w<1?30:w;h=h<1?30:h;if(set_w)tableElm.style.width=w+"px";tableElm.style.height=h+"px";iw=iframe.clientWidth+dx;ih=iframe.clientHeight+dy;iw=iw<1?30:iw;ih=ih<1?30:ih;if(tinyMCE.isGecko){iw-=2;ih-=2;}if(set_w)iframe.style.width=iw+"px";iframe.style.height=ih+"px";if(set_w){var tableBodyElm=tableElm.firstChild;var minIframeWidth=tableBodyElm.scrollWidth;if(inst.iframeElement.clientWidth<minIframeWidth){dx=minIframeWidth-inst.iframeElement.clientWidth;inst.iframeElement.style.width=(iw+dx)+"px";}}},_resizeEventHandler:function(e){var resizer=TinyMCE_AdvancedTheme._resizer;if(!resizer.resizing)return;e=typeof(e)=="undefined"?window.event:e;var dx=e.screenX-resizer.downX;var dy=e.screenY-re!
 sizer.downY;var resizeBox=resizer.resizeBox;var editorId=resiz!
 er.edito
rId;switch(e.type){case"mousemove":var w,h;w=resizer.width+dx;h=resizer.height+dy;w=w<1?1:w;h=h<1?1:h;if(resizer.horizontal)resizeBox.style.width=w+"px";resizeBox.style.height=h+"px";break;case"mouseup":TinyMCE_AdvancedTheme._setResizing(e,editorId,false);TinyMCE_AdvancedTheme._resizeTo(tinyMCE.getInstanceById(editorId),resizer.width+dx,resizer.height+dy,resizer.horizontal);if(tinyMCE.getParam("theme_advanced_resizing_use_cookie",true)){var expires=new Date();expires.setTime(expires.getTime()+3600000*24*30);TinyMCE_AdvancedTheme._setCookie("TinyMCE_"+editorId+"_width",""+(resizer.horizontal?resizer.width+dx:""),expires);TinyMCE_AdvancedTheme._setCookie("TinyMCE_"+editorId+"_height",""+(resizer.height+dy),expires);}break;}},_setResizing:function(e,editor_id,state){e=typeof(e)=="undefined"?window.event:e;var resizer=TinyMCE_AdvancedTheme._resizer;var editorContainer=document.getElementById(editor_id+'_parent');var editorArea=document.getElementById(editor_id+'_parent').firstCh!
 ild;var resizeBox=document.getElementById(editor_id+'_resize_box');var inst=tinyMCE.getInstanceById(editor_id);if(state){var width=editorArea.clientWidth;var height=editorArea.clientHeight;resizeBox.style.width=width+"px";resizeBox.style.height=height+"px";resizer.iframeWidth=inst.iframeElement.clientWidth;resizer.iframeHeight=inst.iframeElement.clientHeight;editorArea.style.display="none";resizeBox.style.display="block";if(!resizer.eventHandlers){if(tinyMCE.isMSIE)tinyMCE.addEvent(document,"mousemove",TinyMCE_AdvancedTheme._resizeEventHandler);else tinyMCE.addEvent(window,"mousemove",TinyMCE_AdvancedTheme._resizeEventHandler);tinyMCE.addEvent(document,"mouseup",TinyMCE_AdvancedTheme._resizeEventHandler);resizer.eventHandlers=true;}resizer.resizing=true;resizer.downX=e.screenX;resizer.downY=e.screenY;resizer.width=parseInt(resizeBox.style.width);resizer.height=parseInt(resizeBox.style.height);resizer.editorId=editor_id;resizer.resizeBox=resizeBox;resizer.horizontal=tinyMCE.!
 getParam("theme_advanced_resize_horizontal",true);}else{resize!
 r.resizi
ng=false;resizeBox.style.display="none";editorArea.style.display=tinyMCE.isMSIE&&!tinyMCE.isOpera?"block":"table";tinyMCE.execCommand('mceResetDesignMode');}},_insertImage:function(src,alt,border,hspace,vspace,width,height,align,title,onmouseover,onmouseout){tinyMCE.execCommand('mceBeginUndoLevel');if(src=="")return;if(!tinyMCE.imgElement&&tinyMCE.isSafari){var html="";html+='<img src="'+src+'" alt="'+alt+'"';html+=' border="'+border+'" hspace="'+hspace+'"';html+=' vspace="'+vspace+'" width="'+width+'"';html+=' height="'+height+'" align="'+align+'" title="'+title+'" onmouseover="'+onmouseover+'" onmouseout="'+onmouseout+'" />';tinyMCE.execCommand("mceInsertContent",false,html);}else{if(!tinyMCE.imgElement&&tinyMCE.selectedInstance){if(tinyMCE.isSafari)tinyMCE.execCommand("mceInsertContent",false,'<img src="'+tinyMCE.uniqueURL+'" />');else tinyMCE.selectedInstance.contentDocument.execCommand("insertimage",false,tinyMCE.uniqueURL);tinyMCE.imgElement=tinyMCE.getElementByAttribu!
 teValue(tinyMCE.selectedInstance.contentDocument.body,"img","src",tinyMCE.uniqueURL);}}if(tinyMCE.imgElement){var needsRepaint=false;var msrc=src;src=eval(tinyMCE.settings['urlconverter_callback']+"(src, tinyMCE.imgElement);");if(tinyMCE.getParam('convert_urls'))msrc=src;if(onmouseover&&onmouseover!="")onmouseover="this.src='"+eval(tinyMCE.settings['urlconverter_callback']+"(onmouseover, tinyMCE.imgElement);")+"';";if(onmouseout&&onmouseout!="")onmouseout="this.src='"+eval(tinyMCE.settings['urlconverter_callback']+"(onmouseout, tinyMCE.imgElement);")+"';";if(typeof(title)=="undefined")title=alt;if(width!=tinyMCE.imgElement.getAttribute("width")||height!=tinyMCE.imgElement.getAttribute("height")||align!=tinyMCE.imgElement.getAttribute("align"))needsRepaint=true;tinyMCE.setAttrib(tinyMCE.imgElement,'src',src);tinyMCE.setAttrib(tinyMCE.imgElement,'mce_src',msrc);tinyMCE.setAttrib(tinyMCE.imgElement,'alt',alt);tinyMCE.setAttrib(tinyMCE.imgElement,'title',title);tinyMCE.setAttri!
 b(tinyMCE.imgElement,'align',align);tinyMCE.setAttrib(tinyMCE.!
 imgEleme
nt,'border',border,true);tinyMCE.setAttrib(tinyMCE.imgElement,'hspace',hspace,true);tinyMCE.setAttrib(tinyMCE.imgElement,'vspace',vspace,true);tinyMCE.setAttrib(tinyMCE.imgElement,'width',width,true);tinyMCE.setAttrib(tinyMCE.imgElement,'height',height,true);tinyMCE.setAttrib(tinyMCE.imgElement,'onmouseover',onmouseover);tinyMCE.setAttrib(tinyMCE.imgElement,'onmouseout',onmouseout);if(width&&width!="")tinyMCE.imgElement.style.pixelWidth=width;if(height&&height!="")tinyMCE.imgElement.style.pixelHeight=height;if(needsRepaint)tinyMCE.selectedInstance.repaint();}tinyMCE.execCommand('mceEndUndoLevel');},_insertLink:function(href,target,title,onclick,style_class){tinyMCE.execCommand('mceBeginUndoLevel');if(tinyMCE.selectedInstance&&tinyMCE.selectedElement&&tinyMCE.selectedElement.nodeName.toLowerCase()=="img"){var doc=tinyMCE.selectedInstance.getDoc();var linkElement=tinyMCE.getParentElement(tinyMCE.selectedElement,"a");var newLink=false;if(!linkElement){linkElement=doc.createElem!
 ent("a");newLink=true;}var mhref=href;var thref=eval(tinyMCE.settings['urlconverter_callback']+"(href, linkElement);");mhref=tinyMCE.getParam('convert_urls')?href:mhref;tinyMCE.setAttrib(linkElement,'href',thref);tinyMCE.setAttrib(linkElement,'mce_href',mhref);tinyMCE.setAttrib(linkElement,'target',target);tinyMCE.setAttrib(linkElement,'title',title);tinyMCE.setAttrib(linkElement,'onclick',onclick);tinyMCE.setAttrib(linkElement,'class',style_class);if(newLink){linkElement.appendChild(tinyMCE.selectedElement.cloneNode(true));tinyMCE.selectedElement.parentNode.replaceChild(linkElement,tinyMCE.selectedElement);}return;}if(!tinyMCE.linkElement&&tinyMCE.selectedInstance){if(tinyMCE.isSafari){tinyMCE.execCommand("mceInsertContent",false,'<a href="'+tinyMCE.uniqueURL+'">'+tinyMCE.selectedInstance.selection.getSelectedHTML()+'</a>');}else tinyMCE.selectedInstance.contentDocument.execCommand("createlink",false,tinyMCE.uniqueURL);tinyMCE.linkElement=tinyMCE.getElementByAttributeValue!
 (tinyMCE.selectedInstance.contentDocument.body,"a","href",tiny!
 MCE.uniq
ueURL);var elementArray=tinyMCE.getElementsByAttributeValue(tinyMCE.selectedInstance.contentDocument.body,"a","href",tinyMCE.uniqueURL);for(var i=0;i<elementArray.length;i++){var mhref=href;var thref=eval(tinyMCE.settings['urlconverter_callback']+"(href, elementArray[i]);");mhref=tinyMCE.getParam('convert_urls')?href:mhref;tinyMCE.setAttrib(elementArray[i],'href',thref);tinyMCE.setAttrib(elementArray[i],'mce_href',mhref);tinyMCE.setAttrib(elementArray[i],'target',target);tinyMCE.setAttrib(elementArray[i],'title',title);tinyMCE.setAttrib(elementArray[i],'onclick',onclick);tinyMCE.setAttrib(elementArray[i],'class',style_class);}tinyMCE.linkElement=elementArray[0];}if(tinyMCE.linkElement){var mhref=href;href=eval(tinyMCE.settings['urlconverter_callback']+"(href, tinyMCE.linkElement);");mhref=tinyMCE.getParam('convert_urls')?href:mhref;tinyMCE.setAttrib(tinyMCE.linkElement,'href',href);tinyMCE.setAttrib(tinyMCE.linkElement,'mce_href',mhref);tinyMCE.setAttrib(tinyMCE.linkElement,!
 'target',target);tinyMCE.setAttrib(tinyMCE.linkElement,'title',title);tinyMCE.setAttrib(tinyMCE.linkElement,'onclick',onclick);tinyMCE.setAttrib(tinyMCE.linkElement,'class',style_class);}tinyMCE.execCommand('mceEndUndoLevel');}};tinyMCE.addTheme("advanced",TinyMCE_AdvancedTheme);tinyMCE.addButtonMap(TinyMCE_AdvancedTheme._buttonMap);
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/editor_template_src.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/editor_template_src.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/editor_template_src.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,1411 @@
+/**
+ * $RCSfile: editor_template_src.js,v $
+ * $Revision: 1.96 $
+ * $Date: 2006/04/18 13:32:52 $
+ *
+ * @author Moxiecode
+ * @copyright Copyright ? 2004-2006, Moxiecode Systems AB, All rights reserved.
+ */
+
+/* Import theme specific language pack */
+tinyMCE.importThemeLanguagePack('advanced');
+
+var TinyMCE_AdvancedTheme = {
+	// Private theme fields
+	_autoImportCSSClasses : true,
+	_resizer : {},
+	_buttons : [
+		// Control id, button img, button title, command, user_interface, value
+		['bold', '{$lang_bold_img}', 'lang_bold_desc', 'Bold'],
+		['italic', '{$lang_italic_img}', 'lang_italic_desc', 'Italic'],
+		['underline', '{$lang_underline_img}', 'lang_underline_desc', 'Underline'],
+		['strikethrough', 'strikethrough.gif', 'lang_striketrough_desc', 'Strikethrough'],
+		['justifyleft', 'justifyleft.gif', 'lang_justifyleft_desc', 'JustifyLeft'],
+		['justifycenter', 'justifycenter.gif', 'lang_justifycenter_desc', 'JustifyCenter'],
+		['justifyright', 'justifyright.gif', 'lang_justifyright_desc', 'JustifyRight'],
+		['justifyfull', 'justifyfull.gif', 'lang_justifyfull_desc', 'JustifyFull'],
+		['bullist', 'bullist.gif', 'lang_bullist_desc', 'InsertUnorderedList'],
+		['numlist', 'numlist.gif', 'lang_numlist_desc', 'InsertOrderedList'],
+		['outdent', 'outdent.gif', 'lang_outdent_desc', 'Outdent'],
+		['indent', 'indent.gif', 'lang_indent_desc', 'Indent'],
+		['cut', 'cut.gif', 'lang_cut_desc', 'Cut'],
+		['copy', 'copy.gif', 'lang_copy_desc', 'Copy'],
+		['paste', 'paste.gif', 'lang_paste_desc', 'Paste'],
+		['undo', 'undo.gif', 'lang_undo_desc', 'Undo'],
+		['redo', 'redo.gif', 'lang_redo_desc', 'Redo'],
+		['link', 'link.gif', 'lang_link_desc', 'mceLink', true],
+		['unlink', 'unlink.gif', 'lang_unlink_desc', 'unlink'],
+		['image', 'image.gif', 'lang_image_desc', 'mceImage', true],
+		['cleanup', 'cleanup.gif', 'lang_cleanup_desc', 'mceCleanup'],
+		['help', 'help.gif', 'lang_help_desc', 'mceHelp'],
+		['code', 'code.gif', 'lang_theme_code_desc', 'mceCodeEditor'],
+		['hr', 'hr.gif', 'lang_theme_hr_desc', 'inserthorizontalrule'],
+		['removeformat', 'removeformat.gif', 'lang_theme_removeformat_desc', 'removeformat'],
+		['sub', 'sub.gif', 'lang_theme_sub_desc', 'subscript'],
+		['sup', 'sup.gif', 'lang_theme_sup_desc', 'superscript'],
+		['forecolor', 'forecolor.gif', 'lang_theme_forecolor_desc', 'mceForeColor', true],
+		['backcolor', 'backcolor.gif', 'lang_theme_backcolor_desc', 'mceBackColor', true],
+		['charmap', 'charmap.gif', 'lang_theme_charmap_desc', 'mceCharMap'],
+		['visualaid', 'visualaid.gif', 'lang_theme_visualaid_desc', 'mceToggleVisualAid'],
+		['anchor', 'anchor.gif', 'lang_theme_anchor_desc', 'mceInsertAnchor'],
+		['newdocument', 'newdocument.gif', 'lang_newdocument_desc', 'mceNewDocument']
+	],
+
+	_buttonMap : 'anchor,backcolor,bold,bullist,charmap,cleanup,code,copy,cut,forecolor,help,hr,image,indent,italic,justifycenter,justifyfull,justifyleft,justifyright,link,newdocument,numlist,outdent,paste,redo,removeformat,strikethrough,sub,sup,underline,undo,unlink,visualaid,advhr,ltr,rtl,emotions,flash,fullpage,fullscreen,iespell,insertdate,inserttime,pastetext,pasteword,selectall,preview,print,save,replace,search,table,cell_props,delete_col,delete_row,col_after,col_before,row_after,row_before,merge_cells,row_props,split_cells',
+
+	/**
+	 * Returns HTML code for the specificed control.
+	 */
+	getControlHTML : function(button_name) {
+		var i, x;
+
+		// Lookup button in button list
+		for (i=0; i<TinyMCE_AdvancedTheme._buttons.length; i++) {
+			var but = TinyMCE_AdvancedTheme._buttons[i];
+
+			if (but[0] == button_name)
+				return tinyMCE.getButtonHTML(but[0], but[2], '{$themeurl}/images/' + but[1], but[3], (but.length > 4 ? but[4] : false), (but.length > 5 ? but[5] : null));
+		}
+
+		// Custom controlls other than buttons
+		switch (button_name) {
+			case "formatselect":
+				var html = '<select id="{$editor_id}_formatSelect" name="{$editor_id}_formatSelect" onfocus="tinyMCE.addSelectAccessibility(event, this, window);" onchange="tinyMCE.execInstanceCommand(\'{$editor_id}\',\'FormatBlock\',false,this.options[this.selectedIndex].value);" class="mceSelectList">';
+				var formats = tinyMCE.getParam("theme_advanced_blockformats", "p,address,pre,h1,h2,h3,h4,h5,h6", true).split(',');
+				var lookup = [
+					['p', '{$lang_theme_paragraph}'],
+					['address', '{$lang_theme_address}'],
+					['pre', '{$lang_theme_pre}'],
+					['h1', '{$lang_theme_h1}'],
+					['h2', '{$lang_theme_h2}'],
+					['h3', '{$lang_theme_h3}'],
+					['h4', '{$lang_theme_h4}'],
+					['h5', '{$lang_theme_h5}'],
+					['h6', '{$lang_theme_h6}'],
+					['div', '{$lang_theme_div}'],
+					['blockquote', '{$lang_theme_blockquote}'],
+					['code', '{$lang_theme_code}'],
+					['dt', '{$lang_theme_dt}'],
+					['dd', '{$lang_theme_dd}'],
+					['samp', '{$lang_theme_samp}']
+				];
+
+				html += '<option value="">{$lang_theme_block}</option>';
+
+				// Build format select
+				for (var i=0; i<formats.length; i++) {
+					for (var x=0; x<lookup.length; x++) {
+						if (formats[i] == lookup[x][0])
+							html += '<option value="&lt;' + lookup[x][0] + '&gt;">' + lookup[x][1] + '</option>';
+					}
+				}
+
+				html += '</select>';
+
+				return html;
+
+			case "styleselect":
+				return '<select id="{$editor_id}_styleSelect" onmousedown="tinyMCE.themes.advanced._setupCSSClasses(\'{$editor_id}\');" name="{$editor_id}_styleSelect" onfocus="tinyMCE.addSelectAccessibility(event,this,window);" onchange="tinyMCE.execInstanceCommand(\'{$editor_id}\',\'mceSetCSSClass\',false,this.options[this.selectedIndex].value);" class="mceSelectList">{$style_select_options}</select>';
+
+			case "fontselect":
+				var fontHTML = '<select id="{$editor_id}_fontNameSelect" name="{$editor_id}_fontNameSelect" onfocus="tinyMCE.addSelectAccessibility(event, this, window);" onchange="tinyMCE.execInstanceCommand(\'{$editor_id}\',\'FontName\',false,this.options[this.selectedIndex].value);" class="mceSelectList"><option value="">{$lang_theme_fontdefault}</option>';
+				var iFonts = 'Arial=arial,helvetica,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,times new roman,times,serif;Tahoma=tahoma,arial,helvetica,sans-serif;Times New Roman=times new roman,times,serif;Verdana=verdana,arial,helvetica,sans-serif;Impact=impact;WingDings=wingdings';
+				var nFonts = 'Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sand;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats';
+				var fonts = tinyMCE.getParam("theme_advanced_fonts", nFonts).split(';');
+				for (i=0; i<fonts.length; i++) {
+					if (fonts[i] != '') {
+						var parts = fonts[i].split('=');
+						fontHTML += '<option value="' + parts[1] + '">' + parts[0] + '</option>';
+					}
+				}
+
+				fontHTML += '</select>';
+				return fontHTML;
+
+			case "fontsizeselect":
+				return '<select id="{$editor_id}_fontSizeSelect" name="{$editor_id}_fontSizeSelect" onfocus="tinyMCE.addSelectAccessibility(event, this, window);" onchange="tinyMCE.execInstanceCommand(\'{$editor_id}\',\'FontSize\',false,this.options[this.selectedIndex].value);" class="mceSelectList">'+
+						'<option value="0">{$lang_theme_font_size}</option>'+
+						'<option value="1">1 (8 pt)</option>'+
+						'<option value="2">2 (10 pt)</option>'+
+						'<option value="3">3 (12 pt)</option>'+
+						'<option value="4">4 (14 pt)</option>'+
+						'<option value="5">5 (18 pt)</option>'+
+						'<option value="6">6 (24 pt)</option>'+
+						'<option value="7">7 (36 pt)</option>'+
+						'</select>';
+
+			case "|":
+			case "separator":
+				return '<img src="{$themeurl}/images/separator.gif" width="2" height="20" class="mceSeparatorLine" />';
+
+			case "spacer":
+				return '<img src="{$themeurl}/images/separator.gif" width="2" height="15" border="0" class="mceSeparatorLine" style="vertical-align: middle" />';
+
+			case "rowseparator":
+				return '<br />';
+		}
+
+		return "";
+	},
+
+	/**
+	 * Theme specific execcommand handling.
+	 */
+	execCommand : function(editor_id, element, command, user_interface, value) {
+		switch (command) {
+			case "mceLink":
+				var inst = tinyMCE.getInstanceById(editor_id);
+				var doc = inst.getDoc();
+				var selectedText = "";
+
+				if (tinyMCE.isMSIE) {
+					var rng = doc.selection.createRange();
+					selectedText = rng.text;
+				} else
+					selectedText = inst.getSel().toString();
+
+				if (!tinyMCE.linkElement) {
+					if ((tinyMCE.selectedElement.nodeName.toLowerCase() != "img") && (selectedText.length <= 0))
+						return true;
+				}
+
+				var href = "", target = "", title = "", onclick = "", action = "insert", style_class = "";
+
+				if (tinyMCE.selectedElement.nodeName.toLowerCase() == "a")
+					tinyMCE.linkElement = tinyMCE.selectedElement;
+
+				// Is anchor not a link
+				if (tinyMCE.linkElement != null && tinyMCE.getAttrib(tinyMCE.linkElement, 'href') == "")
+					tinyMCE.linkElement = null;
+
+				if (tinyMCE.linkElement) {
+					href = tinyMCE.getAttrib(tinyMCE.linkElement, 'href');
+					target = tinyMCE.getAttrib(tinyMCE.linkElement, 'target');
+					title = tinyMCE.getAttrib(tinyMCE.linkElement, 'title');
+					onclick = tinyMCE.getAttrib(tinyMCE.linkElement, 'onclick');
+					style_class = tinyMCE.getAttrib(tinyMCE.linkElement, 'class');
+
+					// Try old onclick to if copy/pasted content
+					if (onclick == "")
+						onclick = tinyMCE.getAttrib(tinyMCE.linkElement, 'onclick');
+
+					onclick = tinyMCE.cleanupEventStr(onclick);
+
+					href = eval(tinyMCE.settings['urlconverter_callback'] + "(href, tinyMCE.linkElement, true);");
+
+					// Use mce_href if defined
+					mceRealHref = tinyMCE.getAttrib(tinyMCE.linkElement, 'mce_href');
+					if (mceRealHref != "") {
+						href = mceRealHref;
+
+						if (tinyMCE.getParam('convert_urls'))
+							href = eval(tinyMCE.settings['urlconverter_callback'] + "(href, tinyMCE.linkElement, true);");
+					}
+
+					action = "update";
+				}
+
+				var template = new Array();
+
+				template['file'] = 'link.htm';
+				template['width'] = 310;
+				template['height'] = 200;
+
+				// Language specific width and height addons
+				template['width'] += tinyMCE.getLang('lang_insert_link_delta_width', 0);
+				template['height'] += tinyMCE.getLang('lang_insert_link_delta_height', 0);
+
+				if (inst.settings['insertlink_callback']) {
+					var returnVal = eval(inst.settings['insertlink_callback'] + "(href, target, title, onclick, action, style_class);");
+					if (returnVal && returnVal['href'])
+						TinyMCE_AdvancedTheme._insertLink(returnVal['href'], returnVal['target'], returnVal['title'], returnVal['onclick'], returnVal['style_class']);
+				} else {
+					tinyMCE.openWindow(template, {href : href, target : target, title : title, onclick : onclick, action : action, className : style_class, inline : "yes"});
+				}
+
+				return true;
+
+			case "mceImage":
+				var src = "", alt = "", border = "", hspace = "", vspace = "", width = "", height = "", align = "";
+				var title = "", onmouseover = "", onmouseout = "", action = "insert";
+				var img = tinyMCE.imgElement;
+				var inst = tinyMCE.getInstanceById(editor_id);
+
+				if (tinyMCE.selectedElement != null && tinyMCE.selectedElement.nodeName.toLowerCase() == "img") {
+					img = tinyMCE.selectedElement;
+					tinyMCE.imgElement = img;
+				}
+
+				if (img) {
+					// Is it a internal MCE visual aid image, then skip this one.
+					if (tinyMCE.getAttrib(img, 'name').indexOf('mce_') == 0)
+						return true;
+
+					src = tinyMCE.getAttrib(img, 'src');
+					alt = tinyMCE.getAttrib(img, 'alt');
+
+					// Try polling out the title
+					if (alt == "")
+						alt = tinyMCE.getAttrib(img, 'title');
+
+					// Fix width/height attributes if the styles is specified
+					if (tinyMCE.isGecko) {
+						var w = img.style.width;
+						if (w != null && w != "")
+							img.setAttribute("width", w);
+
+						var h = img.style.height;
+						if (h != null && h != "")
+							img.setAttribute("height", h);
+					}
+
+					border = tinyMCE.getAttrib(img, 'border');
+					hspace = tinyMCE.getAttrib(img, 'hspace');
+					vspace = tinyMCE.getAttrib(img, 'vspace');
+					width = tinyMCE.getAttrib(img, 'width');
+					height = tinyMCE.getAttrib(img, 'height');
+					align = tinyMCE.getAttrib(img, 'align');
+					onmouseover = tinyMCE.getAttrib(img, 'onmouseover');
+					onmouseout = tinyMCE.getAttrib(img, 'onmouseout');
+					title = tinyMCE.getAttrib(img, 'title');
+
+					// Is realy specified?
+					if (tinyMCE.isMSIE) {
+						width = img.attributes['width'].specified ? width : "";
+						height = img.attributes['height'].specified ? height : "";
+					}
+
+					//onmouseover = tinyMCE.getImageSrc(tinyMCE.cleanupEventStr(onmouseover));
+					//onmouseout = tinyMCE.getImageSrc(tinyMCE.cleanupEventStr(onmouseout));
+
+					src = eval(tinyMCE.settings['urlconverter_callback'] + "(src, img, true);");
+
+					// Use mce_src if defined
+					mceRealSrc = tinyMCE.getAttrib(img, 'mce_src');
+					if (mceRealSrc != "") {
+						src = mceRealSrc;
+
+						if (tinyMCE.getParam('convert_urls'))
+							src = eval(tinyMCE.settings['urlconverter_callback'] + "(src, img, true);");
+					}
+
+					//if (onmouseover != "")
+					//	onmouseover = eval(tinyMCE.settings['urlconverter_callback'] + "(onmouseover, img, true);");
+
+					//if (onmouseout != "")
+					//	onmouseout = eval(tinyMCE.settings['urlconverter_callback'] + "(onmouseout, img, true);");
+
+					action = "update";
+				}
+
+				var template = new Array();
+
+				template['file'] = 'image.htm?src={$src}';
+				template['width'] = 355;
+				template['height'] = 265 + (tinyMCE.isMSIE ? 25 : 0);
+
+				// Language specific width and height addons
+				template['width'] += tinyMCE.getLang('lang_insert_image_delta_width', 0);
+				template['height'] += tinyMCE.getLang('lang_insert_image_delta_height', 0);
+
+				if (inst.settings['insertimage_callback']) {
+					var returnVal = eval(inst.settings['insertimage_callback'] + "(src, alt, border, hspace, vspace, width, height, align, title, onmouseover, onmouseout, action);");
+					if (returnVal && returnVal['src'])
+						TinyMCE_AdvancedTheme._insertImage(returnVal['src'], returnVal['alt'], returnVal['border'], returnVal['hspace'], returnVal['vspace'], returnVal['width'], returnVal['height'], returnVal['align'], returnVal['title'], returnVal['onmouseover'], returnVal['onmouseout']);
+				} else
+					tinyMCE.openWindow(template, {src : src, alt : alt, border : border, hspace : hspace, vspace : vspace, width : width, height : height, align : align, title : title, onmouseover : onmouseover, onmouseout : onmouseout, action : action, inline : "yes"});
+
+				return true;
+
+			case "mceForeColor":
+				var template = new Array();
+				var elm = tinyMCE.selectedInstance.getFocusElement();
+				var inputColor = tinyMCE.getAttrib(elm, "color");
+
+				if (inputColor == '')
+					inputColor = elm.style.color;
+
+				if (!inputColor)
+					inputColor = "#000000";
+
+				template['file'] = 'color_picker.htm';
+				template['width'] = 220;
+				template['height'] = 190;
+
+				tinyMCE.openWindow(template, {editor_id : editor_id, inline : "yes", command : "forecolor", input_color : inputColor});
+			return true;
+
+			case "mceBackColor":
+				var template = new Array();
+				var elm = tinyMCE.selectedInstance.getFocusElement();
+				var inputColor = elm.style.backgroundColor;
+
+				if (!inputColor)
+					inputColor = "#000000";
+
+				template['file'] = 'color_picker.htm';
+				template['width'] = 220;
+				template['height'] = 190;
+
+				template['width'] += tinyMCE.getLang('lang_theme_advanced_backcolor_delta_width', 0);
+				template['height'] += tinyMCE.getLang('lang_theme_advanced_backcolor_delta_height', 0);
+
+				tinyMCE.openWindow(template, {editor_id : editor_id, inline : "yes", command : "HiliteColor", input_color : inputColor});
+				//mceBackColor
+			return true;
+
+			case "mceColorPicker":
+				if (user_interface) {
+					var template = new Array();
+					var inputColor = value['document'].getElementById(value['element_id']).value;
+
+					template['file'] = 'color_picker.htm';
+					template['width'] = 220;
+					template['height'] = 190;
+					template['close_previous'] = "no";
+
+					template['width'] += tinyMCE.getLang('lang_theme_advanced_colorpicker_delta_width', 0);
+					template['height'] += tinyMCE.getLang('lang_theme_advanced_colorpicker_delta_height', 0);
+
+					if (typeof(value['store_selection']) == "undefined")
+						value['store_selection'] = true;
+
+					tinyMCE.lastColorPickerValue = value;
+					tinyMCE.openWindow(template, {editor_id : editor_id, mce_store_selection : value['store_selection'], inline : "yes", command : "mceColorPicker", input_color : inputColor});
+				} else {
+					var savedVal = tinyMCE.lastColorPickerValue;
+					var elm = savedVal['document'].getElementById(savedVal['element_id']);
+					elm.value = value;
+
+					if (elm.onchange != null && elm.onchange != '')
+						eval('elm.onchange();');
+				}
+			return true;
+
+			case "mceCodeEditor":
+				var template = new Array();
+
+				template['file'] = 'source_editor.htm';
+				template['width'] = parseInt(tinyMCE.getParam("theme_advanced_source_editor_width", 720));
+				template['height'] = parseInt(tinyMCE.getParam("theme_advanced_source_editor_height", 580));
+
+				tinyMCE.openWindow(template, {editor_id : editor_id, resizable : "yes", scrollbars : "no", inline : "yes"});
+				return true;
+
+			case "mceCharMap":
+				var template = new Array();
+
+				template['file'] = 'charmap.htm';
+				template['width'] = 550 + (tinyMCE.isOpera ? 40 : 0);
+				template['height'] = 250;
+
+				template['width'] += tinyMCE.getLang('lang_theme_advanced_charmap_delta_width', 0);
+				template['height'] += tinyMCE.getLang('lang_theme_advanced_charmap_delta_height', 0);
+
+				tinyMCE.openWindow(template, {editor_id : editor_id, inline : "yes"});
+				return true;
+
+			case "mceInsertAnchor":
+				var template = new Array();
+
+				template['file'] = 'anchor.htm';
+				template['width'] = 320;
+				template['height'] = 90 + (tinyMCE.isNS7 ? 30 : 0);
+
+				template['width'] += tinyMCE.getLang('lang_theme_advanced_anchor_delta_width', 0);
+				template['height'] += tinyMCE.getLang('lang_theme_advanced_anchor_delta_height', 0);
+
+				tinyMCE.openWindow(template, {editor_id : editor_id, inline : "yes"});
+				return true;
+
+			case "mceNewDocument":
+				if (confirm(tinyMCE.getLang('lang_newdocument')))
+					tinyMCE.execInstanceCommand(editor_id, 'mceSetContent', false, ' ');
+
+				return true;
+		}
+
+		return false;
+	},
+
+	/**
+	 * Editor instance template function.
+	 */
+	getEditorTemplate : function(settings, editorId) {
+		function removeFromArray(in_array, remove_array) {
+			var outArray = new Array();
+			
+			for (var i=0; i<in_array.length; i++) {
+				skip = false;
+
+				for (var j=0; j<remove_array.length; j++) {
+					if (in_array[i] == remove_array[j]) {
+						skip = true;
+					}
+				}
+
+				if (!skip) {
+					outArray[outArray.length] = in_array[i];
+				}
+			}
+
+			return outArray;
+		}
+
+		function addToArray(in_array, add_array) {
+			for (var i=0; i<add_array.length; i++) {
+				in_array[in_array.length] = add_array[i];
+			}
+
+			return in_array;
+		}
+
+		var template = new Array();
+		var deltaHeight = 0;
+		var resizing = tinyMCE.getParam("theme_advanced_resizing", false);
+		var path = tinyMCE.getParam("theme_advanced_path", true);
+		var statusbarHTML = '<div id="{$editor_id}_path" class="mceStatusbarPathText" style="display: ' + (path ? "block" : "none") + '">&#160;</div><div id="{$editor_id}_resize" class="mceStatusbarResize" style="display: ' + (resizing ? "block" : "none") + '" onmousedown="tinyMCE.themes.advanced._setResizing(event,\'{$editor_id}\',true);"></div><br style="clear: both" />';
+		var layoutManager = tinyMCE.getParam("theme_advanced_layout_manager", "SimpleLayout");
+
+		// Setup style select options -- MOVED UP FOR EXTERNAL TOOLBAR COMPATABILITY!
+		var styleSelectHTML = '<option value="">{$lang_theme_style_select}</option>';
+		if (settings['theme_advanced_styles']) {
+			var stylesAr = settings['theme_advanced_styles'].split(';');
+			
+			for (var i=0; i<stylesAr.length; i++) {
+				var key, value;
+
+				key = stylesAr[i].split('=')[0];
+				value = stylesAr[i].split('=')[1];
+
+				styleSelectHTML += '<option value="' + value + '">' + key + '</option>';
+			}
+
+			TinyMCE_AdvancedTheme._autoImportCSSClasses = false;
+		}
+
+		switch(layoutManager) {
+			case "SimpleLayout" : //the default TinyMCE Layout (for backwards compatibility)...
+				var toolbarHTML = "";
+				var toolbarLocation = tinyMCE.getParam("theme_advanced_toolbar_location", "bottom");
+				var toolbarAlign = tinyMCE.getParam("theme_advanced_toolbar_align", "center");
+				var pathLocation = tinyMCE.getParam("theme_advanced_path_location", "none"); // Compatiblity
+				var statusbarLocation = tinyMCE.getParam("theme_advanced_statusbar_location", pathLocation);
+				var defVals = {
+					theme_advanced_buttons1 : "bold,italic,underline,strikethrough,separator,justifyleft,justifycenter,justifyright,justifyfull,separator,styleselect,formatselect",
+					theme_advanced_buttons2 : "bullist,numlist,separator,outdent,indent,separator,undo,redo,separator,link,unlink,anchor,image,cleanup,help,code",
+					theme_advanced_buttons3 : "hr,removeformat,visualaid,separator,sub,sup,separator,charmap"
+				};
+
+				// Add accessibility control
+				toolbarHTML += '<a href="#" accesskey="q" title="' + tinyMCE.getLang("lang_toolbar_focus") + '"';
+
+				if (!tinyMCE.getParam("accessibility_focus"))
+					toolbarHTML += ' onfocus="tinyMCE.getInstanceById(\'' + editorId + '\').getWin().focus();"';
+
+				toolbarHTML += '></a>';
+
+				// Render rows
+				for (var i=1; i<100; i++) {
+					var def = defVals["theme_advanced_buttons" + i];
+
+					var buttons = tinyMCE.getParam("theme_advanced_buttons" + i, def == null ? '' : def, true, ',');
+					if (buttons.length == 0)
+						break;
+
+					buttons = removeFromArray(buttons, tinyMCE.getParam("theme_advanced_disable", "", true, ','));
+					buttons = addToArray(buttons, tinyMCE.getParam("theme_advanced_buttons" + i + "_add", "", true, ','));
+					buttons = addToArray(tinyMCE.getParam("theme_advanced_buttons" + i + "_add_before", "", true, ','), buttons);
+
+					for (var b=0; b<buttons.length; b++)
+						toolbarHTML += tinyMCE.getControlHTML(buttons[b]);
+
+					if (buttons.length > 0) {
+						toolbarHTML += "<br />";
+						deltaHeight -= 23;
+					}
+				}
+
+				// Add accessibility control
+				toolbarHTML += '<a href="#" accesskey="z" onfocus="tinyMCE.getInstanceById(\'' + editorId + '\').getWin().focus();"></a>';
+
+				// Setup template html
+				template['html'] = '<table class="mceEditor" border="0" cellpadding="0" cellspacing="0" width="{$width}" height="{$height}" style="width:{$width}px;height:{$height}px"><tbody>';
+
+				if (toolbarLocation == "top") {
+					template['html'] += '<tr><td class="mceToolbarTop" align="' + toolbarAlign + '" height="1" nowrap="nowrap">' + toolbarHTML + '</td></tr>';
+				}
+
+				if (statusbarLocation == "top") {
+					template['html'] += '<tr><td class="mceStatusbarTop" height="1">' + statusbarHTML + '</td></tr>';
+					deltaHeight -= 23;
+				}
+
+				template['html'] += '<tr><td align="center"><span id="{$editor_id}"></span></td></tr>';
+
+				if (toolbarLocation == "bottom") {
+					template['html'] += '<tr><td class="mceToolbarBottom" align="' + toolbarAlign + '" height="1">' + toolbarHTML + '</td></tr>';
+				}
+
+				// External toolbar changes
+				if (toolbarLocation == "external") {
+					var bod = document.body;
+					var elm = document.createElement ("div");
+
+					toolbarHTML = tinyMCE.replaceVar(toolbarHTML, 'style_select_options', styleSelectHTML);
+					toolbarHTML = tinyMCE.applyTemplate(toolbarHTML, {editor_id : editorId});
+
+					elm.className = "mceToolbarExternal";
+					elm.id = editorId+"_toolbar";
+					elm.innerHTML = '<table width="100%" border="0" align="center"><tr><td align="center">'+toolbarHTML+'</td></tr></table>';
+					bod.appendChild (elm);
+					// bod.style.marginTop = elm.offsetHeight + "px";
+
+					deltaHeight = 0;
+					tinyMCE.getInstanceById(editorId).toolbarElement = elm;
+
+					//template['html'] = '<div id="mceExternalToolbar" align="center" class="mceToolbarExternal"><table width="100%" border="0" align="center"><tr><td align="center">'+toolbarHTML+'</td></tr></table></div>' + template["html"];
+				} else {
+					tinyMCE.getInstanceById(editorId).toolbarElement = null;
+				}
+
+				if (statusbarLocation == "bottom") {
+					template['html'] += '<tr><td class="mceStatusbarBottom" height="1">' + statusbarHTML + '</td></tr>';
+					deltaHeight -= 23;
+				}
+
+				template['html'] += '</tbody></table>';
+				//"SimpleLayout"
+			break;
+
+			case "RowLayout" : //Container Layout - containers defined in "theme_advanced_containers" are rendered from top to bottom.
+				template['html'] = '<table class="mceEditor" border="0" cellpadding="0" cellspacing="0" width="{$width}" height="{$height}" style="width:{$width}px;height:{$height}px"><tbody>';
+
+				var containers = tinyMCE.getParam("theme_advanced_containers", "", true, ",");
+				var defaultContainerCSS = tinyMCE.getParam("theme_advanced_containers_default_class", "container");
+				var defaultContainerAlign = tinyMCE.getParam("theme_advanced_containers_default_align", "center");
+
+				//Render Containers:
+				for (var i = 0; i < containers.length; i++)
+				{
+					if (containers[i] == "mceEditor") //Exceptions for mceEditor and ...
+						template['html'] += '<tr><td align="center" class="mceEditor_border"><span id="{$editor_id}"></span></td></tr>';
+					else if (containers[i] == "mceElementpath" || containers[i] == "mceStatusbar") // ... mceElementpath:
+					{
+						var pathClass = "mceStatusbar";
+
+						if (i == containers.length-1)
+						{
+							pathClass = "mceStatusbarBottom";
+						}
+						else if (i == 0)
+						{
+							pathClass = "mceStatusbar";
+						}
+						else
+						{
+							deltaHeight-=2;
+						}
+
+						template['html'] += '<tr><td class="' + pathClass + '" height="1">' + statusbarHTML + '</td></tr>';
+						deltaHeight -= 22;
+					} else { // Render normal Container
+						var curContainer = tinyMCE.getParam("theme_advanced_container_"+containers[i], "", true, ',');
+						var curContainerHTML = "";
+						var curAlign = tinyMCE.getParam("theme_advanced_container_"+containers[i]+"_align", defaultContainerAlign);
+						var curCSS = tinyMCE.getParam("theme_advanced_container_"+containers[i]+"_class", defaultContainerCSS);
+
+						for (var j=0; j<curContainer.length; j++) {
+							curContainerHTML += tinyMCE.getControlHTML(curContainer[j]);
+						}
+
+						if (curContainer.length > 0) {
+							curContainerHTML += "<br />";
+							deltaHeight -= 23;
+						}
+
+						template['html'] += '<tr><td class="' + curCSS + '" align="' + curAlign + '" height="1">' + curContainerHTML + '</td></tr>';
+					}
+				}
+
+				template['html'] += '</tbody></table>';
+				//RowLayout
+			break;
+
+			case "CustomLayout" : //User defined layout callback...
+				var customLayout = tinyMCE.getParam("theme_advanced_custom_layout","");
+
+				if (customLayout != "" && eval("typeof(" + customLayout + ")") != "undefined") {
+					template = eval(customLayout + "(template);");
+				}
+			break;
+		}
+
+		if (resizing)
+			template['html'] += '<span id="{$editor_id}_resize_box" class="mceResizeBox"></span>';
+
+		template['html'] = tinyMCE.replaceVar(template['html'], 'style_select_options', styleSelectHTML);
+		template['delta_width'] = 0;
+		template['delta_height'] = deltaHeight;
+
+		return template;
+	},
+
+	initInstance : function(inst) {
+		if (tinyMCE.getParam("theme_advanced_resizing", false)) {
+			if (tinyMCE.getParam("theme_advanced_resizing_use_cookie", true)) {
+				var w = TinyMCE_AdvancedTheme._getCookie("TinyMCE_" + inst.editorId + "_width");
+				var h = TinyMCE_AdvancedTheme._getCookie("TinyMCE_" + inst.editorId + "_height");
+
+				TinyMCE_AdvancedTheme._resizeTo(inst, w, h, tinyMCE.getParam("theme_advanced_resize_horizontal", true));
+			}
+		}
+
+		inst.addShortcut('ctrl', 'k', 'lang_link_desc', 'mceLink');
+	},
+
+	/**
+	 * Node change handler.
+	 */
+	handleNodeChange : function(editor_id, node, undo_index, undo_levels, visual_aid, any_selection, setup_content) {
+		function selectByValue(select_elm, value, first_index) {
+			first_index = typeof(first_index) == "undefined" ? false : true;
+
+			if (select_elm) {
+				for (var i=0; i<select_elm.options.length; i++) {
+					var ov = "" + select_elm.options[i].value;
+
+					if (first_index && ov.toLowerCase().indexOf(value.toLowerCase()) == 0) {
+						select_elm.selectedIndex = i;
+						return true;
+					}
+
+					if (ov == value) {
+						select_elm.selectedIndex = i;
+						return true;
+					}
+				}
+			}
+
+			return false;
+		};
+
+		function getAttrib(elm, name) {
+			return elm.getAttribute(name) ? elm.getAttribute(name) : "";
+		};
+
+		// No node provided
+		if (node == null)
+			return;
+
+		// Update path
+		var pathElm = document.getElementById(editor_id + "_path");
+		var inst = tinyMCE.getInstanceById(editor_id);
+		var doc = inst.getDoc();
+
+		if (pathElm) {
+			// Get node path
+			var parentNode = node;
+			var path = new Array();
+			
+			while (parentNode != null) {
+				if (parentNode.nodeName.toUpperCase() == "BODY") {
+					break;
+				}
+
+				// Only append element nodes to path
+				if (parentNode.nodeType == 1 && tinyMCE.getAttrib(parentNode, "class").indexOf('mceItemHidden') == -1) {
+					path[path.length] = parentNode;
+				}
+
+				parentNode = parentNode.parentNode;
+			}
+
+			// Setup HTML
+			var html = "";
+			for (var i=path.length-1; i>=0; i--) {
+				var nodeName = path[i].nodeName.toLowerCase();
+				var nodeData = "";
+
+				if (nodeName == "b") {
+					nodeName = "strong";
+				}
+
+				if (nodeName == "i") {
+					nodeName = "em";
+				}
+
+				if (nodeName == "span") {
+					var cn = tinyMCE.getAttrib(path[i], "class");
+					if (cn != "" && cn.indexOf('mceItem') == -1)
+						nodeData += "class: " + cn + " ";
+
+					var st = tinyMCE.getAttrib(path[i], "style");
+					if (st != "") {
+						st = tinyMCE.serializeStyle(tinyMCE.parseStyle(st));
+						nodeData += "style: " + st + " ";
+					}
+				}
+
+				if (nodeName == "font") {
+					if (tinyMCE.getParam("convert_fonts_to_spans"))
+						nodeName = "span";
+
+					var face = tinyMCE.getAttrib(path[i], "face");
+					if (face != "")
+						nodeData += "font: " + face + " ";
+
+					var size = tinyMCE.getAttrib(path[i], "size");
+					if (size != "")
+						nodeData += "size: " + size + " ";
+
+					var color = tinyMCE.getAttrib(path[i], "color");
+					if (color != "")
+						nodeData += "color: " + color + " ";
+				}
+
+				if (getAttrib(path[i], 'id') != "") {
+					nodeData += "id: " + path[i].getAttribute('id') + " ";
+				}
+
+				var className = tinyMCE.getVisualAidClass(tinyMCE.getAttrib(path[i], "class"), false);
+				if (className != "" && className.indexOf('mceItem') == -1)
+					nodeData += "class: " + className + " ";
+
+				if (getAttrib(path[i], 'src') != "") {
+					var src = tinyMCE.getAttrib(path[i], "mce_src");
+
+					if (src == "")
+						 src = tinyMCE.getAttrib(path[i], "src");
+
+					nodeData += "src: " + src + " ";
+				}
+
+				if (getAttrib(path[i], 'href') != "") {
+					var href = tinyMCE.getAttrib(path[i], "mce_href");
+
+					if (href == "")
+						 href = tinyMCE.getAttrib(path[i], "href");
+
+					nodeData += "href: " + href + " ";
+				}
+
+				if (nodeName == "img" && tinyMCE.getAttrib(path[i], "class").indexOf('mceItemFlash') != -1) {
+					nodeName = "flash";
+					nodeData = "src: " + path[i].getAttribute('title');
+				}
+
+				if (nodeName == "a" && (anchor = tinyMCE.getAttrib(path[i], "name")) != "") {
+					nodeName = "a";
+					nodeName += "#" + anchor;
+					nodeData = "";
+				}
+
+				if (getAttrib(path[i], 'name').indexOf("mce_") != 0) {
+					var className = tinyMCE.getVisualAidClass(tinyMCE.getAttrib(path[i], "class"), false);
+					if (className != "" && className.indexOf('mceItem') == -1) {
+						nodeName += "." + className;
+					}
+				}
+
+				var cmd = 'tinyMCE.execInstanceCommand(\'' + editor_id + '\',\'mceSelectNodeDepth\',false,\'' + i + '\');';
+				html += '<a title="' + nodeData + '" href="javascript:' + cmd + '" onclick="' + cmd + 'return false;" onmousedown="return false;" target="_self" class="mcePathItem">' + nodeName + '</a>';
+
+				if (i > 0) {
+					html += " &raquo; ";
+				}
+			}
+
+			pathElm.innerHTML = '<a href="#" accesskey="x"></a>' + tinyMCE.getLang('lang_theme_path') + ": " + html + '&#160;';
+		}
+
+		// Reset old states
+		tinyMCE.switchClass(editor_id + '_justifyleft', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_justifyright', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_justifycenter', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_justifyfull', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_bold', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_italic', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_underline', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_strikethrough', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_bullist', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_numlist', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_sub', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_sup', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_anchor', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_link', 'mceButtonDisabled');
+		tinyMCE.switchClass(editor_id + '_unlink', 'mceButtonDisabled');
+		tinyMCE.switchClass(editor_id + '_outdent', 'mceButtonDisabled');
+		tinyMCE.switchClass(editor_id + '_image', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_hr', 'mceButtonNormal');
+
+		if (node.nodeName == "A" && tinyMCE.getAttrib(node, "class").indexOf('mceItemAnchor') != -1)
+			tinyMCE.switchClass(editor_id + '_anchor', 'mceButtonSelected');
+
+		// Get link
+		var anchorLink = tinyMCE.getParentElement(node, "a", "href");
+
+		if (anchorLink || any_selection) {
+			tinyMCE.switchClass(editor_id + '_link', anchorLink ? 'mceButtonSelected' : 'mceButtonNormal');
+			tinyMCE.switchClass(editor_id + '_unlink', anchorLink ? 'mceButtonSelected' : 'mceButtonNormal');
+		}
+
+		// Handle visual aid
+		tinyMCE.switchClass(editor_id + '_visualaid', visual_aid ? 'mceButtonSelected' : 'mceButtonNormal');
+
+		if (undo_levels != -1) {
+			tinyMCE.switchClass(editor_id + '_undo', 'mceButtonDisabled');
+			tinyMCE.switchClass(editor_id + '_redo', 'mceButtonDisabled');
+		}
+
+		// Within li, blockquote
+		if (tinyMCE.getParentElement(node, "li,blockquote"))
+			tinyMCE.switchClass(editor_id + '_outdent', 'mceButtonNormal');
+
+		// Has redo levels
+		if (undo_index != -1 && (undo_index < undo_levels-1 && undo_levels > 0))
+			tinyMCE.switchClass(editor_id + '_redo', 'mceButtonNormal');
+
+		// Has undo levels
+		if (undo_index != -1 && (undo_index > 0 && undo_levels > 0))
+			tinyMCE.switchClass(editor_id + '_undo', 'mceButtonNormal');
+
+		// Select class in select box
+		var selectElm = document.getElementById(editor_id + "_styleSelect");
+		
+		if (selectElm) {
+			TinyMCE_AdvancedTheme._setupCSSClasses(editor_id);
+
+			classNode = node;
+			breakOut = false;
+			var index = 0;
+
+			do {
+				if (classNode && classNode.className) {
+					for (var i=0; i<selectElm.options.length; i++) {
+						if (selectElm.options[i].value == classNode.className) {
+							index = i;
+							breakOut = true;
+							break;
+						}
+					}
+				}
+			} while (!breakOut && classNode != null && (classNode = classNode.parentNode) != null);
+
+			selectElm.selectedIndex = index;
+		}
+
+		// Select formatblock
+		var selectElm = document.getElementById(editor_id + "_formatSelect");
+		if (selectElm) {
+			var elm = tinyMCE.getParentElement(node, "p,div,h1,h2,h3,h4,h5,h6,pre,address");
+
+			if (elm)
+				selectByValue(selectElm, "<" + elm.nodeName.toLowerCase() + ">");
+			else
+				selectByValue(selectElm, "");
+		}
+
+		// Select fontselect
+		var selectElm = document.getElementById(editor_id + "_fontNameSelect");
+		if (selectElm) {
+			if (!tinyMCE.isSafari && !(tinyMCE.isMSIE && !tinyMCE.isOpera)) {
+				var face = inst.queryCommandValue('FontName');
+
+				face = face == null || face == "" ? "" : face;
+
+				selectByValue(selectElm, face, face != "");
+			} else {
+				var elm = tinyMCE.getParentElement(node, "font", "face");
+
+				if (elm) {
+					var family = tinyMCE.getAttrib(elm, "face");
+
+					if (family == '')
+						family = '' + elm.style.fontFamily;
+
+					if (!selectByValue(selectElm, family, family != ""))
+						selectByValue(selectElm, "");
+				} else
+					selectByValue(selectElm, "");
+			}
+		}
+
+		// Select fontsize
+		var selectElm = document.getElementById(editor_id + "_fontSizeSelect");
+		if (selectElm) {
+			if (!tinyMCE.isSafari && !tinyMCE.isOpera) {
+				var size = inst.queryCommandValue('FontSize');
+				selectByValue(selectElm, size == null || size == "" ? "0" : size);
+			} else {
+				var elm = tinyMCE.getParentElement(node, "font", "size");
+				if (elm) {
+					var size = tinyMCE.getAttrib(elm, "size");
+
+					if (size == '') {
+						var sizes = new Array('', '8px', '10px', '12px', '14px', '18px', '24px', '36px');
+
+						size = '' + elm.style.fontSize;
+
+						for (var i=0; i<sizes.length; i++) {
+							if (('' + sizes[i]) == size) {
+								size = i;
+								break;
+							}
+						}
+					}
+
+					if (!selectByValue(selectElm, size))
+						selectByValue(selectElm, "");
+				} else
+					selectByValue(selectElm, "0");
+			}
+		}
+
+		// Handle align attributes
+		alignNode = node;
+		breakOut = false;
+		do {
+			if (!alignNode.getAttribute || !alignNode.getAttribute('align'))
+				continue;
+
+			switch (alignNode.getAttribute('align').toLowerCase()) {
+				case "left":
+					tinyMCE.switchClass(editor_id + '_justifyleft', 'mceButtonSelected');
+					breakOut = true;
+				break;
+
+				case "right":
+					tinyMCE.switchClass(editor_id + '_justifyright', 'mceButtonSelected');
+					breakOut = true;
+				break;
+
+				case "middle":
+				case "center":
+					tinyMCE.switchClass(editor_id + '_justifycenter', 'mceButtonSelected');
+					breakOut = true;
+				break;
+
+				case "justify":
+					tinyMCE.switchClass(editor_id + '_justifyfull', 'mceButtonSelected');
+					breakOut = true;
+				break;
+			}
+		} while (!breakOut && (alignNode = alignNode.parentNode) != null);
+
+		// Div justification
+		var div = tinyMCE.getParentElement(node, "div");
+		if (div && div.style.textAlign == "center")
+			tinyMCE.switchClass(editor_id + '_justifycenter', 'mceButtonSelected');
+
+		// Do special text
+		if (!setup_content) {
+			// , "JustifyLeft", "_justifyleft", "JustifyCenter", "justifycenter", "JustifyRight", "justifyright", "JustifyFull", "justifyfull", "InsertUnorderedList", "bullist", "InsertOrderedList", "numlist", "InsertUnorderedList", "bullist", "Outdent", "outdent", "Indent", "indent", "subscript", "sub"
+			var ar = new Array("Bold", "_bold", "Italic", "_italic", "Strikethrough", "_strikethrough", "superscript", "_sup", "subscript", "_sub");
+			for (var i=0; i<ar.length; i+=2) {
+				if (inst.queryCommandState(ar[i]))
+					tinyMCE.switchClass(editor_id + ar[i+1], 'mceButtonSelected');
+			}
+
+			if (inst.queryCommandState("Underline") && (node.parentNode == null || node.parentNode.nodeName != "A"))
+				tinyMCE.switchClass(editor_id + '_underline', 'mceButtonSelected');
+		}
+
+		// Handle elements
+		do {
+			switch (node.nodeName) {
+				case "UL":
+					tinyMCE.switchClass(editor_id + '_bullist', 'mceButtonSelected');
+				break;
+
+				case "OL":
+					tinyMCE.switchClass(editor_id + '_numlist', 'mceButtonSelected');
+				break;
+
+				case "HR":
+					 tinyMCE.switchClass(editor_id + '_hr', 'mceButtonSelected');
+				break;
+
+				case "IMG":
+				if (getAttrib(node, 'name').indexOf('mce_') != 0) {
+					tinyMCE.switchClass(editor_id + '_image', 'mceButtonSelected');
+				}
+				break;
+			}
+		} while ((node = node.parentNode) != null);
+	},
+
+	// Private theme internal functions
+
+	// This function auto imports CSS classes into the class selection droplist
+	_setupCSSClasses : function(editor_id) {
+		var i, selectElm;
+
+		if (!TinyMCE_AdvancedTheme._autoImportCSSClasses)
+			return;
+
+		selectElm = document.getElementById(editor_id + '_styleSelect');
+
+		if (selectElm && selectElm.getAttribute('cssImported') != 'true') {
+			var csses = tinyMCE.getCSSClasses(editor_id);
+			if (csses && selectElm)	{
+				for (i=0; i<csses.length; i++)
+					selectElm.options[selectElm.options.length] = new Option(csses[i], csses[i]);
+			}
+
+			// Only do this once
+			if (csses != null && csses.length > 0)
+				selectElm.setAttribute('cssImported', 'true');
+		}
+	},
+
+	_setCookie : function(name, value, expires, path, domain, secure) {
+		var curCookie = name + "=" + escape(value) +
+			((expires) ? "; expires=" + expires.toGMTString() : "") +
+			((path) ? "; path=" + escape(path) : "") +
+			((domain) ? "; domain=" + domain : "") +
+			((secure) ? "; secure" : "");
+
+		document.cookie = curCookie;
+	},
+
+	_getCookie : function(name) {
+		var dc = document.cookie;
+		var prefix = name + "=";
+		var begin = dc.indexOf("; " + prefix);
+
+		if (begin == -1) {
+			begin = dc.indexOf(prefix);
+
+			if (begin != 0)
+				return null;
+		} else
+			begin += 2;
+
+		var end = document.cookie.indexOf(";", begin);
+
+		if (end == -1)
+			end = dc.length;
+
+		return unescape(dc.substring(begin + prefix.length, end));
+	},
+
+	_resizeTo : function(inst, w, h, set_w) {
+		var editorContainer = document.getElementById(inst.editorId + '_parent');
+		var tableElm = editorContainer.firstChild;
+		var iframe = inst.iframeElement;
+
+		if (w == null || w == "null") {
+			set_w = false;
+			w = 0;
+		}
+
+		if (h == null || h == "null")
+			return;
+
+		w = parseInt(w);
+		h = parseInt(h);
+
+		if (tinyMCE.isGecko) {
+			w += 2;
+			h += 2;
+		}
+
+		var dx = w - tableElm.clientWidth;
+		var dy = h - tableElm.clientHeight;
+
+		w = w < 1 ? 30 : w;
+		h = h < 1 ? 30 : h;
+
+		if (set_w)
+			tableElm.style.width = w + "px";
+
+		tableElm.style.height = h + "px";
+
+		iw = iframe.clientWidth + dx;
+		ih = iframe.clientHeight + dy;
+
+		iw = iw < 1 ? 30 : iw;
+		ih = ih < 1 ? 30 : ih;
+
+		if (tinyMCE.isGecko) {
+			iw -= 2;
+			ih -= 2;
+		}
+
+		if (set_w)
+			iframe.style.width = iw + "px";
+
+		iframe.style.height = ih + "px";
+
+		// Is it to small, make it bigger again
+		if (set_w) {
+			var tableBodyElm = tableElm.firstChild;
+			var minIframeWidth = tableBodyElm.scrollWidth;
+			if (inst.iframeElement.clientWidth < minIframeWidth) {
+				dx = minIframeWidth - inst.iframeElement.clientWidth;
+
+				inst.iframeElement.style.width = (iw + dx) + "px";
+			}
+		}
+	},
+
+	/**
+	 * Handles resizing events.
+	 */
+	_resizeEventHandler : function(e) {
+		var resizer = TinyMCE_AdvancedTheme._resizer;
+
+		// Do nothing
+		if (!resizer.resizing)
+			return;
+
+		e = typeof(e) == "undefined" ? window.event : e;
+
+		var dx = e.screenX - resizer.downX;
+		var dy = e.screenY - resizer.downY;
+		var resizeBox = resizer.resizeBox;
+		var editorId = resizer.editorId;
+
+		switch (e.type) {
+			case "mousemove":
+				var w, h;
+
+				w = resizer.width + dx;
+				h = resizer.height + dy;
+
+				w = w < 1 ? 1 : w;
+				h = h < 1 ? 1 : h;
+
+				if (resizer.horizontal)
+					resizeBox.style.width = w + "px";
+
+				resizeBox.style.height = h + "px";
+				break;
+
+			case "mouseup":
+				TinyMCE_AdvancedTheme._setResizing(e, editorId, false);
+				TinyMCE_AdvancedTheme._resizeTo(tinyMCE.getInstanceById(editorId), resizer.width + dx, resizer.height + dy, resizer.horizontal);
+
+				// Expire in a month
+				if (tinyMCE.getParam("theme_advanced_resizing_use_cookie", true)) {
+					var expires = new Date();
+					expires.setTime(expires.getTime() + 3600000 * 24 * 30);
+
+					// Set the cookies
+					TinyMCE_AdvancedTheme._setCookie("TinyMCE_" + editorId + "_width", "" + (resizer.horizontal ? resizer.width + dx : ""), expires);
+					TinyMCE_AdvancedTheme._setCookie("TinyMCE_" + editorId + "_height", "" + (resizer.height + dy), expires);
+				}
+				break;
+		}
+	},
+
+	/**
+	 * Starts/stops the editor resizing.
+	 */
+	_setResizing : function(e, editor_id, state) {
+		e = typeof(e) == "undefined" ? window.event : e;
+
+		var resizer = TinyMCE_AdvancedTheme._resizer;
+		var editorContainer = document.getElementById(editor_id + '_parent');
+		var editorArea = document.getElementById(editor_id + '_parent').firstChild;
+		var resizeBox = document.getElementById(editor_id + '_resize_box');
+		var inst = tinyMCE.getInstanceById(editor_id);
+
+		if (state) {
+			// Place box over editor area
+			var width = editorArea.clientWidth;
+			var height = editorArea.clientHeight;
+
+			resizeBox.style.width = width + "px";
+			resizeBox.style.height = height + "px";
+
+			resizer.iframeWidth = inst.iframeElement.clientWidth;
+			resizer.iframeHeight = inst.iframeElement.clientHeight;
+
+			// Hide editor and show resize box
+			editorArea.style.display = "none";
+			resizeBox.style.display = "block";
+
+			// Add event handlers, only once
+			if (!resizer.eventHandlers) {
+				if (tinyMCE.isMSIE)
+					tinyMCE.addEvent(document, "mousemove", TinyMCE_AdvancedTheme._resizeEventHandler);
+				else
+					tinyMCE.addEvent(window, "mousemove", TinyMCE_AdvancedTheme._resizeEventHandler);
+
+				tinyMCE.addEvent(document, "mouseup", TinyMCE_AdvancedTheme._resizeEventHandler);
+
+				resizer.eventHandlers = true;
+			}
+
+			resizer.resizing = true;
+			resizer.downX = e.screenX;
+			resizer.downY = e.screenY;
+			resizer.width = parseInt(resizeBox.style.width);
+			resizer.height = parseInt(resizeBox.style.height);
+			resizer.editorId = editor_id;
+			resizer.resizeBox = resizeBox;
+			resizer.horizontal = tinyMCE.getParam("theme_advanced_resize_horizontal", true);
+		} else {
+			resizer.resizing = false;
+			resizeBox.style.display = "none";
+			editorArea.style.display = tinyMCE.isMSIE && !tinyMCE.isOpera ? "block" : "table";
+			tinyMCE.execCommand('mceResetDesignMode');
+		}
+	},
+
+	_insertImage : function(src, alt, border, hspace, vspace, width, height, align, title, onmouseover, onmouseout) {
+		tinyMCE.execCommand('mceBeginUndoLevel');
+
+		if (src == "")
+			return;
+
+		if (!tinyMCE.imgElement && tinyMCE.isSafari) {
+			var html = "";
+
+			html += '<img src="' + src + '" alt="' + alt + '"';
+			html += ' border="' + border + '" hspace="' + hspace + '"';
+			html += ' vspace="' + vspace + '" width="' + width + '"';
+			html += ' height="' + height + '" align="' + align + '" title="' + title + '" onmouseover="' + onmouseover + '" onmouseout="' + onmouseout + '" />';
+
+			tinyMCE.execCommand("mceInsertContent", false, html);
+		} else {
+			if (!tinyMCE.imgElement && tinyMCE.selectedInstance) {
+				if (tinyMCE.isSafari)
+					tinyMCE.execCommand("mceInsertContent", false, '<img src="' + tinyMCE.uniqueURL + '" />');
+				else
+					tinyMCE.selectedInstance.contentDocument.execCommand("insertimage", false, tinyMCE.uniqueURL);
+
+				tinyMCE.imgElement = tinyMCE.getElementByAttributeValue(tinyMCE.selectedInstance.contentDocument.body, "img", "src", tinyMCE.uniqueURL);
+			}
+		}
+
+		if (tinyMCE.imgElement) {
+			var needsRepaint = false;
+			var msrc = src;
+
+			src = eval(tinyMCE.settings['urlconverter_callback'] + "(src, tinyMCE.imgElement);");
+
+			if (tinyMCE.getParam('convert_urls'))
+				msrc = src;
+
+			if (onmouseover && onmouseover != "")
+				onmouseover = "this.src='" + eval(tinyMCE.settings['urlconverter_callback'] + "(onmouseover, tinyMCE.imgElement);") + "';";
+
+			if (onmouseout && onmouseout != "")
+				onmouseout = "this.src='" + eval(tinyMCE.settings['urlconverter_callback'] + "(onmouseout, tinyMCE.imgElement);") + "';";
+
+			// Use alt as title if it's undefined
+			if (typeof(title) == "undefined")
+				title = alt;
+
+			if (width != tinyMCE.imgElement.getAttribute("width") || height != tinyMCE.imgElement.getAttribute("height") || align != tinyMCE.imgElement.getAttribute("align"))
+				needsRepaint = true;
+
+			tinyMCE.setAttrib(tinyMCE.imgElement, 'src', src);
+			tinyMCE.setAttrib(tinyMCE.imgElement, 'mce_src', msrc);
+			tinyMCE.setAttrib(tinyMCE.imgElement, 'alt', alt);
+			tinyMCE.setAttrib(tinyMCE.imgElement, 'title', title);
+			tinyMCE.setAttrib(tinyMCE.imgElement, 'align', align);
+			tinyMCE.setAttrib(tinyMCE.imgElement, 'border', border, true);
+			tinyMCE.setAttrib(tinyMCE.imgElement, 'hspace', hspace, true);
+			tinyMCE.setAttrib(tinyMCE.imgElement, 'vspace', vspace, true);
+			tinyMCE.setAttrib(tinyMCE.imgElement, 'width', width, true);
+			tinyMCE.setAttrib(tinyMCE.imgElement, 'height', height, true);
+			tinyMCE.setAttrib(tinyMCE.imgElement, 'onmouseover', onmouseover);
+			tinyMCE.setAttrib(tinyMCE.imgElement, 'onmouseout', onmouseout);
+
+			// Fix for bug #989846 - Image resize bug
+			if (width && width != "")
+				tinyMCE.imgElement.style.pixelWidth = width;
+
+			if (height && height != "")
+				tinyMCE.imgElement.style.pixelHeight = height;
+
+			if (needsRepaint)
+				tinyMCE.selectedInstance.repaint();
+		}
+
+		tinyMCE.execCommand('mceEndUndoLevel');
+	},
+
+	_insertLink : function(href, target, title, onclick, style_class) {
+		tinyMCE.execCommand('mceBeginUndoLevel');
+
+		if (tinyMCE.selectedInstance && tinyMCE.selectedElement && tinyMCE.selectedElement.nodeName.toLowerCase() == "img") {
+			var doc = tinyMCE.selectedInstance.getDoc();
+			var linkElement = tinyMCE.getParentElement(tinyMCE.selectedElement, "a");
+			var newLink = false;
+
+			if (!linkElement) {
+				linkElement = doc.createElement("a");
+				newLink = true;
+			}
+
+			var mhref = href;
+			var thref = eval(tinyMCE.settings['urlconverter_callback'] + "(href, linkElement);");
+			mhref = tinyMCE.getParam('convert_urls') ? href : mhref;
+
+			tinyMCE.setAttrib(linkElement, 'href', thref);
+			tinyMCE.setAttrib(linkElement, 'mce_href', mhref);
+			tinyMCE.setAttrib(linkElement, 'target', target);
+			tinyMCE.setAttrib(linkElement, 'title', title);
+			tinyMCE.setAttrib(linkElement, 'onclick', onclick);
+			tinyMCE.setAttrib(linkElement, 'class', style_class);
+
+			if (newLink) {
+				linkElement.appendChild(tinyMCE.selectedElement.cloneNode(true));
+				tinyMCE.selectedElement.parentNode.replaceChild(linkElement, tinyMCE.selectedElement);
+			}
+
+			return;
+		}
+
+		if (!tinyMCE.linkElement && tinyMCE.selectedInstance) {
+			if (tinyMCE.isSafari) {
+				tinyMCE.execCommand("mceInsertContent", false, '<a href="' + tinyMCE.uniqueURL + '">' + tinyMCE.selectedInstance.selection.getSelectedHTML() + '</a>');
+			} else
+				tinyMCE.selectedInstance.contentDocument.execCommand("createlink", false, tinyMCE.uniqueURL);
+
+			tinyMCE.linkElement = tinyMCE.getElementByAttributeValue(tinyMCE.selectedInstance.contentDocument.body, "a", "href", tinyMCE.uniqueURL);
+
+			var elementArray = tinyMCE.getElementsByAttributeValue(tinyMCE.selectedInstance.contentDocument.body, "a", "href", tinyMCE.uniqueURL);
+
+			for (var i=0; i<elementArray.length; i++) {
+				var mhref = href;
+				var thref = eval(tinyMCE.settings['urlconverter_callback'] + "(href, elementArray[i]);");
+				mhref = tinyMCE.getParam('convert_urls') ? href : mhref;
+
+				tinyMCE.setAttrib(elementArray[i], 'href', thref);
+				tinyMCE.setAttrib(elementArray[i], 'mce_href', mhref);
+				tinyMCE.setAttrib(elementArray[i], 'target', target);
+				tinyMCE.setAttrib(elementArray[i], 'title', title);
+				tinyMCE.setAttrib(elementArray[i], 'onclick', onclick);
+				tinyMCE.setAttrib(elementArray[i], 'class', style_class);
+			}
+
+			tinyMCE.linkElement = elementArray[0];
+		}
+
+		if (tinyMCE.linkElement) {
+			var mhref = href;
+			href = eval(tinyMCE.settings['urlconverter_callback'] + "(href, tinyMCE.linkElement);");
+			mhref = tinyMCE.getParam('convert_urls') ? href : mhref;
+
+			tinyMCE.setAttrib(tinyMCE.linkElement, 'href', href);
+			tinyMCE.setAttrib(tinyMCE.linkElement, 'mce_href', mhref);
+			tinyMCE.setAttrib(tinyMCE.linkElement, 'target', target);
+			tinyMCE.setAttrib(tinyMCE.linkElement, 'title', title);
+			tinyMCE.setAttrib(tinyMCE.linkElement, 'onclick', onclick);
+			tinyMCE.setAttrib(tinyMCE.linkElement, 'class', style_class);
+		}
+
+		tinyMCE.execCommand('mceEndUndoLevel');
+	}
+};
+
+tinyMCE.addTheme("advanced", TinyMCE_AdvancedTheme);
+
+// Add default buttons maps for advanced theme and all internal plugins
+tinyMCE.addButtonMap(TinyMCE_AdvancedTheme._buttonMap);

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/image.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/image.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/image.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,100 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+	<title>{$lang_insert_image_title}</title>
+	<script language="javascript" type="text/javascript" src="../../tiny_mce_popup.js"></script>
+	<script language="javascript" type="text/javascript" src="../../utils/mctabs.js"></script>
+	<script language="javascript" type="text/javascript" src="../../utils/form_utils.js"></script>
+	<script language="javascript" type="text/javascript" src="jscripts/image.js"></script>
+	<base target="_self" />
+</head>
+<body id="image" onload="tinyMCEPopup.executeOnLoad('init();');" style="display: none">
+<form onsubmit="insertImage();return false;" action="#">
+	<div class="tabs">
+		<ul>
+			<li id="general_tab" class="current"><span><a href="javascript:mcTabs.displayTab('general_tab','general_panel');" onmousedown="return false;">{$lang_insert_image_title}</a></span></li>
+		</ul>
+	</div>
+
+	<div class="panel_wrapper">
+		<div id="general_panel" class="panel current">
+     <table border="0" cellpadding="4" cellspacing="0">
+          <tr>
+            <td nowrap="nowrap"><label for="src">{$lang_insert_image_src}</label></td>
+            <td><table border="0" cellspacing="0" cellpadding="0">
+                <tr>
+                  <td><input id="src" name="src" type="text" value="" style="width: 200px" onchange="getImageData();"></td>
+                  <td id="srcbrowsercontainer">&nbsp;</td>
+                </tr>
+              </table></td>
+          </tr>
+		  <!-- Image list -->
+		  <script language="javascript">
+			if (typeof(tinyMCEImageList) != "undefined" && tinyMCEImageList.length > 0) {
+				var html = "";
+
+				html += '<tr><td><label for="image_list">{$lang_image_list}</label></td>';
+				html += '<td><select id="image_list" name="image_list" style="width: 200px" onchange="this.form.src.value=this.options[this.selectedIndex].value;resetImageData();getImageData();">';
+				html += '<option value="">---</option>';
+
+				for (var i=0; i<tinyMCEImageList.length; i++)
+					html += '<option value="' + tinyMCEImageList[i][1] + '">' + tinyMCEImageList[i][0] + '</option>';
+
+				html += '</select></td></tr>';
+
+				document.write(html);
+			}
+		  </script>
+		  <!-- /Image list -->
+          <tr>
+            <td nowrap="nowrap"><label for="alt">{$lang_insert_image_alt}</label></td>
+            <td><input id="alt" name="alt" type="text" value="" style="width: 200px"></td>
+          </tr>
+          <tr>
+            <td nowrap="nowrap"><label for="align">{$lang_insert_image_align}</label></td>
+            <td><select id="align" name="align">
+                <option value="">{$lang_insert_image_align_default}</option>
+                <option value="baseline">{$lang_insert_image_align_baseline}</option>
+                <option value="top">{$lang_insert_image_align_top}</option>
+                <option value="middle">{$lang_insert_image_align_middle}</option>
+                <option value="bottom">{$lang_insert_image_align_bottom}</option>
+                <option value="texttop">{$lang_insert_image_align_texttop}</option>
+                <option value="absmiddle">{$lang_insert_image_align_absmiddle}</option>
+                <option value="absbottom">{$lang_insert_image_align_absbottom}</option>
+                <option value="left">{$lang_insert_image_align_left}</option>
+                <option value="right">{$lang_insert_image_align_right}</option>
+              </select></td>
+          </tr>
+          <tr>
+            <td nowrap="nowrap"><label for="width">{$lang_insert_image_dimensions}</label></td>
+            <td><input id="width" name="width" type="text" value="" size="3" maxlength="3">
+              x
+              <input id="height" name="height" type="text" value="" size="3" maxlength="3"></td>
+          </tr>
+          <tr>
+            <td nowrap="nowrap"><label for="border">{$lang_insert_image_border}</label></td>
+            <td><input id="border" name="border" type="text" value="" size="3" maxlength="3"></td>
+          </tr>
+          <tr>
+            <td nowrap="nowrap"><label for="vspace">{$lang_insert_image_vspace}</label></td>
+            <td><input id="vspace" name="vspace" type="text" value="" size="3" maxlength="3"></td>
+          </tr>
+          <tr>
+            <td nowrap="nowrap"><label for="hspace">{$lang_insert_image_hspace}</label></td>
+            <td><input id="hspace" name="hspace" type="text" value="" size="3" maxlength="3"></td>
+          </tr>
+        </table>
+		</div>
+	</div>
+
+	<div class="mceActionPanel">
+		<div style="float: left">
+			<input type="button" id="insert" name="insert" value="{$lang_insert}" onclick="insertImage();" />
+		</div>
+
+		<div style="float: right">
+			<input type="button" id="cancel" name="cancel" value="{$lang_cancel}" onclick="tinyMCEPopup.close();" />
+		</div>
+	</div>
+</form>
+</body>
+</html>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/anchor.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/anchor.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/anchor_symbol.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/anchor_symbol.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/backcolor.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/backcolor.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_de_se.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_de_se.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_es.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_es.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_fr.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_fr.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_ru.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_ru.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_tw.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bold_tw.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/browse.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/browse.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bullist.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/bullist.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/button_menu.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/button_menu.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/buttons.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/buttons.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/cancel_button_bg.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/cancel_button_bg.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/charmap.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/charmap.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/cleanup.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/cleanup.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/close.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/close.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/code.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/code.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/color.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/color.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/copy.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/copy.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/custom_1.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/custom_1.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/cut.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/cut.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/forecolor.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/forecolor.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/help.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/help.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/hr.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/hr.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/image.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/image.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/indent.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/indent.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/insert_button_bg.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/insert_button_bg.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic_de_se.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic_de_se.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic_es.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic_es.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic_ru.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic_ru.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic_tw.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/italic_tw.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/justifycenter.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/justifycenter.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/justifyfull.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/justifyfull.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/justifyleft.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/justifyleft.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/justifyright.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/justifyright.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/link.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/link.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/menu_check.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/menu_check.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/newdocument.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/newdocument.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/numlist.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/numlist.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/opacity.png
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/opacity.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/outdent.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/outdent.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/paste.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/paste.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/redo.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/redo.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/removeformat.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/removeformat.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/separator.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/separator.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/spacer.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/spacer.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/statusbar_resize.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/statusbar_resize.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/strikethrough.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/strikethrough.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/sub.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/sub.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/sup.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/sup.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline_es.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline_es.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline_fr.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline_fr.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline_ru.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline_ru.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline_tw.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/underline_tw.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/undo.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/undo.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/unlink.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/unlink.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/visualaid.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/visualaid.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tab_bg.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tab_bg.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tab_end.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tab_end.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tab_sel_bg.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tab_sel_bg.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tab_sel_end.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tab_sel_end.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tabs_bg.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/images/xp/tabs_bg.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/about.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/about.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/about.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,75 @@
+function init() {
+	var inst;
+
+	tinyMCEPopup.resizeToInnerSize();
+	inst = tinyMCE.selectedInstance;
+
+	// Give FF some time
+	window.setTimeout('insertHelpIFrame();', 10);
+
+	var tcont = document.getElementById('plugintablecontainer');
+	var plugins = tinyMCE.getParam('plugins', '', true, ',');
+	if (plugins.length == 0)
+		document.getElementById('plugins_tab').style.display = 'none';
+
+	var html = "";
+	html += '<table id="plugintable">';
+	html += '<thead>';
+	html += '<tr>';
+	html += '<td>' + tinyMCE.getLang('lang_plugin') + '</td>';
+	html += '<td>' + tinyMCE.getLang('lang_author') + '</td>';
+	html += '<td>' + tinyMCE.getLang('lang_version') + '</td>';
+	html += '</tr>';
+	html += '</thead>';
+	html += '<tbody>';
+
+	for (var i=0; i<inst.plugins.length; i++) {
+		var info = getPluginInfo(inst.plugins[i]);
+
+		html += '<tr>';
+
+		if (info.infourl != null && info.infourl != '')
+			html += '<td width="50%" title="' + plugins[i] + '"><a href="' + info.infourl + '" target="mceplugin">' + info.longname + '</a></td>';
+		else
+			html += '<td width="50%" title="' + plugins[i] + '">' + info.longname + '</td>';
+
+		if (info.authorurl != null && info.authorurl != '')
+			html += '<td width="35%"><a href="' + info.authorurl + '" target="mceplugin">' + info.author + '</a></td>';
+		else
+			html += '<td width="35%">' + info.author + '</td>';
+
+		html += '<td width="15%">' + info.version + '</td>';
+		html += '</tr>';
+	}
+
+	html += '</tbody>';
+	html += '</table>';
+
+	tcont.innerHTML = html;
+}
+
+function getPluginInfo(name) {
+	if (tinyMCE.plugins[name].getInfo)
+		return tinyMCE.plugins[name].getInfo();
+
+	return {
+		longname : name,
+		authorurl : '',
+		infourl : '',
+		author : '--',
+		version : '--'
+	};
+}
+
+function insertHelpIFrame() {
+	var html = '<iframe width="100%" height="300" src="' + tinyMCE.themeURL + "/docs/" + tinyMCE.settings['docs_language'] + "/index.htm" + '"></iframe>';
+
+	document.getElementById('iframecontainer').innerHTML = html;
+
+	html = '';
+	html += '<a href="http://www.moxiecode.com" target="_blank"><img src="http://tinymce.moxiecode.com/images/gotmoxie.png" alt="Got Moxie?" border="0" /></a> ';
+	html += '<a href="http://sourceforge.net/projects/tinymce/" target="_blank"><img src="http://sourceforge.net/sflogo.php?group_id=103281" alt="Hosted By Sourceforge" border="0" /></a> ';
+	html += '<a href="http://www.freshmeat.net/projects/tinymce" target="_blank"><img src="http://tinymce.moxiecode.com/images/fm.gif" alt="Also on freshmeat" border="0" /></a> ';
+
+	document.getElementById('buttoncontainer').innerHTML = html;
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/anchor.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/anchor.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/anchor.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,74 @@
+var action, element;
+
+function init() {
+	tinyMCEPopup.resizeToInnerSize();
+
+	var inst = tinyMCE.getInstanceById(tinyMCE.getWindowArg('editor_id'));
+	var anchor = tinyMCE.getParentElement(inst.getFocusElement(), "a", "name");
+	var img = inst.getFocusElement();
+	action = 'insert';
+
+	if (anchor != null) {
+		element = anchor;
+		action = "update";
+	}
+
+	if (tinyMCE.getAttrib(img, "class") == "mceItemAnchor") {
+		element = img;
+		action = "update";
+	}
+
+	if (action == "update")
+		document.forms[0].anchorName.value = element.nodeName == "IMG" ? element.getAttribute("title") : element.getAttribute("name");
+
+	document.forms[0].insert.value = tinyMCE.getLang('lang_' + action, 'Insert', true);
+}
+
+function insertAnchor() {
+	var inst = tinyMCE.getInstanceById(tinyMCE.getWindowArg('editor_id'));
+	var name = document.forms[0].anchorName.value, e;
+
+	tinyMCEPopup.execCommand("mceBeginUndoLevel");
+
+	if (action == "update") {
+		if (element.nodeName == "IMG")
+			element.setAttribute("title", name);
+		else
+			element.setAttribute("name", name);
+	} else {
+		var rng = inst.getRng();
+
+		if (rng.collapse)
+			rng.collapse(false);
+
+		name = name.replace(/&/g, '&amp;');
+		name = name.replace(/\"/g, '&quot;');
+		name = name.replace(/</g, '&lt;');
+		name = name.replace(/>/g, '&gt;');
+
+		// Fix for bug #1447335
+		if (tinyMCE.isGecko)
+			html = '<a id="mceNewAnchor" name="' + name + '"></a>';
+		else
+			html = '<a name="' + name + '"></a>';
+
+		tinyMCEPopup.execCommand("mceInsertContent", false, html);
+
+		// Fix for bug #1447335 force cursor after the anchor element
+		if (tinyMCE.isGecko) {
+			e = inst.getDoc().getElementById('mceNewAnchor');
+
+			if (e) {
+				inst.selection.selectNode(e, true, false, false);
+				e.removeAttribute('id');
+			}
+		}
+
+		tinyMCE.handleVisualAid(inst.getBody(), true, inst.visualAid, inst);
+	}
+
+	tinyMCEPopup.execCommand("mceEndUndoLevel");
+
+	tinyMCE.triggerNodeChange();
+	tinyMCEPopup.close();
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/charmap.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/charmap.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/charmap.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,326 @@
+function init() {
+	tinyMCEPopup.resizeToInnerSize();
+}
+
+var charmap = new Array();
+
+// for mor details please see w3c.org
+// now here is the complete list ;)
+
+charmap = [
+	['&nbsp;',    '&#160;',  true, 'no-break space'],
+	['&amp;',     '&#38;',   true, 'ampersand'],
+	['&quot;',    '&#34;',   true, 'quotation mark'],
+// finance
+	['&cent;',    '&#162;',  true, 'cent sign'],
+	['&euro;',    '&#8364;', true, 'euro sign'],
+	['&pound;',   '&#163;',  true, 'pound sign'],
+	['&yen;',     '&#165;',  true, 'yen sign'],
+// signs
+	['&copy;',    '&#169;',  true, 'copyright sign'],
+	['&reg;',     '&#174;',  true, 'registered sign'],
+	['&trade;',   '&#8482;', true, 'trade mark sign'],
+	['&permil;',  '&#8240;', true, 'per mille sign'],
+	['&micro;',   '&#181;',  true, 'micro sign'],
+	['&middot;',  '&#183;',  true, 'middle dot'],
+	['&bull;',    '&#8226;', true, 'bullet'],
+	['&hellip;',  '&#8230;', true, 'three dot leader'],
+	['&prime;',   '&#8242;', true, 'minutes / feet'],
+	['&Prime;',   '&#8243;', true, 'seconds / inches'],
+	['&sect;',    '&#167;',  true, 'section sign'],
+	['&para;',    '&#182;',  true, 'paragraph sign'],
+	['&szlig;',   '&#223;',  true, 'sharp s / ess-zed'],
+// quotations
+	['&lsaquo;',  '&#8249;', true, 'single left-pointing angle quotation mark'],
+	['&rsaquo;',  '&#8250;', true, 'single right-pointing angle quotation mark'],
+	['&laquo;',   '&#171;',  true, 'left pointing guillemet'],
+	['&raquo;',   '&#187;',  true, 'right pointing guillemet'],
+	['&lsquo;',   '&#8216;', true, 'left single quotation mark'],
+	['&rsquo;',   '&#8217;', true, 'right single quotation mark'],
+	['&ldquo;',   '&#8220;', true, 'left double quotation mark'],
+	['&rdquo;',   '&#8221;', true, 'right double quotation mark'],
+	['&sbquo;',   '&#8218;', true, 'single low-9 quotation mark'],
+	['&bdquo;',   '&#8222;', true, 'double low-9 quotation mark'],
+	['&lt;',      '&#60;',   true, 'less-than sign'],
+	['&gt;',      '&#62;',   true, 'greater-than sign'],
+	['&le;',      '&#8804;', true, 'less-than or equal to'],
+	['&ge;',      '&#8805;', true, 'greater-than or equal to'],
+	['&ndash;',   '&#8211;', true, 'en dash'],
+	['&mdash;',   '&#8212;', true, 'em dash'],
+	['&macr;',    '&#175;',  true, 'macron'],
+	['&oline;',   '&#8254;', true, 'overline'],
+	['&curren;',  '&#164;',  true, 'currency sign'],
+	['&brvbar;',  '&#166;',  true, 'broken bar'],
+	['&uml;',     '&#168;',  true, 'diaeresis'],
+	['&iexcl;',   '&#161;',  true, 'inverted exclamation mark'],
+	['&iquest;',  '&#191;',  true, 'turned question mark'],
+	['&circ;',    '&#710;',  true, 'circumflex accent'],
+	['&tilde;',   '&#732;',  true, 'small tilde'],
+	['&deg;',     '&#176;',  true, 'degree sign'],
+	['&minus;',   '&#8722;', true, 'minus sign'],
+	['&plusmn;',  '&#177;',  true, 'plus-minus sign'],
+	['&divide;',  '&#247;',  true, 'division sign'],
+	['&frasl;',   '&#8260;', true, 'fraction slash'],
+	['&times;',   '&#215;',  true, 'multiplication sign'],
+	['&sup1;',    '&#185;',  true, 'superscript one'],
+	['&sup2;',    '&#178;',  true, 'superscript two'],
+	['&sup3;',    '&#179;',  true, 'superscript three'],
+	['&frac14;',  '&#188;',  true, 'fraction one quarter'],
+	['&frac12;',  '&#189;',  true, 'fraction one half'],
+	['&frac34;',  '&#190;',  true, 'fraction three quarters'],
+// math / logical
+	['&fnof;',    '&#402;',  true, 'function / florin'],
+	['&int;',     '&#8747;', true, 'integral'],
+	['&sum;',     '&#8721;', true, 'n-ary sumation'],
+	['&infin;',   '&#8734;', true, 'infinity'],
+	['&radic;',   '&#8730;', true, 'square root'],
+	['&sim;',     '&#8764;', false,'similar to'],
+	['&cong;',    '&#8773;', false,'approximately equal to'],
+	['&asymp;',   '&#8776;', true, 'almost equal to'],
+	['&ne;',      '&#8800;', true, 'not equal to'],
+	['&equiv;',   '&#8801;', true, 'identical to'],
+	['&isin;',    '&#8712;', false,'element of'],
+	['&notin;',   '&#8713;', false,'not an element of'],
+	['&ni;',      '&#8715;', false,'contains as member'],
+	['&prod;',    '&#8719;', true, 'n-ary product'],
+	['&and;',     '&#8743;', false,'logical and'],
+	['&or;',      '&#8744;', false,'logical or'],
+	['&not;',     '&#172;',  true, 'not sign'],
+	['&cap;',     '&#8745;', true, 'intersection'],
+	['&cup;',     '&#8746;', false,'union'],
+	['&part;',    '&#8706;', true, 'partial differential'],
+	['&forall;',  '&#8704;', false,'for all'],
+	['&exist;',   '&#8707;', false,'there exists'],
+	['&empty;',   '&#8709;', false,'diameter'],
+	['&nabla;',   '&#8711;', false,'backward difference'],
+	['&lowast;',  '&#8727;', false,'asterisk operator'],
+	['&prop;',    '&#8733;', false,'proportional to'],
+	['&ang;',     '&#8736;', false,'angle'],
+// undefined
+	['&acute;',   '&#180;',  true, 'acute accent'],
+	['&cedil;',   '&#184;',  true, 'cedilla'],
+	['&ordf;',    '&#170;',  true, 'feminine ordinal indicator'],
+	['&ordm;',    '&#186;',  true, 'masculine ordinal indicator'],
+	['&dagger;',  '&#8224;', true, 'dagger'],
+	['&Dagger;',  '&#8225;', true, 'double dagger'],
+// alphabetical special chars
+	['&Agrave;',  '&#192;',  true, 'A - grave'],
+	['&Aacute;',  '&#193;',  true, 'A - acute'],
+	['&Acirc;',   '&#194;',  true, 'A - circumflex'],
+	['&Atilde;',  '&#195;',  true, 'A - tilde'],
+	['&Auml;',    '&#196;',  true, 'A - diaeresis'],
+	['&Aring;',   '&#197;',  true, 'A - ring above'],
+	['&AElig;',   '&#198;',  true, 'ligature AE'],
+	['&Ccedil;',  '&#199;',  true, 'C - cedilla'],
+	['&Egrave;',  '&#200;',  true, 'E - grave'],
+	['&Eacute;',  '&#201;',  true, 'E - acute'],
+	['&Ecirc;',   '&#202;',  true, 'E - circumflex'],
+	['&Euml;',    '&#203;',  true, 'E - diaeresis'],
+	['&Igrave;',  '&#204;',  true, 'I - grave'],
+	['&Iacute;',  '&#205;',  true, 'I - acute'],
+	['&Icirc;',   '&#206;',  true, 'I - circumflex'],
+	['&Iuml;',    '&#207;',  true, 'I - diaeresis'],
+	['&ETH;',     '&#208;',  true, 'ETH'],
+	['&Ntilde;',  '&#209;',  true, 'N - tilde'],
+	['&Ograve;',  '&#210;',  true, 'O - grave'],
+	['&Oacute;',  '&#211;',  true, 'O - acute'],
+	['&Ocirc;',   '&#212;',  true, 'O - circumflex'],
+	['&Otilde;',  '&#213;',  true, 'O - tilde'],
+	['&Ouml;',    '&#214;',  true, 'O - diaeresis'],
+	['&Oslash;',  '&#216;',  true, 'O - slash'],
+	['&OElig;',   '&#338;',  true, 'ligature OE'],
+	['&Scaron;',  '&#352;',  true, 'S - caron'],
+	['&Ugrave;',  '&#217;',  true, 'U - grave'],
+	['&Uacute;',  '&#218;',  true, 'U - acute'],
+	['&Ucirc;',   '&#219;',  true, 'U - circumflex'],
+	['&Uuml;',    '&#220;',  true, 'U - diaeresis'],
+	['&Yacute;',  '&#221;',  true, 'Y - acute'],
+	['&Yuml;',    '&#376;',  true, 'Y - diaeresis'],
+	['&THORN;',   '&#222;',  true, 'THORN'],
+	['&agrave;',  '&#224;',  true, 'a - grave'],
+	['&aacute;',  '&#225;',  true, 'a - acute'],
+	['&acirc;',   '&#226;',  true, 'a - circumflex'],
+	['&atilde;',  '&#227;',  true, 'a - tilde'],
+	['&auml;',    '&#228;',  true, 'a - diaeresis'],
+	['&aring;',   '&#229;',  true, 'a - ring above'],
+	['&aelig;',   '&#230;',  true, 'ligature ae'],
+	['&ccedil;',  '&#231;',  true, 'c - cedilla'],
+	['&egrave;',  '&#232;',  true, 'e - grave'],
+	['&eacute;',  '&#233;',  true, 'e - acute'],
+	['&ecirc;',   '&#234;',  true, 'e - circumflex'],
+	['&euml;',    '&#235;',  true, 'e - diaeresis'],
+	['&igrave;',  '&#236;',  true, 'i - grave'],
+	['&iacute;',  '&#237;',  true, 'i - acute'],
+	['&icirc;',   '&#238;',  true, 'i - circumflex'],
+	['&iuml;',    '&#239;',  true, 'i - diaeresis'],
+	['&eth;',     '&#240;',  true, 'eth'],
+	['&ntilde;',  '&#241;',  true, 'n - tilde'],
+	['&ograve;',  '&#242;',  true, 'o - grave'],
+	['&oacute;',  '&#243;',  true, 'o - acute'],
+	['&ocirc;',   '&#244;',  true, 'o - circumflex'],
+	['&otilde;',  '&#245;',  true, 'o - tilde'],
+	['&ouml;',    '&#246;',  true, 'o - diaeresis'],
+	['&oslash;',  '&#248;',  true, 'o slash'],
+	['&oelig;',   '&#339;',  true, 'ligature oe'],
+	['&scaron;',  '&#353;',  true, 's - caron'],
+	['&ugrave;',  '&#249;',  true, 'u - grave'],
+	['&uacute;',  '&#250;',  true, 'u - acute'],
+	['&ucirc;',   '&#251;',  true, 'u - circumflex'],
+	['&uuml;',    '&#252;',  true, 'u - diaeresis'],
+	['&yacute;',  '&#253;',  true, 'y - acute'],
+	['&thorn;',   '&#254;',  true, 'thorn'],
+	['&yuml;',    '&#255;',  true, 'y - diaeresis'],
+    ['&Alpha;',   '&#913;',  true, 'Alpha'],
+	['&Beta;',    '&#914;',  true, 'Beta'],
+	['&Gamma;',   '&#915;',  true, 'Gamma'],
+	['&Delta;',   '&#916;',  true, 'Delta'],
+	['&Epsilon;', '&#917;',  true, 'Epsilon'],
+	['&Zeta;',    '&#918;',  true, 'Zeta'],
+	['&Eta;',     '&#919;',  true, 'Eta'],
+	['&Theta;',   '&#920;',  true, 'Theta'],
+	['&Iota;',    '&#921;',  true, 'Iota'],
+	['&Kappa;',   '&#922;',  true, 'Kappa'],
+	['&Lambda;',  '&#923;',  true, 'Lambda'],
+	['&Mu;',      '&#924;',  true, 'Mu'],
+	['&Nu;',      '&#925;',  true, 'Nu'],
+	['&Xi;',      '&#926;',  true, 'Xi'],
+	['&Omicron;', '&#927;',  true, 'Omicron'],
+	['&Pi;',      '&#928;',  true, 'Pi'],
+	['&Rho;',     '&#929;',  true, 'Rho'],
+	['&Sigma;',   '&#931;',  true, 'Sigma'],
+	['&Tau;',     '&#932;',  true, 'Tau'],
+	['&Upsilon;', '&#933;',  true, 'Upsilon'],
+	['&Phi;',     '&#934;',  true, 'Phi'],
+	['&Chi;',     '&#935;',  true, 'Chi'],
+	['&Psi;',     '&#936;',  true, 'Psi'],
+	['&Omega;',   '&#937;',  true, 'Omega'],
+	['&alpha;',   '&#945;',  true, 'alpha'],
+	['&beta;',    '&#946;',  true, 'beta'],
+	['&gamma;',   '&#947;',  true, 'gamma'],
+	['&delta;',   '&#948;',  true, 'delta'],
+	['&epsilon;', '&#949;',  true, 'epsilon'],
+	['&zeta;',    '&#950;',  true, 'zeta'],
+	['&eta;',     '&#951;',  true, 'eta'],
+	['&theta;',   '&#952;',  true, 'theta'],
+	['&iota;',    '&#953;',  true, 'iota'],
+	['&kappa;',   '&#954;',  true, 'kappa'],
+	['&lambda;',  '&#955;',  true, 'lambda'],
+	['&mu;',      '&#956;',  true, 'mu'],
+	['&nu;',      '&#957;',  true, 'nu'],
+	['&xi;',      '&#958;',  true, 'xi'],
+	['&omicron;', '&#959;',  true, 'omicron'],
+	['&pi;',      '&#960;',  true, 'pi'],
+	['&rho;',     '&#961;',  true, 'rho'],
+	['&sigmaf;',  '&#962;',  true, 'final sigma'],
+	['&sigma;',   '&#963;',  true, 'sigma'],
+	['&tau;',     '&#964;',  true, 'tau'],
+	['&upsilon;', '&#965;',  true, 'upsilon'],
+	['&phi;',     '&#966;',  true, 'phi'],
+	['&chi;',     '&#967;',  true, 'chi'],
+	['&psi;',     '&#968;',  true, 'psi'],
+	['&omega;',   '&#969;',  true, 'omega'],
+// symbols
+	['&alefsym;', '&#8501;', false,'alef symbol'],
+	['&piv;',     '&#982;',  false,'pi symbol'],
+	['&real;',    '&#8476;', false,'real part symbol'],
+	['&thetasym;','&#977;',  false,'theta symbol'],
+	['&upsih;',   '&#978;',  false,'upsilon - hook symbol'],
+	['&weierp;',  '&#8472;', false,'Weierstrass p'],
+	['&image;',   '&#8465;', false,'imaginary part'],
+// arrows
+	['&larr;',    '&#8592;', true, 'leftwards arrow'],
+	['&uarr;',    '&#8593;', true, 'upwards arrow'],
+	['&rarr;',    '&#8594;', true, 'rightwards arrow'],
+	['&darr;',    '&#8595;', true, 'downwards arrow'],
+	['&harr;',    '&#8596;', true, 'left right arrow'],
+	['&crarr;',   '&#8629;', false,'carriage return'],
+	['&lArr;',    '&#8656;', false,'leftwards double arrow'],
+	['&uArr;',    '&#8657;', false,'upwards double arrow'],
+	['&rArr;',    '&#8658;', false,'rightwards double arrow'],
+	['&dArr;',    '&#8659;', false,'downwards double arrow'],
+	['&hArr;',    '&#8660;', false,'left right double arrow'],
+	['&there4;',  '&#8756;', false,'therefore'],
+	['&sub;',     '&#8834;', false,'subset of'],
+	['&sup;',     '&#8835;', false,'superset of'],
+	['&nsub;',    '&#8836;', false,'not a subset of'],
+	['&sube;',    '&#8838;', false,'subset of or equal to'],
+	['&supe;',    '&#8839;', false,'superset of or equal to'],
+	['&oplus;',   '&#8853;', false,'circled plus'],
+	['&otimes;',  '&#8855;', false,'circled times'],
+	['&perp;',    '&#8869;', false,'perpendicular'],
+	['&sdot;',    '&#8901;', false,'dot operator'],
+	['&lceil;',   '&#8968;', false,'left ceiling'],
+	['&rceil;',   '&#8969;', false,'right ceiling'],
+	['&lfloor;',  '&#8970;', false,'left floor'],
+	['&rfloor;',  '&#8971;', false,'right floor'],
+	['&lang;',    '&#9001;', false,'left-pointing angle bracket'],
+	['&rang;',    '&#9002;', false,'right-pointing angle bracket'],
+	['&loz;',     '&#9674;', true,'lozenge'],
+	['&spades;',  '&#9824;', false,'black spade suit'],
+	['&clubs;',   '&#9827;', true, 'black club suit'],
+	['&hearts;',  '&#9829;', true, 'black heart suit'],
+	['&diams;',   '&#9830;', true, 'black diamond suit'],
+	['&ensp;',    '&#8194;', false,'en space'],
+	['&emsp;',    '&#8195;', false,'em space'],
+	['&thinsp;',  '&#8201;', false,'thin space'],
+	['&zwnj;',    '&#8204;', false,'zero width non-joiner'],
+	['&zwj;',     '&#8205;', false,'zero width joiner'],
+	['&lrm;',     '&#8206;', false,'left-to-right mark'],
+	['&rlm;',     '&#8207;', false,'right-to-left mark'],
+	['&shy;',     '&#173;',  false,'soft hyphen']
+];
+
+function renderCharMapHTML() {
+	var charsPerRow = 20, tdWidth=20, tdHeight=20;
+	var html = '<table border="0" cellspacing="1" cellpadding="0" width="' + (tdWidth*charsPerRow) + '"><tr height="' + tdHeight + '">';
+	var cols=-1;
+	for (var i=0; i<charmap.length; i++) {
+		if (charmap[i][2]==true) {
+			cols++;
+			html += ''
+				+ '<td width="' + tdWidth + '" height="' + tdHeight + '" class="charmap"'
+				+ ' onmouseover="this.className=\'charmapOver\';'
+				+ 'previewChar(\'' + charmap[i][1].substring(1,charmap[i][1].length) + '\',\'' + charmap[i][0].substring(1,charmap[i][0].length) + '\',\'' + charmap[i][3] + '\');"'
+				+ ' onmouseout="this.className=\'charmap\';"'
+				+ ' nowrap="nowrap" onclick="insertChar(\'' + charmap[i][1].substring(2,charmap[i][1].length-1) + '\');"><a style="text-decoration: none;" onfocus="previewChar(\'' + charmap[i][1].substring(1,charmap[i][1].length) + '\',\'' + charmap[i][0].substring(1,charmap[i][0].length) + '\',\'' + charmap[i][3] + '\');" href="javascript:insertChar(\'' + charmap[i][1].substring(2,charmap[i][1].length-1) + '\');" onclick="return false;" onmousedown="return false;" title="' + charmap[i][3] + '">'
+				+ charmap[i][1]
+				+ '</a></td>';
+			if ((cols+1) % charsPerRow == 0)
+				html += '</tr><tr height="' + tdHeight + '">';
+		}
+	 }
+	if (cols % charsPerRow > 0) {
+		var padd = charsPerRow - (cols % charsPerRow);
+		for (var i=0; i<padd-1; i++)
+			html += '<td width="' + tdWidth + '" height="' + tdHeight + '" class="charmap">&nbsp;</td>';
+	}
+	html += '</tr></table>';
+	document.write(html);
+}
+
+function insertChar(chr) {
+	tinyMCEPopup.execCommand('mceInsertContent', false, '&#' + chr + ';');
+
+	// Refocus in window
+	if (tinyMCEPopup.isWindow)
+		window.focus();
+
+	tinyMCEPopup.close();
+}
+
+function previewChar(codeA, codeB, codeN) {
+	var elmA = document.getElementById('codeA');
+	var elmB = document.getElementById('codeB');
+	var elmV = document.getElementById('codeV');
+	var elmN = document.getElementById('codeN');
+
+	if (codeA=='#160;') {
+		elmV.innerHTML = '__';
+	} else {
+		elmV.innerHTML = '&' + codeA;
+	}
+
+	elmB.innerHTML = '&amp;' + codeA;
+	elmA.innerHTML = '&amp;' + codeB;
+	elmN.innerHTML = codeN;
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/color_picker.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/color_picker.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/color_picker.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,108 @@
+function init() {
+	if (tinyMCE.isMSIE)
+		tinyMCEPopup.resizeToInnerSize();
+}
+
+function selectColor() {
+	var color = document.getElementById("selectedColorBox").value;
+
+	tinyMCEPopup.execCommand(tinyMCE.getWindowArg('command'), false, color);
+	tinyMCEPopup.close();
+}
+
+function showColor(color) {
+	document.getElementById("selectedColor").style.backgroundColor = color;
+	document.getElementById("selectedColorBox").value = color;
+}
+
+var colors = new Array(
+	"#000000","#000033","#000066","#000099","#0000cc","#0000ff","#330000","#330033",
+	"#330066","#330099","#3300cc","#3300ff","#660000","#660033","#660066","#660099",
+	"#6600cc","#6600ff","#990000","#990033","#990066","#990099","#9900cc","#9900ff",
+	"#cc0000","#cc0033","#cc0066","#cc0099","#cc00cc","#cc00ff","#ff0000","#ff0033",
+	"#ff0066","#ff0099","#ff00cc","#ff00ff","#003300","#003333","#003366","#003399",
+	"#0033cc","#0033ff","#333300","#333333","#333366","#333399","#3333cc","#3333ff",
+	"#663300","#663333","#663366","#663399","#6633cc","#6633ff","#993300","#993333",
+	"#993366","#993399","#9933cc","#9933ff","#cc3300","#cc3333","#cc3366","#cc3399",
+	"#cc33cc","#cc33ff","#ff3300","#ff3333","#ff3366","#ff3399","#ff33cc","#ff33ff",
+	"#006600","#006633","#006666","#006699","#0066cc","#0066ff","#336600","#336633",
+	"#336666","#336699","#3366cc","#3366ff","#666600","#666633","#666666","#666699",
+	"#6666cc","#6666ff","#996600","#996633","#996666","#996699","#9966cc","#9966ff",
+	"#cc6600","#cc6633","#cc6666","#cc6699","#cc66cc","#cc66ff","#ff6600","#ff6633",
+	"#ff6666","#ff6699","#ff66cc","#ff66ff","#009900","#009933","#009966","#009999",
+	"#0099cc","#0099ff","#339900","#339933","#339966","#339999","#3399cc","#3399ff",
+	"#669900","#669933","#669966","#669999","#6699cc","#6699ff","#999900","#999933",
+	"#999966","#999999","#9999cc","#9999ff","#cc9900","#cc9933","#cc9966","#cc9999",
+	"#cc99cc","#cc99ff","#ff9900","#ff9933","#ff9966","#ff9999","#ff99cc","#ff99ff",
+	"#00cc00","#00cc33","#00cc66","#00cc99","#00cccc","#00ccff","#33cc00","#33cc33",
+	"#33cc66","#33cc99","#33cccc","#33ccff","#66cc00","#66cc33","#66cc66","#66cc99",
+	"#66cccc","#66ccff","#99cc00","#99cc33","#99cc66","#99cc99","#99cccc","#99ccff",
+	"#cccc00","#cccc33","#cccc66","#cccc99","#cccccc","#ccccff","#ffcc00","#ffcc33",
+	"#ffcc66","#ffcc99","#ffcccc","#ffccff","#00ff00","#00ff33","#00ff66","#00ff99",
+	"#00ffcc","#00ffff","#33ff00","#33ff33","#33ff66","#33ff99","#33ffcc","#33ffff",
+	"#66ff00","#66ff33","#66ff66","#66ff99","#66ffcc","#66ffff","#99ff00","#99ff33",
+	"#99ff66","#99ff99","#99ffcc","#99ffff","#ccff00","#ccff33","#ccff66","#ccff99",
+	"#ccffcc","#ccffff","#ffff00","#ffff33","#ffff66","#ffff99","#ffffcc","#ffffff"
+);
+
+function convertRGBToHex(col) {
+	var re = new RegExp("rgb\\s*\\(\\s*([0-9]+).*,\\s*([0-9]+).*,\\s*([0-9]+).*\\)", "gi");
+
+	var rgb = col.replace(re, "$1,$2,$3").split(',');
+	if (rgb.length == 3) {
+		r = parseInt(rgb[0]).toString(16);
+		g = parseInt(rgb[1]).toString(16);
+		b = parseInt(rgb[2]).toString(16);
+
+		r = r.length == 1 ? '0' + r : r;
+		g = g.length == 1 ? '0' + g : g;
+		b = b.length == 1 ? '0' + b : b;
+
+		return "#" + r + g + b;
+	}
+
+	return col;
+}
+
+function convertHexToRGB(col) {
+	if (col.indexOf('#') != -1) {
+		col = col.replace(new RegExp('[^0-9A-F]', 'gi'), '');
+
+		r = parseInt(col.substring(0, 2), 16);
+		g = parseInt(col.substring(2, 4), 16);
+		b = parseInt(col.substring(4, 6), 16);
+
+		return "rgb(" + r + "," + g + "," + b + ")";
+	}
+
+	return col;
+}
+
+function renderColorMap() {
+	var html = "";
+	var inputColor = convertRGBToHex(tinyMCE.getWindowArg('input_color'));
+
+	html += '<table border="0" cellspacing="1" cellpadding="0">'
+		+ '<tr>';
+	for (var i=0; i<colors.length; i++) {
+		html += '<td bgcolor="' + colors[i] + '">'
+			+ '<a href="javascript:selectColor();" onfocus="showColor(\'' + colors[i] +  '\');" onmouseover="showColor(\'' + colors[i] +  '\');">'
+			+ '<img border="0" src="images/spacer.gif" width="10" height="10" title="' + colors[i] +  '" alt="' + colors[i] +  '" /></a></td>';
+		if ((i+1) % 18 == 0)
+			html += '</tr><tr>';
+	}
+	html += '<tr><td colspan="18">'
+		+ '<table width="100%" border="0" cellspacing="0" cellpadding="0">'
+		+ '<tr><td>'
+		+ '<img id="selectedColor" style="background-color:' + tinyMCE.getWindowArg('input_color') + '" border="0" src="images/spacer.gif" width="80" height="16" />'
+		+ '</td><td align="right">'
+		+ '<input id="selectedColorBox" name="selectedColorBox" type="text" size="7" maxlength="7" style="width:65px" value="' + inputColor + '" />'
+		+ '</td></tr>'
+		+ '</table>'
+		+ '<div style="float: left"><input type="button" id="insert" name="insert" value="{$lang_theme_colorpicker_apply}" style="margin-top:3px" onclick="selectColor();"></div>'
+		+ '<div style="float: right"><input type="button" name="cancel" value="{$lang_cancel}" style="margin-top:3px" onclick="tinyMCEPopup.close();" id="cancel" /></div>'
+		+ '</td></tr>'
+		+ '</table>';
+
+	document.write(html);
+}
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/image.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/image.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/image.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,81 @@
+var url = tinyMCE.getParam("external_image_list_url");
+if (url != null) {
+	// Fix relative
+	if (url.charAt(0) != '/' && url.indexOf('://') == -1)
+		url = tinyMCE.documentBasePath + "/" + url;
+
+	document.write('<sc'+'ript language="javascript" type="text/javascript" src="' + url + '"></sc'+'ript>');
+}
+
+function insertImage() {
+	var src = document.forms[0].src.value;
+	var alt = document.forms[0].alt.value;
+	var border = document.forms[0].border.value;
+	var vspace = document.forms[0].vspace.value;
+	var hspace = document.forms[0].hspace.value;
+	var width = document.forms[0].width.value;
+	var height = document.forms[0].height.value;
+	var align = document.forms[0].align.options[document.forms[0].align.selectedIndex].value;
+
+	tinyMCEPopup.restoreSelection();
+	tinyMCE.themes['advanced']._insertImage(src, alt, border, hspace, vspace, width, height, align);
+	tinyMCEPopup.close();
+}
+
+function init() {
+	tinyMCEPopup.resizeToInnerSize();
+
+	document.getElementById('srcbrowsercontainer').innerHTML = getBrowserHTML('srcbrowser','src','image','theme_advanced_image');
+
+	var formObj = document.forms[0];
+
+	for (var i=0; i<document.forms[0].align.options.length; i++) {
+		if (document.forms[0].align.options[i].value == tinyMCE.getWindowArg('align'))
+			document.forms[0].align.options.selectedIndex = i;
+	}
+
+	formObj.src.value = tinyMCE.getWindowArg('src');
+	formObj.alt.value = tinyMCE.getWindowArg('alt');
+	formObj.border.value = tinyMCE.getWindowArg('border');
+	formObj.vspace.value = tinyMCE.getWindowArg('vspace');
+	formObj.hspace.value = tinyMCE.getWindowArg('hspace');
+	formObj.width.value = tinyMCE.getWindowArg('width');
+	formObj.height.value = tinyMCE.getWindowArg('height');
+	formObj.insert.value = tinyMCE.getLang('lang_' + tinyMCE.getWindowArg('action'), 'Insert', true); 
+
+	// Handle file browser
+	if (isVisible('srcbrowser'))
+		document.getElementById('src').style.width = '180px';
+
+	// Auto select image in list
+	if (typeof(tinyMCEImageList) != "undefined" && tinyMCEImageList.length > 0) {
+		for (var i=0; i<formObj.image_list.length; i++) {
+			if (formObj.image_list.options[i].value == tinyMCE.getWindowArg('src'))
+				formObj.image_list.options[i].selected = true;
+		}
+	}
+}
+
+var preloadImg = new Image();
+
+function resetImageData() {
+	var formObj = document.forms[0];
+	formObj.width.value = formObj.height.value = "";	
+}
+
+function updateImageData() {
+	var formObj = document.forms[0];
+
+	if (formObj.width.value == "")
+		formObj.width.value = preloadImg.width;
+
+	if (formObj.height.value == "")
+		formObj.height.value = preloadImg.height;
+}
+
+function getImageData() {
+	preloadImg = new Image();
+	tinyMCE.addEvent(preloadImg, "load", updateImageData);
+	tinyMCE.addEvent(preloadImg, "error", function () {var formObj = document.forms[0];formObj.width.value = formObj.height.value = "";});
+	preloadImg.src = tinyMCE.convertRelativeToAbsoluteURL(tinyMCE.settings['base_href'], document.forms[0].src.value);
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/link.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/link.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/link.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,70 @@
+var url = tinyMCE.getParam("external_link_list_url");
+if (url != null) {
+	// Fix relative
+	if (url.charAt(0) != '/' && url.indexOf('://') == -1)
+		url = tinyMCE.documentBasePath + "/" + url;
+
+	document.write('<sc'+'ript language="javascript" type="text/javascript" src="' + url + '"></sc'+'ript>');
+}
+
+function init() {
+	tinyMCEPopup.resizeToInnerSize();
+
+	document.getElementById('hrefbrowsercontainer').innerHTML = getBrowserHTML('hrefbrowser','href','file','theme_advanced_link');
+
+	// Handle file browser
+	if (isVisible('hrefbrowser'))
+		document.getElementById('href').style.width = '180px';
+
+	var formObj = document.forms[0];
+
+	for (var i=0; i<document.forms[0].target.options.length; i++) {
+		var option = document.forms[0].target.options[i];
+
+		if (option.value == tinyMCE.getWindowArg('target'))
+			option.selected = true;
+	}
+
+	document.forms[0].href.value = tinyMCE.getWindowArg('href');
+	document.forms[0].linktitle.value = tinyMCE.getWindowArg('title');
+	document.forms[0].insert.value = tinyMCE.getLang('lang_' + tinyMCE.getWindowArg('action'), 'Insert', true); 
+
+	addClassesToList('styleSelect', 'theme_advanced_link_styles');
+	selectByValue(formObj, 'styleSelect', tinyMCE.getWindowArg('className'), true);
+
+	// Hide css select row if no CSS classes
+	if (formObj.styleSelect && formObj.styleSelect.options.length <= 1) {
+		var sr = document.getElementById('styleSelectRow');
+		sr.style.display = 'none';
+		sr.parentNode.removeChild(sr);
+	}
+
+	// Auto select link in list
+	if (typeof(tinyMCELinkList) != "undefined" && tinyMCELinkList.length > 0) {
+		var formObj = document.forms[0];
+
+		for (var i=0; i<formObj.link_list.length; i++) {
+			if (formObj.link_list.options[i].value == tinyMCE.getWindowArg('href'))
+				formObj.link_list.options[i].selected = true;
+		}
+	}
+}
+
+function insertLink() {
+	var href = document.forms[0].href.value;
+	var target = document.forms[0].target.options[document.forms[0].target.selectedIndex].value;
+	var title = document.forms[0].linktitle.value;
+	var style_class = document.forms[0].styleSelect ? document.forms[0].styleSelect.value : "";
+	var dummy;
+
+	// Make anchors absolute
+	if (href.charAt(0) == '#')
+		href = tinyMCE.settings['document_base_url'] + href;
+
+	if (target == '_self')
+		target = '';
+
+	tinyMCEPopup.restoreSelection();
+	tinyMCE.themes['advanced']._insertLink(href, target, title, dummy, style_class);
+	tinyMCEPopup.close();
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/source_editor.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/source_editor.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/jscripts/source_editor.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,66 @@
+function saveContent() {
+	tinyMCE.setContent(document.getElementById('htmlSource').value);
+	tinyMCE.closeWindow(window);
+}
+
+// Fixes some charcode issues
+function fixContent(html) {
+/*	html = html.replace(new RegExp('<(p|hr|table|tr|td|ol|ul|object|embed|li|blockquote)', 'gi'),'\n<$1');
+	html = html.replace(new RegExp('<\/(p|ol|ul|li|table|tr|td|blockquote|object)>', 'gi'),'</$1>\n');
+	html = tinyMCE.regexpReplace(html, '<br />','<br />\n','gi');
+	html = tinyMCE.regexpReplace(html, '\n\n','\n','gi');*/
+	return html;
+}
+
+function onLoadInit() {
+	tinyMCEPopup.resizeToInnerSize();
+
+	document.forms[0].htmlSource.value = fixContent(tinyMCE.getContent(tinyMCE.getWindowArg('editor_id')));
+	resizeInputs();
+
+	if (tinyMCE.getParam("theme_advanced_source_editor_wrap", true)) {
+		setWrap('soft');
+		document.forms[0].wraped.checked = true;
+	}
+}
+
+function setWrap(val) {
+	var s = document.forms[0].htmlSource;
+
+	s.wrap = val;
+
+	if (tinyMCE.isGecko) {
+		var v = s.value;
+		var n = s.cloneNode(false);
+		n.setAttribute("wrap", val);
+		s.parentNode.replaceChild(n, s);
+		n.value = v;
+	}
+}
+
+function toggleWordWrap(elm) {
+	if (elm.checked)
+		setWrap('soft');
+	else
+		setWrap('off');
+}
+
+var wHeight=0, wWidth=0, owHeight=0, owWidth=0;
+
+function resizeInputs() {
+	if (!tinyMCE.isMSIE) {
+		 wHeight = self.innerHeight-80;
+		 wWidth = self.innerWidth-16;
+	} else {
+		 wHeight = document.body.clientHeight - 80;
+		 wWidth = document.body.clientWidth - 16;
+	}
+
+	document.forms[0].htmlSource.style.height = Math.abs(wHeight) + 'px';
+	document.forms[0].htmlSource.style.width  = Math.abs(wWidth) + 'px';
+}
+
+function renderWordWrap() {
+	if (tinyMCE.isMSIE || tinyMCE.isGecko)
+		document.write('<input type="checkbox" name="wraped" id="wraped" onclick="toggleWordWrap(this);" class="wordWrapCode" /><label for="wraped">{$lang_theme_code_wordwrap}</label>');
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/langs/en.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/langs/en.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/langs/en.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,81 @@
+// UK lang variables
+
+tinyMCE.addToLang('',{
+theme_style_select : '-- Styles --',
+theme_code_desc : 'Edit HTML Source',
+theme_code_title : 'HTML Source Editor',
+theme_code_wordwrap : 'Word wrap',
+theme_sub_desc : 'Subscript',
+theme_sup_desc : 'Superscript',
+theme_hr_desc : 'Insert horizontal ruler',
+theme_removeformat_desc : 'Remove formatting',
+theme_custom1_desc : 'Your custom description here',
+insert_image_border : 'Border',
+insert_image_dimensions : 'Dimensions',
+insert_image_vspace : 'Vertical space',
+insert_image_hspace : 'Horizontal space',
+insert_image_align : 'Alignment',
+insert_image_align_default : '-- Not set --',
+insert_image_align_baseline : 'Baseline',
+insert_image_align_top : 'Top',
+insert_image_align_middle : 'Middle',
+insert_image_align_bottom : 'Bottom',
+insert_image_align_texttop : 'TextTop',
+insert_image_align_absmiddle : 'Absolute Middle',
+insert_image_align_absbottom : 'Absolute Bottom',
+insert_image_align_left : 'Left',
+insert_image_align_right : 'Right',
+theme_font_size : '-- Font size --',
+theme_fontdefault : '-- Font family --',
+theme_block : '-- Format --',
+theme_paragraph : 'Paragraph',
+theme_div : 'Div',
+theme_address : 'Address',
+theme_pre : 'Preformatted',
+theme_h1 : 'Heading 1',
+theme_h2 : 'Heading 2',
+theme_h3 : 'Heading 3',
+theme_h4 : 'Heading 4',
+theme_h5 : 'Heading 5',
+theme_h6 : 'Heading 6',
+theme_blockquote : 'Blockquote',
+theme_code : 'Code',
+theme_samp : 'Code sample',
+theme_dt : 'Definition term ',
+theme_dd : 'Definition description',
+theme_colorpicker_title : 'Select a color',
+theme_colorpicker_apply : 'Apply',
+theme_forecolor_desc : 'Select text color',
+theme_backcolor_desc : 'Select background color',
+theme_charmap_title : 'Select custom character',
+theme_charmap_desc : 'Insert custom character',
+theme_visualaid_desc : 'Toggle guidelines/invisible elements',
+insert_anchor_title : 'Insert/edit anchor',
+insert_anchor_name : 'Anchor name',
+theme_anchor_desc : 'Insert/edit anchor',
+theme_insert_link_titlefield : 'Title',
+theme_clipboard_msg : 'Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?',
+theme_path : 'Path',
+cut_desc : 'Cut',
+copy_desc : 'Copy',
+paste_desc : 'Paste',
+link_list : 'Link list',
+image_list : 'Image list',
+browse : 'Browse',
+image_props_desc : 'Image properties',
+newdocument_desc : 'New document',
+class_name : 'Class',
+newdocument : 'Are you sure you want clear all contents?',
+about_title : 'About TinyMCE',
+about : 'About',
+license : 'License',
+plugins : 'Plugins',
+plugin : 'Plugin',
+author : 'Author',
+version : 'Version',
+loaded_plugins : 'Loaded plugins',
+help : 'Help',
+not_set : '-- Not set --',
+close : 'Close',
+toolbar_focus : 'Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X'
+});

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/langs/nl.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/langs/nl.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/langs/nl.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,76 @@
+// NL lang variables
+
+tinyMCE.addToLang('',{
+theme_style_select : '-- Stijlen --',
+theme_code_desc : 'HTML bron bewerken',
+theme_code_title : 'HTML code-editor',
+theme_code_wordwrap : 'Terugloop',
+theme_sub_desc : 'Subscript',
+theme_sup_desc : 'Superscript',
+theme_hr_desc : 'Horizontale lijn invoegen',
+theme_removeformat_desc : 'Opmaak verwijderen',
+theme_custom1_desc : 'Tik hier een omschrijving',
+insert_image_border : 'Rand',
+insert_image_dimensions : 'Afmetingen',
+insert_image_vspace : 'Verticale marge',
+insert_image_hspace : 'Horizontale marge',
+insert_image_align : 'Uitlijning',
+insert_image_align_default : '-- geen --',
+insert_image_align_baseline : 'Basislijn',
+insert_image_align_top : 'Boven',
+insert_image_align_middle : 'Midden',
+insert_image_align_bottom : 'Onder',
+insert_image_align_texttop : 'Bovenkant tekst',
+insert_image_align_absmiddle : 'Absoluut midden',
+insert_image_align_absbottom : 'Absoluut onder',
+insert_image_align_left : 'Links',
+insert_image_align_right : 'Rechts',
+theme_font_size : '-- Lettergrootte --',
+theme_fontdefault : '-- Lettertype --',
+theme_block : '-- Paragraaf --',
+theme_paragraph : 'Paragraaf',
+theme_div : 'Blok',
+theme_address : 'Adres',
+theme_pre : 'Opgemaakt',
+theme_h1 : 'Kop 1',
+theme_h2 : 'Kop 2',
+theme_h3 : 'Kop 3',
+theme_h4 : 'Kop 4',
+theme_h5 : 'Kop 5',
+theme_h6 : 'Kop 6',
+theme_colorpicker_title : 'Selecteer een kleur',
+theme_colorpicker_apply : 'Toepassen',
+theme_forecolor_desc : 'Een tekstkleur selecteren',
+theme_backcolor_desc : 'Een achtergrondkleur selecteren',
+theme_charmap_title : 'Speciale tekens invoegen',
+theme_charmap_desc : 'Speciale tekens invoegen',
+theme_visualaid_desc : 'Onzichtbare elementen en hulplijnen aan/uit',
+insert_anchor_title : 'Bladwijzer invoegen/bewerken',
+insert_anchor_name : 'Bladwijzer naam',
+theme_anchor_desc : 'Bladwijzer invoegen/bewerken',
+theme_insert_link_titlefield : 'titel',
+theme_clipboard_msg : 'Kopi&euml;ren/Knippen/Plakken is uit veiligheidsoverwegingen niet direct beschikbaar in Mozilla en Firefox.\nWilt u meer informatie over deze kwestie?',
+theme_path : 'Pad',
+cut_desc : 'Knippen',
+copy_desc : 'Kopi?ren',
+paste_desc : 'Plakken',
+link_list : 'Hyperlinklijst',
+image_list : 'Afbeeldinglijst',
+browse : 'Bladeren',
+image_props_desc : 'Eigenschappen van afbeelding',
+newdocument_desc : 'Nieuw document',
+class_name : 'Stijl',
+newdocument : 'Weet u zeker dat u de hele inhoud wilt wissen?',
+about_title : 'Over TinyMCE',
+about : 'Over',
+license : 'Licentie',
+plugins : 'Plugins',
+plugin : 'Plugin',
+author : 'Author',
+version : 'Versie',
+loaded_plugins : 'Ingeladen plugins',
+help : 'Help',
+not_set : '-- geen --',
+close : 'Sluiten',
+toolbar_focus : 'Ga naar werkbalk knoppen - Alt+Q, Ga naar editor - Alt-Z, Ga naar pad - Alt-X'
+});

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/link.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/link.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/link.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,100 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+	<title>{$lang_insert_link_title}</title>
+	<script language="javascript" type="text/javascript" src="../../tiny_mce_popup.js"></script>
+	<script language="javascript" type="text/javascript" src="../../utils/mctabs.js"></script>
+	<script language="javascript" type="text/javascript" src="../../utils/form_utils.js"></script>
+	<script language="javascript" type="text/javascript" src="jscripts/link.js"></script>
+	<base target="_self" />
+</head>
+<body id="link" onload="tinyMCEPopup.executeOnLoad('init();');" style="display: none">
+<form onsubmit="insertLink();return false;" action="#">
+	<div class="tabs">
+		<ul>
+			<li id="general_tab" class="current"><span><a href="javascript:mcTabs.displayTab('general_tab','general_panel');" onmousedown="return false;">{$lang_insert_link_title}</a></span></li>
+		</ul>
+	</div>
+
+	<div class="panel_wrapper">
+		<div id="general_panel" class="panel current">
+
+		<table border="0" cellpadding="4" cellspacing="0">
+          <tr>
+            <td nowrap="nowrap"><label for="href">{$lang_insert_link_url}</label></td>
+            <td><table border="0" cellspacing="0" cellpadding="0"> 
+				  <tr> 
+					<td><input id="href" name="href" type="text" value="" style="width: 200px" /></td> 
+					<td id="hrefbrowsercontainer">&nbsp;</td>
+				  </tr> 
+				</table></td>
+          </tr>
+		  <!-- Link list -->
+		  <script language="javascript">
+			if (typeof(tinyMCELinkList) != "undefined" && tinyMCELinkList.length > 0) {
+				var html = "";
+
+				html += '<tr><td><label for="link_list">{$lang_link_list}</label></td>';
+				html += '<td><select id="link_list" name="link_list" style="width: 200px" onchange="this.form.href.value=this.options[this.selectedIndex].value;">';
+				html += '<option value="">---</option>';
+
+				for (var i=0; i<tinyMCELinkList.length; i++)
+					html += '<option value="' + tinyMCELinkList[i][1] + '">' + tinyMCELinkList[i][0] + '</option>';
+
+				html += '</select></td></tr>';
+
+				document.write(html);
+			}
+		  </script>
+		  <!-- /Link list -->
+          <tr>
+            <td nowrap="nowrap"><label for="target">{$lang_insert_link_target}</label></td>
+            <td><select id="target" name="target" style="width: 200px">
+                <option value="_self">{$lang_insert_link_target_same}</option>
+                <option value="_blank">{$lang_insert_link_target_blank}</option>
+				<script language="javascript">
+					var html = "";
+					var targets = tinyMCE.getParam('theme_advanced_link_targets', '').split(';');
+
+					for (var i=0; i<targets.length; i++) {
+						var key, value;
+
+						if (targets[i] == "")
+							continue;
+
+						key = targets[i].split('=')[0];
+						value = targets[i].split('=')[1];
+
+						html += '<option value="' + value + '">' + key + '</option>';
+					}
+
+					document.write(html);
+				</script>
+            </select></td>
+          </tr>
+          <tr>
+            <td nowrap="nowrap"><label for="linktitle">{$lang_theme_insert_link_titlefield}</label></td>
+            <td><input id="linktitle" name="linktitle" type="text" value="" style="width: 200px"></td>
+          </tr>
+          <tr id="styleSelectRow">
+            <td><label for="styleSelect">{$lang_class_name}</label></td>
+            <td>
+			 <select id="styleSelect" name="styleSelect">
+                <option value="" selected>{$lang_theme_style_select}</option>
+             </select></td>
+          </tr>
+        </table>
+		</div>
+	</div>
+
+	<div class="mceActionPanel">
+		<div style="float: left">
+			<input type="button" id="insert" name="insert" value="{$lang_insert}" onclick="insertLink();" />
+		</div>
+
+		<div style="float: right">
+			<input type="button" id="cancel" name="cancel" value="{$lang_cancel}" onclick="tinyMCEPopup.close();" />
+		</div>
+	</div>
+</form>
+</body>
+</html>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/source_editor.htm
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/source_editor.htm	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/advanced/source_editor.htm	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,30 @@
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
+	<title>{$lang_theme_code_title}</title>
+	<script language="javascript" type="text/javascript" src="../../tiny_mce_popup.js"></script>
+	<script language="javascript" type="text/javascript" src="jscripts/source_editor.js"></script>
+	<base target="_self" />
+</head>
+<body onload="tinyMCEPopup.executeOnLoad('onLoadInit();');" onresize="resizeInputs();" style="display: none">
+	<form name="source" onsubmit="saveContent();" action="#">
+		<div style="float: left" class="title">{$lang_theme_code_title}</div>
+
+		<div style="float: right">
+			<script language="javascript" type="text/javascript">renderWordWrap();</script>
+		</div>
+
+		<textarea name="htmlSource" id="htmlSource" rows="15" cols="100" style="width: 100%; height: 100%; font-family: 'Courier New',Courier,mono; font-size: 12px" dir="ltr" wrap="off"></textarea>
+
+		<div class="mceActionPanel">
+			<div style="float: left">
+				<input type="button" name="insert" value="{$lang_update}" onclick="saveContent();" id="insert" />
+			</div>
+
+			<div style="float: right">
+				<input type="button" name="cancel" value="{$lang_cancel}" onclick="tinyMCEPopup.close();" id="cancel" />
+			</div>
+		</div>
+	</form>
+</body>
+</html>

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/tiny_mce.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/tiny_mce.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/tiny_mce.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1 @@
+function TinyMCE_Engine(){this.majorVersion="2";this.minorVersion="0.6.1";this.releaseDate="2006-05-04";this.instances=new Array();this.switchClassCache=new Array();this.windowArgs=new Array();this.loadedFiles=new Array();this.pendingFiles=new Array();this.loadingIndex=0;this.configs=new Array();this.currentConfig=0;this.eventHandlers=new Array();var ua=navigator.userAgent;this.isMSIE=(navigator.appName=="Microsoft Internet Explorer");this.isMSIE5=this.isMSIE&&(ua.indexOf('MSIE 5')!=-1);this.isMSIE5_0=this.isMSIE&&(ua.indexOf('MSIE 5.0')!=-1);this.isGecko=ua.indexOf('Gecko')!=-1;this.isSafari=ua.indexOf('Safari')!=-1;this.isOpera=ua.indexOf('Opera')!=-1;this.isMac=ua.indexOf('Mac')!=-1;this.isNS7=ua.indexOf('Netscape/7')!=-1;this.isNS71=ua.indexOf('Netscape/7.1')!=-1;this.dialogCounter=0;this.plugins=new Array();this.themes=new Array();this.menus=new Array();this.loadedPlugins=new Array();this.buttonMap=new Array();this.isLoaded=false;if(this.isOpera){this.isMSIE=true;this.!
 isGecko=false;this.isSafari=false;}this.idCounter=0;};TinyMCE_Engine.prototype={init:function(settings){var theme;this.settings=settings;if(typeof(document.execCommand)=='undefined')return;if(!tinyMCE.baseURL){var elements=document.getElementsByTagName('script');for(var i=0;i<elements.length;i++){if(elements[i].src&&(elements[i].src.indexOf("tiny_mce.js")!=-1||elements[i].src.indexOf("tiny_mce_dev.js")!=-1||elements[i].src.indexOf("tiny_mce_src.js")!=-1||elements[i].src.indexOf("tiny_mce_gzip")!=-1)){var src=elements[i].src;tinyMCE.srcMode=(src.indexOf('_src')!=-1||src.indexOf('_dev')!=-1)?'_src':'';tinyMCE.gzipMode=src.indexOf('_gzip')!=-1;src=src.substring(0,src.lastIndexOf('/'));if(settings.exec_mode=="src"||settings.exec_mode=="normal")tinyMCE.srcMode=settings.exec_mode=="src"?'_src':'';tinyMCE.baseURL=src;break;}}}this.documentBasePath=document.location.href;if(this.documentBasePath.indexOf('?')!=-1)this.documentBasePath=this.documentBasePath.substring(0,this.documentB!
 asePath.indexOf('?'));this.documentURL=this.documentBasePath;t!
 his.docu
mentBasePath=this.documentBasePath.substring(0,this.documentBasePath.lastIndexOf('/'));if(tinyMCE.baseURL.indexOf('://')==-1&&tinyMCE.baseURL.charAt(0)!='/'){tinyMCE.baseURL=this.documentBasePath+"/"+tinyMCE.baseURL;}this._def("mode","none");this._def("theme","advanced");this._def("plugins","",true);this._def("language","en");this._def("docs_language",this.settings['language']);this._def("elements","");this._def("textarea_trigger","mce_editable");this._def("editor_selector","");this._def("editor_deselector","mceNoEditor");this._def("valid_elements","+a[id|style|rel|rev|charset|hreflang|dir|lang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],-strong/-b[class|style],-em/-i[class|style],-strike[class|style],-u[class|style],#p[id|style|dir|class|align],-ol[class|style],-ul[class|style],-li[class|style],br,img[id|dir|lang|longdesc|usemap|style|class|src|o!
 nmouseover|onmouseout|border|alt=|title|hspace|vspace|width|height|align],-sub[style|class],-sup[style|class],-blockquote[dir|style],-table[border=0|cellspacing|cellpadding|width|height|class|align|summary|style|dir|id|lang|bgcolor|background|bordercolor],-tr[id|lang|dir|class|rowspan|width|height|align|valign|style|bgcolor|background|bordercolor],tbody[id|class],thead[id|class],tfoot[id|class],-td[id|lang|dir|class|colspan|rowspan|width|height|align|valign|style|bgcolor|background|bordercolor|scope],-th[id|lang|dir|class|colspan|rowspan|width|height|align|valign|style|scope],caption[id|lang|dir|class|style],-div[id|dir|class|align|style],-span[style|class|align],-pre[class|align|style],address[class|align|style],-h1[id|style|dir|class|align],-h2[id|style|dir|class|align],-h3[id|style|dir|class|align],-h4[id|style|dir|class|align],-h5[id|style|dir|class|align],-h6[id|style|dir|class|align],hr[class|style],-font[face|size|style|id|class|dir|color],dd[id|class|title|style|dir!
 |lang],dl[id|class|title|style|dir|lang],dt[id|class|title|sty!
 le|dir|l
ang]");this._def("extended_valid_elements","");this._def("invalid_elements","");this._def("encoding","");this._def("urlconverter_callback",tinyMCE.getParam("urlconvertor_callback","TinyMCE_Engine.prototype.convertURL"));this._def("save_callback","");this._def("debug",false);this._def("force_br_newlines",false);this._def("force_p_newlines",true);this._def("add_form_submit_trigger",true);this._def("relative_urls",true);this._def("remove_script_host",true);this._def("focus_alert",true);this._def("document_base_url",this.documentURL);this._def("visual",true);this._def("visual_table_class","mceVisualAid");this._def("setupcontent_callback","");this._def("fix_content_duplication",true);this._def("custom_undo_redo",true);this._def("custom_undo_redo_levels",-1);this._def("custom_undo_redo_keyboard_shortcuts",true);this._def("custom_undo_redo_restore_selection",true);this._def("verify_html",true);this._def("apply_source_formatting",false);this._def("directionality","ltr");this._def("c!
 leanup_on_startup",false);this._def("inline_styles",false);this._def("convert_newlines_to_brs",false);this._def("auto_reset_designmode",true);this._def("entities","39,#39,160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde!
 ,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divid!
 e,248,os
lash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745!
 ,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,34,quot,38,amp,60,lt,62,gt,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",true);this._def("entity_encoding","named");this._def("cleanup_callback","");this._def("add_unload_trigger",true);this._def("ask",false);this._def("nowrap",false);this._def("auto_resize",false);this._def("auto_focus",false);this._def("cleanup",true);this._def("remove_linebreaks",true);this._def("button_tile_map",false);this._def("submit_patch",true);!
 this._def("browsers","msie,safari,gecko,opera",true);this._def!
 ("dialog
_type","window");this._def("accessibility_warnings",true);this._def("accessibility_focus",true);this._def("merge_styles_invalid_parents","");this._def("force_hex_style_colors",true);this._def("trim_span_elements",true);this._def("convert_fonts_to_spans",false);this._def("doctype",'<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">');this._def("font_size_classes",'');this._def("font_size_style_values",'xx-small,x-small,small,medium,large,x-large,xx-large',true);this._def("event_elements",'a,img',true);this._def("convert_urls",true);this._def("table_inline_editing",false);this._def("object_resizing",true);this._def("custom_shortcuts",true);this._def("convert_on_click",false);this._def("content_css",'');this._def("fix_list_elements",false);this._def("fix_table_elements",false);this._def("strict_loading_mode",document.contentType=='application/xhtml+xml');this._def("hidden_tab_class",'');this._def("display_tab_class",'');if(this.isMSIE&&!this.isOpera)this.settings.st!
 rict_loading_mode=false;if(this.isMSIE&&this.settings['browsers'].indexOf('msie')==-1)return;if(this.isGecko&&this.settings['browsers'].indexOf('gecko')==-1)return;if(this.isSafari&&this.settings['browsers'].indexOf('safari')==-1)return;if(this.isOpera&&this.settings['browsers'].indexOf('opera')==-1)return;var baseHREF=tinyMCE.settings['document_base_url'];var h=document.location.href;var p=h.indexOf('://');if(p>0&&document.location.protocol!="file:"){p=h.indexOf('/',p+3);h=h.substring(0,p);if(baseHREF.indexOf('://')==-1)baseHREF=h+baseHREF;tinyMCE.settings['document_base_url']=baseHREF;tinyMCE.settings['document_base_prefix']=h;}if(baseHREF.indexOf('?')!=-1)baseHREF=baseHREF.substring(0,baseHREF.indexOf('?'));this.settings['base_href']=baseHREF.substring(0,baseHREF.lastIndexOf('/'))+"/";theme=this.settings['theme'];this.blockRegExp=new RegExp("^(h[1-6]|p|div|address|pre|form|table|li|ol|ul|td|blockquote|center|dl|dt|dd|dir|fieldset|form|noscript|noframes|menu|isindex|samp)!
 $","i");this.posKeyCodes=new Array(13,45,36,35,33,34,37,38,39,!
 40);this
.uniqueURL='javascript:TINYMCE_UNIQUEURL();';this.uniqueTag='<div id="mceTMPElement" style="display: none">TMP</div>';this.callbacks=new Array('onInit','getInfo','getEditorTemplate','setupContent','onChange','onPageLoad','handleNodeChange','initInstance','execCommand','getControlHTML','handleEvent','cleanup');this.settings['theme_href']=tinyMCE.baseURL+"/themes/"+theme;if(!tinyMCE.isMSIE)this.settings['force_br_newlines']=false;if(tinyMCE.getParam("popups_css",false)){var cssPath=tinyMCE.getParam("popups_css","");if(cssPath.indexOf('://')==-1&&cssPath.charAt(0)!='/')this.settings['popups_css']=this.documentBasePath+"/"+cssPath;else this.settings['popups_css']=cssPath;}else this.settings['popups_css']=tinyMCE.baseURL+"/themes/"+theme+"/css/editor_popup.css";if(tinyMCE.getParam("editor_css",false)){var cssPath=tinyMCE.getParam("editor_css","");if(cssPath.indexOf('://')==-1&&cssPath.charAt(0)!='/')this.settings['editor_css']=this.documentBasePath+"/"+cssPath;else this.settings[!
 'editor_css']=cssPath;}else this.settings['editor_css']=tinyMCE.baseURL+"/themes/"+theme+"/css/editor_ui.css";if(tinyMCE.settings['debug']){var msg="Debug: \n";msg+="baseURL: "+this.baseURL+"\n";msg+="documentBasePath: "+this.documentBasePath+"\n";msg+="content_css: "+this.settings['content_css']+"\n";msg+="popups_css: "+this.settings['popups_css']+"\n";msg+="editor_css: "+this.settings['editor_css']+"\n";alert(msg);}if(this.configs.length==0){if(this.isSafari&&this.getParam('safari_warning',false))alert("Safari support is very limited and should be considered experimental.\nSo there is no need to even submit bugreports on this early version.\nYou can disable this message by setting: safari_warning option to false");if(typeof(TinyMCECompressed)=="undefined"){tinyMCE.addEvent(window,"DOMContentLoaded",TinyMCE_Engine.prototype.onLoad);if(tinyMCE.isMSIE&&!tinyMCE.isOpera){if(document.body)tinyMCE.addEvent(document.body,"readystatechange",TinyMCE_Engine.prototype.onLoad);else t!
 inyMCE.addEvent(document,"readystatechange",TinyMCE_Engine.pro!
 totype.o
nLoad);}tinyMCE.addEvent(window,"load",TinyMCE_Engine.prototype.onLoad);tinyMCE._addUnloadEvents();}}this.loadScript(tinyMCE.baseURL+'/themes/'+this.settings['theme']+'/editor_template'+tinyMCE.srcMode+'.js');this.loadScript(tinyMCE.baseURL+'/langs/'+this.settings['language']+'.js');this.loadCSS(this.settings['editor_css']);var p=tinyMCE.getParam('plugins','',true,',');if(p.length>0){for(var i=0;i<p.length;i++){if(p[i].charAt(0)!='-')this.loadScript(tinyMCE.baseURL+'/plugins/'+p[i]+'/editor_plugin'+tinyMCE.srcMode+'.js');}}settings['cleanup_entities']=new Array();var entities=tinyMCE.getParam('entities','',true,',');for(var i=0;i<entities.length;i+=2)settings['cleanup_entities']['c'+entities[i]]=entities[i+1];settings['index']=this.configs.length;this.configs[this.configs.length]=settings;this.loadNextScript();},_addUnloadEvents:function(){if(tinyMCE.isMSIE){if(tinyMCE.settings['add_unload_trigger']){tinyMCE.addEvent(window,"unload",TinyMCE_Engine.prototype.unloadHandler);ti!
 nyMCE.addEvent(window.document,"beforeunload",TinyMCE_Engine.prototype.unloadHandler);}}else{if(tinyMCE.settings['add_unload_trigger'])tinyMCE.addEvent(window,"unload",function(){tinyMCE.triggerSave(true,true);});}},_def:function(key,def_val,t){var v=tinyMCE.getParam(key,def_val);v=t?v.replace(/\s+/g,""):v;this.settings[key]=v;},hasPlugin:function(n){return typeof(this.plugins[n])!="undefined"&&this.plugins[n]!=null;},addPlugin:function(n,p){var op=this.plugins[n];p.baseURL=op?op.baseURL:tinyMCE.baseURL+"/plugins/"+n;this.plugins[n]=p;this.loadNextScript();},setPluginBaseURL:function(n,u){var op=this.plugins[n];if(op)op.baseURL=u;else this.plugins[n]={baseURL:u};},loadPlugin:function(n,u){u=u.indexOf('.js')!=-1?u.substring(0,u.lastIndexOf('/')):u;u=u.charAt(u.length-1)=='/'?u.substring(0,u.length-1):u;this.plugins[n]={baseURL:u};this.loadScript(u+"/editor_plugin"+(tinyMCE.srcMode?'_src':'')+".js");},hasTheme:function(n){return typeof(this.themes[n])!="undefined"&&this.theme!
 s[n]!=null;},addTheme:function(n,t){this.themes[n]=t;this.load!
 NextScri
pt();},addMenu:function(n,m){this.menus[n]=m;},hasMenu:function(n){return typeof(this.plugins[n])!="undefined"&&this.plugins[n]!=null;},loadScript:function(url){var i;for(i=0;i<this.loadedFiles.length;i++){if(this.loadedFiles[i]==url)return;}if(tinyMCE.settings.strict_loading_mode)this.pendingFiles[this.pendingFiles.length]=url;else document.write('<sc'+'ript language="javascript" type="text/javascript" src="'+url+'"></script>');this.loadedFiles[this.loadedFiles.length]=url;},loadNextScript:function(){var d=document,se;if(!tinyMCE.settings.strict_loading_mode)return;if(this.loadingIndex<this.pendingFiles.length){se=d.createElementNS('http://www.w3.org/1999/xhtml','script');se.setAttribute('language','javascript');se.setAttribute('type','text/javascript');se.setAttribute('src',this.pendingFiles[this.loadingIndex++]);d.getElementsByTagName("head")[0].appendChild(se);}else this.loadingIndex=-1;},loadCSS:function(url){var ar=url.replace(/\s+/,'').split(',');var lflen=0,csslen=0;!
 var skip=false;var x=0,i=0,nl,le;for(x=0,csslen=ar.length;x<csslen;x++){ignore_css=false;if(ar[x]!=null&&ar[x]!='null'&&ar[x].length>0){for(i=0,lflen=this.loadedFiles.length;i<lflen;i++){if(this.loadedFiles[i]==ar[x]){skip=true;break;}}if(!skip){if(tinyMCE.settings.strict_loading_mode){nl=document.getElementsByTagName("head");le=document.createElement('link');le.setAttribute('href',ar[x]);le.setAttribute('rel','stylesheet');le.setAttribute('type','text/css');nl[0].appendChild(le);}else document.write('<link href="'+ar[x]+'" rel="stylesheet" type="text/css" />');this.loadedFiles[this.loadedFiles.length]=ar[x];}}}},importCSS:function(doc,css){var css_ary=css.replace(/\s+/,'').split(',');var csslen,elm,headArr,x,css_file;for(x=0,csslen=css_ary.length;x<csslen;x++){css_file=css_ary[x];if(css_file!=null&&css_file!='null'&&css_file.length>0){if(css_file.indexOf('://')==-1&&css_file.charAt(0)!='/')css_file=this.documentBasePath+"/"+css_file;if(typeof(doc.createStyleSheet)=="undefi!
 ned"){elm=doc.createElement("link");elm.rel="stylesheet";elm.h!
 ref=css_
file;if((headArr=doc.getElementsByTagName("head"))!=null&&headArr.length>0)headArr[0].appendChild(elm);}else doc.createStyleSheet(css_file);}}},confirmAdd:function(e,settings){var elm=tinyMCE.isMSIE?event.srcElement:e.target;var elementId=elm.name?elm.name:elm.id;tinyMCE.settings=settings;if(tinyMCE.settings['convert_on_click']||(!elm.getAttribute('mce_noask')&&confirm(tinyMCELang['lang_edit_confirm'])))tinyMCE.addMCEControl(elm,elementId);elm.setAttribute('mce_noask','true');},updateContent:function(form_element_name){var formElement=document.getElementById(form_element_name);for(var n in tinyMCE.instances){var inst=tinyMCE.instances[n];if(!tinyMCE.isInstance(inst))continue;inst.switchSettings();if(inst.formElement==formElement){var doc=inst.getDoc();tinyMCE._setHTML(doc,inst.formElement.value);if(!tinyMCE.isMSIE)doc.body.innerHTML=tinyMCE._cleanupHTML(inst,doc,this.settings,doc.body,inst.visualAid);}}},addMCEControl:function(replace_element,form_element_name,target_documen!
 t){var id="mce_editor_"+tinyMCE.idCounter++;var inst=new TinyMCE_Control(tinyMCE.settings);inst.editorId=id;this.instances[id]=inst;inst._onAdd(replace_element,form_element_name,target_document);},removeMCEControl:function(editor_id){var inst=tinyMCE.getInstanceById(editor_id);if(inst){inst.switchSettings();editor_id=inst.editorId;var html=tinyMCE.getContent(editor_id);var tmpInstances=new Array();for(var instanceName in tinyMCE.instances){var instance=tinyMCE.instances[instanceName];if(!tinyMCE.isInstance(instance))continue;if(instanceName!=editor_id)tmpInstances[instanceName]=instance;}tinyMCE.instances=tmpInstances;tinyMCE.selectedElement=null;tinyMCE.selectedInstance=null;var replaceElement=document.getElementById(editor_id+"_parent");var oldTargetElement=inst.oldTargetElement;var targetName=oldTargetElement.nodeName.toLowerCase();if(targetName=="textarea"||targetName=="input"){replaceElement.parentNode.removeChild(replaceElement);oldTargetElement.style.display="inline"!
 ;oldTargetElement.value=html;}else{oldTargetElement.innerHTML=!
 html;old
TargetElement.style.display='block';replaceElement.parentNode.insertBefore(oldTargetElement,replaceElement);replaceElement.parentNode.removeChild(replaceElement);}}},triggerSave:function(skip_cleanup,skip_callback){var inst,n;if(typeof(skip_cleanup)=="undefined")skip_cleanup=false;if(typeof(skip_callback)=="undefined")skip_callback=false;for(n in tinyMCE.instances){inst=tinyMCE.instances[n];if(!tinyMCE.isInstance(inst))continue;inst.triggerSave(skip_cleanup,skip_callback);}},resetForm:function(form_index){var i,inst,n,formObj=document.forms[form_index];for(n in tinyMCE.instances){inst=tinyMCE.instances[n];if(!tinyMCE.isInstance(inst))continue;inst.switchSettings();for(i=0;i<formObj.elements.length;i++){if(inst.formTargetElementId==formObj.elements[i].name)inst.getBody().innerHTML=inst.startContent;}}},execInstanceCommand:function(editor_id,command,user_interface,value,focus){var inst=tinyMCE.getInstanceById(editor_id);if(inst){if(typeof(focus)=="undefined")focus=true;if(focu!
 s)inst.contentWindow.focus();inst.autoResetDesignMode();this.selectedElement=inst.getFocusElement();this.selectedInstance=inst;tinyMCE.execCommand(command,user_interface,value);if(tinyMCE.isMSIE&&window.event!=null)tinyMCE.cancelEvent(window.event);}},execCommand:function(command,user_interface,value){user_interface=user_interface?user_interface:false;value=value?value:null;if(tinyMCE.selectedInstance)tinyMCE.selectedInstance.switchSettings();switch(command){case'mceHelp':tinyMCE.openWindow({file:'about.htm',width:480,height:380},{tinymce_version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion,tinymce_releasedate:tinyMCE.releaseDate,inline:"yes"});return;case'mceFocus':var inst=tinyMCE.getInstanceById(value);if(inst)inst.contentWindow.focus();return;case"mceAddControl":case"mceAddEditor":tinyMCE.addMCEControl(tinyMCE._getElementById(value),value);return;case"mceAddFrameControl":tinyMCE.addMCEControl(tinyMCE._getElementById(value['element'],value['document']),value['element'],!
 value['document']);return;case"mceRemoveControl":case"mceRemov!
 eEditor"
:tinyMCE.removeMCEControl(value);return;case"mceResetDesignMode":if(!tinyMCE.isMSIE){for(var n in tinyMCE.instances){if(!tinyMCE.isInstance(tinyMCE.instances[n]))continue;try{tinyMCE.instances[n].getDoc().designMode="on";}catch(e){}}}return;}if(this.selectedInstance){this.selectedInstance.execCommand(command,user_interface,value);}else if(tinyMCE.settings['focus_alert'])alert(tinyMCELang['lang_focus_alert']);},_createIFrame:function(replace_element,doc,win){var iframe,id=replace_element.getAttribute("id");var aw,ah;if(typeof(doc)=="undefined")doc=document;if(typeof(win)=="undefined")win=window;iframe=doc.createElement("iframe");aw=""+tinyMCE.settings['area_width'];ah=""+tinyMCE.settings['area_height'];if(aw.indexOf('%')==-1){aw=parseInt(aw);aw=aw<0?300:aw;aw=aw+"px";}if(ah.indexOf('%')==-1){ah=parseInt(ah);ah=ah<0?240:ah;ah=ah+"px";}iframe.setAttribute("id",id);iframe.setAttribute("class","mceEditorIframe");iframe.setAttribute("border","0");iframe.setAttribute("frameBorder",!
 "0");iframe.setAttribute("marginWidth","0");iframe.setAttribute("marginHeight","0");iframe.setAttribute("leftMargin","0");iframe.setAttribute("topMargin","0");iframe.setAttribute("width",aw);iframe.setAttribute("height",ah);iframe.setAttribute("allowtransparency","true");iframe.className='mceEditorIframe';if(tinyMCE.settings["auto_resize"])iframe.setAttribute("scrolling","no");if(tinyMCE.isMSIE&&!tinyMCE.isOpera)iframe.setAttribute("src",this.settings['default_document']);iframe.style.width=aw;iframe.style.height=ah;if(tinyMCE.settings.strict_loading_mode)iframe.style.marginBottom='-5px';if(tinyMCE.isMSIE&&!tinyMCE.isOpera)replace_element.outerHTML=iframe.outerHTML;else replace_element.parentNode.replaceChild(iframe,replace_element);if(tinyMCE.isMSIE&&!tinyMCE.isOpera)return win.frames[id];else return iframe;},setupContent:function(editor_id){var inst=tinyMCE.instances[editor_id];var doc=inst.getDoc();var head=doc.getElementsByTagName('head').item(0);var content=inst.startC!
 ontent;if(tinyMCE.settings.strict_loading_mode){content=conten!
 t.replac
e(/&lt;/g,'<');content=content.replace(/&gt;/g,'>');content=content.replace(/&quot;/g,'"');content=content.replace(/&amp;/g,'&');}inst.switchSettings();if(!tinyMCE.isMSIE&&tinyMCE.getParam("setupcontent_reload",false)&&doc.title!="blank_page"){try{doc.location.href=tinyMCE.baseURL+"/blank.htm";}catch(ex){}window.setTimeout("tinyMCE.setupContent('"+editor_id+"');",1000);return;}if(!head){window.setTimeout("tinyMCE.setupContent('"+editor_id+"');",10);return;}tinyMCE.importCSS(inst.getDoc(),tinyMCE.baseURL+"/themes/"+inst.settings['theme']+"/css/editor_content.css");tinyMCE.importCSS(inst.getDoc(),inst.settings['content_css']);tinyMCE.dispatchCallback(inst,'init_instance_callback','initInstance',inst);if(tinyMCE.getParam('custom_undo_redo_keyboard_shortcuts')){inst.addShortcut('ctrl','z','lang_undo_desc','Undo');inst.addShortcut('ctrl','y','lang_redo_desc','Redo');}if(tinyMCE.isGecko){inst.addShortcut('ctrl','b','lang_bold_desc','Bold');inst.addShortcut('ctrl','i','lang_italic_!
 desc','Italic');inst.addShortcut('ctrl','u','lang_underline_desc','Underline');}if(tinyMCE.getParam("convert_fonts_to_spans"))inst.getDoc().body.setAttribute('id','mceSpanFonts');if(tinyMCE.settings['nowrap'])doc.body.style.whiteSpace="nowrap";doc.body.dir=this.settings['directionality'];doc.editorId=editor_id;if(!tinyMCE.isMSIE)doc.documentElement.editorId=editor_id;inst.setBaseHREF(tinyMCE.settings['base_href']);if(tinyMCE.settings['convert_newlines_to_brs']){content=tinyMCE.regexpReplace(content,"\r\n","<br />","gi");content=tinyMCE.regexpReplace(content,"\r","<br />","gi");content=tinyMCE.regexpReplace(content,"\n","<br />","gi");}content=tinyMCE.storeAwayURLs(content);content=tinyMCE._customCleanup(inst,"insert_to_editor",content);if(tinyMCE.isMSIE){window.setInterval('try{tinyMCE.getCSSClasses(tinyMCE.instances["'+editor_id+'"].getDoc(), "'+editor_id+'");}catch(e){}',500);if(tinyMCE.settings["force_br_newlines"])doc.styleSheets[0].addRule("p","margin: 0;");var body=in!
 st.getBody();body.editorId=editor_id;}content=tinyMCE.cleanupH!
 TMLCode(
content);if(!tinyMCE.isMSIE){var contentElement=inst.getDoc().createElement("body");var doc=inst.getDoc();contentElement.innerHTML=content;if(tinyMCE.isGecko&&tinyMCE.settings['remove_lt_gt'])content=content.replace(new RegExp('&lt;&gt;','g'),"");if(tinyMCE.settings['cleanup_on_startup'])tinyMCE.setInnerHTML(inst.getBody(),tinyMCE._cleanupHTML(inst,doc,this.settings,contentElement));else{content=tinyMCE.regexpReplace(content,"<strong","<b","gi");content=tinyMCE.regexpReplace(content,"<em(/?)>","<i$1>","gi");content=tinyMCE.regexpReplace(content,"<em ","<i ","gi");content=tinyMCE.regexpReplace(content,"</strong>","</b>","gi");content=tinyMCE.regexpReplace(content,"</em>","</i>","gi");tinyMCE.setInnerHTML(inst.getBody(),content);}tinyMCE.convertAllRelativeURLs(inst.getBody());}else{if(tinyMCE.settings['cleanup_on_startup']){tinyMCE._setHTML(inst.getDoc(),content);eval('try {tinyMCE.setInnerHTML(inst.getBody(), tinyMCE._cleanupHTML(inst, inst.contentDocument, this.settings, ins!
 t.getBody()));} catch(e) {}');}else tinyMCE._setHTML(inst.getDoc(),content);}var parentElm=inst.targetDoc.getElementById(inst.editorId+'_parent');inst.formElement=tinyMCE.isGecko?parentElm.previousSibling:parentElm.nextSibling;tinyMCE.handleVisualAid(inst.getBody(),true,tinyMCE.settings['visual'],inst);tinyMCE.dispatchCallback(inst,'setupcontent_callback','setupContent',editor_id,inst.getBody(),inst.getDoc());if(!tinyMCE.isMSIE)tinyMCE.addEventHandlers(inst);if(tinyMCE.isMSIE){tinyMCE.addEvent(inst.getBody(),"blur",TinyMCE_Engine.prototype._eventPatch);tinyMCE.addEvent(inst.getBody(),"beforedeactivate",TinyMCE_Engine.prototype._eventPatch);if(!tinyMCE.isOpera){tinyMCE.addEvent(doc.body,"mousemove",TinyMCE_Engine.prototype.onMouseMove);tinyMCE.addEvent(doc.body,"beforepaste",TinyMCE_Engine.prototype._eventPatch);tinyMCE.addEvent(doc.body,"drop",TinyMCE_Engine.prototype._eventPatch);}}tinyMCE.selectedInstance=inst;tinyMCE.selectedElement=inst.contentWindow.document.body;tinyM!
 CE._customCleanup(inst,"insert_to_editor_dom",inst.getBody());!
 tinyMCE.
_customCleanup(inst,"setup_content_dom",inst.getBody());tinyMCE._setEventsEnabled(inst.getBody(),false);tinyMCE.cleanupAnchors(inst.getDoc());if(tinyMCE.getParam("convert_fonts_to_spans"))tinyMCE.convertSpansToFonts(inst.getDoc());inst.startContent=tinyMCE.trim(inst.getBody().innerHTML);inst.undoRedo.add({content:inst.startContent});if(tinyMCE.isGecko){tinyMCE.selectNodes(inst.getBody(),function(n){if(n.nodeType==3||n.nodeType==8){n.nodeValue=n.nodeValue.replace(new RegExp('\\smce_src=\"[^\"]*\"','gi'),"");n.nodeValue=n.nodeValue.replace(new RegExp('\\smce_href=\"[^\"]*\"','gi'),"");}return false;});}tinyMCE._removeInternal(inst.getBody());tinyMCE.selectedInstance=inst;tinyMCE.triggerNodeChange(false,true);},storeAwayURLs:function(s){if(!s.match(/(mce_src|mce_href)/gi,s)){s=s.replace(new RegExp('src\\s*=\\s*\"([^ >\"]*)\"','gi'),'src="$1" mce_src="$1"');s=s.replace(new RegExp('href\\s*=\\s*\"([^ >\"]*)\"','gi'),'href="$1" mce_href="$1"');}return s;},_removeInternal:function(!
 n){if(tinyMCE.isGecko){tinyMCE.selectNodes(n,function(n){if(n.nodeType==3||n.nodeType==8){n.nodeValue=n.nodeValue.replace(new RegExp('\\smce_src=\"[^\"]*\"','gi'),"");n.nodeValue=n.nodeValue.replace(new RegExp('\\smce_href=\"[^\"]*\"','gi'),"");}return false;});}},removeTinyMCEFormElements:function(form_obj){if(typeof(form_obj)=="undefined"||form_obj==null)return;if(form_obj.nodeName!="FORM"){if(form_obj.form)form_obj=form_obj.form;else form_obj=tinyMCE.getParentElement(form_obj,"form");}if(form_obj==null)return;for(var i=0;i<form_obj.elements.length;i++){var elementId=form_obj.elements[i].name?form_obj.elements[i].name:form_obj.elements[i].id;if(elementId.indexOf('mce_editor_')==0)form_obj.elements[i].disabled=true;}},handleEvent:function(e){var inst=tinyMCE.selectedInstance;if(typeof(tinyMCE)=="undefined")return true;if(tinyMCE.executeCallback(tinyMCE.selectedInstance,'handle_event_callback','handleEvent',e))return false;switch(e.type){case"beforedeactivate":case"blur":if!
 (tinyMCE.selectedInstance)tinyMCE.selectedInstance.execCommand!
 ('mceEnd
Typing');tinyMCE.hideMenus();return;case"drop":case"beforepaste":if(tinyMCE.selectedInstance)tinyMCE.selectedInstance.setBaseHREF(null);if(tinyMCE.isMSIE&&!tinyMCE.isOpera){var ife=tinyMCE.selectedInstance.iframeElement;if(ife.style.height.indexOf('%')!=-1){ife._oldHeight=ife.style.height;ife.style.height=ife.clientHeight;}}window.setTimeout("tinyMCE.selectedInstance.setBaseHREF(tinyMCE.settings['base_href']);tinyMCE._resetIframeHeight();",1);return;case"submit":tinyMCE.removeTinyMCEFormElements(tinyMCE.isMSIE?window.event.srcElement:e.target);tinyMCE.triggerSave();tinyMCE.isNotDirty=true;return;case"reset":var formObj=tinyMCE.isMSIE?window.event.srcElement:e.target;for(var i=0;i<document.forms.length;i++){if(document.forms[i]==formObj)window.setTimeout('tinyMCE.resetForm('+i+');',10);}return;case"keypress":if(inst&&inst.handleShortcut(e))return false;if(e.target.editorId){tinyMCE.selectedInstance=tinyMCE.instances[e.target.editorId];}else{if(e.target.ownerDocument.editorId)!
 tinyMCE.selectedInstance=tinyMCE.instances[e.target.ownerDocument.editorId];}if(tinyMCE.selectedInstance)tinyMCE.selectedInstance.switchSettings();if(tinyMCE.isGecko&&tinyMCE.settings['force_p_newlines']&&e.keyCode==13&&!e.shiftKey){if(TinyMCE_ForceParagraphs._insertPara(tinyMCE.selectedInstance,e)){tinyMCE.execCommand("mceAddUndoLevel");tinyMCE.cancelEvent(e);return false;}}if(tinyMCE.isGecko&&tinyMCE.settings['force_p_newlines']&&(e.keyCode==8||e.keyCode==46)&&!e.shiftKey){if(TinyMCE_ForceParagraphs._handleBackSpace(tinyMCE.selectedInstance,e.type)){tinyMCE.execCommand("mceAddUndoLevel");tinyMCE.cancelEvent(e);return false;}}if(tinyMCE.isMSIE&&tinyMCE.settings['force_br_newlines']&&e.keyCode==13){if(e.target.editorId)tinyMCE.selectedInstance=tinyMCE.instances[e.target.editorId];if(tinyMCE.selectedInstance){var sel=tinyMCE.selectedInstance.getDoc().selection;var rng=sel.createRange();if(tinyMCE.getParentElement(rng.parentElement(),"li")!=null)return false;e.returnValue=fal!
 se;e.cancelBubble=true;rng.pasteHTML("<br />");rng.collapse(fa!
 lse);rng
.select();tinyMCE.execCommand("mceAddUndoLevel");tinyMCE.triggerNodeChange(false);return false;}}if(e.keyCode==8||e.keyCode==46){tinyMCE.selectedElement=e.target;tinyMCE.linkElement=tinyMCE.getParentElement(e.target,"a");tinyMCE.imgElement=tinyMCE.getParentElement(e.target,"img");tinyMCE.triggerNodeChange(false);}return false;break;case"keyup":case"keydown":tinyMCE.hideMenus();tinyMCE.hasMouseMoved=false;if(inst&&inst.handleShortcut(e))return false;if(e.target.editorId)tinyMCE.selectedInstance=tinyMCE.instances[e.target.editorId];else return;if(tinyMCE.selectedInstance)tinyMCE.selectedInstance.switchSettings();var inst=tinyMCE.selectedInstance;if(tinyMCE.isGecko&&tinyMCE.settings['force_p_newlines']&&(e.keyCode==8||e.keyCode==46)&&!e.shiftKey){if(TinyMCE_ForceParagraphs._handleBackSpace(tinyMCE.selectedInstance,e.type)){tinyMCE.execCommand("mceAddUndoLevel");e.preventDefault();return false;}}tinyMCE.selectedElement=null;tinyMCE.selectedNode=null;var elm=tinyMCE.selectedInsta!
 nce.getFocusElement();tinyMCE.linkElement=tinyMCE.getParentElement(elm,"a");tinyMCE.imgElement=tinyMCE.getParentElement(elm,"img");tinyMCE.selectedElement=elm;if(tinyMCE.isGecko&&e.type=="keyup"&&e.keyCode==9)tinyMCE.handleVisualAid(tinyMCE.selectedInstance.getBody(),true,tinyMCE.settings['visual'],tinyMCE.selectedInstance);if(tinyMCE.isMSIE&&e.type=="keydown"&&e.keyCode==13)tinyMCE.enterKeyElement=tinyMCE.selectedInstance.getFocusElement();if(tinyMCE.isMSIE&&e.type=="keyup"&&e.keyCode==13){var elm=tinyMCE.enterKeyElement;if(elm){var re=new RegExp('^HR|IMG|BR$','g');var dre=new RegExp('^H[1-6]$','g');if(!elm.hasChildNodes()&&!re.test(elm.nodeName)){if(dre.test(elm.nodeName))elm.innerHTML="&nbsp;&nbsp;";else elm.innerHTML="&nbsp;";}}}var keys=tinyMCE.posKeyCodes;var posKey=false;for(var i=0;i<keys.length;i++){if(keys[i]==e.keyCode){posKey=true;break;}}if(tinyMCE.isMSIE&&tinyMCE.settings['custom_undo_redo']){var keys=new Array(8,46);for(var i=0;i<keys.length;i++){if(keys[i]==!
 e.keyCode){if(e.type=="keyup")tinyMCE.triggerNodeChange(false)!
 ;}}}if(e
.keyCode==17)return true;if(!posKey&&e.type=="keyup")tinyMCE.execCommand("mceStartTyping");if(e.type=="keydown"&&(posKey||e.ctrlKey)&&inst)inst.undoBookmark=inst.selection.getBookmark();if(e.type=="keyup"&&(posKey||e.ctrlKey))tinyMCE.execCommand("mceEndTyping");if(posKey&&e.type=="keyup")tinyMCE.triggerNodeChange(false);if(tinyMCE.isMSIE&&e.ctrlKey)window.setTimeout('tinyMCE.triggerNodeChange(false);',1);break;case"mousedown":case"mouseup":case"click":case"focus":tinyMCE.hideMenus();if(tinyMCE.selectedInstance){tinyMCE.selectedInstance.switchSettings();tinyMCE.selectedInstance.isFocused=true;}var targetBody=tinyMCE.getParentElement(e.target,"body");for(var instanceName in tinyMCE.instances){if(!tinyMCE.isInstance(tinyMCE.instances[instanceName]))continue;var inst=tinyMCE.instances[instanceName];inst.autoResetDesignMode();if(inst.getBody()==targetBody){tinyMCE.selectedInstance=inst;tinyMCE.selectedElement=e.target;tinyMCE.linkElement=tinyMCE.getParentElement(tinyMCE.selectedE!
 lement,"a");tinyMCE.imgElement=tinyMCE.getParentElement(tinyMCE.selectedElement,"img");break;}}if(!tinyMCE.selectedInstance.undoRedo.undoLevels[0].bookmark)tinyMCE.selectedInstance.undoRedo.undoLevels[0].bookmark=tinyMCE.selectedInstance.selection.getBookmark();if(tinyMCE.isSafari){tinyMCE.selectedInstance.lastSafariSelection=tinyMCE.selectedInstance.selection.getBookmark();tinyMCE.selectedInstance.lastSafariSelectedElement=tinyMCE.selectedElement;var lnk=tinyMCE.getParentElement(tinyMCE.selectedElement,"a");if(lnk&&e.type=="mousedown"){lnk.setAttribute("mce_real_href",lnk.getAttribute("href"));lnk.setAttribute("href","javascript:void(0);");}if(lnk&&e.type=="click"){window.setTimeout(function(){lnk.setAttribute("href",lnk.getAttribute("mce_real_href"));lnk.removeAttribute("mce_real_href");},10);}}if(e.type!="focus")tinyMCE.selectedNode=null;tinyMCE.triggerNodeChange(false);tinyMCE.execCommand("mceEndTyping");if(e.type=="mouseup")tinyMCE.execCommand("mceAddUndoLevel");if(!ti!
 nyMCE.selectedInstance&&e.target.editorId)tinyMCE.selectedInst!
 ance=tin
yMCE.instances[e.target.editorId];return false;break;}},getButtonHTML:function(id,lang,img,cmd,ui,val){var h='',m,x;cmd='tinyMCE.execInstanceCommand(\'{$editor_id}\',\''+cmd+'\'';if(typeof(ui)!="undefined"&&ui!=null)cmd+=','+ui;if(typeof(val)!="undefined"&&val!=null)cmd+=",'"+val+"'";cmd+=');';if(tinyMCE.getParam('button_tile_map')&&(!tinyMCE.isMSIE||tinyMCE.isOpera)&&(m=this.buttonMap[id])!=null&&(tinyMCE.getParam("language")=="en"||img.indexOf('$lang')==-1)){x=0-(m*20)==0?'0':0-(m*20);h+='<a id="{$editor_id}_'+id+'" href="javascript:'+cmd+'" onclick="'+cmd+'return false;" onmousedown="return false;" class="mceTiledButton mceButtonNormal" target="_self">';h+='<img src="{$themeurl}/images/spacer.gif" style="background-position: '+x+'px 0" title="{$'+lang+'}" />';h+='</a>';}else{h+='<a id="{$editor_id}_'+id+'" href="javascript:'+cmd+'" onclick="'+cmd+'return false;" onmousedown="return false;" class="mceButtonNormal" target="_self">';h+='<img src="'+img+'" title="{$'+lang+'}"!
  />';h+='</a>';}return h;},addButtonMap:function(m){var i,a=m.replace(/\s+/,'').split(',');for(i=0;i<a.length;i++)this.buttonMap[a[i]]=i;},submitPatch:function(){tinyMCE.removeTinyMCEFormElements(this);tinyMCE.triggerSave();this.mceOldSubmit();tinyMCE.isNotDirty=true;},onLoad:function(){if(tinyMCE.settings.strict_loading_mode&&this.loadingIndex!=-1){window.setTimeout('tinyMCE.onLoad();',1);return;}if(tinyMCE.isMSIE&&!tinyMCE.isOpera&&window.event.type=="readystatechange"&&document.readyState!="complete")return true;if(tinyMCE.isLoaded)return true;tinyMCE.isLoaded=true;tinyMCE.dispatchCallback(null,'onpageload','onPageLoad');for(var c=0;c<tinyMCE.configs.length;c++){tinyMCE.settings=tinyMCE.configs[c];var selector=tinyMCE.getParam("editor_selector");var deselector=tinyMCE.getParam("editor_deselector");var elementRefAr=new Array();if(document.forms&&tinyMCE.settings['add_form_submit_trigger']&&!tinyMCE.submitTriggers){for(var i=0;i<document.forms.length;i++){var form=document!
 .forms[i];tinyMCE.addEvent(form,"submit",TinyMCE_Engine.protot!
 ype.hand
leEvent);tinyMCE.addEvent(form,"reset",TinyMCE_Engine.prototype.handleEvent);tinyMCE.submitTriggers=true;if(tinyMCE.settings['submit_patch']){try{form.mceOldSubmit=form.submit;form.submit=TinyMCE_Engine.prototype.submitPatch;}catch(e){}}}}var mode=tinyMCE.settings['mode'];switch(mode){case"exact":var elements=tinyMCE.getParam('elements','',true,',');for(var i=0;i<elements.length;i++){var element=tinyMCE._getElementById(elements[i]);var trigger=element?element.getAttribute(tinyMCE.settings['textarea_trigger']):"";if(tinyMCE.getAttrib(element,"class").indexOf(deselector)!=-1)continue;if(trigger=="false")continue;if((tinyMCE.settings['ask']||tinyMCE.settings['convert_on_click'])&&element){elementRefAr[elementRefAr.length]=element;continue;}if(element)tinyMCE.addMCEControl(element,elements[i]);else if(tinyMCE.settings['debug'])alert("Error: Could not find element by id or name: "+elements[i]);}break;case"specific_textareas":case"textareas":var nodeList=document.getElementsByTagN!
 ame("textarea");for(var i=0;i<nodeList.length;i++){var elm=nodeList.item(i);var trigger=elm.getAttribute(tinyMCE.settings['textarea_trigger']);if(selector!=''&&tinyMCE.getAttrib(elm,"class").indexOf(selector)==-1)continue;if(selector!='')trigger=selector!=""?"true":"";if(tinyMCE.getAttrib(elm,"class").indexOf(deselector)!=-1)continue;if((mode=="specific_textareas"&&trigger=="true")||(mode=="textareas"&&trigger!="false"))elementRefAr[elementRefAr.length]=elm;}break;}for(var i=0;i<elementRefAr.length;i++){var element=elementRefAr[i];var elementId=element.name?element.name:element.id;if(tinyMCE.settings['ask']||tinyMCE.settings['convert_on_click']){if(tinyMCE.isGecko){var settings=tinyMCE.settings;tinyMCE.addEvent(element,"focus",function(e){window.setTimeout(function(){TinyMCE_Engine.prototype.confirmAdd(e,settings);},10);});if(element.nodeName!="TEXTAREA"&&element.nodeName!="INPUT")tinyMCE.addEvent(element,"click",function(e){window.setTimeout(function(){TinyMCE_Engine.proto!
 type.confirmAdd(e,settings);},10);});}else{var settings=tinyMC!
 E.settin
gs;tinyMCE.addEvent(element,"focus",function(){TinyMCE_Engine.prototype.confirmAdd(null,settings);});tinyMCE.addEvent(element,"click",function(){TinyMCE_Engine.prototype.confirmAdd(null,settings);});}}else tinyMCE.addMCEControl(element,elementId);}if(tinyMCE.settings['auto_focus']){window.setTimeout(function(){var inst=tinyMCE.getInstanceById(tinyMCE.settings['auto_focus']);inst.selection.selectNode(inst.getBody(),true,true);inst.contentWindow.focus();},10);}tinyMCE.dispatchCallback(null,'oninit','onInit');}},isInstance:function(o){return o!=null&&typeof(o)=="object"&&o.isTinyMCE_Control;},getParam:function(name,default_value,strip_whitespace,split_chr){var value=(typeof(this.settings[name])=="undefined")?default_value:this.settings[name];if(value=="true"||value=="false")return(value=="true");if(strip_whitespace)value=tinyMCE.regexpReplace(value,"[ \t\r\n]","");if(typeof(split_chr)!="undefined"&&split_chr!=null){value=value.split(split_chr);var outArray=new Array();for(var i!
 =0;i<value.length;i++){if(value[i]&&value[i]!="")outArray[outArray.length]=value[i];}value=outArray;}return value;},getLang:function(name,default_value,parse_entities,va){var v=(typeof(tinyMCELang[name])=="undefined")?default_value:tinyMCELang[name],n;if(parse_entities)v=tinyMCE.entityDecode(v);if(va){for(n in va)v=this.replaceVar(v,n,va[n]);}return v;},entityDecode:function(s){var e=document.createElement("div");e.innerHTML=s;return e.innerHTML;},addToLang:function(prefix,ar){for(var key in ar){if(typeof(ar[key])=='function')continue;tinyMCELang[(key.indexOf('lang_')==-1?'lang_':'')+(prefix!=''?(prefix+"_"):'')+key]=ar[key];}this.loadNextScript();},triggerNodeChange:function(focus,setup_content){if(tinyMCE.selectedInstance){var inst=tinyMCE.selectedInstance;var editorId=inst.editorId;var elm=(typeof(setup_content)!="undefined"&&setup_content)?tinyMCE.selectedElement:inst.getFocusElement();var undoIndex=-1;var undoLevels=-1;var anySelection=false;var selectedText=inst.selec!
 tion.getSelectedText();if(setup_content&&tinyMCE.isGecko&&inst!
 .isHidde
n())elm=inst.getBody();inst.switchSettings();if(tinyMCE.settings["auto_resize"]){var doc=inst.getDoc();inst.iframeElement.style.width=doc.body.offsetWidth+"px";inst.iframeElement.style.height=doc.body.offsetHeight+"px";}if(tinyMCE.selectedElement)anySelection=(tinyMCE.selectedElement.nodeName.toLowerCase()=="img")||(selectedText&&selectedText.length>0);if(tinyMCE.settings['custom_undo_redo']){undoIndex=inst.undoRedo.undoIndex;undoLevels=inst.undoRedo.undoLevels.length;}tinyMCE.dispatchCallback(inst,'handle_node_change_callback','handleNodeChange',editorId,elm,undoIndex,undoLevels,inst.visualAid,anySelection,setup_content);}if(this.selectedInstance&&(typeof(focus)=="undefined"||focus))this.selectedInstance.contentWindow.focus();},_customCleanup:function(inst,type,content){var pl,po,i;var customCleanup=tinyMCE.settings['cleanup_callback'];if(customCleanup!=""&&eval("typeof("+customCleanup+")")!="undefined")content=eval(customCleanup+"(type, content, inst);");pl=inst.plugins;fo!
 r(i=0;i<pl.length;i++){po=tinyMCE.plugins[pl[i]];if(po&&po.cleanup)content=po.cleanup(type,content,inst);}return content;},setContent:function(h){if(tinyMCE.selectedInstance){tinyMCE.selectedInstance.execCommand('mceSetContent',false,h);tinyMCE.selectedInstance.repaint();}},importThemeLanguagePack:function(name){if(typeof(name)=="undefined")name=tinyMCE.settings['theme'];tinyMCE.loadScript(tinyMCE.baseURL+'/themes/'+name+'/langs/'+tinyMCE.settings['language']+'.js');},importPluginLanguagePack:function(name,valid_languages){var lang="en",b=tinyMCE.baseURL+'/plugins/'+name;valid_languages=valid_languages.split(',');for(var i=0;i<valid_languages.length;i++){if(tinyMCE.settings['language']==valid_languages[i])lang=tinyMCE.settings['language'];}if(this.plugins[name])b=this.plugins[name].baseURL;tinyMCE.loadScript(b+'/langs/'+lang+'.js');},applyTemplate:function(h,as){var i,s,ar=h.match(new RegExp('\\{\\$[a-z0-9_]+\\}','gi'));if(ar&&ar.length>0){for(i=ar.length-1;i>=0;i--){s=ar[i!
 ].substring(2,ar[i].length-1);if(s.indexOf('lang_')==0&&tinyMC!
 ELang[s]
)h=tinyMCE.replaceVar(h,s,tinyMCELang[s]);else if(as&&as[s])h=tinyMCE.replaceVar(h,s,as[s]);else if(tinyMCE.settings[s])h=tinyMCE.replaceVar(h,s,tinyMCE.settings[s]);}}h=tinyMCE.replaceVar(h,"themeurl",tinyMCE.themeURL);return h;},replaceVar:function(h,r,v){return h.replace(new RegExp('{\\\$'+r+'}','g'),v);},openWindow:function(template,args){var html,width,height,x,y,resizable,scrollbars,url;args['mce_template_file']=template['file'];args['mce_width']=template['width'];args['mce_height']=template['height'];tinyMCE.windowArgs=args;html=template['html'];if(!(width=parseInt(template['width'])))width=320;if(!(height=parseInt(template['height'])))height=200;if(tinyMCE.isMSIE)height+=40;else height+=20;x=parseInt(screen.width/2.0)-(width/2.0);y=parseInt(screen.height/2.0)-(height/2.0);resizable=(args&&args['resizable'])?args['resizable']:"no";scrollbars=(args&&args['scrollbars'])?args['scrollbars']:"no";if(template['file'].charAt(0)!='/'&&template['file'].indexOf('://')==-1)url=t!
 inyMCE.baseURL+"/themes/"+tinyMCE.getParam("theme")+"/"+template['file'];else url=template['file'];for(var name in args){if(typeof(args[name])=='function')continue;url=tinyMCE.replaceVar(url,name,escape(args[name]));}if(html){html=tinyMCE.replaceVar(html,"css",this.settings['popups_css']);html=tinyMCE.applyTemplate(html,args);var win=window.open("","mcePopup"+new Date().getTime(),"top="+y+",left="+x+",scrollbars="+scrollbars+",dialog=yes,minimizable="+resizable+",modal=yes,width="+width+",height="+height+",resizable="+resizable);if(win==null){alert(tinyMCELang['lang_popup_blocked']);return;}win.document.write(html);win.document.close();win.resizeTo(width,height);win.focus();}else{if((tinyMCE.isMSIE&&!tinyMCE.isOpera)&&resizable!='yes'&&tinyMCE.settings["dialog_type"]=="modal"){height+=10;var features="resizable:"+resizable+";scroll:"+scrollbars+";status:yes;center:yes;help:no;dialogWidth:"+width+"px;dialogHeight:"+height+"px;";window.showModalDialog(url,window,features);}el!
 se{var modal=(resizable=="yes")?"no":"yes";if(tinyMCE.isGecko&!
 &tinyMCE
.isMac)modal="no";if(template['close_previous']!="no")try{tinyMCE.lastWindow.close();}catch(ex){}var win=window.open(url,"mcePopup"+new Date().getTime(),"top="+y+",left="+x+",scrollbars="+scrollbars+",dialog="+modal+",minimizable="+resizable+",modal="+modal+",width="+width+",height="+height+",resizable="+resizable);if(win==null){alert(tinyMCELang['lang_popup_blocked']);return;}if(template['close_previous']!="no")tinyMCE.lastWindow=win;eval('try { win.resizeTo(width, height); } catch(e) { }');if(tinyMCE.isGecko){if(win.document.defaultView.statusbar.visible)win.resizeBy(0,tinyMCE.isMac?10:24);}win.focus();}}},closeWindow:function(win){win.close();},getVisualAidClass:function(class_name,state){var aidClass=tinyMCE.settings['visual_table_class'];if(typeof(state)=="undefined")state=tinyMCE.settings['visual'];var classNames=new Array();var ar=class_name.split(' ');for(var i=0;i<ar.length;i++){if(ar[i]==aidClass)ar[i]="";if(ar[i]!="")classNames[classNames.length]=ar[i];}if(state)c!
 lassNames[classNames.length]=aidClass;var className="";for(var i=0;i<classNames.length;i++){if(i>0)className+=" ";className+=classNames[i];}return className;},handleVisualAid:function(el,deep,state,inst,skip_dispatch){if(!el)return;if(!skip_dispatch)tinyMCE.dispatchCallback(inst,'handle_visual_aid_callback','handleVisualAid',el,deep,state,inst);var tableElement=null;switch(el.nodeName){case"TABLE":var oldW=el.style.width;var oldH=el.style.height;var bo=tinyMCE.getAttrib(el,"border");bo=bo==""||bo=="0"?true:false;tinyMCE.setAttrib(el,"class",tinyMCE.getVisualAidClass(tinyMCE.getAttrib(el,"class"),state&&bo));el.style.width=oldW;el.style.height=oldH;for(var y=0;y<el.rows.length;y++){for(var x=0;x<el.rows[y].cells.length;x++){var cn=tinyMCE.getVisualAidClass(tinyMCE.getAttrib(el.rows[y].cells[x],"class"),state&&bo);tinyMCE.setAttrib(el.rows[y].cells[x],"class",cn);}}break;case"A":var anchorName=tinyMCE.getAttrib(el,"name");if(anchorName!=''&&state){el.title=anchorName;el.class!
 Name='mceItemAnchor';}else if(anchorName!=''&&!state)el.classN!
 ame='';b
reak;}if(deep&&el.hasChildNodes()){for(var i=0;i<el.childNodes.length;i++)tinyMCE.handleVisualAid(el.childNodes[i],deep,state,inst,true);}},fixGeckoBaseHREFBug:function(m,e,h){var nl,i,a,n,xsrc,xhref,el;if(tinyMCE.isGecko){if(m==1){h=h.replace(/\ssrc=/gi," mce_tsrc=");h=h.replace(/\shref=/gi," mce_thref=");return h;}else{el=new Array('a','img','select','area','iframe','base','input','script','embed','object','link');for(a=0;a<el.length;a++){n=e.getElementsByTagName(el[a]);for(i=0;i<n.length;i++){xsrc=tinyMCE.getAttrib(n[i],"mce_tsrc");xhref=tinyMCE.getAttrib(n[i],"mce_thref");if(xsrc!=""){try{n[i].src=tinyMCE.convertRelativeToAbsoluteURL(tinyMCE.settings['base_href'],xsrc);}catch(e){}n[i].removeAttribute("mce_tsrc");}if(xhref!=""){try{n[i].href=tinyMCE.convertRelativeToAbsoluteURL(tinyMCE.settings['base_href'],xhref);}catch(e){}n[i].removeAttribute("mce_thref");}}}el=tinyMCE.selectNodes(e,function(n){if(n.nodeType==3||n.nodeType==8){n.nodeValue=n.nodeValue.replace(/\smce_tsr!
 c=/gi," src=");n.nodeValue=n.nodeValue.replace(/\smce_thref=/gi," href=");}return false;});}}return h;},_setHTML:function(doc,html_content){html_content=tinyMCE.cleanupHTMLCode(html_content);try{tinyMCE.setInnerHTML(doc.body,html_content);}catch(e){if(this.isMSIE)doc.body.createTextRange().pasteHTML(html_content);}if(tinyMCE.isMSIE&&tinyMCE.settings['fix_content_duplication']){var paras=doc.getElementsByTagName("P");for(var i=0;i<paras.length;i++){var node=paras[i];while((node=node.parentNode)!=null){if(node.nodeName=="P")node.outerHTML=node.innerHTML;}}var html=doc.body.innerHTML;tinyMCE.setInnerHTML(doc.body,html);}tinyMCE.cleanupAnchors(doc);if(tinyMCE.getParam("convert_fonts_to_spans"))tinyMCE.convertSpansToFonts(doc);},getEditorId:function(form_element){var inst=this.getInstanceById(form_element);if(!inst)return null;return inst.editorId;},getInstanceById:function(editor_id){var inst=this.instances[editor_id];if(!inst){for(var n in tinyMCE.instances){var instance=tinyM!
 CE.instances[n];if(!tinyMCE.isInstance(instance))continue;if(i!
 nstance.
formTargetElementId==editor_id){inst=instance;break;}}}return inst;},queryInstanceCommandValue:function(editor_id,command){var inst=tinyMCE.getInstanceById(editor_id);if(inst)return inst.queryCommandValue(command);return false;},queryInstanceCommandState:function(editor_id,command){var inst=tinyMCE.getInstanceById(editor_id);if(inst)return inst.queryCommandState(command);return null;},setWindowArg:function(n,v){this.windowArgs[n]=v;},getWindowArg:function(n,d){return(typeof(this.windowArgs[n])=="undefined")?d:this.windowArgs[n];},getCSSClasses:function(editor_id,doc){var output=new Array();if(typeof(tinyMCE.cssClasses)!="undefined")return tinyMCE.cssClasses;if(typeof(editor_id)=="undefined"&&typeof(doc)=="undefined"){var instance;for(var instanceName in tinyMCE.instances){instance=tinyMCE.instances[instanceName];if(!tinyMCE.isInstance(instance))continue;break;}doc=instance.getDoc();}if(typeof(doc)=="undefined"){var instance=tinyMCE.getInstanceById(editor_id);doc=instance.get!
 Doc();}if(doc){var styles=doc.styleSheets;if(styles&&styles.length>0){for(var x=0;x<styles.length;x++){var csses=null;eval("try {var csses = tinyMCE.isMSIE ? doc.styleSheets("+x+").rules : styles["+x+"].cssRules;} catch(e) {}");if(!csses)return new Array();for(var i=0;i<csses.length;i++){var selectorText=csses[i].selectorText;if(selectorText){var rules=selectorText.split(',');for(var c=0;c<rules.length;c++){var rule=rules[c];while(rule.indexOf(' ')==0)rule=rule.substring(1);if(rule.indexOf(' ')!=-1||rule.indexOf(':')!=-1||rule.indexOf('mceItem')!=-1)continue;if(rule.indexOf(tinyMCE.settings['visual_table_class'])!=-1||rule.indexOf('mceEditable')!=-1||rule.indexOf('mceNonEditable')!=-1)continue;if(rule.indexOf('.')!=-1){var cssClass=rule.substring(rule.indexOf('.')+1);var addClass=true;for(var p=0;p<output.length&&addClass;p++){if(output[p]==cssClass)addClass=false;}if(addClass)output[output.length]=cssClass;}}}}}}}if(output.length>0)tinyMCE.cssClasses=output;return output;}!
 ,regexpReplace:function(in_str,reg_exp,replace_str,opts){if(in!
 _str==nu
ll)return in_str;if(typeof(opts)=="undefined")opts='g';var re=new RegExp(reg_exp,opts);return in_str.replace(re,replace_str);},trim:function(s){return s.replace(/^\s*|\s*$/g,"");},cleanupEventStr:function(s){s=""+s;s=s.replace('function anonymous()\n{\n','');s=s.replace('\n}','');s=s.replace(/^return true;/gi,'');return s;},getControlHTML:function(c){var i,l,n,o,v;l=tinyMCE.plugins;for(n in l){o=l[n];if(o.getControlHTML&&(v=o.getControlHTML(c))!='')return tinyMCE.replaceVar(v,"pluginurl",o.baseURL);}o=tinyMCE.themes[tinyMCE.settings['theme']];if(o.getControlHTML&&(v=o.getControlHTML(c))!='')return v;return'';},evalFunc:function(f,idx,a){var s='(',i;for(i=idx;i<a.length;i++){s+='a['+i+']';if(i<a.length-1)s+=',';}s+=');';return eval("f"+s);},dispatchCallback:function(i,p,n){return this.callFunc(i,p,n,0,this.dispatchCallback.arguments);},executeCallback:function(i,p,n){return this.callFunc(i,p,n,1,this.executeCallback.arguments);},execCommandCallback:function(i,p,n){return this!
 .callFunc(i,p,n,2,this.execCommandCallback.arguments);},callFunc:function(ins,p,n,m,a){var l,i,on,o,s,v;s=m==2;l=tinyMCE.getParam(p,'');if(l!=''&&(v=tinyMCE.evalFunc(typeof(l)=="function"?l:eval(l),3,a))==s&&m>0)return true;if(ins!=null){for(i=0,l=ins.plugins;i<l.length;i++){o=tinyMCE.plugins[l[i]];if(o[n]&&(v=tinyMCE.evalFunc(o[n],3,a))==s&&m>0)return true;}}l=tinyMCE.themes;for(on in l){o=l[on];if(o[n]&&(v=tinyMCE.evalFunc(o[n],3,a))==s&&m>0)return true;}return false;},xmlEncode:function(s){s=""+s;s=s.replace(/&/g,'&amp;');s=s.replace(new RegExp('"','g'),'&quot;');s=s.replace(/\'/g,'&#39;');s=s.replace(/</g,'&lt;');s=s.replace(/>/g,'&gt;');return s;},extend:function(p,np){var o={};o.parent=p;for(n in p)o[n]=p[n];for(n in np)o[n]=np[n];return o;},hideMenus:function(){var e=tinyMCE.lastSelectedMenuBtn;if(tinyMCE.lastMenu){tinyMCE.lastMenu.hide();tinyMCE.lastMenu=null;}if(e){tinyMCE.switchClass(e,tinyMCE.lastMenuBtnClass);tinyMCE.lastSelectedMenuBtn=null;}},explode:function(!
 d,s){var ar=s.split(d),oar=new Array(),i;for(i=0;i<ar.length;i!
 ++){if(a
r[i]!="")oar[oar.length]=ar[i];}return oar;}};var TinyMCE=TinyMCE_Engine;var tinyMCE=new TinyMCE_Engine();var tinyMCELang={};function TinyMCE_Control(settings){var t,i,to,fu,p,x,fn,fu,pn,s=settings;this.undoRedoLevel=true;this.isTinyMCE_Control=true;this.settings=s;this.settings['theme']=tinyMCE.getParam("theme","default");this.settings['width']=tinyMCE.getParam("width",-1);this.settings['height']=tinyMCE.getParam("height",-1);this.selection=new TinyMCE_Selection(this);this.undoRedo=new TinyMCE_UndoRedo(this);this.cleanup=new TinyMCE_Cleanup();this.shortcuts=new Array();this.hasMouseMoved=false;this.cleanup.init({valid_elements:s.valid_elements,extended_valid_elements:s.extended_valid_elements,entities:s.entities,entity_encoding:s.entity_encoding,debug:s.cleanup_debug,url_converter:'TinyMCE_Cleanup.prototype._urlConverter',indent:s.apply_source_formatting,invalid_elements:s.invalid_elements,verify_html:s.verify_html,fix_content_duplication:s.fix_content_duplication});t=this.!
 settings['theme'];if(!tinyMCE.hasTheme(t)){fn=tinyMCE.callbacks;to={};for(i=0;i<fn.length;i++){if((fu=window['TinyMCE_'+t+"_"+fn[i]]))to[fn[i]]=fu;}tinyMCE.addTheme(t,to);}this.plugins=new Array();p=tinyMCE.getParam('plugins','',true,',');if(p.length>0){for(i=0;i<p.length;i++){pn=p[i];if(pn.charAt(0)=='-')pn=pn.substring(1);if(!tinyMCE.hasPlugin(pn)){fn=tinyMCE.callbacks;to={};for(x=0;x<fn.length;x++){if((fu=window['TinyMCE_'+pn+"_"+fn[x]]))to[fn[x]]=fu;}tinyMCE.addPlugin(pn,to);}this.plugins[this.plugins.length]=pn;}}};TinyMCE_Control.prototype={hasPlugin:function(n){var i;for(i=0;i<this.plugins.length;i++){if(this.plugins[i]==n)return true;}return false;},addPlugin:function(n,p){if(!this.hasPlugin(n)){tinyMCE.addPlugin(n,p);this.plugins[this.plugins.length]=n;}},repaint:function(){if(tinyMCE.isMSIE&&!tinyMCE.isOpera)return;try{var s=this.selection;var b=s.getBookmark(true);this.getBody().style.display='none';this.getDoc().execCommand('selectall',false,null);this.getSel().!
 collapseToStart();this.getBody().style.display='block';s.moveT!
 oBookmar
k(b);}catch(ex){}},switchSettings:function(){if(tinyMCE.configs.length>1&&tinyMCE.currentConfig!=this.settings['index']){tinyMCE.settings=this.settings;tinyMCE.currentConfig=this.settings['index'];}},getBody:function(){return this.getDoc().body;},getDoc:function(){return this.contentWindow.document;},getWin:function(){return this.contentWindow;},addShortcut:function(m,k,d,cmd,ui,va){var n=typeof(k)=="number",ie=tinyMCE.isMSIE,c,sc,i;var scl=this.shortcuts;if(!tinyMCE.getParam('custom_shortcuts'))return false;m=m.toLowerCase();k=ie&&!n?k.toUpperCase():k;c=n?null:k.charCodeAt(0);d=d&&d.indexOf('lang_')==0?tinyMCE.getLang(d):d;sc={alt:m.indexOf('alt')!=-1,ctrl:m.indexOf('ctrl')!=-1,shift:m.indexOf('shift')!=-1,charCode:c,keyCode:n?k:(ie?c:null),desc:d,cmd:cmd,ui:ui,val:va};for(i=0;i<scl.length;i++){if(sc.alt==scl[i].alt&&sc.ctrl==scl[i].ctrl&&sc.shift==scl[i].shift&&sc.charCode==scl[i].charCode&&sc.keyCode==scl[i].keyCode){return false;}}scl[scl.length]=sc;return true;},handleS!
 hortcut:function(e){var i,s=this.shortcuts,o;for(i=0;i<s.length;i++){o=s[i];if(o.alt==e.altKey&&o.ctrl==e.ctrlKey&&(o.keyCode==e.keyCode||o.charCode==e.charCode)){if(o.cmd&&(e.type=="keydown"||(e.type=="keypress"&&!tinyMCE.isOpera)))tinyMCE.execCommand(o.cmd,o.ui,o.val);tinyMCE.cancelEvent(e);return true;}}return false;},autoResetDesignMode:function(){if(!tinyMCE.isMSIE&&this.isHidden()&&tinyMCE.getParam('auto_reset_designmode'))eval('try { this.getDoc().designMode = "On"; } catch(e) {}');},isHidden:function(){if(tinyMCE.isMSIE)return false;var s=this.getSel();return(!s||!s.rangeCount||s.rangeCount==0);},isDirty:function(){return this.startContent!=tinyMCE.trim(this.getBody().innerHTML)&&!tinyMCE.isNotDirty;},_mergeElements:function(scmd,pa,ch,override){if(scmd=="removeformat"){pa.className="";pa.style.cssText="";ch.className="";ch.style.cssText="";return;}var st=tinyMCE.parseStyle(tinyMCE.getAttrib(pa,"style"));var stc=tinyMCE.parseStyle(tinyMCE.getAttrib(ch,"style"));var !
 className=tinyMCE.getAttrib(pa,"class");className+=" "+tinyMCE!
 .getAttr
ib(ch,"class");if(override){for(var n in st){if(typeof(st[n])=='function')continue;stc[n]=st[n];}}else{for(var n in stc){if(typeof(stc[n])=='function')continue;st[n]=stc[n];}}tinyMCE.setAttrib(pa,"style",tinyMCE.serializeStyle(st));tinyMCE.setAttrib(pa,"class",tinyMCE.trim(className));ch.className="";ch.style.cssText="";ch.removeAttribute("class");ch.removeAttribute("style");},_setUseCSS:function(b){var d=this.getDoc();try{d.execCommand("useCSS",false,!b);}catch(ex){}try{d.execCommand("styleWithCSS",false,b);}catch(ex){}if(!tinyMCE.getParam("table_inline_editing"))try{d.execCommand('enableInlineTableEditing',false,"false");}catch(ex){}if(!tinyMCE.getParam("object_resizing"))try{d.execCommand('enableObjectResizing',false,"false");}catch(ex){}},execCommand:function(command,user_interface,value){var doc=this.getDoc();var win=this.getWin();var focusElm=this.getFocusElement();if(!new RegExp('mceStartTyping|mceEndTyping|mceBeginUndoLevel|mceEndUndoLevel|mceAddUndoLevel','gi').test!
 (command))this.undoBookmark=null;if(this.lastSafariSelection&&!new RegExp('mceStartTyping|mceEndTyping|mceBeginUndoLevel|mceEndUndoLevel|mceAddUndoLevel','gi').test(command)){this.selection.moveToBookmark(this.lastSafariSelection);tinyMCE.selectedElement=this.lastSafariSelectedElement;}if(!tinyMCE.isMSIE&&!this.useCSS){this._setUseCSS(false);this.useCSS=true;}this.contentDocument=doc;if(tinyMCE.execCommandCallback(this,'execcommand_callback','execCommand',this.editorId,this.getBody(),command,user_interface,value))return;if(focusElm&&focusElm.nodeName=="IMG"){var align=focusElm.getAttribute('align');var img=command=="JustifyCenter"?focusElm.cloneNode(false):focusElm;switch(command){case"JustifyLeft":if(align=='left')img.removeAttribute('align');else img.setAttribute('align','left');var div=focusElm.parentNode;if(div&&div.nodeName=="DIV"&&div.childNodes.length==1&&div.parentNode)div.parentNode.replaceChild(img,div);this.selection.selectNode(img);this.repaint();tinyMCE.trigger!
 NodeChange();return;case"JustifyCenter":img.removeAttribute('a!
 lign');v
ar div=tinyMCE.getParentElement(focusElm,"div");if(div&&div.style.textAlign=="center"){if(div.nodeName=="DIV"&&div.childNodes.length==1&&div.parentNode)div.parentNode.replaceChild(img,div);}else{var div=this.getDoc().createElement("div");div.style.textAlign='center';div.appendChild(img);focusElm.parentNode.replaceChild(div,focusElm);}this.selection.selectNode(img);this.repaint();tinyMCE.triggerNodeChange();return;case"JustifyRight":if(align=='right')img.removeAttribute('align');else img.setAttribute('align','right');var div=focusElm.parentNode;if(div&&div.nodeName=="DIV"&&div.childNodes.length==1&&div.parentNode)div.parentNode.replaceChild(img,div);this.selection.selectNode(img);this.repaint();tinyMCE.triggerNodeChange();return;}}if(tinyMCE.settings['force_br_newlines']){var alignValue="";if(doc.selection.type!="Control"){switch(command){case"JustifyLeft":alignValue="left";break;case"JustifyCenter":alignValue="center";break;case"JustifyFull":alignValue="justify";break;case"J!
 ustifyRight":alignValue="right";break;}if(alignValue!=""){var rng=doc.selection.createRange();if((divElm=tinyMCE.getParentElement(rng.parentElement(),"div"))!=null)divElm.setAttribute("align",alignValue);else if(rng.pasteHTML&&rng.htmlText.length>0)rng.pasteHTML('<div align="'+alignValue+'">'+rng.htmlText+"</div>");tinyMCE.triggerNodeChange();return;}}}switch(command){case"mceRepaint":this.repaint();return true;case"InsertUnorderedList":case"InsertOrderedList":var tag=(command=="InsertUnorderedList")?"ul":"ol";if(tinyMCE.isSafari)this.execCommand("mceInsertContent",false,"<"+tag+"><li>&nbsp;</li><"+tag+">");else this.getDoc().execCommand(command,user_interface,value);tinyMCE.triggerNodeChange();break;case"Strikethrough":if(tinyMCE.isSafari)this.execCommand("mceInsertContent",false,"<strike>"+this.selection.getSelectedHTML()+"</strike>");else this.getDoc().execCommand(command,user_interface,value);tinyMCE.triggerNodeChange();break;case"mceSelectNode":this.selection.selectNod!
 e(value);tinyMCE.triggerNodeChange();tinyMCE.selectedNode=valu!
 e;break;
case"FormatBlock":if(value==null||value==""){var elm=tinyMCE.getParentElement(this.getFocusElement(),"p,div,h1,h2,h3,h4,h5,h6,pre,address,blockquote,dt,dl,dd,samp");if(elm)this.execCommand("mceRemoveNode",false,elm);}else{if(tinyMCE.isGecko&&new RegExp('<(div|blockquote|code|dt|dd|dl|samp)>','gi').test(value))value=value.replace(/[^a-z]/gi,'');if(tinyMCE.isMSIE&&new RegExp('blockquote|code|samp','gi').test(value)){var b=this.selection.getBookmark();this.getDoc().execCommand("FormatBlock",false,'<p>');tinyMCE.renameElement(tinyMCE.getParentBlockElement(this.getFocusElement()),value);this.selection.moveToBookmark(b);}else this.getDoc().execCommand("FormatBlock",false,value);}tinyMCE.triggerNodeChange();break;case"mceRemoveNode":if(!value)value=tinyMCE.getParentElement(this.getFocusElement());if(tinyMCE.isMSIE){value.outerHTML=value.innerHTML;}else{var rng=value.ownerDocument.createRange();rng.setStartBefore(value);rng.setEndAfter(value);rng.deleteContents();rng.insertNode(rng.!
 createContextualFragment(value.innerHTML));}tinyMCE.triggerNodeChange();break;case"mceSelectNodeDepth":var parentNode=this.getFocusElement();for(var i=0;parentNode;i++){if(parentNode.nodeName.toLowerCase()=="body")break;if(parentNode.nodeName.toLowerCase()=="#text"){i--;parentNode=parentNode.parentNode;continue;}if(i==value){this.selection.selectNode(parentNode,false);tinyMCE.triggerNodeChange();tinyMCE.selectedNode=parentNode;return;}parentNode=parentNode.parentNode;}break;case"SetStyleInfo":var rng=this.getRng();var sel=this.getSel();var scmd=value['command'];var sname=value['name'];var svalue=value['value']==null?'':value['value'];var wrapper=value['wrapper']?value['wrapper']:"span";var parentElm=null;var invalidRe=new RegExp("^BODY|HTML$","g");var invalidParentsRe=tinyMCE.settings['merge_styles_invalid_parents']!=''?new RegExp(tinyMCE.settings['merge_styles_invalid_parents'],"gi"):null;if(tinyMCE.isMSIE){if(rng.item)parentElm=rng.item(0);else{var pelm=rng.parentElement(!
 );var prng=doc.selection.createRange();prng.moveToElementText(!
 pelm);if
(rng.htmlText==prng.htmlText||rng.boundingWidth==0){if(invalidParentsRe==null||!invalidParentsRe.test(pelm.nodeName))parentElm=pelm;}}}else{var felm=this.getFocusElement();if(sel.isCollapsed||(new RegExp('td|tr|tbody|table','gi').test(felm.nodeName)&&sel.anchorNode==felm.parentNode))parentElm=felm;}if(parentElm&&!invalidRe.test(parentElm.nodeName)){if(scmd=="setstyle")tinyMCE.setStyleAttrib(parentElm,sname,svalue);if(scmd=="setattrib")tinyMCE.setAttrib(parentElm,sname,svalue);if(scmd=="removeformat"){parentElm.style.cssText='';tinyMCE.setAttrib(parentElm,'class','');}var ch=tinyMCE.getNodeTree(parentElm,new Array(),1);for(var z=0;z<ch.length;z++){if(ch[z]==parentElm)continue;if(scmd=="setstyle")tinyMCE.setStyleAttrib(ch[z],sname,'');if(scmd=="setattrib")tinyMCE.setAttrib(ch[z],sname,'');if(scmd=="removeformat"){ch[z].style.cssText='';tinyMCE.setAttrib(ch[z],'class','');}}}else{this._setUseCSS(false);doc.execCommand("FontName",false,"#mce_temp_font#");var elementArray=tinyMCE!
 .getElementsByAttributeValue(this.getBody(),"font","face","#mce_temp_font#");for(var x=0;x<elementArray.length;x++){elm=elementArray[x];if(elm){var spanElm=doc.createElement(wrapper);if(scmd=="setstyle")tinyMCE.setStyleAttrib(spanElm,sname,svalue);if(scmd=="setattrib")tinyMCE.setAttrib(spanElm,sname,svalue);if(scmd=="removeformat"){spanElm.style.cssText='';tinyMCE.setAttrib(spanElm,'class','');}if(elm.hasChildNodes()){for(var i=0;i<elm.childNodes.length;i++)spanElm.appendChild(elm.childNodes[i].cloneNode(true));}spanElm.setAttribute("mce_new","true");elm.parentNode.replaceChild(spanElm,elm);var ch=tinyMCE.getNodeTree(spanElm,new Array(),1);for(var z=0;z<ch.length;z++){if(ch[z]==spanElm)continue;if(scmd=="setstyle")tinyMCE.setStyleAttrib(ch[z],sname,'');if(scmd=="setattrib")tinyMCE.setAttrib(ch[z],sname,'');if(scmd=="removeformat"){ch[z].style.cssText='';tinyMCE.setAttrib(ch[z],'class','');}}}}}var nodes=doc.getElementsByTagName(wrapper);for(var i=nodes.length-1;i>=0;i--){va!
 r elm=nodes[i];var isNew=tinyMCE.getAttrib(elm,"mce_new")=="tr!
 ue";elm.
removeAttribute("mce_new");if(elm.childNodes&&elm.childNodes.length==1&&elm.childNodes[0].nodeType==1){this._mergeElements(scmd,elm,elm.childNodes[0],isNew);continue;}if(elm.parentNode.childNodes.length==1&&!invalidRe.test(elm.nodeName)&&!invalidRe.test(elm.parentNode.nodeName)){if(invalidParentsRe==null||!invalidParentsRe.test(elm.parentNode.nodeName))this._mergeElements(scmd,elm.parentNode,elm,false);}}var nodes=doc.getElementsByTagName(wrapper);for(var i=nodes.length-1;i>=0;i--){var elm=nodes[i];var isEmpty=true;var tmp=doc.createElement("body");tmp.appendChild(elm.cloneNode(false));tmp.innerHTML=tmp.innerHTML.replace(new RegExp('style=""|class=""','gi'),'');if(new RegExp('<span>','gi').test(tmp.innerHTML)){for(var x=0;x<elm.childNodes.length;x++){if(elm.parentNode!=null)elm.parentNode.insertBefore(elm.childNodes[x].cloneNode(true),elm);}elm.parentNode.removeChild(elm);}}if(scmd=="removeformat")tinyMCE.handleVisualAid(this.getBody(),true,this.visualAid,this);tinyMCE.trigg!
 erNodeChange();break;case"FontName":if(value==null){var s=this.getSel();if(tinyMCE.isGecko&&s.isCollapsed){var f=tinyMCE.getParentElement(this.getFocusElement(),"font");if(f!=null)this.selection.selectNode(f,false);}this.getDoc().execCommand("RemoveFormat",false,null);if(f!=null&&tinyMCE.isGecko){var r=this.getRng().cloneRange();r.collapse(true);s.removeAllRanges();s.addRange(r);}}else this.getDoc().execCommand('FontName',false,value);if(tinyMCE.isGecko)window.setTimeout('tinyMCE.triggerNodeChange(false);',1);return;case"FontSize":this.getDoc().execCommand('FontSize',false,value);if(tinyMCE.isGecko)window.setTimeout('tinyMCE.triggerNodeChange(false);',1);return;case"forecolor":this.getDoc().execCommand('forecolor',false,value);break;case"HiliteColor":if(tinyMCE.isGecko){this._setUseCSS(true);this.getDoc().execCommand('hilitecolor',false,value);this._setUseCSS(false);}else this.getDoc().execCommand('BackColor',false,value);break;case"Cut":case"Copy":case"Paste":var cmdFailed!
 =false;eval('try {this.getDoc().execCommand(command, user_inte!
 rface, v
alue);} catch (e) {cmdFailed = true;}');if(tinyMCE.isOpera&&cmdFailed)alert('Currently not supported by your browser, use keyboard shortcuts instead.');if(tinyMCE.isGecko&&cmdFailed){if(confirm(tinyMCE.entityDecode(tinyMCE.getLang('lang_clipboard_msg'))))window.open('http://www.mozilla.org/editor/midasdemo/securityprefs.html','mceExternal');return;}else tinyMCE.triggerNodeChange();break;case"mceSetContent":if(!value)value="";value=tinyMCE.storeAwayURLs(value);value=tinyMCE._customCleanup(this,"insert_to_editor",value);tinyMCE._setHTML(doc,value);tinyMCE.setInnerHTML(doc.body,tinyMCE._cleanupHTML(this,doc,tinyMCE.settings,doc.body));tinyMCE.convertAllRelativeURLs(doc.body);tinyMCE._removeInternal(this.getBody());if(tinyMCE.getParam("convert_fonts_to_spans"))tinyMCE.convertSpansToFonts(doc);tinyMCE.handleVisualAid(doc.body,true,this.visualAid,this);tinyMCE._setEventsEnabled(doc.body,false);return true;case"mceCleanup":var b=this.selection.getBookmark();tinyMCE._setHTML(this.co!
 ntentDocument,this.getBody().innerHTML);tinyMCE.setInnerHTML(this.getBody(),tinyMCE._cleanupHTML(this,this.contentDocument,this.settings,this.getBody(),this.visualAid));tinyMCE.convertAllRelativeURLs(doc.body);if(tinyMCE.getParam("convert_fonts_to_spans"))tinyMCE.convertSpansToFonts(doc);tinyMCE.handleVisualAid(this.getBody(),true,this.visualAid,this);tinyMCE._setEventsEnabled(this.getBody(),false);this.repaint();this.selection.moveToBookmark(b);tinyMCE.triggerNodeChange();break;case"mceReplaceContent":if(!value)value='';this.getWin().focus();var selectedText="";if(tinyMCE.isMSIE){var rng=doc.selection.createRange();selectedText=rng.text;}else selectedText=this.getSel().toString();if(selectedText.length>0){value=tinyMCE.replaceVar(value,"selection",selectedText);tinyMCE.execCommand('mceInsertContent',false,value);}tinyMCE.triggerNodeChange();break;case"mceSetAttribute":if(typeof(value)=='object'){var targetElms=(typeof(value['targets'])=="undefined")?"p,img,span,div,td,h1,h!
 2,h3,h4,h5,h6,pre,address":value['targets'];var targetNode=tin!
 yMCE.get
ParentElement(this.getFocusElement(),targetElms);if(targetNode){targetNode.setAttribute(value['name'],value['value']);tinyMCE.triggerNodeChange();}}break;case"mceSetCSSClass":this.execCommand("SetStyleInfo",false,{command:"setattrib",name:"class",value:value});break;case"mceInsertRawHTML":var key='tiny_mce_marker';this.execCommand('mceBeginUndoLevel');this.execCommand('mceInsertContent',false,key);var scrollX=this.getDoc().body.scrollLeft+this.getDoc().documentElement.scrollLeft;var scrollY=this.getDoc().body.scrollTop+this.getDoc().documentElement.scrollTop;var html=this.getBody().innerHTML;if((pos=html.indexOf(key))!=-1)tinyMCE.setInnerHTML(this.getBody(),html.substring(0,pos)+value+html.substring(pos+key.length));this.contentWindow.scrollTo(scrollX,scrollY);this.execCommand('mceEndUndoLevel');break;case"mceInsertContent":if(!value)value='';var insertHTMLFailed=false;this.getWin().focus();if(tinyMCE.isGecko||tinyMCE.isOpera){try{if(value.indexOf('<')==-1&&!value.match(/(&#!
 38;|&#160;|&#60;|&#62;)/g)){var r=this.getRng();var n=this.getDoc().createTextNode(tinyMCE.entityDecode(value));var s=this.getSel();var r2=r.cloneRange();s.removeAllRanges();r.deleteContents();r.insertNode(n);r2.selectNode(n);r2.collapse(false);s.removeAllRanges();s.addRange(r2);}else{value=tinyMCE.fixGeckoBaseHREFBug(1,this.getDoc(),value);this.getDoc().execCommand('inserthtml',false,value);tinyMCE.fixGeckoBaseHREFBug(2,this.getDoc(),value);}}catch(ex){insertHTMLFailed=true;}if(!insertHTMLFailed){tinyMCE.triggerNodeChange();return;}}if(tinyMCE.isOpera&&insertHTMLFailed){this.getDoc().execCommand("insertimage",false,tinyMCE.uniqueURL);var ar=tinyMCE.getElementsByAttributeValue(this.getBody(),"img","src",tinyMCE.uniqueURL);ar[0].outerHTML=value;return;}if(!tinyMCE.isMSIE){var isHTML=value.indexOf('<')!=-1;var sel=this.getSel();var rng=this.getRng();if(isHTML){if(tinyMCE.isSafari){var tmpRng=this.getDoc().createRange();tmpRng.setStart(this.getBody(),0);tmpRng.setEnd(this.getB!
 ody(),0);value=tmpRng.createContextualFragment(value);}else va!
 lue=rng.
createContextualFragment(value);}else{var el=document.createElement("div");el.innerHTML=value;value=el.firstChild.nodeValue;value=doc.createTextNode(value);}if(tinyMCE.isSafari&&!isHTML){this.execCommand('InsertText',false,value.nodeValue);tinyMCE.triggerNodeChange();return true;}else if(tinyMCE.isSafari&&isHTML){rng.deleteContents();rng.insertNode(value);tinyMCE.triggerNodeChange();return true;}rng.deleteContents();if(rng.startContainer.nodeType==3){var node=rng.startContainer.splitText(rng.startOffset);node.parentNode.insertBefore(value,node);}else rng.insertNode(value);if(!isHTML){sel.selectAllChildren(doc.body);sel.removeAllRanges();var rng=doc.createRange();rng.selectNode(value);rng.collapse(false);sel.addRange(rng);}else rng.collapse(false);tinyMCE.fixGeckoBaseHREFBug(2,this.getDoc(),value);}else{var rng=doc.selection.createRange();var c=value.indexOf('<!--')!=-1;if(c)value=tinyMCE.uniqueTag+value;if(rng.item)rng.item(0).outerHTML=value;else rng.pasteHTML(value);if(c){!
 var e=this.getDoc().getElementById('mceTMPElement');e.parentNode.removeChild(e);}}tinyMCE.triggerNodeChange();break;case"mceStartTyping":if(tinyMCE.settings['custom_undo_redo']&&this.undoRedo.typingUndoIndex==-1){this.undoRedo.typingUndoIndex=this.undoRedo.undoIndex;this.execCommand('mceAddUndoLevel');}break;case"mceEndTyping":if(tinyMCE.settings['custom_undo_redo']&&this.undoRedo.typingUndoIndex!=-1){this.execCommand('mceAddUndoLevel');this.undoRedo.typingUndoIndex=-1;}break;case"mceBeginUndoLevel":this.undoRedoLevel=false;break;case"mceEndUndoLevel":this.undoRedoLevel=true;this.execCommand('mceAddUndoLevel');break;case"mceAddUndoLevel":if(tinyMCE.settings['custom_undo_redo']&&this.undoRedoLevel){if(this.undoRedo.add())tinyMCE.triggerNodeChange(false);}break;case"Undo":if(tinyMCE.settings['custom_undo_redo']){tinyMCE.execCommand("mceEndTyping");this.undoRedo.undo();tinyMCE.triggerNodeChange();}else this.getDoc().execCommand(command,user_interface,value);break;case"Redo":if!
 (tinyMCE.settings['custom_undo_redo']){tinyMCE.execCommand("mc!
 eEndTypi
ng");this.undoRedo.redo();tinyMCE.triggerNodeChange();}else this.getDoc().execCommand(command,user_interface,value);break;case"mceToggleVisualAid":this.visualAid=!this.visualAid;tinyMCE.handleVisualAid(this.getBody(),true,this.visualAid,this);tinyMCE.triggerNodeChange();break;case"Indent":this.getDoc().execCommand(command,user_interface,value);tinyMCE.triggerNodeChange();if(tinyMCE.isMSIE){var n=tinyMCE.getParentElement(this.getFocusElement(),"blockquote");do{if(n&&n.nodeName=="BLOCKQUOTE"){n.removeAttribute("dir");n.removeAttribute("style");}}while(n!=null&&(n=n.parentNode)!=null);}break;case"removeformat":var text=this.selection.getSelectedText();if(tinyMCE.isOpera){this.getDoc().execCommand("RemoveFormat",false,null);return;}if(tinyMCE.isMSIE){try{var rng=doc.selection.createRange();rng.execCommand("RemoveFormat",false,null);}catch(e){}this.execCommand("SetStyleInfo",false,{command:"removeformat"});}else{this.getDoc().execCommand(command,user_interface,value);this.execCom!
 mand("SetStyleInfo",false,{command:"removeformat"});}if(text.length==0)this.execCommand("mceSetCSSClass",false,"");tinyMCE.triggerNodeChange();break;default:this.getDoc().execCommand(command,user_interface,value);if(tinyMCE.isGecko)window.setTimeout('tinyMCE.triggerNodeChange(false);',1);else tinyMCE.triggerNodeChange();}if(command!="mceAddUndoLevel"&&command!="Undo"&&command!="Redo"&&command!="mceStartTyping"&&command!="mceEndTyping")tinyMCE.execCommand("mceAddUndoLevel");},queryCommandValue:function(c){try{return this.getDoc().queryCommandValue(c);}catch(e){return null;}},queryCommandState:function(c){return this.getDoc().queryCommandState(c);},_onAdd:function(replace_element,form_element_name,target_document){var hc,th,to,editorTemplate;th=this.settings['theme'];to=tinyMCE.themes[th];var targetDoc=target_document?target_document:document;this.targetDoc=targetDoc;tinyMCE.themeURL=tinyMCE.baseURL+"/themes/"+this.settings['theme'];this.settings['themeurl']=tinyMCE.themeURL;!
 if(!replace_element){alert("Error: Could not find the target e!
 lement."
);return false;}if(to.getEditorTemplate)editorTemplate=to.getEditorTemplate(this.settings,this.editorId);var deltaWidth=editorTemplate['delta_width']?editorTemplate['delta_width']:0;var deltaHeight=editorTemplate['delta_height']?editorTemplate['delta_height']:0;var html='<span id="'+this.editorId+'_parent" class="mceEditorContainer">'+editorTemplate['html'];html=tinyMCE.replaceVar(html,"editor_id",this.editorId);this.settings['default_document']=tinyMCE.baseURL+"/blank.htm";this.settings['old_width']=this.settings['width'];this.settings['old_height']=this.settings['height'];if(this.settings['width']==-1)this.settings['width']=replace_element.offsetWidth;if(this.settings['height']==-1)this.settings['height']=replace_element.offsetHeight;if(this.settings['width']==0)this.settings['width']=replace_element.style.width;if(this.settings['height']==0)this.settings['height']=replace_element.style.height;if(this.settings['width']==0)this.settings['width']=320;if(this.settings['height!
 ']==0)this.settings['height']=240;this.settings['area_width']=parseInt(this.settings['width']);this.settings['area_height']=parseInt(this.settings['height']);this.settings['area_width']+=deltaWidth;this.settings['area_height']+=deltaHeight;if((""+this.settings['width']).indexOf('%')!=-1)this.settings['area_width']="100%";if((""+this.settings['height']).indexOf('%')!=-1)this.settings['area_height']="100%";if((""+replace_element.style.width).indexOf('%')!=-1){this.settings['width']=replace_element.style.width;this.settings['area_width']="100%";}if((""+replace_element.style.height).indexOf('%')!=-1){this.settings['height']=replace_element.style.height;this.settings['area_height']="100%";}html=tinyMCE.applyTemplate(html);this.settings['width']=this.settings['old_width'];this.settings['height']=this.settings['old_height'];this.visualAid=this.settings['visual'];this.formTargetElementId=form_element_name;if(replace_element.nodeName=="TEXTAREA"||replace_element.nodeName=="INPUT")th!
 is.startContent=replace_element.value;else this.startContent=r!
 eplace_e
lement.innerHTML;if(replace_element.nodeName!="TEXTAREA"&&replace_element.nodeName!="INPUT"){this.oldTargetElement=replace_element;if(tinyMCE.settings['debug']){hc='<textarea wrap="off" id="'+form_element_name+'" name="'+form_element_name+'" cols="100" rows="15"></textarea>';}else{hc='<input type="hidden" id="'+form_element_name+'" name="'+form_element_name+'" />';this.oldTargetElement.style.display="none";}html+='</span>';if(tinyMCE.isGecko)html=hc+html;else html+=hc;if(tinyMCE.isGecko){var rng=replace_element.ownerDocument.createRange();rng.setStartBefore(replace_element);var fragment=rng.createContextualFragment(html);tinyMCE.insertAfter(fragment,replace_element);}else replace_element.insertAdjacentHTML("beforeBegin",html);}else{html+='</span>';this.oldTargetElement=replace_element;if(!tinyMCE.settings['debug'])this.oldTargetElement.style.display="none";if(tinyMCE.isGecko){var rng=replace_element.ownerDocument.createRange();rng.setStartBefore(replace_element);var fragment!
 =rng.createContextualFragment(html);tinyMCE.insertAfter(fragment,replace_element);}else replace_element.insertAdjacentHTML("beforeBegin",html);}var dynamicIFrame=false;var tElm=targetDoc.getElementById(this.editorId);if(!tinyMCE.isMSIE){if(tElm&&(tElm.nodeName=="SPAN"||tElm.nodeName=="span")){tElm=tinyMCE._createIFrame(tElm,targetDoc);dynamicIFrame=true;}this.targetElement=tElm;this.iframeElement=tElm;this.contentDocument=tElm.contentDocument;this.contentWindow=tElm.contentWindow;}else{if(tElm&&tElm.nodeName=="SPAN")tElm=tinyMCE._createIFrame(tElm,targetDoc,targetDoc.parentWindow);else tElm=targetDoc.frames[this.editorId];this.targetElement=tElm;this.iframeElement=targetDoc.getElementById(this.editorId);if(tinyMCE.isOpera){this.contentDocument=this.iframeElement.contentDocument;this.contentWindow=this.iframeElement.contentWindow;dynamicIFrame=true;}else{this.contentDocument=tElm.window.document;this.contentWindow=tElm.window;}this.getDoc().designMode="on";}var doc=this.cont!
 entDocument;if(dynamicIFrame){var html=tinyMCE.getParam('docty!
 pe')+'<h
tml><head xmlns="http://www.w3.org/1999/xhtml"><base href="'+tinyMCE.settings['base_href']+'" /><title>blank_page</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body class="mceContentBody"></body></html>';try{if(!this.isHidden())this.getDoc().designMode="on";doc.open();doc.write(html);doc.close();}catch(e){this.getDoc().location.href=tinyMCE.baseURL+"/blank.htm";}}if(tinyMCE.isMSIE)window.setTimeout("tinyMCE.addEventHandlers(tinyMCE.instances[\""+this.editorId+"\"]);",1);tinyMCE.setupContent(this.editorId,true);return true;},setBaseHREF:function(u){var h,b,d,nl;d=this.getDoc();nl=d.getElementsByTagName("base");b=nl.length>0?nl[0]:null;if(!b){nl=d.getElementsByTagName("head");h=nl.length>0?nl[0]:null;b=d.createElement("base");b.setAttribute('href',u);h.appendChild(b);}else{if(u==""||u==null)b.parentNode.removeChild(b);else b.setAttribute('href',u);}},getFocusElement:function(){return this.selection.getFocusElement();},getSel:function(){retur!
 n this.selection.getSel();},getRng:function(){return this.selection.getRng();},triggerSave:function(skip_cleanup,skip_callback){var e,nl=new Array(),i,s;this.switchSettings();s=tinyMCE.settings;if(tinyMCE.isMSIE&&!tinyMCE.isOpera){e=this.iframeElement;do{if(e.style&&e.style.display=='none'){e.style.display='block';nl[nl.length]={elm:e,type:'style'};}if(e.style&&s.hidden_tab_class.length>0&&e.className.indexOf(s.hidden_tab_class)!=-1){e.className=s.display_tab_class;nl[nl.length]={elm:e,type:'class'};}}while((e=e.parentNode)!=null)}tinyMCE.settings['preformatted']=false;if(typeof(skip_cleanup)=="undefined")skip_cleanup=false;if(typeof(skip_callback)=="undefined")skip_callback=false;tinyMCE._setHTML(this.getDoc(),this.getBody().innerHTML);if(this.settings['cleanup']==false){tinyMCE.handleVisualAid(this.getBody(),true,false,this);tinyMCE._setEventsEnabled(this.getBody(),true);}tinyMCE._customCleanup(this,"submit_content_dom",this.contentWindow.document.body);var htm=skip_clean!
 up?this.getBody().innerHTML:tinyMCE._cleanupHTML(this,this.get!
 Doc(),th
is.settings,this.getBody(),tinyMCE.visualAid,true,true);htm=tinyMCE._customCleanup(this,"submit_content",htm);if(!skip_callback&&tinyMCE.settings['save_callback']!="")var content=eval(tinyMCE.settings['save_callback']+"(this.formTargetElementId,htm,this.getBody());");if((typeof(content)!="undefined")&&content!=null)htm=content;htm=tinyMCE.regexpReplace(htm,"&#40;","(","gi");htm=tinyMCE.regexpReplace(htm,"&#41;",")","gi");htm=tinyMCE.regexpReplace(htm,"&#59;",";","gi");htm=tinyMCE.regexpReplace(htm,"&#34;","&quot;","gi");htm=tinyMCE.regexpReplace(htm,"&#94;","^","gi");if(this.formElement)this.formElement.value=htm;if(tinyMCE.isSafari&&this.formElement)this.formElement.innerText=htm;for(i=0;i<nl.length;i++){if(nl[i].type=='style')nl[i].elm.style.display='none';else nl[i].elm.className=s.hidden_tab_class;}}};TinyMCE_Engine.prototype.cleanupHTMLCode=function(s){s=s.replace(new RegExp('<p \\/>','gi'),'<p>&nbsp;</p>');s=s.replace(new RegExp('<p>\\s*<\\/p>','gi'),'<p>&nbsp;</p>');s!
 =s.replace(new RegExp('<br>\\s*<\\/br>','gi'),'<br />');s=s.replace(new RegExp('<(h[1-6]|p|div|address|pre|form|table|li|ol|ul|td|b|font|em|strong|i|strike|u|span|a|ul|ol|li|blockquote)([a-z]*)([^\\\\|>]*)\\/>','gi'),'<$1$2$3></$1$2>');s=s.replace(new RegExp('\\s+></','gi'),'></');s=s.replace(new RegExp('<(img|br|hr)([^>]*)><\\/(img|br|hr)>','gi'),'<$1$2 />');if(tinyMCE.isMSIE)s=s.replace(new RegExp('<p><hr \\/><\\/p>','gi'),"<hr>");if(tinyMCE.getParam('convert_urls'))s=s.replace(new RegExp('(href=\"{0,1})(\\s*#)','gi'),'$1'+tinyMCE.settings['document_base_url']+"#");return s;};TinyMCE_Engine.prototype.parseStyle=function(str){var ar=new Array();if(str==null)return ar;var st=str.split(';');tinyMCE.clearArray(ar);for(var i=0;i<st.length;i++){if(st[i]=='')continue;var re=new RegExp('^\\s*([^:]*):\\s*(.*)\\s*$');var pa=st[i].replace(re,'$1||$2').split('||');if(pa.length==2)ar[pa[0].toLowerCase()]=pa[1];}return ar;};TinyMCE_Engine.prototype.compressStyle=function(ar,pr,sf,res){!
 var box=new Array();box[0]=ar[pr+'-top'+sf];box[1]=ar[pr+'-lef!
 t'+sf];b
ox[2]=ar[pr+'-right'+sf];box[3]=ar[pr+'-bottom'+sf];for(var i=0;i<box.length;i++){if(box[i]==null)return;for(var a=0;a<box.length;a++){if(box[a]!=box[i])return;}}ar[res]=box[0];ar[pr+'-top'+sf]=null;ar[pr+'-left'+sf]=null;ar[pr+'-right'+sf]=null;ar[pr+'-bottom'+sf]=null;};TinyMCE_Engine.prototype.serializeStyle=function(ar){var str="";tinyMCE.compressStyle(ar,"border","","border");tinyMCE.compressStyle(ar,"border","-width","border-width");tinyMCE.compressStyle(ar,"border","-color","border-color");tinyMCE.compressStyle(ar,"border","-style","border-style");tinyMCE.compressStyle(ar,"padding","","padding");tinyMCE.compressStyle(ar,"margin","","margin");for(var key in ar){var val=ar[key];if(typeof(val)=='function')continue;if(key.indexOf('mso-')==0)continue;if(val!=null&&val!=''){val=''+val;val=val.replace(new RegExp("url\\(\\'?([^\\']*)\\'?\\)",'gi'),"url('$1')");if(val.indexOf('url(')!=-1&&tinyMCE.getParam('convert_urls')){var m=new RegExp("url\\('(.*?)'\\)").exec(val);if(m.len!
 gth>1)val="url('"+eval(tinyMCE.getParam('urlconverter_callback')+"(m[1], null, true);")+"')";}if(tinyMCE.getParam("force_hex_style_colors"))val=tinyMCE.convertRGBToHex(val,true);if(val!="url('')")str+=key.toLowerCase()+": "+val+"; ";}}if(new RegExp('; $').test(str))str=str.substring(0,str.length-2);return str;};TinyMCE_Engine.prototype.convertRGBToHex=function(s,k){if(s.toLowerCase().indexOf('rgb')!=-1){var re=new RegExp("(.*?)rgb\\s*?\\(\\s*?([0-9]+).*?,\\s*?([0-9]+).*?,\\s*?([0-9]+).*?\\)(.*?)","gi");var rgb=s.replace(re,"$1,$2,$3,$4,$5").split(',');if(rgb.length==5){r=parseInt(rgb[1]).toString(16);g=parseInt(rgb[2]).toString(16);b=parseInt(rgb[3]).toString(16);r=r.length==1?'0'+r:r;g=g.length==1?'0'+g:g;b=b.length==1?'0'+b:b;s="#"+r+g+b;if(k)s=rgb[0]+s+rgb[4];}}return s;};TinyMCE_Engine.prototype.convertHexToRGB=function(s){if(s.indexOf('#')!=-1){s=s.replace(new RegExp('[^0-9A-F]','gi'),'');return"rgb("+parseInt(s.substring(0,2),16)+","+parseInt(s.substring(2,4),16)+","+!
 parseInt(s.substring(4,6),16)+")";}return s;};TinyMCE_Engine.p!
 rototype
.convertSpansToFonts=function(doc){var sizes=tinyMCE.getParam('font_size_style_values').replace(/\s+/,'').split(',');var h=doc.body.innerHTML;h=h.replace(/<span/gi,'<font');h=h.replace(/<\/span/gi,'</font');doc.body.innerHTML=h;var s=doc.getElementsByTagName("font");for(var i=0;i<s.length;i++){var size=tinyMCE.trim(s[i].style.fontSize).toLowerCase();var fSize=0;for(var x=0;x<sizes.length;x++){if(sizes[x]==size){fSize=x+1;break;}}if(fSize>0){tinyMCE.setAttrib(s[i],'size',fSize);s[i].style.fontSize='';}var fFace=s[i].style.fontFamily;if(fFace!=null&&fFace!=""){tinyMCE.setAttrib(s[i],'face',fFace);s[i].style.fontFamily='';}var fColor=s[i].style.color;if(fColor!=null&&fColor!=""){tinyMCE.setAttrib(s[i],'color',tinyMCE.convertRGBToHex(fColor));s[i].style.color='';}}};TinyMCE_Engine.prototype.convertFontsToSpans=function(doc){var sizes=tinyMCE.getParam('font_size_style_values').replace(/\s+/,'').split(',');var h=doc.body.innerHTML;h=h.replace(/<font/gi,'<span');h=h.replace(/<\/fon!
 t/gi,'</span');doc.body.innerHTML=h;var fsClasses=tinyMCE.getParam('font_size_classes');if(fsClasses!='')fsClasses=fsClasses.replace(/\s+/,'').split(',');else fsClasses=null;var s=doc.getElementsByTagName("span");for(var i=0;i<s.length;i++){var fSize,fFace,fColor;fSize=tinyMCE.getAttrib(s[i],'size');fFace=tinyMCE.getAttrib(s[i],'face');fColor=tinyMCE.getAttrib(s[i],'color');if(fSize!=""){fSize=parseInt(fSize);if(fSize>0&&fSize<8){if(fsClasses!=null)tinyMCE.setAttrib(s[i],'class',fsClasses[fSize-1]);else s[i].style.fontSize=sizes[fSize-1];}s[i].removeAttribute('size');}if(fFace!=""){s[i].style.fontFamily=fFace;s[i].removeAttribute('face');}if(fColor!=""){s[i].style.color=fColor;s[i].removeAttribute('color');}}};TinyMCE_Engine.prototype.cleanupAnchors=function(doc){var i,cn,x,an=doc.getElementsByTagName("a");for(i=an.length-1;i>=0;i--){if(tinyMCE.getAttrib(an[i],"name")!=""&&tinyMCE.getAttrib(an[i],"href")==""){cn=an[i].childNodes;for(x=cn.length-1;x>=0;x--)tinyMCE.insertAfte!
 r(cn[x],an[i]);}}};TinyMCE_Engine.prototype.getContent=functio!
 n(editor
_id){var h;if(typeof(editor_id)!="undefined")tinyMCE.selectedInstance=tinyMCE.getInstanceById(editor_id);if(tinyMCE.selectedInstance){h=tinyMCE._cleanupHTML(this.selectedInstance,this.selectedInstance.getDoc(),tinyMCE.settings,this.selectedInstance.getBody(),false,true);if(tinyMCE.getParam("convert_fonts_to_spans"))tinyMCE.convertSpansToFonts(this.selectedInstance.getDoc());return h;}return null;};TinyMCE_Engine.prototype._fixListElements=function(d){var nl,x,a=['ol','ul'],i,n,p,r=new RegExp('^(OL|UL)$'),np;for(x=0;x<a.length;x++){nl=d.getElementsByTagName(a[x]);for(i=0;i<nl.length;i++){n=nl[i];p=n.parentNode;if(r.test(p.nodeName)){np=tinyMCE.prevNode(n,'LI');if(!np){np=d.createElement('li');np.innerHTML='&nbsp;';np.appendChild(n);p.insertBefore(np,p.firstChild);}else np.appendChild(n);}}}};TinyMCE_Engine.prototype._fixTables=function(d){var nl,i,n,p,np,x,t;nl=d.getElementsByTagName('table');for(i=0;i<nl.length;i++){n=nl[i];if((p=tinyMCE.getParentElement(n,'p,div,h1,h2,h3,h4!
 ,h5,h6'))!=null){np=p.cloneNode(false);np.removeAttribute('id');t=n;while((n=n.nextSibling))np.appendChild(n);tinyMCE.insertAfter(np,p);tinyMCE.insertAfter(t,p);}}};TinyMCE_Engine.prototype._cleanupHTML=function(inst,doc,config,elm,visual,on_save,on_submit){var h,d,t1,t2,t3,t4,t5,c,s;if(!tinyMCE.getParam('cleanup'))return elm.innerHTML;on_save=typeof(on_save)=='undefined'?false:on_save;c=inst.cleanup;s=inst.settings;d=c.settings.debug;if(d)t1=new Date().getTime();if(tinyMCE.getParam("convert_fonts_to_spans"))tinyMCE.convertFontsToSpans(doc);if(tinyMCE.getParam("fix_list_elements"))tinyMCE._fixListElements(doc);if(tinyMCE.getParam("fix_table_elements"))tinyMCE._fixTables(doc);tinyMCE._customCleanup(inst,on_save?"get_from_editor_dom":"insert_to_editor_dom",doc.body);if(d)t2=new Date().getTime();c.settings.on_save=on_save;c.idCount=0;c.serializationId++;c.serializedNodes=new Array();c.sourceIndex=-1;if(s.cleanup_serializer=="xml")h=c.serializeNodeAsXML(elm);else h=c.serializeN!
 odeAsHTML(elm);if(d)t3=new Date().getTime();h=h.replace(/<\/?(!
 body|hea
d|html)[^>]*>/gi,'');h=h.replace(new RegExp(' (rowspan="1"|colspan="1")','g'),'');h=h.replace(/<p><hr \/><\/p>/g,'<hr />');h=h.replace(/<p>(&nbsp;|&#160;)<\/p><hr \/><p>(&nbsp;|&#160;)<\/p>/g,'<hr />');h=h.replace(/<td>\s*<br \/>\s*<\/td>/g,'<td>&nbsp;</td>');h=h.replace(/<p>\s*<br \/>\s*<\/p>/g,'<p>&nbsp;</p>');h=h.replace(/<p>\s*(&nbsp;|&#160;)\s*<br \/>\s*(&nbsp;|&#160;)\s*<\/p>/g,'<p>&nbsp;</p>');h=h.replace(/<p>\s*(&nbsp;|&#160;)\s*<br \/>\s*<\/p>/g,'<p>&nbsp;</p>');h=h.replace(/<p>\s*<br \/>\s*&nbsp;\s*<\/p>/g,'<p>&nbsp;</p>');h=h.replace(new RegExp('<a>(.*?)<\\/a>','g'),'$1');h=h.replace(/<p([^>]*)>\s*<\/p>/g,'<p$1>&nbsp;</p>');if(/^\s*(<br \/>|<p>&nbsp;<\/p>|<p>&#160;<\/p>|<p><\/p>)\s*$/.test(h))h='';if(s.preformatted){h=h.replace(/^<pre>/,'');h=h.replace(/<\/pre>$/,'');h='<pre>'+h+'</pre>';}if(tinyMCE.isGecko){h=h.replace(/<o:p _moz-userdefined="" \/>/g,'');h=h.replace(/<td([^>]*)>\s*<br \/>\s*<\/td>/g,'<td$1>&nbsp;</td>');}if(s.force_br_newlines)h=h.replace(/<p>(&n!
 bsp;|&#160;)<\/p>/g,'<br />');h=tinyMCE._customCleanup(inst,on_save?"get_from_editor":"insert_to_editor",h);if(on_save){h=h.replace(new RegExp(' ?(mceItem[a-zA-Z0-9]*|'+s.visual_table_class+')','g'),'');h=h.replace(new RegExp(' ?class=""','g'),'');}if(s.remove_linebreaks&&!c.settings.indent)h=h.replace(/\n|\r/g,' ');if(d)t4=new Date().getTime();if(on_save&&c.settings.indent)h=c.formatHTML(h);if(on_submit&&(s.encoding=="xml"||s.encoding=="html"))h=c.xmlEncode(h);if(d)t5=new Date().getTime();if(c.settings.debug)tinyMCE.debug("Cleanup in ms: Pre="+(t2-t1)+", Serialize: "+(t3-t2)+", Post: "+(t4-t3)+", Format: "+(t5-t4)+", Sum: "+(t5-t1)+".");return h;};function TinyMCE_Cleanup(){this.isMSIE=(navigator.appName=="Microsoft Internet Explorer");this.rules=tinyMCE.clearArray(new Array());this.settings={indent_elements:'head,table,tbody,thead,tfoot,form,tr,ul,ol,blockquote,object',newline_before_elements:'h1,h2,h3,h4,h5,h6,pre,address,div,ul,ol,li,meta,option,area,title,link,base,scr!
 ipt,td',newline_after_elements:'br,hr,p,pre,address,div,ul,ol,!
 meta,opt
ion,area,link,base,script',newline_before_after_elements:'html,head,body,table,thead,tbody,tfoot,tr,form,ul,ol,blockquote,p,object,param,hr,div',indent_char:'\t',indent_levels:1,entity_encoding:'raw',valid_elements:'*[*]',entities:'',url_converter:'',invalid_elements:'',verify_html:false};this.vElements=tinyMCE.clearArray(new Array());this.vElementsRe='';this.closeElementsRe=/^(IMG|BR|HR|LINK|META|BASE|INPUT|BUTTON|AREA)$/;this.codeElementsRe=/^(SCRIPT|STYLE)$/;this.serializationId=0;this.mceAttribs={href:'mce_href',src:'mce_src',type:'mce_type'};}TinyMCE_Cleanup.prototype={init:function(s){var n,a,i,ir,or,st;for(n in s)this.settings[n]=s[n];s=this.settings;this.inRe=this._arrayToRe(s.indent_elements.split(','),'','^<(',')[^>]*');this.ouRe=this._arrayToRe(s.indent_elements.split(','),'','^<\\/(',')[^>]*');this.nlBeforeRe=this._arrayToRe(s.newline_before_elements.split(','),'gi','<(',')([^>]*)>');this.nlAfterRe=this._arrayToRe(s.newline_after_elements.split(','),'gi','<(',')(!
 [^>]*)>');this.nlBeforeAfterRe=this._arrayToRe(s.newline_before_after_elements.split(','),'gi','<(\\/?)(',')([^>]*)>');if(s.invalid_elements!='')this.iveRe=this._arrayToRe(s.invalid_elements.toUpperCase().split(','),'g','^(',')$');else this.iveRe=null;st='';for(i=0;i<s.indent_levels;i++)st+=s.indent_char;this.inStr=st;if(!s.verify_html){s.valid_elements='*[*]';s.extended_valid_elements='';}this.fillStr=s.entity_encoding=="named"?"&nbsp;":"&#160;";this.idCount=0;},addRuleStr:function(s){var r=this.parseRuleStr(s);var n;for(n in r){if(r[n])this.rules[n]=r[n];}this.vElements=tinyMCE.clearArray(new Array());for(n in this.rules){if(this.rules[n])this.vElements[this.vElements.length]=this.rules[n].tag;}this.vElementsRe=this._arrayToRe(this.vElements,'');},parseRuleStr:function(s){var ta,p,r,a,i,x,px,t,tn,y,av,or=tinyMCE.clearArray(new Array()),dv;if(s==null||s.length==0)return or;ta=s.split(',');for(x=0;x<ta.length;x++){s=ta[x];if(s.length==0)continue;p=this.split(/\[|\]/,s);if(p!
 ==null||p.length<1)t=s.toUpperCase();else t=p[0].toUpperCase()!
 ;tn=this
.split('/',t);for(y=0;y<tn.length;y++){r={};r.tag=tn[y];r.forceAttribs=null;r.defaultAttribs=null;r.validAttribValues=null;px=r.tag.charAt(0);r.forceOpen=px=='+';r.removeEmpty=px=='-';r.fill=px=='#';r.tag=r.tag.replace(/\+|-|#/g,'');r.oTagName=tn[0].replace(/\+|-|#/g,'').toLowerCase();r.isWild=new RegExp('\\*|\\?|\\+','g').test(r.tag);r.validRe=new RegExp(this._wildcardToRe('^'+r.tag+'$'));if(p.length>1){r.vAttribsRe='^(';a=this.split(/\|/,p[1]);for(i=0;i<a.length;i++){t=a[i];av=new RegExp('(=|:|<)(.*?)$').exec(t);t=t.replace(new RegExp('(=|:|<).*?$'),'');if(av&&av.length>0){if(av[0].charAt(0)==':'){if(!r.forceAttribs)r.forceAttribs=tinyMCE.clearArray(new Array());r.forceAttribs[t.toLowerCase()]=av[0].substring(1);}else if(av[0].charAt(0)=='='){if(!r.defaultAttribs)r.defaultAttribs=tinyMCE.clearArray(new Array());dv=av[0].substring(1);r.defaultAttribs[t.toLowerCase()]=dv==""?"mce_empty":dv;}else if(av[0].charAt(0)=='<'){if(!r.validAttribValues)r.validAttribValues=tinyMCE.cle!
 arArray(new Array());r.validAttribValues[t.toLowerCase()]=this._arrayToRe(this.split('?',av[0].substring(1)),'');}}r.vAttribsRe+=''+t.toLowerCase()+(i!=a.length-1?'|':'');a[i]=t.toLowerCase();}r.vAttribsRe+=')$';r.vAttribsRe=this._wildcardToRe(r.vAttribsRe);r.vAttribsReIsWild=new RegExp('\\*|\\?|\\+','g').test(r.vAttribsRe);r.vAttribsRe=new RegExp(r.vAttribsRe);r.vAttribs=a.reverse();}else{r.vAttribsRe='';r.vAttribs=tinyMCE.clearArray(new Array());r.vAttribsReIsWild=false;}or[r.tag]=r;}}return or;},serializeNodeAsXML:function(n){var s,b;if(!this.xmlDoc){if(this.isMSIE){try{this.xmlDoc=new ActiveXObject('MSXML2.DOMDocument');}catch(e){}if(!this.xmlDoc)try{this.xmlDoc=new ActiveXObject('Microsoft.XmlDom');}catch(e){}}else this.xmlDoc=document.implementation.createDocument('','',null);if(!this.xmlDoc)alert("Error XML Parser could not be found.");}if(this.xmlDoc.firstChild)this.xmlDoc.removeChild(this.xmlDoc.firstChild);b=this.xmlDoc.createElement("html");b=this.xmlDoc.appendCh!
 ild(b);this._convertToXML(n,b);if(this.isMSIE)return this.xmlD!
 oc.xml;e
lse return new XMLSerializer().serializeToString(this.xmlDoc);},_convertToXML:function(n,xn){var xd,el,i,l,cn,at,no,hc=false;if(this._isDuplicate(n))return;xd=this.xmlDoc;switch(n.nodeType){case 1:hc=n.hasChildNodes();el=xd.createElement(n.nodeName.toLowerCase());at=n.attributes;for(i=at.length-1;i>-1;i--){no=at[i];if(no.specified&&no.nodeValue)el.setAttribute(no.nodeName.toLowerCase(),no.nodeValue);}if(!hc&&!this.closeElementsRe.test(n.nodeName))el.appendChild(xd.createTextNode(""));xn=xn.appendChild(el);break;case 3:xn.appendChild(xd.createTextNode(n.nodeValue));return;case 8:xn.appendChild(xd.createComment(n.nodeValue));return;}if(hc){cn=n.childNodes;for(i=0,l=cn.length;i<l;i++)this._convertToXML(cn[i],xn);}},serializeNodeAsHTML:function(n){var en,no,h='',i,l,r,cn,va=false,f=false,at,hc;this._setupRules();if(this._isDuplicate(n))return'';switch(n.nodeType){case 1:hc=n.hasChildNodes();if((tinyMCE.isMSIE&&!tinyMCE.isOpera)&&n.nodeName.indexOf('/')!=-1)break;if(this.vElement!
 sRe.test(n.nodeName)&&(!this.iveRe||!this.iveRe.test(n.nodeName))){va=true;r=this.rules[n.nodeName];if(!r){at=this.rules;for(no in at){if(at[no]&&at[no].validRe.test(n.nodeName)){r=at[no];break;}}}en=r.isWild?n.nodeName.toLowerCase():r.oTagName;f=r.fill;if(r.removeEmpty&&!hc)return"";h+='<'+en;if(r.vAttribsReIsWild){at=n.attributes;for(i=at.length-1;i>-1;i--){no=at[i];if(no.specified&&r.vAttribsRe.test(no.nodeName))h+=this._serializeAttribute(n,r,no.nodeName);}}else{for(i=r.vAttribs.length-1;i>-1;i--)h+=this._serializeAttribute(n,r,r.vAttribs[i]);}if(!this.settings.on_save){at=this.mceAttribs;for(no in at){if(at[no])h+=this._serializeAttribute(n,r,at[no]);}}if(this.closeElementsRe.test(n.nodeName))return h+' />';h+='>';if(this.isMSIE&&this.codeElementsRe.test(n.nodeName))h+=n.innerHTML;}break;case 3:if(n.parentNode&&this.codeElementsRe.test(n.parentNode.nodeName))return this.isMSIE?'':n.nodeValue;return this.xmlEncode(n.nodeValue);case 8:return"<!--"+this._trimComment(n.nod!
 eValue)+"-->";}if(hc){cn=n.childNodes;for(i=0,l=cn.length;i<l;!
 i++)h+=t
his.serializeNodeAsHTML(cn[i]);}if(f&&!hc)h+=this.fillStr;if(va)h+='</'+en+'>';return h;},_serializeAttribute:function(n,r,an){var av='',t,os=this.settings.on_save;if(os&&(an.indexOf('mce_')==0||an.indexOf('_moz')==0))return'';if(os&&this.mceAttribs[an])av=this._getAttrib(n,this.mceAttribs[an]);if(av.length==0)av=this._getAttrib(n,an);if(av.length==0&&r.defaultAttribs&&(t=r.defaultAttribs[an])){av=t;if(av=="mce_empty")return" "+an+'=""';}if(r.forceAttribs&&(t=r.forceAttribs[an]))av=t;if(os&&av.length!=0&&this.settings.url_converter.length!=0&&/^(src|href|longdesc)$/.test(an))av=eval(this.settings.url_converter+'(this, n, av)');if(av.length!=0&&r.validAttribValues&&r.validAttribValues[an]&&!r.validAttribValues[an].test(av))return"";if(av.length!=0&&av=="{$uid}")av="uid_"+(this.idCount++);if(av.length!=0)return" "+an+"="+'"'+this.xmlEncode(av)+'"';return"";},formatHTML:function(h){var s=this.settings,p='',i=0,li=0,o='',l;h=h.replace(/\r/g,'');h='\n'+h;h=h.replace(new RegExp('\!
 \n\\s+','gi'),'\n');h=h.replace(this.nlBeforeRe,'\n<$1$2>');h=h.replace(this.nlAfterRe,'<$1$2>\n');h=h.replace(this.nlBeforeAfterRe,'\n<$1$2$3>\n');h+='\n';while((i=h.indexOf('\n',i+1))!=-1){if((l=h.substring(li+1,i)).length!=0){if(this.ouRe.test(l)&&p.length>=s.indent_levels)p=p.substring(s.indent_levels);o+=p+l+'\n';if(this.inRe.test(l))p+=this.inStr;}li=i;}return o;},xmlEncode:function(s){var i,l,e,o='',c;this._setupEntities();switch(this.settings.entity_encoding){case"raw":return tinyMCE.xmlEncode(s);case"named":for(i=0,l=s.length;i<l;i++){c=s.charCodeAt(i);e=this.entities[c];if(e&&e!='')o+='&'+e+';';else o+=String.fromCharCode(c);}return o;case"numeric":for(i=0,l=s.length;i<l;i++){c=s.charCodeAt(i);if(c>127||c==60||c==62||c==38||c==39||c==34)o+='&#'+c+";";else o+=String.fromCharCode(c);}return o;}return s;},split:function(re,s){var c=s.split(re);var i,l,o=new Array();for(i=0,l=c.length;i<l;i++){if(c[i]!='')o[i]=c[i];}return o;},_trimComment:function(s){s=s.replace(new !
 RegExp('\\smce_src=\"[^\"]*\"','gi'),"");s=s.replace(new RegEx!
 p('\\smc
e_href=\"[^\"]*\"','gi'),"");return s;},_getAttrib:function(e,n,d){if(typeof(d)=="undefined")d="";if(!e||e.nodeType!=1)return d;var v=e.getAttribute(n,0);if(n=="class"&&!v)v=e.className;if(this.isMSIE&&n=="http-equiv")v=e.httpEquiv;if(this.isMSIE&&e.nodeName=="FORM"&&n=="enctype"&&v=="application/x-www-form-urlencoded")v="";if(this.isMSIE&&e.nodeName=="INPUT"&&n=="size"&&v=="20")v="";if(this.isMSIE&&e.nodeName=="INPUT"&&n=="maxlength"&&v=="2147483647")v="";if(n=="style"&&!tinyMCE.isOpera)v=e.style.cssText;if(n=='style')v=tinyMCE.serializeStyle(tinyMCE.parseStyle(v));if(this.settings.on_save&&n.indexOf('on')!=-1&&this.settings.on_save&&v&&v!="")v=tinyMCE.cleanupEventStr(v);return(v&&v!="")?''+v:d;},_urlConverter:function(c,n,v){if(!c.settings.on_save)return tinyMCE.convertRelativeToAbsoluteURL(tinyMCE.settings.base_href,v);else if(tinyMCE.getParam('convert_urls'))return eval(tinyMCE.settings.urlconverter_callback+"(v, n, true);");return v;},_arrayToRe:function(a,op,be,af){var!
  i,r;op=typeof(op)=="undefined"?"gi":op;be=typeof(be)=="undefined"?"^(":be;af=typeof(af)=="undefined"?")$":af;r=be;for(i=0;i<a.length;i++)r+=this._wildcardToRe(a[i])+(i!=a.length-1?"|":"");r+=af;return new RegExp(r,op);},_wildcardToRe:function(s){s=s.replace(/\?/g,'(\\S?)');s=s.replace(/\+/g,'(\\S+)');s=s.replace(/\*/g,'(\\S*)');return s;},_setupEntities:function(){var n,a,i,s=this.settings;if(!this.entitiesDone){if(s.entity_encoding=="named"){n=tinyMCE.clearArray(new Array());a=this.split(',',s.entities);for(i=0;i<a.length;i+=2)n[a[i]]=a[i+1];this.entities=n;}this.entitiesDone=true;}},_setupRules:function(){var s=this.settings;if(!this.rulesDone){this.addRuleStr(s.valid_elements);this.addRuleStr(s.extended_valid_elements);this.rulesDone=true;}},_isDuplicate:function(n){var i;if(!this.settings.fix_content_duplication)return false;if(tinyMCE.isMSIE&&!tinyMCE.isOpera&&n.nodeType==1){if(n.mce_serialized==this.serializationId)return true;n.setAttribute('mce_serialized',this.ser!
 ializationId);}else{for(i=0;i<this.serializedNodes.length;i++)!
 {if(this
.serializedNodes[i]==n)return true;}this.serializedNodes[this.serializedNodes.length]=n;}return false;}};TinyMCE_Engine.prototype.getElementByAttributeValue=function(n,e,a,v){return(n=this.getElementsByAttributeValue(n,e,a,v)).length==0?null:n[0];};TinyMCE_Engine.prototype.getElementsByAttributeValue=function(n,e,a,v){var i,nl=n.getElementsByTagName(e),o=new Array();for(i=0;i<nl.length;i++){if(tinyMCE.getAttrib(nl[i],a).indexOf(v)!=-1)o[o.length]=nl[i];}return o;};TinyMCE_Engine.prototype.isBlockElement=function(n){return n!=null&&n.nodeType==1&&this.blockRegExp.test(n.nodeName);};TinyMCE_Engine.prototype.getParentBlockElement=function(n){while(n){if(this.isBlockElement(n))return n;n=n.parentNode;}return null;};TinyMCE_Engine.prototype.insertAfter=function(n,r){if(r.nextSibling)r.parentNode.insertBefore(n,r.nextSibling);else r.parentNode.appendChild(n);};TinyMCE_Engine.prototype.setInnerHTML=function(e,h){var i,nl,n;if(tinyMCE.isMSIE&&!tinyMCE.isOpera){h=h.replace(/\s\/>/g,'!
 >');h=h.replace(/<p([^>]*)>\u00A0?<\/p>/gi,'<p$1 mce_keep="true">&nbsp;</p>');h=h.replace(/<p([^>]*)>\s*&nbsp;\s*<\/p>/gi,'<p$1 mce_keep="true">&nbsp;</p>');h=h.replace(/<p([^>]*)>\s+<\/p>/gi,'<p$1 mce_keep="true">&nbsp;</p>');e.innerHTML=tinyMCE.uniqueTag+h;e.firstChild.removeNode(true);nl=e.getElementsByTagName("p");for(i=nl.length-1;i>=0;i--){n=nl[i];if(n.nodeName=='P'&&!n.hasChildNodes()&&!n.mce_keep)n.parentNode.removeChild(n);}}else{h=this.fixGeckoBaseHREFBug(1,e,h);e.innerHTML=h;this.fixGeckoBaseHREFBug(2,e,h);}};TinyMCE_Engine.prototype.getOuterHTML=function(e){if(tinyMCE.isMSIE)return e.outerHTML;var d=e.ownerDocument.createElement("body");d.appendChild(e);return d.innerHTML;};TinyMCE_Engine.prototype.setOuterHTML=function(e,h){if(tinyMCE.isMSIE){e.outerHTML=h;return;}var d=e.ownerDocument.createElement("body");d.innerHTML=h;e.parentNode.replaceChild(d.firstChild,e);};TinyMCE_Engine.prototype._getElementById=function(id,d){var e,i,j,f;if(typeof(d)=="undefined")d=do!
 cument;e=d.getElementById(id);if(!e){f=d.forms;for(i=0;i<f.len!
 gth;i++)
{for(j=0;j<f[i].elements.length;j++){if(f[i].elements[j].name==id){e=f[i].elements[j];break;}}}}return e;};TinyMCE_Engine.prototype.getNodeTree=function(n,na,t,nn){var i;if(typeof(t)=="undefined"||n.nodeType==t&&(typeof(nn)=="undefined"||n.nodeName==nn))na[na.length]=n;if(n.hasChildNodes()){for(i=0;i<n.childNodes.length;i++)tinyMCE.getNodeTree(n.childNodes[i],na,t,nn);}return na;};TinyMCE_Engine.prototype.getParentElement=function(node,names,attrib_name,attrib_value){if(typeof(names)=="undefined"){if(node.nodeType==1)return node;while((node=node.parentNode)!=null&&node.nodeType!=1);return node;}if(node==null)return null;var namesAr=names.toUpperCase().split(',');do{for(var i=0;i<namesAr.length;i++){if(node.nodeName==namesAr[i]||names=="*"){if(typeof(attrib_name)=="undefined")return node;else if(node.getAttribute(attrib_name)){if(typeof(attrib_value)=="undefined"){if(node.getAttribute(attrib_name)!="")return node;}else if(node.getAttribute(attrib_name)==attrib_value)return no!
 de;}}}}while((node=node.parentNode)!=null);return null;};TinyMCE_Engine.prototype.getParentNode=function(n,f){while(n){if(f(n))return n;n=n.parentNode;}return null;};TinyMCE_Engine.prototype.getAttrib=function(elm,name,default_value){if(typeof(default_value)=="undefined")default_value="";if(!elm||elm.nodeType!=1)return default_value;var v=elm.getAttribute(name);if(name=="class"&&!v)v=elm.className;if(tinyMCE.isGecko&&name=="src"&&elm.src!=null&&elm.src!="")v=elm.src;if(tinyMCE.isGecko&&name=="href"&&elm.href!=null&&elm.href!="")v=elm.href;if(name=="http-equiv"&&tinyMCE.isMSIE)v=elm.httpEquiv;if(name=="style"&&!tinyMCE.isOpera)v=elm.style.cssText;return(v&&v!="")?v:default_value;};TinyMCE_Engine.prototype.setAttrib=function(element,name,value,fix_value){if(typeof(value)=="number"&&value!=null)value=""+value;if(fix_value){if(value==null)value="";var re=new RegExp('[^0-9%]','g');value=value.replace(re,'');}if(name=="style")element.style.cssText=value;if(name=="class")element.c!
 lassName=value;if(value!=null&&value!=""&&value!=-1)element.se!
 tAttribu
te(name,value);else element.removeAttribute(name);};TinyMCE_Engine.prototype.setStyleAttrib=function(elm,name,value){eval('elm.style.'+name+'=value;');if(tinyMCE.isMSIE&&value==null||value==''){var str=tinyMCE.serializeStyle(tinyMCE.parseStyle(elm.style.cssText));elm.style.cssText=str;elm.setAttribute("style",str);}};TinyMCE_Engine.prototype.switchClass=function(ei,c){var e;if(tinyMCE.switchClassCache[ei])e=tinyMCE.switchClassCache[ei];else e=tinyMCE.switchClassCache[ei]=document.getElementById(ei);if(e){if(tinyMCE.settings.button_tile_map&&e.className&&e.className.indexOf('mceTiledButton')==0)c='mceTiledButton '+c;e.className=c;}};TinyMCE_Engine.prototype.getAbsPosition=function(n){var p={absLeft:0,absTop:0};while(n){p.absLeft+=n.offsetLeft;p.absTop+=n.offsetTop;n=n.offsetParent;}return p;};TinyMCE_Engine.prototype.prevNode=function(e,n){var a=n.split(','),i;while((e=e.previousSibling)!=null){for(i=0;i<a.length;i++){if(e.nodeName==a[i])return e;}}return null;};TinyMCE_Engin!
 e.prototype.nextNode=function(e,n){var a=n.split(','),i;while((e=e.nextSibling)!=null){for(i=0;i<a.length;i++){if(e.nodeName==a[i])return e;}}return null;};TinyMCE_Engine.prototype.selectNodes=function(n,f,a){var i;if(!a)a=new Array();if(f(n))a[a.length]=n;if(n.hasChildNodes()){for(i=0;i<n.childNodes.length;i++)tinyMCE.selectNodes(n.childNodes[i],f,a);}return a;};TinyMCE_Engine.prototype.addCSSClass=function(e,c,b){var o=this.removeCSSClass(e,c);return e.className=b?c+(o!=''?(' '+o):''):(o!=''?(o+' '):'')+c;};TinyMCE_Engine.prototype.removeCSSClass=function(e,c){var a=this.explode(' ',e.className),i;for(i=0;i<a.length;i++){if(a[i]==c)a[i]='';}return e.className=a.join(' ');};TinyMCE_Engine.prototype.renameElement=function(e,n,d){var ne,i,ar;d=typeof(d)=="undefined"?tinyMCE.selectedInstance.getDoc():d;if(e){ne=d.createElement(n);ar=e.attributes;for(i=ar.length-1;i>-1;i--){if(ar[i].specified&&ar[i].nodeValue)ne.setAttribute(ar[i].nodeName.toLowerCase(),ar[i].nodeValue);}ar=e.!
 childNodes;for(i=0;i<ar.length;i++)ne.appendChild(ar[i].cloneN!
 ode(true
));e.parentNode.replaceChild(ne,e);}};TinyMCE_Engine.prototype.parseURL=function(url_str){var urlParts=new Array();if(url_str){var pos,lastPos;pos=url_str.indexOf('://');if(pos!=-1){urlParts['protocol']=url_str.substring(0,pos);lastPos=pos+3;}for(var i=lastPos;i<url_str.length;i++){var chr=url_str.charAt(i);if(chr==':')break;if(chr=='/')break;}pos=i;urlParts['host']=url_str.substring(lastPos,pos);urlParts['port']="";lastPos=pos;if(url_str.charAt(pos)==':'){pos=url_str.indexOf('/',lastPos);urlParts['port']=url_str.substring(lastPos+1,pos);}lastPos=pos;pos=url_str.indexOf('?',lastPos);if(pos==-1)pos=url_str.indexOf('#',lastPos);if(pos==-1)pos=url_str.length;urlParts['path']=url_str.substring(lastPos,pos);lastPos=pos;if(url_str.charAt(pos)=='?'){pos=url_str.indexOf('#');pos=(pos==-1)?url_str.length:pos;urlParts['query']=url_str.substring(lastPos+1,pos);}lastPos=pos;if(url_str.charAt(pos)=='#'){pos=url_str.length;urlParts['anchor']=url_str.substring(lastPos+1,pos);}}return urlPa!
 rts;};TinyMCE_Engine.prototype.serializeURL=function(up){var o="";if(up['protocol'])o+=up['protocol']+"://";if(up['host'])o+=up['host'];if(up['port'])o+=":"+up['port'];if(up['path'])o+=up['path'];if(up['query'])o+="?"+up['query'];if(up['anchor'])o+="#"+up['anchor'];return o;};TinyMCE_Engine.prototype.convertAbsoluteURLToRelativeURL=function(base_url,url_to_relative){var baseURL=this.parseURL(base_url);var targetURL=this.parseURL(url_to_relative);var strTok1;var strTok2;var breakPoint=0;var outPath="";var forceSlash=false;if(targetURL.path=="")targetURL.path="/";else forceSlash=true;base_url=baseURL.path.substring(0,baseURL.path.lastIndexOf('/'));strTok1=base_url.split('/');strTok2=targetURL.path.split('/');if(strTok1.length>=strTok2.length){for(var i=0;i<strTok1.length;i++){if(i>=strTok2.length||strTok1[i]!=strTok2[i]){breakPoint=i+1;break;}}}if(strTok1.length<strTok2.length){for(var i=0;i<strTok2.length;i++){if(i>=strTok1.length||strTok1[i]!=strTok2[i]){breakPoint=i+1;brea!
 k;}}}if(breakPoint==1)return targetURL.path;for(var i=0;i<(str!
 Tok1.len
gth-(breakPoint-1));i++)outPath+="../";for(var i=breakPoint-1;i<strTok2.length;i++){if(i!=(breakPoint-1))outPath+="/"+strTok2[i];else outPath+=strTok2[i];}targetURL.protocol=null;targetURL.host=null;targetURL.port=null;targetURL.path=outPath==""&&forceSlash?"/":outPath;var fileName=baseURL.path;var pos;if((pos=fileName.lastIndexOf('/'))!=-1)fileName=fileName.substring(pos+1);if(fileName==targetURL.path&&targetURL.anchor!="")targetURL.path="";if(targetURL.path==""&&!targetURL.anchor)targetURL.path=fileName!=""?fileName:"/";return this.serializeURL(targetURL);};TinyMCE_Engine.prototype.convertRelativeToAbsoluteURL=function(base_url,relative_url){var baseURL=this.parseURL(base_url);var relURL=this.parseURL(relative_url);if(relative_url==""||relative_url.charAt(0)=='/'||relative_url.indexOf('://')!=-1||relative_url.indexOf('mailto:')!=-1||relative_url.indexOf('javascript:')!=-1)return relative_url;baseURLParts=baseURL['path'].split('/');relURLParts=relURL['path'].split('/');var !
 newBaseURLParts=new Array();for(var i=baseURLParts.length-1;i>=0;i--){if(baseURLParts[i].length==0)continue;newBaseURLParts[newBaseURLParts.length]=baseURLParts[i];}baseURLParts=newBaseURLParts.reverse();var newRelURLParts=new Array();var numBack=0;for(var i=relURLParts.length-1;i>=0;i--){if(relURLParts[i].length==0||relURLParts[i]==".")continue;if(relURLParts[i]=='..'){numBack++;continue;}if(numBack>0){numBack--;continue;}newRelURLParts[newRelURLParts.length]=relURLParts[i];}relURLParts=newRelURLParts.reverse();var len=baseURLParts.length-numBack;var absPath=(len<=0?"":"/")+baseURLParts.slice(0,len).join('/')+"/"+relURLParts.join('/');var start="",end="";relURL.protocol=baseURL.protocol;relURL.host=baseURL.host;relURL.port=baseURL.port;if(relURL.path.charAt(relURL.path.length-1)=="/")absPath+="/";relURL.path=absPath;return this.serializeURL(relURL);};TinyMCE_Engine.prototype.convertURL=function(url,node,on_save){var prot=document.location.protocol;var host=document.locatio!
 n.hostname;var port=document.location.port;if(prot=="file:")re!
 turn url
;url=tinyMCE.regexpReplace(url,'(http|https):///','/');if(url.indexOf('mailto:')!=-1||url.indexOf('javascript:')!=-1||tinyMCE.regexpReplace(url,'[ \t\r\n\+]|%20','').charAt(0)=="#")return url;if(!tinyMCE.isMSIE&&!on_save&&url.indexOf("://")==-1&&url.charAt(0)!='/')return tinyMCE.settings['base_href']+url;if(on_save&&tinyMCE.getParam('relative_urls')){var curl=tinyMCE.convertRelativeToAbsoluteURL(tinyMCE.settings['base_href'],url);if(curl.charAt(0)=='/')curl=tinyMCE.settings['document_base_prefix']+curl;var urlParts=tinyMCE.parseURL(curl);var tmpUrlParts=tinyMCE.parseURL(tinyMCE.settings['document_base_url']);if(urlParts['host']==tmpUrlParts['host']&&(urlParts['port']==tmpUrlParts['port']))return tinyMCE.convertAbsoluteURLToRelativeURL(tinyMCE.settings['document_base_url'],curl);}if(!tinyMCE.getParam('relative_urls')){var urlParts=tinyMCE.parseURL(url);var baseUrlParts=tinyMCE.parseURL(tinyMCE.settings['base_href']);url=tinyMCE.convertRelativeToAbsoluteURL(tinyMCE.settings['b!
 ase_href'],url);if(urlParts['anchor']&&urlParts['path']==baseUrlParts['path'])return"#"+urlParts['anchor'];}if(tinyMCE.getParam('remove_script_host')){var start="",portPart="";if(port!="")portPart=":"+port;start=prot+"//"+host+portPart+"/";if(url.indexOf(start)==0)url=url.substring(start.length-1);}return url;};TinyMCE_Engine.prototype.convertAllRelativeURLs=function(body){var elms=body.getElementsByTagName("img");for(var i=0;i<elms.length;i++){var src=tinyMCE.getAttrib(elms[i],'src');var msrc=tinyMCE.getAttrib(elms[i],'mce_src');if(msrc!="")src=msrc;if(src!=""){src=tinyMCE.convertRelativeToAbsoluteURL(tinyMCE.settings['base_href'],src);elms[i].setAttribute("src",src);}}var elms=body.getElementsByTagName("a");for(var i=0;i<elms.length;i++){var href=tinyMCE.getAttrib(elms[i],'href');var mhref=tinyMCE.getAttrib(elms[i],'mce_href');if(mhref!="")href=mhref;if(href&&href!=""){href=tinyMCE.convertRelativeToAbsoluteURL(tinyMCE.settings['base_href'],href);elms[i].setAttribute("href!
 ",href);}}};TinyMCE_Engine.prototype.clearArray=function(a){fo!
 r(var k 
in a)a[k]=null;return a;};TinyMCE_Engine.prototype._setEventsEnabled=function(node,state){var events=new Array('onfocus','onblur','onclick','ondblclick','onmousedown','onmouseup','onmouseover','onmousemove','onmouseout','onkeypress','onkeydown','onkeydown','onkeyup');var evs=tinyMCE.settings['event_elements'].split(',');for(var y=0;y<evs.length;y++){var elms=node.getElementsByTagName(evs[y]);for(var i=0;i<elms.length;i++){var event="";for(var x=0;x<events.length;x++){if((event=tinyMCE.getAttrib(elms[i],events[x]))!=''){event=tinyMCE.cleanupEventStr(""+event);if(!state)event="return true;"+event;else event=event.replace(/^return true;/gi,'');elms[i].removeAttribute(events[x]);elms[i].setAttribute(events[x],event);}}}}};TinyMCE_Engine.prototype._eventPatch=function(editor_id){var n,inst,win,e;if(typeof(tinyMCE)=="undefined")return true;try{if(tinyMCE.selectedInstance){win=tinyMCE.selectedInstance.getWin();if(win&&win.event){e=win.event;if(!e.target)e.target=e.srcElement;TinyMC!
 E_Engine.prototype.handleEvent(e);return;}}for(n in tinyMCE.instances){inst=tinyMCE.instances[n];if(!tinyMCE.isInstance(inst))continue;tinyMCE.selectedInstance=inst;win=inst.getWin();if(win&&win.event){e=win.event;if(!e.target)e.target=e.srcElement;TinyMCE_Engine.prototype.handleEvent(e);return;}}}catch(ex){}};TinyMCE_Engine.prototype.unloadHandler=function(){tinyMCE.triggerSave(true,true);};TinyMCE_Engine.prototype.addEventHandlers=function(inst){var doc=inst.getDoc();inst.switchSettings();if(tinyMCE.isMSIE){tinyMCE.addEvent(doc,"keypress",TinyMCE_Engine.prototype._eventPatch);tinyMCE.addEvent(doc,"keyup",TinyMCE_Engine.prototype._eventPatch);tinyMCE.addEvent(doc,"keydown",TinyMCE_Engine.prototype._eventPatch);tinyMCE.addEvent(doc,"mouseup",TinyMCE_Engine.prototype._eventPatch);tinyMCE.addEvent(doc,"mousedown",TinyMCE_Engine.prototype._eventPatch);tinyMCE.addEvent(doc,"click",TinyMCE_Engine.prototype._eventPatch);}else{tinyMCE.addEvent(doc,"keypress",tinyMCE.handleEvent);t!
 inyMCE.addEvent(doc,"keydown",tinyMCE.handleEvent);tinyMCE.add!
 Event(do
c,"keyup",tinyMCE.handleEvent);tinyMCE.addEvent(doc,"click",tinyMCE.handleEvent);tinyMCE.addEvent(doc,"mouseup",tinyMCE.handleEvent);tinyMCE.addEvent(doc,"mousedown",tinyMCE.handleEvent);tinyMCE.addEvent(doc,"focus",tinyMCE.handleEvent);tinyMCE.addEvent(doc,"blur",tinyMCE.handleEvent);eval('try { doc.designMode = "On"; } catch(e) {}');}};TinyMCE_Engine.prototype.onMouseMove=function(){var inst;if(!tinyMCE.hasMouseMoved){inst=tinyMCE.selectedInstance;if(inst.isFocused){inst.undoBookmark=inst.selection.getBookmark();tinyMCE.hasMouseMoved=true;}}};TinyMCE_Engine.prototype.cancelEvent=function(e){if(tinyMCE.isMSIE){e.returnValue=false;e.cancelBubble=true;}else e.preventDefault();};TinyMCE_Engine.prototype.addEvent=function(o,n,h){if(o.attachEvent)o.attachEvent("on"+n,h);else o.addEventListener(n,h,false);};TinyMCE_Engine.prototype.addSelectAccessibility=function(e,s,w){if(!s._isAccessible){s.onkeydown=tinyMCE.accessibleEventHandler;s.onblur=tinyMCE.accessibleEventHandler;s._isAc!
 cessible=true;s._win=w;}return false;};TinyMCE_Engine.prototype.accessibleEventHandler=function(e){var win=this._win;e=tinyMCE.isMSIE?win.event:e;var elm=tinyMCE.isMSIE?e.srcElement:e.target;if(e.type=="blur"){if(elm.oldonchange){elm.onchange=elm.oldonchange;elm.oldonchange=null;}return true;}if(elm.nodeName=="SELECT"&&!elm.oldonchange){elm.oldonchange=elm.onchange;elm.onchange=null;}if(e.keyCode==13||e.keyCode==32){elm.onchange=elm.oldonchange;elm.onchange();elm.oldonchange=null;tinyMCE.cancelEvent(e);return false;}return true;};TinyMCE_Engine.prototype._resetIframeHeight=function(){var ife;if(tinyMCE.isMSIE&&!tinyMCE.isOpera){ife=tinyMCE.selectedInstance.iframeElement;if(ife._oldHeight){ife.style.height=ife._oldHeight;ife.height=ife._oldHeight;}}};function TinyMCE_Selection(inst){this.instance=inst;};TinyMCE_Selection.prototype={getSelectedHTML:function(){var inst=this.instance;var e,r=this.getRng(),h;if(tinyMCE.isSafari){return r.toString();}e=document.createElement("bod!
 y");if(tinyMCE.isGecko)e.appendChild(r.cloneContents());else e!
 .innerHT
ML=r.item?r.item(0).outerHTML:r.htmlText;h=tinyMCE._cleanupHTML(inst,inst.contentDocument,inst.settings,e,e,false,true,false);if(tinyMCE.getParam("convert_fonts_to_spans"))tinyMCE.convertSpansToFonts(inst.getDoc());return h;},getSelectedText:function(){var inst=this.instance;var d,r,s,t;if(tinyMCE.isMSIE){d=inst.getDoc();if(d.selection.type=="Text"){r=d.selection.createRange();t=r.text;}else t='';}else{s=this.getSel();if(s&&s.toString)t=s.toString();else t='';}return t;},getBookmark:function(simple){var rng=this.getRng();var doc=this.instance.getDoc();var sp,le,s,e,nl,i,si,ei;var trng,sx,sy,xx=-999999999;if(tinyMCE.isOpera)return null;sx=doc.body.scrollLeft+doc.documentElement.scrollLeft;sy=doc.body.scrollTop+doc.documentElement.scrollTop;if(tinyMCE.isSafari||tinyMCE.isGecko)return{rng:rng,scrollX:sx,scrollY:sy};if(tinyMCE.isMSIE){if(simple)return{rng:rng};if(rng.item){e=rng.item(0);nl=doc.getElementsByTagName(e.nodeName);for(i=0;i<nl.length;i++){if(e==nl[i]){sp=i;break;}}re!
 turn{tag:e.nodeName,index:sp,scrollX:sx,scrollY:sy};}else{trng=rng.duplicate();trng.collapse(true);sp=Math.abs(trng.move('character',xx));trng=rng.duplicate();trng.collapse(false);le=Math.abs(trng.move('character',xx))-sp;return{start:sp,length:le,scrollX:sx,scrollY:sy};}}if(tinyMCE.isGecko){s=tinyMCE.getParentElement(rng.startContainer);for(si=0;si<s.childNodes.length&&s.childNodes[si]!=rng.startContainer;si++);nl=doc.getElementsByTagName(s.nodeName);for(i=0;i<nl.length;i++){if(s==nl[i]){sp=i;break;}}e=tinyMCE.getParentElement(rng.endContainer);for(ei=0;ei<e.childNodes.length&&e.childNodes[ei]!=rng.endContainer;ei++);nl=doc.getElementsByTagName(e.nodeName);for(i=0;i<nl.length;i++){if(e==nl[i]){le=i;break;}}return{startTag:s.nodeName,start:sp,startIndex:si,endTag:e.nodeName,end:le,endIndex:ei,startOffset:rng.startOffset,endOffset:rng.endOffset,scrollX:sx,scrollY:sy};}return null;},moveToBookmark:function(bookmark){var rng,nl,i;var inst=this.instance;var doc=inst.getDoc();va!
 r win=inst.getWin();var sel=this.getSel();if(!bookmark)return !
 false;if
(tinyMCE.isSafari){sel.setBaseAndExtent(bookmark.startContainer,bookmark.startOffset,bookmark.endContainer,bookmark.endOffset);return true;}if(tinyMCE.isMSIE){if(bookmark.rng){bookmark.rng.select();return true;}win.focus();if(bookmark.tag){rng=inst.getBody().createControlRange();nl=doc.getElementsByTagName(bookmark.tag);if(nl.length>bookmark.index){try{rng.addElement(nl[bookmark.index]);}catch(ex){}}}else{rng=inst.getSel().createRange();rng.moveToElementText(inst.getBody());rng.collapse(true);rng.moveStart('character',bookmark.start);rng.moveEnd('character',bookmark.length);}rng.select();win.scrollTo(bookmark.scrollX,bookmark.scrollY);return true;}if(tinyMCE.isGecko&&bookmark.rng){sel.removeAllRanges();sel.addRange(bookmark.rng);win.scrollTo(bookmark.scrollX,bookmark.scrollY);return true;}if(tinyMCE.isGecko){rng=doc.createRange();nl=doc.getElementsByTagName(bookmark.startTag);if(nl.length>bookmark.start)rng.setStart(nl[bookmark.start].childNodes[bookmark.startIndex],bookmark!
 .startOffset);nl=doc.getElementsByTagName(bookmark.endTag);if(nl.length>bookmark.end)rng.setEnd(nl[bookmark.end].childNodes[bookmark.endIndex],bookmark.endOffset);sel.removeAllRanges();sel.addRange(rng);win.scrollTo(bookmark.scrollX,bookmark.scrollY);return true;}return false;},selectNode:function(node,collapse,select_text_node,to_start){var inst=this.instance,sel,rng,nodes;if(!node)return;if(typeof(collapse)=="undefined")collapse=true;if(typeof(select_text_node)=="undefined")select_text_node=false;if(typeof(to_start)=="undefined")to_start=true;if(tinyMCE.isMSIE){rng=inst.getBody().createTextRange();try{rng.moveToElementText(node);if(collapse)rng.collapse(to_start);rng.select();}catch(e){}}else{sel=this.getSel();if(!sel)return;if(tinyMCE.isSafari){sel.setBaseAndExtent(node,0,node,node.innerText.length);if(collapse){if(to_start)sel.collapseToStart();else sel.collapseToEnd();}this.scrollToNode(node);return;}rng=inst.getDoc().createRange();if(select_text_node){nodes=tinyMCE.ge!
 tNodeTree(node,new Array(),3);if(nodes.length>0)rng.selectNode!
 Contents
(nodes[0]);else rng.selectNodeContents(node);}else rng.selectNode(node);if(collapse){if(!to_start&&node.nodeType==3){rng.setStart(node,node.nodeValue.length);rng.setEnd(node,node.nodeValue.length);}else rng.collapse(to_start);}sel.removeAllRanges();sel.addRange(rng);}this.scrollToNode(node);tinyMCE.selectedElement=null;if(node.nodeType==1)tinyMCE.selectedElement=node;},scrollToNode:function(node){var inst=this.instance;var pos,doc,scrollX,scrollY,height;pos=tinyMCE.getAbsPosition(node);doc=inst.getDoc();scrollX=doc.body.scrollLeft+doc.documentElement.scrollLeft;scrollY=doc.body.scrollTop+doc.documentElement.scrollTop;height=tinyMCE.isMSIE?document.getElementById(inst.editorId).style.pixelHeight:inst.targetElement.clientHeight;if(!tinyMCE.settings['auto_resize']&&!(pos.absTop>scrollY&&pos.absTop<(scrollY-25+height)))inst.contentWindow.scrollTo(pos.absLeft,pos.absTop-height+25);},getSel:function(){var inst=this.instance;if(tinyMCE.isMSIE&&!tinyMCE.isOpera)return inst.getDoc().!
 selection;return inst.contentWindow.getSelection();},getRng:function(){var inst=this.instance;var sel=this.getSel();if(sel==null)return null;if(tinyMCE.isMSIE&&!tinyMCE.isOpera)return sel.createRange();if(tinyMCE.isSafari&&!sel.getRangeAt)return''+window.getSelection();return sel.getRangeAt(0);},getFocusElement:function(){var inst=this.instance;if(tinyMCE.isMSIE&&!tinyMCE.isOpera){var doc=inst.getDoc();var rng=doc.selection.createRange();var elm=rng.item?rng.item(0):rng.parentElement();}else{if(inst.isHidden())return inst.getBody();var sel=this.getSel();var rng=this.getRng();if(!sel||!rng)return null;var elm=rng.commonAncestorContainer;if(!rng.collapsed){if(rng.startContainer==rng.endContainer){if(rng.startOffset-rng.endOffset<2){if(rng.startContainer.hasChildNodes())elm=rng.startContainer.childNodes[rng.startOffset];}}}elm=tinyMCE.getParentElement(elm);}return elm;}};function TinyMCE_UndoRedo(inst){this.instance=inst;this.undoLevels=new Array();this.undoIndex=0;this.typing!
 UndoIndex=-1;this.undoRedo=true;};TinyMCE_UndoRedo.prototype={!
 add:func
tion(l){var b;if(l){this.undoLevels[this.undoLevels.length]=l;return true;}var inst=this.instance;if(this.typingUndoIndex!=-1){this.undoIndex=this.typingUndoIndex;}var newHTML=tinyMCE.trim(inst.getBody().innerHTML);if(this.undoLevels[this.undoIndex]&&newHTML!=this.undoLevels[this.undoIndex].content){tinyMCE.dispatchCallback(inst,'onchange_callback','onChange',inst);var customUndoLevels=tinyMCE.settings['custom_undo_redo_levels'];if(customUndoLevels!=-1&&this.undoLevels.length>customUndoLevels){for(var i=0;i<this.undoLevels.length-1;i++){this.undoLevels[i]=this.undoLevels[i+1];}this.undoLevels.length--;this.undoIndex--;}b=inst.undoBookmark;if(!b)b=inst.selection.getBookmark();this.undoIndex++;this.undoLevels[this.undoIndex]={content:newHTML,bookmark:b};this.undoLevels.length=this.undoIndex+1;return true;}return false;},undo:function(){var inst=this.instance;if(this.undoIndex>0){this.undoIndex--;tinyMCE.setInnerHTML(inst.getBody(),this.undoLevels[this.undoIndex].content);inst.!
 repaint();if(inst.settings.custom_undo_redo_restore_selection)inst.selection.moveToBookmark(this.undoLevels[this.undoIndex].bookmark);}},redo:function(){var inst=this.instance;tinyMCE.execCommand("mceEndTyping");if(this.undoIndex<(this.undoLevels.length-1)){this.undoIndex++;tinyMCE.setInnerHTML(inst.getBody(),this.undoLevels[this.undoIndex].content);inst.repaint();if(inst.settings.custom_undo_redo_restore_selection)inst.selection.moveToBookmark(this.undoLevels[this.undoIndex].bookmark);}tinyMCE.triggerNodeChange();}};var TinyMCE_ForceParagraphs={_insertPara:function(inst,e){function isEmpty(para){function isEmptyHTML(html){return html.replace(new RegExp('[ \t\r\n]+','g'),'').toLowerCase()=="";}if(para.getElementsByTagName("img").length>0)return false;if(para.getElementsByTagName("table").length>0)return false;if(para.getElementsByTagName("hr").length>0)return false;var nodes=tinyMCE.getNodeTree(para,new Array(),3);for(var i=0;i<nodes.length;i++){if(!isEmptyHTML(nodes[i].nod!
 eValue))return false;}return true;}var doc=inst.getDoc();var s!
 el=inst.
getSel();var win=inst.contentWindow;var rng=sel.getRangeAt(0);var body=doc.body;var rootElm=doc.documentElement;var blockName="P";var rngBefore=doc.createRange();rngBefore.setStart(sel.anchorNode,sel.anchorOffset);rngBefore.collapse(true);var rngAfter=doc.createRange();rngAfter.setStart(sel.focusNode,sel.focusOffset);rngAfter.collapse(true);var direct=rngBefore.compareBoundaryPoints(rngBefore.START_TO_END,rngAfter)<0;var startNode=direct?sel.anchorNode:sel.focusNode;var startOffset=direct?sel.anchorOffset:sel.focusOffset;var endNode=direct?sel.focusNode:sel.anchorNode;var endOffset=direct?sel.focusOffset:sel.anchorOffset;startNode=startNode.nodeName=="BODY"?startNode.firstChild:startNode;endNode=endNode.nodeName=="BODY"?endNode.firstChild:endNode;var startBlock=tinyMCE.getParentBlockElement(startNode);var endBlock=tinyMCE.getParentBlockElement(endNode);if(startBlock&&new RegExp('absolute|relative|static','gi').test(startBlock.style.position))startBlock=null;if(endBlock&&new !
 RegExp('absolute|relative|static','gi').test(endBlock.style.position))endBlock=null;if(startBlock!=null){blockName=startBlock.nodeName;if(blockName=="TD"||blockName=="TABLE"||(blockName=="DIV"&&new RegExp('left|right','gi').test(startBlock.style.cssFloat)))blockName="P";}if(tinyMCE.getParentElement(startBlock,"OL,UL")!=null)return false;if((startBlock!=null&&startBlock.nodeName=="TABLE")||(endBlock!=null&&endBlock.nodeName=="TABLE"))startBlock=endBlock=null;var paraBefore=(startBlock!=null&&startBlock.nodeName==blockName)?startBlock.cloneNode(false):doc.createElement(blockName);var paraAfter=(endBlock!=null&&endBlock.nodeName==blockName)?endBlock.cloneNode(false):doc.createElement(blockName);if(/^(H[1-6])$/.test(blockName))paraAfter=doc.createElement("p");var startChop=startNode;var endChop=endNode;node=startChop;do{if(node==body||node.nodeType==9||tinyMCE.isBlockElement(node))break;startChop=node;}while((node=node.previousSibling?node.previousSibling:node.parentNode));node!
 =endChop;do{if(node==body||node.nodeType==9||tinyMCE.isBlockEl!
 ement(no
de))break;endChop=node;}while((node=node.nextSibling?node.nextSibling:node.parentNode));if(startChop.nodeName=="TD")startChop=startChop.firstChild;if(endChop.nodeName=="TD")endChop=endChop.lastChild;if(startBlock==null){rng.deleteContents();sel.removeAllRanges();if(startChop!=rootElm&&endChop!=rootElm){rngBefore=rng.cloneRange();if(startChop==body)rngBefore.setStart(startChop,0);else rngBefore.setStartBefore(startChop);paraBefore.appendChild(rngBefore.cloneContents());if(endChop.parentNode.nodeName==blockName)endChop=endChop.parentNode;rng.setEndAfter(endChop);if(endChop.nodeName!="#text"&&endChop.nodeName!="BODY")rngBefore.setEndAfter(endChop);var contents=rng.cloneContents();if(contents.firstChild&&(contents.firstChild.nodeName==blockName||contents.firstChild.nodeName=="BODY"))paraAfter.innerHTML=contents.firstChild.innerHTML;else paraAfter.appendChild(contents);if(isEmpty(paraBefore))paraBefore.innerHTML="&nbsp;";if(isEmpty(paraAfter))paraAfter.innerHTML="&nbsp;";rng.dele!
 teContents();rngAfter.deleteContents();rngBefore.deleteContents();paraAfter.normalize();rngBefore.insertNode(paraAfter);paraBefore.normalize();rngBefore.insertNode(paraBefore);}else{body.innerHTML="<"+blockName+">&nbsp;</"+blockName+"><"+blockName+">&nbsp;</"+blockName+">";paraAfter=body.childNodes[1];}inst.selection.selectNode(paraAfter,true,true);return true;}if(startChop.nodeName==blockName)rngBefore.setStart(startChop,0);else rngBefore.setStartBefore(startChop);rngBefore.setEnd(startNode,startOffset);paraBefore.appendChild(rngBefore.cloneContents());rngAfter.setEndAfter(endChop);rngAfter.setStart(endNode,endOffset);var contents=rngAfter.cloneContents();if(contents.firstChild&&contents.firstChild.nodeName==blockName){paraAfter.innerHTML=contents.firstChild.innerHTML;}else paraAfter.appendChild(contents);if(isEmpty(paraBefore))paraBefore.innerHTML="&nbsp;";if(isEmpty(paraAfter))paraAfter.innerHTML="&nbsp;";var rng=doc.createRange();if(!startChop.previousSibling&&startChop!
 .parentNode.nodeName.toUpperCase()==blockName){rng.setStartBef!
 ore(star
tChop.parentNode);}else{if(rngBefore.startContainer.nodeName.toUpperCase()==blockName&&rngBefore.startOffset==0)rng.setStartBefore(rngBefore.startContainer);else rng.setStart(rngBefore.startContainer,rngBefore.startOffset);}if(!endChop.nextSibling&&endChop.parentNode.nodeName.toUpperCase()==blockName)rng.setEndAfter(endChop.parentNode);else rng.setEnd(rngAfter.endContainer,rngAfter.endOffset);rng.deleteContents();rng.insertNode(paraAfter);rng.insertNode(paraBefore);paraAfter.normalize();paraBefore.normalize();inst.selection.selectNode(paraAfter,true,true);return true;},_handleBackSpace:function(inst){var r=inst.getRng(),sn=r.startContainer,nv,s=false;if(sn&&sn.nextSibling&&sn.nextSibling.nodeName=="BR"){nv=sn.nodeValue;if(nv!=null&&nv.length>=r.startOffset&&nv.charAt(r.startOffset-1)==' ')s=true;if(nv!=null&&r.startOffset==nv.length)sn.nextSibling.parentNode.removeChild(sn.nextSibling);}return s;}};function TinyMCE_Layer(id,bm){this.id=id;this.blockerElement=null;this.events!
 =false;this.element=null;this.blockMode=typeof(bm)!='undefined'?bm:true;this.doc=document;};TinyMCE_Layer.prototype={moveRelativeTo:function(re,p){var rep=this.getAbsPosition(re);var w=parseInt(re.offsetWidth);var h=parseInt(re.offsetHeight);var e=this.getElement();var ew=parseInt(e.offsetWidth);var eh=parseInt(e.offsetHeight);var x,y;switch(p){case"tl":x=rep.absLeft;y=rep.absTop;break;case"tr":x=rep.absLeft+w;y=rep.absTop;break;case"bl":x=rep.absLeft;y=rep.absTop+h;break;case"br":x=rep.absLeft+w;y=rep.absTop+h;break;case"cc":x=rep.absLeft+(w/2)-(ew/2);y=rep.absTop+(h/2)-(eh/2);break;}this.moveTo(x,y);},moveBy:function(x,y){var e=this.getElement();this.moveTo(parseInt(e.style.left)+x,parseInt(e.style.top)+y);},moveTo:function(x,y){var e=this.getElement();e.style.left=x+"px";e.style.top=y+"px";this.updateBlocker();},resizeBy:function(w,h){var e=this.getElement();this.resizeTo(parseInt(e.style.width)+w,parseInt(e.style.height)+h);},resizeTo:function(w,h){var e=this.getElement!
 ();if(w!=null)e.style.width=w+"px";if(h!=null)e.style.height=h!
 +"px";th
is.updateBlocker();},show:function(){this.getElement().style.display='block';this.updateBlocker();},hide:function(){this.getElement().style.display='none';this.updateBlocker();},isVisible:function(){return this.getElement().style.display=='block';},getElement:function(){if(!this.element)this.element=this.doc.getElementById(this.id);return this.element;},setBlockMode:function(s){this.blockMode=s;},updateBlocker:function(){var e,b,x,y,w,h;b=this.getBlocker();if(b){if(this.blockMode){e=this.getElement();x=this.parseInt(e.style.left);y=this.parseInt(e.style.top);w=this.parseInt(e.offsetWidth);h=this.parseInt(e.offsetHeight);b.style.left=x+'px';b.style.top=y+'px';b.style.width=w+'px';b.style.height=h+'px';b.style.display=e.style.display;}else b.style.display='none';}},getBlocker:function(){var d,b;if(!this.blockerElement&&this.blockMode){d=this.doc;b=d.createElement("iframe");b.style.cssText='display: none; position: absolute; left: 0; top: 0';b.src='javascript:false;';b.frameBor!
 der='0';b.scrolling='no';d.body.appendChild(b);this.blockerElement=b;}return this.blockerElement;},getAbsPosition:function(n){var p={absLeft:0,absTop:0};while(n){p.absLeft+=n.offsetLeft;p.absTop+=n.offsetTop;n=n.offsetParent;}return p;},create:function(n,c,p){var d=this.doc,e=d.createElement(n);e.setAttribute('id',this.id);if(c)e.className=c;if(!p)p=d.body;p.appendChild(e);return this.element=e;},parseInt:function(s){if(s==null||s=='')return 0;return parseInt(s);}};function TinyMCE_Menu(){var id;if(typeof(tinyMCE.menuCounter)=="undefined")tinyMCE.menuCounter=0;id="mc_menu_"+tinyMCE.menuCounter++;TinyMCE_Layer.call(this,id,true);this.id=id;this.items=new Array();this.needsUpdate=true;};TinyMCE_Menu.prototype=tinyMCE.extend(TinyMCE_Layer.prototype,{init:function(s){var n;this.settings={separator_class:'mceMenuSeparator',title_class:'mceMenuTitle',disabled_class:'mceMenuDisabled',menu_class:'mceMenu',drop_menu:true};for(n in s)this.settings[n]=s[n];this.create('div',this.setti!
 ngs.menu_class);},clear:function(){this.items=new Array();},ad!
 dTitle:f
unction(t){this.add({type:'title',text:t});},addDisabled:function(t){this.add({type:'disabled',text:t});},addSeparator:function(){this.add({type:'separator'});},addItem:function(t,js){this.add({text:t,js:js});},add:function(mi){this.items[this.items.length]=mi;this.needsUpdate=true;},update:function(){var e=this.getElement(),h='',i,t,m=this.items,s=this.settings;if(this.settings.drop_menu)h+='<span class="mceMenuLine"></span>';h+='<table border="0" cellpadding="0" cellspacing="0">';for(i=0;i<m.length;i++){t=tinyMCE.xmlEncode(m[i].text);c=m[i].class_name?' class="'+m[i].class_name+'"':'';switch(m[i].type){case'separator':h+='<tr class="'+s.separator_class+'"><td>';break;case'title':h+='<tr class="'+s.title_class+'"><td><span'+c+'>'+t+'</span>';break;case'disabled':h+='<tr class="'+s.disabled_class+'"><td><span'+c+'>'+t+'</span>';break;default:h+='<tr><td><a href="javascript:void(0);" onmousedown="'+tinyMCE.xmlEncode(m[i].js)+';return false;"><span'+c+'>'+t+'</span></a>';}h+='!
 </td></tr>';}h+='</table>';e.innerHTML=h;this.needsUpdate=false;this.updateBlocker();},show:function(){var nl,i;if(tinyMCE.lastMenu==this)return;if(this.needsUpdate)this.update();if(tinyMCE.lastMenu&&tinyMCE.lastMenu!=this)tinyMCE.lastMenu.hide();TinyMCE_Layer.prototype.show.call(this);if(!tinyMCE.isOpera){}tinyMCE.lastMenu=this;}});TinyMCE_Engine.prototype.debug=function(){var m="",e,a,i;e=document.getElementById("tinymce_debug");if(!e){var d=document.createElement("div");d.setAttribute("className","debugger");d.className="debugger";d.innerHTML='Debug output:<textarea id="tinymce_debug" style="width: 100%; height: 300px" wrap="nowrap" mce_editable="false"></textarea>';document.body.appendChild(d);e=document.getElementById("tinymce_debug");}a=this.debug.arguments;for(i=0;i<a.length;i++){m+=a[i];if(i<a.length-1)m+=', ';}e.value+=m+"\n";};
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/tiny_mce_gzip.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/tiny_mce_gzip.php	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/tiny_mce_gzip.php	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,268 @@
+<?php
+/**
+ * $RCSfile: tiny_mce_gzip.php,v $
+ * $Revision: $
+ * $Date: $
+ *
+ * @version 1.08
+ * @author Moxiecode
+ * @copyright Copyright ? 2005-2006, Moxiecode Systems AB, All rights reserved.
+ *
+ * This file compresses the TinyMCE JavaScript using GZip and
+ * enables the browser to do two requests instead of one for each .js file.
+ * Notice: This script defaults the button_tile_map option to true for extra performance.
+ */
+
+// General options
+$suffix = "";							// Set to "_src" to use source version
+$expiresOffset = 3600 * 24 * 10;		// 10 days util client cache expires
+$diskCache = false;						// If you enable this option gzip files will be cached on disk.
+$cacheDir = realpath(".");				// Absolute directory path to where cached gz files will be stored
+$debug = false;							// Enable this option if you need debuging info
+
+// Headers
+header("Content-type: text/javascript; charset: UTF-8");
+// header("Cache-Control: must-revalidate");
+header("Vary: Accept-Encoding"); // Handle proxies
+header("Expires: " . gmdate("D, d M Y H:i:s", time() + $expiresOffset) . " GMT");
+
+// Get data to load
+$theme = isset($_GET['theme']) ? TinyMCE_cleanInput($_GET['theme']) : "";
+$language = isset($_GET['language']) ? TinyMCE_cleanInput($_GET['language']) : "";
+$plugins = isset($_GET['plugins']) ? TinyMCE_cleanInput($_GET['plugins']) : "";
+$lang = isset($_GET['lang']) ? TinyMCE_cleanInput($_GET['lang']) : "en";
+$index = isset($_GET['index']) ? TinyMCE_cleanInput($_GET['index']) : -1;
+$cacheKey = md5($theme . $language . $plugins . $lang . $index . $debug);
+$cacheFile = $cacheDir == "" ? "" : $cacheDir . "/" . "tinymce_" .  $cacheKey . ".gz";
+$cacheData = "";
+
+// Patch older versions of PHP < 4.3.0
+if (!function_exists('file_get_contents')) {
+	function file_get_contents($filename) {
+		$fd = fopen($filename, 'rb');
+		$content = fread($fd, filesize($filename));
+		fclose($fd);
+		return $content;
+	}
+}
+
+// Security check function, can only contain a-z 0-9 , _ - and whitespace.
+function TinyMCE_cleanInput($str) {
+	return preg_replace("/[^0-9a-z\-_,]+/i", "", $str); // Remove anything but 0-9,a-z,-_
+}
+
+function TinyMCE_echo($str) {
+	global $cacheData, $diskCache;
+
+	if ($diskCache)
+		$cacheData .= $str;
+	else
+		echo $str;
+}
+
+// Only gzip the contents if clients and server support it
+$encodings = array();
+
+if (isset($_SERVER['HTTP_ACCEPT_ENCODING']))
+	$encodings = explode(',', strtolower(preg_replace("/\s+/", "", $_SERVER['HTTP_ACCEPT_ENCODING'])));
+
+// Check for gzip header or northon internet securities
+if ((in_array('gzip', $encodings) || in_array('x-gzip', $encodings) || isset($_SERVER['---------------'])) && function_exists('ob_gzhandler') && !ini_get('zlib.output_compression')) {
+	$enc = in_array('x-gzip', $encodings) ? "x-gzip" : "gzip";
+
+	// Use cached file if it exists but not in debug mode
+	if (file_exists($cacheFile) && !$debug) {
+		header("Content-Encoding: " . $enc);
+		echo file_get_contents($cacheFile);
+		die;
+	}
+
+	if (!$diskCache)
+		ob_start("ob_gzhandler");
+} else
+	$diskCache = false;
+
+if ($index > -1) {
+	// Write main script and patch some things
+	if ($index == 0) {
+		TinyMCE_echo(file_get_contents(realpath("tiny_mce" . $suffix . ".js")));
+		TinyMCE_echo('TinyMCE.prototype.orgLoadScript = TinyMCE.prototype.loadScript;');
+		TinyMCE_echo('TinyMCE.prototype.loadScript = function() {};var realTinyMCE = tinyMCE;');
+	} else
+		TinyMCE_echo('tinyMCE = realTinyMCE;');
+
+	// Do init based on index
+	TinyMCE_echo("tinyMCE.init(tinyMCECompressed.configs[" . $index . "]);");
+
+	// Load external plugins
+	if ($index == 0)
+		TinyMCE_echo("tinyMCECompressed.loadPlugins();");
+
+	// Load theme, language pack and theme language packs
+	if ($theme) {
+		TinyMCE_echo(file_get_contents(realpath("themes/" . $theme . "/editor_template" . $suffix . ".js")));
+		TinyMCE_echo(file_get_contents(realpath("themes/" . $theme . "/langs/" . $lang . ".js")));
+	}
+
+	if ($language)
+		TinyMCE_echo(file_get_contents(realpath("langs/" . $language . ".js")));
+
+	// Load all plugins and their language packs
+	$plugins = explode(",", $plugins);
+	foreach ($plugins as $plugin) {
+		$pluginFile = realpath("plugins/" . $plugin . "/editor_plugin" . $suffix . ".js");
+		$languageFile = realpath("plugins/" . $plugin . "/langs/" . $lang . ".js");
+
+		if ($pluginFile)
+			TinyMCE_echo(file_get_contents($pluginFile));
+
+		if ($languageFile)
+			TinyMCE_echo(file_get_contents($languageFile));
+	}
+
+	// Reset tinyMCE compressor engine
+	TinyMCE_echo("tinyMCE = tinyMCECompressed;");
+
+	// Write to cache
+	if ($diskCache) {
+		// Calculate compression ratio and debug target output path
+		if ($debug) {
+			$ratio = round(100 - strlen(gzencode($cacheData, 9, FORCE_GZIP)) / strlen($cacheData) * 100.0);
+			TinyMCE_echo("alert('TinyMCE was compressed by " . $ratio . "%.\\nOutput cache file: " . $cacheFile . "');");
+		}
+
+		$cacheData = gzencode($cacheData, 9, FORCE_GZIP);
+
+		// Write to file if possible
+		$fp = @fopen($cacheFile, "wb");
+		if ($fp) {
+			fwrite($fp, $cacheData);
+			fclose($fp);
+		}
+
+		// Output
+		header("Content-Encoding: " . $enc);
+		echo $cacheData;
+	}
+
+	die;
+}
+?>
+
+function TinyMCECompressed() {
+	this.configs = new Array();
+	this.loadedFiles = new Array();
+	this.externalPlugins = new Array();
+	this.loadAdded = false;
+	this.isLoaded = false;
+}
+
+TinyMCECompressed.prototype.init = function(settings) {
+	var elements = document.getElementsByTagName('script');
+	var scriptURL = "";
+
+	for (var i=0; i<elements.length; i++) {
+		if (elements[i].src && elements[i].src.indexOf("tiny_mce_gzip.php") != -1) {
+			scriptURL = elements[i].src;
+			break;
+		}
+	}
+
+	settings["theme"] = typeof(settings["theme"]) != "undefined" ? settings["theme"] : "default";
+	settings["plugins"] = typeof(settings["plugins"]) != "undefined" ? settings["plugins"] : "";
+	settings["language"] = typeof(settings["language"]) != "undefined" ? settings["language"] : "en";
+	settings["button_tile_map"] = typeof(settings["button_tile_map"]) != "undefined" ? settings["button_tile_map"] : true;
+	this.configs[this.configs.length] = settings;
+	this.settings = settings;
+
+	scriptURL += "?theme=" + escape(this.getOnce(settings["theme"])) + "&language=" + escape(this.getOnce(settings["language"])) + "&plugins=" + escape(this.getOnce(settings["plugins"])) + "&lang=" + settings["language"] + "&index=" + escape(this.configs.length-1);
+	document.write('<sc'+'ript language="javascript" type="text/javascript" src="' + scriptURL + '"></script>');
+
+	if (!this.loadAdded) {
+		tinyMCE.addEvent(window, "DOMContentLoaded", TinyMCECompressed.prototype.onLoad);
+		tinyMCE.addEvent(window, "load", TinyMCECompressed.prototype.onLoad);
+		this.loadAdded = true;
+	}
+}
+
+TinyMCECompressed.prototype.onLoad = function() {
+	if (tinyMCE.isLoaded)
+		return true;
+
+	tinyMCE = realTinyMCE;
+	TinyMCE_Engine.prototype.onLoad();
+	tinyMCE._addUnloadEvents();
+
+	tinyMCE.isLoaded = true;
+}
+
+TinyMCECompressed.prototype.addEvent = function(o, n, h) {
+	if (o.attachEvent)
+		o.attachEvent("on" + n, h);
+	else
+		o.addEventListener(n, h, false);
+}
+
+TinyMCECompressed.prototype.getOnce = function(str) {
+	var ar = str.replace(/\s+/g, '').split(',');
+
+	for (var i=0; i<ar.length; i++) {
+		if (ar[i] == '' || ar[i].charAt(0) == '-') {
+			ar[i] = null;
+			continue;
+		}
+
+		// Skip load
+		for (var x=0; x<this.loadedFiles.length; x++) {
+			if (this.loadedFiles[x] == ar[i])
+				ar[i] = null;
+		}
+
+		this.loadedFiles[this.loadedFiles.length] = ar[i];
+	}
+
+	// Glue
+	str = "";
+	for (var i=0; i<ar.length; i++) {
+		if (ar[i] == null)
+			continue;
+
+		str += ar[i];
+
+		if (i != ar.length-1)
+			str += ",";
+	}
+
+	return str;
+};
+
+TinyMCECompressed.prototype.loadPlugins = function() {
+	var i, ar;
+
+	TinyMCE.prototype.loadScript = TinyMCE.prototype.orgLoadScript;
+	tinyMCE = realTinyMCE;
+
+	ar = tinyMCECompressed.externalPlugins;
+	for (i=0; i<ar.length; i++)
+		tinyMCE.loadPlugin(ar[i].name, ar[i].url);
+
+	TinyMCE.prototype.loadScript = function() {};
+};
+
+TinyMCECompressed.prototype.loadPlugin = function(n, u) {
+	this.externalPlugins[this.externalPlugins.length] = {name : n, url : u};
+};
+
+TinyMCECompressed.prototype.importPluginLanguagePack = function(n, v) {
+	tinyMCE = realTinyMCE;
+	TinyMCE.prototype.loadScript = TinyMCE.prototype.orgLoadScript;
+	tinyMCE.importPluginLanguagePack(n, v);
+};
+
+TinyMCECompressed.prototype.addPlugin = function(n, p) {
+	tinyMCE = realTinyMCE;
+	tinyMCE.addPlugin(n, p);
+};
+
+var tinyMCE = new TinyMCECompressed();
+var tinyMCECompressed = tinyMCE;

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/tiny_mce_popup.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/tiny_mce_popup.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/tiny_mce_popup.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,272 @@
+
+
+// Some global instances, this will be filled later
+var tinyMCE = null, tinyMCELang = null;
+
+
+function TinyMCE_Popup() {
+};
+
+
+TinyMCE_Popup.prototype.init = function() {
+	var win = window.opener ? window.opener : window.dialogArguments;
+	var inst;
+
+	if (!win) {
+		// Try parent
+		win = parent.parent;
+
+		// Try top
+		if (typeof(win.tinyMCE) == "undefined")
+			win = top;
+	}
+
+	window.opener = win;
+	this.windowOpener = win;
+	this.onLoadEval = "";
+
+	// Setup parent references
+	tinyMCE = win.tinyMCE;
+	tinyMCELang = win.tinyMCELang;
+
+	if (!tinyMCE) {
+		alert("tinyMCE object reference not found from popup.");
+		return;
+	}
+
+	inst = tinyMCE.selectedInstance;
+	this.isWindow = tinyMCE.getWindowArg('mce_inside_iframe', false) == false;
+	this.storeSelection = (tinyMCE.isMSIE && !tinyMCE.isOpera) && !this.isWindow && tinyMCE.getWindowArg('mce_store_selection', true);
+
+	if (this.isWindow)
+		window.focus();
+
+	// Store selection
+	if (this.storeSelection)
+		inst.selectionBookmark = inst.selection.getBookmark(true);
+
+	// Setup dir
+	if (tinyMCELang['lang_dir'])
+		document.dir = tinyMCELang['lang_dir'];
+
+	// Setup title
+	var re = new RegExp('{|\\\$|}', 'g');
+	var title = document.title.replace(re, "");
+	if (typeof tinyMCELang[title] != "undefined") {
+		var divElm = document.createElement("div");
+		divElm.innerHTML = tinyMCELang[title];
+		document.title = divElm.innerHTML;
+
+		if (tinyMCE.setWindowTitle != null)
+			tinyMCE.setWindowTitle(window, divElm.innerHTML);
+	}
+
+	// Output Popup CSS class
+	document.write('<link href="' + tinyMCE.getParam("popups_css") + '" rel="stylesheet" type="text/css">');
+
+	tinyMCE.addEvent(window, "load", this.onLoad);
+};
+
+
+TinyMCE_Popup.prototype.onLoad = function() {
+	var dir, i, elms, body = document.body;
+
+	if (tinyMCE.getWindowArg('mce_replacevariables', true))
+		body.innerHTML = tinyMCE.applyTemplate(body.innerHTML, tinyMCE.windowArgs);
+
+	dir = tinyMCE.selectedInstance.settings['directionality'];
+	if (dir == "rtl" && document.forms && document.forms.length > 0) {
+		elms = document.forms[0].elements;
+		for (i=0; i<elms.length; i++) {
+			if ((elms[i].type == "text" || elms[i].type == "textarea") && elms[i].getAttribute("dir") != "ltr")
+				elms[i].dir = dir;
+		}
+	}
+
+	if (body.style.display == 'none')
+		body.style.display = 'block';
+
+	// Execute real onload (Opera fix)
+	if (tinyMCEPopup.onLoadEval != "")
+		eval(tinyMCEPopup.onLoadEval);
+};
+
+
+TinyMCE_Popup.prototype.executeOnLoad = function(str) {
+	if (tinyMCE.isOpera)
+		this.onLoadEval = str;
+	else
+		eval(str);
+};
+
+
+TinyMCE_Popup.prototype.resizeToInnerSize = function() {
+	// Netscape 7.1 workaround
+	if (this.isWindow && tinyMCE.isNS71) {
+		window.resizeBy(0, 10);
+		return;
+	}
+
+	if (this.isWindow) {
+		var doc = document;
+		var body = doc.body;
+		var oldMargin, wrapper, iframe, nodes, dx, dy;
+
+		if (body.style.display == 'none')
+			body.style.display = 'block';
+
+		// Remove margin
+		oldMargin = body.style.margin;
+		body.style.margin = '0';
+
+		// Create wrapper
+		wrapper = doc.createElement("div");
+		wrapper.id = 'mcBodyWrapper';
+		wrapper.style.display = 'none';
+		wrapper.style.margin = '0';
+
+		// Wrap body elements
+		nodes = doc.body.childNodes;
+		for (var i=nodes.length-1; i>=0; i--) {
+			if (wrapper.hasChildNodes())
+				wrapper.insertBefore(nodes[i].cloneNode(true), wrapper.firstChild);
+			else
+				wrapper.appendChild(nodes[i].cloneNode(true));
+
+			nodes[i].parentNode.removeChild(nodes[i]);
+		}
+
+		// Add wrapper
+		doc.body.appendChild(wrapper);
+
+		// Create iframe
+		iframe = document.createElement("iframe");
+		iframe.id = "mcWinIframe";
+		iframe.src = document.location.href.toLowerCase().indexOf('https') == -1 ? "about:blank" : tinyMCE.settings['default_document'];
+		iframe.width = "100%";
+		iframe.height = "100%";
+		iframe.style.margin = '0';
+
+		// Add iframe
+		doc.body.appendChild(iframe);
+
+		// Measure iframe
+		iframe = document.getElementById('mcWinIframe');
+		dx = tinyMCE.getWindowArg('mce_width') - iframe.clientWidth;
+		dy = tinyMCE.getWindowArg('mce_height') - iframe.clientHeight;
+
+		// Resize window
+		// tinyMCE.debug(tinyMCE.getWindowArg('mce_width') + "," + tinyMCE.getWindowArg('mce_height') + " - " + dx + "," + dy);
+		window.resizeBy(dx, dy);
+
+		// Hide iframe and show wrapper
+		body.style.margin = oldMargin;
+		iframe.style.display = 'none';
+		wrapper.style.display = 'block';
+	}
+};
+
+
+TinyMCE_Popup.prototype.resizeToContent = function() {
+	var isMSIE = (navigator.appName == "Microsoft Internet Explorer");
+	var isOpera = (navigator.userAgent.indexOf("Opera") != -1);
+
+	if (isOpera)
+		return;
+
+	if (isMSIE) {
+		try { window.resizeTo(10, 10); } catch (e) {}
+
+		var elm = document.body;
+		var width = elm.offsetWidth;
+		var height = elm.offsetHeight;
+		var dx = (elm.scrollWidth - width) + 4;
+		var dy = elm.scrollHeight - height;
+
+		try { window.resizeBy(dx, dy); } catch (e) {}
+	} else {
+		window.scrollBy(1000, 1000);
+		if (window.scrollX > 0 || window.scrollY > 0) {
+			window.resizeBy(window.innerWidth * 2, window.innerHeight * 2);
+			window.sizeToContent();
+			window.scrollTo(0, 0);
+			var x = parseInt(screen.width / 2.0) - (window.outerWidth / 2.0);
+			var y = parseInt(screen.height / 2.0) - (window.outerHeight / 2.0);
+			window.moveTo(x, y);
+		}
+	}
+};
+
+
+TinyMCE_Popup.prototype.getWindowArg = function(name, default_value) {
+	return tinyMCE.getWindowArg(name, default_value);
+};
+
+
+TinyMCE_Popup.prototype.restoreSelection = function() {
+	if (this.storeSelection) {
+		var inst = tinyMCE.selectedInstance;
+
+		inst.getWin().focus();
+
+		if (inst.selectionBookmark)
+			inst.selection.moveToBookmark(inst.selectionBookmark);
+	}
+};
+
+
+TinyMCE_Popup.prototype.execCommand = function(command, user_interface, value) {
+	var inst = tinyMCE.selectedInstance;
+
+	this.restoreSelection();
+	inst.execCommand(command, user_interface, value);
+
+	// Store selection
+	if (this.storeSelection)
+		inst.selectionBookmark = inst.selection.getBookmark(true);
+};
+
+
+TinyMCE_Popup.prototype.close = function() {
+	tinyMCE.closeWindow(window);
+};
+
+
+TinyMCE_Popup.prototype.pickColor = function(e, element_id) {
+	tinyMCE.selectedInstance.execCommand('mceColorPicker', true, {
+		element_id : element_id,
+		document : document,
+		window : window,
+		store_selection : false
+	});
+};
+
+
+TinyMCE_Popup.prototype.openBrowser = function(element_id, type, option) {
+	var cb = tinyMCE.getParam(option, tinyMCE.getParam("file_browser_callback"));
+	var url = document.getElementById(element_id).value;
+
+	tinyMCE.setWindowArg("window", window);
+	tinyMCE.setWindowArg("document", document);
+
+	// Call to external callback
+	if (eval('typeof(tinyMCEPopup.windowOpener.' + cb + ')') == "undefined")
+		alert("Callback function: " + cb + " could not be found.");
+	else
+		eval("tinyMCEPopup.windowOpener." + cb + "(element_id, url, type, window);");
+};
+
+
+TinyMCE_Popup.prototype.importClass = function(c) {
+	window[c] = function() {};
+
+	for (var n in window.opener[c].prototype)
+		window[c].prototype[n] = window.opener[c].prototype[n];
+
+	window[c].constructor = window.opener[c].constructor;
+};
+
+// Setup global instance
+var tinyMCEPopup = new TinyMCE_Popup();
+
+tinyMCEPopup.init();

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/editable_selects.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/editable_selects.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/editable_selects.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,63 @@
+/**
+ * $RCSfile: editable_selects.js,v $
+ * $Revision: 1.1 $
+ * $Date: 2006/04/10 09:30:19 $
+ *
+ * Makes select boxes editable.
+ *
+ * @author Moxiecode
+ * @copyright Copyright ? 2004-2006, Moxiecode Systems AB, All rights reserved.
+ */
+
+var TinyMCE_EditableSelects = {
+	editSelectElm : null,
+
+	init : function() {
+		var nl = document.getElementsByTagName("select"), i, d = document, o;
+
+		for (i=0; i<nl.length; i++) {
+			if (nl[i].className.indexOf('mceEditableSelect') != -1) {
+				o = new Option('(value)', '__mce_add_custom__');
+
+				o.className = 'mceAddSelectValue';
+
+				nl[i].options[nl[i].options.length] = o;
+				nl[i].setAttribute('onchange', 'TinyMCE_EditableSelects.onChangeEditableSelect(this);');
+			}
+		}
+	},
+
+	onChangeEditableSelect : function(se) {
+		var d = document, ne;
+
+		if (se.options[se.selectedIndex].value == '__mce_add_custom__') {
+			ne = d.createElement("input");
+			ne.id = se.id + "_custom";
+			ne.name = se.name + "_custom";
+			ne.type = "text";
+
+			ne.style.width = se.clientWidth;
+			se.parentNode.insertBefore(ne, se);
+			se.style.display = 'none';
+			ne.focus();
+			ne.onblur = TinyMCE_EditableSelects.onBlurEditableSelectInput;
+			TinyMCE_EditableSelects.editSelectElm = se;
+		}
+	},
+
+	onBlurEditableSelectInput : function() {
+		var se = TinyMCE_EditableSelects.editSelectElm;
+
+		if (se) {
+			if (se.previousSibling.value != '') {
+				addSelectValue(document.forms[0], se.id, se.previousSibling.value, se.previousSibling.value);
+				selectByValue(document.forms[0], se.id, se.previousSibling.value);
+			} else
+				selectByValue(document.forms[0], se.id, '');
+
+			se.style.display = 'inline';
+			se.parentNode.removeChild(se.previousSibling);
+			TinyMCE_EditableSelects.editSelectElm = null;
+		}
+	}
+};

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/form_utils.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/form_utils.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/form_utils.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,210 @@
+/**
+ * $RCSfile: form_utils.js,v $
+ * $Revision: 1.11 $
+ * $Date: 2006/04/07 15:53:12 $
+ *
+ * Various form utilitiy functions.
+ *
+ * @author Moxiecode
+ * @copyright Copyright ? 2004-2006, Moxiecode Systems AB, All rights reserved.
+ */
+
+function getColorPickerHTML(id, target_form_element) {
+	var html = "";
+
+	html += '<a id="' + id + '_link" href="javascript:void(0);" onkeydown="pickColor(event,\'' + target_form_element +'\');" onmousedown="pickColor(event,\'' + target_form_element +'\');return false;">';
+	html += '<img id="' + id + '" src="../../themes/' + tinyMCE.getParam("theme") + '/images/color.gif"';
+	html += ' onmouseover="this.className=\'mceButtonOver\'"';
+	html += ' onmouseout="this.className=\'mceButtonNormal\'"';
+	html += ' onmousedown="this.className=\'mceButtonDown\'"';
+	html += ' width="20" height="16" border="0" title="' + tinyMCE.getLang('lang_browse') + '"';
+	html += ' class="mceButtonNormal" alt="' + tinyMCE.getLang('lang_browse') + '" /></a>';
+
+	return html;
+}
+
+function pickColor(e, target_form_element) {
+	if ((e.keyCode == 32 || e.keyCode == 13) || e.type == "mousedown")
+		tinyMCEPopup.pickColor(e, target_form_element);
+}
+
+function updateColor(img_id, form_element_id) {
+	document.getElementById(img_id).style.backgroundColor = document.forms[0].elements[form_element_id].value;
+}
+
+function setBrowserDisabled(id, state) {
+	var img = document.getElementById(id);
+	var lnk = document.getElementById(id + "_link");
+
+	if (lnk) {
+		if (state) {
+			lnk.setAttribute("realhref", lnk.getAttribute("href"));
+			lnk.removeAttribute("href");
+			tinyMCE.switchClass(img, 'mceButtonDisabled', true);
+		} else {
+			lnk.setAttribute("href", lnk.getAttribute("realhref"));
+			tinyMCE.switchClass(img, 'mceButtonNormal', false);
+		}
+	}
+}
+
+function getBrowserHTML(id, target_form_element, type, prefix) {
+	var option = prefix + "_" + type + "_browser_callback";
+	var cb = tinyMCE.getParam(option, tinyMCE.getParam("file_browser_callback"));
+	if (cb == null)
+		return "";
+
+	var html = "";
+
+	html += '<a id="' + id + '_link" href="javascript:openBrower(\'' + id + '\',\'' + target_form_element + '\', \'' + type + '\',\'' + option + '\');" onmousedown="return false;">';
+	html += '<img id="' + id + '" src="../../themes/' + tinyMCE.getParam("theme") + '/images/browse.gif"';
+	html += ' onmouseover="this.className=\'mceButtonOver\';"';
+	html += ' onmouseout="this.className=\'mceButtonNormal\';"';
+	html += ' onmousedown="this.className=\'mceButtonDown\';"';
+	html += ' width="20" height="18" border="0" title="' + tinyMCE.getLang('lang_browse') + '"';
+	html += ' class="mceButtonNormal" alt="' + tinyMCE.getLang('lang_browse') + '" /></a>';
+
+	return html;
+}
+
+function openBrower(img_id, target_form_element, type, option) {
+	var img = document.getElementById(img_id);
+
+	if (img.className != "mceButtonDisabled")
+		tinyMCEPopup.openBrowser(target_form_element, type, option);
+}
+
+function selectByValue(form_obj, field_name, value, add_custom, ignore_case) {
+	if (!form_obj || !form_obj.elements[field_name])
+		return;
+
+	var sel = form_obj.elements[field_name];
+
+	var found = false;
+	for (var i=0; i<sel.options.length; i++) {
+		var option = sel.options[i];
+
+		if (option.value == value || (ignore_case && option.value.toLowerCase() == value.toLowerCase())) {
+			option.selected = true;
+			found = true;
+		} else
+			option.selected = false;
+	}
+
+	if (!found && add_custom && value != '') {
+		var option = new Option(value, value);
+		option.selected = true;
+		sel.options[sel.options.length] = option;
+		sel.selectedIndex = sel.options.length - 1;
+	}
+
+	return found;
+}
+
+function getSelectValue(form_obj, field_name) {
+	var elm = form_obj.elements[field_name];
+
+	if (elm == null || elm.options == null)
+		return "";
+
+	return elm.options[elm.selectedIndex].value;
+}
+
+function addSelectValue(form_obj, field_name, name, value) {
+	var s = form_obj.elements[field_name];
+	var o = new Option(name, value);
+	s.options[s.options.length] = o;
+}
+
+function addClassesToList(list_id, specific_option) {
+	// Setup class droplist
+	var styleSelectElm = document.getElementById(list_id);
+	var styles = tinyMCE.getParam('theme_advanced_styles', false);
+	styles = tinyMCE.getParam(specific_option, styles);
+
+	if (styles) {
+		var stylesAr = styles.split(';');
+
+		for (var i=0; i<stylesAr.length; i++) {
+			if (stylesAr != "") {
+				var key, value;
+
+				key = stylesAr[i].split('=')[0];
+				value = stylesAr[i].split('=')[1];
+
+				styleSelectElm.options[styleSelectElm.length] = new Option(key, value);
+			}
+		}
+	} else {
+		// Use auto impored classes
+		var csses = tinyMCE.getCSSClasses(tinyMCE.getWindowArg('editor_id'));
+		for (var i=0; i<csses.length; i++)
+			styleSelectElm.options[styleSelectElm.length] = new Option(csses[i], csses[i]);
+	}
+}
+
+function isVisible(element_id) {
+	var elm = document.getElementById(element_id);
+
+	return elm && elm.style.display != "none";
+}
+
+function convertRGBToHex(col) {
+	var re = new RegExp("rgb\\s*\\(\\s*([0-9]+).*,\\s*([0-9]+).*,\\s*([0-9]+).*\\)", "gi");
+
+	var rgb = col.replace(re, "$1,$2,$3").split(',');
+	if (rgb.length == 3) {
+		r = parseInt(rgb[0]).toString(16);
+		g = parseInt(rgb[1]).toString(16);
+		b = parseInt(rgb[2]).toString(16);
+
+		r = r.length == 1 ? '0' + r : r;
+		g = g.length == 1 ? '0' + g : g;
+		b = b.length == 1 ? '0' + b : b;
+
+		return "#" + r + g + b;
+	}
+
+	return col;
+}
+
+function convertHexToRGB(col) {
+	if (col.indexOf('#') != -1) {
+		col = col.replace(new RegExp('[^0-9A-F]', 'gi'), '');
+
+		r = parseInt(col.substring(0, 2), 16);
+		g = parseInt(col.substring(2, 4), 16);
+		b = parseInt(col.substring(4, 6), 16);
+
+		return "rgb(" + r + "," + g + "," + b + ")";
+	}
+
+	return col;
+}
+
+function trimSize(size) {
+	return size.replace(new RegExp('[^0-9%]', 'gi'), '');
+}
+
+function getCSSSize(size) {
+	size = trimSize(size);
+
+	if (size == "")
+		return "";
+
+	return size.indexOf('%') != -1 ? size : size + "px";
+}
+
+function getStyle(elm, attrib, style) {
+	var val = tinyMCE.getAttrib(elm, attrib);
+
+	if (val != '')
+		return '' + val;
+
+	if (typeof(style) == 'undefined')
+		style = attrib;
+
+	val = eval('elm.style.' + style);
+
+	return val == null ? '' : '' + val;
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/mclayer.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/mclayer.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/mclayer.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,212 @@
+/**
+ * $RCSfile: mclayer.js,v $
+ * $Revision: 1.2 $
+ * $Date: 2006/02/06 20:11:09 $
+ *
+ * Moxiecode floating layer script.
+ *
+ * @author Moxiecode
+ * @copyright Copyright ? 2004-2006, Moxiecode Systems AB, All rights reserved.
+ */
+
+function MCLayer(id) {
+	this.id = id;
+	this.settings = new Array();
+	this.blockerElement = null;
+	this.isMSIE = navigator.appName == "Microsoft Internet Explorer";
+	this.events = false;
+	this.autoHideCallback = null;
+}
+
+MCLayer.prototype = {
+	moveRelativeTo : function(re, p, a) {
+		var rep = this.getAbsPosition(re);
+		var w = parseInt(re.offsetWidth);
+		var h = parseInt(re.offsetHeight);
+		var x, y;
+
+		switch (p) {
+			case "tl":
+				break;
+
+			case "tr":
+				x = rep.absLeft + w;
+				y = rep.absTop;
+				break;
+
+			case "bl":
+				break;
+
+			case "br":
+				break;
+		}
+
+		this.moveTo(x, y);
+	},
+
+	moveBy : function(dx, dy) {
+		var e = this.getElement();
+		var x = parseInt(e.style.left);
+		var y = parseInt(e.style.top);
+
+		e.style.left = (x + dx) + "px";
+		e.style.top = (y + dy) + "px";
+
+		this.updateBlocker();
+	},
+
+	moveTo : function(x, y) {
+		var e = this.getElement();
+
+		e.style.left = x + "px";
+		e.style.top = y + "px";
+
+		this.updateBlocker();
+	},
+
+	show : function() {
+		MCLayer.visibleLayer = this;
+
+		this.getElement().style.display = 'block';
+		this.updateBlocker();
+	},
+
+	hide : function() {
+		this.getElement().style.display = 'none';
+		this.updateBlocker();
+	},
+
+	setAutoHide : function(s, cb) {
+		this.autoHideCallback = cb;
+		this.registerEventHandlers();
+	},
+
+	getElement : function() {
+		return document.getElementById(this.id);
+	},
+
+	updateBlocker : function() {
+		if (!this.isMSIE)
+			return;
+
+		var e = this.getElement();
+		var b = this.getBlocker();
+		var x = this.parseInt(e.style.left);
+		var y = this.parseInt(e.style.top);
+		var w = this.parseInt(e.offsetWidth);
+		var h = this.parseInt(e.offsetHeight);
+
+		b.style.left = x + 'px';
+		b.style.top = y + 'px';
+		b.style.width = w + 'px';
+		b.style.height = h + 'px';
+		b.style.display = e.style.display;
+	},
+
+	getBlocker : function() {
+		if (!this.blockerElement) {
+			var d = document, b = d.createElement("iframe");
+
+			b.style.cssText = 'display: none; left: 0px; position: absolute; top: 0';
+			b.src = 'javascript:false;';
+			b.frameBorder = '0';
+			b.scrolling = 'no';
+
+			d.body.appendChild(b);
+			this.blockerElement = b;
+		}
+
+		return this.blockerElement;
+	},
+
+	getAbsPosition : function(n) {
+		var p = {absLeft : 0, absTop : 0};
+
+		while (n) {
+			p.absLeft += n.offsetLeft;
+			p.absTop += n.offsetTop;
+			n = n.offsetParent;
+		}
+
+		return p;
+	},
+
+	registerEventHandlers : function() {
+		if (!this.events) {
+			var d = document;
+
+			this.addEvent(d, 'mousedown', MCLayer.prototype.onMouseDown);
+
+			this.events = true;
+		}
+	},
+
+	addEvent : function(o, n, h) {
+		if (o.attachEvent)
+			o.attachEvent("on" + n, h);
+		else
+			o.addEventListener(n, h, false);
+	},
+
+	onMouseDown : function(e) {
+		e = typeof(e) == "undefined" ? window.event : e;
+		var b = document.body;
+		var l = MCLayer.visibleLayer;
+
+		if (l) {
+			var mx = l.isMSIE ? e.clientX + b.scrollLeft : e.pageX;
+			var my = l.isMSIE ? e.clientY + b.scrollTop : e.pageY;
+			var el = l.getElement();
+			var x = parseInt(el.style.left);
+			var y = parseInt(el.style.top);
+			var w = parseInt(el.offsetWidth);
+			var h = parseInt(el.offsetHeight);
+
+			if (!(mx > x && mx < x + w && my > y && my < y + h)) {
+				MCLayer.visibleLayer = null;
+
+				if (l.autoHideCallback && l.autoHideCallback(l, e, mx, my))
+					return true;
+
+				l.hide();
+			}
+		}
+	},
+
+	addCSSClass : function(e, c) {
+		this.removeCSSClass(e, c);
+		var a = this.explode(' ', e.className);
+		a[a.length] = c;
+		e.className = a.join(' ');
+	},
+
+	removeCSSClass : function(e, c) {
+		var a = this.explode(' ', e.className), i;
+
+		for (i=0; i<a.length; i++) {
+			if (a[i] == c)
+				a[i] = '';
+		}
+
+		e.className = a.join(' ');
+	},
+
+	explode : function(d, s) {
+		var ar = s.split(d);
+		var oar = new Array();
+
+		for (var i = 0; i<ar.length; i++) {
+			if (ar[i] != "")
+				oar[oar.length] = ar[i];
+		}
+
+		return oar;
+	},
+
+	parseInt : function(s) {
+		if (s == null || s == '')
+			return 0;
+
+		return parseInt(s);
+	}
+}
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/mctabs.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/mctabs.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/mctabs.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,76 @@
+/**
+ * $RCSfile: mctabs.js,v $
+ * $Revision: 1.2 $
+ * $Date: 2006/02/06 20:11:09 $
+ *
+ * Moxiecode DHTML Tabs script.
+ *
+ * @author Moxiecode
+ * @copyright Copyright ? 2004-2006, Moxiecode Systems AB, All rights reserved.
+ */
+
+function MCTabs() {
+	this.settings = new Array();
+};
+
+MCTabs.prototype.init = function(settings) {
+	this.settings = settings;
+};
+
+MCTabs.prototype.getParam = function(name, default_value) {
+	var value = null;
+
+	value = (typeof(this.settings[name]) == "undefined") ? default_value : this.settings[name];
+
+	// Fix bool values
+	if (value == "true" || value == "false")
+		return (value == "true");
+
+	return value;
+};
+
+MCTabs.prototype.displayTab = function(tab_id, panel_id) {
+	var panelElm = document.getElementById(panel_id);
+	var panelContainerElm = panelElm ? panelElm.parentNode : null;
+	var tabElm = document.getElementById(tab_id);
+	var tabContainerElm = tabElm ? tabElm.parentNode : null;
+	var selectionClass = this.getParam('selection_class', 'current');
+
+	if (tabElm && tabContainerElm) {
+		var nodes = tabContainerElm.childNodes;
+
+		// Hide all other tabs
+		for (var i=0; i<nodes.length; i++) {
+			if (nodes[i].nodeName == "LI")
+				nodes[i].className = '';
+		}
+
+		// Show selected tab
+		tabElm.className = 'current';
+	}
+
+	if (panelElm && panelContainerElm) {
+		var nodes = panelContainerElm.childNodes;
+
+		// Hide all other panels
+		for (var i=0; i<nodes.length; i++) {
+			if (nodes[i].nodeName == "DIV")
+				nodes[i].className = 'panel';
+		}
+
+		// Show selected panel
+		panelElm.className = 'current';
+	}
+};
+
+MCTabs.prototype.getAnchor = function() {
+	var pos, url = document.location.href;
+
+	if ((pos = url.lastIndexOf('#')) != -1)
+		return url.substring(pos + 1);
+
+	return "";
+};
+
+// Global instance
+var mcTabs = new MCTabs();

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/validate.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/validate.js	2006-07-03 11:23:42 UTC (rev 1953)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/utils/validate.js	2006-07-06 17:39:30 UTC (rev 1954)
@@ -0,0 +1,50 @@
+/**
+ * $RCSfile: validate.js,v $
+ * $Revision: 1.3 $
+ * $Date: 2006/02/06 20:11:09 $
+ *
+ * Various form validation methods.
+ *
+ * @author Moxiecode
+ * @copyright Copyright ? 2004-2006, Moxiecode Systems AB, All rights reserved.
+ */
+
+function testRegExp(form_name, element_name, re) {
+	return new RegExp(re).test(document.forms[form_name].elements[element_name].value);
+}
+
+function validateString(form_name, element_name) {
+	return (document.forms[form_name].elements[element_name].value.length > 0);
+}
+
+function validateSelection(form_name, element_name) {
+	return (document.forms[form_name].elements[element_name].selectedIndex > 0);
+}
+
+function validateCheckBox(form_name, element_name) {
+	return document.forms[form_name].elements[element_name].checked;
+}
+
+function validateCleanString(form_name, element_name) {
+	return testRegExp(form_name, element_name, '^[A-Za-z0-9_]+$');
+}
+
+function validateEmail(form_name, element_name) {
+	return testRegExp(form_name, element_name, '^[-!#$%&\'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&\'*+\\/0-9=?A-Z^_`a-z{|}~]+\.[-!#$%&\'*+\\./0-9=?A-Z^_`a-z{|}~]+$');
+}
+
+function validateAbsUrl(form_name, element_name) {
+	return testRegExp(form_name, element_name, '^(news|telnet|nttp|file|http|ftp|https)://[-A-Za-z0-9\\.]+$');
+}
+
+function validateNumber(form_name, element_name, allow_blank) {
+	return (!allow_blank && value == '') ? false : testRegExp(form_name, element_name, '^-?[0-9]*\\.?[0-9]*$');
+}
+
+function validateSize(form_name, element_name,) {
+	return testRegExp(form_name, element_name, '^[0-9]+(px|%)?$');
+}
+
+function validateID(form_name, element_name,) {
+	return testRegExp(form_name, element_name, '^[A-Za-z_]([A-Za-z0-9_])*$');
+}



From pclaerhout at berlios.de  Thu Jul  6 20:06:27 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Thu, 6 Jul 2006 20:06:27 +0200
Subject: [ydf-devel] r1955 - in YDFramework2.0/trunk/examples/weblog: include include/languages manage
Message-ID: <200607061806.k66I6Rnw005823@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-06 20:06:23 +0200 (Thu, 06 Jul 2006)
New Revision: 1955

Modified:
   YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php
   YDFramework2.0/trunk/examples/weblog/include/languages/language_en.php
   YDFramework2.0/trunk/examples/weblog/include/languages/language_nl.php
   YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl
   YDFramework2.0/trunk/examples/weblog/manage/config.php
   YDFramework2.0/trunk/examples/weblog/manage/config.tpl
   YDFramework2.0/trunk/examples/weblog/manage/index.php
   YDFramework2.0/trunk/examples/weblog/manage/index.tpl
   YDFramework2.0/trunk/examples/weblog/manage/manage.css
Log:
Added support for disabling the internal statistics.

Modified: YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php	2006-07-06 17:39:30 UTC (rev 1954)
+++ YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php	2006-07-06 18:06:23 UTC (rev 1955)
@@ -229,38 +229,43 @@
         // Function to disbable request logging
         function _logRequest() {
 
-            // Get the logging data
-            $values = array();
-            $values['uri'] = str_replace( dirname( YD_SELF_SCRIPT ) . '/', '', $this->getNormalizedUri() );
-            if ( substr( $values['uri'], 0, 1 ) == '/' ) {
-                $values['uri'] = substr( $values['uri'], 1 );
-            }
-            if ( substr( $values['uri'], 0, 4 ) == '.php' ) {
-                $values['uri'] = basename( YD_SELF_SCRIPT ) . substr( $values['uri'], 4 );
-            }
-            $values['date'] = strftime( '%Y-%m-%d' );
-            $values['browser'] = $this->browser->browser;
-            $values['platform'] = $this->browser->platform;
+            // Check if we need to log statistics or not
+            if ( YDConfig::get( 'keep_stats', true ) ) {
 
-            // Fix the short URLs so that they all look the same
-            if ( YDConfig::get( 'friendly_urls', true ) && strpos( $values['uri'], '_' ) ) {
-                if ( YDStringUtil::startswith( $values['uri'], 'image/', false ) ) {
-                    $values['uri'] = 'item_gallery.php?id=' . substr( $values['uri'], 6 );
-                } elseif ( YDStringUtil::startswith( $values['uri'], 'archive' ) ) {
-                } else {
-                    $values['uri'] = substr( $values['uri'], 0, strpos( $values['uri'], '_' ) )
-                                   . substr( $values['uri'], strpos( $values['uri'], '.php?id=' ) );
+                // Get the logging data
+                $values = array();
+                $values['uri'] = str_replace( dirname( YD_SELF_SCRIPT ) . '/', '', $this->getNormalizedUri() );
+                if ( substr( $values['uri'], 0, 1 ) == '/' ) {
+                    $values['uri'] = substr( $values['uri'], 1 );
                 }
-            }
+                if ( substr( $values['uri'], 0, 4 ) == '.php' ) {
+                    $values['uri'] = basename( YD_SELF_SCRIPT ) . substr( $values['uri'], 4 );
+                }
+                $values['date'] = strftime( '%Y-%m-%d' );
+                $values['browser'] = $this->browser->browser;
+                $values['platform'] = $this->browser->platform;
 
-            // Add index.php
-            if ( empty( $values['uri'] ) && basename( YD_SELF_SCRIPT ) == 'index.php' ) {
-                $values['uri'] = 'index.php';
+                // Fix the short URLs so that they all look the same
+                if ( YDConfig::get( 'friendly_urls', true ) && strpos( $values['uri'], '_' ) ) {
+                    if ( YDStringUtil::startswith( $values['uri'], 'image/', false ) ) {
+                        $values['uri'] = 'item_gallery.php?id=' . substr( $values['uri'], 6 );
+                    } elseif ( YDStringUtil::startswith( $values['uri'], 'archive' ) ) {
+                    } else {
+                        $values['uri'] = substr( $values['uri'], 0, strpos( $values['uri'], '_' ) )
+                                       . substr( $values['uri'], strpos( $values['uri'], '.php?id=' ) );
+                    }
+                }
+
+                // Add index.php
+                if ( empty( $values['uri'] ) && basename( YD_SELF_SCRIPT ) == 'index.php' ) {
+                    $values['uri'] = 'index.php';
+                }
+
+                // Add them to the database
+                $this->weblog->logRequestToStats( $values );
+
             }
 
-            // Add them to the database
-            $this->weblog->logRequestToStats( $values );
-
         }
 
         // Check for authentication
@@ -335,6 +340,7 @@
             $this->tpl->assign( 'weblog_description', YDConfig::get( 'weblog_description', 'Untitled Weblog Description' ) );
             $this->tpl->assign( 'weblog_language',    YDConfig::get( 'weblog_language', 'en' ) );
             $this->tpl->assign( 'google_analytics',   YDConfig::get( 'google_analytics', '' ) != '' );
+            $this->tpl->assign( 'keep_stats',         YDConfig::get( 'keep_stats', true ) );
 
             // Get the link to the different directories
             $uploads_dir = YDUrl::makeLinkAbsolute( '../' . $this->dir_uploads );

Modified: YDFramework2.0/trunk/examples/weblog/include/languages/language_en.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/languages/language_en.php	2006-07-06 17:39:30 UTC (rev 1954)
+++ YDFramework2.0/trunk/examples/weblog/include/languages/language_en.php	2006-07-06 18:06:23 UTC (rev 1955)
@@ -286,6 +286,7 @@
 $GLOBALS['t']['cfg_default_item_settings'] = 'Default values for new items';
 $GLOBALS['t']['cfg_weblog_google_analytics'] = 'Google Analytics Account';
 $GLOBALS['t']['cfg_google_analytics'] = 'Google Analytics';
+$GLOBALS['t']['cfg_keep_stats'] = 'Track statistics';
 
 // manage/item.tpl
 $GLOBALS['t']['item_title'] = 'Item Title';

Modified: YDFramework2.0/trunk/examples/weblog/include/languages/language_nl.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/languages/language_nl.php	2006-07-06 17:39:30 UTC (rev 1954)
+++ YDFramework2.0/trunk/examples/weblog/include/languages/language_nl.php	2006-07-06 18:06:23 UTC (rev 1955)
@@ -286,6 +286,7 @@
 $GLOBALS['t']['cfg_default_item_settings'] = 'Standaard waardes voor nieuwe posts';
 $GLOBALS['t']['cfg_weblog_google_analytics'] = 'Google Analytics Account';
 $GLOBALS['t']['cfg_google_analytics'] = 'Google Analytics';
+$GLOBALS['t']['cfg_keep_stats'] = 'Houdt statistieken bij';
 
 // manage/item.tpl
 $GLOBALS['t']['item_title'] = 'Item Titel';

Modified: YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl	2006-07-06 17:39:30 UTC (rev 1954)
+++ YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl	2006-07-06 18:06:23 UTC (rev 1955)
@@ -121,17 +121,21 @@
                         &raquo; <a href="serverinfo.php">{t w="a_server_info"}</a><br/>
                     </td>
                 </tr>
+                {if $keep_stats or $google_analytics}
+                    <tr>
+                        <td class="adminRowL">
+                            <b>{t w="h_statistics"}</b><br/>
+                            {if $keep_stats}
+                                &raquo; <a href="stats.php">{t w="a_statistics"}</a><br/>
+                            {/if}
+                            {if $google_analytics}
+                                &raquo; <a href="https://www.google.com/analytics/home/" target="_blank">{t w="cfg_google_analytics"}</a><br/>
+                            {/if}
+                        </td>
+                    </tr>
+                {/if}
                 <tr>
                     <td class="adminRowL">
-                        <b>{t w="h_statistics"}</b><br/>
-                        &raquo; <a href="stats.php">{t w="a_statistics"}</a><br/>
-                        {if $google_analytics}
-                            &raquo; <a href="https://www.google.com/analytics/home/" target="_blank">{t w="cfg_google_analytics"}</a><br/>
-                        {/if}
-                    </td>
-                </tr>
-                <tr>
-                    <td class="adminRowL">
                         <b>{t w="h_logoff"}</b><br/>
                         &raquo; <a href="index.php?do=logout">{t w="a_logoff"}</a><br/>
                     </td>

Modified: YDFramework2.0/trunk/examples/weblog/manage/config.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/config.php	2006-07-06 17:39:30 UTC (rev 1954)
+++ YDFramework2.0/trunk/examples/weblog/manage/config.php	2006-07-06 18:06:23 UTC (rev 1955)
@@ -26,6 +26,7 @@
             // Fix the boolean values
             $config['email_new_comment']   = ( $config['email_new_comment'] ) ? t('yes') : t('no');
             $config['email_new_item']      = ( $config['email_new_item'] ) ? t('yes') : t('no');
+            $config['keep_stats']          = ( $config['keep_stats'] ) ? t('yes') : t('no');
             $config['use_cache']           = ( $config['use_cache'] ) ? t('yes') : t('no');
             $config['friendly_urls']       = ( $config['friendly_urls'] ) ? t('yes') : t('no');
             $config['include_debug_info']  = ( $config['include_debug_info'] ) ? t('yes') : t('no');
@@ -80,6 +81,7 @@
             $form->addElement( 'select', 'weblog_skin', t( 'cfg_weblog_skin' ), array( 'class' => 'tfM', 'style' => 'width: 100%' ), $skins );
             $form->addElement( 'select', 'weblog_language', t( 'cfg_weblog_language' ), array( 'class' => 'tfM', 'style' => 'width: 100%' ), $languages );
             $form->addElement( 'checkbox', 'include_debug_info', t( 'cfg_include_debug_info' ), array( 'style' => 'border: none;' ) );
+            $form->addElement( 'checkbox', 'keep_stats', t( 'cfg_keep_stats' ), array( 'style' => 'border: none;' ) );
             $form->addElement( 'text', 'google_analytics', t( 'cfg_weblog_google_analytics' ), array( 'class' => 'tfM' ) );
 
             $form->addElement( 'checkbox', 'email_new_comment', t( 'cfg_notification_email_comment' ),  array( 'style' => 'border: none;' ) );
@@ -155,6 +157,7 @@
             $config['weblog_entries_fp']    = YDConfig::get( 'weblog_entries_fp',    1 );
             $config['weblog_skin']          = YDConfig::get( 'weblog_skin',          'default' );
             $config['weblog_language']      = YDConfig::get( 'weblog_language',      'nl' );
+            $config['keep_stats']           = YDConfig::get( 'keep_stats',           true );
             $config['google_analytics']     = YDConfig::get( 'google_analytics',     '' );
             $config['include_debug_info']   = YDConfig::get( 'include_debug_info',   false );
             $config['email_new_comment']    = YDConfig::get( 'email_new_comment',    true );

Modified: YDFramework2.0/trunk/examples/weblog/manage/config.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/config.tpl	2006-07-06 17:39:30 UTC (rev 1954)
+++ YDFramework2.0/trunk/examples/weblog/manage/config.tpl	2006-07-06 18:06:23 UTC (rev 1955)
@@ -77,6 +77,10 @@
             <td class="adminRowL">{$config.include_debug_info}</td>
         </tr>
         <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
+            <td class="adminRowL">{t w="cfg_keep_stats"}</td>
+            <td class="adminRowL">{$config.keep_stats}</td>
+        </tr>
+        <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
             <td class="adminRowL">{t w="cfg_weblog_google_analytics"}</td>
             <td class="adminRowL">{$config.google_analytics|default:'&nbsp;'}</td>
         </tr>
@@ -199,6 +203,10 @@
                 <td class="adminRowL">{$form.include_debug_info.html}</td>
             </tr>
             <tr>
+                <td class="adminRowL">{$form.keep_stats.label_html}</td>
+                <td class="adminRowL">{$form.keep_stats.html}</td>
+            </tr>
+            <tr>
                 <td class="adminRowL">{$form.google_analytics.label_html}</td>
                 <td class="adminRowL">{$form.google_analytics.html}</td>
             </tr>

Modified: YDFramework2.0/trunk/examples/weblog/manage/index.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/index.php	2006-07-06 17:39:30 UTC (rev 1954)
+++ YDFramework2.0/trunk/examples/weblog/manage/index.php	2006-07-06 18:06:23 UTC (rev 1955)
@@ -23,22 +23,31 @@
             // Assign it to the template
             $this->tpl->assign( 'items', $items );
 
-            // Get the install date
+            // Get the global statistics
             $installDate   = $this->weblog->getInstallDate();
-            $totalHits     = $this->weblog->getTotalHits();
             $daysOnline    = round( ( time() - $installDate ) / 86400 );
-            $avg_hitsaday  = @ intval( $totalHits / $daysOnline );
             $totalItems    = $this->weblog->getStatsItemCount();
             $totalComments = $this->weblog->getStatsCommentCount();
 
             // Assign these to the template
             $this->tpl->assign( 'installDate',   $installDate );
             $this->tpl->assign( 'daysOnline',    $daysOnline );
-            $this->tpl->assign( 'totalHits',     $totalHits );
-            $this->tpl->assign( 'avg_hitsaday',  $avg_hitsaday );
             $this->tpl->assign( 'totalItems',    $totalItems );
             $this->tpl->assign( 'totalComments', $totalComments );
 
+            // Check if we need to log statistics or not
+            if ( YDConfig::get( 'keep_stats', true ) ) {
+
+                // Get the averages
+                $totalHits     = $this->weblog->getTotalHits();
+                $avg_hitsaday  = @ intval( $totalHits / $daysOnline );
+
+                // Assign these to the template
+                $this->tpl->assign( 'totalHits',     $totalHits );
+                $this->tpl->assign( 'avg_hitsaday',  $avg_hitsaday );
+
+            }
+
             // Display the template
             $this->display();
 

Modified: YDFramework2.0/trunk/examples/weblog/manage/index.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/index.tpl	2006-07-06 17:39:30 UTC (rev 1954)
+++ YDFramework2.0/trunk/examples/weblog/manage/index.tpl	2006-07-06 18:06:23 UTC (rev 1955)
@@ -64,36 +64,38 @@
     </tr>
 </table>
 
-<table width="700" cellspacing="0" cellpadding="0" border="0">
-    <tr><td colspan="3">&nbsp;</td></tr>
-    <tr>
-        <th class="adminRowLG">&raquo; <a href="stats.php"><b>{t w="a_statistics"}</b></a></th>
-        <th class="adminRowLGR"><a href="stats.php"><img src="images/more_details.gif" border="0" /></a></th>
-    </tr>
-    <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
-        <td class="adminRowL" width="300">{t w="installed_since"}</td>
-        <td class="adminRowL" width="400" colspan="2">{$installDate|date:"%d %B %Y"|lower}</td>
-    </tr>
-    <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
-        <td class="adminRowL">{t w="num_days_online"}</td>
-        <td class="adminRowL" colspan="2">{$daysOnline} {t w="days"}</td>
-    </tr>
-    <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
-        <td class="adminRowL">{t w="totalItems"}</td>
-        <td class="adminRowL" colspan="2">{$totalItems} {t w="items"}</td>
-    </tr>
-    <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
-        <td class="adminRowL">{t w="totalComments"}</td>
-        <td class="adminRowL" colspan="2">{$totalComments} {t w="comments" lower=true}</td>
-    </tr>
-    <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
-        <td class="adminRowL">{t w="total_hits"}</td>
-        <td class="adminRowL" colspan="2">{$totalHits} {t w="hits"}</td>
-    </tr>
-    <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
-        <td class="adminRowL">{t w="avg_hits_per_day"}</td>
-        <td class="adminRowL" colspan="2">{$avg_hitsaday} {t w="hits"}</td>
-    </tr>
-</table>
+    <table width="700" cellspacing="0" cellpadding="0" border="0">
+        <tr><td colspan="3">&nbsp;</td></tr>
+        <tr>
+            <th class="adminRowLG">&raquo; <a href="stats.php"><b>{t w="a_statistics"}</b></a></th>
+            <th class="adminRowLGR"><a href="stats.php"><img src="images/more_details.gif" border="0" /></a></th>
+        </tr>
+        <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
+            <td class="adminRowL" width="300">{t w="installed_since"}</td>
+            <td class="adminRowL" width="400" colspan="2">{$installDate|date:"%d %B %Y"|lower}</td>
+        </tr>
+        <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
+            <td class="adminRowL">{t w="num_days_online"}</td>
+            <td class="adminRowL" colspan="2">{$daysOnline} {t w="days"}</td>
+        </tr>
+        <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
+            <td class="adminRowL">{t w="totalItems"}</td>
+            <td class="adminRowL" colspan="2">{$totalItems} {t w="items"}</td>
+        </tr>
+        <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
+            <td class="adminRowL">{t w="totalComments"}</td>
+            <td class="adminRowL" colspan="2">{$totalComments} {t w="comments" lower=true}</td>
+        </tr>
+        {if $keep_stats}
+            <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
+                <td class="adminRowL">{t w="total_hits"}</td>
+                <td class="adminRowL" colspan="2">{$totalHits} {t w="hits"}</td>
+            </tr>
+            <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
+                <td class="adminRowL">{t w="avg_hits_per_day"}</td>
+                <td class="adminRowL" colspan="2">{$avg_hitsaday} {t w="hits"}</td>
+            </tr>
+        {/if}
+    </table>
 
 {include file="__mng_footer.tpl"}

Modified: YDFramework2.0/trunk/examples/weblog/manage/manage.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/manage.css	2006-07-06 17:39:30 UTC (rev 1954)
+++ YDFramework2.0/trunk/examples/weblog/manage/manage.css	2006-07-06 18:06:23 UTC (rev 1955)
@@ -84,7 +84,7 @@
 
 textarea {
     width: 700px;
-    height: 200px;
+    height: 300px;
     font-family: "Lucida Sans Typewriter", "Andale Mono", "Courier New", "Courier";
     font-size: 9pt;
     line-height: 14pt;



From pclaerhout at berlios.de  Thu Jul  6 20:29:01 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Thu, 6 Jul 2006 20:29:01 +0200
Subject: [ydf-devel] r1956 - in YDFramework2.0/trunk/examples/weblog: . include skins/default
Message-ID: <200607061829.k66IT1LO015555@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-06 20:28:52 +0200 (Thu, 06 Jul 2006)
New Revision: 1956

Modified:
   YDFramework2.0/trunk/examples/weblog/archive.php
   YDFramework2.0/trunk/examples/weblog/archive_gallery.php
   YDFramework2.0/trunk/examples/weblog/category.php
   YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php
   YDFramework2.0/trunk/examples/weblog/item.php
   YDFramework2.0/trunk/examples/weblog/item_gallery.php
   YDFramework2.0/trunk/examples/weblog/page.php
   YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl
Log:
Added support for real titles.

Modified: YDFramework2.0/trunk/examples/weblog/archive.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/archive.php	2006-07-06 18:06:23 UTC (rev 1955)
+++ YDFramework2.0/trunk/examples/weblog/archive.php	2006-07-06 18:28:52 UTC (rev 1956)
@@ -26,6 +26,9 @@
             // Add them to the template
             $this->tpl->assign( 'items', $items );
 
+            // Set the title
+            $this->tpl->assign( 'title', t('archives') );
+
             // Display the template
             $this->display();
 

Modified: YDFramework2.0/trunk/examples/weblog/archive_gallery.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/archive_gallery.php	2006-07-06 18:06:23 UTC (rev 1955)
+++ YDFramework2.0/trunk/examples/weblog/archive_gallery.php	2006-07-06 18:28:52 UTC (rev 1956)
@@ -32,6 +32,9 @@
             // Add them to the template
             $this->tpl->assign( 'items', $items );
 
+            // Set the title
+            $this->tpl->assign( 'title', t('archives_gallery') );
+
             // Display the template
             $this->display();
 

Modified: YDFramework2.0/trunk/examples/weblog/category.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/category.php	2006-07-06 18:06:23 UTC (rev 1955)
+++ YDFramework2.0/trunk/examples/weblog/category.php	2006-07-06 18:28:52 UTC (rev 1956)
@@ -28,6 +28,11 @@
             $this->tpl->assign( 'category', $category );
             $this->tpl->assign( 'items',    $items );
 
+            // Set the title
+            $this->tpl->assign(
+                'title', t('archive_for_the') . '\'' . $category['title'] . '\' ' .  strtolower( t('category') )
+            );
+
             // Display the template
             $this->display();
 

Modified: YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php	2006-07-06 18:06:23 UTC (rev 1955)
+++ YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php	2006-07-06 18:28:52 UTC (rev 1956)
@@ -138,7 +138,15 @@
             $this->tpl->assign( 'links',      $links );
 
             // Assign the weblog details
-            $this->tpl->assign( 'weblog_title',                YDConfig::get( 'weblog_title', 'Untitled Weblog' ) );
+            $title = $this->tpl->get_template_vars( 'title' );
+            $wltitle = YDConfig::get( 'weblog_title', 'Untitled Weblog' );
+            if ( $title != null ) {
+                $title = $wltitle . ' &raquo; ' . $title;
+            } else {
+                $title = $wltitle;
+            }
+            $this->tpl->assign( 'title',                       $title );
+            $this->tpl->assign( 'weblog_title',                $wltitle );
             $this->tpl->assign( 'weblog_description',          YDConfig::get( 'weblog_description', 'Untitled Weblog Description' ) );
             $this->tpl->assign( 'weblog_dir',                  YDUrl::makeLinkAbsolute( '.' ) );
             $this->tpl->assign( 'weblog_current_url',          YDUrl::makeLinkAbsolute( YD_SELF_URI ) );

Modified: YDFramework2.0/trunk/examples/weblog/item.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/item.php	2006-07-06 18:06:23 UTC (rev 1955)
+++ YDFramework2.0/trunk/examples/weblog/item.php	2006-07-06 18:28:52 UTC (rev 1956)
@@ -30,6 +30,9 @@
             $item  = @ $this->weblog->getPublicItemById( $id );
             $this->redirectIfMissing( $item );
 
+            // Set the title
+            $this->tpl->assign( 'title', $item['title'] );
+
             // Get the related items
             $related_items = $this->weblog->getRelatedItemsByItem( YDConfig::get( 'weblog_entries_fp', 5 ), $item );
 

Modified: YDFramework2.0/trunk/examples/weblog/item_gallery.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/item_gallery.php	2006-07-06 18:06:23 UTC (rev 1955)
+++ YDFramework2.0/trunk/examples/weblog/item_gallery.php	2006-07-06 18:28:52 UTC (rev 1956)
@@ -61,6 +61,9 @@
             $this->tpl->assign( 'item',  $item );
             $this->tpl->assign( 'image', $image );
 
+            // Set the title
+            $this->tpl->assign( 'title', $item['title'] . ' &raquo; ' . $image->getBasenameNoExt() );
+
             // Display the template
             $this->display();
 

Modified: YDFramework2.0/trunk/examples/weblog/page.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/page.php	2006-07-06 18:06:23 UTC (rev 1955)
+++ YDFramework2.0/trunk/examples/weblog/page.php	2006-07-06 18:28:52 UTC (rev 1956)
@@ -21,6 +21,9 @@
             $page  = $this->weblog->getPublicPageById( $id );
             $this->redirectIfMissing( $page );
 
+            // Set the title
+            $this->tpl->assign( 'title', $page['title'] );
+
             // Add them to the template
             $this->tpl->assign( 'page', $page );
 

Modified: YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl	2006-07-06 18:06:23 UTC (rev 1955)
+++ YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl	2006-07-06 18:28:52 UTC (rev 1956)
@@ -4,7 +4,7 @@
 
 <head profile="http://gmpg.org/xfn/1">
 
-    <title>{$weblog_title}</title>
+    <title>{$title}</title>
 
     <meta name="generator" content="{$YD_FW_NAMEVERS}" />
 



From pclaerhout at berlios.de  Thu Jul  6 20:31:13 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Thu, 6 Jul 2006 20:31:13 +0200
Subject: [ydf-devel] r1957 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200607061831.k66IVDoi016168@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-06 20:31:11 +0200 (Thu, 06 Jul 2006)
New Revision: 1957

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php
Log:
Fixed a bug in the YDFSDirectory::getContents function.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php	2006-07-06 18:28:52 UTC (rev 1956)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDFileSystem.php	2006-07-06 18:31:11 UTC (rev 1957)
@@ -1385,19 +1385,35 @@
                 $pattern = array( $pattern );
             }
 
-            // Get the files that match
+            // Check if there other patterns than exceptions
+            $hasMoreThanExceptions = false;
             foreach ( $pattern as $patternitem ) {
                 if ( ! empty( $patternitem ) && substr( $patternitem, 0, 1 ) != '!' ) {
-                    foreach ( glob( $this->getAbsolutePath() . '/' . $patternitem ) as $file ) {
-                        $file = basename( $file );
-                        $fileListMatch[ $file ] = $file;
+                    $hasMoreThanExceptions = true;
+                    break;
+                }
+            }
+
+            // Get the files that match
+            if ( $hasMoreThanExceptions == true ) {
+                foreach ( $pattern as $patternitem ) {
+                    if ( ! empty( $patternitem ) && substr( $patternitem, 0, 1 ) != '!' ) {
+                        foreach ( glob( $this->getAbsolutePath() . '/' . $patternitem ) as $file ) {
+                            $file = basename( $file );
+                            $fileListMatch[ $file ] = $file;
+                        }
+                    } else if ( empty( $patternitem ) ) {
+                        foreach ( glob( $this->getAbsolutePath() . '/*' ) as $file ) {
+                            $file = basename( $file );
+                            $fileListMatch[ $file ] = $file;
+                        }
                     }
-                } else if ( empty( $patternitem ) ) {
-                    foreach ( glob( $this->getAbsolutePath() . '/*' ) as $file ) {
-                        $file = basename( $file );
-                        $fileListMatch[ $file ] = $file;
-                    }
                 }
+            } else {
+                foreach ( glob( $this->getAbsolutePath() . '/' . '*' ) as $file ) {
+                    $file = basename( $file );
+                    $fileListMatch[ $file ] = $file;
+                }
             }
             $fileList = & $fileListMatch;
 



From pclaerhout at berlios.de  Thu Jul  6 20:31:34 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Thu, 6 Jul 2006 20:31:34 +0200
Subject: [ydf-devel] r1958 - in YDFramework2.0/trunk/YDFramework2/3rdparty/smarty: . libs libs/plugins
Message-ID: <200607061831.k66IVYpV016406@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-06 20:31:32 +0200 (Thu, 06 Jul 2006)
New Revision: 1958

Modified:
   YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/ChangeLog
   YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/NEWS
   YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/Config_File.class.php
   YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/Smarty.class.php
   YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/Smarty_Compiler.class.php
   YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/plugins/function.html_select_date.php
   YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/plugins/modifier.regex_replace.php
Log:
Updated Smarty to 2.6.14.

Modified: YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/ChangeLog
===================================================================
--- YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/ChangeLog	2006-07-06 18:31:11 UTC (rev 1957)
+++ YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/ChangeLog	2006-07-06 18:31:32 UTC (rev 1958)
@@ -1,3 +1,78 @@
+2006-05-25  boots  <jayboots at yahoo.com>
+
+    * NEWS
+      libs/Smarty_Compiler.class.php:
+      un-hide hidden xml open tags
+
+2006-05-09  boots  <jayboots at yahoo.com>
+
+    * NEWS
+      libs/Smarty_Compiler.class.php:
+      separate handling of comment blocks from "special blocks"
+
+    * NEWS
+      libs/plugins/function.popup_init.php:
+      reverted {popup_init} as proposed change to insertion behviour was not BC
+
+2006-05-04  boots  <jayboots at yahoo.com>
+
+    * NEWS
+      libs/plugins/function.popup_init.php:
+      changed {popup_init} to only emit code once during a request
+      
+      Thanks to TGKnIght from forums
+
+2006-04-22  Messju Mohr  <messju at lammfellpuschen.de>
+
+    * NEWS
+      libs/Smarty_Compiler.class.php:
+      fix handling of block-methods of registered objects
+      thanks to El Hombre Gris
+
+2006-04-04  Monte Ohrt  <monte at ohrt.com>
+
+    * libs/plugins/function.html_select_date.php:
+      fix typo
+
+2006-03-09  Monte Ohrt  <monte at ohrt.com>
+
+    * (Smarty_2_6_13)
+      NEWS:
+      update for release
+
+2006-03-08  Monte Ohrt  <monte at ohrt.com>
+
+    * libs/plugins/modifier.regex_replace.php:
+      remove delim quote
+
+    * libs/plugins/modifier.regex_replace.php:
+      fix delimiter issue
+
+2006-03-03  Monte Ohrt  <monte at ohrt.com>
+
+    * libs/plugins/modifier.regex_replace.php:
+      use preg_replace to cover any space chars
+
+    * libs/plugins/modifier.regex_replace.php:
+      fix problem with allowing "e" modifier
+
+2006-01-29  Messju Mohr  <messju at lammfellpuschen.de>
+
+    * libs/Smarty_Compiler.class.php:
+      removed possiblity for E_NOTICE on an undefined variable in
+      Smarty_Compiler::_compile_if_tag() - thanks to sbeh
+
+2006-01-18  Monte Ohrt  <monte at ohrt.com>
+
+    * libs/Config_File.class.php
+      libs/Smarty.class.php
+      libs/Smarty_Compiler.class.php:
+      update version numbers
+
+    * (Smarty_2_6_12)
+      NEWS:
+      commit 2.6.12 release
+
 2006-01-15  Messju Mohr  <messju at lammfellpuschen.de>
 
     * NEWS
@@ -3645,7 +3720,7 @@
 
     * libs/Smarty.class.php
       libs/Smarty_Compiler.class.php:
-      added CVS $Id: ChangeLog,v 1.407 2006/01/16 06:31:51 changelog Exp $
+      added CVS $Id: ChangeLog,v 1.417 2006/05/26 05:32:07 changelog Exp $
 
 2003-03-31  Messju Mohr  <messju at lammfellpuschen.de>
 

Modified: YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/NEWS
===================================================================
--- YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/NEWS	2006-07-06 18:31:11 UTC (rev 1957)
+++ YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/NEWS	2006-07-06 18:31:32 UTC (rev 1958)
@@ -1,3 +1,12 @@
+- un-hide hidden xml open tags (boots)
+- fix handling of block-methods of registered objects (El Hombre Gris,
+  messju)
+
+Version 2.6.13 (March 9th, 2006)
+--------------------------------
+
+ - update regex_replace, removing possible use of "e" modifier
+
 Version 2.6.12 (Jan 18th, 2006)
 -------------------------------
 

Modified: YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/Config_File.class.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/Config_File.class.php	2006-07-06 18:31:11 UTC (rev 1957)
+++ YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/Config_File.class.php	2006-07-06 18:31:32 UTC (rev 1958)
@@ -18,14 +18,14 @@
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  *
  * @link http://smarty.php.net/
- * @version 2.6.12
+ * @version 2.6.14
  * @copyright Copyright: 2001-2005 New Digital Group, Inc.
  * @author Andrei Zmievski <andrei at php.net>
  * @access public
  * @package Smarty
  */
 
-/* $Id: Config_File.class.php,v 1.83 2005/12/14 14:53:55 mohrt Exp $ */
+/* $Id: Config_File.class.php,v 1.84 2006/01/18 19:02:52 mohrt Exp $ */
 
 /**
  * Config file reading class

Modified: YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/Smarty.class.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/Smarty.class.php	2006-07-06 18:31:11 UTC (rev 1957)
+++ YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/Smarty.class.php	2006-07-06 18:31:32 UTC (rev 1958)
@@ -27,10 +27,10 @@
  * @author Monte Ohrt <monte at ohrt dot com>
  * @author Andrei Zmievski <andrei at php.net>
  * @package Smarty
- * @version 2.6.12
+ * @version 2.6.14
  */
 
-/* $Id: Smarty.class.php,v 1.523 2005/12/31 19:17:04 messju Exp $ */
+/* $Id: Smarty.class.php,v 1.524 2006/01/18 19:02:52 mohrt Exp $ */
 
 /**
  * DIR_SEP isn't used anymore, but third party apps might
@@ -464,7 +464,7 @@
      *
      * @var string
      */
-    var $_version              = '2.6.12';
+    var $_version              = '2.6.14';
 
     /**
      * current template inclusion depth

Modified: YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/Smarty_Compiler.class.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/Smarty_Compiler.class.php	2006-07-06 18:31:11 UTC (rev 1957)
+++ YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/Smarty_Compiler.class.php	2006-07-06 18:31:32 UTC (rev 1958)
@@ -21,12 +21,12 @@
  * @link http://smarty.php.net/
  * @author Monte Ohrt <monte at ohrt dot com>
  * @author Andrei Zmievski <andrei at php.net>
- * @version 2.6.12
+ * @version 2.6.14
  * @copyright 2001-2005 New Digital Group, Inc.
  * @package Smarty
  */
 
-/* $Id: Smarty_Compiler.class.php,v 1.376 2006/01/15 19:29:45 messju Exp $ */
+/* $Id: Smarty_Compiler.class.php,v 1.381 2006/05/25 14:46:18 boots Exp $ */
 
 /**
  * Template compiling class
@@ -240,6 +240,9 @@
         $ldq = preg_quote($this->left_delimiter, '~');
         $rdq = preg_quote($this->right_delimiter, '~');
 
+        /* un-hide hidden xml open tags  */
+        $source_content = preg_replace("~<({$ldq}(.*?){$rdq})[?]~s", '< \\1', $source_content);
+
         // run template source through prefilter functions
         if (count($this->_plugins['prefilter']) > 0) {
             foreach ($this->_plugins['prefilter'] as $filter_name => $prefilter) {
@@ -880,9 +883,9 @@
                     $prefix .= "while (\$_block_repeat) { ob_start();";
                     $return = null;
                     $postfix = '';
-            } else {
-                    $prefix = "\$_obj_block_content = ob_get_contents(); ob_end_clean(); ";
-                    $return = "\$_block_repeat=false; \$this->_reg_objects['$object'][0]->$obj_comp(\$this->_tag_stack[count(\$this->_tag_stack)-1][1], \$_obj_block_content, \$this, \$_block_repeat)";
+                } else {
+                    $prefix = "\$_obj_block_content = ob_get_contents(); ob_end_clean(); \$_block_repeat=false;";
+                    $return = "\$this->_reg_objects['$object'][0]->$obj_comp(\$this->_tag_stack[count(\$this->_tag_stack)-1][1], \$_obj_block_content, \$this, \$_block_repeat)";
                     $postfix = "} array_pop(\$this->_tag_stack);";
                 }
             } else {
@@ -1253,7 +1256,7 @@
         $tokens = $match[0];
 
         if(empty($tokens)) {
-            $_error_msg .= $elseif ? "'elseif'" : "'if'";
+            $_error_msg = $elseif ? "'elseif'" : "'if'";
             $_error_msg .= ' statement requires arguments'; 
             $this->_syntax_error($_error_msg, E_USER_ERROR, __FILE__, __LINE__);
         }

Modified: YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/plugins/function.html_select_date.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/plugins/function.html_select_date.php	2006-07-06 18:31:11 UTC (rev 1957)
+++ YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/plugins/function.html_select_date.php	2006-07-06 18:31:32 UTC (rev 1958)
@@ -22,7 +22,7 @@
  *                month values (Gary Loescher)
  *           - 1.3.1 added support for choosing format for
  *                day values (Marcus Bointon)
- *           - 1.3.2 suppport negative timestamps, force year
+ *           - 1.3.2 support negative timestamps, force year
  *             dropdown to include given date unless explicitly set (Monte)
  * @link http://smarty.php.net/manual/en/language.function.html.select.date.php {html_select_date}
  *      (Smarty online manual)

Modified: YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/plugins/modifier.regex_replace.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/plugins/modifier.regex_replace.php	2006-07-06 18:31:11 UTC (rev 1957)
+++ YDFramework2.0/trunk/YDFramework2/3rdparty/smarty/libs/plugins/modifier.regex_replace.php	2006-07-06 18:31:32 UTC (rev 1958)
@@ -11,7 +11,7 @@
  *
  * Type:     modifier<br>
  * Name:     regex_replace<br>
- * Purpose:  regular epxression search/replace
+ * Purpose:  regular expression search/replace
  * @link http://smarty.php.net/manual/en/language.modifier.regex.replace.php
  *          regex_replace (Smarty online manual)
  * @author   Monte Ohrt <monte at ohrt dot com>
@@ -22,10 +22,11 @@
  */
 function smarty_modifier_regex_replace($string, $search, $replace)
 {
-    if (preg_match('!\W(\w+)$!s', $search, $match) && (strpos($match[1], 'e') !== false)) {
+    if (preg_match('!([a-zA-Z\s]+)$!s', $search, $match) && (strpos($match[1], 'e') !== false)) {
         /* remove eval-modifier from $search */
-        $search = substr($search, 0, -strlen($match[1])) . str_replace('e', '', $match[1]);
+        $search = substr($search, 0, -strlen($match[1])) . preg_replace('![e\s]+!', '', $match[1]);
     }
+       
     return preg_replace($search, $replace, $string);
 }
 



From pclaerhout at berlios.de  Thu Jul  6 20:57:58 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Thu, 6 Jul 2006 20:57:58 +0200
Subject: [ydf-devel] r1959 - YDFramework2.0/trunk/examples/weblog/manage
Message-ID: <200607061857.k66Ivw3d007263@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-06 20:57:53 +0200 (Thu, 06 Jul 2006)
New Revision: 1959

Modified:
   YDFramework2.0/trunk/examples/weblog/manage/stats.php
Log:
When statistics are disabled, you are no longer able to access the stats.php page.

Modified: YDFramework2.0/trunk/examples/weblog/manage/stats.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/stats.php	2006-07-06 18:31:32 UTC (rev 1958)
+++ YDFramework2.0/trunk/examples/weblog/manage/stats.php	2006-07-06 18:57:53 UTC (rev 1959)
@@ -12,6 +12,11 @@
             // Initialize the parent
             $this->YDWeblogAdminRequest();
 
+            // Check if we log statistics or not
+            if ( ! YDConfig::get( 'keep_stats', true ) ) {
+                $this->redirect();
+            }
+
             // Register the graph template function
             $this->tpl->register_function( 'graph', array( & $this, 'templateGraph' ) );
 



From pclaerhout at berlios.de  Thu Jul  6 21:05:37 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Thu, 6 Jul 2006 21:05:37 +0200
Subject: [ydf-devel] r1960 - in YDFramework2.0/trunk/examples/weblog: include include/languages manage
Message-ID: <200607061905.k66J5bgR008999@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-06 21:05:35 +0200 (Thu, 06 Jul 2006)
New Revision: 1960

Modified:
   YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php
   YDFramework2.0/trunk/examples/weblog/include/languages/language_en.php
   YDFramework2.0/trunk/examples/weblog/include/languages/language_nl.php
   YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl
   YDFramework2.0/trunk/examples/weblog/manage/autoupdate.php
   YDFramework2.0/trunk/examples/weblog/manage/config.php
   YDFramework2.0/trunk/examples/weblog/manage/config.tpl
Log:
Added an option to de-activate auto update.

Modified: YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php	2006-07-06 18:57:53 UTC (rev 1959)
+++ YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php	2006-07-06 19:05:35 UTC (rev 1960)
@@ -349,6 +349,7 @@
             $this->tpl->assign( 'weblog_language',    YDConfig::get( 'weblog_language', 'en' ) );
             $this->tpl->assign( 'google_analytics',   YDConfig::get( 'google_analytics', '' ) != '' );
             $this->tpl->assign( 'keep_stats',         YDConfig::get( 'keep_stats', true ) );
+            $this->tpl->assign( 'use_auto_update',    YDConfig::get( 'use_auto_update',  true ) );
 
             // Get the link to the different directories
             $uploads_dir = YDUrl::makeLinkAbsolute( '../' . $this->dir_uploads );

Modified: YDFramework2.0/trunk/examples/weblog/include/languages/language_en.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/languages/language_en.php	2006-07-06 18:57:53 UTC (rev 1959)
+++ YDFramework2.0/trunk/examples/weblog/include/languages/language_en.php	2006-07-06 19:05:35 UTC (rev 1960)
@@ -287,6 +287,7 @@
 $GLOBALS['t']['cfg_weblog_google_analytics'] = 'Google Analytics Account';
 $GLOBALS['t']['cfg_google_analytics'] = 'Google Analytics';
 $GLOBALS['t']['cfg_keep_stats'] = 'Track statistics';
+$GLOBALS['t']['cfg_use_auto_update'] = 'Enable Auto Update';
 
 // manage/item.tpl
 $GLOBALS['t']['item_title'] = 'Item Title';

Modified: YDFramework2.0/trunk/examples/weblog/include/languages/language_nl.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/languages/language_nl.php	2006-07-06 18:57:53 UTC (rev 1959)
+++ YDFramework2.0/trunk/examples/weblog/include/languages/language_nl.php	2006-07-06 19:05:35 UTC (rev 1960)
@@ -287,6 +287,7 @@
 $GLOBALS['t']['cfg_weblog_google_analytics'] = 'Google Analytics Account';
 $GLOBALS['t']['cfg_google_analytics'] = 'Google Analytics';
 $GLOBALS['t']['cfg_keep_stats'] = 'Houdt statistieken bij';
+$GLOBALS['t']['cfg_use_auto_update'] = 'Activeer Auto Update';
 
 // manage/item.tpl
 $GLOBALS['t']['item_title'] = 'Item Titel';

Modified: YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl	2006-07-06 18:57:53 UTC (rev 1959)
+++ YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl	2006-07-06 19:05:35 UTC (rev 1960)
@@ -117,7 +117,9 @@
                 <tr>
                     <td class="adminRowL">
                         <b>{t w="h_diagtools"}</b><br/>
-                        &raquo; <a href="autoupdate.php">{t w="a_version_info"}</a><br/>
+                        {if $use_auto_update}
+                            &raquo; <a href="autoupdate.php">{t w="a_version_info"}</a><br/>
+                        {/if}
                         &raquo; <a href="serverinfo.php">{t w="a_server_info"}</a><br/>
                     </td>
                 </tr>

Modified: YDFramework2.0/trunk/examples/weblog/manage/autoupdate.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/autoupdate.php	2006-07-06 18:57:53 UTC (rev 1959)
+++ YDFramework2.0/trunk/examples/weblog/manage/autoupdate.php	2006-07-06 19:05:35 UTC (rev 1960)
@@ -247,6 +247,11 @@
             // Initialize the parent
             $this->YDWeblogAdminRequest();
 
+            // Check if we log statistics or not
+            if ( ! YDConfig::get( 'use_auto_update', true ) ) {
+                $this->redirect();
+            }
+
             // The default action
             if ( $this->getActionName() != 'default' ) {
 

Modified: YDFramework2.0/trunk/examples/weblog/manage/config.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/config.php	2006-07-06 18:57:53 UTC (rev 1959)
+++ YDFramework2.0/trunk/examples/weblog/manage/config.php	2006-07-06 19:05:35 UTC (rev 1960)
@@ -26,6 +26,7 @@
             // Fix the boolean values
             $config['email_new_comment']   = ( $config['email_new_comment'] ) ? t('yes') : t('no');
             $config['email_new_item']      = ( $config['email_new_item'] ) ? t('yes') : t('no');
+            $config['use_auto_update']     = ( $config['use_auto_update'] ) ? t('yes') : t('no');
             $config['keep_stats']          = ( $config['keep_stats'] ) ? t('yes') : t('no');
             $config['use_cache']           = ( $config['use_cache'] ) ? t('yes') : t('no');
             $config['friendly_urls']       = ( $config['friendly_urls'] ) ? t('yes') : t('no');
@@ -81,6 +82,7 @@
             $form->addElement( 'select', 'weblog_skin', t( 'cfg_weblog_skin' ), array( 'class' => 'tfM', 'style' => 'width: 100%' ), $skins );
             $form->addElement( 'select', 'weblog_language', t( 'cfg_weblog_language' ), array( 'class' => 'tfM', 'style' => 'width: 100%' ), $languages );
             $form->addElement( 'checkbox', 'include_debug_info', t( 'cfg_include_debug_info' ), array( 'style' => 'border: none;' ) );
+            $form->addElement( 'checkbox', 'use_auto_update', t( 'cfg_use_auto_update' ), array( 'style' => 'border: none;' ) );
             $form->addElement( 'checkbox', 'keep_stats', t( 'cfg_keep_stats' ), array( 'style' => 'border: none;' ) );
             $form->addElement( 'text', 'google_analytics', t( 'cfg_weblog_google_analytics' ), array( 'class' => 'tfM' ) );
 
@@ -157,6 +159,7 @@
             $config['weblog_entries_fp']    = YDConfig::get( 'weblog_entries_fp',    1 );
             $config['weblog_skin']          = YDConfig::get( 'weblog_skin',          'default' );
             $config['weblog_language']      = YDConfig::get( 'weblog_language',      'nl' );
+            $config['use_auto_update']      = YDConfig::get( 'use_auto_update',      true );
             $config['keep_stats']           = YDConfig::get( 'keep_stats',           true );
             $config['google_analytics']     = YDConfig::get( 'google_analytics',     '' );
             $config['include_debug_info']   = YDConfig::get( 'include_debug_info',   false );

Modified: YDFramework2.0/trunk/examples/weblog/manage/config.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/config.tpl	2006-07-06 18:57:53 UTC (rev 1959)
+++ YDFramework2.0/trunk/examples/weblog/manage/config.tpl	2006-07-06 19:05:35 UTC (rev 1960)
@@ -77,6 +77,10 @@
             <td class="adminRowL">{$config.include_debug_info}</td>
         </tr>
         <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
+            <td class="adminRowL">{t w="cfg_use_auto_update"}</td>
+            <td class="adminRowL">{$config.use_auto_update}</td>
+        </tr>
+        <tr onMouseOver="YDRowMouseOver(this);" onMouseOut="YDRowMouseOut(this);">
             <td class="adminRowL">{t w="cfg_keep_stats"}</td>
             <td class="adminRowL">{$config.keep_stats}</td>
         </tr>
@@ -203,6 +207,10 @@
                 <td class="adminRowL">{$form.include_debug_info.html}</td>
             </tr>
             <tr>
+                <td class="adminRowL">{$form.use_auto_update.label_html}</td>
+                <td class="adminRowL">{$form.use_auto_update.html}</td>
+            </tr>
+            <tr>
                 <td class="adminRowL">{$form.keep_stats.label_html}</td>
                 <td class="adminRowL">{$form.keep_stats.html}</td>
             </tr>



From pclaerhout at berlios.de  Thu Jul  6 21:46:14 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Thu, 6 Jul 2006 21:46:14 +0200
Subject: [ydf-devel] r1961 - YDFramework2.0/trunk/examples/weblog/manage
Message-ID: <200607061946.k66JkEHg022839@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-06 21:46:13 +0200 (Thu, 06 Jul 2006)
New Revision: 1961

Modified:
   YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl
Log:
TinyMCE now uses <br/> as newlines instead of <p>.

Modified: YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl	2006-07-06 19:05:35 UTC (rev 1960)
+++ YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl	2006-07-06 19:46:13 UTC (rev 1961)
@@ -37,7 +37,8 @@
             theme_advanced_buttons3 : "",
             theme_advanced_toolbar_location : "top",
             theme_advanced_toolbar_align : "left",
-            theme_advanced_path_location : ""
+            theme_advanced_path_location : "",
+            force_br_newlines : true
         });{/literal}
 
     //-->



From pclaerhout at berlios.de  Fri Jul  7 11:21:03 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Fri, 7 Jul 2006 11:21:03 +0200
Subject: [ydf-devel] r1962 - YDFramework2.0/trunk/examples/weblog/include
Message-ID: <200607070921.k679L3Qp021476@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-07 11:21:01 +0200 (Fri, 07 Jul 2006)
New Revision: 1962

Modified:
   YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php
Log:
If the skin doesn't exist, it will default to the "default" skin.

Modified: YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php	2006-07-06 19:46:13 UTC (rev 1961)
+++ YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php	2006-07-07 09:21:01 UTC (rev 1962)
@@ -36,6 +36,13 @@
             $this->dir_uploads = YDConfig::get( 'dir_uploads', 'uploads' );
             $this->dir_skins   = YDConfig::get( 'dir_skins',   'skins' ) . '/';
 
+
+            // Default to default skin
+            if ( ! is_dir( dirname( __FILE__ ) . '/../' . $this->dir_skins . $this->skin . '/' ) ) {
+                YDConfig::set( 'weblog_skin', 'default' );
+                $this->skin = YDConfig::get( 'weblog_skin', 'default' );
+            }
+
             // Initialize the template
             $this->tpl = new YDTemplate();
             $this->tpl->template_dir = dirname( __FILE__ ) . '/../' . $this->dir_skins . $this->skin . '/';



From pclaerhout at berlios.de  Fri Jul  7 11:21:39 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Fri, 7 Jul 2006 11:21:39 +0200
Subject: [ydf-devel] r1963 - in YDFramework2.0/trunk/examples/weblog/skins: . default_with_lightbox default_with_lightbox/images default_with_lightbox/js
Message-ID: <200607070921.k679LdFO021517@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-07 11:21:34 +0200 (Fri, 07 Jul 2006)
New Revision: 1963

Added:
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_footer.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_sidebar.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive_gallery.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/category.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/comment_email.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/default.css
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/blank.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/close.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/closelabel.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/image-1.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbg.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbgcolor.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbgwide.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickfooter.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickheader.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/loading.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/next.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/nextlabel.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/prev.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/prevlabel.gif
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/thumb-1.jpg
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/index.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_email.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_gallery.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/effects.js
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/lightbox.js
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/prototype.js
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/scriptaculous.js
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/lightbox.css
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/page.tpl
Log:
Added a sample skin that uses the LightBox JavaScript for the image galleries.

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_footer.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_footer.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_footer.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,20 @@
+
+        <hr />
+
+        <div id="footer">
+            <p>
+                {t w="powered_by"} <a href="{$YD_FW_HOMEPAGE}" target="_blank">{$YD_FW_NAME}</a>.
+                <br />
+                {t w="syndicate_as"} <a href="{$weblog_link_rss}">RSS</a> {t w="or"} <a href="{$weblog_link_atom}">ATOM</a>.
+                <br />
+                {t w="syndicate_comments_as"} <a href="{$weblog_link_comments_rss}">RSS</a> {t w="or"} <a href="{$weblog_link_comments_atom}">ATOM</a>.
+                {t w="syndicate_gallery_as"} <a href="{$weblog_link_gallery_rss}">RSS</a> {t w="or"} <a href="{$weblog_link_gallery_atom}">ATOM</a>.
+            </p>
+        </div>
+    </div>
+
+    &nbsp;
+
+</body>
+
+</html>

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,73 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
+
+<html xmlns="http://www.w3.org/1999/xhtml">
+
+<head profile="http://gmpg.org/xfn/1">
+
+    <title>{$title}</title>
+
+    <meta name="generator" content="{$YD_FW_NAMEVERS}" />
+
+    <link rel="stylesheet" href="{$skin_dir}/default.css" type="text/css" media="screen" />
+
+    <link rel="stylesheet" href="{$skin_dir}/lightbox.css" type="text/css" media="screen" />
+
+    <script type="text/javascript" src="{$skin_dir}/js/prototype.js"></script>
+    <script type="text/javascript" src="{$skin_dir}/js/scriptaculous.js?load=effects"></script>
+    <script type="text/javascript" src="{$skin_dir}/js/lightbox.js"></script>
+
+    <style type="text/css" media="screen">
+        body        {literal}{{/literal} background: url("{$image_dir}/kubrickbgcolor.jpg");                                    {literal}}{/literal}
+        #page       {literal}{{/literal} background: url("{$image_dir}/kubrickbg.jpg") repeat-y top; border: none;              {literal}}{/literal}
+        #header     {literal}{{/literal} background: url("{$image_dir}/kubrickheader.jpg") no-repeat bottom center;             {literal}}{/literal}
+        #footer     {literal}{{/literal} background: url("{$image_dir}/kubrickfooter.jpg") no-repeat bottom; border: none;      {literal}}{/literal}
+        #header     {literal}{{/literal} margin: 0 !important; margin: 0 0 0 1px; padding: 1px; height: 198px; width: 758px;    {literal}}{/literal}
+        #headerimg  {literal}{{/literal} margin: 7px 9px 0; height: 192px; width: 740px;                                        {literal}}{/literal}
+        .bbtextarea {literal}{{/literal} width: 650px; height: 160px;                                                           {literal}}{/literal}
+        .printonly  {literal}{{/literal} display: none; {literal}}{/literal}
+        .screenonly {literal}{{/literal} display: inline; {literal}}{/literal}
+    </style>
+
+    <style type="text/css" media="print">
+        #sidebar    {literal}{{/literal} display: none;  {literal}}{/literal}
+        .printonly  {literal}{{/literal} display: inline; {literal}}{/literal}
+        .screenonly {literal}{{/literal} display: none; {literal}}{/literal}
+    </style>
+
+    <link rel="alternate" type="application/rss+xml"  title="RSS 2.0"  href="{$weblog_link_rss}"  />
+    <link rel="alternate" type="text/xml"             title="RSS 0.92"  href="{$weblog_link_rss}"  />
+    <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="{$weblog_link_atom}" />
+
+    {if $user.name}
+        <script language="JavaScript">
+        <!--
+
+            {literal}function YDConfirmDelete( img ) {{/literal}
+                return confirm( '{t w="confirm_delete"}\n\n"' + img + '"?');
+            {literal}}{/literal}
+
+        //-->
+        </script>
+    {/if}
+
+    {$weblog_google_analytics}
+
+</head>
+
+<body>
+
+    <div id="page">
+
+        <div id="header">
+            <div id="headerimg">
+                <h1><a href="{$weblog_link}" title="{$weblog_title}">{$weblog_title}</a></h1>
+                <div class="description">
+                    {if $weblog_description}{$weblog_description}{else}{t w="another_powered_by"}{/if}
+                </div>
+                <div class="printonly">
+                    <p><a href="{$weblog_current_url}">{$weblog_current_url}</a></p>
+                </div>
+            </div>
+        </div>
+
+        <hr />

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_sidebar.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_sidebar.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_sidebar.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,63 @@
+<div id="sidebar">
+
+    <ul>
+
+        {if $pages}
+            <li>
+                <h2>{t w="pages"}</h2>
+                <ul>
+                    {foreach from=$pages item="page"}
+                        <li><a href="{$page|@link_page}" title="{t w="page"}: {$page.title}">{$page.title}</a></li>
+                    {/foreach}
+                </ul>
+            </li>
+        {/if}
+
+        <li>
+            <h2>{t w="archives"}</h2>
+            <ul>
+                <li><a href="{$weblog_link_archive}" title="{t w="archives"}">{t w="archives"}</a></li>
+                <li><a href="{$weblog_link_archive_gallery}" title="{t w="archives_gallery"}">{t w="archives_gallery"}</a></li>
+            </ul>
+        </li>
+
+        {if $categories}
+            <li>
+                <h2>{t w="categories"}</h2>
+                <ul>
+                    {foreach from=$categories item="category"}
+                        <li><a href="{$category|@link_category}"
+                            title="{t w="view_posts_filed_under"} {$category.title}">{$category.title}</a>
+                            {if $category.num_items != "0"}({$category.num_items}){/if}
+                        </li>
+                    {/foreach}
+                </ul>
+            </li>
+        {/if}
+
+        {if $links}
+            <li>
+                <h2>{t w="links"}</h2>
+                <ul>
+                    {foreach from=$links item="link"}
+                        <li><a href="{$link|@link_link}" title="{t w="link_to"} {$link.url}" target="_blank">{$link.title}</a></li>
+                    {/foreach}
+                </ul>
+            </li>
+        {/if}
+
+        <li>
+            <h2>{if $user.name}{$user.name}{else}{t w="admin"}{/if}</h2>
+            <ul>
+                {if $user.name}
+                    <li><a href="manage/index.php">{t w="a_admin_home"}</a></li>
+                    <li><a href="manage/index.php?do=logout">{t w="a_logoff"}</a></li>
+                {else}
+                    <li><a href="manage/index.php">{t w="login"}</a></li>
+                {/if}
+            </ul>
+        </li>
+
+    </ul>
+
+</div>

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,31 @@
+{include file="__std_header.tpl"}
+
+<div id="content" class="narrowcolumn">
+
+    {if $items}
+
+        {foreach from=$items key="yearmonth" item="items2"}
+            <h2 class="pagetitle">{$yearmonth}</h2>
+            {if $items2}
+                <p>{foreach from=$items2 item="item"}
+                    <small>{$item.created|date:'%d %B'|lower} - </small> <a href="{$item|@link_item}">{$item.title}</a>
+                    {if $item.num_comments != '0' or $item.num_images != '0'}
+                        <span class="postmetadata">({$item|@text_num_images:false}{if $item.num_comments != '0' and $item.num_images != '0'}, {/if}{$item|@text_num_comments:false})</span>
+                    {/if}
+                    <br/>
+                {/foreach}</p>
+            {/if}
+        {/foreach}
+
+    {else}
+
+        <h2 class="center">{t w="not_found"}</h2>
+        <p class="center">{t w="sorry_not_found"}</p>
+
+    {/if}
+
+</div>
+
+{include file="__std_sidebar.tpl"}
+
+{include file="__std_footer.tpl"}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive_gallery.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive_gallery.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive_gallery.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,51 @@
+{include file="__std_header.tpl"}
+
+<div id="content" class="narrowcolumn">
+
+    {if $items}
+
+        {foreach from=$items item="item"}
+            <div class="post">
+                <h2 id="post-{$item.id}">
+                    <a href="{$item|@link_item}" rel="bookmark" title="PermaLink to {$item.title}">{$item.title}</a>
+                </h2>
+                <small>{$item.created|date|lower} {t w="by"} <a href="mailto:{$item.user_email|escape:'hexentity'}">{$item.user_name|lower}</a></small>
+                <p>
+                    <table width="450" border=0 cellspacing=0 cellpadding=0>
+                    {foreach from=$item.images_as_table item="image_row"}
+                    <tr>
+                        {foreach from=$image_row item="image"}
+                            <td width="12%" align="center" valign="middle" height="60">
+                                {if $image}
+                                    <a href="{$uploads_dir}/{$image->relative_path}" rel="lightbox[{$item.id}]" title="{$image->getBasenameNoExt()}"><img src="{$image|link_thumb_small}" alt="{$image->getBaseName()}" width="{$image->relative_path_s_obj->getWidth()}" height="{$image->relative_path_s_obj->getHeight()}"></a>
+                                {else}
+                                    &nbsp;
+                                {/if}
+                            </td>
+                        {/foreach}
+                    <tr/>
+                    {/foreach}
+                </table>
+                </p>
+                <p class="postmetadata">
+                    {t w="posted_in"} <a href="{$item.category_id|link_category}">{$item.category}</a> <strong>|</strong>
+                    {if $item.num_images != '0'}
+                        <a href="{$item|@link_item_images}">{$item|@text_num_images}</a> <strong>|</strong>
+                    {/if}
+                    <a href="{$item|@link_item_comment}">{$item|@text_num_comments:true} &#187;</a>
+                </p>
+            </div>
+        {/foreach}
+
+    {else}
+
+        <h2 class="center">{t w="not_found"}</h2>
+        <p class="center">{t w="sorry_not_found"}</p>
+
+    {/if}
+
+</div>
+
+{include file="__std_sidebar.tpl"}
+
+{include file="__std_footer.tpl"}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/category.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/category.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/category.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,34 @@
+{include file="__std_header.tpl"}
+
+<div id="content" class="narrowcolumn">
+
+    {if $items}
+
+        <h2 class="pagetitle">{t w="archive_for_the"} '{$category.title}' {t w="category" lower=true}</h2>
+
+        {foreach from=$items item="item"}
+            <p>
+                <div class="entry">
+                    <a href="{$item|@link_item}">{$item.title}</a>
+                    {if $item.num_comments != '0' or $item.num_images != '0'}
+                        <span class="postmetadata">({$item|@text_num_images:false}{if $item.num_comments != '0' and $item.num_images != '0'}, {/if}{$item|@text_num_comments:false})</span>
+                    {/if}
+                    <br/>
+                    {$item.body|bbcode|strip_tags|truncate:70}
+                </div>
+                <small>{$item.created|date} {t w="by"} <a href="mailto:{$item.user_email|escape:'hexentity'}">{$item.user_name}</a></small>
+            </p>
+        {/foreach}
+
+    {else}
+
+        <h2 class="center">{t w="not_found"}</h2>
+        <p class="center">{t w="sorry_not_found"}</p>
+
+    {/if}
+
+</div>
+
+{include file="__std_sidebar.tpl"}
+
+{include file="__std_footer.tpl"}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/comment_email.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/comment_email.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/comment_email.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,53 @@
+<html>
+
+<head>
+
+    <title>{$weblog.title}</title>
+
+    <meta name="generator" content="{$YD_FW_NAMEVERS}" />
+
+    <link rel="stylesheet" href="{$skin_dir}/default.css" type="text/css" media="screen" />
+
+    <style type="text/css" media="screen">
+        body        {literal}{{/literal} background: url("{$image_dir}/kubrickbgcolor.jpg");                                 {literal}}{/literal}
+        #page       {literal}{{/literal} background: url("{$image_dir}/kubrickbgwide.jpg") repeat-y top; border: none;       {literal}}{/literal}
+        #header     {literal}{{/literal} background: url("{$image_dir}/kubrickheader.jpg") no-repeat top center;             {literal}}{/literal}
+        #footer     {literal}{{/literal} background: url("{$image_dir}/kubrickfooter.jpg") no-repeat bottom; border: none;   {literal}}{/literal}
+        #header     {literal}{{/literal} margin: 0 !important; margin: 0; padding: 1px; height: 0px; width: 758px;           {literal}}{/literal}
+        #headerimg  {literal}{{/literal} margin: 0; height: 0px; width: 740px;                                               {literal}}{/literal}
+        .bbtextarea {literal}{{/literal} width: 650px; height: 160px;                                                        {literal}}{/literal}
+    </style>
+
+</head>
+
+<body>
+
+    <div id="page">
+
+        <div id="header"></div>
+
+        <div id="content" class="narrowcolumn">
+
+            <h3>{t w="new_comment"}: {$item.title}</h3>
+
+            <p>
+                <b>{t w="weblog"}</b>: <a href="{$weblog_link}">{$weblog_title}</a><br/>
+                <b>{t w="item_title"}</b>: <a href="{$item|@link_item}">{$item.title}</a><br/>
+            </p>
+
+            <p>{$eml_comment.username} {t w="wrote"}:</p>
+
+            <blockquote><i>{$eml_comment.comment|bbcode}</i></blockquote>
+
+            &nbsp;
+
+        </div>
+
+        <div id="footer"></div>
+
+    </div>
+
+</body>
+
+</html>
+

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/default.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/default.css	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/default.css	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,521 @@
+body {
+	font-size: 62.5%;
+	font-size: 10px;
+	font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	background-color: #d5d6d7;
+	color: #333;
+	text-align: center;
+	}
+
+#page {
+	background-color: white;
+	border: 1px solid #959596;
+	text-align: left;
+	}
+
+#header {
+	background-color: #73a0c5;
+	}
+
+#content {
+	font-size: 1.2em
+	}
+
+.widecolumn .entry p {
+	font-size: 1.05em;
+	}
+
+.narrowcolumn .entry, .widecolumn .entry {
+	line-height: 1.4em;
+	}
+
+.widecolumn {
+	line-height: 1.6em;
+	}
+	
+.narrowcolumn .postmetadata {
+	text-align: center;
+	}
+
+.alt {
+	background-color: #f8f8f8;
+	border-top: 1px solid #ddd;
+	border-bottom: 1px solid #ddd;
+	}
+
+#footer {
+	background-color: #eee;
+	}
+
+small, .bbtoolbar {
+	font-family: Arial, Helvetica, Sans-Serif;
+	font-size: 0.9em;
+	line-height: 1.5em;
+	}
+
+.bbtoolbar {
+	background-color: #EEE;
+	padding: 2px;
+}
+
+h1, h2, h3 {
+	font-family: 'Trebuchet MS', 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	font-weight: bold;
+	}
+
+h1 {
+	font-size: 4em;
+	text-align: center;
+	}
+
+.description {
+	font-size: 1.2em;
+	text-align: center;
+	}
+
+h2 {
+	font-size: 1.6em;
+	}
+
+h2.pagetitle {
+	font-size: 1.6em;
+	}
+
+#sidebar h2 {
+	font-family: 'Lucida Grande', Verdana, Sans-Serif;
+	font-size: 1.2em;
+	}
+
+h3 {
+	font-size: 1.3em;
+	}
+
+h1, h1 a, h1 a:hover, h1 a:visited, .description {
+	text-decoration: none;
+	color: white;
+	}
+
+h2, h2 a, h2 a:visited, h3, h3 a, h3 a:visited {
+	color: #333;
+	}
+
+h2, h2 a, h2 a:hover, h2 a:visited, h3, h3 a, h3 a:hover, h3 a:visited, #sidebar h2, #wp-calendar caption, cite {
+	text-decoration: none;
+	}
+
+.entry p a:visited {
+	color: #b85b5a;
+	}
+
+.commentlist li, #commentform input, #commentform textarea {
+	font: 1em 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	}
+
+#commentform textarea {
+	font-size: 1.0em;
+	}
+
+.commentlist li {
+	font-weight: bold;
+	}
+
+.commentlist cite, .commentlist cite a {
+	font-weight: bold;
+	font-style: normal;
+	font-size: 1.1em;
+	}
+
+.commentlist p {
+	font-weight: normal;
+	line-height: 1.5em;
+	text-transform: none;
+	}
+
+#commentform p {
+	font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	}
+
+.commentmetadata {
+	font-weight: normal;
+	}
+
+#sidebar {
+	font: 1em 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	}
+
+small, #sidebar ul ul li, #sidebar ul ol li, .nocomments, .postmetadata, blockquote, strike {
+	color: #777;
+	}
+	
+code {
+	font: 1.1em 'Courier New', Courier, Fixed;
+	}
+
+acronym, abbr, span.caps
+{
+	font-size: 0.9em;
+	letter-spacing: .07em;
+	}
+
+a, h2 a:hover, h3 a:hover {
+	color: #06c;
+	text-decoration: none;
+	}
+
+a:hover {
+	color: #147;
+	text-decoration: underline;
+	}
+	
+#wp-calendar #prev a {
+	font-size: 9pt;
+	}
+
+#wp-calendar a {
+	text-decoration: none;
+	}
+
+#wp-calendar caption {
+	font: bold 1.3em 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	text-align: center;
+	}
+
+#wp-calendar th {
+	font-style: normal;
+	text-transform: capitalize;
+	}
+
+body {
+	margin: 0;
+	padding: 0; 
+	}
+
+#page {
+	background-color: white;
+	margin: 20px auto;
+	padding: 0;
+	width: 760px;
+	border: 1px solid #959596;
+	}
+	
+#header {
+	padding: 0;
+	margin: 0 auto;
+	height: 200px;
+	width: 100%;
+	background-color: #73a0c5;
+	}
+
+#headerimg {
+	margin: 0;
+	height: 200px;
+	width: 100%;
+	}
+
+.narrowcolumn {
+	float: left;
+	padding: 0 0 20px 45px;
+	margin: 0px 0 0;
+	width: 450px;
+	}
+
+.widecolumn {
+	padding: 10px 0 20px 0;
+	margin: 5px 0 0 150px;
+	width: 450px;
+	}
+	
+.post {
+	margin: 0 0 40px;
+	text-align: justify;
+	}
+
+.widecolumn .post {
+	margin: 0;
+	}
+
+.narrowcolumn .postmetadata {
+	padding-top: 5px;
+	}
+
+.widecolumn .postmetadata {
+	margin: 30px 0;
+	}
+	
+#footer {
+	padding: 0 0 0 1px;
+	margin: 0 auto;
+	width: 760px;
+	clear: both;
+	}
+
+#footer p {
+	margin: 0;
+	padding: 20px 0;
+	text-align: center;
+	}
+
+h1 {
+	padding-top: 70px;
+	margin: 0;
+	}
+
+.description {
+	text-align: center;
+	}
+
+h2 {
+	margin: 30px 0 0;
+	}
+
+h2.pagetitle {
+	margin-top: 30px;
+	text-align: center;
+}
+
+#sidebar h2 {
+	margin: 5px 0 0;
+	padding: 0;
+	}
+
+h3 {
+	padding: 0;
+	margin: 30px 0 0;
+	}
+
+h3.comments {
+	padding: 0;
+	margin: 40px auto 20px ;
+	}
+
+p img {
+	padding: 0;
+	max-width: 100%;
+	}
+
+img.centered {
+	display: block;
+	margin-left: auto;
+	margin-right: auto;
+	}
+	
+img.alignright {
+	padding: 4px;
+	margin: 0 0 2px 7px;
+	display: inline;
+	}
+
+img.alignleft {
+	padding: 4px;
+	margin: 0 7px 2px 0;
+	display: inline;
+	}
+
+.alignright {
+	float: right;
+	}
+	
+.alignleft {
+	float: left
+	}
+
+html>body .entry ul {
+	margin-left: 0px;
+	padding: 0 0 0 30px;
+	list-style: none;
+	padding-left: 10px;
+	text-indent: -10px;
+	} 
+
+html>body .entry li {
+	margin: 7px 0 8px 10px;
+	}
+
+.entry ul li:before, #sidebar ul ul li:before {
+	content: "\00BB \0020";
+	}
+
+.entry ol {
+	padding: 0 0 0 35px;
+	margin: 0;
+	}
+
+.entry ol li {
+	margin: 0;
+	padding: 0;
+	}
+
+.postmetadata ul, .postmetadata li {
+	display: inline;
+	list-style-type: none;
+	list-style-image: none;
+	}
+	
+#sidebar ul, #sidebar ul ol {
+	margin: 0;
+	padding: 0;
+	}
+
+#sidebar ul li {
+	list-style-type: none;
+	list-style-image: none;
+	margin-bottom: 15px;
+	}
+
+#sidebar ul p, #sidebar ul select {
+	margin: 5px 0 8px;
+	}
+
+#sidebar ul ul, #sidebar ul ol {
+	margin: 5px 0 0 10px;
+	}
+
+#sidebar ul ul ul, #sidebar ul ol {
+	margin: 0 0 0 10px;
+	}
+
+ol li, #sidebar ul ol li {
+	list-style: decimal outside;
+	}
+
+#sidebar ul ul li, #sidebar ul ol li {
+	margin: 3px 0 0;
+	padding: 0;
+	}
+
+#searchform {
+	margin: 10px auto;
+	padding: 5px 3px; 
+	text-align: center;
+	}
+
+#sidebar #searchform #s {
+	width: 115px;
+	padding: 2px;
+	}
+
+#sidebar #searchsubmit {
+	padding: 1px;
+	}
+
+.entry form {
+	text-align:center;
+	}
+
+select {
+	width: 130px;
+	}
+
+#commentform input {
+	width: 170px;
+	padding: 2px;
+	margin: 5px 5px 1px 0;
+	}
+
+#commentform textarea {
+	width: 100%;
+	height: 160px;
+	padding: 2px;
+	}
+
+#commentform #submit {
+	margin: 0;
+	background-color: #06c;
+	color: #fff;
+	}
+
+.alt {
+	margin: 0;
+	padding: 10px;
+	}
+
+.commentlist {
+	padding: 0;
+	text-align: justify;
+	}
+
+.commentlist li {
+	margin: 15px 0 3px;
+	padding: 5px 10px 3px;
+	list-style: none;
+	}
+
+.commentlist p {
+	margin: 10px 5px 10px 0;
+	}
+
+#commentform p {
+	margin: 5px 0;
+	}
+
+.nocomments {
+	text-align: center;
+	margin: 0;
+	padding: 0;
+	}
+
+.commentmetadata {
+	margin: 0;
+	display: block;
+	}
+
+#sidebar
+{
+	padding: 20px 0 10px 0;
+	margin-left: 545px;
+	width: 190px;
+	}
+
+#sidebar form {
+	margin: 0;
+	}
+
+acronym, abbr, span.caps {
+	cursor: help;
+	}
+
+acronym, abbr {
+	border-bottom: 1px dashed #999;
+	}
+
+blockquote {
+	margin: 15px 30px 0 10px;
+	padding-left: 20px;
+	border-left: 5px solid #ddd;
+	}
+
+blockquote cite {
+	margin: 5px 0 0;
+	display: block;
+	}
+
+.center {
+	text-align: center;
+	}
+
+hr {
+	display: none;
+	}
+
+a img {
+	border: none;
+	}
+
+.navigation {
+	display: block;
+	text-align: center;
+	margin-top: 10px;
+	margin-bottom: 60px;
+	}
+
+.white {
+	color: white;
+}
+
+#content td {
+	font-size: 0.8em;
+}
+
+.required {
+	color: red;
+}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/blank.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/blank.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/close.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/close.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/closelabel.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/closelabel.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/image-1.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/image-1.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbg.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbg.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbgcolor.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbgcolor.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbgwide.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickbgwide.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickfooter.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickfooter.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickheader.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/kubrickheader.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/loading.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/loading.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/next.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/next.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/nextlabel.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/nextlabel.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/prev.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/prev.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/prevlabel.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/prevlabel.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/thumb-1.jpg
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/images/thumb-1.jpg
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/index.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/index.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/index.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,69 @@
+{include file="__std_header.tpl"}
+
+<div id="content" class="narrowcolumn">
+
+    {if $items}
+
+        {foreach from=$items item="item"}
+            <div class="post">
+                <h2 id="post-{$item.id}">
+                    <a href="{$item|@link_item}" rel="bookmark" title="PermaLink to {$item.title}">{$item.title}</a>
+                </h2>
+                <small>
+                    {$item.created|date|lower} {t w="by"} <a href="mailto:{$item.user_email|escape:'hexentity'}">{$item.user_name|lower}</a>
+                    {*
+                    {if $user.name}
+                        | <a href="manage/items.php?do=edit&id={$item.id}" target="_blank">{t w="edit"}</a>
+                        | <a href="manage/items.php?do=delete&id={$item.id}"
+                             onClick="return YDConfirmDelete( '{$item.title|addslashes}' );">{t w="delete"}</a>
+                    {/if}
+                    *}
+                </small>
+                <div class="entry">
+                    {$item.body|bbcode}
+                    {if $item.body_more}<a href="{$item|@link_item}#more">&raquo; {t w="more"}</a>{/if}
+                </div>
+                <p class="postmetadata">
+                    {t w="posted_in"} <a href="{$item.category_id|link_category}">{$item.category}</a> <strong>|</strong>
+                    {if $item.num_images != '0'}
+                        <a href="{$item|@link_item_images}">{$item|@text_num_images}</a> <strong>|</strong>
+                    {/if}
+                    <a href="{$item|@link_item_comment}">{$item|@text_num_comments:true} &#187;</a>
+                </p>
+            </div>
+        {/foreach}
+
+        {if $old_items}
+            <div class="post">
+                <h2>{t w="older_items"}</h2>
+                <ul>
+                    {foreach from=$old_items item="old_item"}
+                        <li>
+                            {$old_item.created|date:'%d %B %Y'|lower}:
+                            <a href="{$old_item|@link_item}">{$old_item.title}</a>
+                            {if $old_item.num_comments != '0' or $old_item.num_images != '0'}
+                                <span class="postmetadata">({$old_item|@text_num_images:false}{if $old_item.num_comments != '0' and $old_item.num_images != '0'}, {/if}{$old_item|@text_num_comments:false})</span>
+                            {/if}
+                        </li>
+                    {/foreach}
+                </ul>
+            </div>
+        {/if}
+
+        <div class="navigation">
+            <div class="alignleft"></div>
+            <div class="alignright"></div>
+        </div>
+
+    {else}
+
+        <h2 class="center">{t w="not_found"}</h2>
+        <p class="center">{t w="sorry_not_found"}</p>
+
+    {/if}
+
+</div>
+
+{include file="__std_sidebar.tpl"}
+
+{include file="__std_footer.tpl"}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,165 @@
+{include file="__std_header.tpl"}
+
+<div id="content" class="narrowcolumn">
+
+    {if $item.older_id or $item.newer_id}
+        <div class="screenonly">
+            <div class="navigation">
+                {if $item.older_id}
+                    <div class="alignleft">&laquo; <a href="{$item.older_id|link_item}">{t w="older_post"}</a></div>
+                {/if}
+                {if $item.newer_id}
+                    <div class="alignright"><a href="{$item.newer_id|link_item}">{t w="newer_post"}</a> &raquo;</div>
+                {/if}
+            </div>
+        </div>
+    {/if}
+
+    <div class="post">
+
+        <h2 id="post-{$item.id}">
+            <a href="{$item|@link_item}" rel="bookmark" title="PermaLink to {$item.title}">{$item.title}</a>
+        </h2>
+
+        <div class="entrytext">
+
+            <p>{$item.body|bbcode}</p>
+
+            <a name="more"></a>
+
+            <p>{$item.body_more|bbcode}</p>
+
+            <p class="postmetadata alt">
+                <small>
+                    {t w="posted_under"} {$item.created|date|lower} {t w="by"} <a href="mailto:{$item.user_email|escape:'hexentity'}">{$item.user_name}</a>
+                    {t w="filed_under"} <a href="{$item.category_id|link_category}">{$item.category}</a>.
+                    {if $user.name}
+                        <br/>
+                        <a href="manage/items.php?do=edit&id={$item.id}" target="_blank">{t w="edit"}</a>
+                        | <a href="manage/items.php?do=delete&id={$item.id}"
+                             onClick="return YDConfirmDelete( '{$item.title|addslashes}' );">{t w="delete"}</a>
+                    {/if}
+                </small>
+            </p>
+
+        </div>
+
+        {if $item.images}
+            <a name="images"></a>
+            <h3>{$item|@text_num_images} {t w="with"} &#8220;{$item.title}&#8221;</h3>
+            <p><table width="450" border=0 cellspacing=0 cellpadding=0>
+            {foreach from=$item.images_as_table item="image_row"}
+            <tr>
+                {foreach from=$image_row item="image"}
+                    <td width="33%" align="center" style="vertical-align: middle;" height="100">
+                        {if $image}
+                            <a href="{$uploads_dir}/{$image->relative_path}" rel="lightbox[{$item.id}]" title="{$image->getBasenameNoExt()}"
+                             ><img src="{$image|link_thumb}" alt="{$image->getBaseName()}"
+                             width="{$image->relative_path_m_obj->getWidth()}" height="{$image->relative_path_m_obj->getHeight()}"></a>
+                        {else}
+                            &nbsp;
+                        {/if}
+                    </td>
+                {/foreach}
+            <tr/>
+            <tr>
+                {foreach from=$image_row item="image"}
+                    <td width="33%" align="center">
+                        {if $image}
+                            <p><a href="{$uploads_dir}/{$image->relative_path}" rel="lightbox[{$item.id}]" title="{$image->getBasenameNoExt()}"
+                             >{$image->getBasenameNoExt()}</a><br/>&nbsp;</p>
+                        {else}
+                            &nbsp;
+                        {/if}
+                     </td>
+                {/foreach}
+            <tr/>
+            {/foreach}
+            </table></p>
+        {/if}
+
+    </div>
+
+    <a name="related"></a>
+    {if $related_items}
+        <h3>{t w="related_items"} &#8220;{$item.title}&#8221;</h3>
+        <ul>
+            {foreach from=$related_items item="rel_item"}
+                <li>
+                    {$rel_item.created|date:'%d %B %Y'|lower}:
+                    <a href="{$rel_item|@link_item}">{$rel_item.title}</a>
+                    {if $rel_item.num_comments != '0' or $rel_item.num_images != '0'}
+                        <span class="postmetadata">({$rel_item|@text_num_images:false}{if $rel_item.num_comments != '0' and $rel_item.num_images != '0'}, {/if}{$rel_item|@text_num_comments:false})</span>
+                    {/if}
+                </li>
+            {/foreach}
+        </ul>
+    {/if}
+
+    <a name="comment"></a>
+    {if $comments}
+        <h3>{$item|@text_num_comments:true} {t w="to"} &#8220;{$item.title}&#8221;</h3>
+        <ol class="commentlist">
+            {foreach from=$comments item="comment"}
+                <li class="{cycle values="alt,"}" id="comment-{$comment.id}">
+                    <a name="comment-{$comment.id}"></a>
+                    <cite>
+                        {if $comment.userwebsite}
+                            <a href="{$comment.userwebsite}" rel="external nofollow" target="_blank">{$comment.username}</a>
+                        {else}
+                            {$comment.username}
+                        {/if}
+                    </cite> {t w="says"}:<br />
+                    <small class="commentmetadata">
+                        <a href="#comment-{$comment.id}" title="">{$comment.created|date:"%A, %d %b %Y @ %H:%M"|lower}</a>
+                        {if $user.name}
+                            | <a href="manage/comments.php?do=edit&id={$comment.id}" target="_blank">{t w="edit"}</a>
+                            | <a href="manage/comments.php?do=delete&id={$comment.id}"
+                                 onClick="return YDConfirmDelete( '{$item.title|addslashes}' );">{t w="delete"}</a>
+                        {/if}
+                    </small>
+                    <p>{$comment.comment|bbcode}</p>
+                </li>
+            {/foreach}
+        </ol>
+    {/if}
+
+    <a name="respond"></a>
+    <h3 id="respond">{t w="leave_comment"}</h3>
+
+    {if $comments_form}
+
+        {$comments_form.tag}
+
+            {if $comments_form.errors_unique_messages}
+                <p class="postmetadata alt" style="color: red; text-align: left;">
+                    <b>{t w="error_comment"}<br/></b>
+                    {foreach from=$comments_form.errors_unique_messages item="error"}
+                        {$error}<br/>
+                    {/foreach}
+                </p>
+            {/if}
+
+            {$comments_form.item_id.html}
+
+            <p>{$comments_form.username.html} <small>{$comments_form.username.label_html}</small></p>
+            <p>{$comments_form.useremail.html} <small>{$comments_form.useremail.label_html}</small></p>
+            <p>{$comments_form.userwebsite.html} <small>{$comments_form.userwebsite.label_html}</small></p>
+
+            <p>{$comments_form.comment.html}</p>
+
+            <p>{$comments_form.cmdSubmit.html}</p>
+
+        {$comments_form.endtag}
+
+    {else}
+
+        <p>{t w="item_closed"}</p>
+
+    {/if}
+
+</div>
+
+{include file="__std_sidebar.tpl"}
+
+{include file="__std_footer.tpl"}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_email.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_email.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_email.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,54 @@
+<html>
+
+<head>
+
+    <title>{$weblog.title}</title>
+
+    <meta name="generator" content="{$YD_FW_NAMEVERS}" />
+
+    <link rel="stylesheet" href="{$skin_dir}/default.css" type="text/css" media="screen" />
+
+    <style type="text/css" media="screen">
+        body        {literal}{{/literal} background: url("{$image_dir}/kubrickbgcolor.jpg");                                 {literal}}{/literal}
+        #page       {literal}{{/literal} background: url("{$image_dir}/kubrickbgwide.jpg") repeat-y top; border: none;       {literal}}{/literal}
+        #header     {literal}{{/literal} background: url("{$image_dir}/kubrickheader.jpg") no-repeat top center;             {literal}}{/literal}
+        #footer     {literal}{{/literal} background: url("{$image_dir}/kubrickfooter.jpg") no-repeat bottom; border: none;   {literal}}{/literal}
+        #header     {literal}{{/literal} margin: 0 !important; margin: 0; padding: 1px; height: 0px; width: 758px;           {literal}}{/literal}
+        #headerimg  {literal}{{/literal} margin: 0; height: 0px; width: 740px;                                               {literal}}{/literal}
+        .bbtextarea {literal}{{/literal} width: 650px; height: 160px;                                                        {literal}}{/literal}
+    </style>
+
+</head>
+
+<body>
+
+    <div id="page">
+
+        <div id="header"></div>
+
+        <div id="content" class="narrowcolumn">
+
+            <h3>{t w="new_item"}: {$item.title}</h3>
+
+            <p>
+                <b>{t w="weblog"}</b>: <a href="{$weblog_link}">{$weblog_title}</a><br/>
+                <b>{t w="item_title"}</b>: <a href="{$item_link}">{$item.title}</a><br/>
+            </p>
+
+            <blockquote>
+                <p>{$item.body|bbcode}</p>
+                <p>{$item.body_more|bbcode}</p>
+            </blockquote>
+
+            &nbsp;
+
+        </div>
+
+        <div id="footer"></div>
+
+    </div>
+
+</body>
+
+</html>
+

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_gallery.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_gallery.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_gallery.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,67 @@
+{include file="__std_header.tpl"}
+
+{assign var="max_img_size" value="450"}
+
+{capture assign="browsebar"}
+    {if $image->previous or $image->next}
+        <div class="navigation">
+            {if $image->previous}
+                <div class="alignleft">&laquo; <a href="{$YD_SELF_SCRIPT}?id={$image->previous->relative_path}">{t w="previous"}</a></div>
+            {/if}
+            {if $image->next}
+                <div class="alignright"><a href="{$YD_SELF_SCRIPT}?id={$image->next->relative_path}">{t w="next"}</a> &raquo;</div>
+            {/if}
+        </div>
+    {/if}
+{/capture}
+
+<style type="text/css" media="screen">
+    #page {literal}{{/literal} background: url("{$image_dir}/kubrickbgwide.jpg") repeat-y top; border: none; {literal}}{/literal}
+</style>
+
+<div id="content" class="widecolumn">
+
+    {$browsebar}
+
+    <div class="post">
+
+        <h2 id="post-{$item.id}"><a href="{$item|@link_item}">{$item.title}</a> &raquo; {$image->getBasenameNoExt()}</h2>
+
+        <div class="entrytext">
+
+            <p align="center">
+            {if $image->getWidth() > $max_img_size}
+                <iframe src="{$uploads_dir}/{$image->relative_path}" width="{$max_img_size}" height="{$image->getHeight()+20}" marginwidth="0" marginheight="0"></iframe>
+            {else}
+                <img src="{$uploads_dir}/{$image->relative_path}" width="{$image->getWidth()}" height="{$image->getHeight()}">
+            {/if}
+            </p>
+
+            {$browsebar}
+
+            <p class="postmetadata alt">
+                <small>
+                    {t w="image"}: {$image->getBaseName()}
+                    ({t w="image"} {$image->num} {t w="of"} {$image->total_images})
+                    <br/>
+                    {t w="item"}: <a href="{$item|@link_item}">{$item.title}</a>
+                    {if $image->exif}
+                        <br/>
+                        EXIF: {$image->exif.Model}
+                        {$image->exif.ExposureTime|replace:' sec':'s'}
+                        {$image->exif.ApertureValue|replace:' ':'/'} {t w="at"}
+                        {$image->exif.FocalLength|replace:' ':''}
+                        ISO-{$image->exif.ISOSpeedRatings}
+                    {/if}
+                </small>
+            </p>
+
+            <p align="center"><a href="{$item|@link_item_comment}">{$item|@text_num_comments:true}</a></p>
+
+        </div>
+
+    </div>
+
+</div>
+
+{include file="__std_footer.tpl"}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/effects.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/effects.js	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/effects.js	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,903 @@
+// Copyright (c) 2005 Thomas Fuchs (http://script.aculo.us, http://mir.aculo.us)
+// Contributors:
+//  Justin Palmer (http://encytemedia.com/)
+//  Mark Pilgrim (http://diveintomark.org/)
+//  Martin Bialasinki
+// 
+// See scriptaculous.js for full license.  
+
+/* ------------- element ext -------------- */  
+ 
+// converts rgb() and #xxx to #xxxxxx format,  
+// returns self (or first argument) if not convertable  
+String.prototype.parseColor = function() {  
+  var color = '#';  
+  if(this.slice(0,4) == 'rgb(') {  
+    var cols = this.slice(4,this.length-1).split(',');  
+    var i=0; do { color += parseInt(cols[i]).toColorPart() } while (++i<3);  
+  } else {  
+    if(this.slice(0,1) == '#') {  
+      if(this.length==4) for(var i=1;i<4;i++) color += (this.charAt(i) + this.charAt(i)).toLowerCase();  
+      if(this.length==7) color = this.toLowerCase();  
+    }  
+  }  
+  return(color.length==7 ? color : (arguments[0] || this));  
+}
+
+Element.collectTextNodes = function(element) {  
+  return $A($(element).childNodes).collect( function(node) {
+    return (node.nodeType==3 ? node.nodeValue : 
+      (node.hasChildNodes() ? Element.collectTextNodes(node) : ''));
+  }).flatten().join('');
+}
+
+Element.collectTextNodesIgnoreClass = function(element, className) {  
+  return $A($(element).childNodes).collect( function(node) {
+    return (node.nodeType==3 ? node.nodeValue : 
+      ((node.hasChildNodes() && !Element.hasClassName(node,className)) ? 
+        Element.collectTextNodes(node) : ''));
+  }).flatten().join('');
+}
+
+Element.setStyle = function(element, style) {
+  element = $(element);
+  for(k in style) element.style[k.camelize()] = style[k];
+}
+
+Element.setContentZoom = function(element, percent) {  
+  Element.setStyle(element, {fontSize: (percent/100) + 'em'});   
+  if(navigator.appVersion.indexOf('AppleWebKit')>0) window.scrollBy(0,0);  
+}
+
+Element.getOpacity = function(element){  
+  var opacity;
+  if (opacity = Element.getStyle(element, 'opacity'))  
+    return parseFloat(opacity);  
+  if (opacity = (Element.getStyle(element, 'filter') || '').match(/alpha\(opacity=(.*)\)/))  
+    if(opacity[1]) return parseFloat(opacity[1]) / 100;  
+  return 1.0;  
+}
+
+Element.setOpacity = function(element, value){  
+  element= $(element);  
+  if (value == 1){
+    Element.setStyle(element, { opacity: 
+      (/Gecko/.test(navigator.userAgent) && !/Konqueror|Safari|KHTML/.test(navigator.userAgent)) ? 
+      0.999999 : null });
+    if(/MSIE/.test(navigator.userAgent))  
+      Element.setStyle(element, {filter: Element.getStyle(element,'filter').replace(/alpha\([^\)]*\)/gi,'')});  
+  } else {  
+    if(value < 0.00001) value = 0;  
+    Element.setStyle(element, {opacity: value});
+    if(/MSIE/.test(navigator.userAgent))  
+     Element.setStyle(element, 
+       { filter: Element.getStyle(element,'filter').replace(/alpha\([^\)]*\)/gi,'') +
+                 'alpha(opacity='+value*100+')' });  
+  }   
+}  
+ 
+Element.getInlineOpacity = function(element){  
+  return $(element).style.opacity || '';
+}  
+
+Element.childrenWithClassName = function(element, className) {  
+  return $A($(element).getElementsByTagName('*')).select(
+    function(c) { return Element.hasClassName(c, className) });
+}
+
+Array.prototype.call = function() {
+  var args = arguments;
+  this.each(function(f){ f.apply(this, args) });
+}
+
+/*--------------------------------------------------------------------------*/
+
+var Effect = {
+  tagifyText: function(element) {
+    var tagifyStyle = 'position:relative';
+    if(/MSIE/.test(navigator.userAgent)) tagifyStyle += ';zoom:1';
+    element = $(element);
+    $A(element.childNodes).each( function(child) {
+      if(child.nodeType==3) {
+        child.nodeValue.toArray().each( function(character) {
+          element.insertBefore(
+            Builder.node('span',{style: tagifyStyle},
+              character == ' ' ? String.fromCharCode(160) : character), 
+              child);
+        });
+        Element.remove(child);
+      }
+    });
+  },
+  multiple: function(element, effect) {
+    var elements;
+    if(((typeof element == 'object') || 
+        (typeof element == 'function')) && 
+       (element.length))
+      elements = element;
+    else
+      elements = $(element).childNodes;
+      
+    var options = Object.extend({
+      speed: 0.1,
+      delay: 0.0
+    }, arguments[2] || {});
+    var masterDelay = options.delay;
+
+    $A(elements).each( function(element, index) {
+      new effect(element, Object.extend(options, { delay: index * options.speed + masterDelay }));
+    });
+  },
+  PAIRS: {
+    'slide':  ['SlideDown','SlideUp'],
+    'blind':  ['BlindDown','BlindUp'],
+    'appear': ['Appear','Fade']
+  },
+  toggle: function(element, effect) {
+    element = $(element);
+    effect = (effect || 'appear').toLowerCase();
+    var options = Object.extend({
+      queue: { position:'end', scope:(element.id || 'global') }
+    }, arguments[2] || {});
+    Effect[Element.visible(element) ? 
+      Effect.PAIRS[effect][1] : Effect.PAIRS[effect][0]](element, options);
+  }
+};
+
+var Effect2 = Effect; // deprecated
+
+/* ------------- transitions ------------- */
+
+Effect.Transitions = {}
+
+Effect.Transitions.linear = function(pos) {
+  return pos;
+}
+Effect.Transitions.sinoidal = function(pos) {
+  return (-Math.cos(pos*Math.PI)/2) + 0.5;
+}
+Effect.Transitions.reverse  = function(pos) {
+  return 1-pos;
+}
+Effect.Transitions.flicker = function(pos) {
+  return ((-Math.cos(pos*Math.PI)/4) + 0.75) + Math.random()/4;
+}
+Effect.Transitions.wobble = function(pos) {
+  return (-Math.cos(pos*Math.PI*(9*pos))/2) + 0.5;
+}
+Effect.Transitions.pulse = function(pos) {
+  return (Math.floor(pos*10) % 2 == 0 ? 
+    (pos*10-Math.floor(pos*10)) : 1-(pos*10-Math.floor(pos*10)));
+}
+Effect.Transitions.none = function(pos) {
+  return 0;
+}
+Effect.Transitions.full = function(pos) {
+  return 1;
+}
+
+/* ------------- core effects ------------- */
+
+Effect.ScopedQueue = Class.create();
+Object.extend(Object.extend(Effect.ScopedQueue.prototype, Enumerable), {
+  initialize: function() {
+    this.effects  = [];
+    this.interval = null;
+  },
+  _each: function(iterator) {
+    this.effects._each(iterator);
+  },
+  add: function(effect) {
+    var timestamp = new Date().getTime();
+    
+    var position = (typeof effect.options.queue == 'string') ? 
+      effect.options.queue : effect.options.queue.position;
+    
+    switch(position) {
+      case 'front':
+        // move unstarted effects after this effect  
+        this.effects.findAll(function(e){ return e.state=='idle' }).each( function(e) {
+            e.startOn  += effect.finishOn;
+            e.finishOn += effect.finishOn;
+          });
+        break;
+      case 'end':
+        // start effect after last queued effect has finished
+        timestamp = this.effects.pluck('finishOn').max() || timestamp;
+        break;
+    }
+    
+    effect.startOn  += timestamp;
+    effect.finishOn += timestamp;
+    this.effects.push(effect);
+    if(!this.interval) 
+      this.interval = setInterval(this.loop.bind(this), 40);
+  },
+  remove: function(effect) {
+    this.effects = this.effects.reject(function(e) { return e==effect });
+    if(this.effects.length == 0) {
+      clearInterval(this.interval);
+      this.interval = null;
+    }
+  },
+  loop: function() {
+    var timePos = new Date().getTime();
+    this.effects.invoke('loop', timePos);
+  }
+});
+
+Effect.Queues = {
+  instances: $H(),
+  get: function(queueName) {
+    if(typeof queueName != 'string') return queueName;
+    
+    if(!this.instances[queueName])
+      this.instances[queueName] = new Effect.ScopedQueue();
+      
+    return this.instances[queueName];
+  }
+}
+Effect.Queue = Effect.Queues.get('global');
+
+Effect.DefaultOptions = {
+  transition: Effect.Transitions.sinoidal,
+  duration:   1.0,   // seconds
+  fps:        25.0,  // max. 25fps due to Effect.Queue implementation
+  sync:       false, // true for combining
+  from:       0.0,
+  to:         1.0,
+  delay:      0.0,
+  queue:      'parallel'
+}
+
+Effect.Base = function() {};
+Effect.Base.prototype = {
+  position: null,
+  start: function(options) {
+    this.options      = Object.extend(Object.extend({},Effect.DefaultOptions), options || {});
+    this.currentFrame = 0;
+    this.state        = 'idle';
+    this.startOn      = this.options.delay*1000;
+    this.finishOn     = this.startOn + (this.options.duration*1000);
+    this.event('beforeStart');
+    if(!this.options.sync)
+      Effect.Queues.get(typeof this.options.queue == 'string' ? 
+        'global' : this.options.queue.scope).add(this);
+  },
+  loop: function(timePos) {
+    if(timePos >= this.startOn) {
+      if(timePos >= this.finishOn) {
+        this.render(1.0);
+        this.cancel();
+        this.event('beforeFinish');
+        if(this.finish) this.finish(); 
+        this.event('afterFinish');
+        return;  
+      }
+      var pos   = (timePos - this.startOn) / (this.finishOn - this.startOn);
+      var frame = Math.round(pos * this.options.fps * this.options.duration);
+      if(frame > this.currentFrame) {
+        this.render(pos);
+        this.currentFrame = frame;
+      }
+    }
+  },
+  render: function(pos) {
+    if(this.state == 'idle') {
+      this.state = 'running';
+      this.event('beforeSetup');
+      if(this.setup) this.setup();
+      this.event('afterSetup');
+    }
+    if(this.state == 'running') {
+      if(this.options.transition) pos = this.options.transition(pos);
+      pos *= (this.options.to-this.options.from);
+      pos += this.options.from;
+      this.position = pos;
+      this.event('beforeUpdate');
+      if(this.update) this.update(pos);
+      this.event('afterUpdate');
+    }
+  },
+  cancel: function() {
+    if(!this.options.sync)
+      Effect.Queues.get(typeof this.options.queue == 'string' ? 
+        'global' : this.options.queue.scope).remove(this);
+    this.state = 'finished';
+  },
+  event: function(eventName) {
+    if(this.options[eventName + 'Internal']) this.options[eventName + 'Internal'](this);
+    if(this.options[eventName]) this.options[eventName](this);
+  },
+  inspect: function() {
+    return '#<Effect:' + $H(this).inspect() + ',options:' + $H(this.options).inspect() + '>';
+  }
+}
+
+Effect.Parallel = Class.create();
+Object.extend(Object.extend(Effect.Parallel.prototype, Effect.Base.prototype), {
+  initialize: function(effects) {
+    this.effects = effects || [];
+    this.start(arguments[1]);
+  },
+  update: function(position) {
+    this.effects.invoke('render', position);
+  },
+  finish: function(position) {
+    this.effects.each( function(effect) {
+      effect.render(1.0);
+      effect.cancel();
+      effect.event('beforeFinish');
+      if(effect.finish) effect.finish(position);
+      effect.event('afterFinish');
+    });
+  }
+});
+
+Effect.Opacity = Class.create();
+Object.extend(Object.extend(Effect.Opacity.prototype, Effect.Base.prototype), {
+  initialize: function(element) {
+    this.element = $(element);
+    // make this work on IE on elements without 'layout'
+    if(/MSIE/.test(navigator.userAgent) && (!this.element.hasLayout))
+      Element.setStyle(this.element, {zoom: 1});
+    var options = Object.extend({
+      from: Element.getOpacity(this.element) || 0.0,
+      to:   1.0
+    }, arguments[1] || {});
+    this.start(options);
+  },
+  update: function(position) {
+    Element.setOpacity(this.element, position);
+  }
+});
+
+Effect.Move = Class.create();
+Object.extend(Object.extend(Effect.Move.prototype, Effect.Base.prototype), {
+  initialize: function(element) {
+    this.element = $(element);
+    var options = Object.extend({
+      x:    0,
+      y:    0,
+      mode: 'relative'
+    }, arguments[1] || {});
+    this.start(options);
+  },
+  setup: function() {
+    // Bug in Opera: Opera returns the "real" position of a static element or
+    // relative element that does not have top/left explicitly set.
+    // ==> Always set top and left for position relative elements in your stylesheets 
+    // (to 0 if you do not need them) 
+    Element.makePositioned(this.element);
+    this.originalLeft = parseFloat(Element.getStyle(this.element,'left') || '0');
+    this.originalTop  = parseFloat(Element.getStyle(this.element,'top')  || '0');
+    if(this.options.mode == 'absolute') {
+      // absolute movement, so we need to calc deltaX and deltaY
+      this.options.x = this.options.x - this.originalLeft;
+      this.options.y = this.options.y - this.originalTop;
+    }
+  },
+  update: function(position) {
+    Element.setStyle(this.element, {
+      left: this.options.x  * position + this.originalLeft + 'px',
+      top:  this.options.y  * position + this.originalTop  + 'px'
+    });
+  }
+});
+
+// for backwards compatibility
+Effect.MoveBy = function(element, toTop, toLeft) {
+  return new Effect.Move(element, 
+    Object.extend({ x: toLeft, y: toTop }, arguments[3] || {}));
+};
+
+Effect.Scale = Class.create();
+Object.extend(Object.extend(Effect.Scale.prototype, Effect.Base.prototype), {
+  initialize: function(element, percent) {
+    this.element = $(element)
+    var options = Object.extend({
+      scaleX: true,
+      scaleY: true,
+      scaleContent: true,
+      scaleFromCenter: false,
+      scaleMode: 'box',        // 'box' or 'contents' or {} with provided values
+      scaleFrom: 100.0,
+      scaleTo:   percent
+    }, arguments[2] || {});
+    this.start(options);
+  },
+  setup: function() {
+    this.restoreAfterFinish = this.options.restoreAfterFinish || false;
+    this.elementPositioning = Element.getStyle(this.element,'position');
+    
+    this.originalStyle = {};
+    ['top','left','width','height','fontSize'].each( function(k) {
+      this.originalStyle[k] = this.element.style[k];
+    }.bind(this));
+      
+    this.originalTop  = this.element.offsetTop;
+    this.originalLeft = this.element.offsetLeft;
+    
+    var fontSize = Element.getStyle(this.element,'font-size') || '100%';
+    ['em','px','%'].each( function(fontSizeType) {
+      if(fontSize.indexOf(fontSizeType)>0) {
+        this.fontSize     = parseFloat(fontSize);
+        this.fontSizeType = fontSizeType;
+      }
+    }.bind(this));
+    
+    this.factor = (this.options.scaleTo - this.options.scaleFrom)/100;
+    
+    this.dims = null;
+    if(this.options.scaleMode=='box')
+      this.dims = [this.element.offsetHeight, this.element.offsetWidth];
+    if(/^content/.test(this.options.scaleMode))
+      this.dims = [this.element.scrollHeight, this.element.scrollWidth];
+    if(!this.dims)
+      this.dims = [this.options.scaleMode.originalHeight,
+                   this.options.scaleMode.originalWidth];
+  },
+  update: function(position) {
+    var currentScale = (this.options.scaleFrom/100.0) + (this.factor * position);
+    if(this.options.scaleContent && this.fontSize)
+      Element.setStyle(this.element, {fontSize: this.fontSize * currentScale + this.fontSizeType });
+    this.setDimensions(this.dims[0] * currentScale, this.dims[1] * currentScale);
+  },
+  finish: function(position) {
+    if (this.restoreAfterFinish) Element.setStyle(this.element, this.originalStyle);
+  },
+  setDimensions: function(height, width) {
+    var d = {};
+    if(this.options.scaleX) d.width = width + 'px';
+    if(this.options.scaleY) d.height = height + 'px';
+    if(this.options.scaleFromCenter) {
+      var topd  = (height - this.dims[0])/2;
+      var leftd = (width  - this.dims[1])/2;
+      if(this.elementPositioning == 'absolute') {
+        if(this.options.scaleY) d.top = this.originalTop-topd + 'px';
+        if(this.options.scaleX) d.left = this.originalLeft-leftd + 'px';
+      } else {
+        if(this.options.scaleY) d.top = -topd + 'px';
+        if(this.options.scaleX) d.left = -leftd + 'px';
+      }
+    }
+    Element.setStyle(this.element, d);
+  }
+});
+
+Effect.Highlight = Class.create();
+Object.extend(Object.extend(Effect.Highlight.prototype, Effect.Base.prototype), {
+  initialize: function(element) {
+    this.element = $(element);
+    var options = Object.extend({ startcolor: '#ffff99' }, arguments[1] || {});
+    this.start(options);
+  },
+  setup: function() {
+    // Prevent executing on elements not in the layout flow
+    if(Element.getStyle(this.element, 'display')=='none') { this.cancel(); return; }
+    // Disable background image during the effect
+    this.oldStyle = {
+      backgroundImage: Element.getStyle(this.element, 'background-image') };
+    Element.setStyle(this.element, {backgroundImage: 'none'});
+    if(!this.options.endcolor)
+      this.options.endcolor = Element.getStyle(this.element, 'background-color').parseColor('#ffffff');
+    if(!this.options.restorecolor)
+      this.options.restorecolor = Element.getStyle(this.element, 'background-color');
+    // init color calculations
+    this._base  = $R(0,2).map(function(i){ return parseInt(this.options.startcolor.slice(i*2+1,i*2+3),16) }.bind(this));
+    this._delta = $R(0,2).map(function(i){ return parseInt(this.options.endcolor.slice(i*2+1,i*2+3),16)-this._base[i] }.bind(this));
+  },
+  update: function(position) {
+    Element.setStyle(this.element,{backgroundColor: $R(0,2).inject('#',function(m,v,i){
+      return m+(Math.round(this._base[i]+(this._delta[i]*position)).toColorPart()); }.bind(this)) });
+  },
+  finish: function() {
+    Element.setStyle(this.element, Object.extend(this.oldStyle, {
+      backgroundColor: this.options.restorecolor
+    }));
+  }
+});
+
+Effect.ScrollTo = Class.create();
+Object.extend(Object.extend(Effect.ScrollTo.prototype, Effect.Base.prototype), {
+  initialize: function(element) {
+    this.element = $(element);
+    this.start(arguments[1] || {});
+  },
+  setup: function() {
+    Position.prepare();
+    var offsets = Position.cumulativeOffset(this.element);
+    if(this.options.offset) offsets[1] += this.options.offset;
+    var max = window.innerHeight ? 
+      window.height - window.innerHeight :
+      document.body.scrollHeight - 
+        (document.documentElement.clientHeight ? 
+          document.documentElement.clientHeight : document.body.clientHeight);
+    this.scrollStart = Position.deltaY;
+    this.delta = (offsets[1] > max ? max : offsets[1]) - this.scrollStart;
+  },
+  update: function(position) {
+    Position.prepare();
+    window.scrollTo(Position.deltaX, 
+      this.scrollStart + (position*this.delta));
+  }
+});
+
+/* ------------- combination effects ------------- */
+
+Effect.Fade = function(element) {
+  var oldOpacity = Element.getInlineOpacity(element);
+  var options = Object.extend({
+  from: Element.getOpacity(element) || 1.0,
+  to:   0.0,
+  afterFinishInternal: function(effect) { with(Element) { 
+    if(effect.options.to!=0) return;
+    hide(effect.element);
+    setStyle(effect.element, {opacity: oldOpacity}); }}
+  }, arguments[1] || {});
+  return new Effect.Opacity(element,options);
+}
+
+Effect.Appear = function(element) {
+  var options = Object.extend({
+  from: (Element.getStyle(element, 'display') == 'none' ? 0.0 : Element.getOpacity(element) || 0.0),
+  to:   1.0,
+  beforeSetup: function(effect) { with(Element) {
+    setOpacity(effect.element, effect.options.from);
+    show(effect.element); }}
+  }, arguments[1] || {});
+  return new Effect.Opacity(element,options);
+}
+
+Effect.Puff = function(element) {
+  element = $(element);
+  var oldStyle = { opacity: Element.getInlineOpacity(element), position: Element.getStyle(element, 'position') };
+  return new Effect.Parallel(
+   [ new Effect.Scale(element, 200, 
+      { sync: true, scaleFromCenter: true, scaleContent: true, restoreAfterFinish: true }), 
+     new Effect.Opacity(element, { sync: true, to: 0.0 } ) ], 
+     Object.extend({ duration: 1.0, 
+      beforeSetupInternal: function(effect) { with(Element) {
+        setStyle(effect.effects[0].element, {position: 'absolute'}); }},
+      afterFinishInternal: function(effect) { with(Element) {
+         hide(effect.effects[0].element);
+         setStyle(effect.effects[0].element, oldStyle); }}
+     }, arguments[1] || {})
+   );
+}
+
+Effect.BlindUp = function(element) {
+  element = $(element);
+  Element.makeClipping(element);
+  return new Effect.Scale(element, 0, 
+    Object.extend({ scaleContent: false, 
+      scaleX: false, 
+      restoreAfterFinish: true,
+      afterFinishInternal: function(effect) { with(Element) {
+        [hide, undoClipping].call(effect.element); }} 
+    }, arguments[1] || {})
+  );
+}
+
+Effect.BlindDown = function(element) {
+  element = $(element);
+  var oldHeight = Element.getStyle(element, 'height');
+  var elementDimensions = Element.getDimensions(element);
+  return new Effect.Scale(element, 100, 
+    Object.extend({ scaleContent: false, 
+      scaleX: false,
+      scaleFrom: 0,
+      scaleMode: {originalHeight: elementDimensions.height, originalWidth: elementDimensions.width},
+      restoreAfterFinish: true,
+      afterSetup: function(effect) { with(Element) {
+        makeClipping(effect.element);
+        setStyle(effect.element, {height: '0px'});
+        show(effect.element); 
+      }},  
+      afterFinishInternal: function(effect) { with(Element) {
+        undoClipping(effect.element);
+        setStyle(effect.element, {height: oldHeight});
+      }}
+    }, arguments[1] || {})
+  );
+}
+
+Effect.SwitchOff = function(element) {
+  element = $(element);
+  var oldOpacity = Element.getInlineOpacity(element);
+  return new Effect.Appear(element, { 
+    duration: 0.4,
+    from: 0,
+    transition: Effect.Transitions.flicker,
+    afterFinishInternal: function(effect) {
+      new Effect.Scale(effect.element, 1, { 
+        duration: 0.3, scaleFromCenter: true,
+        scaleX: false, scaleContent: false, restoreAfterFinish: true,
+        beforeSetup: function(effect) { with(Element) {
+          [makePositioned,makeClipping].call(effect.element);
+        }},
+        afterFinishInternal: function(effect) { with(Element) {
+          [hide,undoClipping,undoPositioned].call(effect.element);
+          setStyle(effect.element, {opacity: oldOpacity});
+        }}
+      })
+    }
+  });
+}
+
+Effect.DropOut = function(element) {
+  element = $(element);
+  var oldStyle = {
+    top: Element.getStyle(element, 'top'),
+    left: Element.getStyle(element, 'left'),
+    opacity: Element.getInlineOpacity(element) };
+  return new Effect.Parallel(
+    [ new Effect.Move(element, {x: 0, y: 100, sync: true }), 
+      new Effect.Opacity(element, { sync: true, to: 0.0 }) ],
+    Object.extend(
+      { duration: 0.5,
+        beforeSetup: function(effect) { with(Element) {
+          makePositioned(effect.effects[0].element); }},
+        afterFinishInternal: function(effect) { with(Element) {
+          [hide, undoPositioned].call(effect.effects[0].element);
+          setStyle(effect.effects[0].element, oldStyle); }} 
+      }, arguments[1] || {}));
+}
+
+Effect.Shake = function(element) {
+  element = $(element);
+  var oldStyle = {
+    top: Element.getStyle(element, 'top'),
+    left: Element.getStyle(element, 'left') };
+	  return new Effect.Move(element, 
+	    { x:  20, y: 0, duration: 0.05, afterFinishInternal: function(effect) {
+	  new Effect.Move(effect.element,
+	    { x: -40, y: 0, duration: 0.1,  afterFinishInternal: function(effect) {
+	  new Effect.Move(effect.element,
+	    { x:  40, y: 0, duration: 0.1,  afterFinishInternal: function(effect) {
+	  new Effect.Move(effect.element,
+	    { x: -40, y: 0, duration: 0.1,  afterFinishInternal: function(effect) {
+	  new Effect.Move(effect.element,
+	    { x:  40, y: 0, duration: 0.1,  afterFinishInternal: function(effect) {
+	  new Effect.Move(effect.element,
+	    { x: -20, y: 0, duration: 0.05, afterFinishInternal: function(effect) { with(Element) {
+        undoPositioned(effect.element);
+        setStyle(effect.element, oldStyle);
+  }}}) }}) }}) }}) }}) }});
+}
+
+Effect.SlideDown = function(element) {
+  element = $(element);
+  Element.cleanWhitespace(element);
+  // SlideDown need to have the content of the element wrapped in a container element with fixed height!
+  var oldInnerBottom = Element.getStyle(element.firstChild, 'bottom');
+  var elementDimensions = Element.getDimensions(element);
+  return new Effect.Scale(element, 100, Object.extend({ 
+    scaleContent: false, 
+    scaleX: false, 
+    scaleFrom: 0,
+    scaleMode: {originalHeight: elementDimensions.height, originalWidth: elementDimensions.width},
+    restoreAfterFinish: true,
+    afterSetup: function(effect) { with(Element) {
+      makePositioned(effect.element);
+      makePositioned(effect.element.firstChild);
+      if(window.opera) setStyle(effect.element, {top: ''});
+      makeClipping(effect.element);
+      setStyle(effect.element, {height: '0px'});
+      show(element); }},
+    afterUpdateInternal: function(effect) { with(Element) {
+      setStyle(effect.element.firstChild, {bottom:
+        (effect.dims[0] - effect.element.clientHeight) + 'px' }); }},
+    afterFinishInternal: function(effect) { with(Element) {
+      undoClipping(effect.element); 
+      undoPositioned(effect.element.firstChild);
+      undoPositioned(effect.element);
+      setStyle(effect.element.firstChild, {bottom: oldInnerBottom}); }}
+    }, arguments[1] || {})
+  );
+}
+  
+Effect.SlideUp = function(element) {
+  element = $(element);
+  Element.cleanWhitespace(element);
+  var oldInnerBottom = Element.getStyle(element.firstChild, 'bottom');
+  return new Effect.Scale(element, 0, 
+   Object.extend({ scaleContent: false, 
+    scaleX: false, 
+    scaleMode: 'box',
+    scaleFrom: 100,
+    restoreAfterFinish: true,
+    beforeStartInternal: function(effect) { with(Element) {
+      makePositioned(effect.element);
+      makePositioned(effect.element.firstChild);
+      if(window.opera) setStyle(effect.element, {top: ''});
+      makeClipping(effect.element);
+      show(element); }},  
+    afterUpdateInternal: function(effect) { with(Element) {
+      setStyle(effect.element.firstChild, {bottom:
+        (effect.dims[0] - effect.element.clientHeight) + 'px' }); }},
+    afterFinishInternal: function(effect) { with(Element) {
+        [hide, undoClipping].call(effect.element); 
+        undoPositioned(effect.element.firstChild);
+        undoPositioned(effect.element);
+        setStyle(effect.element.firstChild, {bottom: oldInnerBottom}); }}
+   }, arguments[1] || {})
+  );
+}
+
+// Bug in opera makes the TD containing this element expand for a instance after finish 
+Effect.Squish = function(element) {
+  return new Effect.Scale(element, window.opera ? 1 : 0, 
+    { restoreAfterFinish: true,
+      beforeSetup: function(effect) { with(Element) {
+        makeClipping(effect.element); }},  
+      afterFinishInternal: function(effect) { with(Element) {
+        hide(effect.element); 
+        undoClipping(effect.element); }}
+  });
+}
+
+Effect.Grow = function(element) {
+  element = $(element);
+  var options = Object.extend({
+    direction: 'center',
+    moveTransistion: Effect.Transitions.sinoidal,
+    scaleTransition: Effect.Transitions.sinoidal,
+    opacityTransition: Effect.Transitions.full
+  }, arguments[1] || {});
+  var oldStyle = {
+    top: element.style.top,
+    left: element.style.left,
+    height: element.style.height,
+    width: element.style.width,
+    opacity: Element.getInlineOpacity(element) };
+
+  var dims = Element.getDimensions(element);    
+  var initialMoveX, initialMoveY;
+  var moveX, moveY;
+  
+  switch (options.direction) {
+    case 'top-left':
+      initialMoveX = initialMoveY = moveX = moveY = 0; 
+      break;
+    case 'top-right':
+      initialMoveX = dims.width;
+      initialMoveY = moveY = 0;
+      moveX = -dims.width;
+      break;
+    case 'bottom-left':
+      initialMoveX = moveX = 0;
+      initialMoveY = dims.height;
+      moveY = -dims.height;
+      break;
+    case 'bottom-right':
+      initialMoveX = dims.width;
+      initialMoveY = dims.height;
+      moveX = -dims.width;
+      moveY = -dims.height;
+      break;
+    case 'center':
+      initialMoveX = dims.width / 2;
+      initialMoveY = dims.height / 2;
+      moveX = -dims.width / 2;
+      moveY = -dims.height / 2;
+      break;
+  }
+  
+  return new Effect.Move(element, {
+    x: initialMoveX,
+    y: initialMoveY,
+    duration: 0.01, 
+    beforeSetup: function(effect) { with(Element) {
+      hide(effect.element);
+      makeClipping(effect.element);
+      makePositioned(effect.element);
+    }},
+    afterFinishInternal: function(effect) {
+      new Effect.Parallel(
+        [ new Effect.Opacity(effect.element, { sync: true, to: 1.0, from: 0.0, transition: options.opacityTransition }),
+          new Effect.Move(effect.element, { x: moveX, y: moveY, sync: true, transition: options.moveTransition }),
+          new Effect.Scale(effect.element, 100, {
+            scaleMode: { originalHeight: dims.height, originalWidth: dims.width }, 
+            sync: true, scaleFrom: window.opera ? 1 : 0, transition: options.scaleTransition, restoreAfterFinish: true})
+        ], Object.extend({
+             beforeSetup: function(effect) { with(Element) {
+               setStyle(effect.effects[0].element, {height: '0px'});
+               show(effect.effects[0].element); }},
+             afterFinishInternal: function(effect) { with(Element) {
+               [undoClipping, undoPositioned].call(effect.effects[0].element); 
+               setStyle(effect.effects[0].element, oldStyle); }}
+           }, options)
+      )
+    }
+  });
+}
+
+Effect.Shrink = function(element) {
+  element = $(element);
+  var options = Object.extend({
+    direction: 'center',
+    moveTransistion: Effect.Transitions.sinoidal,
+    scaleTransition: Effect.Transitions.sinoidal,
+    opacityTransition: Effect.Transitions.none
+  }, arguments[1] || {});
+  var oldStyle = {
+    top: element.style.top,
+    left: element.style.left,
+    height: element.style.height,
+    width: element.style.width,
+    opacity: Element.getInlineOpacity(element) };
+
+  var dims = Element.getDimensions(element);
+  var moveX, moveY;
+  
+  switch (options.direction) {
+    case 'top-left':
+      moveX = moveY = 0;
+      break;
+    case 'top-right':
+      moveX = dims.width;
+      moveY = 0;
+      break;
+    case 'bottom-left':
+      moveX = 0;
+      moveY = dims.height;
+      break;
+    case 'bottom-right':
+      moveX = dims.width;
+      moveY = dims.height;
+      break;
+    case 'center':  
+      moveX = dims.width / 2;
+      moveY = dims.height / 2;
+      break;
+  }
+  
+  return new Effect.Parallel(
+    [ new Effect.Opacity(element, { sync: true, to: 0.0, from: 1.0, transition: options.opacityTransition }),
+      new Effect.Scale(element, window.opera ? 1 : 0, { sync: true, transition: options.scaleTransition, restoreAfterFinish: true}),
+      new Effect.Move(element, { x: moveX, y: moveY, sync: true, transition: options.moveTransition })
+    ], Object.extend({            
+         beforeStartInternal: function(effect) { with(Element) {
+           [makePositioned, makeClipping].call(effect.effects[0].element) }},
+         afterFinishInternal: function(effect) { with(Element) {
+           [hide, undoClipping, undoPositioned].call(effect.effects[0].element);
+           setStyle(effect.effects[0].element, oldStyle); }}
+       }, options)
+  );
+}
+
+Effect.Pulsate = function(element) {
+  element = $(element);
+  var options    = arguments[1] || {};
+  var oldOpacity = Element.getInlineOpacity(element);
+  var transition = options.transition || Effect.Transitions.sinoidal;
+  var reverser   = function(pos){ return transition(1-Effect.Transitions.pulse(pos)) };
+  reverser.bind(transition);
+  return new Effect.Opacity(element, 
+    Object.extend(Object.extend({  duration: 3.0, from: 0,
+      afterFinishInternal: function(effect) { Element.setStyle(effect.element, {opacity: oldOpacity}); }
+    }, options), {transition: reverser}));
+}
+
+Effect.Fold = function(element) {
+  element = $(element);
+  var oldStyle = {
+    top: element.style.top,
+    left: element.style.left,
+    width: element.style.width,
+    height: element.style.height };
+  Element.makeClipping(element);
+  return new Effect.Scale(element, 5, Object.extend({   
+    scaleContent: false,
+    scaleX: false,
+    afterFinishInternal: function(effect) {
+    new Effect.Scale(element, 1, { 
+      scaleContent: false, 
+      scaleY: false,
+      afterFinishInternal: function(effect) { with(Element) {
+        [hide, undoClipping].call(effect.element); 
+        setStyle(effect.element, oldStyle);
+      }} });
+  }}, arguments[1] || {}));
+}

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/lightbox.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/lightbox.js	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/lightbox.js	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,689 @@
+// -----------------------------------------------------------------------------------
+//
+//	Lightbox v2.02
+//	by Lokesh Dhakar - http://www.huddletogether.com
+//	3/31/06
+//
+//	For more information on this script, visit:
+//	http://huddletogether.com/projects/lightbox2/
+//
+//	Licensed under the Creative Commons Attribution 2.5 License - http://creativecommons.org/licenses/by/2.5/
+//	
+//	Credit also due to those who have helped, inspired, and made their code available to the public.
+//	Including: Scott Upton(uptonic.com), Peter-Paul Koch(quirksmode.org), Thomas Fuchs(mir.aculo.us), and others.
+//
+//
+// -----------------------------------------------------------------------------------
+/*
+
+	Table of Contents
+	-----------------
+	Configuration
+	Global Variables
+
+	Extending Built-in Objects	
+	- Object.extend(Element)
+	- Array.prototype.removeDuplicates()
+	- Array.prototype.empty()
+
+	Lightbox Class Declaration
+	- initialize()
+	- start()
+	- changeImage()
+	- resizeImageContainer()
+	- showImage()
+	- updateDetails()
+	- updateNav()
+	- enableKeyboardNav()
+	- disableKeyboardNav()
+	- keyboardAction()
+	- preloadNeighborImages()
+	- end()
+	
+	Miscellaneous Functions
+	- getPageScroll()
+	- getPageSize()
+	- getKey()
+	- listenKey()
+	- showSelectBoxes()
+	- hideSelectBoxes()
+	- pause()
+	- initLightbox()
+	
+	Function Calls
+	- addLoadEvent(initLightbox)
+	
+*/
+// -----------------------------------------------------------------------------------
+
+//
+//	Configuration
+//
+var fileLoadingImage = "skins/default_with_lightbox/images/loading.gif";		
+var fileBottomNavCloseImage = "skins/default_with_lightbox/images/closelabel.gif";
+
+var resizeSpeed = 7;	// controls the speed of the image resizing (1=slowest and 10=fastest)
+
+var borderSize = 10;	//if you adjust the padding in the CSS, you will need to update this variable
+
+// -----------------------------------------------------------------------------------
+
+//
+//	Global Variables
+//
+var imageArray = new Array;
+var activeImage;
+
+if(resizeSpeed > 10){ resizeSpeed = 10;}
+if(resizeSpeed < 1){ resizeSpeed = 1;}
+resizeDuration = (11 - resizeSpeed) * 0.15;
+
+// -----------------------------------------------------------------------------------
+
+//
+//	Additional methods for Element added by SU, Couloir
+//	- further additions by Lokesh Dhakar (huddletogether.com)
+//
+Object.extend(Element, {
+	getWidth: function(element) {
+	   	element = $(element);
+	   	return element.offsetWidth; 
+	},
+	setWidth: function(element,w) {
+	   	element = $(element);
+    	element.style.width = w +"px";
+	},
+	setHeight: function(element,h) {
+   		element = $(element);
+    	element.style.height = h +"px";
+	},
+	setTop: function(element,t) {
+	   	element = $(element);
+    	element.style.top = t +"px";
+	},
+	setSrc: function(element,src) {
+    	element = $(element);
+    	element.src = src; 
+	},
+	setHref: function(element,href) {
+    	element = $(element);
+    	element.href = href; 
+	},
+	setInnerHTML: function(element,content) {
+		element = $(element);
+		element.innerHTML = content;
+	}
+});
+
+// -----------------------------------------------------------------------------------
+
+//
+//	Extending built-in Array object
+//	- array.removeDuplicates()
+//	- array.empty()
+//
+Array.prototype.removeDuplicates = function () {
+	for(i = 1; i < this.length; i++){
+		if(this[i][0] == this[i-1][0]){
+			this.splice(i,1);
+		}
+	}
+}
+
+// -----------------------------------------------------------------------------------
+
+Array.prototype.empty = function () {
+	for(i = 0; i <= this.length; i++){
+		this.shift();
+	}
+}
+
+// -----------------------------------------------------------------------------------
+
+//
+//	Lightbox Class Declaration
+//	- initialize()
+//	- start()
+//	- changeImage()
+//	- resizeImageContainer()
+//	- showImage()
+//	- updateDetails()
+//	- updateNav()
+//	- enableKeyboardNav()
+//	- disableKeyboardNav()
+//	- keyboardNavAction()
+//	- preloadNeighborImages()
+//	- end()
+//
+//	Structuring of code inspired by Scott Upton (http://www.uptonic.com/)
+//
+var Lightbox = Class.create();
+
+Lightbox.prototype = {
+	
+	// initialize()
+	// Constructor runs on completion of the DOM loading. Loops through anchor tags looking for 
+	// 'lightbox' references and applies onclick events to appropriate links. The 2nd section of
+	// the function inserts html at the bottom of the page which is used to display the shadow 
+	// overlay and the image container.
+	//
+	initialize: function() {	
+		if (!document.getElementsByTagName){ return; }
+		var anchors = document.getElementsByTagName('a');
+
+		// loop through all anchor tags
+		for (var i=0; i<anchors.length; i++){
+			var anchor = anchors[i];
+			
+			var relAttribute = String(anchor.getAttribute('rel'));
+			
+			// use the string.match() method to catch 'lightbox' references in the rel attribute
+			if (anchor.getAttribute('href') && (relAttribute.toLowerCase().match('lightbox'))){
+				anchor.onclick = function () {myLightbox.start(this); return false;}
+			}
+		}
+
+		// The rest of this code inserts html at the bottom of the page that looks similar to this:
+		//
+		//	<div id="overlay"></div>
+		//	<div id="lightbox">
+		//		<div id="outerImageContainer">
+		//			<div id="imageContainer">
+		//				<img id="lightboxImage">
+		//				<div style="" id="hoverNav">
+		//					<a href="#" id="prevLink"></a>
+		//					<a href="#" id="nextLink"></a>
+		//				</div>
+		//				<div id="loading">
+		//					<a href="#" id="loadingLink">
+		//						<img src="images/loading.gif">
+		//					</a>
+		//				</div>
+		//			</div>
+		//		</div>
+		//		<div id="imageDataContainer">
+		//			<div id="imageData">
+		//				<div id="imageDetails">
+		//					<span id="caption"></span>
+		//					<span id="numberDisplay"></span>
+		//				</div>
+		//				<div id="bottomNav">
+		//					<a href="#" id="bottomNavClose">
+		//						<img src="images/close.gif">
+		//					</a>
+		//				</div>
+		//			</div>
+		//		</div>
+		//	</div>
+
+
+		var objBody = document.getElementsByTagName("body").item(0);
+		
+		var objOverlay = document.createElement("div");
+		objOverlay.setAttribute('id','overlay');
+		objOverlay.style.display = 'none';
+		objOverlay.onclick = function() { myLightbox.end(); return false; }
+		objBody.appendChild(objOverlay);
+		
+		var objLightbox = document.createElement("div");
+		objLightbox.setAttribute('id','lightbox');
+		objLightbox.style.display = 'none';
+		objBody.appendChild(objLightbox);
+	
+		var objOuterImageContainer = document.createElement("div");
+		objOuterImageContainer.setAttribute('id','outerImageContainer');
+		objLightbox.appendChild(objOuterImageContainer);
+
+		var objImageContainer = document.createElement("div");
+		objImageContainer.setAttribute('id','imageContainer');
+		objOuterImageContainer.appendChild(objImageContainer);
+	
+		var objLightboxImage = document.createElement("img");
+		objLightboxImage.setAttribute('id','lightboxImage');
+		objImageContainer.appendChild(objLightboxImage);
+	
+		var objHoverNav = document.createElement("div");
+		objHoverNav.setAttribute('id','hoverNav');
+		objImageContainer.appendChild(objHoverNav);
+	
+		var objPrevLink = document.createElement("a");
+		objPrevLink.setAttribute('id','prevLink');
+		objPrevLink.setAttribute('href','#');
+		objHoverNav.appendChild(objPrevLink);
+		
+		var objNextLink = document.createElement("a");
+		objNextLink.setAttribute('id','nextLink');
+		objNextLink.setAttribute('href','#');
+		objHoverNav.appendChild(objNextLink);
+	
+		var objLoading = document.createElement("div");
+		objLoading.setAttribute('id','loading');
+		objImageContainer.appendChild(objLoading);
+	
+		var objLoadingLink = document.createElement("a");
+		objLoadingLink.setAttribute('id','loadingLink');
+		objLoadingLink.setAttribute('href','#');
+		objLoadingLink.onclick = function() { myLightbox.end(); return false; }
+		objLoading.appendChild(objLoadingLink);
+	
+		var objLoadingImage = document.createElement("img");
+		objLoadingImage.setAttribute('src', fileLoadingImage);
+		objLoadingLink.appendChild(objLoadingImage);
+
+		var objImageDataContainer = document.createElement("div");
+		objImageDataContainer.setAttribute('id','imageDataContainer');
+		objImageDataContainer.className = 'clearfix';
+		objLightbox.appendChild(objImageDataContainer);
+
+		var objImageData = document.createElement("div");
+		objImageData.setAttribute('id','imageData');
+		objImageDataContainer.appendChild(objImageData);
+	
+		var objImageDetails = document.createElement("div");
+		objImageDetails.setAttribute('id','imageDetails');
+		objImageData.appendChild(objImageDetails);
+	
+		var objCaption = document.createElement("span");
+		objCaption.setAttribute('id','caption');
+		objImageDetails.appendChild(objCaption);
+	
+		var objNumberDisplay = document.createElement("span");
+		objNumberDisplay.setAttribute('id','numberDisplay');
+		objImageDetails.appendChild(objNumberDisplay);
+		
+		var objBottomNav = document.createElement("div");
+		objBottomNav.setAttribute('id','bottomNav');
+		objImageData.appendChild(objBottomNav);
+	
+		var objBottomNavCloseLink = document.createElement("a");
+		objBottomNavCloseLink.setAttribute('id','bottomNavClose');
+		objBottomNavCloseLink.setAttribute('href','#');
+		objBottomNavCloseLink.onclick = function() { myLightbox.end(); return false; }
+		objBottomNav.appendChild(objBottomNavCloseLink);
+	
+		var objBottomNavCloseImage = document.createElement("img");
+		objBottomNavCloseImage.setAttribute('src', fileBottomNavCloseImage);
+		objBottomNavCloseLink.appendChild(objBottomNavCloseImage);
+	},
+	
+	//
+	//	start()
+	//	Display overlay and lightbox. If image is part of a set, add siblings to imageArray.
+	//
+	start: function(imageLink) {	
+
+		hideSelectBoxes();
+
+		// stretch overlay to fill page and fade in
+		var arrayPageSize = getPageSize();
+		Element.setHeight('overlay', arrayPageSize[1]);
+		new Effect.Appear('overlay', { duration: 0.2, from: 0.0, to: 0.8 });
+
+		imageArray = [];
+		imageNum = 0;		
+
+		if (!document.getElementsByTagName){ return; }
+		var anchors = document.getElementsByTagName('a');
+
+		// if image is NOT part of a set..
+		if((imageLink.getAttribute('rel') == 'lightbox')){
+			// add single image to imageArray
+			imageArray.push(new Array(imageLink.getAttribute('href'), imageLink.getAttribute('title')));			
+		} else {
+		// if image is part of a set..
+
+			// loop through anchors, find other images in set, and add them to imageArray
+			for (var i=0; i<anchors.length; i++){
+				var anchor = anchors[i];
+				if (anchor.getAttribute('href') && (anchor.getAttribute('rel') == imageLink.getAttribute('rel'))){
+					imageArray.push(new Array(anchor.getAttribute('href'), anchor.getAttribute('title')));
+				}
+			}
+			imageArray.removeDuplicates();
+			while(imageArray[imageNum][0] != imageLink.getAttribute('href')) { imageNum++;}
+		}
+
+		// calculate top offset for the lightbox and display 
+		var arrayPageSize = getPageSize();
+		var arrayPageScroll = getPageScroll();
+		var lightboxTop = arrayPageScroll[1] + (arrayPageSize[3] / 15);
+
+		Element.setTop('lightbox', lightboxTop);
+		Element.show('lightbox');
+		
+		this.changeImage(imageNum);
+	},
+
+	//
+	//	changeImage()
+	//	Hide most elements and preload image in preparation for resizing image container.
+	//
+	changeImage: function(imageNum) {	
+		
+		activeImage = imageNum;	// update global var
+
+		// hide elements during transition
+		Element.show('loading');
+		Element.hide('lightboxImage');
+		Element.hide('hoverNav');
+		Element.hide('prevLink');
+		Element.hide('nextLink');
+		Element.hide('imageDataContainer');
+		Element.hide('numberDisplay');		
+		
+		imgPreloader = new Image();
+		
+		// once image is preloaded, resize image container
+		imgPreloader.onload=function(){
+			Element.setSrc('lightboxImage', imageArray[activeImage][0]);
+			myLightbox.resizeImageContainer(imgPreloader.width, imgPreloader.height);
+		}
+		imgPreloader.src = imageArray[activeImage][0];
+	},
+
+	//
+	//	resizeImageContainer()
+	//
+	resizeImageContainer: function( imgWidth, imgHeight) {
+
+		// get current height and width
+		this.wCur = Element.getWidth('outerImageContainer');
+		this.hCur = Element.getHeight('outerImageContainer');
+
+		// scalars based on change from old to new
+		this.xScale = ((imgWidth  + (borderSize * 2)) / this.wCur) * 100;
+		this.yScale = ((imgHeight  + (borderSize * 2)) / this.hCur) * 100;
+
+		// calculate size difference between new and old image, and resize if necessary
+		wDiff = (this.wCur - borderSize * 2) - imgWidth;
+		hDiff = (this.hCur - borderSize * 2) - imgHeight;
+
+		if(!( hDiff == 0)){ new Effect.Scale('outerImageContainer', this.yScale, {scaleX: false, duration: resizeDuration, queue: 'front'}); }
+		if(!( wDiff == 0)){ new Effect.Scale('outerImageContainer', this.xScale, {scaleY: false, delay: resizeDuration, duration: resizeDuration}); }
+
+		// if new and old image are same size and no scaling transition is necessary, 
+		// do a quick pause to prevent image flicker.
+		if((hDiff == 0) && (wDiff == 0)){
+			if (navigator.appVersion.indexOf("MSIE")!=-1){ pause(250); } else { pause(100);} 
+		}
+
+		Element.setHeight('prevLink', imgHeight);
+		Element.setHeight('nextLink', imgHeight);
+		Element.setWidth( 'imageDataContainer', imgWidth + (borderSize * 2));
+
+		this.showImage();
+	},
+	
+	//
+	//	showImage()
+	//	Display image and begin preloading neighbors.
+	//
+	showImage: function(){
+		Element.hide('loading');
+		new Effect.Appear('lightboxImage', { duration: 0.5, queue: 'end', afterFinish: function(){	myLightbox.updateDetails(); } });
+		this.preloadNeighborImages();
+	},
+
+	//
+	//	updateDetails()
+	//	Display caption, image number, and bottom nav.
+	//
+	updateDetails: function() {
+	
+		Element.show('caption');
+		Element.setInnerHTML( 'caption', imageArray[activeImage][1]);
+		
+		// if image is part of set display 'Image x of x' 
+		if(imageArray.length > 1){
+			Element.show('numberDisplay');
+			Element.setInnerHTML( 'numberDisplay', "Image " + eval(activeImage + 1) + " of " + imageArray.length);
+		}
+
+		new Effect.Parallel(
+			[ new Effect.SlideDown( 'imageDataContainer', { sync: true, duration: resizeDuration + 0.25, from: 0.0, to: 1.0 }), 
+			  new Effect.Appear('imageDataContainer', { sync: true, duration: 1.0 }) ], 
+			{ duration: 0.65, afterFinish: function() { myLightbox.updateNav();} } 
+		);
+	},
+
+	//
+	//	updateNav()
+	//	Display appropriate previous and next hover navigation.
+	//
+	updateNav: function() {
+
+		Element.show('hoverNav');				
+
+		// if not first image in set, display prev image button
+		if(activeImage != 0){
+			Element.show('prevLink');
+			document.getElementById('prevLink').onclick = function() {
+				myLightbox.changeImage(activeImage - 1); return false;
+			}
+		}
+
+		// if not last image in set, display next image button
+		if(activeImage != (imageArray.length - 1)){
+			Element.show('nextLink');
+			document.getElementById('nextLink').onclick = function() {
+				myLightbox.changeImage(activeImage + 1); return false;
+			}
+		}
+		
+		this.enableKeyboardNav();
+	},
+
+	//
+	//	enableKeyboardNav()
+	//
+	enableKeyboardNav: function() {
+		document.onkeydown = this.keyboardAction; 
+	},
+
+	//
+	//	disableKeyboardNav()
+	//
+	disableKeyboardNav: function() {
+		document.onkeydown = '';
+	},
+
+	//
+	//	keyboardAction()
+	//
+	keyboardAction: function(e) {
+		if (e == null) { // ie
+			keycode = event.keyCode;
+		} else { // mozilla
+			keycode = e.which;
+		}
+
+		key = String.fromCharCode(keycode).toLowerCase();
+		
+		if((key == 'x') || (key == 'o') || (key == 'c')){	// close lightbox
+			myLightbox.end();
+		} else if(key == 'p'){	// display previous image
+			if(activeImage != 0){
+				myLightbox.disableKeyboardNav();
+				myLightbox.changeImage(activeImage - 1);
+			}
+		} else if(key == 'n'){	// display next image
+			if(activeImage != (imageArray.length - 1)){
+				myLightbox.disableKeyboardNav();
+				myLightbox.changeImage(activeImage + 1);
+			}
+		}
+
+
+	},
+
+	//
+	//	preloadNeighborImages()
+	//	Preload previous and next images.
+	//
+	preloadNeighborImages: function(){
+
+		if((imageArray.length - 1) > activeImage){
+			preloadNextImage = new Image();
+			preloadNextImage.src = imageArray[activeImage + 1][0];
+		}
+		if(activeImage > 0){
+			preloadPrevImage = new Image();
+			preloadPrevImage.src = imageArray[activeImage - 1][0];
+		}
+	
+	},
+
+	//
+	//	end()
+	//
+	end: function() {
+		this.disableKeyboardNav();
+		Element.hide('lightbox');
+		new Effect.Fade('overlay', { duration: 0.2});
+		showSelectBoxes();
+	}
+}
+
+// -----------------------------------------------------------------------------------
+
+//
+// getPageScroll()
+// Returns array with x,y page scroll values.
+// Core code from - quirksmode.org
+//
+function getPageScroll(){
+
+	var yScroll;
+
+	if (self.pageYOffset) {
+		yScroll = self.pageYOffset;
+	} else if (document.documentElement && document.documentElement.scrollTop){	 // Explorer 6 Strict
+		yScroll = document.documentElement.scrollTop;
+	} else if (document.body) {// all other Explorers
+		yScroll = document.body.scrollTop;
+	}
+
+	arrayPageScroll = new Array('',yScroll) 
+	return arrayPageScroll;
+}
+
+// -----------------------------------------------------------------------------------
+
+//
+// getPageSize()
+// Returns array with page width, height and window width, height
+// Core code from - quirksmode.org
+// Edit for Firefox by pHaez
+//
+function getPageSize(){
+	
+	var xScroll, yScroll;
+	
+	if (window.innerHeight && window.scrollMaxY) {	
+		xScroll = document.body.scrollWidth;
+		yScroll = window.innerHeight + window.scrollMaxY;
+	} else if (document.body.scrollHeight > document.body.offsetHeight){ // all but Explorer Mac
+		xScroll = document.body.scrollWidth;
+		yScroll = document.body.scrollHeight;
+	} else { // Explorer Mac...would also work in Explorer 6 Strict, Mozilla and Safari
+		xScroll = document.body.offsetWidth;
+		yScroll = document.body.offsetHeight;
+	}
+	
+	var windowWidth, windowHeight;
+	if (self.innerHeight) {	// all except Explorer
+		windowWidth = self.innerWidth;
+		windowHeight = self.innerHeight;
+	} else if (document.documentElement && document.documentElement.clientHeight) { // Explorer 6 Strict Mode
+		windowWidth = document.documentElement.clientWidth;
+		windowHeight = document.documentElement.clientHeight;
+	} else if (document.body) { // other Explorers
+		windowWidth = document.body.clientWidth;
+		windowHeight = document.body.clientHeight;
+	}	
+	
+	// for small pages with total height less then height of the viewport
+	if(yScroll < windowHeight){
+		pageHeight = windowHeight;
+	} else { 
+		pageHeight = yScroll;
+	}
+
+	// for small pages with total width less then width of the viewport
+	if(xScroll < windowWidth){	
+		pageWidth = windowWidth;
+	} else {
+		pageWidth = xScroll;
+	}
+
+
+	arrayPageSize = new Array(pageWidth,pageHeight,windowWidth,windowHeight) 
+	return arrayPageSize;
+}
+
+// -----------------------------------------------------------------------------------
+
+//
+// getKey(key)
+// Gets keycode. If 'x' is pressed then it hides the lightbox.
+//
+function getKey(e){
+	if (e == null) { // ie
+		keycode = event.keyCode;
+	} else { // mozilla
+		keycode = e.which;
+	}
+	key = String.fromCharCode(keycode).toLowerCase();
+	
+	if(key == 'x'){
+	}
+}
+
+// -----------------------------------------------------------------------------------
+
+//
+// listenKey()
+//
+function listenKey () {	document.onkeypress = getKey; }
+	
+// ---------------------------------------------------
+
+function showSelectBoxes(){
+	selects = document.getElementsByTagName("select");
+	for (i = 0; i != selects.length; i++) {
+		selects[i].style.visibility = "visible";
+	}
+}
+
+// ---------------------------------------------------
+
+function hideSelectBoxes(){
+	selects = document.getElementsByTagName("select");
+	for (i = 0; i != selects.length; i++) {
+		selects[i].style.visibility = "hidden";
+	}
+}
+
+// ---------------------------------------------------
+
+//
+// pause(numberMillis)
+// Pauses code execution for specified time. Uses busy code, not good.
+// Code from http://www.faqts.com/knowledge_base/view.phtml/aid/1602
+//
+function pause(numberMillis) {
+	var now = new Date();
+	var exitTime = now.getTime() + numberMillis;
+	while (true) {
+		now = new Date();
+		if (now.getTime() > exitTime)
+			return;
+	}
+}
+
+// ---------------------------------------------------
+
+
+
+function initLightbox() { myLightbox = new Lightbox(); }
+Event.observe(window, 'load', initLightbox, false);
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/prototype.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/prototype.js	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/prototype.js	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,1785 @@
+/*  Prototype JavaScript framework, version 1.4.0
+ *  (c) 2005 Sam Stephenson <sam at conio.net>
+ *
+ *  THIS FILE IS AUTOMATICALLY GENERATED. When sending patches, please diff
+ *  against the source tree, available from the Prototype darcs repository.
+ *
+ *  Prototype is freely distributable under the terms of an MIT-style license.
+ *
+ *  For details, see the Prototype web site: http://prototype.conio.net/
+ *
+/*--------------------------------------------------------------------------*/
+
+var Prototype = {
+  Version: '1.4.0',
+  ScriptFragment: '(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)',
+
+  emptyFunction: function() {},
+  K: function(x) {return x}
+}
+
+var Class = {
+  create: function() {
+    return function() {
+      this.initialize.apply(this, arguments);
+    }
+  }
+}
+
+var Abstract = new Object();
+
+Object.extend = function(destination, source) {
+  for (property in source) {
+    destination[property] = source[property];
+  }
+  return destination;
+}
+
+Object.inspect = function(object) {
+  try {
+    if (object == undefined) return 'undefined';
+    if (object == null) return 'null';
+    return object.inspect ? object.inspect() : object.toString();
+  } catch (e) {
+    if (e instanceof RangeError) return '...';
+    throw e;
+  }
+}
+
+Function.prototype.bind = function() {
+  var __method = this, args = $A(arguments), object = args.shift();
+  return function() {
+    return __method.apply(object, args.concat($A(arguments)));
+  }
+}
+
+Function.prototype.bindAsEventListener = function(object) {
+  var __method = this;
+  return function(event) {
+    return __method.call(object, event || window.event);
+  }
+}
+
+Object.extend(Number.prototype, {
+  toColorPart: function() {
+    var digits = this.toString(16);
+    if (this < 16) return '0' + digits;
+    return digits;
+  },
+
+  succ: function() {
+    return this + 1;
+  },
+
+  times: function(iterator) {
+    $R(0, this, true).each(iterator);
+    return this;
+  }
+});
+
+var Try = {
+  these: function() {
+    var returnValue;
+
+    for (var i = 0; i < arguments.length; i++) {
+      var lambda = arguments[i];
+      try {
+        returnValue = lambda();
+        break;
+      } catch (e) {}
+    }
+
+    return returnValue;
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+var PeriodicalExecuter = Class.create();
+PeriodicalExecuter.prototype = {
+  initialize: function(callback, frequency) {
+    this.callback = callback;
+    this.frequency = frequency;
+    this.currentlyExecuting = false;
+
+    this.registerCallback();
+  },
+
+  registerCallback: function() {
+    setInterval(this.onTimerEvent.bind(this), this.frequency * 1000);
+  },
+
+  onTimerEvent: function() {
+    if (!this.currentlyExecuting) {
+      try {
+        this.currentlyExecuting = true;
+        this.callback();
+      } finally {
+        this.currentlyExecuting = false;
+      }
+    }
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+function $() {
+  var elements = new Array();
+
+  for (var i = 0; i < arguments.length; i++) {
+    var element = arguments[i];
+    if (typeof element == 'string')
+      element = document.getElementById(element);
+
+    if (arguments.length == 1)
+      return element;
+
+    elements.push(element);
+  }
+
+  return elements;
+}
+Object.extend(String.prototype, {
+  stripTags: function() {
+    return this.replace(/<\/?[^>]+>/gi, '');
+  },
+
+  stripScripts: function() {
+    return this.replace(new RegExp(Prototype.ScriptFragment, 'img'), '');
+  },
+
+  extractScripts: function() {
+    var matchAll = new RegExp(Prototype.ScriptFragment, 'img');
+    var matchOne = new RegExp(Prototype.ScriptFragment, 'im');
+    return (this.match(matchAll) || []).map(function(scriptTag) {
+      return (scriptTag.match(matchOne) || ['', ''])[1];
+    });
+  },
+
+  evalScripts: function() {
+    return this.extractScripts().map(eval);
+  },
+
+  escapeHTML: function() {
+    var div = document.createElement('div');
+    var text = document.createTextNode(this);
+    div.appendChild(text);
+    return div.innerHTML;
+  },
+
+  unescapeHTML: function() {
+    var div = document.createElement('div');
+    div.innerHTML = this.stripTags();
+    return div.childNodes[0] ? div.childNodes[0].nodeValue : '';
+  },
+
+  toQueryParams: function() {
+    var pairs = this.match(/^\??(.*)$/)[1].split('&');
+    return pairs.inject({}, function(params, pairString) {
+      var pair = pairString.split('=');
+      params[pair[0]] = pair[1];
+      return params;
+    });
+  },
+
+  toArray: function() {
+    return this.split('');
+  },
+
+  camelize: function() {
+    var oStringList = this.split('-');
+    if (oStringList.length == 1) return oStringList[0];
+
+    var camelizedString = this.indexOf('-') == 0
+      ? oStringList[0].charAt(0).toUpperCase() + oStringList[0].substring(1)
+      : oStringList[0];
+
+    for (var i = 1, len = oStringList.length; i < len; i++) {
+      var s = oStringList[i];
+      camelizedString += s.charAt(0).toUpperCase() + s.substring(1);
+    }
+
+    return camelizedString;
+  },
+
+  inspect: function() {
+    return "'" + this.replace('\\', '\\\\').replace("'", '\\\'') + "'";
+  }
+});
+
+String.prototype.parseQuery = String.prototype.toQueryParams;
+
+var $break    = new Object();
+var $continue = new Object();
+
+var Enumerable = {
+  each: function(iterator) {
+    var index = 0;
+    try {
+      this._each(function(value) {
+        try {
+          iterator(value, index++);
+        } catch (e) {
+          if (e != $continue) throw e;
+        }
+      });
+    } catch (e) {
+      if (e != $break) throw e;
+    }
+  },
+
+  all: function(iterator) {
+    var result = true;
+    this.each(function(value, index) {
+      result = result && !!(iterator || Prototype.K)(value, index);
+      if (!result) throw $break;
+    });
+    return result;
+  },
+
+  any: function(iterator) {
+    var result = true;
+    this.each(function(value, index) {
+      if (result = !!(iterator || Prototype.K)(value, index))
+        throw $break;
+    });
+    return result;
+  },
+
+  collect: function(iterator) {
+    var results = [];
+    this.each(function(value, index) {
+      results.push(iterator(value, index));
+    });
+    return results;
+  },
+
+  detect: function (iterator) {
+    var result;
+    this.each(function(value, index) {
+      if (iterator(value, index)) {
+        result = value;
+        throw $break;
+      }
+    });
+    return result;
+  },
+
+  findAll: function(iterator) {
+    var results = [];
+    this.each(function(value, index) {
+      if (iterator(value, index))
+        results.push(value);
+    });
+    return results;
+  },
+
+  grep: function(pattern, iterator) {
+    var results = [];
+    this.each(function(value, index) {
+      var stringValue = value.toString();
+      if (stringValue.match(pattern))
+        results.push((iterator || Prototype.K)(value, index));
+    })
+    return results;
+  },
+
+  include: function(object) {
+    var found = false;
+    this.each(function(value) {
+      if (value == object) {
+        found = true;
+        throw $break;
+      }
+    });
+    return found;
+  },
+
+  inject: function(memo, iterator) {
+    this.each(function(value, index) {
+      memo = iterator(memo, value, index);
+    });
+    return memo;
+  },
+
+  invoke: function(method) {
+    var args = $A(arguments).slice(1);
+    return this.collect(function(value) {
+      return value[method].apply(value, args);
+    });
+  },
+
+  max: function(iterator) {
+    var result;
+    this.each(function(value, index) {
+      value = (iterator || Prototype.K)(value, index);
+      if (value >= (result || value))
+        result = value;
+    });
+    return result;
+  },
+
+  min: function(iterator) {
+    var result;
+    this.each(function(value, index) {
+      value = (iterator || Prototype.K)(value, index);
+      if (value <= (result || value))
+        result = value;
+    });
+    return result;
+  },
+
+  partition: function(iterator) {
+    var trues = [], falses = [];
+    this.each(function(value, index) {
+      ((iterator || Prototype.K)(value, index) ?
+        trues : falses).push(value);
+    });
+    return [trues, falses];
+  },
+
+  pluck: function(property) {
+    var results = [];
+    this.each(function(value, index) {
+      results.push(value[property]);
+    });
+    return results;
+  },
+
+  reject: function(iterator) {
+    var results = [];
+    this.each(function(value, index) {
+      if (!iterator(value, index))
+        results.push(value);
+    });
+    return results;
+  },
+
+  sortBy: function(iterator) {
+    return this.collect(function(value, index) {
+      return {value: value, criteria: iterator(value, index)};
+    }).sort(function(left, right) {
+      var a = left.criteria, b = right.criteria;
+      return a < b ? -1 : a > b ? 1 : 0;
+    }).pluck('value');
+  },
+
+  toArray: function() {
+    return this.collect(Prototype.K);
+  },
+
+  zip: function() {
+    var iterator = Prototype.K, args = $A(arguments);
+    if (typeof args.last() == 'function')
+      iterator = args.pop();
+
+    var collections = [this].concat(args).map($A);
+    return this.map(function(value, index) {
+      iterator(value = collections.pluck(index));
+      return value;
+    });
+  },
+
+  inspect: function() {
+    return '#<Enumerable:' + this.toArray().inspect() + '>';
+  }
+}
+
+Object.extend(Enumerable, {
+  map:     Enumerable.collect,
+  find:    Enumerable.detect,
+  select:  Enumerable.findAll,
+  member:  Enumerable.include,
+  entries: Enumerable.toArray
+});
+var $A = Array.from = function(iterable) {
+  if (!iterable) return [];
+  if (iterable.toArray) {
+    return iterable.toArray();
+  } else {
+    var results = [];
+    for (var i = 0; i < iterable.length; i++)
+      results.push(iterable[i]);
+    return results;
+  }
+}
+
+Object.extend(Array.prototype, Enumerable);
+
+Array.prototype._reverse = Array.prototype.reverse;
+
+Object.extend(Array.prototype, {
+  _each: function(iterator) {
+    for (var i = 0; i < this.length; i++)
+      iterator(this[i]);
+  },
+
+  clear: function() {
+    this.length = 0;
+    return this;
+  },
+
+  first: function() {
+    return this[0];
+  },
+
+  last: function() {
+    return this[this.length - 1];
+  },
+
+  compact: function() {
+    return this.select(function(value) {
+      return value != undefined || value != null;
+    });
+  },
+
+  flatten: function() {
+    return this.inject([], function(array, value) {
+      return array.concat(value.constructor == Array ?
+        value.flatten() : [value]);
+    });
+  },
+
+  without: function() {
+    var values = $A(arguments);
+    return this.select(function(value) {
+      return !values.include(value);
+    });
+  },
+
+  indexOf: function(object) {
+    for (var i = 0; i < this.length; i++)
+      if (this[i] == object) return i;
+    return -1;
+  },
+
+  reverse: function(inline) {
+    return (inline !== false ? this : this.toArray())._reverse();
+  },
+
+  shift: function() {
+    var result = this[0];
+    for (var i = 0; i < this.length - 1; i++)
+      this[i] = this[i + 1];
+    this.length--;
+    return result;
+  },
+
+  inspect: function() {
+    return '[' + this.map(Object.inspect).join(', ') + ']';
+  }
+});
+var Hash = {
+  _each: function(iterator) {
+    for (key in this) {
+      var value = this[key];
+      if (typeof value == 'function') continue;
+
+      var pair = [key, value];
+      pair.key = key;
+      pair.value = value;
+      iterator(pair);
+    }
+  },
+
+  keys: function() {
+    return this.pluck('key');
+  },
+
+  values: function() {
+    return this.pluck('value');
+  },
+
+  merge: function(hash) {
+    return $H(hash).inject($H(this), function(mergedHash, pair) {
+      mergedHash[pair.key] = pair.value;
+      return mergedHash;
+    });
+  },
+
+  toQueryString: function() {
+    return this.map(function(pair) {
+      return pair.map(encodeURIComponent).join('=');
+    }).join('&');
+  },
+
+  inspect: function() {
+    return '#<Hash:{' + this.map(function(pair) {
+      return pair.map(Object.inspect).join(': ');
+    }).join(', ') + '}>';
+  }
+}
+
+function $H(object) {
+  var hash = Object.extend({}, object || {});
+  Object.extend(hash, Enumerable);
+  Object.extend(hash, Hash);
+  return hash;
+}
+ObjectRange = Class.create();
+Object.extend(ObjectRange.prototype, Enumerable);
+Object.extend(ObjectRange.prototype, {
+  initialize: function(start, end, exclusive) {
+    this.start = start;
+    this.end = end;
+    this.exclusive = exclusive;
+  },
+
+  _each: function(iterator) {
+    var value = this.start;
+    do {
+      iterator(value);
+      value = value.succ();
+    } while (this.include(value));
+  },
+
+  include: function(value) {
+    if (value < this.start)
+      return false;
+    if (this.exclusive)
+      return value < this.end;
+    return value <= this.end;
+  }
+});
+
+var $R = function(start, end, exclusive) {
+  return new ObjectRange(start, end, exclusive);
+}
+
+var Ajax = {
+  getTransport: function() {
+    return Try.these(
+      function() {return new ActiveXObject('Msxml2.XMLHTTP')},
+      function() {return new ActiveXObject('Microsoft.XMLHTTP')},
+      function() {return new XMLHttpRequest()}
+    ) || false;
+  },
+
+  activeRequestCount: 0
+}
+
+Ajax.Responders = {
+  responders: [],
+
+  _each: function(iterator) {
+    this.responders._each(iterator);
+  },
+
+  register: function(responderToAdd) {
+    if (!this.include(responderToAdd))
+      this.responders.push(responderToAdd);
+  },
+
+  unregister: function(responderToRemove) {
+    this.responders = this.responders.without(responderToRemove);
+  },
+
+  dispatch: function(callback, request, transport, json) {
+    this.each(function(responder) {
+      if (responder[callback] && typeof responder[callback] == 'function') {
+        try {
+          responder[callback].apply(responder, [request, transport, json]);
+        } catch (e) {}
+      }
+    });
+  }
+};
+
+Object.extend(Ajax.Responders, Enumerable);
+
+Ajax.Responders.register({
+  onCreate: function() {
+    Ajax.activeRequestCount++;
+  },
+
+  onComplete: function() {
+    Ajax.activeRequestCount--;
+  }
+});
+
+Ajax.Base = function() {};
+Ajax.Base.prototype = {
+  setOptions: function(options) {
+    this.options = {
+      method:       'post',
+      asynchronous: true,
+      parameters:   ''
+    }
+    Object.extend(this.options, options || {});
+  },
+
+  responseIsSuccess: function() {
+    return this.transport.status == undefined
+        || this.transport.status == 0
+        || (this.transport.status >= 200 && this.transport.status < 300);
+  },
+
+  responseIsFailure: function() {
+    return !this.responseIsSuccess();
+  }
+}
+
+Ajax.Request = Class.create();
+Ajax.Request.Events =
+  ['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete'];
+
+Ajax.Request.prototype = Object.extend(new Ajax.Base(), {
+  initialize: function(url, options) {
+    this.transport = Ajax.getTransport();
+    this.setOptions(options);
+    this.request(url);
+  },
+
+  request: function(url) {
+    var parameters = this.options.parameters || '';
+    if (parameters.length > 0) parameters += '&_=';
+
+    try {
+      this.url = url;
+      if (this.options.method == 'get' && parameters.length > 0)
+        this.url += (this.url.match(/\?/) ? '&' : '?') + parameters;
+
+      Ajax.Responders.dispatch('onCreate', this, this.transport);
+
+      this.transport.open(this.options.method, this.url,
+        this.options.asynchronous);
+
+      if (this.options.asynchronous) {
+        this.transport.onreadystatechange = this.onStateChange.bind(this);
+        setTimeout((function() {this.respondToReadyState(1)}).bind(this), 10);
+      }
+
+      this.setRequestHeaders();
+
+      var body = this.options.postBody ? this.options.postBody : parameters;
+      this.transport.send(this.options.method == 'post' ? body : null);
+
+    } catch (e) {
+      this.dispatchException(e);
+    }
+  },
+
+  setRequestHeaders: function() {
+    var requestHeaders =
+      ['X-Requested-With', 'XMLHttpRequest',
+       'X-Prototype-Version', Prototype.Version];
+
+    if (this.options.method == 'post') {
+      requestHeaders.push('Content-type',
+        'application/x-www-form-urlencoded');
+
+      /* Force "Connection: close" for Mozilla browsers to work around
+       * a bug where XMLHttpReqeuest sends an incorrect Content-length
+       * header. See Mozilla Bugzilla #246651.
+       */
+      if (this.transport.overrideMimeType)
+        requestHeaders.push('Connection', 'close');
+    }
+
+    if (this.options.requestHeaders)
+      requestHeaders.push.apply(requestHeaders, this.options.requestHeaders);
+
+    for (var i = 0; i < requestHeaders.length; i += 2)
+      this.transport.setRequestHeader(requestHeaders[i], requestHeaders[i+1]);
+  },
+
+  onStateChange: function() {
+    var readyState = this.transport.readyState;
+    if (readyState != 1)
+      this.respondToReadyState(this.transport.readyState);
+  },
+
+  header: function(name) {
+    try {
+      return this.transport.getResponseHeader(name);
+    } catch (e) {}
+  },
+
+  evalJSON: function() {
+    try {
+      return eval(this.header('X-JSON'));
+    } catch (e) {}
+  },
+
+  evalResponse: function() {
+    try {
+      return eval(this.transport.responseText);
+    } catch (e) {
+      this.dispatchException(e);
+    }
+  },
+
+  respondToReadyState: function(readyState) {
+    var event = Ajax.Request.Events[readyState];
+    var transport = this.transport, json = this.evalJSON();
+
+    if (event == 'Complete') {
+      try {
+        (this.options['on' + this.transport.status]
+         || this.options['on' + (this.responseIsSuccess() ? 'Success' : 'Failure')]
+         || Prototype.emptyFunction)(transport, json);
+      } catch (e) {
+        this.dispatchException(e);
+      }
+
+      if ((this.header('Content-type') || '').match(/^text\/javascript/i))
+        this.evalResponse();
+    }
+
+    try {
+      (this.options['on' + event] || Prototype.emptyFunction)(transport, json);
+      Ajax.Responders.dispatch('on' + event, this, transport, json);
+    } catch (e) {
+      this.dispatchException(e);
+    }
+
+    /* Avoid memory leak in MSIE: clean up the oncomplete event handler */
+    if (event == 'Complete')
+      this.transport.onreadystatechange = Prototype.emptyFunction;
+  },
+
+  dispatchException: function(exception) {
+    (this.options.onException || Prototype.emptyFunction)(this, exception);
+    Ajax.Responders.dispatch('onException', this, exception);
+  }
+});
+
+Ajax.Updater = Class.create();
+
+Object.extend(Object.extend(Ajax.Updater.prototype, Ajax.Request.prototype), {
+  initialize: function(container, url, options) {
+    this.containers = {
+      success: container.success ? $(container.success) : $(container),
+      failure: container.failure ? $(container.failure) :
+        (container.success ? null : $(container))
+    }
+
+    this.transport = Ajax.getTransport();
+    this.setOptions(options);
+
+    var onComplete = this.options.onComplete || Prototype.emptyFunction;
+    this.options.onComplete = (function(transport, object) {
+      this.updateContent();
+      onComplete(transport, object);
+    }).bind(this);
+
+    this.request(url);
+  },
+
+  updateContent: function() {
+    var receiver = this.responseIsSuccess() ?
+      this.containers.success : this.containers.failure;
+    var response = this.transport.responseText;
+
+    if (!this.options.evalScripts)
+      response = response.stripScripts();
+
+    if (receiver) {
+      if (this.options.insertion) {
+        new this.options.insertion(receiver, response);
+      } else {
+        Element.update(receiver, response);
+      }
+    }
+
+    if (this.responseIsSuccess()) {
+      if (this.onComplete)
+        setTimeout(this.onComplete.bind(this), 10);
+    }
+  }
+});
+
+Ajax.PeriodicalUpdater = Class.create();
+Ajax.PeriodicalUpdater.prototype = Object.extend(new Ajax.Base(), {
+  initialize: function(container, url, options) {
+    this.setOptions(options);
+    this.onComplete = this.options.onComplete;
+
+    this.frequency = (this.options.frequency || 2);
+    this.decay = (this.options.decay || 1);
+
+    this.updater = {};
+    this.container = container;
+    this.url = url;
+
+    this.start();
+  },
+
+  start: function() {
+    this.options.onComplete = this.updateComplete.bind(this);
+    this.onTimerEvent();
+  },
+
+  stop: function() {
+    this.updater.onComplete = undefined;
+    clearTimeout(this.timer);
+    (this.onComplete || Prototype.emptyFunction).apply(this, arguments);
+  },
+
+  updateComplete: function(request) {
+    if (this.options.decay) {
+      this.decay = (request.responseText == this.lastText ?
+        this.decay * this.options.decay : 1);
+
+      this.lastText = request.responseText;
+    }
+    this.timer = setTimeout(this.onTimerEvent.bind(this),
+      this.decay * this.frequency * 1000);
+  },
+
+  onTimerEvent: function() {
+    this.updater = new Ajax.Updater(this.container, this.url, this.options);
+  }
+});
+document.getElementsByClassName = function(className, parentElement) {
+  var children = ($(parentElement) || document.body).getElementsByTagName('*');
+  return $A(children).inject([], function(elements, child) {
+    if (child.className.match(new RegExp("(^|\\s)" + className + "(\\s|$)")))
+      elements.push(child);
+    return elements;
+  });
+}
+
+/*--------------------------------------------------------------------------*/
+
+if (!window.Element) {
+  var Element = new Object();
+}
+
+Object.extend(Element, {
+  visible: function(element) {
+    return $(element).style.display != 'none';
+  },
+
+  toggle: function() {
+    for (var i = 0; i < arguments.length; i++) {
+      var element = $(arguments[i]);
+      Element[Element.visible(element) ? 'hide' : 'show'](element);
+    }
+  },
+
+  hide: function() {
+    for (var i = 0; i < arguments.length; i++) {
+      var element = $(arguments[i]);
+      element.style.display = 'none';
+    }
+  },
+
+  show: function() {
+    for (var i = 0; i < arguments.length; i++) {
+      var element = $(arguments[i]);
+      element.style.display = '';
+    }
+  },
+
+  remove: function(element) {
+    element = $(element);
+    element.parentNode.removeChild(element);
+  },
+
+  update: function(element, html) {
+    $(element).innerHTML = html.stripScripts();
+    setTimeout(function() {html.evalScripts()}, 10);
+  },
+
+  getHeight: function(element) {
+    element = $(element);
+    return element.offsetHeight;
+  },
+
+  classNames: function(element) {
+    return new Element.ClassNames(element);
+  },
+
+  hasClassName: function(element, className) {
+    if (!(element = $(element))) return;
+    return Element.classNames(element).include(className);
+  },
+
+  addClassName: function(element, className) {
+    if (!(element = $(element))) return;
+    return Element.classNames(element).add(className);
+  },
+
+  removeClassName: function(element, className) {
+    if (!(element = $(element))) return;
+    return Element.classNames(element).remove(className);
+  },
+
+  // removes whitespace-only text node children
+  cleanWhitespace: function(element) {
+    element = $(element);
+    for (var i = 0; i < element.childNodes.length; i++) {
+      var node = element.childNodes[i];
+      if (node.nodeType == 3 && !/\S/.test(node.nodeValue))
+        Element.remove(node);
+    }
+  },
+
+  empty: function(element) {
+    return $(element).innerHTML.match(/^\s*$/);
+  },
+
+  scrollTo: function(element) {
+    element = $(element);
+    var x = element.x ? element.x : element.offsetLeft,
+        y = element.y ? element.y : element.offsetTop;
+    window.scrollTo(x, y);
+  },
+
+  getStyle: function(element, style) {
+    element = $(element);
+    var value = element.style[style.camelize()];
+    if (!value) {
+      if (document.defaultView && document.defaultView.getComputedStyle) {
+        var css = document.defaultView.getComputedStyle(element, null);
+        value = css ? css.getPropertyValue(style) : null;
+      } else if (element.currentStyle) {
+        value = element.currentStyle[style.camelize()];
+      }
+    }
+
+    if (window.opera && ['left', 'top', 'right', 'bottom'].include(style))
+      if (Element.getStyle(element, 'position') == 'static') value = 'auto';
+
+    return value == 'auto' ? null : value;
+  },
+
+  setStyle: function(element, style) {
+    element = $(element);
+    for (name in style)
+      element.style[name.camelize()] = style[name];
+  },
+
+  getDimensions: function(element) {
+    element = $(element);
+    if (Element.getStyle(element, 'display') != 'none')
+      return {width: element.offsetWidth, height: element.offsetHeight};
+
+    // All *Width and *Height properties give 0 on elements with display none,
+    // so enable the element temporarily
+    var els = element.style;
+    var originalVisibility = els.visibility;
+    var originalPosition = els.position;
+    els.visibility = 'hidden';
+    els.position = 'absolute';
+    els.display = '';
+    var originalWidth = element.clientWidth;
+    var originalHeight = element.clientHeight;
+    els.display = 'none';
+    els.position = originalPosition;
+    els.visibility = originalVisibility;
+    return {width: originalWidth, height: originalHeight};
+  },
+
+  makePositioned: function(element) {
+    element = $(element);
+    var pos = Element.getStyle(element, 'position');
+    if (pos == 'static' || !pos) {
+      element._madePositioned = true;
+      element.style.position = 'relative';
+      // Opera returns the offset relative to the positioning context, when an
+      // element is position relative but top and left have not been defined
+      if (window.opera) {
+        element.style.top = 0;
+        element.style.left = 0;
+      }
+    }
+  },
+
+  undoPositioned: function(element) {
+    element = $(element);
+    if (element._madePositioned) {
+      element._madePositioned = undefined;
+      element.style.position =
+        element.style.top =
+        element.style.left =
+        element.style.bottom =
+        element.style.right = '';
+    }
+  },
+
+  makeClipping: function(element) {
+    element = $(element);
+    if (element._overflow) return;
+    element._overflow = element.style.overflow;
+    if ((Element.getStyle(element, 'overflow') || 'visible') != 'hidden')
+      element.style.overflow = 'hidden';
+  },
+
+  undoClipping: function(element) {
+    element = $(element);
+    if (element._overflow) return;
+    element.style.overflow = element._overflow;
+    element._overflow = undefined;
+  }
+});
+
+var Toggle = new Object();
+Toggle.display = Element.toggle;
+
+/*--------------------------------------------------------------------------*/
+
+Abstract.Insertion = function(adjacency) {
+  this.adjacency = adjacency;
+}
+
+Abstract.Insertion.prototype = {
+  initialize: function(element, content) {
+    this.element = $(element);
+    this.content = content.stripScripts();
+
+    if (this.adjacency && this.element.insertAdjacentHTML) {
+      try {
+        this.element.insertAdjacentHTML(this.adjacency, this.content);
+      } catch (e) {
+        if (this.element.tagName.toLowerCase() == 'tbody') {
+          this.insertContent(this.contentFromAnonymousTable());
+        } else {
+          throw e;
+        }
+      }
+    } else {
+      this.range = this.element.ownerDocument.createRange();
+      if (this.initializeRange) this.initializeRange();
+      this.insertContent([this.range.createContextualFragment(this.content)]);
+    }
+
+    setTimeout(function() {content.evalScripts()}, 10);
+  },
+
+  contentFromAnonymousTable: function() {
+    var div = document.createElement('div');
+    div.innerHTML = '<table><tbody>' + this.content + '</tbody></table>';
+    return $A(div.childNodes[0].childNodes[0].childNodes);
+  }
+}
+
+var Insertion = new Object();
+
+Insertion.Before = Class.create();
+Insertion.Before.prototype = Object.extend(new Abstract.Insertion('beforeBegin'), {
+  initializeRange: function() {
+    this.range.setStartBefore(this.element);
+  },
+
+  insertContent: function(fragments) {
+    fragments.each((function(fragment) {
+      this.element.parentNode.insertBefore(fragment, this.element);
+    }).bind(this));
+  }
+});
+
+Insertion.Top = Class.create();
+Insertion.Top.prototype = Object.extend(new Abstract.Insertion('afterBegin'), {
+  initializeRange: function() {
+    this.range.selectNodeContents(this.element);
+    this.range.collapse(true);
+  },
+
+  insertContent: function(fragments) {
+    fragments.reverse(false).each((function(fragment) {
+      this.element.insertBefore(fragment, this.element.firstChild);
+    }).bind(this));
+  }
+});
+
+Insertion.Bottom = Class.create();
+Insertion.Bottom.prototype = Object.extend(new Abstract.Insertion('beforeEnd'), {
+  initializeRange: function() {
+    this.range.selectNodeContents(this.element);
+    this.range.collapse(this.element);
+  },
+
+  insertContent: function(fragments) {
+    fragments.each((function(fragment) {
+      this.element.appendChild(fragment);
+    }).bind(this));
+  }
+});
+
+Insertion.After = Class.create();
+Insertion.After.prototype = Object.extend(new Abstract.Insertion('afterEnd'), {
+  initializeRange: function() {
+    this.range.setStartAfter(this.element);
+  },
+
+  insertContent: function(fragments) {
+    fragments.each((function(fragment) {
+      this.element.parentNode.insertBefore(fragment,
+        this.element.nextSibling);
+    }).bind(this));
+  }
+});
+
+/*--------------------------------------------------------------------------*/
+
+Element.ClassNames = Class.create();
+Element.ClassNames.prototype = {
+  initialize: function(element) {
+    this.element = $(element);
+  },
+
+  _each: function(iterator) {
+    this.element.className.split(/\s+/).select(function(name) {
+      return name.length > 0;
+    })._each(iterator);
+  },
+
+  set: function(className) {
+    this.element.className = className;
+  },
+
+  add: function(classNameToAdd) {
+    if (this.include(classNameToAdd)) return;
+    this.set(this.toArray().concat(classNameToAdd).join(' '));
+  },
+
+  remove: function(classNameToRemove) {
+    if (!this.include(classNameToRemove)) return;
+    this.set(this.select(function(className) {
+      return className != classNameToRemove;
+    }).join(' '));
+  },
+
+  toString: function() {
+    return this.toArray().join(' ');
+  }
+}
+
+Object.extend(Element.ClassNames.prototype, Enumerable);
+var Field = {
+  clear: function() {
+    for (var i = 0; i < arguments.length; i++)
+      $(arguments[i]).value = '';
+  },
+
+  focus: function(element) {
+    $(element).focus();
+  },
+
+  present: function() {
+    for (var i = 0; i < arguments.length; i++)
+      if ($(arguments[i]).value == '') return false;
+    return true;
+  },
+
+  select: function(element) {
+    $(element).select();
+  },
+
+  activate: function(element) {
+    element = $(element);
+    element.focus();
+    if (element.select)
+      element.select();
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+var Form = {
+  serialize: function(form) {
+    var elements = Form.getElements($(form));
+    var queryComponents = new Array();
+
+    for (var i = 0; i < elements.length; i++) {
+      var queryComponent = Form.Element.serialize(elements[i]);
+      if (queryComponent)
+        queryComponents.push(queryComponent);
+    }
+
+    return queryComponents.join('&');
+  },
+
+  getElements: function(form) {
+    form = $(form);
+    var elements = new Array();
+
+    for (tagName in Form.Element.Serializers) {
+      var tagElements = form.getElementsByTagName(tagName);
+      for (var j = 0; j < tagElements.length; j++)
+        elements.push(tagElements[j]);
+    }
+    return elements;
+  },
+
+  getInputs: function(form, typeName, name) {
+    form = $(form);
+    var inputs = form.getElementsByTagName('input');
+
+    if (!typeName && !name)
+      return inputs;
+
+    var matchingInputs = new Array();
+    for (var i = 0; i < inputs.length; i++) {
+      var input = inputs[i];
+      if ((typeName && input.type != typeName) ||
+          (name && input.name != name))
+        continue;
+      matchingInputs.push(input);
+    }
+
+    return matchingInputs;
+  },
+
+  disable: function(form) {
+    var elements = Form.getElements(form);
+    for (var i = 0; i < elements.length; i++) {
+      var element = elements[i];
+      element.blur();
+      element.disabled = 'true';
+    }
+  },
+
+  enable: function(form) {
+    var elements = Form.getElements(form);
+    for (var i = 0; i < elements.length; i++) {
+      var element = elements[i];
+      element.disabled = '';
+    }
+  },
+
+  findFirstElement: function(form) {
+    return Form.getElements(form).find(function(element) {
+      return element.type != 'hidden' && !element.disabled &&
+        ['input', 'select', 'textarea'].include(element.tagName.toLowerCase());
+    });
+  },
+
+  focusFirstElement: function(form) {
+    Field.activate(Form.findFirstElement(form));
+  },
+
+  reset: function(form) {
+    $(form).reset();
+  }
+}
+
+Form.Element = {
+  serialize: function(element) {
+    element = $(element);
+    var method = element.tagName.toLowerCase();
+    var parameter = Form.Element.Serializers[method](element);
+
+    if (parameter) {
+      var key = encodeURIComponent(parameter[0]);
+      if (key.length == 0) return;
+
+      if (parameter[1].constructor != Array)
+        parameter[1] = [parameter[1]];
+
+      return parameter[1].map(function(value) {
+        return key + '=' + encodeURIComponent(value);
+      }).join('&');
+    }
+  },
+
+  getValue: function(element) {
+    element = $(element);
+    var method = element.tagName.toLowerCase();
+    var parameter = Form.Element.Serializers[method](element);
+
+    if (parameter)
+      return parameter[1];
+  }
+}
+
+Form.Element.Serializers = {
+  input: function(element) {
+    switch (element.type.toLowerCase()) {
+      case 'submit':
+      case 'hidden':
+      case 'password':
+      case 'text':
+        return Form.Element.Serializers.textarea(element);
+      case 'checkbox':
+      case 'radio':
+        return Form.Element.Serializers.inputSelector(element);
+    }
+    return false;
+  },
+
+  inputSelector: function(element) {
+    if (element.checked)
+      return [element.name, element.value];
+  },
+
+  textarea: function(element) {
+    return [element.name, element.value];
+  },
+
+  select: function(element) {
+    return Form.Element.Serializers[element.type == 'select-one' ?
+      'selectOne' : 'selectMany'](element);
+  },
+
+  selectOne: function(element) {
+    var value = '', opt, index = element.selectedIndex;
+    if (index >= 0) {
+      opt = element.options[index];
+      value = opt.value;
+      if (!value && !('value' in opt))
+        value = opt.text;
+    }
+    return [element.name, value];
+  },
+
+  selectMany: function(element) {
+    var value = new Array();
+    for (var i = 0; i < element.length; i++) {
+      var opt = element.options[i];
+      if (opt.selected) {
+        var optValue = opt.value;
+        if (!optValue && !('value' in opt))
+          optValue = opt.text;
+        value.push(optValue);
+      }
+    }
+    return [element.name, value];
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+var $F = Form.Element.getValue;
+
+/*--------------------------------------------------------------------------*/
+
+Abstract.TimedObserver = function() {}
+Abstract.TimedObserver.prototype = {
+  initialize: function(element, frequency, callback) {
+    this.frequency = frequency;
+    this.element   = $(element);
+    this.callback  = callback;
+
+    this.lastValue = this.getValue();
+    this.registerCallback();
+  },
+
+  registerCallback: function() {
+    setInterval(this.onTimerEvent.bind(this), this.frequency * 1000);
+  },
+
+  onTimerEvent: function() {
+    var value = this.getValue();
+    if (this.lastValue != value) {
+      this.callback(this.element, value);
+      this.lastValue = value;
+    }
+  }
+}
+
+Form.Element.Observer = Class.create();
+Form.Element.Observer.prototype = Object.extend(new Abstract.TimedObserver(), {
+  getValue: function() {
+    return Form.Element.getValue(this.element);
+  }
+});
+
+Form.Observer = Class.create();
+Form.Observer.prototype = Object.extend(new Abstract.TimedObserver(), {
+  getValue: function() {
+    return Form.serialize(this.element);
+  }
+});
+
+/*--------------------------------------------------------------------------*/
+
+Abstract.EventObserver = function() {}
+Abstract.EventObserver.prototype = {
+  initialize: function(element, callback) {
+    this.element  = $(element);
+    this.callback = callback;
+
+    this.lastValue = this.getValue();
+    if (this.element.tagName.toLowerCase() == 'form')
+      this.registerFormCallbacks();
+    else
+      this.registerCallback(this.element);
+  },
+
+  onElementEvent: function() {
+    var value = this.getValue();
+    if (this.lastValue != value) {
+      this.callback(this.element, value);
+      this.lastValue = value;
+    }
+  },
+
+  registerFormCallbacks: function() {
+    var elements = Form.getElements(this.element);
+    for (var i = 0; i < elements.length; i++)
+      this.registerCallback(elements[i]);
+  },
+
+  registerCallback: function(element) {
+    if (element.type) {
+      switch (element.type.toLowerCase()) {
+        case 'checkbox':
+        case 'radio':
+          Event.observe(element, 'click', this.onElementEvent.bind(this));
+          break;
+        case 'password':
+        case 'text':
+        case 'textarea':
+        case 'select-one':
+        case 'select-multiple':
+          Event.observe(element, 'change', this.onElementEvent.bind(this));
+          break;
+      }
+    }
+  }
+}
+
+Form.Element.EventObserver = Class.create();
+Form.Element.EventObserver.prototype = Object.extend(new Abstract.EventObserver(), {
+  getValue: function() {
+    return Form.Element.getValue(this.element);
+  }
+});
+
+Form.EventObserver = Class.create();
+Form.EventObserver.prototype = Object.extend(new Abstract.EventObserver(), {
+  getValue: function() {
+    return Form.serialize(this.element);
+  }
+});
+if (!window.Event) {
+  var Event = new Object();
+}
+
+Object.extend(Event, {
+  KEY_BACKSPACE: 8,
+  KEY_TAB:       9,
+  KEY_RETURN:   13,
+  KEY_ESC:      27,
+  KEY_LEFT:     37,
+  KEY_UP:       38,
+  KEY_RIGHT:    39,
+  KEY_DOWN:     40,
+  KEY_DELETE:   46,
+
+  element: function(event) {
+    return event.target || event.srcElement;
+  },
+
+  isLeftClick: function(event) {
+    return (((event.which) && (event.which == 1)) ||
+            ((event.button) && (event.button == 1)));
+  },
+
+  pointerX: function(event) {
+    return event.pageX || (event.clientX +
+      (document.documentElement.scrollLeft || document.body.scrollLeft));
+  },
+
+  pointerY: function(event) {
+    return event.pageY || (event.clientY +
+      (document.documentElement.scrollTop || document.body.scrollTop));
+  },
+
+  stop: function(event) {
+    if (event.preventDefault) {
+      event.preventDefault();
+      event.stopPropagation();
+    } else {
+      event.returnValue = false;
+      event.cancelBubble = true;
+    }
+  },
+
+  // find the first node with the given tagName, starting from the
+  // node the event was triggered on; traverses the DOM upwards
+  findElement: function(event, tagName) {
+    var element = Event.element(event);
+    while (element.parentNode && (!element.tagName ||
+        (element.tagName.toUpperCase() != tagName.toUpperCase())))
+      element = element.parentNode;
+    return element;
+  },
+
+  observers: false,
+
+  _observeAndCache: function(element, name, observer, useCapture) {
+    if (!this.observers) this.observers = [];
+    if (element.addEventListener) {
+      this.observers.push([element, name, observer, useCapture]);
+      element.addEventListener(name, observer, useCapture);
+    } else if (element.attachEvent) {
+      this.observers.push([element, name, observer, useCapture]);
+      element.attachEvent('on' + name, observer);
+    }
+  },
+
+  unloadCache: function() {
+    if (!Event.observers) return;
+    for (var i = 0; i < Event.observers.length; i++) {
+      Event.stopObserving.apply(this, Event.observers[i]);
+      Event.observers[i][0] = null;
+    }
+    Event.observers = false;
+  },
+
+  observe: function(element, name, observer, useCapture) {
+    var element = $(element);
+    useCapture = useCapture || false;
+
+    if (name == 'keypress' &&
+        (navigator.appVersion.match(/Konqueror|Safari|KHTML/)
+        || element.attachEvent))
+      name = 'keydown';
+
+    this._observeAndCache(element, name, observer, useCapture);
+  },
+
+  stopObserving: function(element, name, observer, useCapture) {
+    var element = $(element);
+    useCapture = useCapture || false;
+
+    if (name == 'keypress' &&
+        (navigator.appVersion.match(/Konqueror|Safari|KHTML/)
+        || element.detachEvent))
+      name = 'keydown';
+
+    if (element.removeEventListener) {
+      element.removeEventListener(name, observer, useCapture);
+    } else if (element.detachEvent) {
+      element.detachEvent('on' + name, observer);
+    }
+  }
+});
+
+/* prevent memory leaks in IE */
+Event.observe(window, 'unload', Event.unloadCache, false);
+var Position = {
+  // set to true if needed, warning: firefox performance problems
+  // NOT neeeded for page scrolling, only if draggable contained in
+  // scrollable elements
+  includeScrollOffsets: false,
+
+  // must be called before calling withinIncludingScrolloffset, every time the
+  // page is scrolled
+  prepare: function() {
+    this.deltaX =  window.pageXOffset
+                || document.documentElement.scrollLeft
+                || document.body.scrollLeft
+                || 0;
+    this.deltaY =  window.pageYOffset
+                || document.documentElement.scrollTop
+                || document.body.scrollTop
+                || 0;
+  },
+
+  realOffset: function(element) {
+    var valueT = 0, valueL = 0;
+    do {
+      valueT += element.scrollTop  || 0;
+      valueL += element.scrollLeft || 0;
+      element = element.parentNode;
+    } while (element);
+    return [valueL, valueT];
+  },
+
+  cumulativeOffset: function(element) {
+    var valueT = 0, valueL = 0;
+    do {
+      valueT += element.offsetTop  || 0;
+      valueL += element.offsetLeft || 0;
+      element = element.offsetParent;
+    } while (element);
+    return [valueL, valueT];
+  },
+
+  positionedOffset: function(element) {
+    var valueT = 0, valueL = 0;
+    do {
+      valueT += element.offsetTop  || 0;
+      valueL += element.offsetLeft || 0;
+      element = element.offsetParent;
+      if (element) {
+        p = Element.getStyle(element, 'position');
+        if (p == 'relative' || p == 'absolute') break;
+      }
+    } while (element);
+    return [valueL, valueT];
+  },
+
+  offsetParent: function(element) {
+    if (element.offsetParent) return element.offsetParent;
+    if (element == document.body) return element;
+
+    while ((element = element.parentNode) && element != document.body)
+      if (Element.getStyle(element, 'position') != 'static')
+        return element;
+
+    return document.body;
+  },
+
+  // caches x/y coordinate pair to use with overlap
+  within: function(element, x, y) {
+    if (this.includeScrollOffsets)
+      return this.withinIncludingScrolloffsets(element, x, y);
+    this.xcomp = x;
+    this.ycomp = y;
+    this.offset = this.cumulativeOffset(element);
+
+    return (y >= this.offset[1] &&
+            y <  this.offset[1] + element.offsetHeight &&
+            x >= this.offset[0] &&
+            x <  this.offset[0] + element.offsetWidth);
+  },
+
+  withinIncludingScrolloffsets: function(element, x, y) {
+    var offsetcache = this.realOffset(element);
+
+    this.xcomp = x + offsetcache[0] - this.deltaX;
+    this.ycomp = y + offsetcache[1] - this.deltaY;
+    this.offset = this.cumulativeOffset(element);
+
+    return (this.ycomp >= this.offset[1] &&
+            this.ycomp <  this.offset[1] + element.offsetHeight &&
+            this.xcomp >= this.offset[0] &&
+            this.xcomp <  this.offset[0] + element.offsetWidth);
+  },
+
+  // within must be called directly before
+  overlap: function(mode, element) {
+    if (!mode) return 0;
+    if (mode == 'vertical')
+      return ((this.offset[1] + element.offsetHeight) - this.ycomp) /
+        element.offsetHeight;
+    if (mode == 'horizontal')
+      return ((this.offset[0] + element.offsetWidth) - this.xcomp) /
+        element.offsetWidth;
+  },
+
+  clone: function(source, target) {
+    source = $(source);
+    target = $(target);
+    target.style.position = 'absolute';
+    var offsets = this.cumulativeOffset(source);
+    target.style.top    = offsets[1] + 'px';
+    target.style.left   = offsets[0] + 'px';
+    target.style.width  = source.offsetWidth + 'px';
+    target.style.height = source.offsetHeight + 'px';
+  },
+
+  page: function(forElement) {
+    var valueT = 0, valueL = 0;
+
+    var element = forElement;
+    do {
+      valueT += element.offsetTop  || 0;
+      valueL += element.offsetLeft || 0;
+
+      // Safari fix
+      if (element.offsetParent==document.body)
+        if (Element.getStyle(element,'position')=='absolute') break;
+
+    } while (element = element.offsetParent);
+
+    element = forElement;
+    do {
+      valueT -= element.scrollTop  || 0;
+      valueL -= element.scrollLeft || 0;
+    } while (element = element.parentNode);
+
+    return [valueL, valueT];
+  },
+
+  clone: function(source, target) {
+    var options = Object.extend({
+      setLeft:    true,
+      setTop:     true,
+      setWidth:   true,
+      setHeight:  true,
+      offsetTop:  0,
+      offsetLeft: 0
+    }, arguments[2] || {})
+
+    // find page position of source
+    source = $(source);
+    var p = Position.page(source);
+
+    // find coordinate system to use
+    target = $(target);
+    var delta = [0, 0];
+    var parent = null;
+    // delta [0,0] will do fine with position: fixed elements,
+    // position:absolute needs offsetParent deltas
+    if (Element.getStyle(target,'position') == 'absolute') {
+      parent = Position.offsetParent(target);
+      delta = Position.page(parent);
+    }
+
+    // correct by body offsets (fixes Safari)
+    if (parent == document.body) {
+      delta[0] -= document.body.offsetLeft;
+      delta[1] -= document.body.offsetTop;
+    }
+
+    // set position
+    if(options.setLeft)   target.style.left  = (p[0] - delta[0] + options.offsetLeft) + 'px';
+    if(options.setTop)    target.style.top   = (p[1] - delta[1] + options.offsetTop) + 'px';
+    if(options.setWidth)  target.style.width = source.offsetWidth + 'px';
+    if(options.setHeight) target.style.height = source.offsetHeight + 'px';
+  },
+
+  absolutize: function(element) {
+    element = $(element);
+    if (element.style.position == 'absolute') return;
+    Position.prepare();
+
+    var offsets = Position.positionedOffset(element);
+    var top     = offsets[1];
+    var left    = offsets[0];
+    var width   = element.clientWidth;
+    var height  = element.clientHeight;
+
+    element._originalLeft   = left - parseFloat(element.style.left  || 0);
+    element._originalTop    = top  - parseFloat(element.style.top || 0);
+    element._originalWidth  = element.style.width;
+    element._originalHeight = element.style.height;
+
+    element.style.position = 'absolute';
+    element.style.top    = top + 'px';;
+    element.style.left   = left + 'px';;
+    element.style.width  = width + 'px';;
+    element.style.height = height + 'px';;
+  },
+
+  relativize: function(element) {
+    element = $(element);
+    if (element.style.position == 'relative') return;
+    Position.prepare();
+
+    element.style.position = 'relative';
+    var top  = parseFloat(element.style.top  || 0) - (element._originalTop || 0);
+    var left = parseFloat(element.style.left || 0) - (element._originalLeft || 0);
+
+    element.style.top    = top + 'px';
+    element.style.left   = left + 'px';
+    element.style.height = element._originalHeight;
+    element.style.width  = element._originalWidth;
+  }
+}
+
+// Safari returns margins on body which is incorrect if the child is absolutely
+// positioned.  For performance reasons, redefine Position.cumulativeOffset for
+// KHTML/WebKit only.
+if (/Konqueror|Safari|KHTML/.test(navigator.userAgent)) {
+  Position.cumulativeOffset = function(element) {
+    var valueT = 0, valueL = 0;
+    do {
+      valueT += element.offsetTop  || 0;
+      valueL += element.offsetLeft || 0;
+      if (element.offsetParent == document.body)
+        if (Element.getStyle(element, 'position') == 'absolute') break;
+
+      element = element.offsetParent;
+    } while (element);
+
+    return [valueL, valueT];
+  }
+}
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/scriptaculous.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/scriptaculous.js	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/js/scriptaculous.js	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,45 @@
+// Copyright (c) 2005 Thomas Fuchs (http://script.aculo.us, http://mir.aculo.us)
+// 
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+//
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+var Scriptaculous = {
+  Version: '1.5.1',
+  require: function(libraryName) {
+    // inserting via DOM fails in Safari 2.0, so brute force approach
+    document.write('<script type="text/javascript" src="'+libraryName+'"></script>');
+  },
+  load: function() {
+    if((typeof Prototype=='undefined') ||
+      parseFloat(Prototype.Version.split(".")[0] + "." +
+                 Prototype.Version.split(".")[1]) < 1.4)
+      throw("script.aculo.us requires the Prototype JavaScript framework >= 1.4.0");
+    
+    $A(document.getElementsByTagName("script")).findAll( function(s) {
+      return (s.src && s.src.match(/scriptaculous\.js(\?.*)?$/))
+    }).each( function(s) {
+      var path = s.src.replace(/scriptaculous\.js(\?.*)?$/,'');
+      var includes = s.src.match(/\?.*load=([a-z,]*)/);
+      (includes ? includes[1] : 'builder,effects,dragdrop,controls,slider').split(',').each(
+       function(include) { Scriptaculous.require(path+include+'.js') });
+    });
+  }
+}
+
+Scriptaculous.load();
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/lightbox.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/lightbox.css	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/lightbox.css	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,102 @@
+#lightbox{
+	position: absolute;
+	top: 40px;
+	left: 0;
+	width: 100%;
+	z-index: 100;
+	text-align: center;
+	line-height: 0;
+	}
+
+#lightbox a img{ border: none; }
+
+#outerImageContainer{
+	position: relative;
+	background-color: #fff;
+	width: 250px;
+	height: 250px;
+	margin: 0 auto;
+	}
+
+#imageContainer{
+	padding: 10px;
+	}
+
+#loading{
+	position: absolute;
+	top: 40%;
+	left: 0%;
+	height: 25%;
+	width: 100%;
+	text-align: center;
+	line-height: 0;
+	}
+#hoverNav{
+	position: absolute;
+	top: 0;
+	left: 0;
+	height: 100%;
+	width: 100%;
+	z-index: 10;
+	}
+#imageContainer>#hoverNav{ left: 0;}
+#hoverNav a{ outline: none;}
+
+#prevLink, #nextLink{
+	width: 49%;
+	height: 100%;
+	background: transparent url(skins/default_with_lightbox/images/blank.gif) no-repeat; /* Trick IE into showing hover */
+	display: block;
+	}
+
+#prevLink { left: 0; float: left;}
+#nextLink { right: 0; float: right;}
+#prevLink:hover, #prevLink:visited:hover { background: url(skins/default_with_lightbox/images/prevlabel.gif) left 15% no-repeat; }
+#nextLink:hover, #nextLink:visited:hover { background: url(skins/default_with_lightbox/images/nextlabel.gif) right 15% no-repeat; }
+
+#imageDataContainer{
+	font: 10px Verdana, Helvetica, sans-serif;
+	background-color: #fff;
+	margin: 0 auto;
+	line-height: 1.4em;
+	}
+
+#imageData{
+	padding:0 10px;
+	}
+#imageData #imageDetails{ width: 70%; float: left; text-align: left; }	
+#imageData #caption{ font-weight: bold;	}
+#imageData #numberDisplay{ display: block; clear: left; padding-bottom: 1.0em;	}			
+#imageData #bottomNavClose{ width: 66px; float: right;  padding-bottom: 0.7em;	}	
+		
+#overlay{
+	position: absolute;
+	top: 0;
+	left: 0;
+	z-index: 90;
+	width: 100%;
+	height: 500px;
+	background-color: #000;
+	filter:alpha(opacity=60);
+	-moz-opacity: 0.6;
+	opacity: 0.6;
+	}
+	
+
+.clearfix:after {
+	content: "."; 
+	display: block; 
+	height: 0; 
+	clear: both; 
+	visibility: hidden;
+	}
+
+* html>body .clearfix {
+	display: inline-block; 
+	width: 100%;
+	}
+
+* html .clearfix {
+	height: 1%;
+	}	
+	
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/page.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/page.tpl	2006-07-07 09:21:01 UTC (rev 1962)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/page.tpl	2006-07-07 09:21:34 UTC (rev 1963)
@@ -0,0 +1,34 @@
+{include file="__std_header.tpl"}
+
+<div id="content" class="narrowcolumn">
+
+    {if $page}
+
+        <h2 class="pagetitle">{$page.title}</h2>
+
+        <p>
+            <div class="entry">{$page.body|bbcode}</div>
+        </p>
+
+        <p>
+            <small>
+                {t w="created_on"} {$page.created|date} {t w="by"} <a href="mailto:{$page.user_email|escape:'hexentity'}">{$page.user_name}</a>
+                {if $page.modified}
+                    <br/>
+                    {t w="last_modified_on"} {$page.modified|date}.
+                {/if}
+            </small>
+        </p>
+
+    {else}
+
+        <h2 class="center">{t w="not_found"}</h2>
+        <p class="center">{t w="sorry_not_found"}</p>
+
+    {/if}
+
+</div>
+
+{include file="__std_sidebar.tpl"}
+
+{include file="__std_footer.tpl"}



From pclaerhout at berlios.de  Fri Jul  7 11:37:51 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Fri, 7 Jul 2006 11:37:51 +0200
Subject: [ydf-devel] r1964 - in YDFramework2.0/trunk/examples/weblog/tiny_mce/themes: . simple simple/css simple/images
Message-ID: <200607070937.k679bpH7023314@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-07 11:37:50 +0200 (Fri, 07 Jul 2006)
New Revision: 1964

Added:
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/css/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/css/editor_content.css
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/css/editor_popup.css
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/css/editor_ui.css
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/editor_template.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/editor_template_src.js
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold_de_se.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold_fr.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold_ru.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold_tw.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bullist.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/buttons.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/cleanup.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/italic.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/italic_de_se.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/italic_ru.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/italic_tw.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/numlist.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/redo.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/separator.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/spacer.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/strikethrough.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/underline.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/underline_fr.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/underline_ru.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/underline_tw.gif
   YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/undo.gif
Log:
Added the simple theme from TinyMCE.

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/css/editor_content.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/css/editor_content.css	2006-07-07 09:21:34 UTC (rev 1963)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/css/editor_content.css	2006-07-07 09:37:50 UTC (rev 1964)
@@ -0,0 +1,25 @@
+body, td, pre {
+	font-family: Verdana, Arial, Helvetica, sans-serif;
+	font-size: 10px;
+}
+
+body {
+	background-color: #FFFFFF;
+}
+
+.mceVisualAid {
+	border: 1px dashed #BBBBBB;
+}
+
+/* MSIE specific */
+
+* html body {
+	scrollbar-3dlight-color: #F0F0EE;
+	scrollbar-arrow-color: #676662;
+	scrollbar-base-color: #F0F0EE;
+	scrollbar-darkshadow-color: #DDDDDD;
+	scrollbar-face-color: #E0E0DD;
+	scrollbar-highlight-color: #F0F0EE;
+	scrollbar-shadow-color: #F0F0EE;
+	scrollbar-track-color: #F5F5F5;	
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/css/editor_popup.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/css/editor_popup.css	2006-07-07 09:21:34 UTC (rev 1963)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/css/editor_popup.css	2006-07-07 09:37:50 UTC (rev 1964)
@@ -0,0 +1,41 @@
+body {
+	background-color: #F0F0EE;
+	font-family: Verdana, Arial, Helvetica, sans-serif;
+	font-size: 11px;
+	scrollbar-3dlight-color: #F0F0EE;
+	scrollbar-arrow-color: #676662;
+	scrollbar-base-color: #F0F0EE;
+	scrollbar-darkshadow-color: #DDDDDD;
+	scrollbar-face-color: #E0E0DD;
+	scrollbar-highlight-color: #F0F0EE;
+	scrollbar-shadow-color: #F0F0EE;
+	scrollbar-track-color: #F5F5F5;
+}
+
+td {
+	font-family: Verdana, Arial, Helvetica, sans-serif;
+	font-size: 11px;
+}
+
+input {
+	background: #FFFFFF;
+	border: 1px solid #cccccc;
+}
+
+td, input, select, textarea {
+	font-family: Verdana, Arial, Helvetica, sans-serif;
+	font-size: 10px;
+}
+
+input, select, textarea {
+	border: 1px solid #808080;
+}
+
+.input_noborder {
+	border: 0;
+}
+
+.title {
+	font-size: 12px;
+	font-weight: bold;
+}
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/css/editor_ui.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/css/editor_ui.css	2006-07-07 09:21:34 UTC (rev 1963)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/css/editor_ui.css	2006-07-07 09:37:50 UTC (rev 1964)
@@ -0,0 +1,125 @@
+.mceSeparatorLine {
+	border: 0;
+	padding: 0;
+	margin-left: 4px;
+	margin-right: 2px;
+}
+
+.mceSelectList {
+	font-family: "MS Sans Serif";
+	font-size: 7pt;
+	font-weight: normal;
+	margin-top: 2px;
+}
+
+.mceLabel, .mceLabelDisabled {
+	font-family: "MS Sans Serif";
+	font-size: 9pt;
+}
+
+.mceLabel {
+	color: #000000;
+}
+
+.mceLabelDisabled {
+	cursor: text;
+	color: #999999;
+}
+
+.mceEditor {
+	background: #F0F0EE;
+	border: 1px solid #cccccc;
+}
+
+.mceEditorArea {
+	font-family: "MS Sans Serif";
+	background: #FFFFFF;
+}
+
+.mceToolbar {
+	background: #F0F0EE;
+	border-top: 1px solid #cccccc;
+	line-height: 1px;
+	font-size: 1px;
+	padding-bottom: 1px;
+}
+
+.mceEditorIframe {
+	border: 0;
+}
+
+/* Button CSS rules */
+
+a.mceButtonDisabled img, a.mceButtonNormal img, a.mceButtonSelected img {
+	width: 20px;
+	height: 20px;
+	cursor: default;
+	margin-top: 1px;
+	margin-left: 1px;
+}
+
+a.mceButtonDisabled img {
+	border: 0 !important;
+}
+
+a.mceButtonNormal img, a.mceButtonSelected img {
+	border: 1px solid #F0F0EE !important;
+}
+
+a.mceButtonSelected img {
+	border: 1px solid #C0C0BB !important;
+}
+
+a.mceButtonNormal img:hover, a.mceButtonSelected img:hover {
+	border: 1px solid #0A246A !important;
+	cursor: default;
+	background-color: #B6BDD2;
+}
+
+a.mceButtonDisabled img {
+	-moz-opacity:0.3;
+	opacity: 0.3;
+	border: 1px solid #F0F0EE !important;
+	cursor: default;
+}
+
+a.mceTiledButton img {
+	background-image: url('../images/buttons.gif');
+	background-repeat: no-repeat;
+}
+
+/* MSIE specific rules */
+
+* html a.mceButtonNormal img, * html a.mceButtonSelected img, * html a.mceButtonDisabled img {
+	border: 0px !important;
+	margin-top: 2px;
+	margin-bottom: 1px;
+}
+
+* html a.mceButtonDisabled img {
+	filter:progid:DXImageTransform.Microsoft.Alpha(opacity=30);
+	border: 0px !important;
+}
+
+* html a.mceButtonDisabled {
+	border: 1px solid #F0F0EE !important;
+}
+
+* html a.mceButtonNormal, * html a.mceButtonSelected {
+	border: 1px solid #F0F0EE;
+	cursor: default;
+}
+
+* html a.mceButtonSelected {
+	border: 1px solid #C0C0BB;
+}
+
+* html a.mceButtonNormal:hover, * html a.mceButtonSelected:hover {
+	border: 1px solid #0A246A;
+	cursor: default;
+	background-color: #B6BDD2;
+}
+
+* html .mceSelectList {
+	margin-top: 2px;
+}

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/editor_template.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/editor_template.js	2006-07-07 09:21:34 UTC (rev 1963)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/editor_template.js	2006-07-07 09:37:50 UTC (rev 1964)
@@ -0,0 +1,4 @@
+var TinyMCE_SimpleTheme={_buttonMap:'bold,bullist,cleanup,italic,numlist,redo,strikethrough,underline,undo',getEditorTemplate:function(){var html='';html+='<table class="mceEditor" border="0" cellpadding="0" cellspacing="0" width="{$width}" height="{$height}">';html+='<tr><td align="center">';html+='<span id="{$editor_id}">IFRAME</span>';html+='</td></tr>';html+='<tr><td class="mceToolbar" align="center" height="1">';html+=tinyMCE.getButtonHTML('bold','lang_bold_desc','{$themeurl}/images/{$lang_bold_img}','Bold');html+=tinyMCE.getButtonHTML('italic','lang_italic_desc','{$themeurl}/images/{$lang_italic_img}','Italic');html+=tinyMCE.getButtonHTML('underline','lang_underline_desc','{$themeurl}/images/{$lang_underline_img}','Underline');html+=tinyMCE.getButtonHTML('strikethrough','lang_striketrough_desc','{$themeurl}/images/strikethrough.gif','Strikethrough');html+='<img src="{$themeurl}/images/separator.gif" width="2" height="20" class="mceSeparatorLine" />';html+=tinyMCE.getB!
 uttonHTML('undo','lang_undo_desc','{$themeurl}/images/undo.gif','Undo');html+=tinyMCE.getButtonHTML('redo','lang_redo_desc','{$themeurl}/images/redo.gif','Redo');html+='<img src="{$themeurl}/images/separator.gif" width="2" height="20" class="mceSeparatorLine" />';html+=tinyMCE.getButtonHTML('cleanup','lang_cleanup_desc','{$themeurl}/images/cleanup.gif','mceCleanup')
+html+='<img src="{$themeurl}/images/separator.gif" width="2" height="20" class="mceSeparatorLine" />';html+=tinyMCE.getButtonHTML('bullist','lang_bullist_desc','{$themeurl}/images/bullist.gif','InsertUnorderedList')
+html+=tinyMCE.getButtonHTML('numlist','lang_numlist_desc','{$themeurl}/images/numlist.gif','InsertOrderedList')
+html+='</td></tr></table>';return{delta_width:0,delta_height:20,html:html};},handleNodeChange:function(editor_id,node){tinyMCE.switchClass(editor_id+'_bold','mceButtonNormal');tinyMCE.switchClass(editor_id+'_italic','mceButtonNormal');tinyMCE.switchClass(editor_id+'_underline','mceButtonNormal');tinyMCE.switchClass(editor_id+'_strikethrough','mceButtonNormal');tinyMCE.switchClass(editor_id+'_bullist','mceButtonNormal');tinyMCE.switchClass(editor_id+'_numlist','mceButtonNormal');do{switch(node.nodeName.toLowerCase()){case"b":case"strong":tinyMCE.switchClass(editor_id+'_bold','mceButtonSelected');break;case"i":case"em":tinyMCE.switchClass(editor_id+'_italic','mceButtonSelected');break;case"u":tinyMCE.switchClass(editor_id+'_underline','mceButtonSelected');break;case"strike":tinyMCE.switchClass(editor_id+'_strikethrough','mceButtonSelected');break;case"ul":tinyMCE.switchClass(editor_id+'_bullist','mceButtonSelected');break;case"ol":tinyMCE.switchClass(editor_id+'_numlist','mce!
 ButtonSelected');break;}}while((node=node.parentNode)!=null);}};tinyMCE.addTheme("simple",TinyMCE_SimpleTheme);tinyMCE.addButtonMap(TinyMCE_SimpleTheme._buttonMap);
\ No newline at end of file

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/editor_template_src.js
===================================================================
--- YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/editor_template_src.js	2006-07-07 09:21:34 UTC (rev 1963)
+++ YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/editor_template_src.js	2006-07-07 09:37:50 UTC (rev 1964)
@@ -0,0 +1,86 @@
+/**
+ * $RCSfile: editor_template_src.js,v $
+ * $Revision: 1.9 $
+ * $Date: 2006/04/18 13:32:53 $
+ *
+ * @author Moxiecode
+ * @copyright Copyright ? 2004-2006, Moxiecode Systems AB, All rights reserved.
+ */
+
+var TinyMCE_SimpleTheme = {
+	// List of button ids in tile map
+	_buttonMap : 'bold,bullist,cleanup,italic,numlist,redo,strikethrough,underline,undo',
+
+	getEditorTemplate : function() {
+		var html = '';
+
+		html += '<table class="mceEditor" border="0" cellpadding="0" cellspacing="0" width="{$width}" height="{$height}">';
+		html += '<tr><td align="center">';
+		html += '<span id="{$editor_id}">IFRAME</span>';
+		html += '</td></tr>';
+		html += '<tr><td class="mceToolbar" align="center" height="1">';
+		html += tinyMCE.getButtonHTML('bold', 'lang_bold_desc', '{$themeurl}/images/{$lang_bold_img}', 'Bold');
+		html += tinyMCE.getButtonHTML('italic', 'lang_italic_desc', '{$themeurl}/images/{$lang_italic_img}', 'Italic');
+		html += tinyMCE.getButtonHTML('underline', 'lang_underline_desc', '{$themeurl}/images/{$lang_underline_img}', 'Underline');
+		html += tinyMCE.getButtonHTML('strikethrough', 'lang_striketrough_desc', '{$themeurl}/images/strikethrough.gif', 'Strikethrough');
+		html += '<img src="{$themeurl}/images/separator.gif" width="2" height="20" class="mceSeparatorLine" />';
+		html += tinyMCE.getButtonHTML('undo', 'lang_undo_desc', '{$themeurl}/images/undo.gif', 'Undo');
+		html += tinyMCE.getButtonHTML('redo', 'lang_redo_desc', '{$themeurl}/images/redo.gif', 'Redo');
+		html += '<img src="{$themeurl}/images/separator.gif" width="2" height="20" class="mceSeparatorLine" />';
+		html += tinyMCE.getButtonHTML('cleanup', 'lang_cleanup_desc', '{$themeurl}/images/cleanup.gif', 'mceCleanup')
+		html += '<img src="{$themeurl}/images/separator.gif" width="2" height="20" class="mceSeparatorLine" />';
+		html += tinyMCE.getButtonHTML('bullist', 'lang_bullist_desc', '{$themeurl}/images/bullist.gif', 'InsertUnorderedList')
+		html += tinyMCE.getButtonHTML('numlist', 'lang_numlist_desc', '{$themeurl}/images/numlist.gif', 'InsertOrderedList')
+		html += '</td></tr></table>';
+
+		return {
+			delta_width : 0,
+			delta_height : 20,
+			html : html
+		};
+	},
+
+	handleNodeChange : function(editor_id, node) {
+		// Reset old states
+		tinyMCE.switchClass(editor_id + '_bold', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_italic', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_underline', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_strikethrough', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_bullist', 'mceButtonNormal');
+		tinyMCE.switchClass(editor_id + '_numlist', 'mceButtonNormal');
+
+		// Handle elements
+		do {
+			switch (node.nodeName.toLowerCase()) {
+				case "b":
+				case "strong":
+					tinyMCE.switchClass(editor_id + '_bold', 'mceButtonSelected');
+				break;
+
+				case "i":
+				case "em":
+					tinyMCE.switchClass(editor_id + '_italic', 'mceButtonSelected');
+				break;
+
+				case "u":
+					tinyMCE.switchClass(editor_id + '_underline', 'mceButtonSelected');
+				break;
+
+				case "strike":
+					tinyMCE.switchClass(editor_id + '_strikethrough', 'mceButtonSelected');
+				break;
+				
+				case "ul":
+					tinyMCE.switchClass(editor_id + '_bullist', 'mceButtonSelected');
+				break;
+
+				case "ol":
+					tinyMCE.switchClass(editor_id + '_numlist', 'mceButtonSelected');
+				break;
+			}
+		} while ((node = node.parentNode) != null);
+	}
+};
+
+tinyMCE.addTheme("simple", TinyMCE_SimpleTheme);
+tinyMCE.addButtonMap(TinyMCE_SimpleTheme._buttonMap);

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold_de_se.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold_de_se.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold_fr.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold_fr.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold_ru.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold_ru.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold_tw.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bold_tw.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bullist.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/bullist.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/buttons.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/buttons.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/cleanup.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/cleanup.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/italic.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/italic.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/italic_de_se.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/italic_de_se.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/italic_ru.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/italic_ru.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/italic_tw.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/italic_tw.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/numlist.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/numlist.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/redo.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/redo.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/separator.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/separator.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/spacer.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/spacer.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/strikethrough.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/strikethrough.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/underline.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/underline.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/underline_fr.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/underline_fr.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/underline_ru.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/underline_ru.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/underline_tw.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/underline_tw.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/undo.gif
===================================================================
(Binary files differ)


Property changes on: YDFramework2.0/trunk/examples/weblog/tiny_mce/themes/simple/images/undo.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From pclaerhout at berlios.de  Fri Jul  7 13:05:40 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Fri, 7 Jul 2006 13:05:40 +0200
Subject: [ydf-devel] r1965 - in YDFramework2.0/trunk/examples/weblog: include skins/default skins/default_with_lightbox
Message-ID: <200607071105.k67B5eRE009112@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-07 13:04:27 +0200 (Fri, 07 Jul 2006)
New Revision: 1965

Modified:
   YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php
   YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl
Log:
Added TinyMCE for the public side of the weblog.

Modified: YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php	2006-07-07 09:37:50 UTC (rev 1964)
+++ YDFramework2.0/trunk/examples/weblog/include/YDWeblogRequest.php	2006-07-07 11:04:27 UTC (rev 1965)
@@ -155,6 +155,7 @@
             $this->tpl->assign( 'title',                       $title );
             $this->tpl->assign( 'weblog_title',                $wltitle );
             $this->tpl->assign( 'weblog_description',          YDConfig::get( 'weblog_description', 'Untitled Weblog Description' ) );
+            $this->tpl->assign( 'weblog_language',             YDConfig::get( 'weblog_language', 'en' ) );
             $this->tpl->assign( 'weblog_dir',                  YDUrl::makeLinkAbsolute( '.' ) );
             $this->tpl->assign( 'weblog_current_url',          YDUrl::makeLinkAbsolute( YD_SELF_URI ) );
             $this->tpl->assign( 'weblog_link',                 YDUrl::makeLinkAbsolute( 'index.php' ) );

Modified: YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl	2006-07-07 09:37:50 UTC (rev 1964)
+++ YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl	2006-07-07 11:04:27 UTC (rev 1965)
@@ -46,6 +46,27 @@
 
     {$weblog_google_analytics}
 
+    <script language="JavaScript" src="tiny_mce/tiny_mce_gzip.php"></script>
+
+    <script language="JavaScript">
+    <!--
+
+        {literal}tinyMCE.init({
+            mode : "textareas",
+            theme : "advanced",
+            language: "{/literal}{$weblog_language}{literal}",
+            theme_advanced_buttons1 : "bold,italic,separator,undo,redo,separator,link,unlink,separator,code",
+            theme_advanced_buttons2 : "",
+            theme_advanced_buttons3 : "",
+            theme_advanced_toolbar_location : "top",
+            theme_advanced_toolbar_align : "left",
+            theme_advanced_path_location : "",
+            force_br_newlines : true
+        });{/literal}
+
+    //-->
+    </script>
+
 </head>
 
 <body>

Modified: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl	2006-07-07 09:37:50 UTC (rev 1964)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl	2006-07-07 11:04:27 UTC (rev 1965)
@@ -52,6 +52,27 @@
 
     {$weblog_google_analytics}
 
+    <script language="JavaScript" src="tiny_mce/tiny_mce_gzip.php"></script>
+
+    <script language="JavaScript">
+    <!--
+
+        {literal}tinyMCE.init({
+            mode : "textareas",
+            theme : "advanced",
+            language: "{/literal}{$weblog_language}{literal}",
+            theme_advanced_buttons1 : "bold,italic,separator,undo,redo,separator,link,unlink,separator,code",
+            theme_advanced_buttons2 : "",
+            theme_advanced_buttons3 : "",
+            theme_advanced_toolbar_location : "top",
+            theme_advanced_toolbar_align : "left",
+            theme_advanced_path_location : "",
+            force_br_newlines : true
+        });{/literal}
+
+    //-->
+    </script>
+
 </head>
 
 <body>



From pclaerhout at berlios.de  Fri Jul  7 13:15:31 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Fri, 7 Jul 2006 13:15:31 +0200
Subject: [ydf-devel] r1966 - in YDFramework2.0/trunk/examples/weblog: manage skins/default skins/default_with_lightbox
Message-ID: <200607071115.k67BFVA1012177@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-07 13:15:28 +0200 (Fri, 07 Jul 2006)
New Revision: 1966

Added:
   YDFramework2.0/trunk/examples/weblog/manage/manage_editor.css
   YDFramework2.0/trunk/examples/weblog/skins/default/default_editor.css
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/default_editor.css
Modified:
   YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl
Log:
Added stylesheets for the content of TinyMCE.

Modified: YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl	2006-07-07 11:04:27 UTC (rev 1965)
+++ YDFramework2.0/trunk/examples/weblog/manage/__mng_header.tpl	2006-07-07 11:15:28 UTC (rev 1966)
@@ -38,7 +38,8 @@
             theme_advanced_toolbar_location : "top",
             theme_advanced_toolbar_align : "left",
             theme_advanced_path_location : "",
-            force_br_newlines : true
+            force_br_newlines : true,
+            content_css : 'manage_editor.css'
         });{/literal}
 
     //-->

Added: YDFramework2.0/trunk/examples/weblog/manage/manage_editor.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/manage_editor.css	2006-07-07 11:04:27 UTC (rev 1965)
+++ YDFramework2.0/trunk/examples/weblog/manage/manage_editor.css	2006-07-07 11:15:28 UTC (rev 1966)
@@ -0,0 +1,10 @@
+body, td, pre {
+	font-family: 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Verdana, Arial, Sans-Serif;
+	font-size: 10pt;
+	line-height: 16pt;
+	margin: 2px;
+}
+
+body {
+	background-color: #FFFFFF;
+}

Modified: YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl	2006-07-07 11:04:27 UTC (rev 1965)
+++ YDFramework2.0/trunk/examples/weblog/skins/default/__std_header.tpl	2006-07-07 11:15:28 UTC (rev 1966)
@@ -61,7 +61,8 @@
             theme_advanced_toolbar_location : "top",
             theme_advanced_toolbar_align : "left",
             theme_advanced_path_location : "",
-            force_br_newlines : true
+            force_br_newlines : true,
+            content_css: "{/literal}{$skin_dir}{literal}/default_editor.css"
         });{/literal}
 
     //-->

Added: YDFramework2.0/trunk/examples/weblog/skins/default/default_editor.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default/default_editor.css	2006-07-07 11:04:27 UTC (rev 1965)
+++ YDFramework2.0/trunk/examples/weblog/skins/default/default_editor.css	2006-07-07 11:15:28 UTC (rev 1966)
@@ -0,0 +1,10 @@
+body, td, pre {
+	font-size: 62.5%;
+	font-size: 0.8em;
+	font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	margin: 2px;
+}
+
+body {
+	background-color: #FFFFFF;
+}

Modified: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl	2006-07-07 11:04:27 UTC (rev 1965)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/__std_header.tpl	2006-07-07 11:15:28 UTC (rev 1966)
@@ -67,7 +67,8 @@
             theme_advanced_toolbar_location : "top",
             theme_advanced_toolbar_align : "left",
             theme_advanced_path_location : "",
-            force_br_newlines : true
+            force_br_newlines : true,
+            content_css: "{/literal}{$skin_dir}{literal}/default_editor.css"
         });{/literal}
 
     //-->

Added: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/default_editor.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/default_editor.css	2006-07-07 11:04:27 UTC (rev 1965)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/default_editor.css	2006-07-07 11:15:28 UTC (rev 1966)
@@ -0,0 +1,10 @@
+body, td, pre {
+	font-size: 62.5%;
+	font-size: 0.8em;
+	font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif;
+	margin: 2px;
+}
+
+body {
+	background-color: #FFFFFF;
+}



From pclaerhout at berlios.de  Fri Jul  7 15:14:28 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Fri, 7 Jul 2006 15:14:28 +0200
Subject: [ydf-devel] r1967 - in YDFramework2.0/trunk/examples/weblog: . include skins/default skins/default_with_lightbox
Message-ID: <200607071314.k67DESQ9024180@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-07 15:14:23 +0200 (Fri, 07 Jul 2006)
New Revision: 1967

Modified:
   YDFramework2.0/trunk/examples/weblog/include/YDWeblogAPI.php
   YDFramework2.0/trunk/examples/weblog/include/YDWeblog_init.php
   YDFramework2.0/trunk/examples/weblog/item_gallery.php
   YDFramework2.0/trunk/examples/weblog/skins/default/item_gallery.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive_gallery.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item.tpl
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_gallery.tpl
Log:
EXIF data is now automatically loaded for all images.

Modified: YDFramework2.0/trunk/examples/weblog/include/YDWeblogAPI.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/YDWeblogAPI.php	2006-07-07 11:15:28 UTC (rev 1966)
+++ YDFramework2.0/trunk/examples/weblog/include/YDWeblogAPI.php	2006-07-07 13:14:23 UTC (rev 1967)
@@ -267,6 +267,24 @@
                     $image->relative_path_s_obj = new YDFSImage( $dir_uploads->getAbsolutePath() . '/' . $image->relative_path_s );
                     $image->relative_path_m_obj = new YDFSImage( $dir_uploads->getAbsolutePath() . '/' . $image->relative_path_m );
 
+                    // Get the EXIF info for the image
+                    $result = read_exif_data_raw( $image->getAbsolutePath(), false );
+                    $image->exif = array();
+                    if ( isset( $result['IFD0'] ) ) {
+                        $image->exif = array_merge( $image->exif, $result['IFD0'] );
+                    }
+                    if ( isset( $result['SubIFD'] ) ) {
+                        $image->exif = array_merge( $image->exif, $result['SubIFD'] );
+                    }
+                    if ( $image->exif ) {
+                        @ $image->exif['full'] = $image->exif['Model'] . ' ' . str_replace( ' sec', 's', $image->exif['ExposureTime'] )
+                                             . ' ' . str_replace( ' ', '/', $image->exif['ApertureValue'] ) . ' ' .  t('at')
+                                             . ' ' . str_replace( ' ', '', $image->exif['FocalLength'] ) . ' ISO'
+                                             . $image->exif['ISOSpeedRatings'];
+                    } else {
+                        $image->exif = null;
+                    }
+
                     // Update the original image
                     $images[$key] = $image;
 

Modified: YDFramework2.0/trunk/examples/weblog/include/YDWeblog_init.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/YDWeblog_init.php	2006-07-07 11:15:28 UTC (rev 1966)
+++ YDFramework2.0/trunk/examples/weblog/include/YDWeblog_init.php	2006-07-07 13:14:23 UTC (rev 1967)
@@ -50,6 +50,7 @@
     // Include other libraries
     YDInclude( dirname( __FILE__ ) . '/YDWeblogAPI.php' );
     YDInclude( dirname( __FILE__ ) . '/YDWeblogRequest.php' );
+    YDInclude( dirname( __FILE__ ) . '/exifer/exif.php' );
 
     // Check if the user wanted to use caching
     if ( YDConfig::get( 'use_cache', false ) ) {

Modified: YDFramework2.0/trunk/examples/weblog/item_gallery.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/item_gallery.php	2006-07-07 11:15:28 UTC (rev 1966)
+++ YDFramework2.0/trunk/examples/weblog/item_gallery.php	2006-07-07 13:14:23 UTC (rev 1967)
@@ -5,7 +5,6 @@
 
     // Includes
     YDInclude( 'YDForm.php' );
-    YDInclude( dirname( __FILE__ ) . '/include/exifer/exif.php' );
 
     // Class definition
     class item_gallery extends YDWeblogRequest {
@@ -47,16 +46,6 @@
                 }
             }
 
-            // Get the EXIF info for the image
-            $result = read_exif_data_raw( $image->getAbsolutePath(), false );
-            $image->exif = array();
-            if ( isset( $result['IFD0'] ) ) {
-                $image->exif = array_merge( $image->exif, $result['IFD0'] );
-            }
-            if ( isset( $result['SubIFD'] ) ) {
-                $image->exif = array_merge( $image->exif, $result['SubIFD'] );
-            }
-
             // Add them to the template
             $this->tpl->assign( 'item',  $item );
             $this->tpl->assign( 'image', $image );

Modified: YDFramework2.0/trunk/examples/weblog/skins/default/item_gallery.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default/item_gallery.tpl	2006-07-07 11:15:28 UTC (rev 1966)
+++ YDFramework2.0/trunk/examples/weblog/skins/default/item_gallery.tpl	2006-07-07 13:14:23 UTC (rev 1967)
@@ -47,11 +47,7 @@
                     {t w="item"}: <a href="{$item|@link_item}">{$item.title}</a>
                     {if $image->exif}
                         <br/>
-                        EXIF: {$image->exif.Model}
-                        {$image->exif.ExposureTime|replace:' sec':'s'}
-                        {$image->exif.ApertureValue|replace:' ':'/'} {t w="at"}
-                        {$image->exif.FocalLength|replace:' ':''}
-                        ISO-{$image->exif.ISOSpeedRatings}
+                        EXIF: {$image->exif.full}
                     {/if}
                 </small>
             </p>

Modified: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive_gallery.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive_gallery.tpl	2006-07-07 11:15:28 UTC (rev 1966)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/archive_gallery.tpl	2006-07-07 13:14:23 UTC (rev 1967)
@@ -17,7 +17,9 @@
                         {foreach from=$image_row item="image"}
                             <td width="12%" align="center" valign="middle" height="60">
                                 {if $image}
-                                    <a href="{$uploads_dir}/{$image->relative_path}" rel="lightbox[{$item.id}]" title="{$image->getBasenameNoExt()}"><img src="{$image|link_thumb_small}" alt="{$image->getBaseName()}" width="{$image->relative_path_s_obj->getWidth()}" height="{$image->relative_path_s_obj->getHeight()}"></a>
+                                    <a href="{$uploads_dir}/{$image->relative_path}" rel="lightbox[{$item.id}]"
+                                    title="{$item.title} &raquo; {$image->getBasenameNoExt()}<br/>{$image->exif.full}"
+                                    ><img src="{$image|link_thumb_small}" alt="{$image->getBaseName()}" width="{$image->relative_path_s_obj->getWidth()}" height="{$image->relative_path_s_obj->getHeight()}"></a>
                                 {else}
                                     &nbsp;
                                 {/if}

Modified: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item.tpl	2006-07-07 11:15:28 UTC (rev 1966)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item.tpl	2006-07-07 13:14:23 UTC (rev 1967)
@@ -53,7 +53,8 @@
                 {foreach from=$image_row item="image"}
                     <td width="33%" align="center" style="vertical-align: middle;" height="100">
                         {if $image}
-                            <a href="{$uploads_dir}/{$image->relative_path}" rel="lightbox[{$item.id}]" title="{$image->getBasenameNoExt()}"
+                            <a href="{$uploads_dir}/{$image->relative_path}" rel="lightbox[{$item.id}]"
+                             title="{$item.title} &raquo; {$image->getBasenameNoExt()}<br/>{$image->exif.full}"
                              ><img src="{$image|link_thumb}" alt="{$image->getBaseName()}"
                              width="{$image->relative_path_m_obj->getWidth()}" height="{$image->relative_path_m_obj->getHeight()}"></a>
                         {else}
@@ -66,7 +67,8 @@
                 {foreach from=$image_row item="image"}
                     <td width="33%" align="center">
                         {if $image}
-                            <p><a href="{$uploads_dir}/{$image->relative_path}" rel="lightbox[{$item.id}]" title="{$image->getBasenameNoExt()}"
+                            <p><a href="{$uploads_dir}/{$image->relative_path}" rel="lightbox[{$item.id}]"
+                             title="{$item.title} &raquo; {$image->getBasenameNoExt()}<br/>{$image->exif.full}"
                              >{$image->getBasenameNoExt()}</a><br/>&nbsp;</p>
                         {else}
                             &nbsp;

Modified: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_gallery.tpl
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_gallery.tpl	2006-07-07 11:15:28 UTC (rev 1966)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/item_gallery.tpl	2006-07-07 13:14:23 UTC (rev 1967)
@@ -47,11 +47,7 @@
                     {t w="item"}: <a href="{$item|@link_item}">{$item.title}</a>
                     {if $image->exif}
                         <br/>
-                        EXIF: {$image->exif.Model}
-                        {$image->exif.ExposureTime|replace:' sec':'s'}
-                        {$image->exif.ApertureValue|replace:' ':'/'} {t w="at"}
-                        {$image->exif.FocalLength|replace:' ':''}
-                        ISO-{$image->exif.ISOSpeedRatings}
+                        EXIF: {$image->exif.full}
                     {/if}
                 </small>
             </p>



From pclaerhout at berlios.de  Fri Jul  7 15:35:18 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Fri, 7 Jul 2006 15:35:18 +0200
Subject: [ydf-devel] r1968 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200607071335.k67DZIF7005318@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-07 15:35:17 +0200 (Fri, 07 Jul 2006)
New Revision: 1968

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDUtil.php
Log:
Fixed a bug in YDStringUtil::encodeString.

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDUtil.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDUtil.php	2006-07-07 13:14:23 UTC (rev 1967)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDUtil.php	2006-07-07 13:35:17 UTC (rev 1968)
@@ -604,7 +604,7 @@
             $string = strtr( $string, $trans );
             $trans = get_html_translation_table( HTML_ENTITIES, ENT_NOQUOTES );
             foreach ( $trans as $key => $value ) {
-                if ( ord( $key ) == 60 || ord( $key ) == 62 ) {
+                if ( ord( $key ) == 60 || ord( $key ) == 62 || ord( $key ) == 38 ) {
                     unset( $trans[$key] );
                 } else {
                     $trans[$key] = '&#' . ord( $key ) . ';';



From ydfpoi at gmail.com  Fri Jul  7 22:35:34 2006
From: ydfpoi at gmail.com (ydf poi)
Date: Fri, 7 Jul 2006 22:35:34 +0200
Subject: [ydf-devel] weblog french translation
Message-ID: <306340e00607071335r1c1afc90g9711b03055aca658@mail.gmail.com>

Hi Pieter!

I think the weblog's french translation file misses these translations:

// General stuff
$GLOBALS['t']['confirm_action'] = '&Ecirc;tes-vous s&ucirc;r de
vouloir effectuer l\'action suivante ?';
$GLOBALS['t']['rows'] = 'ligne(s)';
$GLOBALS['t']['tables'] = 'Tables';
$GLOBALS['t']['related_items'] = 'Entr&eacute;es en rapport avec';

// manage/cache.tpl
$GLOBALS['t']['cleanup_cache'] = 'Supprimer les fichiers du cache';

// manage/stats.tpl
$GLOBALS['t']['reset_stats'] = 'R&eacute;initialiser toutes les statistiques';

// manage/config.tpl
$GLOBALS['t']['cfg_weblog_google_analytics'] = 'Compte Google Analytics';
$GLOBALS['t']['cfg_google_analytics'] = 'Google Analytics';
$GLOBALS['t']['cfg_keep_stats'] = 'Statistiques de tra&ccedil;age';
$GLOBALS['t']['cfg_use_auto_update'] = 'Activer Auto Update';

Kind regards
-- 
po?


From ydfpoi at gmail.com  Fri Jul  7 22:40:33 2006
From: ydfpoi at gmail.com (ydf poi)
Date: Fri, 7 Jul 2006 22:40:33 +0200
Subject: [ydf-devel] Re: weblog french translation
In-Reply-To: <306340e00607071335r1c1afc90g9711b03055aca658@mail.gmail.com>
References: <306340e00607071335r1c1afc90g9711b03055aca658@mail.gmail.com>
Message-ID: <306340e00607071340x2054c594w2498b9e3661b1db4@mail.gmail.com>

and i have forgotten:

// manage/stats.tpl
$GLOBALS['t']['total_average_stats'] = 'Totals et moyens';

should be 'Totaux et moyennes'

Thanks
-- 
po?


From ximian at berlios.de  Mon Jul 10 12:49:38 2006
From: ximian at berlios.de (ximian at berlios.de)
Date: Mon, 10 Jul 2006 12:49:38 +0200
Subject: [ydf-devel] r1969 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200607101049.k6AAncdk026928@sheep.berlios.de>

Author: ximian
Date: 2006-07-10 12:49:03 +0200 (Mon, 10 Jul 2006)
New Revision: 1969

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
Log:
added 3 new simple methods about YDFormElement:

- YDFormElement::delAttribute   to delete a specific attribute from an element
- YDFormElement::delAttributes  to delete all attributes from an element
- YDFormElement::delOptions     to delete all options from an element
  YDFormElement::delOption      is already implemented

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-07-07 13:35:17 UTC (rev 1968)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-07-10 10:49:03 UTC (rev 1969)
@@ -1369,6 +1369,14 @@
             if ( isset( $this->_attributes[$key] ) ) unset( $this->_attributes[$key] );
         }
 
+
+        /**
+         *  Function to delete all attributes of a form element
+         */
+        function delAttributes() {
+            $this->_attributes = array() ;
+        }
+
 		
         /**
          *  Function to set the option of a form element
@@ -1380,7 +1388,26 @@
             $this->_options[$key] = $val;
         }		
 
+
         /**
+         *  Function to delete an option of a form element
+         *
+         *  @param  $key    The name of the option
+         */
+        function delOption( $key ) {
+            if ( isset( $this->_options[$key] ) ) unset( $this->_options[$key] );
+        }
+
+
+        /**
+         *  Function to delete all options of a form element
+         */
+        function delOptions() {
+            $this->_options = array();
+        }
+
+
+        /**
          *  This function sets the value for the element.
          *
          *  @param  $val    (optional) The value for this object.



From pclaerhout at berlios.de  Mon Jul 10 13:27:29 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Mon, 10 Jul 2006 13:27:29 +0200
Subject: [ydf-devel] r1970 - YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox
Message-ID: <200607101127.k6ABRTTI007570@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-10 13:27:27 +0200 (Mon, 10 Jul 2006)
New Revision: 1970

Modified:
   YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/lightbox.css
Log:
Made the previous/next buttons in the lightbox skin work properly.

Modified: YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/lightbox.css
===================================================================
--- YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/lightbox.css	2006-07-10 10:49:03 UTC (rev 1969)
+++ YDFramework2.0/trunk/examples/weblog/skins/default_with_lightbox/lightbox.css	2006-07-10 11:27:27 UTC (rev 1970)
@@ -45,14 +45,14 @@
 #prevLink, #nextLink{
 	width: 49%;
 	height: 100%;
-	background: transparent url(skins/default_with_lightbox/images/blank.gif) no-repeat; /* Trick IE into showing hover */
+	background: transparent url(images/blank.gif) no-repeat; /* Trick IE into showing hover */
 	display: block;
 	}
 
 #prevLink { left: 0; float: left;}
 #nextLink { right: 0; float: right;}
-#prevLink:hover, #prevLink:visited:hover { background: url(skins/default_with_lightbox/images/prevlabel.gif) left 15% no-repeat; }
-#nextLink:hover, #nextLink:visited:hover { background: url(skins/default_with_lightbox/images/nextlabel.gif) right 15% no-repeat; }
+#prevLink:hover, #prevLink:visited:hover { background: url(images/prevlabel.gif) left 15% no-repeat; }
+#nextLink:hover, #nextLink:visited:hover { background: url(images/nextlabel.gif) right 15% no-repeat; }
 
 #imageDataContainer{
 	font: 10px Verdana, Helvetica, sans-serif;



From pclaerhout at berlios.de  Mon Jul 10 14:59:52 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Mon, 10 Jul 2006 14:59:52 +0200
Subject: [ydf-devel] r1971 - YDFramework2.0/trunk/examples/weblog/include/languages
Message-ID: <200607101259.k6ACxqS8011340@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-10 14:59:47 +0200 (Mon, 10 Jul 2006)
New Revision: 1971

Modified:
   YDFramework2.0/trunk/examples/weblog/include/languages/language_fr.php
Log:
Added some missing french translations to the weblog application.

Modified: YDFramework2.0/trunk/examples/weblog/include/languages/language_fr.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/languages/language_fr.php	2006-07-10 11:27:27 UTC (rev 1970)
+++ YDFramework2.0/trunk/examples/weblog/include/languages/language_fr.php	2006-07-10 12:59:47 UTC (rev 1971)
@@ -27,6 +27,10 @@
 $GLOBALS['t']['back'] = 'Retour';
 $GLOBALS['t']['yes'] = 'oui';
 $GLOBALS['t']['no'] = 'non';
+$GLOBALS['t']['confirm_action'] = '&Ecirc;tes-vous s&ucirc;r de vouloir effectuer l\'action suivante ?';
+$GLOBALS['t']['rows'] = 'ligne(s)';
+$GLOBALS['t']['tables'] = 'Tables';
+$GLOBALS['t']['related_items'] = 'Entr&eacute;es en rapport avec';
 
 // __std_header.tpl
 $GLOBALS['t']['another_powered_by'] = 'Juste un autre weblog propuls&eacute; par le ' . YD_FW_NAME . '!';
@@ -146,6 +150,7 @@
 // manage/cache.tpl
 $GLOBALS['t']['cleanup'] = 'Nettoyer';
 $GLOBALS['t']['cache_cleaned_up'] = 'Les fichiers du cache ont &eacute;t&eacute; supprim&eacute;s!';
+$GLOBALS['t']['cleanup_cache'] = 'Supprimer les fichiers du cache';
 
 // manage/serverinfo.tpl
 $GLOBALS['t']['system'] = 'Syst&egrave;me';
@@ -188,6 +193,8 @@
 $GLOBALS['t']['items'] = 'entr&eacute;e(s)';
 $GLOBALS['t']['top_10_commenters'] = 'Les 10 commentateurs les plus actifs';
 $GLOBALS['t']['all_commenters'] = 'Tous les commentateurs';
+$GLOBALS['t']['reset_stats'] = 'R&eacute;initialiser toutes les statistiques';
+$GLOBALS['t']['total_average_stats'] = 'Totals et moyens';
 
 // manage/users.tpl
 $GLOBALS['t']['useremail'] = 'Adresse email';
@@ -278,6 +285,10 @@
 $GLOBALS['t']['err_auto_close_items'] = 'Interdire les commentaires apr&egrave;s x jours devrait &ecirc;tre num&eacute;rique';
 $GLOBALS['t']['cfg_include_debug_info'] = 'Affiche des informations de d&eacute;bogage';
 $GLOBALS['t']['cfg_default_item_settings'] = 'Valeurs par d&eacute;faut pour les nouvelles entr&eacute;es';
+$GLOBALS['t']['cfg_weblog_google_analytics'] = 'Compte Google Analytics';
+$GLOBALS['t']['cfg_google_analytics'] = 'Google Analytics';
+$GLOBALS['t']['cfg_keep_stats'] = 'Statistiques de tra&ccedil;age';
+$GLOBALS['t']['cfg_use_auto_update'] = 'Activer Auto Update';
 
 // manage/item.tpl
 $GLOBALS['t']['item_title'] = 'Titre de l\'entr&eacute;e';



From pieter at yellowduck.be  Mon Jul 10 15:05:52 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Mon, 10 Jul 2006 15:05:52 +0200
Subject: [ydf-devel] Re: weblog french translation
In-Reply-To: <306340e00607071340x2054c594w2498b9e3661b1db4@mail.gmail.com>
References: <306340e00607071335r1c1afc90g9711b03055aca658@mail.gmail.com>
	 <306340e00607071340x2054c594w2498b9e3661b1db4@mail.gmail.com>
Message-ID: <4aef63030607100605t2eec06f6k3227a3051b3f76ff@mail.gmail.com>

Added in build 1971.

pieter

On 7/7/06, ydf poi <ydfpoi at gmail.com> wrote:
>
> and i have forgotten:
>
> // manage/stats.tpl
> $GLOBALS['t']['total_average_stats'] = 'Totals et moyens';
>
> should be 'Totaux et moyennes'
>
> Thanks
> --
> po?
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
>



-- 
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060710/2a682494/attachment.html>

From pclaerhout at berlios.de  Mon Jul 10 15:44:31 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Mon, 10 Jul 2006 15:44:31 +0200
Subject: [ydf-devel] r1972 - YDFramework2.0/trunk/examples/weblog/manage
Message-ID: <200607101344.k6ADiVEp004126@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-10 15:44:30 +0200 (Mon, 10 Jul 2006)
New Revision: 1972

Modified:
   YDFramework2.0/trunk/examples/weblog/manage/cache.php
Log:
The number of items and cache size are now listed in the manage cache section.

Modified: YDFramework2.0/trunk/examples/weblog/manage/cache.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/cache.php	2006-07-10 12:59:47 UTC (rev 1971)
+++ YDFramework2.0/trunk/examples/weblog/manage/cache.php	2006-07-10 13:44:30 UTC (rev 1972)
@@ -17,15 +17,22 @@
         // Default action
         function actionDefault() {
 
+            // Get the list of files and file sizes
+            $cache_pub_lbl = 'Public cache ' . $this->_getTotalSizeAndCountAsText( YD_WEBLOG_CACHE_PREFIX . '*.' . YD_WEBLOG_CACHE_SUFFIX );
+            $cache_tmb_lbl = 'Thumbnail cache ' . $this->_getTotalSizeAndCountAsText( YD_TMP_PRE . 'N_*.*' );
+            $cache_web_lbl = 'Web download cache ' . $this->_getTotalSizeAndCountAsText( '*.wch' );
+            $cache_tpl_lbl = 'Template cache ' . $this->_getTotalSizeAndCountAsText( '*.tpl.php' );
+
             // Create the delete form
             $form = new YDForm( 'clearCacheForm' );
-            $form->addElement( 'checkbox', 'cache_pub', 'Public cache', array( 'style' => 'border: none;' ) );
-            $form->addElement( 'checkbox', 'cache_tmb', 'Thumbnail cache', array( 'style' => 'border: none;' ) );
-            $form->addElement( 'checkbox', 'cache_web', 'Web download cache', array( 'style' => 'border: none;' ) );
-            $form->addElement( 'checkbox', 'cache_tpl', 'Template cache', array( 'style' => 'border: none;' ) );
+            $form->addElement( 'checkbox', 'cache_pub', $cache_pub_lbl, array( 'style' => 'border: none;' ) );
+            $form->addElement( 'checkbox', 'cache_tmb', $cache_tmb_lbl, array( 'style' => 'border: none;' ) );
+            $form->addElement( 'checkbox', 'cache_web', $cache_web_lbl, array( 'style' => 'border: none;' ) );
+            $form->addElement( 'checkbox', 'cache_tpl', $cache_tpl_lbl, array( 'style' => 'border: none;' ) );
             $form->addElement( 'submit', '_cmdSubmit', t( 'cleanup' ), array( 'class' => 'button' ) );
             $form->setDefaults( array( 'cache_pub' => 1, 'cache_web' => 1, 'cache_tmb' => 1, 'cache_tpl' => 1 ) );
 
+
             // Validate the form
             if ( $form->validate() == true ) {
 
@@ -64,13 +71,36 @@
 
         // Helper function to delete files
         function _deleteCacheFiles( $pattern ) {
-            $dir = new YDFSDirectory( YD_DIR_TEMP );
-            $filesToDelete = $dir->getContents( $pattern, null );
-            foreach ( $filesToDelete as $file ) {
+            $files = $this->_getFileList( $pattern );
+            foreach ( $files as $file ) {
                 @unlink( $file->getAbsolutePath() );
             }
         }
 
+        // Helper function to get the total file size and number of files
+        function _getTotalSizeAndCount( $pattern ) {
+            $count = 0;
+            $size  = 0;
+            $files = $this->_getFileList( $pattern );
+            foreach ( $files as $file ) {
+                $count++;
+                $size += $file->getSize();
+            }
+            return array( $count, $size );
+        }
+
+        // Get the total size and count as a piece of text
+        function _getTotalSizeAndCountAsText( $pattern ) {
+            $res = $this->_getTotalSizeAndCount( $pattern );
+            return sprintf( '(%s %s, %s)', $res[0], t('items'), YDStringUtil::formatFileSize( $res[0] ) );
+        }
+
+        // Get a filelist
+        function _getFileList( $pattern ) {
+            $dir = new YDFSDirectory( YD_DIR_TEMP );
+            return $dir->getContents( $pattern, null );
+        }
+
     }
 
     // Process the request



From pclaerhout at berlios.de  Mon Jul 10 15:47:55 2006
From: pclaerhout at berlios.de (pclaerhout at BerliOS)
Date: Mon, 10 Jul 2006 15:47:55 +0200
Subject: [ydf-devel] r1973 - YDFramework2.0/trunk/examples/weblog/manage
Message-ID: <200607101347.k6ADltwX004752@sheep.berlios.de>

Author: pclaerhout
Date: 2006-07-10 15:47:55 +0200 (Mon, 10 Jul 2006)
New Revision: 1973

Modified:
   YDFramework2.0/trunk/examples/weblog/manage/cache.php
Log:
The filesizes are now properly calculated in the cache section.

Modified: YDFramework2.0/trunk/examples/weblog/manage/cache.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/manage/cache.php	2006-07-10 13:44:30 UTC (rev 1972)
+++ YDFramework2.0/trunk/examples/weblog/manage/cache.php	2006-07-10 13:47:55 UTC (rev 1973)
@@ -92,7 +92,7 @@
         // Get the total size and count as a piece of text
         function _getTotalSizeAndCountAsText( $pattern ) {
             $res = $this->_getTotalSizeAndCount( $pattern );
-            return sprintf( '(%s %s, %s)', $res[0], t('items'), YDStringUtil::formatFileSize( $res[0] ) );
+            return sprintf( '(%s %s, %s)', $res[0], t('items'), YDStringUtil::formatFileSize( $res[1] ) );
         }
 
         // Get a filelist



From ydfpoi at gmail.com  Mon Jul 10 16:28:07 2006
From: ydfpoi at gmail.com (ydf poi)
Date: Mon, 10 Jul 2006 16:28:07 +0200
Subject: [ydf-devel] Re: weblog french translation
In-Reply-To: <4aef63030607100605t2eec06f6k3227a3051b3f76ff@mail.gmail.com>
References: <306340e00607071335r1c1afc90g9711b03055aca658@mail.gmail.com>
	 <306340e00607071340x2054c594w2498b9e3661b1db4@mail.gmail.com>
	 <4aef63030607100605t2eec06f6k3227a3051b3f76ff@mail.gmail.com>
Message-ID: <306340e00607100728w61a4df84g971ca30ed43810e8@mail.gmail.com>

Hi Pieter

my precedent mail wasn't clear:

$GLOBALS['t']['total_average_stats'] should be 'Totaux et moyennes'

Kind regards

2006/7/10, Pieter Claerhout <pieter at yellowduck.be>:
>
> Added in build 1971.
>
> pieter
>
> On 7/7/06, ydf poi <ydfpoi at gmail.com> wrote:
> >
> and i have forgotten:
>
> // manage/stats.tpl
> $GLOBALS['t']['total_average_stats'] = 'Totals et moyens';
>
> should be 'Totaux et moyennes'
>
> Thanks
> --
> po?
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://lists.berlios.de/mailman/listinfo/ydframework-devel
>
>
>
> --
> pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/


-- 
po?


From ximian at berlios.de  Wed Jul 12 23:57:27 2006
From: ximian at berlios.de (ximian at BerliOS)
Date: Wed, 12 Jul 2006 23:57:27 +0200
Subject: [ydf-devel] r1974 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200607122157.k6CLvRI0024999@sheep.berlios.de>

Author: ximian
Date: 2006-07-12 23:57:27 +0200 (Wed, 12 Jul 2006)
New Revision: 1974

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
Log:
form strings can now be translated using custom string definition _before_ the YDForm constructor, eg:

  $GLOBALS['t']['form_required'] = '(campo obrigatorio)';
  $GLOBALS['t']['form_error']    = 'Erro: ';

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-07-10 13:47:55 UTC (rev 1973)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-07-12 21:57:27 UTC (rev 1974)
@@ -86,8 +86,13 @@
 
             // Some static HTML things
             $this->_htmlRequiredStart =  '';
-            $this->_htmlRequiredEnd = ' <font color="red">(required)</font>';
-            $this->_htmlErrorStart = '<font color="red">Error: ';
+
+            // Check default translations
+            if( !isset( $GLOBALS['t']['form_required'] ) ) $GLOBALS['t']['form_required'] = '(required)';
+            if( !isset( $GLOBALS['t']['form_error'] ) )    $GLOBALS['t']['form_error'] = 'Error: ';
+
+            $this->_htmlRequiredEnd = ' <font color="red">' . t( 'form_required' ) . '</font>';
+            $this->_htmlErrorStart = '<font color="red">' . t( 'form_error' );
             $this->_htmlErrorEnd = '</font>';
             $this->_requiredNote = '';
 



From david_db at mail.berlios.de  Tue Jul 18 00:49:52 2006
From: david_db at mail.berlios.de (david_db at mail.berlios.de)
Date: Tue, 18 Jul 2006 00:49:52 +0200
Subject: [ydf-devel] r1975 -
	YDFramework2.0/trunk/examples/weblog/include/languages
Message-ID: <200607172249.k6HMnqf7028825@sheep.berlios.de>

Author: david_db
Date: 2006-07-18 00:49:40 +0200 (Tue, 18 Jul 2006)
New Revision: 1975

Added:
   YDFramework2.0/trunk/examples/weblog/include/languages/language_ptb.php
Log:
Added brazilian portuguese translation to YDWeblog by Jose Carlos Medeiros.

Added: YDFramework2.0/trunk/examples/weblog/include/languages/language_ptb.php
===================================================================
--- YDFramework2.0/trunk/examples/weblog/include/languages/language_ptb.php	2006-07-12 21:57:27 UTC (rev 1974)
+++ YDFramework2.0/trunk/examples/weblog/include/languages/language_ptb.php	2006-07-17 22:49:40 UTC (rev 1975)
@@ -0,0 +1,318 @@
+<?php
+
+// Portuguese/Brazil translation of YDWeblog.
+// Copyright (C) 2006 Free Software Foundation, Inc.
+// This file is distributed under the same license as the YDWeblog package.
+// Jose Carlos Medeiros <jose at psabs.com.br>, 2006.
+
+// General stuff
+$GLOBALS['t']['not_found'] = 'N&atilde;o Encontrado';
+$GLOBALS['t']['sorry_not_there'] = 'Desculpe, mas voc&ecirc; esta procurando por algo que n&atilde;o esta aqui.';
+$GLOBALS['t']['sorry_not_found'] = 'Desculpe, mas voc&ecirc; esta procurando por algo que n&atilde;o esta aqui.';
+$GLOBALS['t']['no_items_found'] = 'Desculpe, mas voc&ecirc; esta procurando por algo que n&atilde;o esta aqui.';
+$GLOBALS['t']['by'] = 'por';
+$GLOBALS['t']['required'] = 'obrigat&oacute;rio';
+$GLOBALS['t']['login'] = 'Usu&aacute;rio';
+$GLOBALS['t']['actions'] = 'A&ccedil;&otilde;es';
+$GLOBALS['t']['save'] = 'gravar';
+$GLOBALS['t']['edit'] = 'editar';
+$GLOBALS['t']['delete'] = 'apagar';
+$GLOBALS['t']['previous'] = 'anterior';
+$GLOBALS['t']['next'] = 'pr&oacute;ximo';
+$GLOBALS['t']['total'] = 'total';
+$GLOBALS['t']['of'] = 'de';
+$GLOBALS['t']['at'] = 'a';
+$GLOBALS['t']['title'] = 'T&iacute;tulo';
+$GLOBALS['t']['install_warning'] = 'Voc&ecirc; deve remover os arquivos install.php e install.tpl por quest&otilde;es de seguran&ccedil;a!';
+$GLOBALS['t']['home'] = 'Home';
+$GLOBALS['t']['view'] = 'visualizar';
+$GLOBALS['t']['author'] = 'Autor';
+$GLOBALS['t']['more'] = 'mais';
+$GLOBALS['t']['err_general'] = 'Ocorreu um erro';
+$GLOBALS['t']['back'] = 'Voltar';
+$GLOBALS['t']['yes'] = 'sim';
+$GLOBALS['t']['no'] = 'n&atilde;o';
+
+// __std_header.tpl
+$GLOBALS['t']['another_powered_by'] = 'Apenas mais um Blog gerado pelo ' . YD_FW_NAME . '!';
+
+// __std_footer.tpl
+$GLOBALS['t']['or'] = 'ou';
+$GLOBALS['t']['powered_by'] = 'Este Blog foi feito pelo';
+$GLOBALS['t']['syndicate_as'] = 'Divulge este Blog com o ';
+$GLOBALS['t']['syndicate_comments_as'] = 'Comente com o ';
+$GLOBALS['t']['syndicate_gallery_as'] = 'Guarde na Galeria com o ';
+$GLOBALS['t']['design_by'] = 'Desenhado por Michael Heilemann.';
+
+// __std_sidebar.tpl
+$GLOBALS['t']['weblogs'] = 'Weblogs';
+$GLOBALS['t']['weblog'] = 'Weblog';
+$GLOBALS['t']['pages'] = 'P&aacute;ginas';
+$GLOBALS['t']['page'] = 'P&aacute;gina';
+$GLOBALS['t']['archives'] = 'Arquivos';
+$GLOBALS['t']['archives_gallery'] = 'Galeria de Fotos';
+$GLOBALS['t']['categories'] = 'Categorias';
+$GLOBALS['t']['view_posts_filed_under'] = 'Ver todos os posts preenchido sob';
+$GLOBALS['t']['links'] = 'Links';
+$GLOBALS['t']['link_to'] = 'Criar Link para';
+$GLOBALS['t']['admin'] = 'Admin';
+
+// archive.tpl
+
+// category.tpl
+$GLOBALS['t']['archive_for_the'] = 'Arquivo de';
+$GLOBALS['t']['category'] = '';
+
+// index.tpl
+$GLOBALS['t']['posted_in'] = 'postado em';
+$GLOBALS['t']['older_items'] = 'Postagens velhas';
+
+// item.tpl
+$GLOBALS['t']['older_post'] = 'postagem mais velha';
+$GLOBALS['t']['newer_post'] = 'postagem mais nova';
+$GLOBALS['t']['posted_under'] = 'Postado:';
+$GLOBALS['t']['filed_under'] = ', esta em';
+$GLOBALS['t']['can_leave_comment'] = 'Voc&ecirc; pode <a href="#respond"> deixar um coment&aacute;rio</a>';
+$GLOBALS['t']['trackback'] = 'exibir';
+$GLOBALS['t']['from_your_site'] = 'em seu site.';
+$GLOBALS['t']['to'] = 'para';
+$GLOBALS['t']['says'] = 'diz';
+$GLOBALS['t']['leave_comment'] = 'Deixe um coment&aacute;rio';
+$GLOBALS['t']['error_comment'] = 'Erro ao adicionar seu coment&aacute;rio';
+$GLOBALS['t']['name'] = 'Nome';
+$GLOBALS['t']['mail_not_published'] = 'Email (n&atilde;o ser&aacute; publicado)';
+$GLOBALS['t']['website'] = 'Site';
+$GLOBALS['t']['submit_comment'] = 'Enviar o coment&aacute;rio';
+$GLOBALS['t']['ta_enter_url'] = 'Preencha a URL';
+$GLOBALS['t']['ta_enter_email'] = 'Preencha o email';
+$GLOBALS['t']['ta_enter_image'] = 'Preencha a URL completa da imagem';
+$GLOBALS['t']['err_name'] = 'O nome n&atilde;o foi preenchido';
+$GLOBALS['t']['err_name_email'] = 'O nome n&atilde;o deve ser um email';
+$GLOBALS['t']['err_email'] = 'O email est&aacute; inv&aacute;lido ou n&atilde;o foi preenchido';
+$GLOBALS['t']['err_website'] = 'A URL do Site est&aacute; inv&aacute;lida';
+$GLOBALS['t']['err_comment'] = 'O coment&aacute;rio n&atilde;o foi preenchido';
+$GLOBALS['t']['with'] = 'com';
+
+// comment_email.tpl
+$GLOBALS['t']['new_comment'] = 'Novo Coment&aacute;rio';
+$GLOBALS['t']['item_title'] = 'T&iacute;tulo';
+$GLOBALS['t']['wrote'] = 'escreveu';
+
+// page.tpl
+$GLOBALS['t']['created_on'] = 'Criado: ';
+$GLOBALS['t']['last_modified_on'] = '&Uacute;ltima altera&ccedil;&atilde;o: ';
+
+// Comments
+$GLOBALS['t']['no_comments_yet'] = 'Sem coment&aacute;rios';
+$GLOBALS['t']['comment'] = 'Coment&aacute;rio';
+$GLOBALS['t']['comments'] = 'Coment&aacute;rios';
+
+// manage/__mng_header.tpl
+$GLOBALS['t']['confirm_delete'] = 'Deseja realmente apagar:';
+$GLOBALS['t']['logoff'] = 'sair';
+$GLOBALS['t']['view_site'] = 'ver o site';
+$GLOBALS['t']['user'] = 'usu&aacute;rio';
+$GLOBALS['t']['server'] = 'Servidor';
+$GLOBALS['t']['h_shortcuts'] = 'Atalhos';
+$GLOBALS['t']['a_admin_home'] = 'Administra&ccedil;&atilde;o';
+$GLOBALS['t']['a_view_site'] = 'Ver o site';
+$GLOBALS['t']['h_contents'] = 'Conte&uacute;do';
+$GLOBALS['t']['a_weblogs'] = 'Weblogs';
+$GLOBALS['t']['a_items'] = 'Itens';
+$GLOBALS['t']['a_comments'] = 'Coment&aacute;rios';
+$GLOBALS['t']['a_links'] = 'Links';
+$GLOBALS['t']['a_pages'] = 'P&aacute;ginas';
+$GLOBALS['t']['a_images'] = 'Imagens';
+$GLOBALS['t']['a_categories'] = 'Categorias';
+$GLOBALS['t']['h_global_settings'] = 'Configura&ccedil;&otilde;es Globais';
+$GLOBALS['t']['a_users'] = 'Usu&aacute;rios';
+$GLOBALS['t']['a_settings'] = 'Configura&ccedil;&otilde;es';
+$GLOBALS['t']['h_maintenance'] = 'Manuten&ccedil;&atilde;o';
+$GLOBALS['t']['a_cleanup_cache'] = 'Cache';
+$GLOBALS['t']['a_server_info'] = 'Informa&ccedil;&otilde;es do Servidor';
+$GLOBALS['t']['h_statistics'] = 'Estat&iacute;sticas';
+$GLOBALS['t']['a_statistics'] = 'Estat&iacute;sticas';
+$GLOBALS['t']['h_logoff'] = 'Sair';
+$GLOBALS['t']['a_logoff'] = 'Sair';
+
+// manage/login.tpl
+$GLOBALS['t']['username'] = 'Usu&aacute;rio';
+$GLOBALS['t']['password'] = 'Senha';
+$GLOBALS['t']['msg_login'] = 'Por favor entre com seu usu&aacute;rio e senha';
+$GLOBALS['t']['err_login'] = 'Houve um problema durante o login';
+$GLOBALS['t']['err_username'] = 'Esta faltando o usu&aacute;rio';
+$GLOBALS['t']['err_password'] = 'A senha esta faltando ou esta incorreta';
+$GLOBALS['t']['err_login_all'] = 'Usu&aacute;rio e/ou a senha est&atilde;o incorreto(s)';
+
+// manage/cache.tpl
+$GLOBALS['t']['cleanup'] = 'Limpar Agora';
+$GLOBALS['t']['cleanup_cache'] = 'Limpar o Cache';
+$GLOBALS['t']['cache_cleaned_up'] = 'O Cache foi limpo!';
+
+// manage/serverinfo.tpl
+$GLOBALS['t']['system'] = 'Sistema';
+$GLOBALS['t']['server_name'] = 'Nome do Servidor';
+$GLOBALS['t']['server_address'] = 'Endere&ccedil;o IP do Servidor';
+$GLOBALS['t']['server_port'] = 'Porta';
+$GLOBALS['t']['server_software'] = 'Servidor Web';
+$GLOBALS['t']['operating_system'] = 'Sistema Operacional';
+$GLOBALS['t']['version'] = '';
+$GLOBALS['t']['loaded_modules'] = 'M&oacute;dulos Carregados';
+$GLOBALS['t']['server_api'] = 'API do Servidor';
+$GLOBALS['t']['registered_streams'] = 'PHP streams registradas';
+$GLOBALS['t']['include_path'] = ': Diret&oacute;rios de Include';
+$GLOBALS['t']['full_php_info'] = 'Informa&ccedil;&atilde;o completa do PHP';
+
+// manage/stats.tpl
+$GLOBALS['t']['general_stats'] = 'Estat&iacute;sticas Gerais';
+$GLOBALS['t']['installed_since'] = 'Instalado desde';
+$GLOBALS['t']['num_days_online'] = 'Esta no ar durante';
+$GLOBALS['t']['days'] = 'dia(s)';
+$GLOBALS['t']['hits'] = 'hit(s)';
+$GLOBALS['t']['total_hits'] = 'Total de hits';
+$GLOBALS['t']['avg_hits_per_day'] = 'M&eacute;dia de hits por dia';
+$GLOBALS['t']['hits_last_6_months'] = 'Hits dos &uacute;ltimos 6 meses';
+$GLOBALS['t']['all_months'] = 'Todos os Meses';
+$GLOBALS['t']['hits_last_7_days'] = 'Hits dos &uacute;ltimos 7 dias';
+$GLOBALS['t']['all_days'] = 'Todos os Dias';
+$GLOBALS['t']['nothing_found'] = 'Nada encontrado';
+$GLOBALS['t']['top_10_urls'] = 'As 10 URLs mais visitadas';
+$GLOBALS['t']['all_urls'] = 'Todas as URLs';
+$GLOBALS['t']['web_browsers'] = 'Navegadores';
+$GLOBALS['t']['operating_systems'] = 'Sistemas Operacionais';
+$GLOBALS['t']['other'] = 'Outro';
+$GLOBALS['t']['totalitems'] = 'Total de itens';
+$GLOBALS['t']['totalcomments'] = 'Total de coment&aacute;rios';
+$GLOBALS['t']['items'] = 'item(s)';
+$GLOBALS['t']['top_10_commenters'] = 'Os 10 comentaristas mais ativos';
+$GLOBALS['t']['all_commenters'] = 'Todos os comentaristas';
+
+// manage/users.tpl
+$GLOBALS['t']['useremail'] = 'Email';
+$GLOBALS['t']['created'] = 'Criado em';
+$GLOBALS['t']['add_user'] = 'Adicionar';
+$GLOBALS['t']['req_useremail'] = 'O email est&aacute; inv&aacute;lido ou n&atilde;o foi preenchido';
+$GLOBALS['t']['req_loginpass'] = 'Preencha a senha';
+$GLOBALS['t']['user_dup'] = 'O usu&aacute;rio j&aacute; existe';
+$GLOBALS['t']['change_user_desc'] = 'Alterando o usu&aacute;rio:';
+
+// manage/images.tpl
+$GLOBALS['t']['upload_image'] = 'Postar uma imagem';
+$GLOBALS['t']['ok'] = 'OK';
+$GLOBALS['t']['size'] = 'Tamanho';
+$GLOBALS['t']['type'] = 'Tipo';
+$GLOBALS['t']['dimensions'] = 'Dimens&otilde;es';
+$GLOBALS['t']['no_images_found'] = 'Nenhuma imagem encontrada';
+
+// manage/categories.tpl
+$GLOBALS['t']['add_category'] = 'Adicionar';
+$GLOBALS['t']['number_of_items'] = 'Itens';
+$GLOBALS['t']['change_category_desc'] = 'Editar a categoria';
+$GLOBALS['t']['err_category_title'] = 'Preencha o nome da categoria';
+$GLOBALS['t']['err_unique_category'] = 'A categoria j&aacute; existe';
+$GLOBALS['t']['no_categories_found'] = 'Nenhuma categoria encontrada';
+
+// manage/links.tpl
+$GLOBALS['t']['link_title'] = 'T&iacute;tulo';
+$GLOBALS['t']['link_url'] = 'URL';
+$GLOBALS['t']['add_link'] = 'Adicionar';
+$GLOBALS['t']['err_link_title'] = 'Preecha o t&iacute;tulo do link';
+$GLOBALS['t']['err_link_url'] = 'Preencha a URL do link';
+$GLOBALS['t']['err_unique_link'] = 'O link j&aacute; existe';
+$GLOBALS['t']['change_link_desc'] = 'Editar o link';
+$GLOBALS['t']['no_links_found'] = 'Nenhum link encontrado';
+$GLOBALS['t']['num_visits'] = 'Visitas';
+
+// manage/pages.tpl
+$GLOBALS['t']['add_page'] = 'Adicionar';
+$GLOBALS['t']['page_title'] = 'T&iacute;tulo';
+$GLOBALS['t']['page_body'] = 'Corpo';
+$GLOBALS['t']['change_page_desc'] = 'Editar a p&aacute;gina';
+$GLOBALS['t']['err_page_title'] = 'Preencha o t&iacute;tulo da p&aacute;gina';
+$GLOBALS['t']['err_page_body'] = 'Preencha o corpo da p&aacute;gina';
+$GLOBALS['t']['no_pages_found'] = 'Nenhuma p&aacute;gina encontrada';
+
+// manage/comments.tpl
+$GLOBALS['t']['date'] = 'Data';
+$GLOBALS['t']['parent'] = 'Item';
+$GLOBALS['t']['change_comment_desc'] = 'Editar o coment&aacute;rio';
+$GLOBALS['t']['mail'] = 'Email';
+$GLOBALS['t']['no_comments_found'] = 'Nenhum coment&aacute;rio encontrado';
+$GLOBALS['t']['posted_from'] = 'Postado a partir do IP';
+
+// manage/config.tpl
+$GLOBALS['t']['cfg_db_settings'] = 'Banco de Dados';
+$GLOBALS['t']['cfg_db_host'] = 'Servidor';
+$GLOBALS['t']['cfg_db_name'] = 'Nome do Banco';
+$GLOBALS['t']['cfg_db_user'] = 'Usu&aacute;rio';
+$GLOBALS['t']['cfg_db_pass'] = 'Senha';
+$GLOBALS['t']['cfg_weblog_settings'] = 'WebBlog';
+$GLOBALS['t']['cfg_weblog_title'] = 'T&iacute;tulo';
+$GLOBALS['t']['cfg_weblog_description'] = 'Descri&ccedil;&atilde;o';
+$GLOBALS['t']['cfg_weblog_entries_fp'] = 'N&uacute;mero de itens na p&aacute;gina inicial';
+$GLOBALS['t']['cfg_weblog_skin'] = 'Layout';
+$GLOBALS['t']['cfg_weblog_language'] = 'L&iacute;ngua';
+$GLOBALS['t']['cfg_weblog_date_format'] = 'Formato da data';
+$GLOBALS['t']['cfg_notification'] = 'Notifica&ccedil;&atilde;o';
+$GLOBALS['t']['cfg_notification_email_comment'] = 'Enviar email de novos coment&aacute;rios';
+$GLOBALS['t']['cfg_rss'] = 'Syndication';
+$GLOBALS['t']['cfg_rss_max_syndicated_items'] = 'N&uacute;mero m&aacute;ximo de itens Syndicate';
+$GLOBALS['t']['err_db_host'] = 'Preencha o servidor de Bando de Dados';
+$GLOBALS['t']['err_db_name'] = 'Preencha o Nome do Banco de Dados';
+$GLOBALS['t']['err_db_user'] = 'Preencha o Usu&aacute;rio do Banco de Dados';
+$GLOBALS['t']['err_weblog_title'] = 'Preencha o t&iacute;tulo do WebBlog';
+$GLOBALS['t']['err_weblog_entries_fp'] = 'Preencha os n&uacute;mero de itens na p&aacute;gina inicial';
+$GLOBALS['t']['err_weblog_entries_fp_num'] = 'Preencha com n&uacute;meros no campo de itens da p&aacute;gina inicial';
+$GLOBALS['t']['err_max_syndicated_items'] = 'Preencha o n&uacute;mero m&aacute;ximo de itens Syndicate';
+$GLOBALS['t']['err_max_syndicated_items_num'] = 'O n&uacute;mero de itens Syndicate deve ser num&eacute;rico';
+$GLOBALS['t']['change_config'] = 'Editar';
+$GLOBALS['t']['cfg_db_prefix'] = 'Prefixo das tabelas';
+$GLOBALS['t']['cfg_cache'] = 'Cache';
+$GLOBALS['t']['cfg_use_cache_comment'] = 'Fazer cache de p&aacute;ginas p&uacute;blicas';
+$GLOBALS['t']['cfg_friendly_urls'] = 'URLs amig&aacute;veis';
+
+// manage/item.tpl
+$GLOBALS['t']['item_title'] = 'T&iacute;tulo';
+$GLOBALS['t']['item_body'] = 'Corpo';
+$GLOBALS['t']['item_body_more'] = 'Corpo (extendido)';
+$GLOBALS['t']['select_image'] = 'Inserir imagem';
+$GLOBALS['t']['view'] = 'visualizar';
+$GLOBALS['t']['add_item'] = 'Adicionar';
+$GLOBALS['t']['change_item_desc'] = 'Editar';
+$GLOBALS['t']['err_item_title'] = 'Preecha o t&iacute;tulo do item';
+$GLOBALS['t']['err_item_body'] = 'Preecha o corpo do item';
+$GLOBALS['t']['gallery'] = 'Imagens';
+
+// item_gallery.tpl
+$GLOBALS['t']['no_images_yet'] = 'Sem imagens';
+$GLOBALS['t']['image'] = 'imagem';
+$GLOBALS['t']['images'] = 'imagens';
+$GLOBALS['t']['item'] = 'Item';
+
+// manage/index.tpl
+$GLOBALS['t']['latest_items'] = '&Uacute;ltimos itens';
+$GLOBALS['t']['overview'] = 'Vis&atilde;o Geral';
+
+// manage/dbbackup.tpl
+$GLOBALS['t']['a_db_backup'] = 'Backup do Banco';
+$GLOBALS['t']['bck_name'] = 'Arquivo de backup do Banco';
+$GLOBALS['t']['gz_compress'] = 'Compactar o backup utilizando a compress&atilde;o GZip';
+$GLOBALS['t']['backup'] = 'Backup';
+$GLOBALS['t']['err_bck_name'] = 'Preencha o nome do arquivo de Backup';
+$GLOBALS['t']['bck_name_comment'] = 'Utilize &quot;%DBNAME&quot; para o nome do banco e <a href="http://www.php.net/strftime" target="_blank">qualquer op&ccedil;&atilde;o strftime</a> para especificar a data. A extens&atilde;o ser&aacute; automaticamente preenchida. Qualquer outro texto ser&aacute; preservado.';
+$GLOBALS['t']['bck_type'] = 'Tipo do Backup';
+$GLOBALS['t']['bck_full'] = 'Backup completo (estrutura e dados)';
+$GLOBALS['t']['bck_structure_only'] = 'Somente a Estrutura';
+$GLOBALS['t']['bck_data_only'] = 'Somente os Dados';
+
+// manage/version_info.tpl
+$GLOBALS['t']['h_diagtools'] = 'Ferramentas de Diagn&oacute;stico';
+$GLOBALS['t']['a_version_info'] = 'Auto Atualizar';
+$GLOBALS['t']['version_check'] = 'Checar Vers&atilde;o';
+$GLOBALS['t']['installed_version'] = 'Vers&atilde;o instalada';
+$GLOBALS['t']['development_version'] = 'Vers&atilde;o de Desenvolvimento';
+$GLOBALS['t']['msg_correct_version'] = 'N&atilde;o existe nova vers&atilde;o dispon&iacute;vel';
+$GLOBALS['t']['msg_install_update'] = 'Nova vers&atilde;o dispon&iacute;vel';
+$GLOBALS['t']['development_changelog'] = 'Hist&oacute;rico de Altera&ccedil;&otilde;es de Desenvolvimento';
+
+?>



From muitocomplicado at gmail.com  Tue Jul 18 01:00:54 2006
From: muitocomplicado at gmail.com (David Bittencourt)
Date: Mon, 17 Jul 2006 20:00:54 -0300
Subject: [ydf-devel] Translations and gettext
Message-ID: <12260be20607171600y5449eabal521ce478c2d3fab7@mail.gmail.com>

Somebody asked me why we are not using gettext for translations. Someone
knows the answer?

-db
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060717/78a61d6c/attachment.html>

From francisco at fusemail.com  Tue Jul 18 01:14:29 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Tue, 18 Jul 2006 00:14:29 +0100
Subject: [ydf-devel] Translations and gettext
In-Reply-To: <12260be20607171600y5449eabal521ce478c2d3fab7@mail.gmail.com>
References: <12260be20607171600y5449eabal521ce478c2d3fab7@mail.gmail.com>
Message-ID: <44BC19D5.6070806@fusemail.com>

Hi db

> Somebody asked me why we are not using gettext for translations. Someone 
> knows the answer?

Well, afaik, it seems to be faster but the server must have a specific 
extension loaded (problems for 90% hosting out there).

I think it's better to have an application compatible with 90% of the 
hosting servers instead of only 10% with 50ms faster code.

Just my 0.02


regards
Francisco A


From muitocomplicado at gmail.com  Tue Jul 18 02:08:00 2006
From: muitocomplicado at gmail.com (David Bittencourt)
Date: Mon, 17 Jul 2006 21:08:00 -0300
Subject: [ydf-devel] Translations and gettext
In-Reply-To: <44BC19D5.6070806@fusemail.com>
References: <12260be20607171600y5449eabal521ce478c2d3fab7@mail.gmail.com>
	<44BC19D5.6070806@fusemail.com>
Message-ID: <12260be20607171708s2dc14925xa78bbb4b6acfcb44@mail.gmail.com>

That's what I said to him.

Thanks,

David

On 7/17/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
> Hi db
>
> > Somebody asked me why we are not using gettext for translations. Someone
> > knows the answer?
>
> Well, afaik, it seems to be faster but the server must have a specific
> extension loaded (problems for 90% hosting out there).
>
> I think it's better to have an application compatible with 90% of the
> hosting servers instead of only 10% with 50ms faster code.
>
> Just my 0.02
>
>
> regards
> Francisco A
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://bat.berlios.de/mailman/listinfo/ydframework-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060717/26f88dce/attachment.html>

From francisco at fusemail.com  Tue Jul 18 18:01:12 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Tue, 18 Jul 2006 17:01:12 +0100
Subject: [ydf-devel] YDDate::getYear
Message-ID: <44BD05C8.1020700@fusemail.com>

Hi db

Can you add a simple getYear method to YDDate that results the internal 
year of the object?


regards
Francisco A


From muitocomplicado at gmail.com  Tue Jul 18 20:26:02 2006
From: muitocomplicado at gmail.com (David Bittencourt)
Date: Tue, 18 Jul 2006 15:26:02 -0300
Subject: [ydf-devel] YDDate::getYear
In-Reply-To: <44BD05C8.1020700@fusemail.com>
References: <44BD05C8.1020700@fusemail.com>
Message-ID: <12260be20607181126x604fa8efn9398142859537683@mail.gmail.com>

If I do that I will have to create getDay, getMonth, getHours, getMinutes
and getSeconds. Also the setters, setDay, setMonth, etc.

The idea is to use the variables directly and not fill the code with more
functions.

Is it really necessary?

-db



On 7/18/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
> Hi db
>
> Can you add a simple getYear method to YDDate that results the internal
> year of the object?
>
>
> regards
> Francisco A
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://bat.berlios.de/mailman/listinfo/ydframework-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060718/ecafaa29/attachment.html>

From francisco at fusemail.com  Tue Jul 18 22:14:53 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Tue, 18 Jul 2006 21:14:53 +0100
Subject: [ydf-devel] YDDate::getYear
In-Reply-To: <12260be20607181126x604fa8efn9398142859537683@mail.gmail.com>
References: <44BD05C8.1020700@fusemail.com>
	<12260be20607181126x604fa8efn9398142859537683@mail.gmail.com>
Message-ID: <44BD413D.9040107@fusemail.com>

Hi db

> If I do that I will have to create getDay, getMonth, getHours, 
> getMinutes and getSeconds. Also the setters, setDay, setMonth, etc.
> 
> The idea is to use the variables directly and not fill the code with 
> more functions.

I see. But let me explain my point of view.
In the YDDate there are add's for almost any date element:

	$date->addSecond( 70 )
	$date->addMinute( 80 )
	$date->addHour( 24 )
	$date->addDay( 40 )
	$date->addMonth( 1 )
	$date->addYear( -20 )

but there get's too.. but no year:

	$date->getDayName()
	$date->getDayName( true )
	$date->getMonthName()

.. that's way i talk about some 'getYear'. Maybe something like:


	function getYear(){ return $this->year; }


regards
Francisco A






From muitocomplicado at gmail.com  Wed Jul 19 08:31:09 2006
From: muitocomplicado at gmail.com (David Bittencourt)
Date: Wed, 19 Jul 2006 03:31:09 -0300
Subject: [ydf-devel] YDDate::getYear
In-Reply-To: <44BD413D.9040107@fusemail.com>
References: <44BD05C8.1020700@fusemail.com>
	<12260be20607181126x604fa8efn9398142859537683@mail.gmail.com>
	<44BD413D.9040107@fusemail.com>
Message-ID: <12260be20607182331t612c8d58hc9c386abfca2bf8@mail.gmail.com>

The adds functions are for adding a number of days, hours, etc, to the
current date and is not intended to set a date.

You set the date like this

$date->day = 1;
$date->month = 2;
$date->year = 2006;

$date->addYear( 2 ); // result: 01/02/2008

Notice that the getDayName, getMonthName are specific to return the day and
month as strings like January, Monday, etc and not it's value 1, 2.

So if you want getYear we must add setYear that is different from addYear,
and so on...

That's not difficult to do, but will add a lot of documentation code that
will increase the file's size.

I know that in good OO we don't access the objects variables directly, but
this was easier.

Well, I don't need it, but if you think that this will be better, I can add
it.

-db

On 7/18/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
> Hi db
>
> > If I do that I will have to create getDay, getMonth, getHours,
> > getMinutes and getSeconds. Also the setters, setDay, setMonth, etc.
> >
> > The idea is to use the variables directly and not fill the code with
> > more functions.
>
> I see. But let me explain my point of view.
> In the YDDate there are add's for almost any date element:
>
>         $date->addSecond( 70 )
>         $date->addMinute( 80 )
>         $date->addHour( 24 )
>         $date->addDay( 40 )
>         $date->addMonth( 1 )
>         $date->addYear( -20 )
>
> but there get's too.. but no year:
>
>         $date->getDayName()
>         $date->getDayName( true )
>         $date->getMonthName()
>
> .. that's way i talk about some 'getYear'. Maybe something like:
>
>
>         function getYear(){ return $this->year; }
>
>
> regards
> Francisco A
>
>
>
>
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://bat.berlios.de/mailman/listinfo/ydframework-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060719/e3a05cba/attachment.html>

From francisco at fusemail.com  Wed Jul 19 20:04:34 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Wed, 19 Jul 2006 19:04:34 +0100
Subject: [ydf-devel] YDDate::getYear
In-Reply-To: <12260be20607182331t612c8d58hc9c386abfca2bf8@mail.gmail.com>
References: <44BD05C8.1020700@fusemail.com>	<12260be20607181126x604fa8efn9398142859537683@mail.gmail.com>	<44BD413D.9040107@fusemail.com>
	<12260be20607182331t612c8d58hc9c386abfca2bf8@mail.gmail.com>
Message-ID: <44BE7432.1040007@fusemail.com>

David Bittencourt wrote:
> The adds functions are for adding a number of days, hours, etc, to the 
> current date and is not intended to set a date.
> 
> You set the date like this
> 
> $date->day = 1;
> $date->month = 2;
> $date->year = 2006;
> 
> $date->addYear( 2 ); // result: 01/02/2008
> 
> Notice that the getDayName, getMonthName are specific to return the day 
> and month as strings like January, Monday, etc and not it's value 1, 2.
> 
> So if you want getYear we must add setYear that is different from 
> addYear, and so on...
> 
> That's not difficult to do, but will add a lot of documentation code 
> that will increase the file's size.
> 
> I know that in good OO we don't access the objects variables directly, 
> but this was easier.
> 
> Well, I don't need it, but if you think that this will be better, I can 
> add it.

Maybe just.. getDay(), getMonth() and getYear() are ok.


regards
Francisco A


From ximian at mail.berlios.de  Wed Jul 26 18:10:32 2006
From: ximian at mail.berlios.de (ximian at mail.berlios.de)
Date: Wed, 26 Jul 2006 18:10:32 +0200
Subject: [ydf-devel] r1976 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200607261610.k6QGAWQW019294@sheep.berlios.de>

Author: ximian
Date: 2006-07-26 18:10:19 +0200 (Wed, 26 Jul 2006)
New Revision: 1976

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
Log:
YDForm::getErrors now returns only unique error messages

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-07-17 22:49:40 UTC (rev 1975)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-07-26 16:10:19 UTC (rev 1976)
@@ -701,9 +701,7 @@
          *  This function returns all active error messages
          *
          *  @param $asString  (Optional) Boolean value that defines if we want a string or an array
-         *
-         *  @param $separator  (Optional) String that separates all messages (used when we want errors as string)
-         *
+         *  @param $separator  (Optional) String that separates all messages (used when we want errors as string)         *
          *  @param $initial  (Optional) String to prepend to all messages (used when we want errors as string)
          *
          *  @returns    An array/string containing all active error messages
@@ -711,7 +709,7 @@
         function getErrors( $asString = false, $separator = "\n", $initial = '' ) {
 
             // get form errors
-            $errors = array_values( $this->_errors );
+            $errors = array_unique( array_values( $this->_errors ) );
 
             // if we want a string, we must implode with custom separator and use initial string
             if ( $asString ) $errors = $initial . implode( $separator, $errors );



From ximian at mail.berlios.de  Wed Jul 26 18:25:27 2006
From: ximian at mail.berlios.de (ximian at mail.berlios.de)
Date: Wed, 26 Jul 2006 18:25:27 +0200
Subject: [ydf-devel] r1977 - in YDFramework2.0/trunk/YDFramework2: YDClasses
	YDClasses/YDCMComponent YDClasses/YDCMComponent/languages
	YDClasses/YDCMComponent/languages/YDCMUsers
	YDClasses/YDFormElements addons/YDCMHelpdesk addons/YDCMLink
	addons/YDCMPage addons/YDCMRootmenu
Message-ID: <200607261625.k6QGPRD5022095@sheep.berlios.de>

Author: ximian
Date: 2006-07-26 18:24:31 +0200 (Wed, 26 Jul 2006)
New Revision: 1977

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMAudit.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMComp.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMUsers.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/YDCMUsers/en.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/YDCMUsers/pt.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/en.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/pt.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Grid.php
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Grid.tpl
   YDFramework2.0/trunk/YDFramework2/addons/YDCMHelpdesk/YDCMHelpdesk.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMLink/YDCMLink.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
   YDFramework2.0/trunk/YDFramework2/addons/YDCMRootmenu/YDCMRootmenu.php
Log:
Another boost in YDCM development. Changes in structure, lots of new methods and cleanups

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/DBDesigner4.xml	2006-07-26 16:24:31 UTC (rev 1977)
@@ -1,7 +1,7 @@
 <?xml version="1.0" standalone="yes" ?>
 <DBMODEL Version="4.0">
 <SETTINGS>
-<GLOBALSETTINGS ModelName="YDCM scheme" IDModel="0" IDVersion="0" VersionStr="1.0.0.0" Comments="" UseVersionHistroy="1" AutoIncVersion="1" DatabaseType="MySQL" ZoomFac="72.00" XPos="103" YPos="95" DefaultDataType="5" DefaultTablePrefix="0" DefSaveDBConn="" DefSyncDBConn="" DefQueryDBConn="" Printer="" HPageCount="4.0" PageAspectRatio="1.440892512336408" PageOrientation="1" PageFormat="A4 (210x297 mm, 8.26x11.7 inches)" SelectedPages="" UsePositionGrid="1" PositionGridX="20" PositionGridY="20" TableNameInRefs="0" DefaultTableType="0" ActivateRefDefForNewRelations="1" FKPrefix="" FKPostfix="" CreateFKRefDefIndex="0" DBQuoteCharacter="`" CreateSQLforLinkedObjects="0" DefModelFont="Tahoma" CanvasWidth="4096" CanvasHeight="2842" />
+<GLOBALSETTINGS ModelName="YDCM scheme" IDModel="0" IDVersion="0" VersionStr="1.0.0.0" Comments="" UseVersionHistroy="1" AutoIncVersion="1" DatabaseType="MySQL" ZoomFac="74.00" XPos="466" YPos="71" DefaultDataType="5" DefaultTablePrefix="0" DefSaveDBConn="" DefSyncDBConn="" DefQueryDBConn="" Printer="" HPageCount="4.0" PageAspectRatio="1.440892512336408" PageOrientation="1" PageFormat="A4 (210x297 mm, 8.26x11.7 inches)" SelectedPages="" UsePositionGrid="1" PositionGridX="20" PositionGridY="20" TableNameInRefs="0" DefaultTableType="0" ActivateRefDefForNewRelations="1" FKPrefix="" FKPostfix="" CreateFKRefDefIndex="0" DBQuoteCharacter="`" CreateSQLforLinkedObjects="0" DefModelFont="Tahoma" CanvasWidth="4096" CanvasHeight="2842" />
 <DATATYPEGROUPS>
 <DATATYPEGROUP Name="Numeric Types" Icon="1" />
 <DATATYPEGROUP Name="Date and Time Types" Icon="2" />
@@ -258,15 +258,16 @@
 </SETTINGS>
 <METADATA>
 <REGIONS>
-<REGION ID="1635" RegionName="Portal Statistics ( YDCMStatistics )" XPos="140" YPos="720" Width="220" Height="380" RegionColor="2" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="51" />
-<REGION ID="1613" RegionName="Guestbook component ( YDCMGuestbook )" XPos="1180" YPos="640" Width="260" Height="240" RegionColor="1" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="45" />
-<REGION ID="1615" RegionName="Helpdesk component ( YDCMHelpdesk )" XPos="1180" YPos="920" Width="520" Height="380" RegionColor="5" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="46" />
-<REGION ID="1619" RegionName="Page component ( YDCMPage )" XPos="1180" YPos="160" Width="260" Height="260" RegionColor="1" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="49" />
-<REGION ID="1620" RegionName="Link component ( YDCMLink )" XPos="1180" YPos="460" Width="260" Height="140" RegionColor="5" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="50" />
-<REGION ID="1621" RegionName="MASTER COMPONENT ( YDCMComponent )" XPos="140" YPos="150" Width="960" Height="520" RegionColor="3" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="50" />
+<REGION ID="1789" RegionName="MASTER COMPONENT ( user management )" XPos="760" YPos="120" Width="580" Height="720" RegionColor="2" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="39" />
+<REGION ID="1635" RegionName="Portal Statistics ( YDCMStatistics )" XPos="660" YPos="880" Width="280" Height="220" RegionColor="2" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="51" />
+<REGION ID="1613" RegionName="Guestbook component ( YDCMGuestbook )" XPos="1460" YPos="640" Width="260" Height="240" RegionColor="1" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="45" />
+<REGION ID="1615" RegionName="Helpdesk component ( YDCMHelpdesk )" XPos="1460" YPos="940" Width="520" Height="380" RegionColor="5" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="46" />
+<REGION ID="1619" RegionName="Page component ( YDCMPage )" XPos="1460" YPos="120" Width="260" Height="260" RegionColor="1" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="49" />
+<REGION ID="1620" RegionName="Link component ( YDCMLink )" XPos="1460" YPos="440" Width="260" Height="140" RegionColor="5" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="50" />
+<REGION ID="1621" RegionName="MASTER COMPONENT ( content management )" XPos="140" YPos="120" Width="620" Height="720" RegionColor="3" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="50" />
 </REGIONS>
 <TABLES>
-<TABLE ID="1158" Tablename="YDCMAudit" PrevTableName="admin_log" XPos="500" YPos="490" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="2" >
+<TABLE ID="1158" Tablename="YDCMAudit" PrevTableName="admin_log" XPos="1100" YPos="620" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="2" >
 <COLUMNS>
 <COLUMN ID="1169" ColName="YDCMAudit_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement action">
 <OPTIONSELECTED>
@@ -274,35 +275,49 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1171" ColName="user_id" PrevColName="username" Pos="3" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="user id">
+<COLUMN ID="1172" ColName="permission_id" PrevColName="action" Pos="4" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="action object">
 <OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1173" ColName="permission_result" PrevColName="itemid" Pos="5" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="optional action result">
+<OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1170" ColName="date" PrevColName="timestamp" Pos="2" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="date of this action">
+<COLUMN ID="1170" ColName="date" PrevColName="timestamp" Pos="2" idDatatype="14" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="date of this action">
 <OPTIONSELECTED>
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1172" ColName="object" PrevColName="action" Pos="4" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="action object">
+<COLUMN ID="1754" ColName="date_time" PrevColName="" Pos="10" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="date and time of this action">
 <OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1749" ColName="browser" PrevColName="" Pos="6" idDatatype="20" DatatypeParams="(20)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="browser codename">
+<OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1174" ColName="object_action" PrevColName="itemname" Pos="6" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="action name of the above object">
+<COLUMN ID="1750" ColName="platform" PrevColName="" Pos="7" idDatatype="20" DatatypeParams="(20)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="operative system">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1173" ColName="object_id" PrevColName="itemid" Pos="5" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="action parameter">
+<COLUMN ID="1751" ColName="url" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="url for visitors only">
 <OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1752" ColName="hits" PrevColName="" Pos="9" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="Hits are used for visitors only (flood protection)">
+<OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
 </COLUMNS>
 <RELATIONS_END>
-<RELATION_END ID="1333" />
+<RELATION_END ID="1785" />
 </RELATIONS_END>
 <INDICES>
 <INDEX ID="1176" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
@@ -312,7 +327,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1160" Tablename="YDCMPage" PrevTableName="component_page" XPos="1200" YPos="200" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmpage` VALUES (1,  1, \aApache html all lang\a, \aApache xhtml all lang\a, 0, \a\a, 0, \a\a, \a\a);\n\nINSERT INTO `ydcmpage` VALUES (2,  1, \aPostgreSQL en html\a, \aPostgreSQL en xhtml\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (3,  1, \aPostgreSQL pt html\a, \aPostgreSQL pt xhtml\a, 0, \a\a, 0, \a\a, \a\a);\n\nINSERT INTO `ydcmpage` VALUES (4,  1, \amySQL en html\a, \amySQL en xhtml\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (5,  1, \amySQL pt html\a, \amySQL pt xhtml\a, 0, \a\a, 0, \a\a, \a\a);\n\nINSERT INTO `ydcmpage` VALUES (6, 1, \aDatabases html\a, \aDatabases xhtml\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (7, 1, \aBases de dados html\a, \aBases de dados xhtml\a, 0, \a\a, 0, \a\a, \a\a);\n\nINSERT INTO `ydcmpage` VA!
 LUES (8, 1, \aGenerators html\a, \aGenerators xhtml\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (9, 1, \aGeradores html\a, \aGeradores xhtml\a, 0, \a\a, 0, \a\a, \a\a);\n\nINSERT INTO `ydcmpage` VALUES (10, 1, \aPortals html\a, \aPortals xhtml\a, 0, \a\a, 0, \a\a, \a\a);\nINSERT INTO `ydcmpage` VALUES (11, 1, \aPortais html\a, \aPortais xhtml\a, 0, \a\a, 0, \a\a, \a\a);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="4" >
+<TABLE ID="1160" Tablename="YDCMPage" PrevTableName="component_page" XPos="1480" YPos="160" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmpage` (`component_id`,`current_version`,`html`,`xhtml`,`template_pack`,`template`,`metatags`,`description`,`keywords`) VALUES (1,1,\aApache html all lang\a,\aApache xhtml all lang\a,0,\a\a,0,\a\a,\a\a);\nINSERT INTO `ydcmpage` (`component_id`,`current_version`,`html`,`xhtml`,`template_pack`,`template`,`metatags`,`description`,`keywords`) VALUES (2,1,\aPostgreSQL en html\a,\aPostgreSQL en xhtml\a,0,\a\a,0,\a\a,\a\a);\nINSERT INTO `ydcmpage` (`component_id`,`current_version`,`html`,`xhtml`,`template_pack`,`template`,`metatags`,`description`,`keywords`) VALUES (3,1,\aPostgreSQL pt html\a,\aPostgreSQL pt xhtml\a,0,\a\a,0,\a\a,\a\a);\nINSERT INTO `ydcmpage` (`component_id`,`current_version`,`html`,`xhtml`,`template_pack`,`template`,`metatags`,`description`,`keywords`) VALUES (4!
 ,1,\amySQL en html\a,\amySQL en xhtml\a,0,\a\a,0,\a\a,\a\a);\nINSERT INTO `ydcmpage` (`component_id`,`current_version`,`html`,`xhtml`,`template_pack`,`template`,`metatags`,`description`,`keywords`) VALUES (5,1,\amySQL pt html\a,\amySQL pt xhtml\a,0,\a\a,0,\a\a,\a\a);\nINSERT INTO `ydcmpage` (`component_id`,`current_version`,`html`,`xhtml`,`template_pack`,`template`,`metatags`,`description`,`keywords`) VALUES (6,1,\aDatabases html\a,\aDatabases xhtml\a,0,\a\a,0,\a\a,\a\a);\nINSERT INTO `ydcmpage` (`component_id`,`current_version`,`html`,`xhtml`,`template_pack`,`template`,`metatags`,`description`,`keywords`) VALUES (7,1,\aBases de dados html\a,\aBases de dados xhtml\a,0,\a\a,0,\a\a,\a\a);\nINSERT INTO `ydcmpage` (`component_id`,`current_version`,`html`,`xhtml`,`template_pack`,`template`,`metatags`,`description`,`keywords`) VALUES (8,1,\aGenerators html\a,\aGenerators xhtml\a,0,\a\a,0,\a\a,\a\a);\nINSERT INTO `ydcmpage` (`component_id`,`current_version`,`html`,`xhtml`,`templat!
 e_pack`,`template`,`metatags`,`description`,`keywords`) VALUES!
  (9,1,\a
Geradores html\a,\aGeradores xhtml\a,0,\a\a,0,\a\a,\a\a);\nINSERT INTO `ydcmpage` (`component_id`,`current_version`,`html`,`xhtml`,`template_pack`,`template`,`metatags`,`description`,`keywords`) VALUES (10,1,\aPortals html\a,\aPortals xhtml\a,0,\a\a,0,\a\a,\a\a);\nINSERT INTO `ydcmpage` (`component_id`,`current_version`,`html`,`xhtml`,`template_pack`,`template`,`metatags`,`description`,`keywords`) VALUES (11,1,\aPortais html\a,\aPortais xhtml\a,0,\a\a,0,\a\a,\a\a);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="4" >
 <COLUMNS>
 <COLUMN ID="1732" ColName="component_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -364,7 +379,7 @@
 <RELATION_END ID="1704" />
 </RELATIONS_END>
 </TABLE>
-<TABLE ID="1162" Tablename="YDCMTree" PrevTableName="content" XPos="160" YPos="210" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmtree` VALUES (1,NULL,1,22,1,1,\aYDCMRoot\a,\a\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (2,1,2,3,2,1,\aYDCMRootmenu\a,\amenu Code Paste\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (3,1,4,5,2,1,\aYDCMRootmenu\a,\amenu Documentation\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (4,1,6,13,2,1,\aYDCMRootmenu\a,\amenu Books\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (5,4,7,8,3,1,\aYDCMPage\a,\aApache\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (6,4,9,10,3,1,\aYDCMPage\a,\aPostegreSQL\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (7,4,11,12,3,1,\aYDCMPage\a,\amysql\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (8,1,14,21,2,1,\aYDCMRootmenu\a,\alinks\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (9,8,15,16,3,1,\aYDCMPage\a,\adatabases\a,1,1,1,0,0,0,0);\!
 nINSERT INTO `ydcmtree` VALUES (10,8,17,18,3,1,\aYDCMPage\a,\agenerators\a,1,1,1,0,0,0,0);\nINSERT INTO `ydcmtree` VALUES (11,8,19,20,3,1,\aYDCMPage\a,\aportals\a,1,1,1,0,0,0,0);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="6" >
+<TABLE ID="1162" Tablename="YDCMTree" PrevTableName="content" XPos="160" YPos="180" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmtree` (`content_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`position`,`type`,`reference`,`state`,`access`,`searcheable`,`published_date_start`,`published_date_end`,`candrag`,`candrop`) VALUES (1,NULL,1,22,1,1,\aYDCMRoot\a,\a\a,7,1,1,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,0,0);\nINSERT INTO `ydcmtree` (`content_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`position`,`type`,`reference`,`state`,`access`,`searcheable`,`published_date_start`,`published_date_end`,`candrag`,`candrop`) VALUES (2,1,2,3,2,1,\aYDCMRootmenu\a,\amenu Code Paste\a,1,1,1,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,0,0);\nINSERT INTO `ydcmtree` (`content_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`position`,`type`,`reference`,`state`,`access`,`searcheable`,`published_date_start`,`published_date_end`,`cand!
 rag`,`candrop`) VALUES (3,1,4,5,2,1,\aYDCMRootmenu\a,\amenu Documentation\a,1,1,1,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,0,0);\nINSERT INTO `ydcmtree` (`content_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`position`,`type`,`reference`,`state`,`access`,`searcheable`,`published_date_start`,`published_date_end`,`candrag`,`candrop`) VALUES (4,1,6,13,2,1,\aYDCMRootmenu\a,\amenu Books\a,1,1,1,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,0,0);\nINSERT INTO `ydcmtree` (`content_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`position`,`type`,`reference`,`state`,`access`,`searcheable`,`published_date_start`,`published_date_end`,`candrag`,`candrop`) VALUES (5,4,7,8,3,1,\aYDCMPage\a,\aApache\a,1,1,1,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,0,0);\nINSERT INTO `ydcmtree` (`content_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`position`,`type`,`reference`,`state`,`access`,`searcheable`,`published_date_start`,`published_date_end`,`candrag`,`candrop`) VALUES (6,4,9,10,3,1,\aYDCMPa!
 ge\a,\aPostegreSQL\a,1,1,1,\a0000-00-00 00:00:00\a,\a0000-00-0!
 0 00:00:
00\a,0,0);\nINSERT INTO `ydcmtree` (`content_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`position`,`type`,`reference`,`state`,`access`,`searcheable`,`published_date_start`,`published_date_end`,`candrag`,`candrop`) VALUES (7,4,11,12,3,1,\aYDCMPage\a,\amysql\a,0,1,1,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,0,0);\nINSERT INTO `ydcmtree` (`content_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`position`,`type`,`reference`,`state`,`access`,`searcheable`,`published_date_start`,`published_date_end`,`candrag`,`candrop`) VALUES (8,1,14,21,2,1,\aYDCMRootmenu\a,\alinks\a,1,1,1,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,0,0);\nINSERT INTO `ydcmtree` (`content_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`position`,`type`,`reference`,`state`,`access`,`searcheable`,`published_date_start`,`published_date_end`,`candrag`,`candrop`) VALUES (9,8,15,16,3,1,\aYDCMPage\a,\adatabases\a,1,1,1,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,0,0);\nINSERT INTO `ydcmtree` (`content_id`,`parent_id`!
 ,`nleft`,`nright`,`nlevel`,`position`,`type`,`reference`,`state`,`access`,`searcheable`,`published_date_start`,`published_date_end`,`candrag`,`candrop`) VALUES (10,8,17,18,3,1,\aYDCMPage\a,\agenerators\a,1,1,1,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,0,0);\nINSERT INTO `ydcmtree` (`content_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`position`,`type`,`reference`,`state`,`access`,`searcheable`,`published_date_start`,`published_date_end`,`candrag`,`candrop`) VALUES (11,8,19,20,3,1,\aYDCMPage\a,\aportals\a,1,1,1,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,0,0);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="6" >
 <COLUMNS>
 <COLUMN ID="1191" ColName="content_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="Autoincrement id">
 <OPTIONSELECTED>
@@ -467,7 +482,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1163" Tablename="YDCMLink" PrevTableName="content_language" XPos="1200" YPos="500" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="7" >
+<TABLE ID="1163" Tablename="YDCMLink" PrevTableName="content_language" XPos="1480" YPos="460" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="7" >
 <COLUMNS>
 <COLUMN ID="1733" ColName="component_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -491,7 +506,7 @@
 <RELATION_END ID="1706" />
 </RELATIONS_END>
 </TABLE>
-<TABLE ID="1165" Tablename="YDCMLanguages" PrevTableName="languages" XPos="500" YPos="210" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmlanguages` VALUES (\aall\a,\aAll\a,1,0,0);\nINSERT INTO `ydcmlanguages` VALUES (\aen\a,\aEnglish\a,1,1,1);\nINSERT INTO `ydcmlanguages` VALUES (\apt\a,\aPortugu\234s\a,1,0,0);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="9" >
+<TABLE ID="1165" Tablename="YDCMLanguages" PrevTableName="languages" XPos="500" YPos="180" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmlanguages` VALUES (\aen\a,\aEnglish\a,1,1,1);\nINSERT INTO `ydcmlanguages` VALUES (\apt\a,\aPortugu\234s\a,1,0,0);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="9" >
 <COLUMNS>
 <COLUMN ID="1219" ColName="language_id" PrevColName="lang" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="language code">
 <OPTIONSELECTED>
@@ -534,50 +549,8 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1166" Tablename="YDCMStatistics_visits" PrevTableName="site_log" XPos="160" YPos="760" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="10" >
+<TABLE ID="1167" Tablename="YDCMStatistics_searches" PrevTableName="site_searches" XPos="680" YPos="920" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="11" >
 <COLUMNS>
-<COLUMN ID="1222" ColName="visit_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement id">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1224" ColName="date" PrevColName="timestamp" Pos="3" idDatatype="15" DatatypeParams="" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="visit date">
-<OPTIONSELECTED>
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1228" ColName="browser" PrevColName="" Pos="7" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="browser info">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1229" ColName="platform" PrevColName="" Pos="8" idDatatype="20" DatatypeParams="(255)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="user platform">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1624" ColName="url" PrevColName="" Pos="4" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1659" ColName="hits" PrevColName="" Pos="5" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="1" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-</COLUMNS>
-<INDICES>
-<INDEX ID="1230" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1222" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
-</INDICES>
-</TABLE>
-<TABLE ID="1167" Tablename="YDCMStatistics_searches" PrevTableName="site_searches" XPos="160" YPos="900" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="11" >
-<COLUMNS>
 <COLUMN ID="1231" ColName="search_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement id">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
@@ -602,7 +575,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1168" Tablename="YDCMUsers" PrevTableName="users" XPos="820" YPos="220" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmusers` VALUES (1,NULL,0,0,0,\aadmin\a,\a21232f297a57a5a743894a0e4a801fc3\a,\aname\a,\aemail at host.com\a,\aother info\a,\aen\a,1,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,0,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,0,\a0000-00-00 00:00:00\a);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="12" >
+<TABLE ID="1168" Tablename="YDCMUsers" PrevTableName="users" XPos="800" YPos="180" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmusers` (`user_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`username`,`password`,`name`,`email`,`other`,`language_id`,`state`,`login_start`,`login_end`,`login_counter`,`login_last`,`login_current`,`created_user`,`created_date`,`position`,`type`) VALUES (1,NULL,1,10,1,\a\a,\a\a,NULL,NULL,NULL,NULL,0,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,NULL,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,NULL,\a0000-00-00 00:00:00\a,1,\aYDCMRoot\a);\nINSERT INTO `ydcmusers` (`user_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`username`,`password`,`name`,`email`,`other`,`language_id`,`state`,`login_start`,`login_end`,`login_counter`,`login_last`,`login_current`,`created_user`,`created_date`,`position`,`type`) VALUES (2,1,4,9,1,\a\a,\a\a,NULL,NULL,NULL,NULL,1,\a0000-00-00 00:00:00\a,\a0000-00-00 !
 00:00:00\a,NULL,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,NULL,\a0000-00-00 00:00:00\a,1,\aYDCMUseradministrators\a);\nINSERT INTO `ydcmusers` (`user_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`username`,`password`,`name`,`email`,`other`,`language_id`,`state`,`login_start`,`login_end`,`login_counter`,`login_last`,`login_current`,`created_user`,`created_date`,`position`,`type`) VALUES (3,1,2,3,1,\a\a,\a\a,NULL,NULL,NULL,NULL,0,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,NULL,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,NULL,\a0000-00-00 00:00:00\a,1,\aYDCMUservisitors\a);\nINSERT INTO `ydcmusers` (`user_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`username`,`password`,`name`,`email`,`other`,`language_id`,`state`,`login_start`,`login_end`,`login_counter`,`login_last`,`login_current`,`created_user`,`created_date`,`position`,`type`) VALUES (100,2,5,9,1,\aadmin\a,\a21232f297a57a5a743894a0e4a801fc3\a,\aFrancisco JN Azevedo\a,\aemail at host.com\a,\aother info\a,\aen\a,1,\a!
 0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,523,\a2006-07-26!
  13:57:1
3\a,\a2006-07-26 16:48:15\a,0,\a0000-00-00 00:00:00\a,1,\aYDCMUseradministrator\a);\nINSERT INTO `ydcmusers` (`user_id`,`parent_id`,`nleft`,`nright`,`nlevel`,`username`,`password`,`name`,`email`,`other`,`language_id`,`state`,`login_start`,`login_end`,`login_counter`,`login_last`,`login_current`,`created_user`,`created_date`,`position`,`type`) VALUES (101,100,6,7,1,\afatima\a,\ab5d5f67b30809413156655abdda382a3\a,\aFatima\a,NULL,NULL,\apt\a,1,\a0000-00-00 00:00:00\a,\a0000-00-00 00:00:00\a,14,\a2006-07-19 16:02:35\a,\a2006-07-19 17:13:54\a,2,\a0000-00-00 00:00:00\a,1,\aYDCMUseradministrator\a);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="12" >
 <COLUMNS>
 <COLUMN ID="1238" ColName="user_id" PrevColName="id" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="autoincrement user id">
 <OPTIONSELECTED>
@@ -610,6 +583,11 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
+<COLUMN ID="1758" ColName="type " PrevColName="type_2" Pos="19" idDatatype="20" DatatypeParams="(100)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="\aYDCMVisitor\a" Comments="\aYDCMAdministrator\a or \aYDCMVisitor\a">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
 <COLUMN ID="1239" ColName="parent_id" PrevColName="parent" Pos="2" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="1" DefaultValue="0" Comments="optional parent of this user">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
@@ -634,6 +612,12 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
+<COLUMN ID="1769" ColName="position" PrevColName="" Pos="20" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="1" Comments="need for YDDatabaseTree but not used here">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
 <COLUMN ID="1244" ColName="username" PrevColName="" Pos="7" idDatatype="20" DatatypeParams="(100)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
@@ -703,11 +687,12 @@
 </COLUMN>
 </COLUMNS>
 <RELATIONS_START>
-<RELATION_START ID="1333" />
 <RELATION_START ID="1383" />
 <RELATION_START ID="1436" />
 <RELATION_START ID="1648" />
 <RELATION_START ID="1410" />
+<RELATION_START ID="1741" />
+<RELATION_START ID="1784" />
 </RELATIONS_START>
 <RELATIONS_END>
 <RELATION_END ID="1366" />
@@ -721,7 +706,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1367" Tablename="YDCMHelpdesk_posts" PrevTableName="Table_11" XPos="1200" YPos="960" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="20" >
+<TABLE ID="1367" Tablename="YDCMHelpdesk_posts" PrevTableName="Table_11" XPos="1480" YPos="980" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="20" >
 <COLUMNS>
 <COLUMN ID="1581" ColName="post_id" PrevColName="" Pos="13" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -759,32 +744,26 @@
 <OPTIONSELECTED>
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1377" ColName="creation_user" PrevColName="created_in" Pos="7" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
 <COLUMN ID="1600" ColName="creation_date" PrevColName="" Pos="13" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1379" ColName="reported_by_user" PrevColName="reported_by" Pos="9" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1379" ColName="reportedby_user" PrevColName="reported_by" Pos="9" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1380" ColName="reported_by_local" PrevColName="reported_to_in" Pos="10" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1380" ColName="reportedby_local" PrevColName="reported_to_in" Pos="10" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1381" ColName="reported_by_date" PrevColName="reported_to" Pos="11" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1381" ColName="reportedby_date" PrevColName="reported_to" Pos="11" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1676" ColName="reported_by_type" PrevColName="" Pos="16" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1676" ColName="reportedby_type" PrevColName="reported_by_type" Pos="16" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -825,7 +804,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1401" Tablename="YDCMHelpdesk_response" PrevTableName="Table_14" XPos="1500" YPos="980" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="26" >
+<TABLE ID="1401" Tablename="YDCMHelpdesk_response" PrevTableName="Table_14" XPos="1780" YPos="980" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="26" >
 <COLUMNS>
 <COLUMN ID="1403" ColName="response_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -866,7 +845,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1430" Tablename="YDCMLocks" PrevTableName="Table_15" XPos="500" YPos="380" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" >
+<TABLE ID="1430" Tablename="YDCMLocks" PrevTableName="Table_15" XPos="500" YPos="320" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" >
 <COLUMNS>
 <COLUMN ID="1578" ColName="lock_id" PrevColName="" Pos="2" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="lock ID">
 <OPTIONSELECTED>
@@ -886,6 +865,10 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
+<COLUMN ID="1787" ColName="datetime " PrevColName="" Pos="3" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="lock date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
 </COLUMNS>
 <RELATIONS_END>
 <RELATION_END ID="1436" />
@@ -899,7 +882,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1537" Tablename="YDCMGuestbook_posts" PrevTableName="Table_23" XPos="1200" YPos="680" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" >
+<TABLE ID="1537" Tablename="YDCMGuestbook_posts" PrevTableName="Table_23" XPos="1480" YPos="660" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" >
 <COLUMNS>
 <COLUMN ID="1539" ColName="post_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -959,7 +942,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1626" Tablename="YDCMStatistics_downloads" PrevTableName="Table_21" XPos="160" YPos="1000" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="50" >
+<TABLE ID="1626" Tablename="YDCMStatistics_downloads" PrevTableName="Table_21" XPos="680" YPos="1020" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="50" >
 <COLUMNS>
 <COLUMN ID="1631" ColName="download_is" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -985,7 +968,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1678" Tablename="YDCMComp" PrevTableName="Table_17" XPos="160" YPos="540" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmcomp` VALUES (1,   5, \aall\a, \aApache friends\a,0); \n\nINSERT INTO `ydcmcomp` VALUES (2,   6, \aen\a, \aPostGre en\a,0); \nINSERT INTO `ydcmcomp` VALUES (3,   6, \apt\a,  \aPostGre pt\a,0); \n\nINSERT INTO `ydcmcomp` VALUES (4,   7, \aen\a, \amySql howto\a,0); \nINSERT INTO `ydcmcomp` VALUES (5,   7, \apt\a,  \aajuda mySql\a,0);\n\nINSERT INTO `ydcmcomp` VALUES (6,   9, \aen\a, \aDatabases we use\a,0); \nINSERT INTO `ydcmcomp` VALUES (7,   9, \apt\a,  \aBases de dados\a,0);\n\nINSERT INTO `ydcmcomp` VALUES (8,  10,\aen\a, \aGenerators help\a,0); \nINSERT INTO `ydcmcomp` VALUES (9,  10,\apt\a,  \aAjuda sobre geradores\a,0);\n\nINSERT INTO `ydcmcomp` VALUES (10,11,\aen\a, \aPortals\a,0);\nINSERT INTO `ydcmcomp` VALUES (11,11,\apt\a,  \aPortais\a,0); \n" TableOptions="DelayKeyTbl!
 Updates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="46" >
+<TABLE ID="1678" Tablename="YDCMComp" PrevTableName="Table_17" XPos="160" YPos="520" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="INSERT INTO `ydcmcomp` (`component_id`,`content_id`,`language_id`,`title`,`version_default`,`version_date`,`version_user_id`) VALUES (1,5,\aen\a,\aApache friends\a,1,\a0000-00-00 00:00:00\a,1);\nINSERT INTO `ydcmcomp` (`component_id`,`content_id`,`language_id`,`title`,`version_default`,`version_date`,`version_user_id`) VALUES (2,6,\aen\a,\aPostGre en\a,1,\a0000-00-00 00:00:00\a,1);\nINSERT INTO `ydcmcomp` (`component_id`,`content_id`,`language_id`,`title`,`version_default`,`version_date`,`version_user_id`) VALUES (3,6,\apt\a,\aPostGre pt\a,1,\a0000-00-00 00:00:00\a,1);\nINSERT INTO `ydcmcomp` (`component_id`,`content_id`,`language_id`,`title`,`version_default`,`version_date`,`version_user_id`) VALUES (4,7,\aen\a,\amySql howto\a,1,\a2000-01-01 00:00:00\a,1);\nINSERT INTO `ydcmcomp` (`component_id`!
 ,`content_id`,`language_id`,`title`,`version_default`,`version_date`,`version_user_id`) VALUES (5,7,\apt\a,\aajuda mySql\a,1,\a0000-00-00 00:00:00\a,1);\nINSERT INTO `ydcmcomp` (`component_id`,`content_id`,`language_id`,`title`,`version_default`,`version_date`,`version_user_id`) VALUES (6,9,\aen\a,\aDatabases we use\a,1,\a0000-00-00 00:00:00\a,1);\nINSERT INTO `ydcmcomp` (`component_id`,`content_id`,`language_id`,`title`,`version_default`,`version_date`,`version_user_id`) VALUES (7,9,\apt\a,\aBases de dados\a,1,\a0000-00-00 00:00:00\a,1);\nINSERT INTO `ydcmcomp` (`component_id`,`content_id`,`language_id`,`title`,`version_default`,`version_date`,`version_user_id`) VALUES (8,10,\aen\a,\aGenerators help\a,1,\a2000-01-01 00:00:00\a,1);\nINSERT INTO `ydcmcomp` (`component_id`,`content_id`,`language_id`,`title`,`version_default`,`version_date`,`version_user_id`) VALUES (9,10,\apt\a,\aAjuda sobre geradores\a,1,\a2002-02-02 00:00:00\a,1);\nINSERT INTO `ydcmcomp` (`component_id`,`co!
 ntent_id`,`language_id`,`title`,`version_default`,`version_dat!
 e`,`vers
ion_user_id`) VALUES (10,11,\aen\a,\aPortals\a,1,\a0000-00-00 00:00:00\a,1);\nINSERT INTO `ydcmcomp` (`component_id`,`content_id`,`language_id`,`title`,`version_default`,`version_date`,`version_user_id`) VALUES (11,11,\apt\a,\aPortais\a,1,\a0000-00-00 00:00:00\a,1);\nINSERT INTO `ydcmcomp` (`component_id`,`content_id`,`language_id`,`title`,`version_default`,`version_date`,`version_user_id`) VALUES (12,8,\aen\a,\aMenu Links\a,1,\a0000-00-00 00:00:00\a,1);\nINSERT INTO `ydcmcomp` (`component_id`,`content_id`,`language_id`,`title`,`version_default`,`version_date`,`version_user_id`) VALUES (13,8,\apt\a,\aO meu menu de atalhos\a,1,\a0000-00-00 00:00:00\a,1);\nINSERT INTO `ydcmcomp` (`component_id`,`content_id`,`language_id`,`title`,`version_default`,`version_date`,`version_user_id`) VALUES (14,10,\aen\a,\aGener\a,0,\a3002-02-02 00:00:00\a,1);\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedO!
 bject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="46" >
 <COLUMNS>
 <COLUMN ID="1680" ColName="component_id" PrevColName="title_id" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -993,6 +976,12 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
+<COLUMN ID="1745" ColName="user_id" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="(10)" Width="0" Prec="0" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="User that created this element">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
 <COLUMN ID="1684" ColName="content_id" PrevColName="" Pos="3" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
@@ -1009,12 +998,16 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1683" ColName="rendered" PrevColName="" Pos="2" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="Element has a simple string as title or must be rendered">
+<COLUMN ID="1683" ColName="version_default" PrevColName="rendered" Pos="2" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="1" Comments="This is the default version">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
+<COLUMN ID="1737" ColName="version_date" PrevColName="default_date" Pos="5" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="Version created in this date">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
 </COLUMNS>
 <RELATIONS_START>
 <RELATION_START ID="1704" />
@@ -1025,6 +1018,7 @@
 <RELATIONS_END>
 <RELATION_END ID="1692" />
 <RELATION_END ID="1693" />
+<RELATION_END ID="1741" />
 </RELATIONS_END>
 <INDICES>
 <INDEX ID="1681" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
@@ -1034,23 +1028,84 @@
 </INDEX>
 </INDICES>
 </TABLE>
+<TABLE ID="1771" Tablename="YDCMPermissions" PrevTableName="Table_14" XPos="800" YPos="620" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" >
+<COLUMNS>
+<COLUMN ID="1781" ColName="permission_id" PrevColName="" Pos="7" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1773" ColName="user_id" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="(10)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="1" IsForeignKey="1" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1775" ColName="object" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1776" ColName="object_action" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1777" ColName="object_id" PrevColName="" Pos="3" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1778" ColName="schedule" PrevColName="" Pos="4" idDatatype="1" DatatypeParams="(1)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="0" Comments="This permission has start and date time">
+<OPTIONSELECTED>
+<OPTIONSELECT Value="1" />
+<OPTIONSELECT Value="0" />
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1779" ColName="date_start" PrevColName="" Pos="5" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1780" ColName="date_end" PrevColName="" Pos="6" idDatatype="15" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+</COLUMNS>
+<RELATIONS_START>
+<RELATION_START ID="1785" />
+</RELATIONS_START>
+<RELATIONS_END>
+<RELATION_END ID="1784" />
+</RELATIONS_END>
+<INDICES>
+<INDEX ID="1782" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
+<INDEXCOLUMNS>
+<INDEXCOLUMN idColumn="1781" LengthParam="0" />
+</INDEXCOLUMNS>
+</INDEX>
+</INDICES>
+</TABLE>
 </TABLES>
 <RELATIONS>
-<RELATION ID="1333" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1158" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="-22" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="-42" CaptionOffsetY="-25" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="14" />
-<RELATION ID="1366" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1168" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="38" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="38" CaptionOffsetY="19" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="19" />
-<RELATION ID="1383" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1367" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="5" EndIntervalOffsetY="-4" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="21" />
+<RELATION ID="1366" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1168" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="38" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="52" CaptionOffsetY="-24" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="19" />
+<RELATION ID="1383" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1367" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="5" EndIntervalOffsetY="-4" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="21" />
 <RELATION ID="1409" RelationName="post_id" Kind="2" SrcTable="1367" DestTable="1401" FKFields="post_id=post_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" />
-<RELATION ID="1436" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1430" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="26" CaptionOffsetY="4" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
+<RELATION ID="1436" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1430" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="6" CaptionOffsetY="4" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
 <RELATION ID="1437" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1430" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="12" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="31" CaptionOffsetY="-6" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="29" />
 <RELATION ID="1646" RelationName="parent_id" Kind="5" SrcTable="1162" DestTable="1162" FKFields="content_id=parent_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="1" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="51" />
 <RELATION ID="1648" RelationName="parent_id" Kind="5" SrcTable="1168" DestTable="1168" FKFields="user_id=parent_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="52" />
-<RELATION ID="1692" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1678" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="4" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="-41" CaptionOffsetY="-14" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="47" />
+<RELATION ID="1692" RelationName="content_id" Kind="2" SrcTable="1162" DestTable="1678" FKFields="content_id=content_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="-3" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="-44" CaptionOffsetY="-24" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="47" />
 <RELATION ID="1693" RelationName="language_id" Kind="2" SrcTable="1165" DestTable="1678" FKFields="language_id=language_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="31" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="19" CaptionOffsetY="-72" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="48" />
 <RELATION ID="1410" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1401" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="14" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" />
 <RELATION ID="1704" RelationName="component_id" Kind="2" SrcTable="1678" DestTable="1160" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="43" />
 <RELATION ID="1706" RelationName="component_id" Kind="2" SrcTable="1678" DestTable="1163" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="42" />
-<RELATION ID="1709" RelationName="component_id" Kind="2" SrcTable="1678" DestTable="1537" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="390" StartIntervalOffsetY="212" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="39" />
+<RELATION ID="1709" RelationName="component_id" Kind="2" SrcTable="1678" DestTable="1537" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="-4" StartIntervalOffsetX="-2" StartIntervalOffsetY="-53" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="39" />
 <RELATION ID="1712" RelationName="component_id" Kind="2" SrcTable="1678" DestTable="1367" FKFields="component_id=component_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="1" CaptionOffsetY="1" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="1" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="36" />
+<RELATION ID="1741" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1678" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" />
+<RELATION ID="1784" RelationName="user_id" Kind="2" SrcTable="1168" DestTable="1771" FKFields="user_id=user_id\n" FKFieldsComments="\n" relDirection="3" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="-35" CaptionOffsetY="-26" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" />
+<RELATION ID="1785" RelationName="permission_id" Kind="2" SrcTable="1771" DestTable="1158" FKFields="permission_id=permission_id\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="-1" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="38" />
 </RELATIONS>
 <NOTES>
 </NOTES>

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMAudit.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMAudit.php	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMAudit.php	2006-07-26 16:24:31 UTC (rev 1977)
@@ -48,13 +48,67 @@
 			$this->registerField( 'object' );
 			$this->registerField( 'object_action' );
 			$this->registerField( 'object_id' );
+			$this->registerField( 'browser' );
+			$this->registerField( 'platform' );
+			$this->registerField( 'url' );
 
 			// register custom relation
-            $relUsers = & $this->registerRelation( 'YDCMUsers', false, 'YDCMUsers' );
-			$relUsers->setLocalKey( 'user_id' );
-            $relUsers->setForeignKey( 'user_id' );
+            $rel = & $this->registerRelation( 'YDCMUsers', false, 'YDCMUsers' );
+			$rel->setLocalKey( 'user_id' );
+            $rel->setForeignKey( 'user_id' );
+			$rel->setForeignJoin( 'LEFT' );
 		}
 
 
+        /**
+         *  This function counts visits of a object
+         *
+         *  @param $id       Object id (content_id)
+         *  @param $user_id  (Optional) User id (0 means visitors)
+         *  @param $period   (Optional) Period for count. Valid values: 'week', 'month', year'
+         *
+         *  @returns    an array of labels => values
+         */
+		function getObjectVisits( $id, $user_id = 0, $period = 'week' ){
+		
+			YDInclude( 'YDDate.php' );
+		
+			// compute start date
+			$date = new YDDate();
+
+			$labels = array();
+			
+			if ( $period == 'week' )
+				for( $i = 0; $i < 7; $i++ ){
+					$labels[] = $date->getDayName();
+					$date->addDay( -1 );
+				}
+
+			if ( $period == 'month' )
+				for( $i = 0; $i < 4; $i++ ){
+					$labels[] = $date->getMonthName();
+					$date->addMonth( -1 );
+				}
+
+			if ( $period == 'year' )
+				for( $i = 0; $i < 3; $i++ ){
+					$labels[] = $date->getYear();
+					$date->addYear( -1 );
+				}
+
+			
+			$labels = array_reverse( $labels );
+
+		
+			$this->resetAll();
+			
+			$this->user_id = intval( $user_id );
+			
+		
+		}
+		
+		
+		
+
     }
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMComp.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMComp.php	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMComp.php	2006-07-26 16:24:31 UTC (rev 1977)
@@ -31,7 +31,7 @@
 
     class YDCMComp extends YDDatabaseObject {
     
-        function YDCMComp( $name ) {
+        function YDCMComp( $type, $id ) {
         
 			// init component as non default
             $this->YDDatabaseObject();
@@ -47,8 +47,10 @@
 
 			// register fields	
 			$this->registerField( 'title' );
-			$this->registerField( 'rendered' );
-			
+			$this->registerField( 'version_default' );
+			$this->registerField( 'version_date' );
+//			$this->registerField( 'user_id' );
+
 			// add static relations to tree and language
 			$this->registerField( 'content_id' );
        		$rel = & $this->registerRelation( 'YDCMTree', false, 'YDCMTree' );
@@ -60,31 +62,37 @@
 			$rel->setLocalKey( 'language_id' );
 			$rel->setForeignKey( 'language_id' );
 
+			$this->registerField( 'version_user_id' );
+       		$rel = & $this->registerRelation( 'YDCMUsers', false, 'YDCMUsers' );
+			$rel->setLocalKey( 'version_user_id' );
+			$rel->setForeignKey( 'user_id' );
+
 			// add dynamic relation
-       		$rel = & $this->registerRelation( $name, false, $name );
+       		$rel = & $this->registerRelation( $type, false, $type );
 			$rel->setLocalKey( 'component_id' );
 			$rel->setForeignKey( 'component_id' );
 			$rel->setForeignJoin( 'LEFT' );
+
+			// store component id
+			$this->_id = intval( $id );
 			
-//			$this->name = $name;
+			// store type for future use
+			$this->_type = $type;
 		}
 
 
         /**
          *  This function return an array of parent nodes giving an node id
          *
-         *  @param $id           Node id
-         *  @param $language_id  Language id
-         *
          *  @returns    An array with all parent nodes
          */
-		function getPath( $id, $language_id ){
+		function getPath(){
 		
 			// 1st step: GET nleft and nright of this node. yes, it's ugly.. 
 			// TODO: change it with a better tree implementation
-			$this->resetValues();
-			$this->content_id = intval( $id );
-			$this->language_id = $language_id;
+			$this->resetAll();
+			$this->content_id  = $this->_id;
+			$this->language_id = YDLocale::get();
 
 			if ( $this->find( 'ydcmtree' ) != 1 ) return array();
 
@@ -93,7 +101,7 @@
 			// 2nd step: GET parents (based on previous nleft and nright)
 			$this->resetAll();
 
-			$this->language_id = $language_id;
+			$this->language_id = YDLocale::get();
 			$this->where( 'YDCMTree.nleft  <= ' . intval( $node[ 'nleft' ] ) );
 			$this->where( 'YDCMTree.nright >= ' . intval( $node[ 'nright' ] ) );
 			$this->orderBy( 'YDCMTree.nlevel' );
@@ -106,30 +114,30 @@
         /**
          *  This function returns the path string to a node
          *
-         *  @param $id           Node id
-         *  @param $language_id  Language id
          *  @param $separator    Html separator string
-         *  @param $url          Url object for element links
          *  @param $classParents Html class for html links of parents
-         *  @param $classCurrent Url object for element links
+         *  @param $classCurrent Html class for span ( current element )
          *
          *  @returns    An html string
          */
-		function getBreadcrum( $id, $language_id, $separator, $url, $classParents, $classCurrent ){
+		function getBreadcrum( $separator, $classParents, $classCurrent ){
 
 			// init array for results
 			$res = array();
 
+			// init url object
+			$url = new YDUrl( YD_SELF_SCRIPT );
+
 			// cycle elements to get titles
-			foreach( $this->getPath( $id, $language_id ) as $elements ){
+			foreach( $this->getPath() as $elements ){
 			
 				// set url var ID to this element
 				$url->setQueryVar( 'id',        $elements[ 'component_id' ] );
 				$url->setQueryVar( 'component', $elements[ 'type' ] );
 
 				// compute class name
-				if ( $id != $elements[ 'content_id' ] ) $res[] = '<a class="' . $classParents . '" href="' . $url->getUrl() . '">' . $elements[ 'title' ] . '</a>';
-				else                                    $res[] = '<span class="' . $classCurrent . '">' . $elements[ 'title' ] . '</span>';
+				if ( $this->_id != $elements[ 'content_id' ] ) $res[] = '<a class="' . $classParents . '" href="' . $url->getUrl() . '">' . $elements[ 'title' ] . '</a>';
+				else                                           $res[] = '<span class="' . $classCurrent . '">' . $elements[ 'title' ] . '</span>';
 			}
 
 			// return html string
@@ -140,17 +148,14 @@
         /**
          *  This function returns an array with all direct children
          *
-         *  @param $id           Node id
-         *  @param $language_id  Language id
-         *
          *  @returns    An array with all direct children
          */
-		function getMenu( $id, $language_id ){
+		function getMenu(){
 		
-			$this->resetValues();
+			$this->resetAll();
 
-			$this->language_id = $language_id;
-			$this->where( 'YDCMTree.parent_id  = ' . intval( $id ) );
+			$this->language_id = YDLocale::get();
+			$this->where( 'YDCMTree.parent_id  = ' . $this->_id );
 			$this->find( 'ydcmtree' );
 			
 			return $this->getResults( false, false, false, false );
@@ -160,21 +165,19 @@
         /**
          *  This function will render all menu elements
          *
-         *  @param $id           Menu id
-         *  @param $language_id  Language id
-         *  @param $urlObj       YDUrl object
-         *
          *  @returns    An array with all direct children
          */
-		function renderMenu( $id, $language_id, $urlObj ){
+		function renderMenu(){
 
 			$menu = array();
 
+			$url = new YDUrl( YD_SELF_SCRIPT );
+
 			// render each element
-			foreach( $this->getMenu( $id, $language_id ) as $element ){
+			foreach( $this->getMenu() as $element ){
 
 				$el = new $element[ 'type' ];
-				$menu[] = $el->render( $element, &$urlObj );
+				$menu[] = $el->render( $element, &$url );
 			}
 
 			return $menu;
@@ -184,19 +187,16 @@
         /**
          *  This function return node attributes
          *
-         *  @param $id           Menu id
-         *  @param $language_id  Language id
-         *
          *  @returns    An array with all attributes
          */
-		function getNode( $id, $language_id ){
+		function getNode(){
 		
 			// delete previous stored values
-			$this->resetValues();
+			$this->resetAll();
 
 			// define our id to find		
-			$this->content_id = intval( $id );
-			$this->language_id = $language_id;
+			$this->content_id  = $this->_id;
+			$this->language_id = YDLocale::get();
 			
 			$this->limit( 1 );
 			
@@ -211,6 +211,67 @@
 			return $this->getValues( false, false, false, false );
 		}
 
+
+        /**
+         *  This function return node infomation
+         *
+         *  @returns    An array with all information: array( 'description' => .., 'versions' => .., 'versions_total' => .. )
+         */
+		function getInfo(){
+		
+			// delete previous stored values
+			$this->resetAll();
+
+			// define our id to find		
+			$this->content_id  = $this->_id;
+
+			// order versions by version date
+			$this->orderBy( 'version_date', 'desc' );
+			
+			// find node
+			$this->find( 'ydcmtree', 'ydcmusers', strtolower( $this->_type ) );
+
+			$versions = $this->getResultsAsAssocArray( array( 'language_id', 'version_date' ) );
+			
+			// init description and total of versions
+			$description    = array();
+			$versions_total = 0;
+
+			// cycle versions, count and get first description (they must be all the same)
+			foreach( $versions as $v => $arr ){
+			
+				$versions_total += count( $arr );
+			
+				if ( empty( $description ) ) $description = array_values( $arr );
+			}
+
+			// parse publish dates
+			if ( $description[0][ 'YDCMTree_state' ] != 2 ){
+				$description[0][ 'YDCMTree_published_date_start_trans' ] = t('not applicable');
+				$description[0][ 'YDCMTree_published_date_end_trans' ]   = t('not applicable');
+			}
+
+			// parse access
+			if ( $description[0][ 'YDCMTree_access' ] == 1 ) $description[0][ 'YDCMTree_access_trans' ] = t('public');
+			else                                             $description[0][ 'YDCMTree_access_trans' ] = t('private');
+
+			// parse state
+			switch ($description[0][ 'YDCMTree_state' ]){
+				case 0 : $description[0][ 'YDCMTree_state_trans' ] = t('not published'); break;
+				case 1 : $description[0][ 'YDCMTree_state_trans' ] = t('published');     break;
+				case 2 : $description[0][ 'YDCMTree_state_trans' ] = t('schedule');      break;
+			}
+
+			// parse searcheable
+			if ( $description[0][ 'YDCMTree_searcheable' ] == 1 ) $description[0][ 'YDCMTree_searcheable_trans' ] = t('yes');
+			else                                                  $description[0][ 'YDCMTree_searcheable_trans' ] = t('no');
+
+			// return the information array
+			return array(	'description'    => $description[0],
+							'versions'       => $versions,
+							'versions_total' => $versions_total );
+		}
+
 }
 
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMUsers.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMUsers.php	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/YDCMUsers.php	2006-07-26 16:24:31 UTC (rev 1977)
@@ -29,13 +29,7 @@
 	// add local translation directory
 	YDLocale::addDirectory( dirname( __FILE__ ) . '/languages/YDCMUsers/' );
 
-	// set user form name
-	YDConfig::set( 'YDCMUSERS_FORMUSER', 'YDCMUsersForm', false );
 
-	// set password form name
-	YDConfig::set( 'YDCMUSERS_FORMPASSWORD', 'YDCMUsersFormPassword', false );
-
-
     class YDCMUsers extends YDDatabaseObject {
     
         function YDCMUsers() {
@@ -72,26 +66,45 @@
 			$this->registerField( 'created_user' );
 			$this->registerField( 'created_date' );
 
-			// custom relations
-            $relLocks = & $this->registerRelation( 'YDCMLocks', false, 'YDCMLocks' );
-			$relLocks->setLocalKey( 'user_id' );
-            $relLocks->setForeignKey( 'user_id' );
-			$relLocks->setForeignJoin( 'LEFT' );
-			
-            $relLanguages = & $this->registerRelation( 'YDCMLanguages', false, 'YDCMLanguages' );
-			$relLanguages->setLocalKey( 'language_id' );
-            $relLanguages->setForeignKey( 'language_id' );
+			// relation with lock table
+            $rel = & $this->registerRelation( 'YDCMLocks', false, 'YDCMLocks' );
+			$rel->setLocalKey( 'user_id' );
+            $rel->setForeignKey( 'user_id' );
+			$rel->setForeignJoin( 'LEFT' );
 
-			// setup tree (NOT USED YET)
-			$this->tree = new YDDatabaseTree( 'default', 'YDCMUsers', 'content_id', 'parent_id', 'parent_id' );
+			// relation with languages table
+            $rel = & $this->registerRelation( 'YDCMLanguages', false, 'YDCMLanguages' );
+			$rel->setLocalKey( 'language_id' );
+            $rel->setForeignKey( 'language_id' );
+
+			// TODO: tree position is required
+			$this->tree = new YDDatabaseTree( 'default', 'YDCMUsers', 'user_id', 'parent_id', 'parent_id' );
+
+			// add tree fields
+			$this->tree->addField( 'parent_id' );
+			$this->tree->addField( 'type' );
+			$this->tree->addField( 'state' );
+			$this->tree->addField( 'name' );
+
+			// init user form
+			$this->form = new YDForm( 'YDCMUsers' );
 		}
 
 
         /**
-         *  This function returns the id of the current user
+         *  This function sets the user id of this user object
          *
-         *  @returns    User id if user exists, false otherwise
+         *  @param $id  User id
          */
+		function setId( $id ){
+		
+			$this->id = $id;
+		}
+
+
+        /**
+         *  This function returns the id of the current user
+         */
 		function currentID(){
 		
 			// reset user values
@@ -107,7 +120,19 @@
 			return $this->user_id;
 		}
 
+
         /**
+         *  This function returns all sub users
+         *
+         *  @returns    all tree elements 
+         */
+		function getTreeElements(){
+
+			return $this->tree->getDescendants( $this->id, true );
+		}
+
+
+        /**
          *  This function checks if a username and password are valid
          *
          *  @param $username  User username
@@ -192,57 +217,103 @@
          */
 		function changeCurrentUserForm( $formvalues = array() ){
 
-			// get user YDForm object
-			$form = $this->getFormUser();
-
 			// check form validation
-			if ( !$form->validate( $formvalues ) )
-				return $form->getErrors();
+			if ( !$this->form->validate( $formvalues ) )
+				return $this->form->getErrors();
 
-			return $this->changeCurrentUser( $form->getValues() );
+			return $this->changeCurrentUser( $this->form->getValues() );
 		}
 		
 
         /**
-         *  This function return the user form
-         *
-         *  @returns    form object
+         *  This function creates an user details form
+		 *
+		 * @param $username   1: Username is a span, 2: Username is a text box
+		 * @param $password   0: Password is not showed, 1: Password is showed
          */
-		function getFormUser(){
+		function addFormDetails( $username = 1, $password = 0 ){
 
-			// create languages and templates object
+			// add username
+			if ( $username == 1 ) $this->form->addElement( 'span',     'username', t('user_username') );
+			else                  $this->form->addElement( 'text',     'username', t('user_username') );
+
+			// add password
+			if ( $password == 1 ) $this->form->addElement( 'password', 'password', t('user_password') );
+
+			// add name
+            $this->form->addElement( 'text',      'name',         t('user_name'),     array('size' => 50, 'maxlength' => 255) );
+			$this->form->addRule(    'name',      'maxlength',    t('name too big'),  255 );
+
+			// add email
+            $this->form->addElement( 'text',      'email',        t('user_email') );
+			$this->form->addRule(    'email',     'email',        t('email not valid') );
+
+			// add other info textare
+            $this->form->addElement( 'textarea',  'other',        t('user_other'),    array('rows' => 4, 'cols' => 30) );
+			$this->form->addRule(    'other',     'maxlength',    t('other too big'), 5000 );
+
+			// add languages select box
 			$languages = YDCMComponent::module( 'YDCMLanguages' );
+			$this->form->addElement( 'select',      'language_id',  t('user_language'),      array(), $languages->active() );
+			$this->form->addRule(    'language_id', 'in_array',     t('language not valid'), array_keys( $languages->active() ) );
+
+			// add template select box
 			$templates = YDCMComponent::module( 'YDCMTemplates' );
+            $this->form->addElement( 'select',    'template',     t('user_template'),      array(), $templates->admin_templates() );
+			$this->form->addRule(    'template',  'in_array',     t('template not valid'), array_keys( $templates->admin_templates() ) );
 
-			// create form object
-            $form = new YDForm( YDConfig::get( 'YDCMUSERS_FORMUSER' ) );
+			// add user details
+            $this->form->addElement( 'span', 'login_start',  t('login_start') );
+            $this->form->addElement( 'span', 'login_end',    t('login_end') );
+            $this->form->addElement( 'span', 'login_counter',t('login_counter') );
+            $this->form->addElement( 'span', 'login_last',   t('login_last') );
+            $this->form->addElement( 'span', 'login_current',t('login_current') );
+            $this->form->addElement( 'span', 'created_user', t('created_user') );
+            $this->form->addElement( 'span', 'created_date', t('created_date') );
+		}
 
-	        $form->addElement( 'span',      'username',     t('user_username') );
-            $form->addElement( 'text',      'name',         t('user_name'),     array('size' => 50, 'maxlength' => 255) );
-            $form->addElement( 'text',      'email',        t('user_email') );
-            $form->addElement( 'textarea',  'other',        t('user_other'),    array('rows' => 4, 'cols' => 30) );
-            $form->addElement( 'select',    'language_id',  t('user_language'), array(), $languages->active() );
-            $form->addElement( 'select',    'template',     t('user_template'), array(), $templates->admin_templates() );
-            $form->addElement( 'span',      'login_start',  t('login_start') );
-            $form->addElement( 'span',      'login_end',    t('login_end') );
-            $form->addElement( 'span',      'login_counter',t('login_counter') );
-            $form->addElement( 'span',      'login_last',   t('login_last') );
-            $form->addElement( 'span',      'login_current',t('login_current') );
-            $form->addElement( 'span',      'created_user', t('created_user') );
-            $form->addElement( 'span',      'created_date', t('created_date') );
 
-			// add rules
-			$form->addRule( 'name',        'maxlength', t('name too big'),       255 );
-			$form->addRule( 'email',       'email',     t('email not valid') );
-			$form->addRule( 'other',       'maxlength', t('other too big'),      5000 );
-			$form->addRule( 'language_id', 'in_array',  t('language not valid'), array_keys( $languages->active() ) );
-			$form->addRule( 'template',    'in_array',  t('template not valid'), array_keys( $templates->admin_templates() ) );
+        /**
+         *  This function creates an user form for password changing
+         *
+         * @param $oldpassword  0: don't include old password box; 1: include old password box
+         */
+		function addFormPassword( $oldpassword = 1 ){
 
-			return $form;
+			// add old password box
+			if ( $oldpassword == 1 )
+            	$this->form->addElement( 'password', 'old',         t('password_old'),         array('size' => 20, 'maxlength' => 31) );
+
+			// add new password box and confirmation box
+            $this->form->addElement( 'password', 'new',         t('password_new'),         array('size' => 30, 'maxlength' => 31) );
+            $this->form->addElement( 'password', 'new_confirm', t('password_new_confirm'), array('size' => 30, 'maxlength' => 31) );
+
+			// add rules to all passwords
+			$this->form->addRule( array( 'old', 'new', 'new_confirm' ), 'required',     t('passwords are required') );
+			$this->form->addRule( array( 'old', 'new', 'new_confirm' ), 'maxlength',    t('passwords too big'), 31 );
+			$this->form->addRule( array( 'old', 'new', 'new_confirm' ), 'alphanumeric', t('passwords not alphanumeric') );
+
+			// add compare rule to new password and confirmation password
+			$this->form->addCompareRule( array( 'new', 'new_confirm' ), 'equal', t('passwords dont match') );
 		}
 
 
         /**
+         *  This returns the user form
+         *
+         *  @param $defaults  (Optional) default values to apply in form
+         *
+         *  @returns    YDForm object
+         */
+		function getForm( $defaults = false ){
+
+			if ( is_array( $defaults ) ) $this->form->setDefaults( $defaults );
+
+			return $this->form;
+		}
+
+
+        /**
          *  This function updates the current user password
          *
          *  @param $oldpassword  Old user password
@@ -256,12 +327,13 @@
 			if ( !$this->valid( $_SERVER['PHP_AUTH_USER'], $_SERVER['PHP_AUTH_PW'] ) ) return false;
 
 			// reset values added from valid method
-			$this->resetValues();
+			$this->resetAll();
 
 			// set new password
 			$this->password = md5( $newpassword );
 
 			// change only current user
+			// TODO: escape 'username'
 			$this->where( 'username = "' .      $_SERVER['PHP_AUTH_USER'] . '"' );
 			$this->where( 'password = "' . md5( $_SERVER['PHP_AUTH_PW'] ) . '"' );
 			$this->where( 'password = "' . md5( $oldpassword )            . '"' );
@@ -282,59 +354,56 @@
          */
 		function changeCurrentUserPasswordForm( $formvalues = array() ){
 
-			// get password form
-			$form = $this->getFormPassword();
-
 			// check form validation
-			if ( !$form->validate( $formvalues ) )
-				return $form->getErrors();
+			if ( !$this->form->validate( $formvalues ) )
+				return $this->form->getErrors();
 
-			return $this->changeCurrentUserPassword( $form->getValue( 'old' ), $form->getValue( 'new' ) );
+			return $this->changeCurrentUserPassword( $this->form->getValue( 'old' ), $this->form->getValue( 'new' ) );
 		}
 
 
         /**
-         *  This function return the form of password changing
+         *  This function return the current user attributes
          *
-         *  @returns    form object
+         *  @returns    current user id
          */
-		function getFormPassword(){
+		function getCurrentUser( $translate = false ){
+		
+			// get current user id
+			return $this->getUser( $this->currentID(), $translate );
 
-			// create form object
-            $form = new YDForm( YDConfig::get( 'YDCMUSERS_FORMPASSWORD' ) );
+		}
 
-			// add form elements
-            $form->addElement( 'password', 'old',         t('password_old'),         array('size' => 20, 'maxlength' => 31) );
-            $form->addElement( 'password', 'new',         t('password_new'),         array('size' => 30, 'maxlength' => 31) );
-            $form->addElement( 'password', 'new_confirm', t('password_new_confirm'), array('size' => 30, 'maxlength' => 31) );
 
-			// add rules
-			$form->addRule( array( 'old', 'new', 'new_confirm' ), 'required',     t('passwords are required') );
-			$form->addRule( array( 'old', 'new', 'new_confirm' ), 'maxlength',    t('passwords too big'), 31 );
-			$form->addRule( array( 'old', 'new', 'new_confirm' ), 'alphanumeric', t('passwords not alphanumeric') );
+		function getUser( $id, $translate = false ){
 
-			// add compare rule
-			$form->addCompareRule( array( 'new', 'new_confirm' ), 'equal', t('passwords dont match') );
+			$this->resetValues();
 
-			return $form;
-		}
+			// set user id
+			$this->user_id = intval( $id );
 
-
-        /**
-         *  This function return the current user attributes
-         *
-         *  @returns    current user id
-         */
-		function getCurrentUser(){
-		
-			$this->resetValues();
-			
-			// get current user id
-			$this->user_id = $this->currentID();
-			
 			// get all attributes
-			$this->find();
+			if ( $this->find() != 1 ) return false;
 
+			// password should always empty
+			$this->password = '';
+
+			// check if we want human readable elements
+			if ( $translate ){
+
+				// check if state not schedule
+				if ( $this->state != 2 ){
+					$this->login_start = t('not applicable');
+					$this->login_end   = t('not applicable');
+				}
+
+				// check if user is root
+				if ( $this->created_user == 0 ){
+					$this->created_user = t('not applicable');
+					$this->created_date = t('not applicable');
+				}
+			}
+
 			// return values
 			return $this->getValues();
 		}

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/YDCMUsers/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/YDCMUsers/en.php	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/YDCMUsers/en.php	2006-07-26 16:24:31 UTC (rev 1977)
@@ -2,6 +2,7 @@
 
 // USER FORM
 $GLOBALS['t']['user_username'] = 'Username';
+$GLOBALS['t']['user_password'] = 'Password';
 $GLOBALS['t']['user_name'] = 'Name';
 $GLOBALS['t']['user_email'] = 'Email';
 $GLOBALS['t']['user_other'] = 'Other';

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/YDCMUsers/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/YDCMUsers/pt.php	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/YDCMUsers/pt.php	2006-07-26 16:24:31 UTC (rev 1977)
@@ -2,6 +2,7 @@
 
 // USER FORM
 $GLOBALS['t']['user_username'] = 'Username';
+$GLOBALS['t']['user_password'] = 'Password';
 $GLOBALS['t']['user_name'] = 'Nome';
 $GLOBALS['t']['user_email'] = 'Email';
 $GLOBALS['t']['user_other'] = 'Outras informa&ccedil;oes';

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/en.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/en.php	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/en.php	2006-07-26 16:24:31 UTC (rev 1977)
@@ -1,5 +1,7 @@
 <?php
 
+$GLOBALS['t']['ydcmpage'] = 'Page';
+
 $GLOBALS['t']['save'] = 'Save';
 $GLOBALS['t']['close'] = 'Close';
 $GLOBALS['t']['open'] = 'Open';
@@ -17,10 +19,32 @@
 $GLOBALS['t']['total'] = 'Total';
 $GLOBALS['t']['previous'] = 'Previous';
 $GLOBALS['t']['next'] = 'Next';
-
-$GLOBALS['t']['add page'] = 'Add page';
+$GLOBALS['t']['state'] = 'State';
+$GLOBALS['t']['add'] = 'Add';
+$GLOBALS['t']['add component'] = 'Add component';
+$GLOBALS['t']['move'] = 'Move';
+$GLOBALS['t']['move up'] = 'Move up';
+$GLOBALS['t']['move down'] = 'Move down';
+$GLOBALS['t']['edit'] = 'Edit';
+$GLOBALS['t']['properties'] = 'Properties';
 $GLOBALS['t']['please wait'] = 'Please wait';
 
+$GLOBALS['t']['visitor'] = 'Visitor';
+$GLOBALS['t']['visitors'] = 'Visitors';
+$GLOBALS['t']['administrator'] = 'Administrator';
+$GLOBALS['t']['administrators'] = 'Administrators';
+
+$GLOBALS['t']['published'] = 'Published';
+$GLOBALS['t']['not published'] = 'Not published';
+$GLOBALS['t']['schedule'] = 'Schedule';
+
+$GLOBALS['t']['translate'] = 'Translate';
+$GLOBALS['t']['translate to'] = 'Translate to';
+
+$GLOBALS['t']['total versions'] = 'Total of versions';
+$GLOBALS['t']['general config'] = 'General configuration';
+$GLOBALS['t']['content versions'] = 'Versions';
+
 $GLOBALS['t']['content'] = 'Content';
 $GLOBALS['t']['general view'] = 'General view';
 $GLOBALS['t']['statistics'] = 'Statistics';

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/pt.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/pt.php	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent/languages/pt.php	2006-07-26 16:24:31 UTC (rev 1977)
@@ -1,5 +1,7 @@
 <?php
 
+$GLOBALS['t']['YDCMPage'] = 'P&aacute;gina';
+
 $GLOBALS['t']['save'] = 'Guardar';
 $GLOBALS['t']['close'] = 'Fechar';
 $GLOBALS['t']['open'] = 'Abrir';
@@ -17,10 +19,28 @@
 $GLOBALS['t']['total'] = 'Total';
 $GLOBALS['t']['previous'] = 'Anterior';
 $GLOBALS['t']['next'] = 'Seguinte';
-
-$GLOBALS['t']['add page'] = 'Adicionar p&aacute;gina';
+$GLOBALS['t']['state'] = 'Estado';
+$GLOBALS['t']['add'] = 'Adicionar';
+$GLOBALS['t']['add component'] = 'Adicionar component';
+$GLOBALS['t']['move'] = 'Mover';
+$GLOBALS['t']['move up'] = 'Mover para cima';
+$GLOBALS['t']['move down'] = 'Mover para baixo';
+$GLOBALS['t']['edit'] = 'Editar';
+$GLOBALS['t']['properties'] = 'Propriedades';
 $GLOBALS['t']['please wait'] = 'Por favor aguarde';
 
+$GLOBALS['t']['visitor'] = 'Visitante';
+$GLOBALS['t']['visitors'] = 'Visitantes';
+$GLOBALS['t']['administrator'] = 'Administrador';
+$GLOBALS['t']['administrators'] = 'Administradores';
+
+$GLOBALS['t']['translate'] = 'Traduzir';
+$GLOBALS['t']['translate to'] = 'Traduzir para';
+
+$GLOBALS['t']['total versions'] = 'Total de vers?es';
+$GLOBALS['t']['general config'] = 'Configura??o geral';
+$GLOBALS['t']['content versions'] = 'Vers?es';
+
 $GLOBALS['t']['content'] = 'Conte&uacute;do';
 $GLOBALS['t']['general view'] = 'Vista geral';
 $GLOBALS['t']['statistics'] = 'Estat&iacute;sticas';
@@ -30,4 +50,6 @@
 $GLOBALS['t']['audit'] = 'Auditoria';
 $GLOBALS['t']['user management'] = 'Gest&atilde;o de utilizadores';
 $GLOBALS['t']['general configuration'] = 'Configura&ccedil;&atilde;o geral';
+
+
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDCMComponent.php	2006-07-26 16:24:31 UTC (rev 1977)
@@ -29,16 +29,16 @@
 	// include YDF libs
     YDInclude( 'YDDatabaseObject.php' );
 	YDInclude( 'YDDatabaseTree.php' );
+	YDInclude( 'YDUrl.php' );
 
 	require_once( dirname( __FILE__ ) . '/YDCMComponent/YDCMComp.php' );
 
 	// add generic translation directory
 	YDLocale::addDirectory( dirname( __FILE__ ) . '/YDCMComponent/languages/' );
 
-
     class YDCMComponent extends YDDatabaseObject {
 
-        function YDCMComponent( $name, $standardComponent = true ) {
+        function YDCMComponent( $type, $id ) {
 
 			// init DB object
             $this->YDDatabaseObject();
@@ -52,7 +52,7 @@
             $this->registerDatabase();
 
 			// register table for this component
-            $this->registerTable( $name );
+            $this->registerTable( $type );
 
 			// add standard relation
 			$this->registerField( 'component_id' );
@@ -60,26 +60,53 @@
 			$rel->setLocalKey( 'component_id' );
 			$rel->setForeignKey( 'component_id' );
 
+			// add comp object
+			$this->comp = new YDCMComp( $type, $id );
+			
+			$this->_id = intval( $id );
+		}
+
+
+        /**
+         *  This function sets a new id for this component
+         *
+         *  @param $id           Component id
+         */
+		function setId( $id ){
+
+			// set id for all operations in this class
+			$this->_id       = intval( $id );
+
+			// set id for internal YDComp object
+			$this->comp->_id = intval( $id );
+		}
+
+
+        /**
+         *  This function renders this element for menu
+         *
+         *  @returns    The YDDatabaseTree object for YDComponent static methods
+         */
+		function __getYDDatabaseTree(){
+		
 			// TODO: position is required and we must change order from 'parent_id' to 'parent_id ASC, position ASC'
-			$this->tree = new YDDatabaseTree( 'default', 'YDCMTree', 'content_id', 'parent_id', 'parent_id' );
+			$tree = new YDDatabaseTree( 'default', 'YDCMTree', 'content_id', 'parent_id', 'parent_id' );
 
 			// TODO: set sort by parent & position
-			// $this->tree->setSortField( 'parent_id ASC, position ASC' );
+			// $tree->setSortField( 'parent_id ASC, position ASC' );
 
 			// add tree fields
-			$this->tree->addField( 'type' );
-			$this->tree->addField( 'state' );
-			$this->tree->addField( 'reference' );
-			$this->tree->addField( 'access' );
-			$this->tree->addField( 'searcheable' );
-			$this->tree->addField( 'published_date_start' );
-			$this->tree->addField( 'published_date_end' );
-			$this->tree->addField( 'candrag' );
-			$this->tree->addField( 'candrop' );
-
-			// add comp object
-			if ( $standardComponent )
-				$this->comp = new YDCMComp( $name );
+			$tree->addField( 'type' );
+			$tree->addField( 'state' );
+			$tree->addField( 'reference' );
+			$tree->addField( 'access' );
+			$tree->addField( 'searcheable' );
+			$tree->addField( 'published_date_start' );
+			$tree->addField( 'published_date_end' );
+			$tree->addField( 'candrag' );
+			$tree->addField( 'candrop' );
+			
+			return $tree;		
 		}
 
 
@@ -91,7 +118,6 @@
          *
          *  @returns    An html string
          */
-
 		function render( $id, $url ){
 		
 			return '';
@@ -101,33 +127,53 @@
         /**
          *  This function will render a menu
          *
-         *  @param $id           Menu id
-         *  @param $language_id  Language id
-         *  @param $urlObj       Url object
-         *
          *  @returns    An array with all direct children
          */
-		function renderMenu( $id, $language_id, $urlObj ){
+		function renderMenu(){
 		
-			return $this->comp->renderMenu( $id, $language_id, $urlObj );
+			return $this->comp->renderMenu();
 		}
 
 
         /**
-         *  This function returns node attributes
+         *  This function returns all node attributes
          *
-         *  @param $id           Menu id
-         *  @param $language_id  Language id
-         *
          *  @returns    An array with node attributes
          */
-		function getNode( $id, $language = 'all' ){
+		function getNode(){
+
+			// check if we have already node attributes (some sort of caching)
+			if ( !isset( $this->__nodeProperties ) ) 
+				$this->__nodeProperties = $this->comp->getNode();
 		
-			return $this->comp->getNode( $id, $language );
+			return $this->__nodeProperties;
 		}
 
 
+		function getInfo(){
+		
+			return $this->comp->getInfo();
+		}
+
         /**
+         *  This function returns a node attribute
+         *
+         *  @param $attribute           Attribute name
+         *
+         *  @returns    The node attribute
+         */
+		function get( $attribute ){
+
+			$node = $this->getNode();
+
+			// return attribute if exists 
+			if ( isset( $node[ $attribute ] ) ) return $node[ $attribute ];
+
+			return false;
+		}
+
+
+        /**
          *  This static function returns an YDCMComponent module
          *
          *  @returns    an module object
@@ -147,10 +193,17 @@
          *  This function returns all elements (except root)
          *
          *  @returns    all tree elements 
+         *  @static
          */
-		function getTreeElements(){
+		function getTreeElements( $id = null ){
 
-			return $this->tree->getDescendants( 1 );
+			// init db tree object
+			$tree = YDCMComponent::__getYDDatabaseTree();
+
+			// check if we have a custom id
+			if( is_null( $id ) ) $id = $this->_id;
+
+			return $tree->getDescendants( $id );
 		}
 
 
@@ -161,10 +214,11 @@
          *  @param $y  Id of dropable node
          *
          *  @returns    false if elements are invalid, an associative array with node types (eg: array( $x => 'PHCMPage', $y => 'PHCMRootmenu ))'
+         *  @static
          */
 		function getDragDropElements( $x = null, $y = null ){
 		
-			// get object tree
+			// get tree module
 			$treeObj = YDCMComponent::module( 'YDCMTree' );
 
 			// check drop validation
@@ -175,50 +229,38 @@
         /**
          *  This function returns the path to current node
          *
-         *  @param $id           (Optional) Node id
-         *  @param $language_id  (Optional) Language id
-         *
          *  @returns    An array with all parents
          */
-		function getPath( $id = 0, $language_id = 'all' ){
+		function getPath(){
 
-			return $this->comp->getPath( $id, $language_id );
+			return $this->comp->getPath();
 		}
 
 
         /**
          *  This function returns all direct elements of a menu
          *
-         *  @param $id           (Optional) Menu id
-         *  @param $language_id  (Optional) Language id
-         *
          *  @returns    An array with all direct children
          */
-		function getMenu( $id = 0, $language_id = 'all' ){
+		function getMenu(){
 
-			return $this->comp->getMenu( $id, $language_id );
+			return $this->comp->getMenu();
 		}
 
 
         /**
          *  This function returns the path string to current node
          *
-         *  @param $id           (Optional) Node id
-         *  @param $language_id  (Optional) Language id
          *  @param $separator    (Optional) Html separator string
-         *  @param $url          (Optional) Url object for element links
          *  @param $classParents (Optional) Html class for html links of parents
          *  @param $classCurrent (Optional) Url object for element links
          *
          *  @returns    An html string
          */
-		function getBreadcrum( $id = 0, $language_id = 'all', $separator = ' &gt; ', $url = null, $classParents = 'breadParents', $classCurrent = 'breadCurrent' ){
+		function getBreadcrum( $separator = ' &gt; ', $classParents = 'breadParents', $classCurrent = 'breadCurrent' ){
 
-			// if url object is not set we use the current url
-			if( is_null( $url ) ) $url = new YDUrl( YD_SELF_SCRIPT );
-
 			// get breadcrum from component
-			return $this->comp->getBreadcrum( $id, $language_id, $separator, $url, $classParents, $classCurrent );
+			return $this->comp->getBreadcrum( $separator, $classParents, $classCurrent );
 		}
 
 
@@ -267,47 +309,34 @@
 
 
         /**
-         *  This function changes component state
+         *  This function sets a node state
          *
-         *  @param $id  The node id
+         *  @param $state      The state code
          *
-         *  @returns    true if state changed, false otherwise
-         *
+         *  @returns    1 if state changed, 0 otherwise
          */
-		function toogleState( $id ){
+		function setState( $state, $id = null ){
 
-			// get node values
-			$old_node = $this->tree->getNode( $id );
+			// init db tree object
+			$tree = YDCMComponent::__getYDDatabaseTree();
 
-			// change state attribute
-			if ( $old_node[ 'state' ] == 0 ) return $this->setState( $id, 1 );
-			else                             return $this->setState( $id, 0 );
+			// check if static
+			if( is_null( $id ) ) $id = $this->_id;
+
+			return $tree->updateNode( array( 'state' => $state ), $id );
 		}
 
 
         /**
-         *  This function sets a node state
+         *  This function deletes the tree part of a component only
          *
-         *  @param $id         The node id
-         *  @param $state      The state code
-         *
-         *  @returns    1 if state changed, 0 otherwise
          */
-		function setState( $id, $state ){
-		
-			return $this->tree->updateNode( array( 'state' => $state ), $id );
-		}
+		function deleteNode(){
 
+			// init db tree object
+			$tree = YDCMComponent::__getYDDatabaseTree();
 
-        /**
-         *  This function deletes the tree part of a component only
-         *
-         *  @param $id  The node id
-         *
-         */
-		function deleteNode( $id ){
-		
-			return $this->tree->deleteNode( intval( $id ) );
+			return $tree->deleteNode( $this->_id );
 		}
 
 
@@ -318,8 +347,11 @@
          */
 		function addNode( $values, $parent_id = null ){
 
-			// user YDDatabasetree method
-			return $this->tree->addNode( $values, $parent_id );
+			// init db tree object
+			$tree = YDCMComponent::__getYDDatabaseTree();
+
+			// use YDDatabasetree method
+			return $tree->addNode( $values, $parent_id );
 		}
 
 
@@ -330,8 +362,11 @@
          */
 		function updateNode( $values, $node_id = null ){
 
-			// user YDDatabasetree method
-			return $this->tree->updateNode( $values, $node_id );
+			// init db tree object
+			$tree = YDCMComponent::__getYDDatabaseTree();
+
+			// use YDDatabasetree method
+			return $tree->updateNode( $values, $node_id );
 		}
 
 
@@ -342,8 +377,11 @@
          */
 		function moveNode( $x, $y ){
 
+			// init db tree object
+			$tree = YDCMComponent::__getYDDatabaseTree();
+
 			// use YDDatabasetree method
-			return $this->tree->moveNode( $x, $y );
+			return $tree->moveNode( $x, $y );
 		}
 
 

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Grid.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Grid.php	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Grid.php	2006-07-26 16:24:31 UTC (rev 1977)
@@ -65,7 +65,7 @@
 			$this->columns = array();
 			
 			// default values
-			$this->defaults = array();
+//			$this->defaults = array();
 			
 			$this->form = new YDForm( 'gridform' . $name );
 			$this->form->addElement( 'hidden', 'gr_column',    '', array('id' => 'gr_column') );
@@ -92,7 +92,7 @@
          *      @param $method  Method name where to send events
          *
          */
-		function setAjax( &$ajax, $method ){
+		function setAjax( &$ajax, $method = 'PHCMHelpdesk_reload' ){
 		
 			$ajax->addForm( $this->form );
 			$ajax->addEvent( 'ticketReload()', $method, $this->form->getName() );
@@ -146,14 +146,17 @@
             );
             $attribs = array_merge( $this->_attributes, $attribs );
 
+			$template_record = new YDTemplate();
+
 			// set form defaults
-			if ( isset ( $this->defaults ) ) $this->form->setDefaults( $this->defaults );
+			if ( isset ( $this->defaults ) ){
+				$this->form->setDefaults( $this->defaults );
+				$template_record->assign( 'defaults',  $this->defaults );
+			}
 
 			// get record template and assign recordset
-			$template_record = new YDTemplate();
 			$template_record->assign( 'recordset', $this->_value );
 			$template_record->assign( 'columns',   $this->columns );
-			$template_record->assign( 'defaults',  $this->defaults );
 			$template_record->assignForm( 'form',  $this->form );
 
             // Get the HTML

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Grid.tpl
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Grid.tpl	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDFormElements/YDFormElement_Grid.tpl	2006-07-26 16:24:31 UTC (rev 1977)
@@ -1,3 +1,4 @@
+<span id="ticket_table">
 
 <table width="100%" border="0">
   <tr>
@@ -50,3 +51,4 @@
             <td align="right" class="field_total">{t w="total"}: {$recordset->totalRows}&nbsp;&nbsp;</td>
           </tr>
         </table>
+</span>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMHelpdesk/YDCMHelpdesk.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMHelpdesk/YDCMHelpdesk.php	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMHelpdesk/YDCMHelpdesk.php	2006-07-26 16:24:31 UTC (rev 1977)
@@ -185,12 +185,11 @@
 			$this->registerField( 'urgency_id' );
 			$this->registerField( 'state_id' );
 			$this->registerField( 'text' );
-			$this->registerField( 'creation_user' );
 			$this->registerField( 'creation_date' );
-			$this->registerField( 'reported_by_user' );
-			$this->registerField( 'reported_by_type' );
-			$this->registerField( 'reported_by_local' );
-			$this->registerField( 'reported_by_date' );
+			$this->registerField( 'reportedby_user' );
+			$this->registerField( 'reportedby_type' );
+			$this->registerField( 'reportedby_local' );
+			$this->registerField( 'reportedby_date' );
 			$this->registerField( 'assignedto_user' );
 			$this->registerField( 'assignedto_type' );
 			$this->registerField( 'assignedto_local' );
@@ -237,37 +236,37 @@
 			// create a form for new posts
             $form = new YDForm( YDConfig::get( 'YDCMHELPDESK_FORMPOST' ) );
 
-			// get urgencies
-			$urgencies = new YDCMHelpdesk_urgency();
-			$urgencies = $urgencies->getUrgencies();
-			
-			// get states
-			$states    = new YDCMHelpdesk_state();
-			$states    = $states->getStates();
+			// get urgencies, states and types
+			$urgencies = array_keys( YDConfig::get( 'YDCMHELPDESK_URGENCIES' ) );
+			$states    = YDConfig::get( 'YDCMHELPDESK_STATES' );
+			$types     = YDConfig::get( 'YDCMHELPDESK_TYPES' );
 
-			// get types
-			$types     = new YDCMHelpdesk_type();
-			$types     = $types->getTypes();
+			// delete 'allstates' and 'allurgencies' from states and types
+			array_shift( $urgencies );
+			array_shift( $states );
 
 			// add new form elements
             $form->addElement( 'text',			'subject',			 t('ticket_subject'),           array('size' => 50) );
             $form->addElement( 'select', 		'urgency_id',		 t('ticket_urgency_id'),        array(), $urgencies );
             $form->addElement( 'select',		'state_id',			 t('ticket_state_id'),          array(), $states );
-            $form->addElement( 'textarea',		'text',              t('ticket_text'),              array('cols' => 60, 'rows' => 12) );
+            $form->addElement( 'textarea',		'text',              t('ticket_text'),              array('cols' => 80, 'rows' => 15) );
 
             $form->addElement( 'span',			'creation_user',	 t('ticket_creation_user') );
             $form->addElement( 'datetimeselect','creation_date',     t('ticket_creation_date') );
 
-            $form->addElement( 'span',			'reported_by_user',	 t('ticket_reported_by_user'),  array('size' => 50) );
-            $form->addElement( 'select', 		'reported_by_type',	 t('ticket_reported_by_type'),  array(), $types );
-            $form->addElement( 'text',			'reported_by_local', t('ticket_reported_by_local') );
-            $form->addElement( 'datetimeselect','reported_by_date',	 t('ticket_reported_by_date') );
+            $form->addElement( 'text',			'reportedby_user',	 t('ticket_reportedby_user'),  array('size' => 50) );
+            $form->addElement( 'select', 		'reportedby_type',	 t('ticket_reportedby_type'),  array(), $types );
+            $form->addElement( 'text',			'reportedby_local',  t('ticket_reportedby_local') );
+            $form->addElement( 'datetimeselect','reportedby_date',	 t('ticket_reportedby_date') );
   
-            $form->addElement( 'span',          'assignedto_user',	 t('ticket_assignedto_user') );
-            $form->addElement( 'text',			'assignedto_type',	 t('ticket_assignedto_type'),   array('size' => 50) );
-            $form->addElement( 'select', 		'assignedto_local',	 t('ticket_assignedto_local'),  array(), $types );
-            $form->addElement( 'text',			'assignedto_date',   t('ticket_assignedto_date') );
-		
+            $form->addElement( 'text',          'assignedto_user',	 t('ticket_assignedto_user'),  array('size' => 50) );
+            $form->addElement( 'select',		'assignedto_type',	 t('ticket_assignedto_type'),  array(), $types  );
+            $form->addElement( 'text', 		    'assignedto_local',	 t('ticket_assignedto_local') );
+            $form->addElement( 'datetimeselect','assignedto_date',   t('ticket_assignedto_date') );
+
+			$form->setDefault( 'urgency_id', 1 );
+			$form->setDefault( 'state_id',   1 );
+
 			return $form;
 		}
 
@@ -280,28 +279,28 @@
          *  @param $values  Array of values
          */
 		function addPost( $helpdesk_id, $user_id, $values ){
-		
+
+			// get YDForm object
+			$form = $this->getFormPost();
+
+			// check form validation
+			if ( !$form->validate( $values ) )
+				return $form->getErrors();
+
 			$this->resetValues();
 		
 			// add required fields
 			// TODO: check if user, urgency and state exist
+			$this->setValues( $form->getValues() );
+
 			$this->component_id = $helpdesk_id;
 			$this->user_id      = $user_id;
-			$this->urgency_id   = $values['urgency_id'];
-			$this->state_id     = $values['state_id'];
 
+			// parse dates (convert ugly array in a date time sqlformat )
+			$this->creation_date   = YDStringUtil::formatDate( $this->creation_date,   'datetimesql' );
+			$this->reportedby_date = YDStringUtil::formatDate( $this->reportedby_date, 'datetimesql' );
+			$this->assignedto_date = YDStringUtil::formatDate( $this->assignedto_date, 'datetimesql' );
 
-			// add optional fields
-			if ( isset( $values['subject'] ) )           $this->subject           = $values['subject'];
-			if ( isset( $values['localization'] ) )      $this->localization      = $values['localization'];
-			if ( isset( $values['text'] ) )              $this->text              = $values['text'];
-			if ( isset( $values['created_in'] ) )        $this->created_in        = $values['created_in'];
-			if ( isset( $values['reported_in'] ) )       $this->reported_in       = $values['reported_in'];
-			if ( isset( $values['reported_by'] ) )       $this->reported_by       = $values['reported_by'];
-			if ( isset( $values['reported_to_in'] ) )    $this->reported_to_in    = $values['reported_to_in'];
-			if ( isset( $values['reported_to'] ) )       $this->reported_to       = $values['reported_to'];
-			if ( isset( $values['reported_to_local'] ) ) $this->reported_to_local = $values['reported_to_local'];
-			
 			return $this->insert();
 		}
 		
@@ -370,10 +369,10 @@
 			else                                                                                $desc = true;
 
 			// apply column order
-            $this->order( $column, $desc );
+            $this->order( $column . ' ' . $fields['g'] );
 
 			// apply state
-			if ( isset( $fields[ 'grid_state' ] ) && in_array( $fields[ 'grid_state' ], YDConfig::get( 'YDCMHELPDESK_STATES' ) ) )
+			if ( isset( $fields[ 'grid_state' ] ) && in_array( $fields[ 'grid_state' ], array_keys( YDConfig::get( 'YDCMHELPDESK_STATES' ) ) ) )
 				$this->state_id = $fields[ 'grid_state' ];
 
 			// apply urgency
@@ -388,7 +387,7 @@
 			else                                                                           $page = 1;
 
 			// create a recordset
-			return new YDRecordSet( $this->getResultsAsAssocArray( 'post_id', array_keys( $this->columns ), false, false, false, false ), $page, 9 );
+			return new YDRecordSet( $this->getResultsAsAssocArray( 'post_id', array_keys( $this->columns ), false, false, false, false ), $page, 3 );
 		}
 
 

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMLink/YDCMLink.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMLink/YDCMLink.php	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMLink/YDCMLink.php	2006-07-26 16:24:31 UTC (rev 1977)
@@ -49,5 +49,22 @@
 		}
 
 
+        /**
+         *  This function will render this element (to be used in a menu)
+         *
+         *  @returns    Html link
+         */
+		function render( $component, $url ){
+
+			$url->setQueryVar( 'component', $component[ 'type' ] );
+			$url->setQueryVar( 'id',        $component[ 'content_id' ] );
+
+			// get url properties from DB
+			$this->getNode( $component[ 'content_id' ] );
+
+			return '<a href="' . $this->url . '">' . $component[ 'title' ] . '</a>';
+		}
+
+
     }
 ?>
\ No newline at end of file

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMPage/YDCMPage.php	2006-07-26 16:24:31 UTC (rev 1977)
@@ -37,10 +37,10 @@
 
     class YDCMPage extends YDCMComponent {
     
-        function YDCMPage() {
+        function YDCMPage( $id = null ) {
 
 			// init component
-            $this->YDCMComponent( 'YDCMPage' );
+            $this->YDCMComponent( 'YDCMPage', $id );
 
             $this->_author = 'Francisco Azevedo';
             $this->_version = '0.1';
@@ -76,12 +76,12 @@
 
 
         /**
-         *  This function returns the page form
+         *  This function returns the page form (form admin edition)
          *
          *  @returns    YDForm object
          */
 		function getFormPage(){
-		
+
 			YDInclude( 'YDForm.php' );
 
 			// get template and language object

Modified: YDFramework2.0/trunk/YDFramework2/addons/YDCMRootmenu/YDCMRootmenu.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/addons/YDCMRootmenu/YDCMRootmenu.php	2006-07-26 16:10:19 UTC (rev 1976)
+++ YDFramework2.0/trunk/YDFramework2/addons/YDCMRootmenu/YDCMRootmenu.php	2006-07-26 16:24:31 UTC (rev 1977)
@@ -31,10 +31,10 @@
 
     class YDCMRootmenu extends YDCMComponent {
     
-        function YDCMRootmenu() {
+        function YDCMRootmenu( $id = null ) {
         
 			// init component
-            $this->YDCMComponent( 'YDCMRootmenu' );
+            $this->YDCMComponent( 'YDCMRootmenu', $id );
 
             $this->_author = 'Francisco Azevedo';
             $this->_version = '0.1';



From francisco at fusemail.com  Fri Jul 28 16:38:05 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Fri, 28 Jul 2006 15:38:05 +0100
Subject: [ydf-devel] SVN not working for commits
Message-ID: <44CA214D.50505@fusemail.com>

Hi

It's not possible to make any commits. I get 'No space left on device'.

Is there any quota defined?


regards
Francisco A


From ximian at mail.berlios.de  Mon Jul 31 11:50:48 2006
From: ximian at mail.berlios.de (ximian at mail.berlios.de)
Date: Mon, 31 Jul 2006 11:50:48 +0200
Subject: [ydf-devel] r1978 - YDFramework2.0/trunk/YDFramework2/YDClasses
Message-ID: <200607310950.k6V9omJw006371@sheep.berlios.de>

Author: ximian
Date: 2006-07-31 11:50:35 +0200 (Mon, 31 Jul 2006)
New Revision: 1978

Modified:
   YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
Log:
on YDForm::getValues() spans are ignored as they must have their values intact

Modified: YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-07-26 16:24:31 UTC (rev 1977)
+++ YDFramework2.0/trunk/YDFramework2/YDClasses/YDForm.php	2006-07-31 09:50:35 UTC (rev 1978)
@@ -686,12 +686,17 @@
 
         /**
          *  This function returns all the values for the form as an associative array.
+         *  NOTE: spans are ignored
          *
          *  @returns    The values for the form as an associative array.
          */
         function getValues() {
             $vars = array();
             foreach ( $this->_elements as $name => $element ) {
+
+                // check if elements are special
+                if ( $element->getType() == 'span' ) continue;
+
                 $vars[ $name ] = $this->getValue( $name );
             }
             return $vars;



From ximian at mail.berlios.de  Mon Jul 31 11:57:27 2006
From: ximian at mail.berlios.de (ximian at mail.berlios.de)
Date: Mon, 31 Jul 2006 11:57:27 +0200
Subject: [ydf-devel] r1979 - YDFramework2.0/trunk/YDFramework2
Message-ID: <200607310957.k6V9vRpF007049@sheep.berlios.de>

Author: ximian
Date: 2006-07-31 11:57:12 +0200 (Mon, 31 Jul 2006)
New Revision: 1979

Modified:
   YDFramework2.0/trunk/YDFramework2/YDF2_init.php
Log:
YDLocale::addDirectory will not warn when translation file doesn't exist

Modified: YDFramework2.0/trunk/YDFramework2/YDF2_init.php
===================================================================
--- YDFramework2.0/trunk/YDFramework2/YDF2_init.php	2006-07-31 09:50:35 UTC (rev 1978)
+++ YDFramework2.0/trunk/YDFramework2/YDF2_init.php	2006-07-31 09:57:12 UTC (rev 1979)
@@ -513,7 +513,9 @@
             if ( !isset( $GLOBALS['t'] ) ) {
                 $GLOBALS['t'] = array();
             }
-            include_once( $dir . '/' . YDLocale::get() . '.php' );
+
+            // just try to include language file
+            @ include_once( $dir . '/' . YDLocale::get() . '.php' );
         }
 
     }



From francisco at fusemail.com  Mon Jul 31 13:09:47 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Mon, 31 Jul 2006 12:09:47 +0100
Subject: [ydf-devel] SVN not working for commits
In-Reply-To: <44CA214D.50505@fusemail.com>
References: <44CA214D.50505@fusemail.com>
Message-ID: <44CDE4FB.6060706@fusemail.com>

Hi Pieter

Can you check this please?


> 
> It's not possible to make any commits. I get 'No space left on device'.
> 
> Is there any quota defined?
> 



regards
Francisco A


From pieter at yellowduck.be  Mon Jul 31 15:10:44 2006
From: pieter at yellowduck.be (Pieter Claerhout)
Date: Mon, 31 Jul 2006 15:10:44 +0200
Subject: [ydf-devel] SVN not working for commits
In-Reply-To: <44CDE4FB.6060706@fusemail.com>
References: <44CA214D.50505@fusemail.com> <44CDE4FB.6060706@fusemail.com>
Message-ID: <4aef63030607310610v7dc2a489v53d7a555bc951728@mail.gmail.com>

The harddrive of the svn server at berlios is full. There are already
several support requests logged for it.

Cheers,

pieter

On 7/31/06, Francisco Azevedo <francisco at fusemail.com> wrote:
>
> Hi Pieter
>
> Can you check this please?
>
>
> >
> > It's not possible to make any commits. I get 'No space left on device'.
> >
> > Is there any quota defined?
> >
>
>
>
> regards
> Francisco A
> _______________________________________________
> YDFramework-devel mailing list
> YDFramework-devel at lists.berlios.de
> http://bat.berlios.de/mailman/listinfo/ydframework-devel
>



-- 
pieter claerhout . pieter at yellowduck.be . http://www.yellowduck.be/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/ydframework-devel/attachments/20060731/07060691/attachment.html>

From francisco at fusemail.com  Mon Jul 31 18:01:04 2006
From: francisco at fusemail.com (Francisco Azevedo)
Date: Mon, 31 Jul 2006 17:01:04 +0100
Subject: [ydf-devel] SVN not working for commits
In-Reply-To: <4aef63030607310610v7dc2a489v53d7a555bc951728@mail.gmail.com>
References: <44CA214D.50505@fusemail.com> <44CDE4FB.6060706@fusemail.com>
	<4aef63030607310610v7dc2a489v53d7a555bc951728@mail.gmail.com>
Message-ID: <44CE2940.8060603@fusemail.com>

Hi Pieter


> The harddrive of the svn server at berlios is full. There are already 
> several support requests logged for it.


So, lets wait. :)


regards
Francisco A


